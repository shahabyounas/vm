var Pb=t=>{throw TypeError(t)};var Ag=(t,e,r)=>e.has(t)||Pb("Cannot "+r);var ie=(t,e,r)=>(Ag(t,e,"read from private field"),r?r.call(t):e.get(t)),st=(t,e,r)=>e.has(t)?Pb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Fe=(t,e,r,n)=>(Ag(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),gr=(t,e,r)=>(Ag(t,e,"access private method"),r);var jh=(t,e,r,n)=>({set _(s){Fe(t,e,s,r)},get _(){return ie(t,e,n)}});function GN(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Lv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $N={exports:{}},ep={},zN={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd=Symbol.for("react.element"),l4=Symbol.for("react.portal"),c4=Symbol.for("react.fragment"),u4=Symbol.for("react.strict_mode"),d4=Symbol.for("react.profiler"),h4=Symbol.for("react.provider"),f4=Symbol.for("react.context"),m4=Symbol.for("react.forward_ref"),p4=Symbol.for("react.suspense"),g4=Symbol.for("react.memo"),y4=Symbol.for("react.lazy"),kb=Symbol.iterator;function v4(t){return t===null||typeof t!="object"?null:(t=kb&&t[kb]||t["@@iterator"],typeof t=="function"?t:null)}var HN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WN=Object.assign,QN={};function ac(t,e,r){this.props=t,this.context=e,this.refs=QN,this.updater=r||HN}ac.prototype.isReactComponent={};ac.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ac.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YN(){}YN.prototype=ac.prototype;function Fv(t,e,r){this.props=t,this.context=e,this.refs=QN,this.updater=r||HN}var Vv=Fv.prototype=new YN;Vv.constructor=Fv;WN(Vv,ac.prototype);Vv.isPureReactComponent=!0;var Mb=Array.isArray,KN=Object.prototype.hasOwnProperty,Bv={current:null},JN={key:!0,ref:!0,__self:!0,__source:!0};function XN(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)KN.call(e,n)&&!JN.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:wd,type:t,key:i,ref:a,props:s,_owner:Bv.current}}function x4(t,e){return{$$typeof:wd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uv(t){return typeof t=="object"&&t!==null&&t.$$typeof===wd}function w4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Db=/\/+/g;function Sg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?w4(""+t.key):e.toString(36)}function pf(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case wd:case l4:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Sg(a,0):n,Mb(s)?(r="",t!=null&&(r=t.replace(Db,"$&/")+"/"),pf(s,e,r,"",function(u){return u})):s!=null&&(Uv(s)&&(s=x4(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Db,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Mb(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Sg(i,l);a+=pf(i,e,r,c,s)}else if(c=v4(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Sg(i,l++),a+=pf(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ph(t,e,r){if(t==null)return t;var n=[],s=0;return pf(t,n,"","",function(i){return e.call(r,i,s++)}),n}function b4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fr={current:null},gf={transition:null},E4={ReactCurrentDispatcher:Fr,ReactCurrentBatchConfig:gf,ReactCurrentOwner:Bv};function ZN(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Ph,forEach:function(t,e,r){Ph(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ph(t,function(){e++}),e},toArray:function(t){return Ph(t,function(e){return e})||[]},only:function(t){if(!Uv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=ac;ze.Fragment=c4;ze.Profiler=d4;ze.PureComponent=Fv;ze.StrictMode=u4;ze.Suspense=p4;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E4;ze.act=ZN;ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=WN({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Bv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)KN.call(e,c)&&!JN.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:wd,type:t.type,key:s,ref:i,props:n,_owner:a}};ze.createContext=function(t){return t={$$typeof:f4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:h4,_context:t},t.Consumer=t};ze.createElement=XN;ze.createFactory=function(t){var e=XN.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:m4,render:t}};ze.isValidElement=Uv;ze.lazy=function(t){return{$$typeof:y4,_payload:{_status:-1,_result:t},_init:b4}};ze.memo=function(t,e){return{$$typeof:g4,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=gf.transition;gf.transition={};try{t()}finally{gf.transition=e}};ze.unstable_act=ZN;ze.useCallback=function(t,e){return Fr.current.useCallback(t,e)};ze.useContext=function(t){return Fr.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return Fr.current.useDeferredValue(t)};ze.useEffect=function(t,e){return Fr.current.useEffect(t,e)};ze.useId=function(){return Fr.current.useId()};ze.useImperativeHandle=function(t,e,r){return Fr.current.useImperativeHandle(t,e,r)};ze.useInsertionEffect=function(t,e){return Fr.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return Fr.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return Fr.current.useMemo(t,e)};ze.useReducer=function(t,e,r){return Fr.current.useReducer(t,e,r)};ze.useRef=function(t){return Fr.current.useRef(t)};ze.useState=function(t){return Fr.current.useState(t)};ze.useSyncExternalStore=function(t,e,r){return Fr.current.useSyncExternalStore(t,e,r)};ze.useTransition=function(){return Fr.current.useTransition()};ze.version="18.3.1";zN.exports=ze;var p=zN.exports;const J=Lv(p),e_=GN({__proto__:null,default:J},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C4=p,N4=Symbol.for("react.element"),_4=Symbol.for("react.fragment"),T4=Object.prototype.hasOwnProperty,A4=C4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S4={key:!0,ref:!0,__self:!0,__source:!0};function t_(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)T4.call(e,n)&&!S4.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:N4,type:t,key:i,ref:a,props:s,_owner:A4.current}}ep.Fragment=_4;ep.jsx=t_;ep.jsxs=t_;$N.exports=ep;var o=$N.exports,r_={exports:{}},hn={},n_={exports:{}},s_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,H){var se=U.length;U.push(H);e:for(;0<se;){var re=se-1>>>1,ce=U[re];if(0<s(ce,H))U[re]=H,U[se]=ce,se=re;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var H=U[0],se=U.pop();if(se!==H){U[0]=se;e:for(var re=0,ce=U.length,he=ce>>>1;re<he;){var Te=2*(re+1)-1,Me=U[Te],Ce=Te+1,oe=U[Ce];if(0>s(Me,se))Ce<ce&&0>s(oe,Me)?(U[re]=oe,U[Ce]=se,re=Ce):(U[re]=Me,U[Te]=se,re=Te);else if(Ce<ce&&0>s(oe,se))U[re]=oe,U[Ce]=se,re=Ce;else break e}}return H}function s(U,H){var se=U.sortIndex-H.sortIndex;return se!==0?se:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,m=3,y=!1,x=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=U)n(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=r(u)}}function I(U){if(g=!1,C(U),!x)if(r(c)!==null)x=!0,Q(j);else{var H=r(u);H!==null&&Z(I,H.startTime-U)}}function j(U,H){x=!1,g&&(g=!1,E(N),N=-1),y=!0;var se=m;try{for(C(H),f=r(c);f!==null&&(!(f.expirationTime>H)||U&&!O());){var re=f.callback;if(typeof re=="function"){f.callback=null,m=f.priorityLevel;var ce=re(f.expirationTime<=H);H=t.unstable_now(),typeof ce=="function"?f.callback=ce:f===r(c)&&n(c),C(H)}else n(c);f=r(c)}if(f!==null)var he=!0;else{var Te=r(u);Te!==null&&Z(I,Te.startTime-H),he=!1}return he}finally{f=null,m=se,y=!1}}var V=!1,R=null,N=-1,S=5,P=-1;function O(){return!(t.unstable_now()-P<S)}function M(){if(R!==null){var U=t.unstable_now();P=U;var H=!0;try{H=R(!0,U)}finally{H?k():(V=!1,R=null)}}else V=!1}var k;if(typeof w=="function")k=function(){w(M)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=M,k=function(){z.postMessage(null)}}else k=function(){b(M,0)};function Q(U){R=U,V||(V=!0,k())}function Z(U,H){N=b(function(){U(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,Q(j))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var se=m;m=H;try{return U()}finally{m=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var se=m;m=U;try{return H()}finally{m=se}},t.unstable_scheduleCallback=function(U,H,se){var re=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?re+se:re):se=re,U){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=se+ce,U={id:d++,callback:H,priorityLevel:U,startTime:se,expirationTime:ce,sortIndex:-1},se>re?(U.sortIndex=se,e(u,U),r(c)===null&&U===r(u)&&(g?(E(N),N=-1):g=!0,Z(I,se-re))):(U.sortIndex=ce,e(c,U),x||y||(x=!0,Q(j))),U},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(U){var H=m;return function(){var se=m;m=H;try{return U.apply(this,arguments)}finally{m=se}}}})(s_);n_.exports=s_;var R4=n_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I4=p,dn=R4;function ue(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i_=new Set,Pu={};function Na(t,e){Gl(t,e),Gl(t+"Capture",e)}function Gl(t,e){for(Pu[t]=e,t=0;t<e.length;t++)i_.add(e[t])}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P0=Object.prototype.hasOwnProperty,j4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ob={},Lb={};function P4(t){return P0.call(Lb,t)?!0:P0.call(Ob,t)?!1:j4.test(t)?Lb[t]=!0:(Ob[t]=!0,!1)}function k4(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M4(t,e,r,n){if(e===null||typeof e>"u"||k4(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vr(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dr[t]=new Vr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dr[e]=new Vr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dr[t]=new Vr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dr[t]=new Vr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dr[t]=new Vr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dr[t]=new Vr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dr[t]=new Vr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dr[t]=new Vr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dr[t]=new Vr(t,5,!1,t.toLowerCase(),null,!1,!1)});var qv=/[\-:]([a-z])/g;function Gv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qv,Gv);dr[e]=new Vr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qv,Gv);dr[e]=new Vr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qv,Gv);dr[e]=new Vr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dr[t]=new Vr(t,1,!1,t.toLowerCase(),null,!1,!1)});dr.xlinkHref=new Vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dr[t]=new Vr(t,1,!1,t.toLowerCase(),null,!0,!0)});function $v(t,e,r,n){var s=dr.hasOwnProperty(e)?dr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(M4(e,r,s,n)&&(r=null),n||s===null?P4(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var di=I4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kh=Symbol.for("react.element"),il=Symbol.for("react.portal"),ol=Symbol.for("react.fragment"),zv=Symbol.for("react.strict_mode"),k0=Symbol.for("react.profiler"),o_=Symbol.for("react.provider"),a_=Symbol.for("react.context"),Hv=Symbol.for("react.forward_ref"),M0=Symbol.for("react.suspense"),D0=Symbol.for("react.suspense_list"),Wv=Symbol.for("react.memo"),Pi=Symbol.for("react.lazy"),l_=Symbol.for("react.offscreen"),Fb=Symbol.iterator;function Bc(t){return t===null||typeof t!="object"?null:(t=Fb&&t[Fb]||t["@@iterator"],typeof t=="function"?t:null)}var Rt=Object.assign,Rg;function Xc(t){if(Rg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Rg=e&&e[1]||""}return`
`+Rg+t}var Ig=!1;function jg(t,e){if(!t||Ig)return"";Ig=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Ig=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Xc(t):""}function D4(t){switch(t.tag){case 5:return Xc(t.type);case 16:return Xc("Lazy");case 13:return Xc("Suspense");case 19:return Xc("SuspenseList");case 0:case 2:case 15:return t=jg(t.type,!1),t;case 11:return t=jg(t.type.render,!1),t;case 1:return t=jg(t.type,!0),t;default:return""}}function O0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ol:return"Fragment";case il:return"Portal";case k0:return"Profiler";case zv:return"StrictMode";case M0:return"Suspense";case D0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case a_:return(t.displayName||"Context")+".Consumer";case o_:return(t._context.displayName||"Context")+".Provider";case Hv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wv:return e=t.displayName||null,e!==null?e:O0(t.type)||"Memo";case Pi:e=t._payload,t=t._init;try{return O0(t(e))}catch{}}return null}function O4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O0(e);case 8:return e===zv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function uo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function c_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function L4(t){var e=c_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mh(t){t._valueTracker||(t._valueTracker=L4(t))}function u_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=c_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Kf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function L0(t,e){var r=e.checked;return Rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Vb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=uo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function d_(t,e){e=e.checked,e!=null&&$v(t,"checked",e,!1)}function F0(t,e){d_(t,e);var r=uo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?V0(t,e.type,r):e.hasOwnProperty("defaultValue")&&V0(t,e.type,uo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function V0(t,e,r){(e!=="number"||Kf(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Zc=Array.isArray;function xl(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+uo(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function B0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ue(91));return Rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ub(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ue(92));if(Zc(r)){if(1<r.length)throw Error(ue(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:uo(r)}}function h_(t,e){var r=uo(e.value),n=uo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function qb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function f_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function U0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?f_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dh,m_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dh=Dh||document.createElement("div"),Dh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ku(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F4=["Webkit","ms","Moz","O"];Object.keys(fu).forEach(function(t){F4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fu[e]=fu[t]})});function p_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||fu.hasOwnProperty(t)&&fu[t]?(""+e).trim():e+"px"}function g_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=p_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var V4=Rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q0(t,e){if(e){if(V4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ue(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ue(62))}}function G0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $0=null;function Qv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var z0=null,wl=null,bl=null;function Gb(t){if(t=Cd(t)){if(typeof z0!="function")throw Error(ue(280));var e=t.stateNode;e&&(e=ip(e),z0(t.stateNode,t.type,e))}}function y_(t){wl?bl?bl.push(t):bl=[t]:wl=t}function v_(){if(wl){var t=wl,e=bl;if(bl=wl=null,Gb(t),e)for(t=0;t<e.length;t++)Gb(e[t])}}function x_(t,e){return t(e)}function w_(){}var Pg=!1;function b_(t,e,r){if(Pg)return t(e,r);Pg=!0;try{return x_(t,e,r)}finally{Pg=!1,(wl!==null||bl!==null)&&(w_(),v_())}}function Mu(t,e){var r=t.stateNode;if(r===null)return null;var n=ip(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ue(231,e,typeof r));return r}var H0=!1;if(ei)try{var Uc={};Object.defineProperty(Uc,"passive",{get:function(){H0=!0}}),window.addEventListener("test",Uc,Uc),window.removeEventListener("test",Uc,Uc)}catch{H0=!1}function B4(t,e,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var mu=!1,Jf=null,Xf=!1,W0=null,U4={onError:function(t){mu=!0,Jf=t}};function q4(t,e,r,n,s,i,a,l,c){mu=!1,Jf=null,B4.apply(U4,arguments)}function G4(t,e,r,n,s,i,a,l,c){if(q4.apply(this,arguments),mu){if(mu){var u=Jf;mu=!1,Jf=null}else throw Error(ue(198));Xf||(Xf=!0,W0=u)}}function _a(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function E_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $b(t){if(_a(t)!==t)throw Error(ue(188))}function $4(t){var e=t.alternate;if(!e){if(e=_a(t),e===null)throw Error(ue(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return $b(s),t;if(i===n)return $b(s),e;i=i.sibling}throw Error(ue(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(ue(189))}}if(r.alternate!==n)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?t:e}function C_(t){return t=$4(t),t!==null?N_(t):null}function N_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=N_(t);if(e!==null)return e;t=t.sibling}return null}var __=dn.unstable_scheduleCallback,zb=dn.unstable_cancelCallback,z4=dn.unstable_shouldYield,H4=dn.unstable_requestPaint,Ft=dn.unstable_now,W4=dn.unstable_getCurrentPriorityLevel,Yv=dn.unstable_ImmediatePriority,T_=dn.unstable_UserBlockingPriority,Zf=dn.unstable_NormalPriority,Q4=dn.unstable_LowPriority,A_=dn.unstable_IdlePriority,tp=null,hs=null;function Y4(t){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(tp,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:X4,K4=Math.log,J4=Math.LN2;function X4(t){return t>>>=0,t===0?32:31-(K4(t)/J4|0)|0}var Oh=64,Lh=4194304;function eu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function em(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=eu(l):(i&=a,i!==0&&(n=eu(i)))}else a=r&~s,a!==0?n=eu(a):i!==0&&(n=eu(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Yn(e),s=1<<r,n|=t[r],e&=~s;return n}function Z4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eM(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Yn(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=Z4(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Q0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function S_(){var t=Oh;return Oh<<=1,!(Oh&4194240)&&(Oh=64),t}function kg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function bd(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=r}function tM(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Yn(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Kv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Yn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var ut=0;function R_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var I_,Jv,j_,P_,k_,Y0=!1,Fh=[],Ki=null,Ji=null,Xi=null,Du=new Map,Ou=new Map,Di=[],rM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hb(t,e){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Du.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(e.pointerId)}}function qc(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Cd(e),e!==null&&Jv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function nM(t,e,r,n,s){switch(e){case"focusin":return Ki=qc(Ki,t,e,r,n,s),!0;case"dragenter":return Ji=qc(Ji,t,e,r,n,s),!0;case"mouseover":return Xi=qc(Xi,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Du.set(i,qc(Du.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ou.set(i,qc(Ou.get(i)||null,t,e,r,n,s)),!0}return!1}function M_(t){var e=Ko(t.target);if(e!==null){var r=_a(e);if(r!==null){if(e=r.tag,e===13){if(e=E_(r),e!==null){t.blockedOn=e,k_(t.priority,function(){j_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=K0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);$0=n,r.target.dispatchEvent(n),$0=null}else return e=Cd(r),e!==null&&Jv(e),t.blockedOn=r,!1;e.shift()}return!0}function Wb(t,e,r){yf(t)&&r.delete(e)}function sM(){Y0=!1,Ki!==null&&yf(Ki)&&(Ki=null),Ji!==null&&yf(Ji)&&(Ji=null),Xi!==null&&yf(Xi)&&(Xi=null),Du.forEach(Wb),Ou.forEach(Wb)}function Gc(t,e){t.blockedOn===e&&(t.blockedOn=null,Y0||(Y0=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,sM)))}function Lu(t){function e(s){return Gc(s,t)}if(0<Fh.length){Gc(Fh[0],t);for(var r=1;r<Fh.length;r++){var n=Fh[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ki!==null&&Gc(Ki,t),Ji!==null&&Gc(Ji,t),Xi!==null&&Gc(Xi,t),Du.forEach(e),Ou.forEach(e),r=0;r<Di.length;r++)n=Di[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Di.length&&(r=Di[0],r.blockedOn===null);)M_(r),r.blockedOn===null&&Di.shift()}var El=di.ReactCurrentBatchConfig,tm=!0;function iM(t,e,r,n){var s=ut,i=El.transition;El.transition=null;try{ut=1,Xv(t,e,r,n)}finally{ut=s,El.transition=i}}function oM(t,e,r,n){var s=ut,i=El.transition;El.transition=null;try{ut=4,Xv(t,e,r,n)}finally{ut=s,El.transition=i}}function Xv(t,e,r,n){if(tm){var s=K0(t,e,r,n);if(s===null)Gg(t,e,n,rm,r),Hb(t,n);else if(nM(s,t,e,r,n))n.stopPropagation();else if(Hb(t,n),e&4&&-1<rM.indexOf(t)){for(;s!==null;){var i=Cd(s);if(i!==null&&I_(i),i=K0(t,e,r,n),i===null&&Gg(t,e,n,rm,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Gg(t,e,n,null,r)}}var rm=null;function K0(t,e,r,n){if(rm=null,t=Qv(n),t=Ko(t),t!==null)if(e=_a(t),e===null)t=null;else if(r=e.tag,r===13){if(t=E_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rm=t,null}function D_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W4()){case Yv:return 1;case T_:return 4;case Zf:case Q4:return 16;case A_:return 536870912;default:return 16}default:return 16}}var Hi=null,Zv=null,vf=null;function O_(){if(vf)return vf;var t,e=Zv,r=e.length,n,s="value"in Hi?Hi.value:Hi.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return vf=s.slice(t,1<n?1-n:void 0)}function xf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vh(){return!0}function Qb(){return!1}function fn(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vh:Qb,this.isPropagationStopped=Qb,this}return Rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vh)},persist:function(){},isPersistent:Vh}),e}var lc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ex=fn(lc),Ed=Rt({},lc,{view:0,detail:0}),aM=fn(Ed),Mg,Dg,$c,rp=Rt({},Ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$c&&($c&&t.type==="mousemove"?(Mg=t.screenX-$c.screenX,Dg=t.screenY-$c.screenY):Dg=Mg=0,$c=t),Mg)},movementY:function(t){return"movementY"in t?t.movementY:Dg}}),Yb=fn(rp),lM=Rt({},rp,{dataTransfer:0}),cM=fn(lM),uM=Rt({},Ed,{relatedTarget:0}),Og=fn(uM),dM=Rt({},lc,{animationName:0,elapsedTime:0,pseudoElement:0}),hM=fn(dM),fM=Rt({},lc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mM=fn(fM),pM=Rt({},lc,{data:0}),Kb=fn(pM),gM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vM[t])?!!e[t]:!1}function tx(){return xM}var wM=Rt({},Ed,{key:function(t){if(t.key){var e=gM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tx,charCode:function(t){return t.type==="keypress"?xf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bM=fn(wM),EM=Rt({},rp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jb=fn(EM),CM=Rt({},Ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tx}),NM=fn(CM),_M=Rt({},lc,{propertyName:0,elapsedTime:0,pseudoElement:0}),TM=fn(_M),AM=Rt({},rp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SM=fn(AM),RM=[9,13,27,32],rx=ei&&"CompositionEvent"in window,pu=null;ei&&"documentMode"in document&&(pu=document.documentMode);var IM=ei&&"TextEvent"in window&&!pu,L_=ei&&(!rx||pu&&8<pu&&11>=pu),Xb=" ",Zb=!1;function F_(t,e){switch(t){case"keyup":return RM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var al=!1;function jM(t,e){switch(t){case"compositionend":return V_(e);case"keypress":return e.which!==32?null:(Zb=!0,Xb);case"textInput":return t=e.data,t===Xb&&Zb?null:t;default:return null}}function PM(t,e){if(al)return t==="compositionend"||!rx&&F_(t,e)?(t=O_(),vf=Zv=Hi=null,al=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L_&&e.locale!=="ko"?null:e.data;default:return null}}var kM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kM[t.type]:e==="textarea"}function B_(t,e,r,n){y_(n),e=nm(e,"onChange"),0<e.length&&(r=new ex("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var gu=null,Fu=null;function MM(t){J_(t,0)}function np(t){var e=ul(t);if(u_(e))return t}function DM(t,e){if(t==="change")return e}var U_=!1;if(ei){var Lg;if(ei){var Fg="oninput"in document;if(!Fg){var t1=document.createElement("div");t1.setAttribute("oninput","return;"),Fg=typeof t1.oninput=="function"}Lg=Fg}else Lg=!1;U_=Lg&&(!document.documentMode||9<document.documentMode)}function r1(){gu&&(gu.detachEvent("onpropertychange",q_),Fu=gu=null)}function q_(t){if(t.propertyName==="value"&&np(Fu)){var e=[];B_(e,Fu,t,Qv(t)),b_(MM,e)}}function OM(t,e,r){t==="focusin"?(r1(),gu=e,Fu=r,gu.attachEvent("onpropertychange",q_)):t==="focusout"&&r1()}function LM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return np(Fu)}function FM(t,e){if(t==="click")return np(e)}function VM(t,e){if(t==="input"||t==="change")return np(e)}function BM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:BM;function Vu(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!P0.call(e,s)||!Xn(t[s],e[s]))return!1}return!0}function n1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function s1(t,e){var r=n1(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=n1(r)}}function G_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?G_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $_(){for(var t=window,e=Kf();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Kf(t.document)}return e}function nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UM(t){var e=$_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&G_(r.ownerDocument.documentElement,r)){if(n!==null&&nx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=s1(r,i);var a=s1(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qM=ei&&"documentMode"in document&&11>=document.documentMode,ll=null,J0=null,yu=null,X0=!1;function i1(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;X0||ll==null||ll!==Kf(n)||(n=ll,"selectionStart"in n&&nx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yu&&Vu(yu,n)||(yu=n,n=nm(J0,"onSelect"),0<n.length&&(e=new ex("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ll)))}function Bh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var cl={animationend:Bh("Animation","AnimationEnd"),animationiteration:Bh("Animation","AnimationIteration"),animationstart:Bh("Animation","AnimationStart"),transitionend:Bh("Transition","TransitionEnd")},Vg={},z_={};ei&&(z_=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function sp(t){if(Vg[t])return Vg[t];if(!cl[t])return t;var e=cl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in z_)return Vg[t]=e[r];return t}var H_=sp("animationend"),W_=sp("animationiteration"),Q_=sp("animationstart"),Y_=sp("transitionend"),K_=new Map,o1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function To(t,e){K_.set(t,e),Na(e,[t])}for(var Bg=0;Bg<o1.length;Bg++){var Ug=o1[Bg],GM=Ug.toLowerCase(),$M=Ug[0].toUpperCase()+Ug.slice(1);To(GM,"on"+$M)}To(H_,"onAnimationEnd");To(W_,"onAnimationIteration");To(Q_,"onAnimationStart");To("dblclick","onDoubleClick");To("focusin","onFocus");To("focusout","onBlur");To(Y_,"onTransitionEnd");Gl("onMouseEnter",["mouseout","mouseover"]);Gl("onMouseLeave",["mouseout","mouseover"]);Gl("onPointerEnter",["pointerout","pointerover"]);Gl("onPointerLeave",["pointerout","pointerover"]);Na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Na("onBeforeInput",["compositionend","keypress","textInput","paste"]);Na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zM=new Set("cancel close invalid load scroll toggle".split(" ").concat(tu));function a1(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,G4(n,e,void 0,t),t.currentTarget=null}function J_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;a1(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;a1(s,l,u),i=c}}}if(Xf)throw t=W0,Xf=!1,W0=null,t}function wt(t,e){var r=e[ny];r===void 0&&(r=e[ny]=new Set);var n=t+"__bubble";r.has(n)||(X_(e,t,2,!1),r.add(n))}function qg(t,e,r){var n=0;e&&(n|=4),X_(r,t,n,e)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function Bu(t){if(!t[Uh]){t[Uh]=!0,i_.forEach(function(r){r!=="selectionchange"&&(zM.has(r)||qg(r,!1,t),qg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uh]||(e[Uh]=!0,qg("selectionchange",!1,e))}}function X_(t,e,r,n){switch(D_(e)){case 1:var s=iM;break;case 4:s=oM;break;default:s=Xv}r=s.bind(null,e,r,t),s=void 0,!H0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Gg(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ko(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}b_(function(){var u=i,d=Qv(r),f=[];e:{var m=K_.get(t);if(m!==void 0){var y=ex,x=t;switch(t){case"keypress":if(xf(r)===0)break e;case"keydown":case"keyup":y=bM;break;case"focusin":x="focus",y=Og;break;case"focusout":x="blur",y=Og;break;case"beforeblur":case"afterblur":y=Og;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Yb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=cM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=NM;break;case H_:case W_:case Q_:y=hM;break;case Y_:y=TM;break;case"scroll":y=aM;break;case"wheel":y=SM;break;case"copy":case"cut":case"paste":y=mM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Jb}var g=(e&4)!==0,b=!g&&t==="scroll",E=g?m!==null?m+"Capture":null:m;g=[];for(var w=u,C;w!==null;){C=w;var I=C.stateNode;if(C.tag===5&&I!==null&&(C=I,E!==null&&(I=Mu(w,E),I!=null&&g.push(Uu(w,I,C)))),b)break;w=w.return}0<g.length&&(m=new y(m,x,null,r,d),f.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&r!==$0&&(x=r.relatedTarget||r.fromElement)&&(Ko(x)||x[ti]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=r.relatedTarget||r.toElement,y=u,x=x?Ko(x):null,x!==null&&(b=_a(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(g=Yb,I="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=Jb,I="onPointerLeave",E="onPointerEnter",w="pointer"),b=y==null?m:ul(y),C=x==null?m:ul(x),m=new g(I,w+"leave",y,r,d),m.target=b,m.relatedTarget=C,I=null,Ko(d)===u&&(g=new g(E,w+"enter",x,r,d),g.target=C,g.relatedTarget=b,I=g),b=I,y&&x)t:{for(g=y,E=x,w=0,C=g;C;C=Ja(C))w++;for(C=0,I=E;I;I=Ja(I))C++;for(;0<w-C;)g=Ja(g),w--;for(;0<C-w;)E=Ja(E),C--;for(;w--;){if(g===E||E!==null&&g===E.alternate)break t;g=Ja(g),E=Ja(E)}g=null}else g=null;y!==null&&l1(f,m,y,g,!1),x!==null&&b!==null&&l1(f,b,x,g,!0)}}e:{if(m=u?ul(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var j=DM;else if(e1(m))if(U_)j=VM;else{j=LM;var V=OM}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=FM);if(j&&(j=j(t,u))){B_(f,j,r,d);break e}V&&V(t,m,u),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&V0(m,"number",m.value)}switch(V=u?ul(u):window,t){case"focusin":(e1(V)||V.contentEditable==="true")&&(ll=V,J0=u,yu=null);break;case"focusout":yu=J0=ll=null;break;case"mousedown":X0=!0;break;case"contextmenu":case"mouseup":case"dragend":X0=!1,i1(f,r,d);break;case"selectionchange":if(qM)break;case"keydown":case"keyup":i1(f,r,d)}var R;if(rx)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else al?F_(t,r)&&(N="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(L_&&r.locale!=="ko"&&(al||N!=="onCompositionStart"?N==="onCompositionEnd"&&al&&(R=O_()):(Hi=d,Zv="value"in Hi?Hi.value:Hi.textContent,al=!0)),V=nm(u,N),0<V.length&&(N=new Kb(N,t,null,r,d),f.push({event:N,listeners:V}),R?N.data=R:(R=V_(r),R!==null&&(N.data=R)))),(R=IM?jM(t,r):PM(t,r))&&(u=nm(u,"onBeforeInput"),0<u.length&&(d=new Kb("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=R))}J_(f,e)})}function Uu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function nm(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Mu(t,r),i!=null&&n.unshift(Uu(t,i,s)),i=Mu(t,e),i!=null&&n.push(Uu(t,i,s))),t=t.return}return n}function Ja(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l1(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Mu(r,i),c!=null&&a.unshift(Uu(r,c,l))):s||(c=Mu(r,i),c!=null&&a.push(Uu(r,c,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var HM=/\r\n?/g,WM=/\u0000|\uFFFD/g;function c1(t){return(typeof t=="string"?t:""+t).replace(HM,`
`).replace(WM,"")}function qh(t,e,r){if(e=c1(e),c1(t)!==e&&r)throw Error(ue(425))}function sm(){}var Z0=null,ey=null;function ty(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ry=typeof setTimeout=="function"?setTimeout:void 0,QM=typeof clearTimeout=="function"?clearTimeout:void 0,u1=typeof Promise=="function"?Promise:void 0,YM=typeof queueMicrotask=="function"?queueMicrotask:typeof u1<"u"?function(t){return u1.resolve(null).then(t).catch(KM)}:ry;function KM(t){setTimeout(function(){throw t})}function $g(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Lu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Lu(e)}function Zi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function d1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var cc=Math.random().toString(36).slice(2),us="__reactFiber$"+cc,qu="__reactProps$"+cc,ti="__reactContainer$"+cc,ny="__reactEvents$"+cc,JM="__reactListeners$"+cc,XM="__reactHandles$"+cc;function Ko(t){var e=t[us];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ti]||r[us]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=d1(t);t!==null;){if(r=t[us])return r;t=d1(t)}return e}t=r,r=t.parentNode}return null}function Cd(t){return t=t[us]||t[ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ul(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ue(33))}function ip(t){return t[qu]||null}var sy=[],dl=-1;function Ao(t){return{current:t}}function bt(t){0>dl||(t.current=sy[dl],sy[dl]=null,dl--)}function yt(t,e){dl++,sy[dl]=t.current,t.current=e}var ho={},Nr=Ao(ho),Wr=Ao(!1),ca=ho;function $l(t,e){var r=t.type.contextTypes;if(!r)return ho;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Qr(t){return t=t.childContextTypes,t!=null}function im(){bt(Wr),bt(Nr)}function h1(t,e,r){if(Nr.current!==ho)throw Error(ue(168));yt(Nr,e),yt(Wr,r)}function Z_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ue(108,O4(t)||"Unknown",s));return Rt({},r,n)}function om(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ho,ca=Nr.current,yt(Nr,t),yt(Wr,Wr.current),!0}function f1(t,e,r){var n=t.stateNode;if(!n)throw Error(ue(169));r?(t=Z_(t,e,ca),n.__reactInternalMemoizedMergedChildContext=t,bt(Wr),bt(Nr),yt(Nr,t)):bt(Wr),yt(Wr,r)}var zs=null,op=!1,zg=!1;function eT(t){zs===null?zs=[t]:zs.push(t)}function ZM(t){op=!0,eT(t)}function So(){if(!zg&&zs!==null){zg=!0;var t=0,e=ut;try{var r=zs;for(ut=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}zs=null,op=!1}catch(s){throw zs!==null&&(zs=zs.slice(t+1)),__(Yv,So),s}finally{ut=e,zg=!1}}return null}var hl=[],fl=0,am=null,lm=0,wn=[],bn=0,ua=null,Hs=1,Ws="";function Wo(t,e){hl[fl++]=lm,hl[fl++]=am,am=t,lm=e}function tT(t,e,r){wn[bn++]=Hs,wn[bn++]=Ws,wn[bn++]=ua,ua=t;var n=Hs;t=Ws;var s=32-Yn(n)-1;n&=~(1<<s),r+=1;var i=32-Yn(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Hs=1<<32-Yn(e)+s|r<<s|n,Ws=i+t}else Hs=1<<i|r<<s|n,Ws=t}function sx(t){t.return!==null&&(Wo(t,1),tT(t,1,0))}function ix(t){for(;t===am;)am=hl[--fl],hl[fl]=null,lm=hl[--fl],hl[fl]=null;for(;t===ua;)ua=wn[--bn],wn[bn]=null,Ws=wn[--bn],wn[bn]=null,Hs=wn[--bn],wn[bn]=null}var ln=null,on=null,Tt=!1,Hn=null;function rT(t,e){var r=Nn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function m1(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,on=Zi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ua!==null?{id:Hs,overflow:Ws}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Nn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ln=t,on=null,!0):!1;default:return!1}}function iy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oy(t){if(Tt){var e=on;if(e){var r=e;if(!m1(t,e)){if(iy(t))throw Error(ue(418));e=Zi(r.nextSibling);var n=ln;e&&m1(t,e)?rT(n,r):(t.flags=t.flags&-4097|2,Tt=!1,ln=t)}}else{if(iy(t))throw Error(ue(418));t.flags=t.flags&-4097|2,Tt=!1,ln=t}}}function p1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function Gh(t){if(t!==ln)return!1;if(!Tt)return p1(t),Tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ty(t.type,t.memoizedProps)),e&&(e=on)){if(iy(t))throw nT(),Error(ue(418));for(;e;)rT(t,e),e=Zi(e.nextSibling)}if(p1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ue(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){on=Zi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}on=null}}else on=ln?Zi(t.stateNode.nextSibling):null;return!0}function nT(){for(var t=on;t;)t=Zi(t.nextSibling)}function zl(){on=ln=null,Tt=!1}function ox(t){Hn===null?Hn=[t]:Hn.push(t)}var eD=di.ReactCurrentBatchConfig;function zc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var n=r.stateNode}if(!n)throw Error(ue(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,t))}return t}function $h(t,e){throw t=Object.prototype.toString.call(e),Error(ue(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g1(t){var e=t._init;return e(t._payload)}function sT(t){function e(E,w){if(t){var C=E.deletions;C===null?(E.deletions=[w],E.flags|=16):C.push(w)}}function r(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function n(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=no(E,w),E.index=0,E.sibling=null,E}function i(E,w,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<w?(E.flags|=2,w):C):(E.flags|=2,w)):(E.flags|=1048576,w)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,C,I){return w===null||w.tag!==6?(w=Xg(C,E.mode,I),w.return=E,w):(w=s(w,C),w.return=E,w)}function c(E,w,C,I){var j=C.type;return j===ol?d(E,w,C.props.children,I,C.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Pi&&g1(j)===w.type)?(I=s(w,C.props),I.ref=zc(E,w,C),I.return=E,I):(I=Tf(C.type,C.key,C.props,null,E.mode,I),I.ref=zc(E,w,C),I.return=E,I)}function u(E,w,C,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Zg(C,E.mode,I),w.return=E,w):(w=s(w,C.children||[]),w.return=E,w)}function d(E,w,C,I,j){return w===null||w.tag!==7?(w=ia(C,E.mode,I,j),w.return=E,w):(w=s(w,C),w.return=E,w)}function f(E,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Xg(""+w,E.mode,C),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case kh:return C=Tf(w.type,w.key,w.props,null,E.mode,C),C.ref=zc(E,null,w),C.return=E,C;case il:return w=Zg(w,E.mode,C),w.return=E,w;case Pi:var I=w._init;return f(E,I(w._payload),C)}if(Zc(w)||Bc(w))return w=ia(w,E.mode,C,null),w.return=E,w;$h(E,w)}return null}function m(E,w,C,I){var j=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return j!==null?null:l(E,w,""+C,I);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case kh:return C.key===j?c(E,w,C,I):null;case il:return C.key===j?u(E,w,C,I):null;case Pi:return j=C._init,m(E,w,j(C._payload),I)}if(Zc(C)||Bc(C))return j!==null?null:d(E,w,C,I,null);$h(E,C)}return null}function y(E,w,C,I,j){if(typeof I=="string"&&I!==""||typeof I=="number")return E=E.get(C)||null,l(w,E,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case kh:return E=E.get(I.key===null?C:I.key)||null,c(w,E,I,j);case il:return E=E.get(I.key===null?C:I.key)||null,u(w,E,I,j);case Pi:var V=I._init;return y(E,w,C,V(I._payload),j)}if(Zc(I)||Bc(I))return E=E.get(C)||null,d(w,E,I,j,null);$h(w,I)}return null}function x(E,w,C,I){for(var j=null,V=null,R=w,N=w=0,S=null;R!==null&&N<C.length;N++){R.index>N?(S=R,R=null):S=R.sibling;var P=m(E,R,C[N],I);if(P===null){R===null&&(R=S);break}t&&R&&P.alternate===null&&e(E,R),w=i(P,w,N),V===null?j=P:V.sibling=P,V=P,R=S}if(N===C.length)return r(E,R),Tt&&Wo(E,N),j;if(R===null){for(;N<C.length;N++)R=f(E,C[N],I),R!==null&&(w=i(R,w,N),V===null?j=R:V.sibling=R,V=R);return Tt&&Wo(E,N),j}for(R=n(E,R);N<C.length;N++)S=y(R,E,N,C[N],I),S!==null&&(t&&S.alternate!==null&&R.delete(S.key===null?N:S.key),w=i(S,w,N),V===null?j=S:V.sibling=S,V=S);return t&&R.forEach(function(O){return e(E,O)}),Tt&&Wo(E,N),j}function g(E,w,C,I){var j=Bc(C);if(typeof j!="function")throw Error(ue(150));if(C=j.call(C),C==null)throw Error(ue(151));for(var V=j=null,R=w,N=w=0,S=null,P=C.next();R!==null&&!P.done;N++,P=C.next()){R.index>N?(S=R,R=null):S=R.sibling;var O=m(E,R,P.value,I);if(O===null){R===null&&(R=S);break}t&&R&&O.alternate===null&&e(E,R),w=i(O,w,N),V===null?j=O:V.sibling=O,V=O,R=S}if(P.done)return r(E,R),Tt&&Wo(E,N),j;if(R===null){for(;!P.done;N++,P=C.next())P=f(E,P.value,I),P!==null&&(w=i(P,w,N),V===null?j=P:V.sibling=P,V=P);return Tt&&Wo(E,N),j}for(R=n(E,R);!P.done;N++,P=C.next())P=y(R,E,N,P.value,I),P!==null&&(t&&P.alternate!==null&&R.delete(P.key===null?N:P.key),w=i(P,w,N),V===null?j=P:V.sibling=P,V=P);return t&&R.forEach(function(M){return e(E,M)}),Tt&&Wo(E,N),j}function b(E,w,C,I){if(typeof C=="object"&&C!==null&&C.type===ol&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case kh:e:{for(var j=C.key,V=w;V!==null;){if(V.key===j){if(j=C.type,j===ol){if(V.tag===7){r(E,V.sibling),w=s(V,C.props.children),w.return=E,E=w;break e}}else if(V.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Pi&&g1(j)===V.type){r(E,V.sibling),w=s(V,C.props),w.ref=zc(E,V,C),w.return=E,E=w;break e}r(E,V);break}else e(E,V);V=V.sibling}C.type===ol?(w=ia(C.props.children,E.mode,I,C.key),w.return=E,E=w):(I=Tf(C.type,C.key,C.props,null,E.mode,I),I.ref=zc(E,w,C),I.return=E,E=I)}return a(E);case il:e:{for(V=C.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){r(E,w.sibling),w=s(w,C.children||[]),w.return=E,E=w;break e}else{r(E,w);break}else e(E,w);w=w.sibling}w=Zg(C,E.mode,I),w.return=E,E=w}return a(E);case Pi:return V=C._init,b(E,w,V(C._payload),I)}if(Zc(C))return x(E,w,C,I);if(Bc(C))return g(E,w,C,I);$h(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(r(E,w.sibling),w=s(w,C),w.return=E,E=w):(r(E,w),w=Xg(C,E.mode,I),w.return=E,E=w),a(E)):r(E,w)}return b}var Hl=sT(!0),iT=sT(!1),cm=Ao(null),um=null,ml=null,ax=null;function lx(){ax=ml=um=null}function cx(t){var e=cm.current;bt(cm),t._currentValue=e}function ay(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Cl(t,e){um=t,ax=ml=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zr=!0),t.firstContext=null)}function Rn(t){var e=t._currentValue;if(ax!==t)if(t={context:t,memoizedValue:e,next:null},ml===null){if(um===null)throw Error(ue(308));ml=t,um.dependencies={lanes:0,firstContext:t}}else ml=ml.next=t;return e}var Jo=null;function ux(t){Jo===null?Jo=[t]:Jo.push(t)}function oT(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,ux(e)):(r.next=s.next,s.next=r),e.interleaved=r,ri(t,n)}function ri(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ki=!1;function dx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ks(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function eo(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,tt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ri(t,r)}return s=n.interleaved,s===null?(e.next=e,ux(n)):(e.next=s.next,s.next=e),n.interleaved=e,ri(t,r)}function wf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Kv(t,r)}}function y1(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function dm(t,e,r,n){var s=t.updateQueue;ki=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,g=l;switch(m=e,y=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){f=x.call(y,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(y,f,m):x,m==null)break e;f=Rt({},f,m);break e;case 2:ki=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=f):d=d.next=y,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ha|=a,t.lanes=a,t.memoizedState=f}}function v1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ue(191,s));s.call(n)}}}var Nd={},fs=Ao(Nd),Gu=Ao(Nd),$u=Ao(Nd);function Xo(t){if(t===Nd)throw Error(ue(174));return t}function hx(t,e){switch(yt($u,e),yt(Gu,t),yt(fs,Nd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:U0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=U0(e,t)}bt(fs),yt(fs,e)}function Wl(){bt(fs),bt(Gu),bt($u)}function lT(t){Xo($u.current);var e=Xo(fs.current),r=U0(e,t.type);e!==r&&(yt(Gu,t),yt(fs,r))}function fx(t){Gu.current===t&&(bt(fs),bt(Gu))}var At=Ao(0);function hm(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hg=[];function mx(){for(var t=0;t<Hg.length;t++)Hg[t]._workInProgressVersionPrimary=null;Hg.length=0}var bf=di.ReactCurrentDispatcher,Wg=di.ReactCurrentBatchConfig,da=0,St=null,Qt=null,rr=null,fm=!1,vu=!1,zu=0,tD=0;function yr(){throw Error(ue(321))}function px(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Xn(t[r],e[r]))return!1;return!0}function gx(t,e,r,n,s,i){if(da=i,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bf.current=t===null||t.memoizedState===null?iD:oD,t=r(n,s),vu){i=0;do{if(vu=!1,zu=0,25<=i)throw Error(ue(301));i+=1,rr=Qt=null,e.updateQueue=null,bf.current=aD,t=r(n,s)}while(vu)}if(bf.current=mm,e=Qt!==null&&Qt.next!==null,da=0,rr=Qt=St=null,fm=!1,e)throw Error(ue(300));return t}function yx(){var t=zu!==0;return zu=0,t}function is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?St.memoizedState=rr=t:rr=rr.next=t,rr}function In(){if(Qt===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Qt.next;var e=rr===null?St.memoizedState:rr.next;if(e!==null)rr=e,Qt=t;else{if(t===null)throw Error(ue(310));Qt=t,t={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},rr===null?St.memoizedState=rr=t:rr=rr.next=t}return rr}function Hu(t,e){return typeof e=="function"?e(t):e}function Qg(t){var e=In(),r=e.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var n=Qt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((da&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,St.lanes|=d,ha|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,Xn(n,e.memoizedState)||(zr=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,St.lanes|=i,ha|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Yg(t){var e=In(),r=e.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Xn(i,e.memoizedState)||(zr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function cT(){}function uT(t,e){var r=St,n=In(),s=e(),i=!Xn(n.memoizedState,s);if(i&&(n.memoizedState=s,zr=!0),n=n.queue,vx(fT.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||rr!==null&&rr.memoizedState.tag&1){if(r.flags|=2048,Wu(9,hT.bind(null,r,n,s,e),void 0,null),ir===null)throw Error(ue(349));da&30||dT(r,e,s)}return s}function dT(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function hT(t,e,r,n){e.value=r,e.getSnapshot=n,mT(e)&&pT(t)}function fT(t,e,r){return r(function(){mT(e)&&pT(t)})}function mT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Xn(t,r)}catch{return!0}}function pT(t){var e=ri(t,1);e!==null&&Kn(e,t,1,-1)}function x1(t){var e=is();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:t},e.queue=t,t=t.dispatch=sD.bind(null,St,t),[e.memoizedState,t]}function Wu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function gT(){return In().memoizedState}function Ef(t,e,r,n){var s=is();St.flags|=t,s.memoizedState=Wu(1|e,r,void 0,n===void 0?null:n)}function ap(t,e,r,n){var s=In();n=n===void 0?null:n;var i=void 0;if(Qt!==null){var a=Qt.memoizedState;if(i=a.destroy,n!==null&&px(n,a.deps)){s.memoizedState=Wu(e,r,i,n);return}}St.flags|=t,s.memoizedState=Wu(1|e,r,i,n)}function w1(t,e){return Ef(8390656,8,t,e)}function vx(t,e){return ap(2048,8,t,e)}function yT(t,e){return ap(4,2,t,e)}function vT(t,e){return ap(4,4,t,e)}function xT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wT(t,e,r){return r=r!=null?r.concat([t]):null,ap(4,4,xT.bind(null,e,t),r)}function xx(){}function bT(t,e){var r=In();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&px(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function ET(t,e){var r=In();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&px(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function CT(t,e,r){return da&21?(Xn(r,e)||(r=S_(),St.lanes|=r,ha|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zr=!0),t.memoizedState=r)}function rD(t,e){var r=ut;ut=r!==0&&4>r?r:4,t(!0);var n=Wg.transition;Wg.transition={};try{t(!1),e()}finally{ut=r,Wg.transition=n}}function NT(){return In().memoizedState}function nD(t,e,r){var n=ro(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},_T(t))TT(e,r);else if(r=oT(t,e,r,n),r!==null){var s=Lr();Kn(r,t,n,s),AT(r,e,n)}}function sD(t,e,r){var n=ro(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(_T(t))TT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Xn(l,a)){var c=e.interleaved;c===null?(s.next=s,ux(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=oT(t,e,s,n),r!==null&&(s=Lr(),Kn(r,t,n,s),AT(r,e,n))}}function _T(t){var e=t.alternate;return t===St||e!==null&&e===St}function TT(t,e){vu=fm=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function AT(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Kv(t,r)}}var mm={readContext:Rn,useCallback:yr,useContext:yr,useEffect:yr,useImperativeHandle:yr,useInsertionEffect:yr,useLayoutEffect:yr,useMemo:yr,useReducer:yr,useRef:yr,useState:yr,useDebugValue:yr,useDeferredValue:yr,useTransition:yr,useMutableSource:yr,useSyncExternalStore:yr,useId:yr,unstable_isNewReconciler:!1},iD={readContext:Rn,useCallback:function(t,e){return is().memoizedState=[t,e===void 0?null:e],t},useContext:Rn,useEffect:w1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ef(4194308,4,xT.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ef(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ef(4,2,t,e)},useMemo:function(t,e){var r=is();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=is();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=nD.bind(null,St,t),[n.memoizedState,t]},useRef:function(t){var e=is();return t={current:t},e.memoizedState=t},useState:x1,useDebugValue:xx,useDeferredValue:function(t){return is().memoizedState=t},useTransition:function(){var t=x1(!1),e=t[0];return t=rD.bind(null,t[1]),is().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=St,s=is();if(Tt){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=e(),ir===null)throw Error(ue(349));da&30||dT(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,w1(fT.bind(null,n,i,t),[t]),n.flags|=2048,Wu(9,hT.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=is(),e=ir.identifierPrefix;if(Tt){var r=Ws,n=Hs;r=(n&~(1<<32-Yn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=zu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=tD++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oD={readContext:Rn,useCallback:bT,useContext:Rn,useEffect:vx,useImperativeHandle:wT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:ET,useReducer:Qg,useRef:gT,useState:function(){return Qg(Hu)},useDebugValue:xx,useDeferredValue:function(t){var e=In();return CT(e,Qt.memoizedState,t)},useTransition:function(){var t=Qg(Hu)[0],e=In().memoizedState;return[t,e]},useMutableSource:cT,useSyncExternalStore:uT,useId:NT,unstable_isNewReconciler:!1},aD={readContext:Rn,useCallback:bT,useContext:Rn,useEffect:vx,useImperativeHandle:wT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:ET,useReducer:Yg,useRef:gT,useState:function(){return Yg(Hu)},useDebugValue:xx,useDeferredValue:function(t){var e=In();return Qt===null?e.memoizedState=t:CT(e,Qt.memoizedState,t)},useTransition:function(){var t=Yg(Hu)[0],e=In().memoizedState;return[t,e]},useMutableSource:cT,useSyncExternalStore:uT,useId:NT,unstable_isNewReconciler:!1};function qn(t,e){if(t&&t.defaultProps){e=Rt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function ly(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Rt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var lp={isMounted:function(t){return(t=t._reactInternals)?_a(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Lr(),s=ro(t),i=Ks(n,s);i.payload=e,r!=null&&(i.callback=r),e=eo(t,i,s),e!==null&&(Kn(e,t,s,n),wf(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Lr(),s=ro(t),i=Ks(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=eo(t,i,s),e!==null&&(Kn(e,t,s,n),wf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Lr(),n=ro(t),s=Ks(r,n);s.tag=2,e!=null&&(s.callback=e),e=eo(t,s,n),e!==null&&(Kn(e,t,n,r),wf(e,t,n))}};function b1(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Vu(r,n)||!Vu(s,i):!0}function ST(t,e,r){var n=!1,s=ho,i=e.contextType;return typeof i=="object"&&i!==null?i=Rn(i):(s=Qr(e)?ca:Nr.current,n=e.contextTypes,i=(n=n!=null)?$l(t,s):ho),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lp,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function E1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&lp.enqueueReplaceState(e,e.state,null)}function cy(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},dx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Rn(i):(i=Qr(e)?ca:Nr.current,s.context=$l(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ly(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&lp.enqueueReplaceState(s,s.state,null),dm(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ql(t,e){try{var r="",n=e;do r+=D4(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Kg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function uy(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var lD=typeof WeakMap=="function"?WeakMap:Map;function RT(t,e,r){r=Ks(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){gm||(gm=!0,wy=n),uy(t,e)},r}function IT(t,e,r){r=Ks(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){uy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){uy(t,e),typeof n!="function"&&(to===null?to=new Set([this]):to.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function C1(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new lD;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=ED.bind(null,t,e,r),e.then(t,t))}function N1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _1(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ks(-1,1),e.tag=2,eo(r,e,1))),r.lanes|=1),t)}var cD=di.ReactCurrentOwner,zr=!1;function Mr(t,e,r,n){e.child=t===null?iT(e,null,r,n):Hl(e,t.child,r,n)}function T1(t,e,r,n,s){r=r.render;var i=e.ref;return Cl(e,s),n=gx(t,e,r,n,i,s),r=yx(),t!==null&&!zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ni(t,e,s)):(Tt&&r&&sx(e),e.flags|=1,Mr(t,e,n,s),e.child)}function A1(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Ax(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,jT(t,e,i,n,s)):(t=Tf(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Vu,r(a,n)&&t.ref===e.ref)return ni(t,e,s)}return e.flags|=1,t=no(i,n),t.ref=e.ref,t.return=e,e.child=t}function jT(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Vu(i,n)&&t.ref===e.ref)if(zr=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(zr=!0);else return e.lanes=t.lanes,ni(t,e,s)}return dy(t,e,r,n,s)}function PT(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(gl,nn),nn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yt(gl,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,yt(gl,nn),nn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,yt(gl,nn),nn|=n;return Mr(t,e,s,r),e.child}function kT(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function dy(t,e,r,n,s){var i=Qr(r)?ca:Nr.current;return i=$l(e,i),Cl(e,s),r=gx(t,e,r,n,i,s),n=yx(),t!==null&&!zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ni(t,e,s)):(Tt&&n&&sx(e),e.flags|=1,Mr(t,e,r,s),e.child)}function S1(t,e,r,n,s){if(Qr(r)){var i=!0;om(e)}else i=!1;if(Cl(e,s),e.stateNode===null)Cf(t,e),ST(e,r,n),cy(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Rn(u):(u=Qr(r)?ca:Nr.current,u=$l(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&E1(e,a,n,u),ki=!1;var m=e.memoizedState;a.state=m,dm(e,n,a,s),c=e.memoizedState,l!==n||m!==c||Wr.current||ki?(typeof d=="function"&&(ly(e,r,d,n),c=e.memoizedState),(l=ki||b1(e,r,l,n,m,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,aT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:qn(e.type,l),a.props=u,f=e.pendingProps,m=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Rn(c):(c=Qr(r)?ca:Nr.current,c=$l(e,c));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&E1(e,a,n,c),ki=!1,m=e.memoizedState,a.state=m,dm(e,n,a,s);var x=e.memoizedState;l!==f||m!==x||Wr.current||ki?(typeof y=="function"&&(ly(e,r,y,n),x=e.memoizedState),(u=ki||b1(e,r,u,n,m,x,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),a.props=n,a.state=x,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return hy(t,e,r,n,i,s)}function hy(t,e,r,n,s,i){kT(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&f1(e,r,!1),ni(t,e,i);n=e.stateNode,cD.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Hl(e,t.child,null,i),e.child=Hl(e,null,l,i)):Mr(t,e,l,i),e.memoizedState=n.state,s&&f1(e,r,!0),e.child}function MT(t){var e=t.stateNode;e.pendingContext?h1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&h1(t,e.context,!1),hx(t,e.containerInfo)}function R1(t,e,r,n,s){return zl(),ox(s),e.flags|=256,Mr(t,e,r,n),e.child}var fy={dehydrated:null,treeContext:null,retryLane:0};function my(t){return{baseLanes:t,cachePool:null,transitions:null}}function DT(t,e,r){var n=e.pendingProps,s=At.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),yt(At,s&1),t===null)return oy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=dp(a,n,0,null),t=ia(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=my(r),e.memoizedState=fy,t):wx(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return uD(t,e,a,n,l,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=no(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=no(l,i):(i=ia(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?my(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=fy,n}return i=t.child,t=i.sibling,n=no(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function wx(t,e){return e=dp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zh(t,e,r,n){return n!==null&&ox(n),Hl(e,t.child,null,r),t=wx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uD(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=Kg(Error(ue(422))),zh(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=dp({mode:"visible",children:n.children},s,0,null),i=ia(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Hl(e,t.child,null,a),e.child.memoizedState=my(a),e.memoizedState=fy,i);if(!(e.mode&1))return zh(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ue(419)),n=Kg(i,n,void 0),zh(t,e,a,n)}if(l=(a&t.childLanes)!==0,zr||l){if(n=ir,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ri(t,s),Kn(n,t,s,-1))}return Tx(),n=Kg(Error(ue(421))),zh(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=CD.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,on=Zi(s.nextSibling),ln=e,Tt=!0,Hn=null,t!==null&&(wn[bn++]=Hs,wn[bn++]=Ws,wn[bn++]=ua,Hs=t.id,Ws=t.overflow,ua=e),e=wx(e,n.children),e.flags|=4096,e)}function I1(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ay(t.return,e,r)}function Jg(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function OT(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Mr(t,e,n.children,r),n=At.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I1(t,r,e);else if(t.tag===19)I1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(yt(At,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&hm(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Jg(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hm(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Jg(e,!0,r,null,i);break;case"together":Jg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ni(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ha|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ue(153));if(e.child!==null){for(t=e.child,r=no(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=no(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function dD(t,e,r){switch(e.tag){case 3:MT(e),zl();break;case 5:lT(e);break;case 1:Qr(e.type)&&om(e);break;case 4:hx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;yt(cm,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(yt(At,At.current&1),e.flags|=128,null):r&e.child.childLanes?DT(t,e,r):(yt(At,At.current&1),t=ni(t,e,r),t!==null?t.sibling:null);yt(At,At.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return OT(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yt(At,At.current),n)break;return null;case 22:case 23:return e.lanes=0,PT(t,e,r)}return ni(t,e,r)}var LT,py,FT,VT;LT=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};py=function(){};FT=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Xo(fs.current);var i=null;switch(r){case"input":s=L0(t,s),n=L0(t,n),i=[];break;case"select":s=Rt({},s,{value:void 0}),n=Rt({},n,{value:void 0}),i=[];break;case"textarea":s=B0(t,s),n=B0(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=sm)}q0(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&wt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};VT=function(t,e,r,n){r!==n&&(e.flags|=4)};function Hc(t,e){if(!Tt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function vr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function hD(t,e,r){var n=e.pendingProps;switch(ix(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vr(e),null;case 1:return Qr(e.type)&&im(),vr(e),null;case 3:return n=e.stateNode,Wl(),bt(Wr),bt(Nr),mx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Gh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(Cy(Hn),Hn=null))),py(t,e),vr(e),null;case 5:fx(e);var s=Xo($u.current);if(r=e.type,t!==null&&e.stateNode!=null)FT(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ue(166));return vr(e),null}if(t=Xo(fs.current),Gh(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[us]=e,n[qu]=i,t=(e.mode&1)!==0,r){case"dialog":wt("cancel",n),wt("close",n);break;case"iframe":case"object":case"embed":wt("load",n);break;case"video":case"audio":for(s=0;s<tu.length;s++)wt(tu[s],n);break;case"source":wt("error",n);break;case"img":case"image":case"link":wt("error",n),wt("load",n);break;case"details":wt("toggle",n);break;case"input":Vb(n,i),wt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},wt("invalid",n);break;case"textarea":Ub(n,i),wt("invalid",n)}q0(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&qh(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&qh(n.textContent,l,t),s=["children",""+l]):Pu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&wt("scroll",n)}switch(r){case"input":Mh(n),Bb(n,i,!0);break;case"textarea":Mh(n),qb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=sm)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=f_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[us]=e,t[qu]=n,LT(t,e,!1,!1),e.stateNode=t;e:{switch(a=G0(r,n),r){case"dialog":wt("cancel",t),wt("close",t),s=n;break;case"iframe":case"object":case"embed":wt("load",t),s=n;break;case"video":case"audio":for(s=0;s<tu.length;s++)wt(tu[s],t);s=n;break;case"source":wt("error",t),s=n;break;case"img":case"image":case"link":wt("error",t),wt("load",t),s=n;break;case"details":wt("toggle",t),s=n;break;case"input":Vb(t,n),s=L0(t,n),wt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Rt({},n,{value:void 0}),wt("invalid",t);break;case"textarea":Ub(t,n),s=B0(t,n),wt("invalid",t);break;default:s=n}q0(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?g_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&m_(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ku(t,c):typeof c=="number"&&ku(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&wt("scroll",t):c!=null&&$v(t,i,c,a))}switch(r){case"input":Mh(t),Bb(t,n,!1);break;case"textarea":Mh(t),qb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+uo(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?xl(t,!!n.multiple,i,!1):n.defaultValue!=null&&xl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=sm)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vr(e),null;case 6:if(t&&e.stateNode!=null)VT(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ue(166));if(r=Xo($u.current),Xo(fs.current),Gh(e)){if(n=e.stateNode,r=e.memoizedProps,n[us]=e,(i=n.nodeValue!==r)&&(t=ln,t!==null))switch(t.tag){case 3:qh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qh(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[us]=e,e.stateNode=n}return vr(e),null;case 13:if(bt(At),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tt&&on!==null&&e.mode&1&&!(e.flags&128))nT(),zl(),e.flags|=98560,i=!1;else if(i=Gh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ue(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ue(317));i[us]=e}else zl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vr(e),i=!1}else Hn!==null&&(Cy(Hn),Hn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||At.current&1?Yt===0&&(Yt=3):Tx())),e.updateQueue!==null&&(e.flags|=4),vr(e),null);case 4:return Wl(),py(t,e),t===null&&Bu(e.stateNode.containerInfo),vr(e),null;case 10:return cx(e.type._context),vr(e),null;case 17:return Qr(e.type)&&im(),vr(e),null;case 19:if(bt(At),i=e.memoizedState,i===null)return vr(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Hc(i,!1);else{if(Yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=hm(t),a!==null){for(e.flags|=128,Hc(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return yt(At,At.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ft()>Yl&&(e.flags|=128,n=!0,Hc(i,!1),e.lanes=4194304)}else{if(!n)if(t=hm(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Hc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Tt)return vr(e),null}else 2*Ft()-i.renderingStartTime>Yl&&r!==1073741824&&(e.flags|=128,n=!0,Hc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ft(),e.sibling=null,r=At.current,yt(At,n?r&1|2:r&1),e):(vr(e),null);case 22:case 23:return _x(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?nn&1073741824&&(vr(e),e.subtreeFlags&6&&(e.flags|=8192)):vr(e),null;case 24:return null;case 25:return null}throw Error(ue(156,e.tag))}function fD(t,e){switch(ix(e),e.tag){case 1:return Qr(e.type)&&im(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wl(),bt(Wr),bt(Nr),mx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fx(e),null;case 13:if(bt(At),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ue(340));zl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(At),null;case 4:return Wl(),null;case 10:return cx(e.type._context),null;case 22:case 23:return _x(),null;case 24:return null;default:return null}}var Hh=!1,Er=!1,mD=typeof WeakSet=="function"?WeakSet:Set,be=null;function pl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Dt(t,e,n)}else r.current=null}function gy(t,e,r){try{r()}catch(n){Dt(t,e,n)}}var j1=!1;function pD(t,e){if(Z0=tm,t=$_(),nx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var y;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==i||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===r&&++u===s&&(l=a),m===i&&++d===n&&(c=a),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ey={focusedElem:t,selectionRange:r},tm=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,b=x.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?g:qn(e.type,g),b);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(I){Dt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return x=j1,j1=!1,x}function xu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&gy(e,r,i)}s=s.next}while(s!==n)}}function cp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function yy(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function BT(t){var e=t.alternate;e!==null&&(t.alternate=null,BT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[us],delete e[qu],delete e[ny],delete e[JM],delete e[XM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function UT(t){return t.tag===5||t.tag===3||t.tag===4}function P1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||UT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vy(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=sm));else if(n!==4&&(t=t.child,t!==null))for(vy(t,e,r),t=t.sibling;t!==null;)vy(t,e,r),t=t.sibling}function xy(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(xy(t,e,r),t=t.sibling;t!==null;)xy(t,e,r),t=t.sibling}var ar=null,zn=!1;function _i(t,e,r){for(r=r.child;r!==null;)qT(t,e,r),r=r.sibling}function qT(t,e,r){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(tp,r)}catch{}switch(r.tag){case 5:Er||pl(r,e);case 6:var n=ar,s=zn;ar=null,_i(t,e,r),ar=n,zn=s,ar!==null&&(zn?(t=ar,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ar.removeChild(r.stateNode));break;case 18:ar!==null&&(zn?(t=ar,r=r.stateNode,t.nodeType===8?$g(t.parentNode,r):t.nodeType===1&&$g(t,r),Lu(t)):$g(ar,r.stateNode));break;case 4:n=ar,s=zn,ar=r.stateNode.containerInfo,zn=!0,_i(t,e,r),ar=n,zn=s;break;case 0:case 11:case 14:case 15:if(!Er&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&gy(r,e,a),s=s.next}while(s!==n)}_i(t,e,r);break;case 1:if(!Er&&(pl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Dt(r,e,l)}_i(t,e,r);break;case 21:_i(t,e,r);break;case 22:r.mode&1?(Er=(n=Er)||r.memoizedState!==null,_i(t,e,r),Er=n):_i(t,e,r);break;default:_i(t,e,r)}}function k1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new mD),e.forEach(function(n){var s=ND.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Bn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:ar=l.stateNode,zn=!1;break e;case 3:ar=l.stateNode.containerInfo,zn=!0;break e;case 4:ar=l.stateNode.containerInfo,zn=!0;break e}l=l.return}if(ar===null)throw Error(ue(160));qT(i,a,s),ar=null,zn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Dt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GT(e,t),e=e.sibling}function GT(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),ss(t),n&4){try{xu(3,t,t.return),cp(3,t)}catch(g){Dt(t,t.return,g)}try{xu(5,t,t.return)}catch(g){Dt(t,t.return,g)}}break;case 1:Bn(e,t),ss(t),n&512&&r!==null&&pl(r,r.return);break;case 5:if(Bn(e,t),ss(t),n&512&&r!==null&&pl(r,r.return),t.flags&32){var s=t.stateNode;try{ku(s,"")}catch(g){Dt(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&d_(s,i),G0(l,a);var u=G0(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?g_(s,f):d==="dangerouslySetInnerHTML"?m_(s,f):d==="children"?ku(s,f):$v(s,d,f,u)}switch(l){case"input":F0(s,i);break;case"textarea":h_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?xl(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?xl(s,!!i.multiple,i.defaultValue,!0):xl(s,!!i.multiple,i.multiple?[]:"",!1))}s[qu]=i}catch(g){Dt(t,t.return,g)}}break;case 6:if(Bn(e,t),ss(t),n&4){if(t.stateNode===null)throw Error(ue(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Dt(t,t.return,g)}}break;case 3:if(Bn(e,t),ss(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Lu(e.containerInfo)}catch(g){Dt(t,t.return,g)}break;case 4:Bn(e,t),ss(t);break;case 13:Bn(e,t),ss(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cx=Ft())),n&4&&k1(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Er=(u=Er)||d,Bn(e,t),Er=u):Bn(e,t),ss(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(f=be=d;be!==null;){switch(m=be,y=m.child,m.tag){case 0:case 11:case 14:case 15:xu(4,m,m.return);break;case 1:pl(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(g){Dt(n,r,g)}}break;case 5:pl(m,m.return);break;case 22:if(m.memoizedState!==null){D1(f);continue}}y!==null?(y.return=m,be=y):D1(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=p_("display",a))}catch(g){Dt(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Dt(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bn(e,t),ss(t),n&4&&k1(t);break;case 21:break;default:Bn(e,t),ss(t)}}function ss(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(UT(r)){var n=r;break e}r=r.return}throw Error(ue(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ku(s,""),n.flags&=-33);var i=P1(t);xy(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=P1(t);vy(t,l,a);break;default:throw Error(ue(161))}}catch(c){Dt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gD(t,e,r){be=t,$T(t)}function $T(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var s=be,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Hh;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Er;l=Hh;var u=Er;if(Hh=a,(Er=c)&&!u)for(be=s;be!==null;)a=be,c=a.child,a.tag===22&&a.memoizedState!==null?O1(s):c!==null?(c.return=a,be=c):O1(s);for(;i!==null;)be=i,$T(i),i=i.sibling;be=s,Hh=l,Er=u}M1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,be=i):M1(t)}}function M1(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Er||cp(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Er)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:qn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&v1(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}v1(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Lu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}Er||e.flags&512&&yy(e)}catch(m){Dt(e,e.return,m)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function D1(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function O1(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{cp(4,e)}catch(c){Dt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){Dt(e,s,c)}}var i=e.return;try{yy(e)}catch(c){Dt(e,i,c)}break;case 5:var a=e.return;try{yy(e)}catch(c){Dt(e,a,c)}}}catch(c){Dt(e,e.return,c)}if(e===t){be=null;break}var l=e.sibling;if(l!==null){l.return=e.return,be=l;break}be=e.return}}var yD=Math.ceil,pm=di.ReactCurrentDispatcher,bx=di.ReactCurrentOwner,_n=di.ReactCurrentBatchConfig,tt=0,ir=null,qt=null,ur=0,nn=0,gl=Ao(0),Yt=0,Qu=null,ha=0,up=0,Ex=0,wu=null,Gr=null,Cx=0,Yl=1/0,$s=null,gm=!1,wy=null,to=null,Wh=!1,Wi=null,ym=0,bu=0,by=null,Nf=-1,_f=0;function Lr(){return tt&6?Ft():Nf!==-1?Nf:Nf=Ft()}function ro(t){return t.mode&1?tt&2&&ur!==0?ur&-ur:eD.transition!==null?(_f===0&&(_f=S_()),_f):(t=ut,t!==0||(t=window.event,t=t===void 0?16:D_(t.type)),t):1}function Kn(t,e,r,n){if(50<bu)throw bu=0,by=null,Error(ue(185));bd(t,r,n),(!(tt&2)||t!==ir)&&(t===ir&&(!(tt&2)&&(up|=r),Yt===4&&Oi(t,ur)),Yr(t,n),r===1&&tt===0&&!(e.mode&1)&&(Yl=Ft()+500,op&&So()))}function Yr(t,e){var r=t.callbackNode;eM(t,e);var n=em(t,t===ir?ur:0);if(n===0)r!==null&&zb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&zb(r),e===1)t.tag===0?ZM(L1.bind(null,t)):eT(L1.bind(null,t)),YM(function(){!(tt&6)&&So()}),r=null;else{switch(R_(n)){case 1:r=Yv;break;case 4:r=T_;break;case 16:r=Zf;break;case 536870912:r=A_;break;default:r=Zf}r=XT(r,zT.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function zT(t,e){if(Nf=-1,_f=0,tt&6)throw Error(ue(327));var r=t.callbackNode;if(Nl()&&t.callbackNode!==r)return null;var n=em(t,t===ir?ur:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=vm(t,n);else{e=n;var s=tt;tt|=2;var i=WT();(ir!==t||ur!==e)&&($s=null,Yl=Ft()+500,sa(t,e));do try{wD();break}catch(l){HT(t,l)}while(!0);lx(),pm.current=i,tt=s,qt!==null?e=0:(ir=null,ur=0,e=Yt)}if(e!==0){if(e===2&&(s=Q0(t),s!==0&&(n=s,e=Ey(t,s))),e===1)throw r=Qu,sa(t,0),Oi(t,n),Yr(t,Ft()),r;if(e===6)Oi(t,n);else{if(s=t.current.alternate,!(n&30)&&!vD(s)&&(e=vm(t,n),e===2&&(i=Q0(t),i!==0&&(n=i,e=Ey(t,i))),e===1))throw r=Qu,sa(t,0),Oi(t,n),Yr(t,Ft()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ue(345));case 2:Qo(t,Gr,$s);break;case 3:if(Oi(t,n),(n&130023424)===n&&(e=Cx+500-Ft(),10<e)){if(em(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Lr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ry(Qo.bind(null,t,Gr,$s),e);break}Qo(t,Gr,$s);break;case 4:if(Oi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-Yn(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=Ft()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*yD(n/1960))-n,10<n){t.timeoutHandle=ry(Qo.bind(null,t,Gr,$s),n);break}Qo(t,Gr,$s);break;case 5:Qo(t,Gr,$s);break;default:throw Error(ue(329))}}}return Yr(t,Ft()),t.callbackNode===r?zT.bind(null,t):null}function Ey(t,e){var r=wu;return t.current.memoizedState.isDehydrated&&(sa(t,e).flags|=256),t=vm(t,e),t!==2&&(e=Gr,Gr=r,e!==null&&Cy(e)),t}function Cy(t){Gr===null?Gr=t:Gr.push.apply(Gr,t)}function vD(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Xn(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oi(t,e){for(e&=~Ex,e&=~up,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Yn(e),n=1<<r;t[r]=-1,e&=~n}}function L1(t){if(tt&6)throw Error(ue(327));Nl();var e=em(t,0);if(!(e&1))return Yr(t,Ft()),null;var r=vm(t,e);if(t.tag!==0&&r===2){var n=Q0(t);n!==0&&(e=n,r=Ey(t,n))}if(r===1)throw r=Qu,sa(t,0),Oi(t,e),Yr(t,Ft()),r;if(r===6)throw Error(ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qo(t,Gr,$s),Yr(t,Ft()),null}function Nx(t,e){var r=tt;tt|=1;try{return t(e)}finally{tt=r,tt===0&&(Yl=Ft()+500,op&&So())}}function fa(t){Wi!==null&&Wi.tag===0&&!(tt&6)&&Nl();var e=tt;tt|=1;var r=_n.transition,n=ut;try{if(_n.transition=null,ut=1,t)return t()}finally{ut=n,_n.transition=r,tt=e,!(tt&6)&&So()}}function _x(){nn=gl.current,bt(gl)}function sa(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,QM(r)),qt!==null)for(r=qt.return;r!==null;){var n=r;switch(ix(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&im();break;case 3:Wl(),bt(Wr),bt(Nr),mx();break;case 5:fx(n);break;case 4:Wl();break;case 13:bt(At);break;case 19:bt(At);break;case 10:cx(n.type._context);break;case 22:case 23:_x()}r=r.return}if(ir=t,qt=t=no(t.current,null),ur=nn=e,Yt=0,Qu=null,Ex=up=ha=0,Gr=wu=null,Jo!==null){for(e=0;e<Jo.length;e++)if(r=Jo[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Jo=null}return t}function HT(t,e){do{var r=qt;try{if(lx(),bf.current=mm,fm){for(var n=St.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}fm=!1}if(da=0,rr=Qt=St=null,vu=!1,zu=0,bx.current=null,r===null||r.return===null){Yt=1,Qu=e,qt=null;break}e:{var i=t,a=r.return,l=r,c=e;if(e=ur,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=N1(a);if(y!==null){y.flags&=-257,_1(y,a,l,i,e),y.mode&1&&C1(i,u,e),e=y,c=u;var x=e.updateQueue;if(x===null){var g=new Set;g.add(c),e.updateQueue=g}else x.add(c);break e}else{if(!(e&1)){C1(i,u,e),Tx();break e}c=Error(ue(426))}}else if(Tt&&l.mode&1){var b=N1(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),_1(b,a,l,i,e),ox(Ql(c,l));break e}}i=c=Ql(c,l),Yt!==4&&(Yt=2),wu===null?wu=[i]:wu.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=RT(i,c,e);y1(i,E);break e;case 1:l=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(to===null||!to.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=IT(i,l,e);y1(i,I);break e}}i=i.return}while(i!==null)}YT(r)}catch(j){e=j,qt===r&&r!==null&&(qt=r=r.return);continue}break}while(!0)}function WT(){var t=pm.current;return pm.current=mm,t===null?mm:t}function Tx(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),ir===null||!(ha&268435455)&&!(up&268435455)||Oi(ir,ur)}function vm(t,e){var r=tt;tt|=2;var n=WT();(ir!==t||ur!==e)&&($s=null,sa(t,e));do try{xD();break}catch(s){HT(t,s)}while(!0);if(lx(),tt=r,pm.current=n,qt!==null)throw Error(ue(261));return ir=null,ur=0,Yt}function xD(){for(;qt!==null;)QT(qt)}function wD(){for(;qt!==null&&!z4();)QT(qt)}function QT(t){var e=JT(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?YT(t):qt=e,bx.current=null}function YT(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=fD(r,e),r!==null){r.flags&=32767,qt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,qt=null;return}}else if(r=hD(r,e,nn),r!==null){qt=r;return}if(e=e.sibling,e!==null){qt=e;return}qt=e=t}while(e!==null);Yt===0&&(Yt=5)}function Qo(t,e,r){var n=ut,s=_n.transition;try{_n.transition=null,ut=1,bD(t,e,r,n)}finally{_n.transition=s,ut=n}return null}function bD(t,e,r,n){do Nl();while(Wi!==null);if(tt&6)throw Error(ue(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ue(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(tM(t,i),t===ir&&(qt=ir=null,ur=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Wh||(Wh=!0,XT(Zf,function(){return Nl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=_n.transition,_n.transition=null;var a=ut;ut=1;var l=tt;tt|=4,bx.current=null,pD(t,r),GT(r,t),UM(ey),tm=!!Z0,ey=Z0=null,t.current=r,gD(r),H4(),tt=l,ut=a,_n.transition=i}else t.current=r;if(Wh&&(Wh=!1,Wi=t,ym=s),i=t.pendingLanes,i===0&&(to=null),Y4(r.stateNode),Yr(t,Ft()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(gm)throw gm=!1,t=wy,wy=null,t;return ym&1&&t.tag!==0&&Nl(),i=t.pendingLanes,i&1?t===by?bu++:(bu=0,by=t):bu=0,So(),null}function Nl(){if(Wi!==null){var t=R_(ym),e=_n.transition,r=ut;try{if(_n.transition=null,ut=16>t?16:t,Wi===null)var n=!1;else{if(t=Wi,Wi=null,ym=0,tt&6)throw Error(ue(331));var s=tt;for(tt|=4,be=t.current;be!==null;){var i=be,a=i.child;if(be.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(be=u;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:xu(8,d,i)}var f=d.child;if(f!==null)f.return=d,be=f;else for(;be!==null;){d=be;var m=d.sibling,y=d.return;if(BT(d),d===u){be=null;break}if(m!==null){m.return=y,be=m;break}be=y}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}be=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,be=a;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xu(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,be=E;break e}be=i.return}}var w=t.current;for(be=w;be!==null;){a=be;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,be=C;else e:for(a=w;be!==null;){if(l=be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cp(9,l)}}catch(j){Dt(l,l.return,j)}if(l===a){be=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,be=I;break e}be=l.return}}if(tt=s,So(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(tp,t)}catch{}n=!0}return n}finally{ut=r,_n.transition=e}}return!1}function F1(t,e,r){e=Ql(r,e),e=RT(t,e,1),t=eo(t,e,1),e=Lr(),t!==null&&(bd(t,1,e),Yr(t,e))}function Dt(t,e,r){if(t.tag===3)F1(t,t,r);else for(;e!==null;){if(e.tag===3){F1(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(to===null||!to.has(n))){t=Ql(r,t),t=IT(e,t,1),e=eo(e,t,1),t=Lr(),e!==null&&(bd(e,1,t),Yr(e,t));break}}e=e.return}}function ED(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Lr(),t.pingedLanes|=t.suspendedLanes&r,ir===t&&(ur&r)===r&&(Yt===4||Yt===3&&(ur&130023424)===ur&&500>Ft()-Cx?sa(t,0):Ex|=r),Yr(t,e)}function KT(t,e){e===0&&(t.mode&1?(e=Lh,Lh<<=1,!(Lh&130023424)&&(Lh=4194304)):e=1);var r=Lr();t=ri(t,e),t!==null&&(bd(t,e,r),Yr(t,r))}function CD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),KT(t,r)}function ND(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(e),KT(t,r)}var JT;JT=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wr.current)zr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return zr=!1,dD(t,e,r);zr=!!(t.flags&131072)}else zr=!1,Tt&&e.flags&1048576&&tT(e,lm,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Cf(t,e),t=e.pendingProps;var s=$l(e,Nr.current);Cl(e,r),s=gx(null,e,n,t,s,r);var i=yx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qr(n)?(i=!0,om(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dx(e),s.updater=lp,e.stateNode=s,s._reactInternals=e,cy(e,n,t,r),e=hy(null,e,n,!0,i,r)):(e.tag=0,Tt&&i&&sx(e),Mr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Cf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=TD(n),t=qn(n,t),s){case 0:e=dy(null,e,n,t,r);break e;case 1:e=S1(null,e,n,t,r);break e;case 11:e=T1(null,e,n,t,r);break e;case 14:e=A1(null,e,n,qn(n.type,t),r);break e}throw Error(ue(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qn(n,s),dy(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qn(n,s),S1(t,e,n,s,r);case 3:e:{if(MT(e),t===null)throw Error(ue(387));n=e.pendingProps,i=e.memoizedState,s=i.element,aT(t,e),dm(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ql(Error(ue(423)),e),e=R1(t,e,n,r,s);break e}else if(n!==s){s=Ql(Error(ue(424)),e),e=R1(t,e,n,r,s);break e}else for(on=Zi(e.stateNode.containerInfo.firstChild),ln=e,Tt=!0,Hn=null,r=iT(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(zl(),n===s){e=ni(t,e,r);break e}Mr(t,e,n,r)}e=e.child}return e;case 5:return lT(e),t===null&&oy(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,ty(n,s)?a=null:i!==null&&ty(n,i)&&(e.flags|=32),kT(t,e),Mr(t,e,a,r),e.child;case 6:return t===null&&oy(e),null;case 13:return DT(t,e,r);case 4:return hx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Hl(e,null,n,r):Mr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qn(n,s),T1(t,e,n,s,r);case 7:return Mr(t,e,e.pendingProps,r),e.child;case 8:return Mr(t,e,e.pendingProps.children,r),e.child;case 12:return Mr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,yt(cm,n._currentValue),n._currentValue=a,i!==null)if(Xn(i.value,a)){if(i.children===s.children&&!Wr.current){e=ni(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ks(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ay(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ue(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),ay(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Mr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Cl(e,r),s=Rn(s),n=n(s),e.flags|=1,Mr(t,e,n,r),e.child;case 14:return n=e.type,s=qn(n,e.pendingProps),s=qn(n.type,s),A1(t,e,n,s,r);case 15:return jT(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qn(n,s),Cf(t,e),e.tag=1,Qr(n)?(t=!0,om(e)):t=!1,Cl(e,r),ST(e,n,s),cy(e,n,s,r),hy(null,e,n,!0,t,r);case 19:return OT(t,e,r);case 22:return PT(t,e,r)}throw Error(ue(156,e.tag))};function XT(t,e){return __(t,e)}function _D(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,r,n){return new _D(t,e,r,n)}function Ax(t){return t=t.prototype,!(!t||!t.isReactComponent)}function TD(t){if(typeof t=="function")return Ax(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hv)return 11;if(t===Wv)return 14}return 2}function no(t,e){var r=t.alternate;return r===null?(r=Nn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Tf(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")Ax(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ol:return ia(r.children,s,i,e);case zv:a=8,s|=8;break;case k0:return t=Nn(12,r,e,s|2),t.elementType=k0,t.lanes=i,t;case M0:return t=Nn(13,r,e,s),t.elementType=M0,t.lanes=i,t;case D0:return t=Nn(19,r,e,s),t.elementType=D0,t.lanes=i,t;case l_:return dp(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o_:a=10;break e;case a_:a=9;break e;case Hv:a=11;break e;case Wv:a=14;break e;case Pi:a=16,n=null;break e}throw Error(ue(130,t==null?t:typeof t,""))}return e=Nn(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function ia(t,e,r,n){return t=Nn(7,t,n,e),t.lanes=r,t}function dp(t,e,r,n){return t=Nn(22,t,n,e),t.elementType=l_,t.lanes=r,t.stateNode={isHidden:!1},t}function Xg(t,e,r){return t=Nn(6,t,null,e),t.lanes=r,t}function Zg(t,e,r){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AD(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kg(0),this.expirationTimes=kg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sx(t,e,r,n,s,i,a,l,c){return t=new AD(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Nn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},dx(i),t}function SD(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:il,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ZT(t){if(!t)return ho;t=t._reactInternals;e:{if(_a(t)!==t||t.tag!==1)throw Error(ue(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ue(171))}if(t.tag===1){var r=t.type;if(Qr(r))return Z_(t,r,e)}return e}function eA(t,e,r,n,s,i,a,l,c){return t=Sx(r,n,!0,t,s,i,a,l,c),t.context=ZT(null),r=t.current,n=Lr(),s=ro(r),i=Ks(n,s),i.callback=e??null,eo(r,i,s),t.current.lanes=s,bd(t,s,n),Yr(t,n),t}function hp(t,e,r,n){var s=e.current,i=Lr(),a=ro(s);return r=ZT(r),e.context===null?e.context=r:e.pendingContext=r,e=Ks(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=eo(s,e,a),t!==null&&(Kn(t,s,a,i),wf(t,s,a)),a}function xm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Rx(t,e){V1(t,e),(t=t.alternate)&&V1(t,e)}function RD(){return null}var tA=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ix(t){this._internalRoot=t}fp.prototype.render=Ix.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ue(409));hp(t,e,null,null)};fp.prototype.unmount=Ix.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fa(function(){hp(null,t,null,null)}),e[ti]=null}};function fp(t){this._internalRoot=t}fp.prototype.unstable_scheduleHydration=function(t){if(t){var e=P_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Di.length&&e!==0&&e<Di[r].priority;r++);Di.splice(r,0,t),r===0&&M_(t)}};function jx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function B1(){}function ID(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=xm(a);i.call(u)}}var a=eA(e,n,t,0,null,!1,!1,"",B1);return t._reactRootContainer=a,t[ti]=a.current,Bu(t.nodeType===8?t.parentNode:t),fa(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=xm(c);l.call(u)}}var c=Sx(t,0,!1,null,null,!1,!1,"",B1);return t._reactRootContainer=c,t[ti]=c.current,Bu(t.nodeType===8?t.parentNode:t),fa(function(){hp(e,c,r,n)}),c}function pp(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=xm(a);l.call(c)}}hp(e,a,t,s)}else a=ID(r,e,t,s,n);return xm(a)}I_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=eu(e.pendingLanes);r!==0&&(Kv(e,r|1),Yr(e,Ft()),!(tt&6)&&(Yl=Ft()+500,So()))}break;case 13:fa(function(){var n=ri(t,1);if(n!==null){var s=Lr();Kn(n,t,1,s)}}),Rx(t,1)}};Jv=function(t){if(t.tag===13){var e=ri(t,134217728);if(e!==null){var r=Lr();Kn(e,t,134217728,r)}Rx(t,134217728)}};j_=function(t){if(t.tag===13){var e=ro(t),r=ri(t,e);if(r!==null){var n=Lr();Kn(r,t,e,n)}Rx(t,e)}};P_=function(){return ut};k_=function(t,e){var r=ut;try{return ut=t,e()}finally{ut=r}};z0=function(t,e,r){switch(e){case"input":if(F0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=ip(n);if(!s)throw Error(ue(90));u_(n),F0(n,s)}}}break;case"textarea":h_(t,r);break;case"select":e=r.value,e!=null&&xl(t,!!r.multiple,e,!1)}};x_=Nx;w_=fa;var jD={usingClientEntryPoint:!1,Events:[Cd,ul,ip,y_,v_,Nx]},Wc={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PD={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:di.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C_(t),t===null?null:t.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||RD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{tp=Qh.inject(PD),hs=Qh}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jD;hn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jx(e))throw Error(ue(200));return SD(t,e,null,r)};hn.createRoot=function(t,e){if(!jx(t))throw Error(ue(299));var r=!1,n="",s=tA;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sx(t,1,!1,null,null,r,!1,n,s),t[ti]=e.current,Bu(t.nodeType===8?t.parentNode:t),new Ix(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ue(188)):(t=Object.keys(t).join(","),Error(ue(268,t)));return t=C_(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return fa(t)};hn.hydrate=function(t,e,r){if(!mp(e))throw Error(ue(200));return pp(null,t,e,!0,r)};hn.hydrateRoot=function(t,e,r){if(!jx(t))throw Error(ue(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=tA;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=eA(e,null,t,1,r??null,s,!1,i,a),t[ti]=e.current,Bu(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new fp(e)};hn.render=function(t,e,r){if(!mp(e))throw Error(ue(200));return pp(null,t,e,!1,r)};hn.unmountComponentAtNode=function(t){if(!mp(t))throw Error(ue(40));return t._reactRootContainer?(fa(function(){pp(null,null,t,!1,function(){t._reactRootContainer=null,t[ti]=null})}),!0):!1};hn.unstable_batchedUpdates=Nx;hn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!mp(r))throw Error(ue(200));if(t==null||t._reactInternals===void 0)throw Error(ue(38));return pp(t,e,r,!1,n)};hn.version="18.3.1-next-f1338f8080-20240426";function rA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rA)}catch(t){console.error(t)}}rA(),r_.exports=hn;var Ta=r_.exports;const nA=Lv(Ta);var sA,U1=Ta;sA=U1.createRoot,U1.hydrateRoot;const kD=1,MD=1e6;let e0=0;function DD(){return e0=(e0+1)%Number.MAX_SAFE_INTEGER,e0.toString()}const t0=new Map,q1=t=>{if(t0.has(t))return;const e=setTimeout(()=>{t0.delete(t),Eu({type:"REMOVE_TOAST",toastId:t})},MD);t0.set(t,e)},OD=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,kD)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?q1(r):t.toasts.forEach(n=>{q1(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Af=[];let Sf={toasts:[]};function Eu(t){Sf=OD(Sf,t),Af.forEach(e=>{e(Sf)})}function pt({...t}){const e=DD(),r=s=>Eu({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Eu({type:"DISMISS_TOAST",toastId:e});return Eu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function LD(){const[t,e]=p.useState(Sf);return p.useEffect(()=>(Af.push(e),()=>{const r=Af.indexOf(e);r>-1&&Af.splice(r,1)}),[t]),{...t,toast:pt,dismiss:r=>Eu({type:"DISMISS_TOAST",toastId:r})}}function xe(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function FD(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Px(...t){return e=>t.forEach(r=>FD(r,e))}function dt(...t){return p.useCallback(Px(...t),t)}function VD(t,e=[]){let r=[];function n(i,a){const l=p.createContext(a),c=r.length;r=[...r,a];function u(f){const{scope:m,children:y,...x}=f,g=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>x,Object.values(x));return o.jsx(g.Provider,{value:b,children:y})}function d(f,m){const y=(m==null?void 0:m[t][c])||l,x=p.useContext(y);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const s=()=>{const i=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,BD(s,...e)]}function BD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var ma=p.forwardRef((t,e)=>{const{children:r,...n}=t,s=p.Children.toArray(r),i=s.find(UD);if(i){const a=i.props.children,l=s.map(c=>c===i?p.Children.count(a)>1?p.Children.only(null):p.isValidElement(a)?a.props.children:null:c);return o.jsx(Ny,{...n,ref:e,children:p.isValidElement(a)?p.cloneElement(a,void 0,l):null})}return o.jsx(Ny,{...n,ref:e,children:r})});ma.displayName="Slot";var Ny=p.forwardRef((t,e)=>{const{children:r,...n}=t;if(p.isValidElement(r)){const s=GD(r);return p.cloneElement(r,{...qD(n,r.props),ref:e?Px(e,s):s})}return p.Children.count(r)>1?p.Children.only(null):null});Ny.displayName="SlotClone";var iA=({children:t})=>o.jsx(o.Fragment,{children:t});function UD(t){return p.isValidElement(t)&&t.type===iA}function qD(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{i(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function GD(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function _d(t){const e=t+"CollectionProvider",[r,n]=VD(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:x,children:g}=y,b=J.useRef(null),E=J.useRef(new Map).current;return o.jsx(s,{scope:x,itemMap:E,collectionRef:b,children:g})};a.displayName=e;const l=t+"CollectionSlot",c=J.forwardRef((y,x)=>{const{scope:g,children:b}=y,E=i(l,g),w=dt(x,E.collectionRef);return o.jsx(ma,{ref:w,children:b})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=J.forwardRef((y,x)=>{const{scope:g,children:b,...E}=y,w=J.useRef(null),C=dt(x,w),I=i(u,g);return J.useEffect(()=>(I.itemMap.set(w,{ref:w,...E}),()=>void I.itemMap.delete(w))),o.jsx(ma,{[d]:"",ref:C,children:b})});f.displayName=u;function m(y){const x=i(t+"CollectionConsumer",y);return J.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const E=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((I,j)=>E.indexOf(I.ref.current)-E.indexOf(j.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:c,ItemSlot:f},m,n]}function Td(t,e=[]){let r=[];function n(i,a){const l=p.createContext(a),c=r.length;r=[...r,a];const u=f=>{var E;const{scope:m,children:y,...x}=f,g=((E=m==null?void 0:m[t])==null?void 0:E[c])||l,b=p.useMemo(()=>x,Object.values(x));return o.jsx(g.Provider,{value:b,children:y})};u.displayName=i+"Provider";function d(f,m){var g;const y=((g=m==null?void 0:m[t])==null?void 0:g[c])||l,x=p.useContext(y);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,$D(s,...e)]}function $D(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var zD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],He=zD.reduce((t,e)=>{const r=p.forwardRef((n,s)=>{const{asChild:i,...a}=n,l=i?ma:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function kx(t,e){t&&Ta.flushSync(()=>t.dispatchEvent(e))}function _r(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function HD(t,e=globalThis==null?void 0:globalThis.document){const r=_r(t);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var WD="DismissableLayer",_y="dismissableLayer.update",QD="dismissableLayer.pointerDownOutside",YD="dismissableLayer.focusOutside",G1,oA=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ad=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=p.useContext(oA),[d,f]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=p.useState({}),x=dt(e,R=>f(R)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),E=g.indexOf(b),w=d?g.indexOf(d):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,I=w>=E,j=JD(R=>{const N=R.target,S=[...u.branches].some(P=>P.contains(N));!I||S||(s==null||s(R),a==null||a(R),R.defaultPrevented||l==null||l())},m),V=XD(R=>{const N=R.target;[...u.branches].some(P=>P.contains(N))||(i==null||i(R),a==null||a(R),R.defaultPrevented||l==null||l())},m);return HD(R=>{w===u.layers.size-1&&(n==null||n(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},m),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(G1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),$1(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=G1)}},[d,m,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),$1())},[d,u]),p.useEffect(()=>{const R=()=>y({});return document.addEventListener(_y,R),()=>document.removeEventListener(_y,R)},[]),o.jsx(He.div,{...c,ref:x,style:{pointerEvents:C?I?"auto":"none":void 0,...t.style},onFocusCapture:xe(t.onFocusCapture,V.onFocusCapture),onBlurCapture:xe(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:xe(t.onPointerDownCapture,j.onPointerDownCapture)})});Ad.displayName=WD;var KD="DismissableLayerBranch",aA=p.forwardRef((t,e)=>{const r=p.useContext(oA),n=p.useRef(null),s=dt(e,n);return p.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),o.jsx(He.div,{...t,ref:s})});aA.displayName=KD;function JD(t,e=globalThis==null?void 0:globalThis.document){const r=_r(t),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){lA(QD,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function XD(t,e=globalThis==null?void 0:globalThis.document){const r=_r(t),n=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!n.current&&lA(YD,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function $1(){const t=new CustomEvent(_y);document.dispatchEvent(t)}function lA(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?kx(s,i):s.dispatchEvent(i)}var ZD=Ad,e3=aA,Tr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},t3="Portal",gp=p.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,i]=p.useState(!1);Tr(()=>i(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?nA.createPortal(o.jsx(He.div,{...n,ref:e}),a):null});gp.displayName=t3;function r3(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var Aa=t=>{const{present:e,children:r}=t,n=n3(e),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),i=dt(n.ref,s3(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:i}):null};Aa.displayName="Presence";function n3(t){const[e,r]=p.useState(),n=p.useRef({}),s=p.useRef(t),i=p.useRef("none"),a=t?"mounted":"unmounted",[l,c]=r3(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Yh(n.current);i.current=l==="mounted"?u:"none"},[l]),Tr(()=>{const u=n.current,d=s.current;if(d!==t){const m=i.current,y=Yh(u);t?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Tr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=y=>{const g=Yh(n.current).includes(y.animationName);if(y.target===e&&g&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=y=>{y.target===e&&(i.current=Yh(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Yh(t){return(t==null?void 0:t.animationName)||"none"}function s3(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Yu({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,s]=i3({defaultProp:e,onChange:r}),i=t!==void 0,a=i?t:n,l=_r(r),c=p.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[a,c]}function i3({defaultProp:t,onChange:e}){const r=p.useState(t),[n]=r,s=p.useRef(n),i=_r(e);return p.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var o3="VisuallyHidden",Sd=p.forwardRef((t,e)=>o.jsx(He.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Sd.displayName=o3;var a3=Sd,Mx="ToastProvider",[Dx,l3,c3]=_d("Toast"),[cA,cQ]=Td("Toast",[c3]),[u3,yp]=cA(Mx),uA=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=p.useState(null),[u,d]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mx}\`. Expected non-empty \`string\`.`),o.jsx(Dx.Provider,{scope:e,children:o.jsx(u3,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(y=>y+1),[]),onToastRemove:p.useCallback(()=>d(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};uA.displayName=Mx;var dA="ToastViewport",d3=["F8"],Ty="toast.viewportPause",Ay="toast.viewportResume",hA=p.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=d3,label:s="Notifications ({hotkey})",...i}=t,a=yp(dA,r),l=l3(r),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),f=p.useRef(null),m=dt(e,f,a.onViewportChange),y=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=a.toastCount>0;p.useEffect(()=>{const b=E=>{var C;n.length!==0&&n.every(I=>E[I]||E.code===I)&&((C=f.current)==null||C.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),p.useEffect(()=>{const b=c.current,E=f.current;if(x&&b&&E){const w=()=>{if(!a.isClosePausedRef.current){const V=new CustomEvent(Ty);E.dispatchEvent(V),a.isClosePausedRef.current=!0}},C=()=>{if(a.isClosePausedRef.current){const V=new CustomEvent(Ay);E.dispatchEvent(V),a.isClosePausedRef.current=!1}},I=V=>{!b.contains(V.relatedTarget)&&C()},j=()=>{b.contains(document.activeElement)||C()};return b.addEventListener("focusin",w),b.addEventListener("focusout",I),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",j),window.addEventListener("blur",w),window.addEventListener("focus",C),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",I),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",j),window.removeEventListener("blur",w),window.removeEventListener("focus",C)}}},[x,a.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:b})=>{const w=l().map(C=>{const I=C.ref.current,j=[I,...N3(I)];return b==="forwards"?j:j.reverse()});return(b==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const b=f.current;if(b){const E=w=>{var j,V,R;const C=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!C){const N=document.activeElement,S=w.shiftKey;if(w.target===b&&S){(j=u.current)==null||j.focus();return}const M=g({tabbingDirection:S?"backwards":"forwards"}),k=M.findIndex(B=>B===N);r0(M.slice(k+1))?w.preventDefault():S?(V=u.current)==null||V.focus():(R=d.current)==null||R.focus()}};return b.addEventListener("keydown",E),()=>b.removeEventListener("keydown",E)}},[l,g]),o.jsxs(e3,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&o.jsx(Sy,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});r0(b)}}),o.jsx(Dx.Slot,{scope:r,children:o.jsx(He.ol,{tabIndex:-1,...i,ref:m})}),x&&o.jsx(Sy,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});r0(b)}})]})});hA.displayName=dA;var fA="ToastFocusProxy",Sy=p.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,i=yp(fA,r);return o.jsx(Sd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});Sy.displayName=fA;var vp="Toast",h3="toast.swipeStart",f3="toast.swipeMove",m3="toast.swipeCancel",p3="toast.swipeEnd",mA=p.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=Yu({prop:n,defaultProp:s,onChange:i});return o.jsx(Aa,{present:r||l,children:o.jsx(v3,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:_r(t.onPause),onResume:_r(t.onResume),onSwipeStart:xe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xe(t.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:xe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xe(t.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});mA.displayName=vp;var[g3,y3]=cA(vp,{onClose(){}}),v3=p.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:y,...x}=t,g=yp(vp,r),[b,E]=p.useState(null),w=dt(e,B=>E(B)),C=p.useRef(null),I=p.useRef(null),j=s||g.duration,V=p.useRef(0),R=p.useRef(j),N=p.useRef(0),{onToastAdd:S,onToastRemove:P}=g,O=_r(()=>{var z;(b==null?void 0:b.contains(document.activeElement))&&((z=g.viewport)==null||z.focus()),a()}),M=p.useCallback(B=>{!B||B===1/0||(window.clearTimeout(N.current),V.current=new Date().getTime(),N.current=window.setTimeout(O,B))},[O]);p.useEffect(()=>{const B=g.viewport;if(B){const z=()=>{M(R.current),u==null||u()},Q=()=>{const Z=new Date().getTime()-V.current;R.current=R.current-Z,window.clearTimeout(N.current),c==null||c()};return B.addEventListener(Ty,Q),B.addEventListener(Ay,z),()=>{B.removeEventListener(Ty,Q),B.removeEventListener(Ay,z)}}},[g.viewport,j,c,u,M]),p.useEffect(()=>{i&&!g.isClosePausedRef.current&&M(j)},[i,j,g.isClosePausedRef,M]),p.useEffect(()=>(S(),()=>P()),[S,P]);const k=p.useMemo(()=>b?bA(b):null,[b]);return g.viewport?o.jsxs(o.Fragment,{children:[k&&o.jsx(x3,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),o.jsx(g3,{scope:r,onClose:O,children:Ta.createPortal(o.jsx(Dx.ItemSlot,{scope:r,children:o.jsx(ZD,{asChild:!0,onEscapeKeyDown:xe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(He.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:xe(t.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:xe(t.onPointerDown,B=>{B.button===0&&(C.current={x:B.clientX,y:B.clientY})}),onPointerMove:xe(t.onPointerMove,B=>{if(!C.current)return;const z=B.clientX-C.current.x,Q=B.clientY-C.current.y,Z=!!I.current,U=["left","right"].includes(g.swipeDirection),H=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,se=U?H(0,z):0,re=U?0:H(0,Q),ce=B.pointerType==="touch"?10:2,he={x:se,y:re},Te={originalEvent:B,delta:he};Z?(I.current=he,Kh(f3,f,Te,{discrete:!1})):z1(he,g.swipeDirection,ce)?(I.current=he,Kh(h3,d,Te,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(z)>ce||Math.abs(Q)>ce)&&(C.current=null)}),onPointerUp:xe(t.onPointerUp,B=>{const z=I.current,Q=B.target;if(Q.hasPointerCapture(B.pointerId)&&Q.releasePointerCapture(B.pointerId),I.current=null,C.current=null,z){const Z=B.currentTarget,U={originalEvent:B,delta:z};z1(z,g.swipeDirection,g.swipeThreshold)?Kh(p3,y,U,{discrete:!0}):Kh(m3,m,U,{discrete:!0}),Z.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),x3=t=>{const{__scopeToast:e,children:r,...n}=t,s=yp(vp,e),[i,a]=p.useState(!1),[l,c]=p.useState(!1);return E3(()=>a(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(gp,{asChild:!0,children:o.jsx(Sd,{...n,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",r]})})})},w3="ToastTitle",pA=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return o.jsx(He.div,{...n,ref:e})});pA.displayName=w3;var b3="ToastDescription",gA=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return o.jsx(He.div,{...n,ref:e})});gA.displayName=b3;var yA="ToastAction",vA=p.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?o.jsx(wA,{altText:r,asChild:!0,children:o.jsx(Ox,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${yA}\`. Expected non-empty \`string\`.`),null)});vA.displayName=yA;var xA="ToastClose",Ox=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=y3(xA,r);return o.jsx(wA,{asChild:!0,children:o.jsx(He.button,{type:"button",...n,ref:e,onClick:xe(t.onClick,s.onClose)})})});Ox.displayName=xA;var wA=p.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return o.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function bA(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),C3(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...bA(n))}}),e}function Kh(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?kx(s,i):s.dispatchEvent(i)}var z1=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),i=n>s;return e==="left"||e==="right"?i&&n>r:!i&&s>r};function E3(t=()=>{}){const e=_r(t);Tr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function C3(t){return t.nodeType===t.ELEMENT_NODE}function N3(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function r0(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var _3=uA,EA=hA,CA=mA,NA=pA,_A=gA,TA=vA,AA=Ox;function SA(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=SA(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function RA(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=SA(t))&&(n&&(n+=" "),n+=e);return n}const H1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,W1=RA,Lx=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return W1(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const m=H1(d)||H1(f);return s[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...y}=d;return Object.entries(y).every(x=>{let[g,b]=x;return Array.isArray(b)?b.includes({...i,...l}[g]):{...i,...l}[g]===b})?[...u,f,m]:u},[]);return W1(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IA=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},c)=>p.createElement("svg",{ref:c,...A3,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:IA("lucide",s),...l},[...a.map(([u,d])=>p.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,e)=>{const r=p.forwardRef(({className:n,...s},i)=>p.createElement(S3,{ref:i,iconNode:e,className:IA(`lucide-${T3(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=Re("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Re("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Re("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=Re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=Re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=Re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Re("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=Re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=Re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Re("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=Re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=Re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=Re("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=Re("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=Re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=Re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=Re("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=Re("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=Re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=Re("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=Re("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Hx="-",$3=t=>{const e=H3(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const l=a.split(Hx);return l[0]===""&&l.length!==1&&l.shift(),DA(l,e)||z3(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},DA=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?DA(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Hx);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},K1=/^\[(.+)\]$/,z3=t=>{if(K1.test(t)){const e=K1.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},H3=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return Q3(Object.entries(t.classGroups),r).forEach(([i,a])=>{jy(a,n,i,e)}),n},jy=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:J1(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(W3(s)){jy(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,a])=>{jy(a,J1(e,i),r,n)})})},J1=(t,e)=>{let r=t;return e.split(Hx).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},W3=t=>t.isThemeGetter,Q3=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[r,s]}):t,Y3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,a)=>{r.set(i,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){r.has(i)?r.set(i,a):s(i,a)}}},OA="!",K3=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let u=0,d=0,f;for(let b=0;b<l.length;b++){let E=l[b];if(u===0){if(E===s&&(n||l.slice(b,b+i)===e)){c.push(l.slice(d,b)),d=b+i;continue}if(E==="/"){f=b;continue}}E==="["?u++:E==="]"&&u--}const m=c.length===0?l:l.substring(d),y=m.startsWith(OA),x=y?m.substring(1):m,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:x,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:a}):a},J3=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},X3=t=>({cache:Y3(t.cacheSize),parseClassName:K3(t),...$3(t)}),Z3=/\s+/,e5=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(Z3);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=r(u);let x=!!y,g=n(x?m.substring(0,y):m);if(!g){if(!x){l=u+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=u+(l.length>0?" "+l:l);continue}x=!1}const b=J3(d).join(":"),E=f?b+OA:b,w=E+g;if(i.includes(w))continue;i.push(w);const C=s(g,x);for(let I=0;I<C.length;++I){const j=C[I];i.push(E+j)}l=u+(l.length>0?" "+l:l)}return l};function t5(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=LA(e))&&(n&&(n+=" "),n+=r);return n}const LA=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=LA(t[n]))&&(r&&(r+=" "),r+=e);return r};function r5(t,...e){let r,n,s,i=a;function a(c){const u=e.reduce((d,f)=>f(d),t());return r=X3(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=e5(c,r);return s(c,d),d}return function(){return i(t5.apply(null,arguments))}}const xt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},FA=/^\[(?:([a-z-]+):)?(.+)\]$/i,n5=/^\d+\/\d+$/,s5=new Set(["px","full","screen"]),i5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,o5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,a5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,l5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,c5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Us=t=>Tl(t)||s5.has(t)||n5.test(t),Ti=t=>uc(t,"length",y5),Tl=t=>!!t&&!Number.isNaN(Number(t)),o0=t=>uc(t,"number",Tl),Yc=t=>!!t&&Number.isInteger(Number(t)),u5=t=>t.endsWith("%")&&Tl(t.slice(0,-1)),Le=t=>FA.test(t),Ai=t=>i5.test(t),d5=new Set(["length","size","percentage"]),h5=t=>uc(t,d5,VA),f5=t=>uc(t,"position",VA),m5=new Set(["image","url"]),p5=t=>uc(t,m5,x5),g5=t=>uc(t,"",v5),Kc=()=>!0,uc=(t,e,r)=>{const n=FA.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},y5=t=>o5.test(t)&&!a5.test(t),VA=()=>!1,v5=t=>l5.test(t),x5=t=>c5.test(t),w5=()=>{const t=xt("colors"),e=xt("spacing"),r=xt("blur"),n=xt("brightness"),s=xt("borderColor"),i=xt("borderRadius"),a=xt("borderSpacing"),l=xt("borderWidth"),c=xt("contrast"),u=xt("grayscale"),d=xt("hueRotate"),f=xt("invert"),m=xt("gap"),y=xt("gradientColorStops"),x=xt("gradientColorStopPositions"),g=xt("inset"),b=xt("margin"),E=xt("opacity"),w=xt("padding"),C=xt("saturate"),I=xt("scale"),j=xt("sepia"),V=xt("skew"),R=xt("space"),N=xt("translate"),S=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Le,e],M=()=>[Le,e],k=()=>["",Us,Ti],B=()=>["auto",Tl,Le],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Le],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[Tl,Le];return{cacheSize:500,separator:":",theme:{colors:[Kc],spacing:[Us,Ti],blur:["none","",Ai,Le],brightness:re(),borderColor:[t],borderRadius:["none","","full",Ai,Le],borderSpacing:M(),borderWidth:k(),contrast:re(),grayscale:H(),hueRotate:re(),invert:H(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[u5,Ti],inset:O(),margin:O(),opacity:re(),padding:M(),saturate:re(),scale:re(),sepia:H(),skew:re(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Le]}],container:["container"],columns:[{columns:[Ai]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Le]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Yc,Le]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Le]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Yc,Le]}],"grid-cols":[{"grid-cols":[Kc]}],"col-start-end":[{col:["auto",{span:["full",Yc,Le]},Le]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Kc]}],"row-start-end":[{row:["auto",{span:[Yc,Le]},Le]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Le]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Le,e]}],"min-w":[{"min-w":[Le,e,"min","max","fit"]}],"max-w":[{"max-w":[Le,e,"none","full","min","max","fit","prose",{screen:[Ai]},Ai]}],h:[{h:[Le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ai,Ti]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",o0]}],"font-family":[{font:[Kc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Le]}],"line-clamp":[{"line-clamp":["none",Tl,o0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Us,Le]}],"list-image":[{"list-image":["none",Le]}],"list-style-type":[{list:["none","disc","decimal",Le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Us,Ti]}],"underline-offset":[{"underline-offset":["auto",Us,Le]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),f5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",h5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},p5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Us,Le]}],"outline-w":[{outline:[Us,Ti]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Us,Ti]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ai,g5]}],"shadow-color":[{shadow:[Kc]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ai,Le]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Le]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",Le]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",Le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Yc,Le]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Le]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Us,Ti,o0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},b5=r5(w5),E5=()=>{};var X1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},C5=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],l=t[r++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},UA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,y=u&63;c||(y=64,a||(m=64)),n.push(r[d],r[f],r[m],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new N5;const m=i<<2|l>>4;if(n.push(m),u!==64){const y=l<<4&240|u>>2;if(n.push(y),f!==64){const x=u<<6&192|f;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class N5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _5=function(t){const e=BA(t);return UA.encodeByteArray(e,!0)},bm=function(t){return _5(t).replace(/\./g,"")},qA=function(t){try{return UA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=()=>T5().__FIREBASE_DEFAULTS__,S5=()=>{if(typeof process>"u"||typeof X1>"u")return;const t=X1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qA(t[1]);return e&&JSON.parse(e)},wp=()=>{try{return E5()||A5()||S5()||R5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},GA=t=>{var e,r;return(r=(e=wp())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},I5=t=>{const e=GA(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},$A=()=>{var t;return(t=wp())===null||t===void 0?void 0:t.config},zA=t=>{var e;return(e=wp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bm(JSON.stringify(r)),bm(JSON.stringify(a)),""].join(".")}const Nu={};function k5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Nu))Nu[e]?t.emulator.push(e):t.prod.push(e);return t}function M5(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Z1=!1;function WA(t,e){if(typeof window>"u"||typeof document>"u"||!dc(window.location.host)||Nu[t]===e||Nu[t]||Z1)return;Nu[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",i=k5().prod.length>0;function a(){const m=document.getElementById(n);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Z1=!0,a()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=M5(n),y=r("text"),x=document.getElementById(y)||document.createElement("span"),g=r("learnmore"),b=document.getElementById(g)||document.createElement("a"),E=r("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),d(b,g);const I=u();c(w,E),C.append(w,x,b,I),document.body.appendChild(C)}i?(x.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ar())}function O5(){var t;const e=(t=wp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function F5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function V5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B5(){const t=Ar();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function U5(){return!O5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q5(){try{return typeof indexedDB=="object"}catch{return!1}}function G5(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="FirebaseError";class hi extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=$5,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rd.prototype.create)}}class Rd{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?z5(i,n):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new hi(s,l,n)}}function z5(t,e){return t.replace(H5,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const H5=/\{\$([^}]+)}/g;function W5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pa(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(eE(i)&&eE(a)){if(!pa(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function eE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function nu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function su(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Q5(t,e){const r=new Y5(t,e);return r.subscribe.bind(r)}class Y5{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");K5(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=a0),s.error===void 0&&(s.error=a0),s.complete===void 0&&(s.complete=a0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K5(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function a0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class ga{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J5=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new j5;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z5(e))try{this.getOrInitializeService({instanceIdentifier:Yo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yo){return this.instances.has(e)}getOptions(e=Yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:X5(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Yo){return this.component?this.component.multipleInstances?e:Yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function X5(t){return t===Yo?void 0:t}function Z5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new J5(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const tO={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},rO=Qe.INFO,nO={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},sO=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=nO[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wx{constructor(e){this.name=e,this._logLevel=rO,this._logHandler=sO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const iO=(t,e)=>e.some(r=>t instanceof r);let tE,rE;function oO(){return tE||(tE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aO(){return rE||(rE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QA=new WeakMap,Py=new WeakMap,YA=new WeakMap,l0=new WeakMap,Qx=new WeakMap;function lO(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(so(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&QA.set(r,t)}).catch(()=>{}),Qx.set(e,t),e}function cO(t){if(Py.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Py.set(t,e)}let ky={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Py.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YA.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return so(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uO(t){ky=t(ky)}function dO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(c0(this),e,...r);return YA.set(n,e.sort?e.sort():[e]),so(n)}:aO().includes(t)?function(...e){return t.apply(c0(this),e),so(QA.get(this))}:function(...e){return so(t.apply(c0(this),e))}}function hO(t){return typeof t=="function"?dO(t):(t instanceof IDBTransaction&&cO(t),iO(t,oO())?new Proxy(t,ky):t)}function so(t){if(t instanceof IDBRequest)return lO(t);if(l0.has(t))return l0.get(t);const e=hO(t);return e!==t&&(l0.set(t,e),Qx.set(e,t)),e}const c0=t=>Qx.get(t);function fO(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=so(a);return n&&a.addEventListener("upgradeneeded",c=>{n(so(a.result),c.oldVersion,c.newVersion,so(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const mO=["get","getKey","getAll","getAllKeys","count"],pO=["put","add","delete","clear"],u0=new Map;function nE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(u0.get(e))return u0.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=pO.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||mO.includes(r)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return u0.set(e,i),i}uO(t=>({...t,get:(e,r,n)=>nE(e,r)||t.get(e,r,n),has:(e,r)=>!!nE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(yO(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function yO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const My="@firebase/app",sE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new Wx("@firebase/app"),vO="@firebase/app-compat",xO="@firebase/analytics-compat",wO="@firebase/analytics",bO="@firebase/app-check-compat",EO="@firebase/app-check",CO="@firebase/auth",NO="@firebase/auth-compat",_O="@firebase/database",TO="@firebase/data-connect",AO="@firebase/database-compat",SO="@firebase/functions",RO="@firebase/functions-compat",IO="@firebase/installations",jO="@firebase/installations-compat",PO="@firebase/messaging",kO="@firebase/messaging-compat",MO="@firebase/performance",DO="@firebase/performance-compat",OO="@firebase/remote-config",LO="@firebase/remote-config-compat",FO="@firebase/storage",VO="@firebase/storage-compat",BO="@firebase/firestore",UO="@firebase/ai",qO="@firebase/firestore-compat",GO="firebase",$O="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="[DEFAULT]",zO={[My]:"fire-core",[vO]:"fire-core-compat",[wO]:"fire-analytics",[xO]:"fire-analytics-compat",[EO]:"fire-app-check",[bO]:"fire-app-check-compat",[CO]:"fire-auth",[NO]:"fire-auth-compat",[_O]:"fire-rtdb",[TO]:"fire-data-connect",[AO]:"fire-rtdb-compat",[SO]:"fire-fn",[RO]:"fire-fn-compat",[IO]:"fire-iid",[jO]:"fire-iid-compat",[PO]:"fire-fcm",[kO]:"fire-fcm-compat",[MO]:"fire-perf",[DO]:"fire-perf-compat",[OO]:"fire-rc",[LO]:"fire-rc-compat",[FO]:"fire-gcs",[VO]:"fire-gcs-compat",[BO]:"fire-fst",[qO]:"fire-fst-compat",[UO]:"fire-vertex","fire-js":"fire-js",[GO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Map,HO=new Map,Oy=new Map;function iE(t,e){try{t.container.addComponent(e)}catch(r){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Jl(t){const e=t.name;if(Oy.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;Oy.set(e,t);for(const r of Xu.values())iE(r,t);for(const r of HO.values())iE(r,t);return!0}function Yx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function En(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},io=new Rd("app","Firebase",WO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw io.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=$O;function KA(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Dy,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw io.create("bad-app-name",{appName:String(s)});if(r||(r=$A()),!r)throw io.create("no-options");const i=Xu.get(s);if(i){if(pa(r,i.options)&&pa(n,i.config))return i;throw io.create("duplicate-app",{appName:s})}const a=new eO(s);for(const c of Oy.values())a.addComponent(c);const l=new QO(r,n,a);return Xu.set(s,l),l}function Kx(t=Dy){const e=Xu.get(t);if(!e&&t===Dy&&$A())return KA();if(!e)throw io.create("no-app",{appName:t});return e}function YO(){return Array.from(Xu.values())}function oo(t,e,r){var n;let s=(n=zO[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(l.join(" "));return}Jl(new ga(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="firebase-heartbeat-database",JO=1,Zu="firebase-heartbeat-store";let d0=null;function JA(){return d0||(d0=fO(KO,JO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zu)}catch(r){console.warn(r)}}}}).catch(t=>{throw io.create("idb-open",{originalErrorMessage:t.message})})),d0}async function XO(t){try{const r=(await JA()).transaction(Zu),n=await r.objectStore(Zu).get(XA(t));return await r.done,n}catch(e){if(e instanceof hi)ii.warn(e.message);else{const r=io.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ii.warn(r.message)}}}async function oE(t,e){try{const n=(await JA()).transaction(Zu,"readwrite");await n.objectStore(Zu).put(e,XA(t)),await n.done}catch(r){if(r instanceof hi)ii.warn(r.message);else{const n=io.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ii.warn(n.message)}}}function XA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=1024,eL=30;class tL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new nL(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=aE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>eL){const a=sL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ii.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=aE(),{heartbeatsToSend:n,unsentEntries:s}=rL(this._heartbeatsCache.heartbeats),i=bm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return ii.warn(r),""}}}function aE(){return new Date().toISOString().substring(0,10)}function rL(t,e=ZO){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),lE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),lE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class nL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return q5()?G5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await XO(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return oE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return oE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lE(t){return bm(JSON.stringify({version:2,heartbeats:t})).length}function sL(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){Jl(new ga("platform-logger",e=>new gO(e),"PRIVATE")),Jl(new ga("heartbeat",e=>new tL(e),"PRIVATE")),oo(My,sE,t),oo(My,sE,"esm2017"),oo("fire-js","")}iL("");var oL="firebase",aL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oo(oL,aL,"app");var cE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,ZA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,N){function S(){}S.prototype=N.prototype,R.D=N.prototype,R.prototype=new S,R.prototype.constructor=R,R.C=function(P,O,M){for(var k=Array(arguments.length-2),B=2;B<arguments.length;B++)k[B-2]=arguments[B];return N.prototype[O].apply(P,k)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,N,S){S||(S=0);var P=Array(16);if(typeof N=="string")for(var O=0;16>O;++O)P[O]=N.charCodeAt(S++)|N.charCodeAt(S++)<<8|N.charCodeAt(S++)<<16|N.charCodeAt(S++)<<24;else for(O=0;16>O;++O)P[O]=N[S++]|N[S++]<<8|N[S++]<<16|N[S++]<<24;N=R.g[0],S=R.g[1],O=R.g[2];var M=R.g[3],k=N+(M^S&(O^M))+P[0]+3614090360&4294967295;N=S+(k<<7&4294967295|k>>>25),k=M+(O^N&(S^O))+P[1]+3905402710&4294967295,M=N+(k<<12&4294967295|k>>>20),k=O+(S^M&(N^S))+P[2]+606105819&4294967295,O=M+(k<<17&4294967295|k>>>15),k=S+(N^O&(M^N))+P[3]+3250441966&4294967295,S=O+(k<<22&4294967295|k>>>10),k=N+(M^S&(O^M))+P[4]+4118548399&4294967295,N=S+(k<<7&4294967295|k>>>25),k=M+(O^N&(S^O))+P[5]+1200080426&4294967295,M=N+(k<<12&4294967295|k>>>20),k=O+(S^M&(N^S))+P[6]+2821735955&4294967295,O=M+(k<<17&4294967295|k>>>15),k=S+(N^O&(M^N))+P[7]+4249261313&4294967295,S=O+(k<<22&4294967295|k>>>10),k=N+(M^S&(O^M))+P[8]+1770035416&4294967295,N=S+(k<<7&4294967295|k>>>25),k=M+(O^N&(S^O))+P[9]+2336552879&4294967295,M=N+(k<<12&4294967295|k>>>20),k=O+(S^M&(N^S))+P[10]+4294925233&4294967295,O=M+(k<<17&4294967295|k>>>15),k=S+(N^O&(M^N))+P[11]+2304563134&4294967295,S=O+(k<<22&4294967295|k>>>10),k=N+(M^S&(O^M))+P[12]+1804603682&4294967295,N=S+(k<<7&4294967295|k>>>25),k=M+(O^N&(S^O))+P[13]+4254626195&4294967295,M=N+(k<<12&4294967295|k>>>20),k=O+(S^M&(N^S))+P[14]+2792965006&4294967295,O=M+(k<<17&4294967295|k>>>15),k=S+(N^O&(M^N))+P[15]+1236535329&4294967295,S=O+(k<<22&4294967295|k>>>10),k=N+(O^M&(S^O))+P[1]+4129170786&4294967295,N=S+(k<<5&4294967295|k>>>27),k=M+(S^O&(N^S))+P[6]+3225465664&4294967295,M=N+(k<<9&4294967295|k>>>23),k=O+(N^S&(M^N))+P[11]+643717713&4294967295,O=M+(k<<14&4294967295|k>>>18),k=S+(M^N&(O^M))+P[0]+3921069994&4294967295,S=O+(k<<20&4294967295|k>>>12),k=N+(O^M&(S^O))+P[5]+3593408605&4294967295,N=S+(k<<5&4294967295|k>>>27),k=M+(S^O&(N^S))+P[10]+38016083&4294967295,M=N+(k<<9&4294967295|k>>>23),k=O+(N^S&(M^N))+P[15]+3634488961&4294967295,O=M+(k<<14&4294967295|k>>>18),k=S+(M^N&(O^M))+P[4]+3889429448&4294967295,S=O+(k<<20&4294967295|k>>>12),k=N+(O^M&(S^O))+P[9]+568446438&4294967295,N=S+(k<<5&4294967295|k>>>27),k=M+(S^O&(N^S))+P[14]+3275163606&4294967295,M=N+(k<<9&4294967295|k>>>23),k=O+(N^S&(M^N))+P[3]+4107603335&4294967295,O=M+(k<<14&4294967295|k>>>18),k=S+(M^N&(O^M))+P[8]+1163531501&4294967295,S=O+(k<<20&4294967295|k>>>12),k=N+(O^M&(S^O))+P[13]+2850285829&4294967295,N=S+(k<<5&4294967295|k>>>27),k=M+(S^O&(N^S))+P[2]+4243563512&4294967295,M=N+(k<<9&4294967295|k>>>23),k=O+(N^S&(M^N))+P[7]+1735328473&4294967295,O=M+(k<<14&4294967295|k>>>18),k=S+(M^N&(O^M))+P[12]+2368359562&4294967295,S=O+(k<<20&4294967295|k>>>12),k=N+(S^O^M)+P[5]+4294588738&4294967295,N=S+(k<<4&4294967295|k>>>28),k=M+(N^S^O)+P[8]+2272392833&4294967295,M=N+(k<<11&4294967295|k>>>21),k=O+(M^N^S)+P[11]+1839030562&4294967295,O=M+(k<<16&4294967295|k>>>16),k=S+(O^M^N)+P[14]+4259657740&4294967295,S=O+(k<<23&4294967295|k>>>9),k=N+(S^O^M)+P[1]+2763975236&4294967295,N=S+(k<<4&4294967295|k>>>28),k=M+(N^S^O)+P[4]+1272893353&4294967295,M=N+(k<<11&4294967295|k>>>21),k=O+(M^N^S)+P[7]+4139469664&4294967295,O=M+(k<<16&4294967295|k>>>16),k=S+(O^M^N)+P[10]+3200236656&4294967295,S=O+(k<<23&4294967295|k>>>9),k=N+(S^O^M)+P[13]+681279174&4294967295,N=S+(k<<4&4294967295|k>>>28),k=M+(N^S^O)+P[0]+3936430074&4294967295,M=N+(k<<11&4294967295|k>>>21),k=O+(M^N^S)+P[3]+3572445317&4294967295,O=M+(k<<16&4294967295|k>>>16),k=S+(O^M^N)+P[6]+76029189&4294967295,S=O+(k<<23&4294967295|k>>>9),k=N+(S^O^M)+P[9]+3654602809&4294967295,N=S+(k<<4&4294967295|k>>>28),k=M+(N^S^O)+P[12]+3873151461&4294967295,M=N+(k<<11&4294967295|k>>>21),k=O+(M^N^S)+P[15]+530742520&4294967295,O=M+(k<<16&4294967295|k>>>16),k=S+(O^M^N)+P[2]+3299628645&4294967295,S=O+(k<<23&4294967295|k>>>9),k=N+(O^(S|~M))+P[0]+4096336452&4294967295,N=S+(k<<6&4294967295|k>>>26),k=M+(S^(N|~O))+P[7]+1126891415&4294967295,M=N+(k<<10&4294967295|k>>>22),k=O+(N^(M|~S))+P[14]+2878612391&4294967295,O=M+(k<<15&4294967295|k>>>17),k=S+(M^(O|~N))+P[5]+4237533241&4294967295,S=O+(k<<21&4294967295|k>>>11),k=N+(O^(S|~M))+P[12]+1700485571&4294967295,N=S+(k<<6&4294967295|k>>>26),k=M+(S^(N|~O))+P[3]+2399980690&4294967295,M=N+(k<<10&4294967295|k>>>22),k=O+(N^(M|~S))+P[10]+4293915773&4294967295,O=M+(k<<15&4294967295|k>>>17),k=S+(M^(O|~N))+P[1]+2240044497&4294967295,S=O+(k<<21&4294967295|k>>>11),k=N+(O^(S|~M))+P[8]+1873313359&4294967295,N=S+(k<<6&4294967295|k>>>26),k=M+(S^(N|~O))+P[15]+4264355552&4294967295,M=N+(k<<10&4294967295|k>>>22),k=O+(N^(M|~S))+P[6]+2734768916&4294967295,O=M+(k<<15&4294967295|k>>>17),k=S+(M^(O|~N))+P[13]+1309151649&4294967295,S=O+(k<<21&4294967295|k>>>11),k=N+(O^(S|~M))+P[4]+4149444226&4294967295,N=S+(k<<6&4294967295|k>>>26),k=M+(S^(N|~O))+P[11]+3174756917&4294967295,M=N+(k<<10&4294967295|k>>>22),k=O+(N^(M|~S))+P[2]+718787259&4294967295,O=M+(k<<15&4294967295|k>>>17),k=S+(M^(O|~N))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+N&4294967295,R.g[1]=R.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+M&4294967295}n.prototype.u=function(R,N){N===void 0&&(N=R.length);for(var S=N-this.blockSize,P=this.B,O=this.h,M=0;M<N;){if(O==0)for(;M<=S;)s(this,R,M),M+=this.blockSize;if(typeof R=="string"){for(;M<N;)if(P[O++]=R.charCodeAt(M++),O==this.blockSize){s(this,P),O=0;break}}else for(;M<N;)if(P[O++]=R[M++],O==this.blockSize){s(this,P),O=0;break}}this.h=O,this.o+=N},n.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var N=1;N<R.length-8;++N)R[N]=0;var S=8*this.o;for(N=R.length-8;N<R.length;++N)R[N]=S&255,S/=256;for(this.u(R),R=Array(16),N=S=0;4>N;++N)for(var P=0;32>P;P+=8)R[S++]=this.g[N]>>>P&255;return R};function i(R,N){var S=l;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=N(R)}function a(R,N){this.h=N;for(var S=[],P=!0,O=R.length-1;0<=O;O--){var M=R[O]|0;P&&M==N||(S[O]=M,P=!1)}this.g=S}var l={};function c(R){return-128<=R&&128>R?i(R,function(N){return new a([N|0],0>N?-1:0)}):new a([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return b(u(-R));for(var N=[],S=1,P=0;R>=S;P++)N[P]=R/S|0,S*=4294967296;return new a(N,0)}function d(R,N){if(R.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(R.charAt(0)=="-")return b(d(R.substring(1),N));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(N,8)),P=f,O=0;O<R.length;O+=8){var M=Math.min(8,R.length-O),k=parseInt(R.substring(O,O+M),N);8>M?(M=u(Math.pow(N,M)),P=P.j(M).add(u(k))):(P=P.j(S),P=P.add(u(k)))}return P}var f=c(0),m=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(g(this))return-b(this).m();for(var R=0,N=1,S=0;S<this.g.length;S++){var P=this.i(S);R+=(0<=P?P:4294967296+P)*N,N*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x(this))return"0";if(g(this))return"-"+b(this).toString(R);for(var N=u(Math.pow(R,6)),S=this,P="";;){var O=I(S,N).g;S=E(S,O.j(N));var M=((0<S.g.length?S.g[0]:S.h)>>>0).toString(R);if(S=O,x(S))return M+P;for(;6>M.length;)M="0"+M;P=M+P}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function x(R){if(R.h!=0)return!1;for(var N=0;N<R.g.length;N++)if(R.g[N]!=0)return!1;return!0}function g(R){return R.h==-1}t.l=function(R){return R=E(this,R),g(R)?-1:x(R)?0:1};function b(R){for(var N=R.g.length,S=[],P=0;P<N;P++)S[P]=~R.g[P];return new a(S,~R.h).add(m)}t.abs=function(){return g(this)?b(this):this},t.add=function(R){for(var N=Math.max(this.g.length,R.g.length),S=[],P=0,O=0;O<=N;O++){var M=P+(this.i(O)&65535)+(R.i(O)&65535),k=(M>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);P=k>>>16,M&=65535,k&=65535,S[O]=k<<16|M}return new a(S,S[S.length-1]&-2147483648?-1:0)};function E(R,N){return R.add(b(N))}t.j=function(R){if(x(this)||x(R))return f;if(g(this))return g(R)?b(this).j(b(R)):b(b(this).j(R));if(g(R))return b(this.j(b(R)));if(0>this.l(y)&&0>R.l(y))return u(this.m()*R.m());for(var N=this.g.length+R.g.length,S=[],P=0;P<2*N;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<R.g.length;O++){var M=this.i(P)>>>16,k=this.i(P)&65535,B=R.i(O)>>>16,z=R.i(O)&65535;S[2*P+2*O]+=k*z,w(S,2*P+2*O),S[2*P+2*O+1]+=M*z,w(S,2*P+2*O+1),S[2*P+2*O+1]+=k*B,w(S,2*P+2*O+1),S[2*P+2*O+2]+=M*B,w(S,2*P+2*O+2)}for(P=0;P<N;P++)S[P]=S[2*P+1]<<16|S[2*P];for(P=N;P<2*N;P++)S[P]=0;return new a(S,0)};function w(R,N){for(;(R[N]&65535)!=R[N];)R[N+1]+=R[N]>>>16,R[N]&=65535,N++}function C(R,N){this.g=R,this.h=N}function I(R,N){if(x(N))throw Error("division by zero");if(x(R))return new C(f,f);if(g(R))return N=I(b(R),N),new C(b(N.g),b(N.h));if(g(N))return N=I(R,b(N)),new C(b(N.g),N.h);if(30<R.g.length){if(g(R)||g(N))throw Error("slowDivide_ only works with positive integers.");for(var S=m,P=N;0>=P.l(R);)S=j(S),P=j(P);var O=V(S,1),M=V(P,1);for(P=V(P,2),S=V(S,2);!x(P);){var k=M.add(P);0>=k.l(R)&&(O=O.add(S),M=k),P=V(P,1),S=V(S,1)}return N=E(R,O.j(N)),new C(O,N)}for(O=f;0<=R.l(N);){for(S=Math.max(1,Math.floor(R.m()/N.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),M=u(S),k=M.j(N);g(k)||0<k.l(R);)S-=P,M=u(S),k=M.j(N);x(M)&&(M=m),O=O.add(M),R=E(R,k)}return new C(O,R)}t.A=function(R){return I(this,R).h},t.and=function(R){for(var N=Math.max(this.g.length,R.g.length),S=[],P=0;P<N;P++)S[P]=this.i(P)&R.i(P);return new a(S,this.h&R.h)},t.or=function(R){for(var N=Math.max(this.g.length,R.g.length),S=[],P=0;P<N;P++)S[P]=this.i(P)|R.i(P);return new a(S,this.h|R.h)},t.xor=function(R){for(var N=Math.max(this.g.length,R.g.length),S=[],P=0;P<N;P++)S[P]=this.i(P)^R.i(P);return new a(S,this.h^R.h)};function j(R){for(var N=R.g.length+1,S=[],P=0;P<N;P++)S[P]=R.i(P)<<1|R.i(P-1)>>>31;return new a(S,R.h)}function V(R,N){var S=N>>5;N%=32;for(var P=R.g.length-S,O=[],M=0;M<P;M++)O[M]=0<N?R.i(M+S)>>>N|R.i(M+S+1)<<32-N:R.i(M+S);return new a(O,R.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,ZA=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,ao=a}).apply(typeof cE<"u"?cE:typeof self<"u"?self:typeof window<"u"?window:{});var Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eS,iu,tS,Rf,Ly,rS,nS,sS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,A){return h==Array.prototype||h==Object.prototype||(h[v]=A.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zh=="object"&&Zh];for(var v=0;v<h.length;++v){var A=h[v];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var n=r(this);function s(h,v){if(v)e:{var A=n;h=h.split(".");for(var L=0;L<h.length-1;L++){var W=h[L];if(!(W in A))break e;A=A[W]}h=h[h.length-1],L=A[h],v=v(L),v!=L&&v!=null&&e(A,h,{configurable:!0,writable:!0,value:v})}}function i(h,v){h instanceof String&&(h+="");var A=0,L=!1,W={next:function(){if(!L&&A<h.length){var X=A++;return{value:v(X,h[X]),done:!1}}return L=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(h){return h||function(){return i(this,function(v,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function u(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function d(h,v,A){return h.call.apply(h.bind,arguments)}function f(h,v,A){if(!h)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,L),h.apply(v,W)}}return function(){return h.apply(v,arguments)}}function m(h,v,A){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(h,v){var A=Array.prototype.slice.call(arguments,1);return function(){var L=A.slice();return L.push.apply(L,arguments),h.apply(this,L)}}function x(h,v){function A(){}A.prototype=v.prototype,h.aa=v.prototype,h.prototype=new A,h.prototype.constructor=h,h.Qb=function(L,W,X){for(var ee=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)ee[ct-2]=arguments[ct];return v.prototype[W].apply(L,ee)}}function g(h){const v=h.length;if(0<v){const A=Array(v);for(let L=0;L<v;L++)A[L]=h[L];return A}return[]}function b(h,v){for(let A=1;A<arguments.length;A++){const L=arguments[A];if(c(L)){const W=h.length||0,X=L.length||0;h.length=W+X;for(let ee=0;ee<X;ee++)h[W+ee]=L[ee]}else h.push(L)}}class E{constructor(v,A){this.i=v,this.j=A,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function w(h){return/^[\s\xa0]*$/.test(h)}function C(){var h=l.navigator;return h&&(h=h.userAgent)?h:""}function I(h){return I[" "](h),h}I[" "]=function(){};var j=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function V(h,v,A){for(const L in h)v.call(A,h[L],L,h)}function R(h,v){for(const A in h)v.call(void 0,h[A],A,h)}function N(h){const v={};for(const A in h)v[A]=h[A];return v}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,v){let A,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(A in L)h[A]=L[A];for(let X=0;X<S.length;X++)A=S[X],Object.prototype.hasOwnProperty.call(L,A)&&(h[A]=L[A])}}function O(h){var v=1;h=h.split(":");const A=[];for(;0<v&&h.length;)A.push(h.shift()),v--;return h.length&&A.push(h.join(":")),A}function M(h){l.setTimeout(()=>{throw h},0)}function k(){var h=H;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class B{constructor(){this.h=this.g=null}add(v,A){const L=z.get();L.set(v,A),this.h?this.h.next=L:this.g=L,this.h=L}}var z=new E(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(v,A){this.h=v,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,U=!1,H=new B,se=()=>{const h=l.Promise.resolve(void 0);Z=()=>{h.then(re)}};var re=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(A){M(A)}var v=z;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}U=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const A=()=>{};l.addEventListener("test",A,v),l.removeEventListener("test",A,v)}catch{}return h}();function Me(h,v){if(he.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var A=this.type=h.type,L=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(j){e:{try{I(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else A=="mouseover"?v=h.fromElement:A=="mouseout"&&(v=h.toElement);this.relatedTarget=v,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ce[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Me.aa.h.call(this)}}x(Me,he);var Ce={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),le=0;function G(h,v,A,L,W){this.listener=h,this.proxy=null,this.src=v,this.type=A,this.capture=!!L,this.ha=W,this.key=++le,this.da=this.fa=!1}function de(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ge(h){this.src=h,this.g={},this.h=0}ge.prototype.add=function(h,v,A,L,W){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var ee=fe(h,v,L,W);return-1<ee?(v=h[ee],A||(v.fa=!1)):(v=new G(v,this.src,X,!!L,W),v.fa=A,h.push(v)),v};function Ee(h,v){var A=v.type;if(A in h.g){var L=h.g[A],W=Array.prototype.indexOf.call(L,v,void 0),X;(X=0<=W)&&Array.prototype.splice.call(L,W,1),X&&(de(v),h.g[A].length==0&&(delete h.g[A],h.h--))}}function fe(h,v,A,L){for(var W=0;W<h.length;++W){var X=h[W];if(!X.da&&X.listener==v&&X.capture==!!A&&X.ha==L)return W}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),mt={};function Ue(h,v,A,L,W){if(Array.isArray(v)){for(var X=0;X<v.length;X++)Ue(h,v[X],A,L,W);return null}return A=Oo(A),h&&h[oe]?h.K(v,A,u(L)?!!L.capture:!!L,W):lt(h,v,A,!1,L,W)}function lt(h,v,A,L,W,X){if(!v)throw Error("Invalid event type");var ee=u(W)?!!W.capture:!!W,ct=mn(h);if(ct||(h[ve]=ct=new ge(h)),A=ct.add(v,A,L,ee,X),A.proxy)return A;if(L=Ge(),A.proxy=L,L.src=h,L.listener=A,h.addEventListener)Te||(W=ee),W===void 0&&(W=!1),h.addEventListener(v.toString(),L,W);else if(h.attachEvent)h.attachEvent(Pn(v.toString()),L);else if(h.addListener&&h.removeListener)h.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Ge(){function h(A){return v.call(h.src,h.listener,A)}const v=Rs;return h}function Et(h,v,A,L,W){if(Array.isArray(v))for(var X=0;X<v.length;X++)Et(h,v[X],A,L,W);else L=u(L)?!!L.capture:!!L,A=Oo(A),h&&h[oe]?(h=h.i,v=String(v).toString(),v in h.g&&(X=h.g[v],A=fe(X,A,L,W),-1<A&&(de(X[A]),Array.prototype.splice.call(X,A,1),X.length==0&&(delete h.g[v],h.h--)))):h&&(h=mn(h))&&(v=h.g[v.toString()],h=-1,v&&(h=fe(v,A,L,W)),(A=-1<h?v[h]:null)&&fr(A))}function fr(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[oe])Ee(v.i,h);else{var A=h.type,L=h.proxy;v.removeEventListener?v.removeEventListener(A,L,h.capture):v.detachEvent?v.detachEvent(Pn(A),L):v.addListener&&v.removeListener&&v.removeListener(L),(A=mn(v))?(Ee(A,h),A.h==0&&(A.src=null,v[ve]=null)):de(h)}}}function Pn(h){return h in mt?mt[h]:mt[h]="on"+h}function Rs(h,v){if(h.da)h=!0;else{v=new Me(v,this);var A=h.listener,L=h.ha||h.src;h.fa&&fr(h),h=A.call(L,v)}return h}function mn(h){return h=h[ve],h instanceof ge?h:null}var Is="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oo(h){return typeof h=="function"?h:(h[Is]||(h[Is]=function(v){return h.handleEvent(v)}),h[Is])}function Pt(){ce.call(this),this.i=new ge(this),this.M=this,this.F=null}x(Pt,ce),Pt.prototype[oe]=!0,Pt.prototype.removeEventListener=function(h,v,A,L){Et(this,h,v,A,L)};function Ct(h,v){var A,L=h.F;if(L)for(A=[];L;L=L.F)A.push(L);if(h=h.M,L=v.type||v,typeof v=="string")v=new he(v,h);else if(v instanceof he)v.target=v.target||h;else{var W=v;v=new he(L,h),P(v,W)}if(W=!0,A)for(var X=A.length-1;0<=X;X--){var ee=v.g=A[X];W=js(ee,L,!0,v)&&W}if(ee=v.g=h,W=js(ee,L,!0,v)&&W,W=js(ee,L,!1,v)&&W,A)for(X=0;X<A.length;X++)ee=v.g=A[X],W=js(ee,L,!1,v)&&W}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var A=h.g[v],L=0;L<A.length;L++)de(A[L]);delete h.g[v],h.h--}}this.F=null},Pt.prototype.K=function(h,v,A,L){return this.i.add(String(h),v,!1,A,L)},Pt.prototype.L=function(h,v,A,L){return this.i.add(String(h),v,!0,A,L)};function js(h,v,A,L){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,X=0;X<v.length;++X){var ee=v[X];if(ee&&!ee.da&&ee.capture==A){var ct=ee.listener,Ht=ee.ha||ee.src;ee.fa&&Ee(h.i,ee),W=ct.call(Ht,L)!==!1&&W}}return W&&!L.defaultPrevented}function kn(h,v,A){if(typeof h=="function")A&&(h=m(h,A));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(h,v||0)}function Lo(h){h.g=kn(()=>{h.g=null,h.i&&(h.i=!1,Lo(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class pi extends ce{constructor(v,A){super(),this.m=v,this.l=A,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Lo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pn(h){ce.call(this),this.h=h,this.g={}}x(pn,ce);var Mn=[];function Dn(h){V(h.g,function(v,A){this.g.hasOwnProperty(A)&&fr(v)},h),h.g={}}pn.prototype.N=function(){pn.aa.N.call(this),Dn(this)},pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sr=l.JSON.stringify,Rr=l.JSON.parse,Ac=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function Pe(){}Pe.prototype.h=null;function We(h){return h.h||(h.h=h.i())}function rt(){}var Jt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mr(){he.call(this,"d")}x(mr,he);function On(){he.call(this,"c")}x(On,he);var vt={},gi=null;function Ke(){return gi=gi||new Pt}vt.La="serverreachability";function Wd(h){he.call(this,vt.La,h)}x(Wd,he);function pr(h){const v=Ke();Ct(v,new Wd(v))}vt.STAT_EVENT="statevent";function gn(h,v){he.call(this,vt.STAT_EVENT,h),this.stat=v}x(gn,he);function or(h){const v=Ke();Ct(v,new gn(v,h))}vt.Ma="timingevent";function Qd(h,v){he.call(this,vt.Ma,h),this.size=v}x(Qd,he);function Ps(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},v)}function ks(){this.g=!0}ks.prototype.xa=function(){this.g=!1};function Yd(h,v,A,L,W,X){h.info(function(){if(h.g)if(X)for(var ee="",ct=X.split("&"),Ht=0;Ht<ct.length;Ht++){var Je=ct[Ht].split("=");if(1<Je.length){var Xt=Je[0];Je=Je[1];var Zt=Xt.split("_");ee=2<=Zt.length&&Zt[1]=="type"?ee+(Xt+"="+Je+"&"):ee+(Xt+"=redacted&")}}else ee=null;else ee=X;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+v+`
`+A+`
`+ee})}function hg(h,v,A,L,W,X,ee){h.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+v+`
`+A+`
`+X+" "+ee})}function Ms(h,v,A,L){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+fg(h,A)+(L?" "+L:"")})}function Fo(h,v){h.info(function(){return"TIMEOUT: "+v})}ks.prototype.info=function(){};function fg(h,v){if(!h.g)return v;if(!v)return null;try{var A=JSON.parse(v);if(A){for(h=0;h<A.length;h++)if(Array.isArray(A[h])){var L=A[h];if(!(2>L.length)){var W=L[1];if(Array.isArray(W)&&!(1>W.length)){var X=W[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ee=1;ee<W.length;ee++)W[ee]=""}}}}return Sr(A)}catch{return v}}var Ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ma={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Da;function Vo(){}x(Vo,Pe),Vo.prototype.g=function(){return new XMLHttpRequest},Vo.prototype.i=function(){return{}},Da=new Vo;function Ln(h,v,A,L){this.j=h,this.i=v,this.l=A,this.R=L||1,this.U=new pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kd}function Kd(){this.i=null,this.g="",this.h=!1}var Jd={},Sc={};function Rc(h,v,A){h.L=1,h.v=qa(Xr(v)),h.m=A,h.P=!0,Oa(h,null)}function Oa(h,v){h.F=Date.now(),La(h),h.A=Xr(h.v);var A=h.A,L=h.R;Array.isArray(L)||(L=[String(L)]),ah(A.i,"t",L),h.C=0,A=h.j.J,h.h=new Kd,h.g=Nh(h.j,A?v:null,!h.m),0<h.O&&(h.M=new pi(m(h.Y,h,h.g),h.O)),v=h.U,A=h.g,L=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(Mn[0]=W.toString()),W=Mn);for(var X=0;X<W.length;X++){var ee=Ue(A,W[X],L||v.handleEvent,!1,v.h||v);if(!ee)break;v.g[ee.key]=ee}v=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),pr(),Yd(h.i,h.u,h.A,h.l,h.R,h.m)}Ln.prototype.ca=function(h){h=h.target;const v=this.M;v&&Vn(h)==3?v.j():this.Y(h)},Ln.prototype.Y=function(h){try{if(h==this.g)e:{const Zt=Vn(this.g);var v=this.g.Ba();const Ni=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||ph(this.g)))){this.J||Zt!=4||v==7||(v==8||0>=Ni?pr(3):pr(2)),jc(this);var A=this.g.Z();this.X=A;t:if(Xd(this)){var L=ph(this.g);h="";var W=L.length,X=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Os(this),Bo(this);var ee="";break t}this.h.i=new l.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,h+=this.h.i.decode(L[v],{stream:!(X&&v==W-1)});L.length=0,this.h.g+=h,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=A==200,hg(this.i,this.u,this.A,this.l,this.R,Zt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,Ht=this.g;if((ct=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ct)){var Je=ct;break t}}Je=null}if(A=Je)Ms(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yi(this,A);else{this.o=!1,this.s=3,or(12),Os(this),Bo(this);break e}}if(this.P){A=!0;let Zr;for(;!this.J&&this.C<ee.length;)if(Zr=mg(this,ee),Zr==Sc){Zt==4&&(this.s=4,or(14),A=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Zr==Jd){this.s=4,or(15),Ms(this.i,this.l,ee,"[Invalid Chunk]"),A=!1;break}else Ms(this.i,this.l,Zr,null),yi(this,Zr);if(Xd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||ee.length!=0||this.h.h||(this.s=1,or(16),A=!1),this.o=this.o&&A,!A)Ms(this.i,this.l,ee,"[Invalid Chunked Response]"),Os(this),Bo(this);else if(0<ee.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Fc(Xt),Xt.M=!0,or(11))}}else Ms(this.i,this.l,ee,null),yi(this,ee);Zt==4&&Os(this),this.o&&!this.J&&(Zt==4?Eh(this.j,this):(this.o=!1,La(this)))}else Ng(this.g),A==400&&0<ee.indexOf("Unknown SID")?(this.s=3,or(12)):(this.s=0,or(13)),Os(this),Bo(this)}}}catch{}finally{}};function Xd(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function mg(h,v){var A=h.C,L=v.indexOf(`
`,A);return L==-1?Sc:(A=Number(v.substring(A,L)),isNaN(A)?Jd:(L+=1,L+A>v.length?Sc:(v=v.slice(L,L+A),h.C=L+A,v)))}Ln.prototype.cancel=function(){this.J=!0,Os(this)};function La(h){h.S=Date.now()+h.I,Ic(h,h.I)}function Ic(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ps(m(h.ba,h),v)}function jc(h){h.B&&(l.clearTimeout(h.B),h.B=null)}Ln.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Fo(this.i,this.A),this.L!=2&&(pr(),or(17)),Os(this),this.s=2,Bo(this)):Ic(this,this.S-h)};function Bo(h){h.j.G==0||h.J||Eh(h.j,h)}function Os(h){jc(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Dn(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function yi(h,v){try{var A=h.j;if(A.G!=0&&(A.g==h||Fa(A.h,h))){if(!h.K&&Fa(A.h,h)&&A.G==3){try{var L=A.Da.g.parse(v)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<h.F)Wa(A),zo(A);else break e;Lc(A),or(18)}}else A.za=W[1],0<A.za-A.T&&37500>W[2]&&A.F&&A.v==0&&!A.C&&(A.C=Ps(m(A.Za,A),6e3));if(1>=Pc(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Vs(A,11)}else if((h.K||A.g==h)&&Wa(A),!w(v))for(W=A.Da.g.parse(v),v=0;v<W.length;v++){let Je=W[v];if(A.T=Je[0],Je=Je[1],A.G==2)if(Je[0]=="c"){A.K=Je[1],A.ia=Je[2];const Xt=Je[3];Xt!=null&&(A.la=Xt,A.j.info("VER="+A.la));const Zt=Je[4];Zt!=null&&(A.Aa=Zt,A.j.info("SVER="+A.Aa));const Ni=Je[5];Ni!=null&&typeof Ni=="number"&&0<Ni&&(L=1.5*Ni,A.L=L,A.j.info("backChannelRequestTimeoutMs_="+L)),L=A;const Zr=h.g;if(Zr){const Ka=Zr.g?Zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var X=L.h;X.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Va(X,X.h),X.h=null))}if(L.D){const Vc=Zr.g?Zr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vc&&(L.ya=Vc,ht(L.I,L.D,Vc))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-h.F,A.j.info("Handshake RTT: "+A.R+"ms")),L=A;var ee=h;if(L.qa=Ch(L,L.J?L.ia:null,L.W),ee.K){qe(L.h,ee);var ct=ee,Ht=L.L;Ht&&(ct.I=Ht),ct.B&&(jc(ct),La(ct)),L.g=ee}else wh(L);0<A.i.length&&Ha(A)}else Je[0]!="stop"&&Je[0]!="close"||Vs(A,7);else A.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Vs(A,7):Oc(A):Je[0]!="noop"&&A.l&&A.l.ta(Je),A.v=0)}}pr(4)}catch{}}var pg=class{constructor(h,v){this.g=h,this.map=v}};function Zd(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Uo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Pc(h){return h.h?1:h.g?h.g.size:0}function Fa(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Va(h,v){h.g?h.g.add(v):h.h=v}function qe(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Zd.prototype.cancel=function(){if(this.i=eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function eh(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const A of h.g.values())v=v.concat(A.D);return v}return g(h.i)}function gg(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var v=[],A=h.length,L=0;L<A;L++)v.push(h[L]);return v}v=[],A=0;for(L in h)v[A++]=h[L];return v}function Jr(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var v=[];h=h.length;for(var A=0;A<h;A++)v.push(A);return v}v=[],A=0;for(const L in h)v[A++]=L;return v}}}function th(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var A=Jr(h),L=gg(h),W=L.length,X=0;X<W;X++)v.call(void 0,L[X],A&&A[X],h)}var kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(h,v){if(h){h=h.split("&");for(var A=0;A<h.length;A++){var L=h[A].indexOf("="),W=null;if(0<=L){var X=h[A].substring(0,L);W=h[A].substring(L+1)}else X=h[A];v(X,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Ls(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ls){this.h=h.h,Ua(this,h.j),this.o=h.o,this.g=h.g,vi(this,h.s),this.l=h.l;var v=h.i,A=new qo;A.i=v.i,v.g&&(A.g=new Map(v.g),A.h=v.h),rh(this,A),this.m=h.m}else h&&(v=String(h).match(kc))?(this.h=!1,Ua(this,v[1]||"",!0),this.o=Fs(v[2]||""),this.g=Fs(v[3]||"",!0),vi(this,v[4]),this.l=Fs(v[5]||"",!0),rh(this,v[6]||"",!0),this.m=Fs(v[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}Ls.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Ir(v,nh,!0),":");var A=this.g;return(A||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ir(v,nh,!0),"@"),h.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&h.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(Ir(A,A.charAt(0)=="/"?Fn:yg,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",Ir(A,vg)),h.join("")};function Xr(h){return new Ls(h)}function Ua(h,v,A){h.j=A?Fs(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function vi(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function rh(h,v,A){v instanceof qo?(h.i=v,xg(h.i,h.h)):(A||(v=Ir(v,sh)),h.i=new qo(v,h.h))}function ht(h,v,A){h.i.set(v,A)}function qa(h){return ht(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Fs(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ir(h,v,A){return typeof h=="string"?(h=encodeURI(h).replace(v,Mc),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Mc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var nh=/[#\/\?@]/g,yg=/[#\?:]/g,Fn=/[#\?]/g,sh=/[#\?@]/g,vg=/#/g;function qo(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function ns(h){h.g||(h.g=new Map,h.h=0,h.i&&Ba(h.i,function(v,A){h.add(decodeURIComponent(v.replace(/\+/g," ")),A)}))}t=qo.prototype,t.add=function(h,v){ns(this),this.i=null,h=xi(this,h);var A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(v),this.h+=1,this};function ih(h,v){ns(h),v=xi(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function oh(h,v){return ns(h),v=xi(h,v),h.g.has(v)}t.forEach=function(h,v){ns(this),this.g.forEach(function(A,L){A.forEach(function(W){h.call(v,W,L,this)},this)},this)},t.na=function(){ns(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),A=[];for(let L=0;L<v.length;L++){const W=h[L];for(let X=0;X<W.length;X++)A.push(v[L])}return A},t.V=function(h){ns(this);let v=[];if(typeof h=="string")oh(this,h)&&(v=v.concat(this.g.get(xi(this,h))));else{h=Array.from(this.g.values());for(let A=0;A<h.length;A++)v=v.concat(h[A])}return v},t.set=function(h,v){return ns(this),this.i=null,h=xi(this,h),oh(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function ah(h,v,A){ih(h,v),0<A.length&&(h.i=null,h.g.set(xi(h,v),g(A)),h.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var A=0;A<v.length;A++){var L=v[A];const X=encodeURIComponent(String(L)),ee=this.V(L);for(L=0;L<ee.length;L++){var W=X;ee[L]!==""&&(W+="="+encodeURIComponent(String(ee[L]))),h.push(W)}}return this.i=h.join("&")};function xi(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function xg(h,v){v&&!h.j&&(ns(h),h.i=null,h.g.forEach(function(A,L){var W=L.toLowerCase();L!=W&&(ih(this,L),ah(this,W,A))},h)),h.j=v}function wg(h,v){const A=new ks;if(l.Image){const L=new Image;L.onload=y(jr,A,"TestLoadImage: loaded",!0,v,L),L.onerror=y(jr,A,"TestLoadImage: error",!1,v,L),L.onabort=y(jr,A,"TestLoadImage: abort",!1,v,L),L.ontimeout=y(jr,A,"TestLoadImage: timeout",!1,v,L),l.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=h}else v(!1)}function bg(h,v){const A=new ks,L=new AbortController,W=setTimeout(()=>{L.abort(),jr(A,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:L.signal}).then(X=>{clearTimeout(W),X.ok?jr(A,"TestPingServer: ok",!0,v):jr(A,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),jr(A,"TestPingServer: error",!1,v)})}function jr(h,v,A,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(A)}catch{}}function lh(){this.g=new Ac}function ch(h,v,A){const L=A||"";try{th(h,function(W,X){let ee=W;u(W)&&(ee=Sr(W)),v.push(L+X+"="+encodeURIComponent(ee))})}catch(W){throw v.push(L+"type="+encodeURIComponent("_badmap")),W}}function Go(h){this.l=h.Ub||null,this.j=h.eb||!1}x(Go,Pe),Go.prototype.g=function(){return new Ga(this.l,this.j)},Go.prototype.i=function(h){return function(){return h}}({});function Ga(h,v){Pt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ga,Pt),t=Ga.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,$o(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uh(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function uh(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?wi(this):$o(this),this.readyState==3&&uh(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,wi(this))},t.Qa=function(h){this.g&&(this.response=h,wi(this))},t.ga=function(){this.g&&wi(this)};function wi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,$o(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var A=v.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=v.next();return h.join(`\r
`)};function $o(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function dh(h){let v="";return V(h,function(A,L){v+=L,v+=":",v+=A,v+=`\r
`}),v}function Dc(h,v,A){e:{for(L in A){var L=!1;break e}L=!0}L||(A=dh(A),typeof h=="string"?A!=null&&encodeURIComponent(String(A)):ht(h,v,A))}function Nt(h){Pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Nt,Pt);var Eg=/^https?$/i,Cg=["POST","PUT"];t=Nt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,A,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Da.g(),this.v=this.o?We(this.o):We(Da),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(X){hh(this,X);return}if(h=A||"",A=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)A.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const X of L.keys())A.set(X,L.get(X));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(A.keys()).find(X=>X.toLowerCase()=="content-type"),W=l.FormData&&h instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Cg,v,void 0))||L||W||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ee]of A)this.g.setRequestHeader(X,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{za(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){hh(this,X)}};function hh(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,fh(h),$a(h)}function fh(h){h.A||(h.A=!0,Ct(h,"complete"),Ct(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ct(this,"complete"),Ct(this,"abort"),$a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$a(this,!0)),Nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mh(this):this.bb())},t.bb=function(){mh(this)};function mh(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Vn(h)!=4||h.Z()!=2)){if(h.u&&Vn(h)==4)kn(h.Ea,0,h);else if(Ct(h,"readystatechange"),Vn(h)==4){h.h=!1;try{const ee=h.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var A;if(!(A=v)){var L;if(L=ee===0){var W=String(h.D).match(kc)[1]||null;!W&&l.self&&l.self.location&&(W=l.self.location.protocol.slice(0,-1)),L=!Eg.test(W?W.toLowerCase():"")}A=L}if(A)Ct(h,"complete"),Ct(h,"success");else{h.m=6;try{var X=2<Vn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",fh(h)}}finally{$a(h)}}}}function $a(h,v){if(h.g){za(h);const A=h.g,L=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Ct(h,"ready");try{A.onreadystatechange=L}catch{}}}function za(h){h.I&&(l.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Vn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Rr(v)}};function ph(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ng(h){const v={};h=(h.g&&2<=Vn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<h.length;L++){if(w(h[L]))continue;var A=O(h[L]);const W=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const X=v[W]||[];v[W]=X,X.push(A)}R(v,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(h,v,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||v}function gh(h){this.Aa=0,this.i=[],this.j=new ks,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,h),this.cb=bi("retryDelaySeedMs",1e4,h),this.Wa=bi("forwardChannelMaxRetries",2,h),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Zd(h&&h.concurrentRequestLimit),this.Da=new lh,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gh.prototype,t.la=8,t.G=1,t.connect=function(h,v,A,L){or(0),this.W=h,this.H=v||{},A&&L!==void 0&&(this.H.OSID=A,this.H.OAID=L),this.F=this.X,this.I=Ch(this,null,this.W),Ha(this)};function Oc(h){if(yh(h),h.G==3){var v=h.U++,A=Xr(h.I);if(ht(A,"SID",h.K),ht(A,"RID",v),ht(A,"TYPE","terminate"),Ho(h,A),v=new Ln(h,h.j,v),v.L=2,v.v=qa(Xr(A)),A=!1,l.navigator&&l.navigator.sendBeacon)try{A=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!A&&l.Image&&(new Image().src=v.v,A=!0),A||(v.g=Nh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),La(v)}Ei(h)}function zo(h){h.g&&(Fc(h),h.g.cancel(),h.g=null)}function yh(h){zo(h),h.u&&(l.clearTimeout(h.u),h.u=null),Wa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&l.clearTimeout(h.s),h.s=null)}function Ha(h){if(!Uo(h.h)&&!h.s){h.s=!0;var v=h.Ga;Z||se(),U||(Z(),U=!0),H.add(v,h),h.B=0}}function _g(h,v){return Pc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ps(m(h.Ga,h,v),Qa(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new Ln(this,this.j,h);let X=this.o;if(this.S&&(X?(X=N(X),P(X,this.S)):X=this.S),this.m!==null||this.O||(W.H=X,X=null),this.P)e:{for(var v=0,A=0;A<this.i.length;A++){t:{var L=this.i[A];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(v+=L,4096<v){v=A;break e}if(v===4096||A===this.i.length-1){v=A+1;break e}}v=1e3}else v=1e3;v=xh(this,W,v),A=Xr(this.I),ht(A,"RID",h),ht(A,"CVER",22),this.D&&ht(A,"X-HTTP-Session-Id",this.D),Ho(this,A),X&&(this.O?v="headers="+encodeURIComponent(String(dh(X)))+"&"+v:this.m&&Dc(A,this.m,X)),Va(this.h,W),this.Ua&&ht(A,"TYPE","init"),this.P?(ht(A,"$req",v),ht(A,"SID","null"),W.T=!0,Rc(W,A,null)):Rc(W,A,v),this.G=2}}else this.G==3&&(h?vh(this,h):this.i.length==0||Uo(this.h)||vh(this))};function vh(h,v){var A;v?A=v.l:A=h.U++;const L=Xr(h.I);ht(L,"SID",h.K),ht(L,"RID",A),ht(L,"AID",h.T),Ho(h,L),h.m&&h.o&&Dc(L,h.m,h.o),A=new Ln(h,h.j,A,h.B+1),h.m===null&&(A.H=h.o),v&&(h.i=v.D.concat(h.i)),v=xh(h,A,1e3),A.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Va(h.h,A),Rc(A,L,v)}function Ho(h,v){h.H&&V(h.H,function(A,L){ht(v,L,A)}),h.l&&th({},function(A,L){ht(v,L,A)})}function xh(h,v,A){A=Math.min(h.i.length,A);var L=h.l?m(h.l.Na,h.l,h):null;e:{var W=h.i;let X=-1;for(;;){const ee=["count="+A];X==-1?0<A?(X=W[0].g,ee.push("ofs="+X)):X=0:ee.push("ofs="+X);let ct=!0;for(let Ht=0;Ht<A;Ht++){let Je=W[Ht].g;const Xt=W[Ht].map;if(Je-=X,0>Je)X=Math.max(0,W[Ht].g-100),ct=!1;else try{ch(Xt,ee,"req"+Je+"_")}catch{L&&L(Xt)}}if(ct){L=ee.join("&");break e}}}return h=h.i.splice(0,A),v.D=h,L}function wh(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;Z||se(),U||(Z(),U=!0),H.add(v,h),h.v=0}}function Lc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ps(m(h.Fa,h),Qa(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,bh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ps(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,or(10),zo(this),bh(this))};function Fc(h){h.A!=null&&(l.clearTimeout(h.A),h.A=null)}function bh(h){h.g=new Ln(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Xr(h.qa);ht(v,"RID","rpc"),ht(v,"SID",h.K),ht(v,"AID",h.T),ht(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&ht(v,"TO",h.ja),ht(v,"TYPE","xmlhttp"),Ho(h,v),h.m&&h.o&&Dc(v,h.m,h.o),h.L&&(h.g.I=h.L);var A=h.g;h=h.ia,A.L=1,A.v=qa(Xr(v)),A.m=null,A.P=!0,Oa(A,h)}t.Za=function(){this.C!=null&&(this.C=null,zo(this),Lc(this),or(19))};function Wa(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Eh(h,v){var A=null;if(h.g==v){Wa(h),Fc(h),h.g=null;var L=2}else if(Fa(h.h,v))A=v.D,qe(h.h,v),L=1;else return;if(h.G!=0){if(v.o)if(L==1){A=v.m?v.m.length:0,v=Date.now()-v.F;var W=h.B;L=Ke(),Ct(L,new Qd(L,A)),Ha(h)}else wh(h);else if(W=v.s,W==3||W==0&&0<v.X||!(L==1&&_g(h,v)||L==2&&Lc(h)))switch(A&&0<A.length&&(v=h.h,v.i=v.i.concat(A)),W){case 1:Vs(h,5);break;case 4:Vs(h,10);break;case 3:Vs(h,6);break;default:Vs(h,2)}}}function Qa(h,v){let A=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(A*=2),A*v}function Vs(h,v){if(h.j.info("Error code "+v),v==2){var A=m(h.fb,h),L=h.Xa;const W=!L;L=new Ls(L||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ua(L,"https"),qa(L),W?wg(L.toString(),A):bg(L.toString(),A)}else or(2);h.G=0,h.l&&h.l.sa(v),Ei(h),yh(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),or(2)):(this.j.info("Failed to ping google.com"),or(1))};function Ei(h){if(h.G=0,h.ka=[],h.l){const v=eh(h.h);(v.length!=0||h.i.length!=0)&&(b(h.ka,v),b(h.ka,h.i),h.h.i.length=0,g(h.i),h.i.length=0),h.l.ra()}}function Ch(h,v,A){var L=A instanceof Ls?Xr(A):new Ls(A);if(L.g!="")v&&(L.g=v+"."+L.g),vi(L,L.s);else{var W=l.location;L=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var X=new Ls(null);L&&Ua(X,L),v&&(X.g=v),W&&vi(X,W),A&&(X.l=A),L=X}return A=h.D,v=h.ya,A&&v&&ht(L,A,v),ht(L,"VER",h.la),Ho(h,L),L}function Nh(h,v,A){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Nt(new Go({eb:A})):new Nt(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _h(){}t=_h.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ya(){}Ya.prototype.g=function(h,v){return new Pr(h,v)};function Pr(h,v){Pt.call(this),this.g=new gh(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!w(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!w(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Ci(this)}x(Pr,Pt),Pr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pr.prototype.close=function(){Oc(this.g)},Pr.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.u&&(A={},A.__data__=Sr(h),h=A);v.i.push(new pg(v.Ya++,h)),v.G==3&&Ha(v)},Pr.prototype.N=function(){this.g.l=null,delete this.j,Oc(this.g),delete this.g,Pr.aa.N.call(this)};function Th(h){mr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const A in v){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}x(Th,mr);function Ah(){On.call(this),this.status=1}x(Ah,On);function Ci(h){this.g=h}x(Ci,_h),Ci.prototype.ua=function(){Ct(this.g,"a")},Ci.prototype.ta=function(h){Ct(this.g,new Th(h))},Ci.prototype.sa=function(h){Ct(this.g,new Ah)},Ci.prototype.ra=function(){Ct(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,Pr.prototype.send=Pr.prototype.o,Pr.prototype.open=Pr.prototype.m,Pr.prototype.close=Pr.prototype.close,sS=function(){return new Ya},nS=function(){return Ke()},rS=vt,Ly={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ds.NO_ERROR=0,Ds.TIMEOUT=8,Ds.HTTP_ERROR=6,Rf=Ds,Ma.COMPLETE="complete",tS=Ma,rt.EventType=Jt,Jt.OPEN="a",Jt.CLOSE="b",Jt.ERROR="c",Jt.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,iu=rt,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,eS=Nt}).apply(typeof Zh<"u"?Zh:typeof self<"u"?self:typeof window<"u"?window:{});const uE="@firebase/firestore",dE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Wx("@firebase/firestore");function tl(){return ya.logLevel}function we(t,...e){if(ya.logLevel<=Qe.DEBUG){const r=e.map(Jx);ya.debug(`Firestore (${fc}): ${t}`,...r)}}function oi(t,...e){if(ya.logLevel<=Qe.ERROR){const r=e.map(Jx);ya.error(`Firestore (${fc}): ${t}`,...r)}}function fo(t,...e){if(ya.logLevel<=Qe.WARN){const r=e.map(Jx);ya.warn(`Firestore (${fc}): ${t}`,...r)}}function Jx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,iS(t,n,r)}function iS(t,e,r){let n=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw oi(n),new Error(n)}function ot(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||iS(e,s,n)}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends hi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(br.UNAUTHENTICATED))}shutdown(){}}class cL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class uL{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){ot(this.o===void 0,42304);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let i=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xs)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ot(typeof n.accessToken=="string",31837,{l:n}),new oS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new br(e)}}class dL{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=br.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hL{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new dL(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fL{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){ot(this.o===void 0,3512);const n=i=>{i.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,we("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ot(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new hE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=mL(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function Be(t,e){return t<e?-1:t>e?1:0}function Fy(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),s=e.codePointAt(r);if(n!==s){if(n<128&&s<128)return Be(n,s);{const i=aS(),a=pL(i.encode(fE(t,r)),i.encode(fE(e,r)));return a!==0?a:Be(n,s)}}r+=n>65535?2:1}return Be(t.length,e.length)}function fE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function pL(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return Be(t[r],e[r]);return Be(t.length,e.length)}function Xl(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="__name__";class os{constructor(e,r,n){r===void 0?r=0:r>e.length&&ke(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&ke(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return os.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof os?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=os.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return Be(e.length,r.length)}static compareSegments(e,r){const n=os.isNumericId(e),s=os.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?os.extractNumericId(e).compare(os.extractNumericId(r)):Fy(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ao.fromString(e.substring(4,e.length-2))}}class gt extends os{construct(e,r,n){return new gt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ye(te.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new gt(r)}static emptyPath(){return new gt([])}}const gL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends os{construct(e,r,n){return new cr(e,r,n)}static isValidIdentifier(e){return gL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mE}static keyField(){return new cr([mE])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ye(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ye(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(n+=l,s++):(i(),s++)}if(i(),a)throw new ye(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(r)}static emptyPath(){return new cr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(gt.fromString(e))}static fromName(e){return new Se(gt.fromString(e).popFirst(5))}static empty(){return new Se(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return gt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t,e,r){if(!r)throw new ye(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yL(t,e,r,n){if(e===!0&&n===!0)throw new ye(te.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function pE(t){if(!Se.isDocumentKey(t))throw new ye(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gE(t){if(Se.isDocumentKey(t))throw new ye(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=bp(t);throw new ye(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t,e){const r={typeString:t};return e&&(r.value=e),r}function jd(t,e){if(!cS(t))throw new ye(te.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(s&&typeof a!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new ye(te.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=-62135596800,vE=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*vE);return new Ve(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<yE)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vE}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jd(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:$t("string",Ve._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Ve(0,0))}static max(){return new De(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=-1;function vL(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=De.fromTimestamp(n===1e9?new Ve(r+1,0):new Ve(r,n));return new mo(s,Se.empty(),e)}function xL(t){return new mo(t.readTime,t.key,ed)}class mo{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new mo(De.min(),Se.empty(),ed)}static max(){return new mo(De.max(),Se.empty(),ed)}}function wL(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Se.comparator(t.documentKey,e.documentKey),r!==0?r:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==bL)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ne((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ne?r:ne.resolve(r)}catch(r){return ne.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ne.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ne.reject(r)}static resolve(e){return new ne((r,n)=>{r(e)})}static reject(e){return new ne((r,n)=>{n(e)})}static waitFor(e){return new ne((r,n)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&r()},c=>n(c))}),a=!0,i===s&&r()})}static or(e){let r=ne.resolve(!1);for(const n of e)r=r.next(s=>s?ne.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new ne((n,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;r(e[u]).next(d=>{a[u]=d,++l,l===i&&n(a)},d=>s(d))}})}static doWhile(e,r){return new ne((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function CL(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function pc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this._e(n),this.ae=n=>r.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ep.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=-1;function Cp(t){return t==null}function Em(t){return t===0&&1/t==-1/0}function NL(t){return typeof t=="number"&&Number.isInteger(t)&&!Em(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="";function _L(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=xE(e)),e=TL(t.get(r),e);return xE(e)}function TL(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case uS:r+="";break;default:r+=i}}return r}function xE(t){return t+uS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ro(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function dS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,r){this.comparator=e,this.root=r||lr.EMPTY}insert(e,r){return new jt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,lr.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ef(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ef(this.root,e,this.comparator,!1)}getReverseIterator(){return new ef(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ef(this.root,e,this.comparator,!0)}}class ef{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lr{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??lr.RED,this.left=s??lr.EMPTY,this.right=i??lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new lr(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return lr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}lr.EMPTY=null,lr.RED=!0,lr.BLACK=!1;lr.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new lr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new bE(this.data.getIterator())}getIteratorFrom(e){return new bE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Kt(this.comparator);return r.data=e,r}}class bE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new an([])}unionWith(e){let r=new Kt(cr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new an(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Xl(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hS("Invalid base64 string: "+i):i}}(e);return new hr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new hr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hr.EMPTY_BYTE_STRING=new hr("");const AL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(t){if(ot(!!t,39018),typeof t=="string"){let e=0;const r=AL.exec(t);if(ot(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Lt(t.seconds),nanos:Lt(t.nanos)}}function Lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function go(t){return typeof t=="string"?hr.fromBase64String(t):hr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="server_timestamp",mS="__type__",pS="__previous_value__",gS="__local_write_time__";function ew(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[mS])===null||r===void 0?void 0:r.stringValue)===fS}function Np(t){const e=t.mapValue.fields[pS];return ew(e)?Np(e):e}function td(t){const e=po(t.mapValue.fields[gS].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,r,n,s,i,a,l,c,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const Cm="(default)";class rd{constructor(e,r){this.projectId=e,this.database=r||Cm}static empty(){return new rd("","")}get isDefaultDatabase(){return this.database===Cm}isEqual(e){return e instanceof rd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="__type__",vS="__max__",tf={mapValue:{fields:{__type__:{stringValue:vS}}}},xS="__vector__",Nm="value";function yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ew(t)?4:IL(t)?9007199254740991:RL(t)?10:11:ke(28295,{value:t})}function Es(t,e){if(t===e)return!0;const r=yo(t);if(r!==yo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return td(t).isEqual(td(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=po(s.timestampValue),l=po(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return go(s.bytesValue).isEqual(go(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Lt(s.geoPointValue.latitude)===Lt(i.geoPointValue.latitude)&&Lt(s.geoPointValue.longitude)===Lt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Lt(s.integerValue)===Lt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Lt(s.doubleValue),l=Lt(i.doubleValue);return a===l?Em(a)===Em(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Xl(t.arrayValue.values||[],e.arrayValue.values||[],Es);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(wE(a)!==wE(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Es(a[c],l[c])))return!1;return!0}(t,e);default:return ke(52216,{left:t})}}function nd(t,e){return(t.values||[]).find(r=>Es(r,e))!==void 0}function Zl(t,e){if(t===e)return 0;const r=yo(t),n=yo(e);if(r!==n)return Be(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Lt(i.integerValue||i.doubleValue),c=Lt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return EE(t.timestampValue,e.timestampValue);case 4:return EE(td(t),td(e));case 5:return Fy(t.stringValue,e.stringValue);case 6:return function(i,a){const l=go(i),c=go(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Be(l[u],c[u]);if(d!==0)return d}return Be(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Be(Lt(i.latitude),Lt(a.latitude));return l!==0?l:Be(Lt(i.longitude),Lt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return CE(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,c,u,d;const f=i.fields||{},m=a.fields||{},y=(l=f[Nm])===null||l===void 0?void 0:l.arrayValue,x=(c=m[Nm])===null||c===void 0?void 0:c.arrayValue,g=Be(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return g!==0?g:CE(y,x)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===tf.mapValue&&a===tf.mapValue)return 0;if(i===tf.mapValue)return 1;if(a===tf.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=Fy(c[f],d[f]);if(m!==0)return m;const y=Zl(l[c[f]],u[d[f]]);if(y!==0)return y}return Be(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ke(23264,{le:r})}}function EE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const r=po(t),n=po(e),s=Be(r.seconds,n.seconds);return s!==0?s:Be(r.nanos,n.nanos)}function CE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Zl(r[s],n[s]);if(i)return i}return Be(r.length,n.length)}function ec(t){return Vy(t)}function Vy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=po(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return go(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Se.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Vy(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Vy(r.fields[a])}`;return s+"}"}(t.mapValue):ke(61005,{value:t})}function If(t){switch(yo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Np(t);return e?16+If(e):16;case 5:return 2*t.stringValue.length;case 6:return go(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+If(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Ro(n.fields,(i,a)=>{s+=i.length+If(a)}),s}(t.mapValue);default:throw ke(13486,{value:t})}}function NE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function By(t){return!!t&&"integerValue"in t}function tw(t){return!!t&&"arrayValue"in t}function _E(t){return!!t&&"nullValue"in t}function TE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jf(t){return!!t&&"mapValue"in t}function RL(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[yS])===null||r===void 0?void 0:r.stringValue)===xS}function _u(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ro(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=_u(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=_u(t.arrayValue.values[r]);return e}return Object.assign({},t)}function IL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===vS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!jf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(r)}setAll(e){let r=cr.emptyPath(),n={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}a?n[l.lastSegment()]=_u(a):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());jf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Es(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];jf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Ro(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new $r(_u(this.value))}}function wS(t){const e=[];return Ro(t.fields,(r,n)=>{const s=new cr([r]);if(jf(n)){const i=wS(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,r,n,s,i,a,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Cr(e,0,De.min(),De.min(),De.min(),$r.empty(),0)}static newFoundDocument(e,r,n,s){return new Cr(e,1,r,De.min(),n,s,0)}static newNoDocument(e,r){return new Cr(e,2,r,De.min(),De.min(),$r.empty(),0)}static newUnknownDocument(e,r){return new Cr(e,3,r,De.min(),De.min(),$r.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,r){this.position=e,this.inclusive=r}}function AE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=Se.comparator(Se.fromName(a.referenceValue),r.key):n=Zl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function SE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Es(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,r="asc"){this.field=e,this.dir=r}}function jL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{}class Gt extends bS{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new kL(e,r,n):r==="array-contains"?new OL(e,n):r==="in"?new LL(e,n):r==="not-in"?new FL(e,n):r==="array-contains-any"?new VL(e,n):new Gt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new ML(e,n):new DL(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Zl(r,this.value)):r!==null&&yo(this.value)===yo(r)&&this.matchesComparison(Zl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class es extends bS{constructor(e,r){super(),this.filters=e,this.op=r,this.he=null}static create(e,r){return new es(e,r)}matches(e){return ES(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ES(t){return t.op==="and"}function CS(t){return PL(t)&&ES(t)}function PL(t){for(const e of t.filters)if(e instanceof es)return!1;return!0}function Uy(t){if(t instanceof Gt)return t.field.canonicalString()+t.op.toString()+ec(t.value);if(CS(t))return t.filters.map(e=>Uy(e)).join(",");{const e=t.filters.map(r=>Uy(r)).join(",");return`${t.op}(${e})`}}function NS(t,e){return t instanceof Gt?function(n,s){return s instanceof Gt&&n.op===s.op&&n.field.isEqual(s.field)&&Es(n.value,s.value)}(t,e):t instanceof es?function(n,s){return s instanceof es&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,l)=>i&&NS(a,s.filters[l]),!0):!1}(t,e):void ke(19439)}function _S(t){return t instanceof Gt?function(r){return`${r.field.canonicalString()} ${r.op} ${ec(r.value)}`}(t):t instanceof es?function(r){return r.op.toString()+" {"+r.getFilters().map(_S).join(" ,")+"}"}(t):"Filter"}class kL extends Gt{constructor(e,r,n){super(e,r,n),this.key=Se.fromName(n.referenceValue)}matches(e){const r=Se.comparator(e.key,this.key);return this.matchesComparison(r)}}class ML extends Gt{constructor(e,r){super(e,"in",r),this.keys=TS("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class DL extends Gt{constructor(e,r){super(e,"not-in",r),this.keys=TS("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function TS(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Se.fromName(n.referenceValue))}class OL extends Gt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return tw(r)&&nd(r.arrayValue,this.value)}}class LL extends Gt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&nd(this.value.arrayValue,r)}}class FL extends Gt{constructor(e,r){super(e,"not-in",r)}matches(e){if(nd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!nd(this.value.arrayValue,r)}}class VL extends Gt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!tw(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>nd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,r=null,n=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function RE(t,e=null,r=[],n=[],s=null,i=null,a=null){return new BL(t,e,r,n,s,i,a)}function rw(t){const e=Oe(t);if(e.Pe===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Uy(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Cp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>ec(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>ec(n)).join(",")),e.Pe=r}return e.Pe}function nw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!jL(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!NS(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SE(t.startAt,e.startAt)&&SE(t.endAt,e.endAt)}function qy(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,r=null,n=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function UL(t,e,r,n,s,i,a,l){return new gc(t,e,r,n,s,i,a,l)}function _p(t){return new gc(t)}function IE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AS(t){return t.collectionGroup!==null}function Tu(t){const e=Oe(t);if(e.Te===null){e.Te=[];const r=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Kt(cr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Te.push(new sd(i,n))}),r.has(cr.keyField().canonicalString())||e.Te.push(new sd(cr.keyField(),n))}return e.Te}function ps(t){const e=Oe(t);return e.Ie||(e.Ie=qL(e,Tu(t))),e.Ie}function qL(t,e){if(t.limitType==="F")return RE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new sd(s.field,i)});const r=t.endAt?new _m(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new _m(t.startAt.position,t.startAt.inclusive):null;return RE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Gy(t,e){const r=t.filters.concat([e]);return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function $y(t,e,r){return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Tp(t,e){return nw(ps(t),ps(e))&&t.limitType===e.limitType}function SS(t){return`${rw(ps(t))}|lt:${t.limitType}`}function rl(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>_S(s)).join(", ")}]`),Cp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>ec(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>ec(s)).join(",")),`Target(${n})`}(ps(t))}; limitType=${t.limitType})`}function Ap(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Se.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Tu(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,l,c){const u=AE(a,l,c);return a.inclusive?u<=0:u<0}(n.startAt,Tu(n),s)||n.endAt&&!function(a,l,c){const u=AE(a,l,c);return a.inclusive?u>=0:u>0}(n.endAt,Tu(n),s))}(t,e)}function GL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RS(t){return(e,r)=>{let n=!1;for(const s of Tu(t)){const i=$L(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function $L(t,e,r){const n=t.field.isKeyField()?Se.comparator(e.key,r.key):function(i,a,l){const c=a.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Zl(c,u):ke(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ke(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ro(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return dS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=new jt(Se.comparator);function ai(){return zL}const IS=new jt(Se.comparator);function ou(...t){let e=IS;for(const r of t)e=e.insert(r.key,r);return e}function jS(t){let e=IS;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Zo(){return Au()}function PS(){return Au()}function Au(){return new Sa(t=>t.toString(),(t,e)=>t.isEqual(e))}const HL=new jt(Se.comparator),WL=new Kt(Se.comparator);function Ye(...t){let e=WL;for(const r of t)e=e.add(r);return e}const QL=new Kt(Be);function YL(){return QL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Em(e)?"-0":e}}function kS(t){return{integerValue:""+t}}function MS(t,e){return NL(e)?kS(e):sw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this._=void 0}}function KL(t,e,r){return t instanceof Tm?function(s,i){const a={fields:{[mS]:{stringValue:fS},[gS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ew(i)&&(i=Np(i)),i&&(a.fields[pS]=i),{mapValue:a}}(r,e):t instanceof id?OS(t,e):t instanceof od?LS(t,e):function(s,i){const a=DS(s,i),l=jE(a)+jE(s.Ee);return By(a)&&By(s.Ee)?kS(l):sw(s.serializer,l)}(t,e)}function JL(t,e,r){return t instanceof id?OS(t,e):t instanceof od?LS(t,e):r}function DS(t,e){return t instanceof ad?function(n){return By(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Tm extends Sp{}class id extends Sp{constructor(e){super(),this.elements=e}}function OS(t,e){const r=FS(e);for(const n of t.elements)r.some(s=>Es(s,n))||r.push(n);return{arrayValue:{values:r}}}class od extends Sp{constructor(e){super(),this.elements=e}}function LS(t,e){let r=FS(e);for(const n of t.elements)r=r.filter(s=>!Es(s,n));return{arrayValue:{values:r}}}class ad extends Sp{constructor(e,r){super(),this.serializer=e,this.Ee=r}}function jE(t){return Lt(t.integerValue||t.doubleValue)}function FS(t){return tw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,r){this.field=e,this.transform=r}}function ZL(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof id&&s instanceof id||n instanceof od&&s instanceof od?Xl(n.elements,s.elements,Es):n instanceof ad&&s instanceof ad?Es(n.Ee,s.Ee):n instanceof Tm&&s instanceof Tm}(t.transform,e.transform)}class e6{constructor(e,r){this.version=e,this.transformResults=r}}class Jn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let Rp=class{};function VS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new iw(t.key,Jn.none()):new Pd(t.key,t.data,Jn.none());{const r=t.data,n=$r.empty();let s=new Kt(cr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new Io(t.key,n,new an(s.toArray()),Jn.none())}}function t6(t,e,r){t instanceof Pd?function(s,i,a){const l=s.value.clone(),c=kE(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Io?function(s,i,a){if(!Pf(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=kE(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(BS(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Su(t,e,r,n){return t instanceof Pd?function(i,a,l,c){if(!Pf(i.precondition,a))return l;const u=i.value.clone(),d=ME(i.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Io?function(i,a,l,c){if(!Pf(i.precondition,a))return l;const u=ME(i.fieldTransforms,c,a),d=a.data;return d.setAll(BS(i)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,l){return Pf(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,r)}function r6(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=DS(n.transform,s||null);i!=null&&(r===null&&(r=$r.empty()),r.set(n.field,i))}return r||null}function PE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Xl(n,s,(i,a)=>ZL(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pd extends Rp{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Io extends Rp{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function BS(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function kE(t,e,r){const n=new Map;ot(t.length===r.length,32656,{Ae:r.length,Re:t.length});for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);n.set(i.field,JL(a,l,r[s]))}return n}function ME(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,KL(i,a,e))}return n}class iw extends Rp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n6 extends Rp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&t6(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Su(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Su(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=PS();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=r.has(s.key)?null:l;const c=VS(a,l);c!==null&&n.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(De.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Xl(this.mutations,e.mutations,(r,n)=>PE(r,n))&&Xl(this.baseMutations,e.baseMutations,(r,n)=>PE(r,n))}}class ow{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){ot(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let s=function(){return HL}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new ow(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,Xe;function a6(t){switch(t){case te.OK:return ke(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function US(t){if(t===void 0)return oi("GRPC error has no .code"),te.UNKNOWN;switch(t){case Ut.OK:return te.OK;case Ut.CANCELLED:return te.CANCELLED;case Ut.UNKNOWN:return te.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return te.INTERNAL;case Ut.UNAVAILABLE:return te.UNAVAILABLE;case Ut.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ut.NOT_FOUND:return te.NOT_FOUND;case Ut.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ut.ABORTED:return te.ABORTED;case Ut.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ut.DATA_LOSS:return te.DATA_LOSS;default:return ke(39323,{code:t})}}(Xe=Ut||(Ut={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=new ao([4294967295,4294967295],0);function DE(t){const e=aS().encode(t),r=new ZA;return r.update(e),new Uint8Array(r.digest())}function OE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ao([r,n],0),new ao([s,i],0)]}class aw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new au(`Invalid padding: ${r}`);if(n<0)throw new au(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new au(`Invalid padding when bitmap length is 0: ${r}`);this.fe=8*e.length-r,this.ge=ao.fromNumber(this.fe)}pe(e,r,n){let s=e.add(r.multiply(ao.fromNumber(n)));return s.compare(l6)===1&&(s=new ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const r=DE(e),[n,s]=OE(r);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);if(!this.ye(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new aw(i,s,r);return n.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const r=DE(e),[n,s]=OE(r);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);this.we(a)}}we(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,kd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Ip(De.min(),s,new jt(Be),ai(),Ye())}}class kd{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new kd(n,r,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,r,n,s){this.Se=e,this.removedTargetIds=r,this.key=n,this.be=s}}class qS{constructor(e,r){this.targetId=e,this.De=r}}class GS{constructor(e,r,n=hr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class LE{constructor(){this.ve=0,this.Ce=FE(),this.Fe=hr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ye(),r=Ye(),n=Ye();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:ke(38017,{changeType:i})}}),new kd(this.Fe,this.Me,e,r,n)}ke(){this.xe=!1,this.Ce=FE()}qe(e,r){this.xe=!0,this.Ce=this.Ce.insert(e,r)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class c6{constructor(e){this.We=e,this.Ge=new Map,this.ze=ai(),this.je=rf(),this.Je=rf(),this.He=new jt(Be)}Ye(e){for(const r of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(r,e.be):this.Xe(r,e.key,e.be);for(const r of e.removedTargetIds)this.Xe(r,e.key,e.be)}et(e){this.forEachTarget(e,r=>{const n=this.tt(r);switch(e.state){case 0:this.nt(r)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(r);break;case 3:this.nt(r)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(r)&&(this.rt(r),n.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Ge.forEach((n,s)=>{this.nt(s)&&r(s)})}it(e){const r=e.targetId,n=e.De.count,s=this.st(r);if(s){const i=s.target;if(qy(i))if(n===0){const a=new Se(i.path);this.Xe(r,a,Cr.newNoDocument(a,De.min()))}else ot(n===1,20013,{expectedCount:n});else{const a=this.ot(r);if(a!==n){const l=this._t(e),c=l?this.ut(l,e,a):1;if(c!==0){this.rt(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(r,u)}}}}}_t(e){const r=e.De.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,l;try{a=go(n).toUint8Array()}catch(c){if(c instanceof hS)return fo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new aw(a,s,i)}catch(c){return fo(c instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,r,n){return r.De.count===n-this.ht(e,r.targetId)?0:2}ht(e,r){const n=this.We.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(r,i,null),s++)}),s}Pt(e){const r=new Map;this.Ge.forEach((i,a)=>{const l=this.st(a);if(l){if(i.current&&qy(l.target)){const c=new Se(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,Cr.newNoDocument(c,e))}i.Ne&&(r.set(a,i.Le()),i.ke())}});let n=Ye();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.ze.forEach((i,a)=>a.setReadTime(e));const s=new Ip(e,r,this.He,this.ze,n);return this.ze=ai(),this.je=rf(),this.Je=rf(),this.He=new jt(Be),s}Ze(e,r){if(!this.nt(e))return;const n=this.It(e,r.key)?2:0;this.tt(e).qe(r.key,n),this.ze=this.ze.insert(r.key,r),this.je=this.je.insert(r.key,this.Tt(r.key).add(e)),this.Je=this.Je.insert(r.key,this.dt(r.key).add(e))}Xe(e,r,n){if(!this.nt(e))return;const s=this.tt(e);this.It(e,r)?s.qe(r,1):s.Qe(r),this.Je=this.Je.insert(r,this.dt(r).delete(e)),this.Je=this.Je.insert(r,this.dt(r).add(e)),n&&(this.ze=this.ze.insert(r,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const r=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let r=this.Ge.get(e);return r||(r=new LE,this.Ge.set(e,r)),r}dt(e){let r=this.Je.get(e);return r||(r=new Kt(Be),this.Je=this.Je.insert(e,r)),r}Tt(e){let r=this.je.get(e);return r||(r=new Kt(Be),this.je=this.je.insert(e,r)),r}nt(e){const r=this.st(e)!==null;return r||we("WatchChangeAggregator","Detected inactive target",e),r}st(e){const r=this.Ge.get(e);return r&&r.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new LE),this.We.getRemoteKeysForTarget(e).forEach(r=>{this.Xe(e,r,null)})}It(e,r){return this.We.getRemoteKeysForTarget(e).has(r)}}function rf(){return new jt(Se.comparator)}function FE(){return new jt(Se.comparator)}const u6={asc:"ASCENDING",desc:"DESCENDING"},d6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h6={and:"AND",or:"OR"};class f6{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function zy(t,e){return t.useProto3Json||Cp(e)?e:{value:e}}function Am(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $S(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function m6(t,e){return Am(t,e.toTimestamp())}function gs(t){return ot(!!t,49232),De.fromTimestamp(function(r){const n=po(r);return new Ve(n.seconds,n.nanos)}(t))}function lw(t,e){return Hy(t,e).canonicalString()}function Hy(t,e){const r=function(s){return new gt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function zS(t){const e=gt.fromString(t);return ot(KS(e),10190,{key:e.toString()}),e}function Wy(t,e){return lw(t.databaseId,e.path)}function h0(t,e){const r=zS(e);if(r.get(1)!==t.databaseId.projectId)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Se(WS(r))}function HS(t,e){return lw(t.databaseId,e)}function p6(t){const e=zS(t);return e.length===4?gt.emptyPath():WS(e)}function Qy(t){return new gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WS(t){return ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function VE(t,e,r){return{name:Wy(t,e),fields:r.value.mapValue.fields}}function g6(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ke(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(ot(d===void 0||typeof d=="string",58123),hr.fromBase64String(d||"")):(ot(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),hr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const d=u.code===void 0?te.UNKNOWN:US(u.code);return new ye(d,u.message||"")}(a);r=new GS(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=h0(t,n.document.name),i=gs(n.document.updateTime),a=n.document.createTime?gs(n.document.createTime):De.min(),l=new $r({mapValue:{fields:n.document.fields}}),c=Cr.newFoundDocument(s,i,a,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new kf(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=h0(t,n.document),i=n.readTime?gs(n.readTime):De.min(),a=Cr.newNoDocument(s,i),l=n.removedTargetIds||[];r=new kf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=h0(t,n.document),i=n.removedTargetIds||[];r=new kf([],i,s,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new o6(s,i),l=n.targetId;r=new qS(l,a)}}return r}function y6(t,e){let r;if(e instanceof Pd)r={update:VE(t,e.key,e.value)};else if(e instanceof iw)r={delete:Wy(t,e.key)};else if(e instanceof Io)r={update:VE(t,e.key,e.data),updateMask:T6(e.fieldMask)};else{if(!(e instanceof n6))return ke(16599,{Rt:e.type});r={verify:Wy(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const l=a.transform;if(l instanceof Tm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof id)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof od)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ad)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw ke(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:m6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ke(27497)}(t,e.precondition)),r}function v6(t,e){return t&&t.length>0?(ot(e!==void 0,14353),t.map(r=>function(s,i){let a=s.updateTime?gs(s.updateTime):gs(i);return a.isEqual(De.min())&&(a=gs(i)),new e6(a,s.transformResults||[])}(r,e))):[]}function x6(t,e){return{documents:[HS(t,e.path)]}}function w6(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=HS(t,s);const i=function(u){if(u.length!==0)return YS(es.create(u,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:nl(m.field),direction:C6(m.dir)}}(d))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=zy(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:r,parent:s}}function b6(t){let e=p6(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){ot(n===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];r.where&&(i=function(f){const m=QS(f);return m instanceof es&&CS(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(m=>function(x){return new sd(sl(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Cp(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(f){const m=!!f.before,y=f.values||[];return new _m(y,m)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const m=!f.before,y=f.values||[];return new _m(y,m)}(r.endAt)),UL(e,s,a,i,l,"F",c,u)}function E6(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function QS(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=sl(r.unaryFilter.field);return Gt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=sl(r.unaryFilter.field);return Gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=sl(r.unaryFilter.field);return Gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=sl(r.unaryFilter.field);return Gt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}}(t):t.fieldFilter!==void 0?function(r){return Gt.create(sl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return es.create(r.compositeFilter.filters.map(n=>QS(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}}(r.compositeFilter.op))}(t):ke(30097,{filter:t})}function C6(t){return u6[t]}function N6(t){return d6[t]}function _6(t){return h6[t]}function nl(t){return{fieldPath:t.canonicalString()}}function sl(t){return cr.fromServerFormat(t.fieldPath)}function YS(t){return t instanceof Gt?function(r){if(r.op==="=="){if(TE(r.value))return{unaryFilter:{field:nl(r.field),op:"IS_NAN"}};if(_E(r.value))return{unaryFilter:{field:nl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(TE(r.value))return{unaryFilter:{field:nl(r.field),op:"IS_NOT_NAN"}};if(_E(r.value))return{unaryFilter:{field:nl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(r.field),op:N6(r.op),value:r.value}}}(t):t instanceof es?function(r){const n=r.getFilters().map(s=>YS(s));return n.length===1?n[0]:{compositeFilter:{op:_6(r.op),filters:n}}}(t):ke(54877,{filter:t})}function T6(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function KS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,r,n,s,i=De.min(),a=De.min(),l=hr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.gt=e}}function S6(t){const e=b6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$y(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.Dn=new I6}addToCollectionParentIndex(e,r){return this.Dn.add(r),ne.resolve()}getCollectionParents(e,r){return ne.resolve(this.Dn.getEntries(r))}addFieldIndex(e,r){return ne.resolve()}deleteFieldIndex(e,r){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,r){return ne.resolve()}getDocumentsMatchingTarget(e,r){return ne.resolve(null)}getIndexType(e,r){return ne.resolve(0)}getFieldIndexes(e,r){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,r){return ne.resolve(mo.min())}getMinOffsetFromCollectionGroup(e,r){return ne.resolve(mo.min())}updateCollectionGroup(e,r,n){return ne.resolve()}updateIndexEntries(e,r){return ne.resolve()}}class I6{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Kt(gt.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Kt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JS=41943040;class qr{static withCacheSize(e){return new qr(e,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr.DEFAULT_COLLECTION_PERCENTILE=10,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qr.DEFAULT=new qr(JS,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qr.DISABLED=new qr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new tc(0)}static ur(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="LruGarbageCollector",j6=1048576;function qE([t,e],[r,n]){const s=Be(t,r);return s===0?Be(e,n):s}class P6{constructor(e){this.Tr=e,this.buffer=new Kt(qE),this.Ir=0}dr(){return++this.Ir}Er(e){const r=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();qE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class k6{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){we(UE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){pc(r)?we(UE,"Ignoring IndexedDB error during garbage collection: ",r):await mc(r)}await this.Rr(3e5)})}}class M6{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.mr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return ne.resolve(Ep.ue);const n=new P6(r);return this.Vr.forEachTarget(e,s=>n.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>n.Er(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Vr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(BE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BE):this.pr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,r){let n,s,i,a,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),tl()<=Qe.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function D6(t,e){return new M6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.changes=new Sa(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Cr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ne.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Su(n.mutation,s,an.empty(),Ve.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ye()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ye()){const s=Zo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=ou();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Zo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ye()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,n,s){let i=ai();const a=Au(),l=function(){return Au()}();return r.forEach((c,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Io)?i=i.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),Su(d.mutation,u,d.mutation.getFieldMask(),Ve.now())):a.set(u.key,an.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>a.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new L6(d,(f=a.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=Au();let s=new jt((a,l)=>a-l),i=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||an.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(s.get(l.batchId)||Ye()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=PS();d.forEach(m=>{if(!i.has(m)){const y=VS(r.get(m),n.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ne.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return Se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):AS(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):ne.resolve(Zo());let l=ed,c=i;return a.next(u=>ne.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(d)?ne.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ye())).next(d=>({batchId:l,changes:jS(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Se(r)).next(n=>{let s=ou();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=ou();return this.indexManager.getCollectionParents(e,i).next(l=>ne.forEach(l,c=>{const u=function(f,m){return new gc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(d=>{d.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,Cr.newInvalidDocument(d)))});let l=ou();return a.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Su(d.mutation,u,an.empty(),Ve.now()),Ap(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,r){return ne.resolve(this.Br.get(r))}saveBundleMetadata(e,r){return this.Br.set(r.id,function(s){return{id:s.id,version:s.version,createTime:gs(s.createTime)}}(r)),ne.resolve()}getNamedQuery(e,r){return ne.resolve(this.Lr.get(r))}saveNamedQuery(e,r){return this.Lr.set(r.name,function(s){return{name:s.name,query:S6(s.bundledQuery),readTime:gs(s.readTime)}}(r)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.overlays=new jt(Se.comparator),this.kr=new Map}getOverlay(e,r){return ne.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Zo();return ne.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.wt(e,r,i)}),ne.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.kr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(n)),ne.resolve()}getOverlaysForCollection(e,r,n){const s=Zo(),i=r.length+1,a=new Se(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>n&&s.set(c.getKey(),c)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new jt((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=i.get(u.largestBatchId);d===null&&(d=Zo(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Zo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return ne.resolve(l)}wt(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(n.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new i6(r,n));let i=this.kr.get(r);i===void 0&&(i=Ye(),this.kr.set(r,i)),this.kr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.sessionToken=hr.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(){this.qr=new Kt(tr.Qr),this.$r=new Kt(tr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,r){const n=new tr(e,r);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Wr(new tr(e,r))}Gr(e,r){e.forEach(n=>this.removeReference(n,r))}zr(e){const r=new Se(new gt([])),n=new tr(r,e),s=new tr(r,e+1),i=[];return this.$r.forEachInRange([n,s],a=>{this.Wr(a),i.push(a.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const r=new Se(new gt([])),n=new tr(r,e),s=new tr(r,e+1);let i=Ye();return this.$r.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new tr(e,0),n=this.qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class tr{constructor(e,r){this.key=e,this.Hr=r}static Qr(e,r){return Se.comparator(e.key,r.key)||Be(e.Hr,r.Hr)}static Ur(e,r){return Be(e.Hr,r.Hr)||Se.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.er=1,this.Yr=new Kt(tr.Qr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new s6(i,r,n,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new tr(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ne.resolve(a)}lookupMutationBatch(e,r){return ne.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.Xr(n),i=s<0?0:s;return ne.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Zx:this.er-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new tr(r,0),s=new tr(r,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),ne.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Kt(Be);return r.forEach(s=>{const i=new tr(s,0),a=new tr(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],l=>{n=n.add(l.Hr)})}),ne.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Se.isDocumentKey(i)||(i=i.child(""));const a=new tr(new Se(i),0);let l=new Kt(Be);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},a),ne.resolve(this.ei(l))}ei(e){const r=[];return e.forEach(n=>{const s=this.Zr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){ot(this.ti(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return ne.forEach(r.mutations,s=>{const i=new tr(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,r){const n=new tr(r,0),s=this.Yr.firstAfterOrEqual(n);return ne.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ti(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e){this.ni=e,this.docs=function(){return new jt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.ni(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ne.resolve(n?n.document.mutableCopy():Cr.newInvalidDocument(r))}getEntries(e,r){let n=ai();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Cr.newInvalidDocument(s))}),ne.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=ai();const a=r.path,l=new Se(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||wL(xL(d),n)<=0||(s.has(d.key)||Ap(r,d))&&(i=i.insert(d.key,d.mutableCopy()))}return ne.resolve(i)}getAllFromCollectionGroup(e,r,n,s){ke(9500)}ri(e,r){return ne.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new $6(this)}getSize(e){return ne.resolve(this.size)}}class $6 extends O6{constructor(e){super(),this.Or=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Or.addEntry(e,s)):this.Or.removeEntry(n)}),ne.waitFor(r)}getFromCache(e,r){return this.Or.getEntry(e,r)}getAllFromCache(e,r){return this.Or.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.persistence=e,this.ii=new Sa(r=>rw(r),nw),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new cw,this.targetCount=0,this._i=tc.ar()}forEachTarget(e,r){return this.ii.forEach((n,s)=>r(s)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.si&&(this.si=r),ne.resolve()}hr(e){this.ii.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this._i=new tc(r),this.highestTargetId=r),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,r){return this.hr(r),this.targetCount+=1,ne.resolve()}updateTargetData(e,r){return this.hr(r),ne.resolve()}removeTargetData(e,r){return this.ii.delete(r.target),this.oi.zr(r.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ne.waitFor(i).next(()=>s)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,r){const n=this.ii.get(r)||null;return ne.resolve(n)}addMatchingKeys(e,r,n){return this.oi.Kr(r,n),ne.resolve()}removeMatchingKeys(e,r,n){this.oi.Gr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),ne.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.oi.zr(r),ne.resolve()}getMatchingKeysForTargetId(e,r){const n=this.oi.Jr(r);return ne.resolve(n)}containsKey(e,r){return ne.resolve(this.oi.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,r){this.ai={},this.overlays={},this.ui=new Ep(0),this.ci=!1,this.ci=!0,this.li=new U6,this.referenceDelegate=e(this),this.hi=new z6(this),this.indexManager=new R6,this.remoteDocumentCache=function(s){return new G6(s)}(n=>this.referenceDelegate.Pi(n)),this.serializer=new A6(r),this.Ti=new V6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new B6,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ai[e.toKey()];return n||(n=new q6(r,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,r,n){we("MemoryPersistence","Starting transaction:",e);const s=new H6(this.ui.next());return this.referenceDelegate.Ii(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,r){return ne.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,r)))}}class H6 extends EL{constructor(e){super(),this.currentSequenceNumber=e}}class uw{constructor(e){this.persistence=e,this.Ai=new cw,this.Ri=null}static Vi(e){return new uw(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,r,n){return this.Ai.addReference(n,r),this.mi.delete(n.toString()),ne.resolve()}removeReference(e,r,n){return this.Ai.removeReference(n,r),this.mi.add(n.toString()),ne.resolve()}markPotentiallyOrphaned(e,r){return this.mi.add(r.toString()),ne.resolve()}removeTarget(e,r){this.Ai.zr(r.targetId).forEach(s=>this.mi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ii(){this.Ri=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.mi,n=>{const s=Se.fromPath(n);return this.fi(e,s).next(i=>{i||r.removeEntry(s,De.min())})}).next(()=>(this.Ri=null,r.apply(e)))}updateLimboDocument(e,r){return this.fi(e,r).next(n=>{n?this.mi.delete(r.toString()):this.mi.add(r.toString())})}Pi(e){return 0}fi(e,r){return ne.or([()=>ne.resolve(this.Ai.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class Sm{constructor(e,r){this.persistence=e,this.gi=new Sa(n=>_L(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=D6(this,r)}static Vi(e,r){return new Sm(e,r)}Ii(){}di(e){return ne.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}mr(e){const r=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}yr(e){let r=0;return this.gr(e,n=>{r++}).next(()=>r)}gr(e,r){return ne.forEach(this.gi,(n,s)=>this.Sr(e,n,s).next(i=>i?ne.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,a=>this.Sr(e,a,r).next(l=>{l||(n++,i.removeEntry(a,De.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.gi.set(r,e.currentSequenceNumber),ne.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),ne.resolve()}removeReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,r){return this.gi.set(r,e.currentSequenceNumber),ne.resolve()}Pi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=If(e.data.value)),r}Sr(e,r,n){return ne.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.gi.get(r);return ne.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Is=n,this.ds=s}static Es(e,r){let n=Ye(),s=Ye();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new dw(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return U5()?8:CL(Ar())>0?6:4}()}initialize(e,r){this.gs=e,this.indexManager=r,this.As=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ps(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ys(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new W6;return this.ws(e,r,a).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,r,a,l.size)})}).next(()=>i.result)}Ss(e,r,n,s){return n.documentReadCount<this.Vs?(tl()<=Qe.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",rl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(tl()<=Qe.DEBUG&&we("QueryEngine","Query:",rl(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.fs*s?(tl()<=Qe.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",rl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(r))):ne.resolve())}ps(e,r){if(IE(r))return ne.resolve(null);let n=ps(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=$y(r,null,"F"),n=ps(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Ye(...i);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.bs(r,l);return this.Ds(r,u,a,c.readTime)?this.ps(e,$y(r,null,"F")):this.vs(e,u,r,c)}))})))}ys(e,r,n,s){return IE(r)||s.isEqual(De.min())?ne.resolve(null):this.gs.getDocuments(e,n).next(i=>{const a=this.bs(r,i);return this.Ds(r,a,n,s)?ne.resolve(null):(tl()<=Qe.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rl(r)),this.vs(e,a,r,vL(s,ed)).next(l=>l))})}bs(e,r){let n=new Kt(RS(e));return r.forEach((s,i)=>{Ap(e,i)&&(n=n.add(i))}),n}Ds(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,r,n){return tl()<=Qe.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",rl(r)),this.gs.getDocumentsMatchingQuery(e,r,mo.min(),n)}vs(e,r,n,s){return this.gs.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="LocalStore",Y6=3e8;class K6{constructor(e,r,n,s){this.persistence=e,this.Cs=r,this.serializer=s,this.Fs=new jt(Be),this.Ms=new Sa(i=>rw(i),nw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Fs))}}function J6(t,e,r,n){return new K6(t,e,r,n)}async function ZS(t,e){const r=Oe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Ns(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],l=[];let c=Ye();for(const u of s){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Bs:u,removedBatchIds:a,addedBatchIds:l}))})})}function X6(t,e){const r=Oe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,m=f.keys();let y=ne.resolve();return m.forEach(x=>{y=y.next(()=>d.getEntry(c,x)).next(g=>{const b=u.docVersions.get(x);ot(b!==null,48541),g.version.compareTo(b)<0&&(f.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Ye();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function eR(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.hi.getLastRemoteSnapshotVersion(r))}function Z6(t,e){const r=Oe(t),n=e.snapshotVersion;let s=r.Fs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.Os.newChangeBuffer({trackRemovals:!0});s=r.Fs;const l=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;l.push(r.hi.removeMatchingKeys(i,d.removedDocuments,f).next(()=>r.hi.addMatchingKeys(i,d.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(hr.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,n)),s=s.insert(f,y),function(g,b,E){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=Y6?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,y,d)&&l.push(r.hi.updateTargetData(i,y))});let c=ai(),u=Ye();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(eF(i,a,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!n.isEqual(De.min())){const d=r.hi.getLastRemoteSnapshotVersion(i).next(f=>r.hi.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(d)}return ne.waitFor(l).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(r.Fs=s,i))}function eF(t,e,r){let n=Ye(),s=Ye();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=ai();return r.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):we(hw,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ls:a,ks:s}})}function tF(t,e){const r=Oe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Zx),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function rF(t,e){const r=Oe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.hi.getTargetData(n,e).next(i=>i?(s=i,ne.resolve(s)):r.hi.allocateTargetId(n).next(a=>(s=new Qi(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.hi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Fs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Fs=r.Fs.insert(n.targetId,n),r.Ms.set(e,n.targetId)),n})}async function Yy(t,e,r){const n=Oe(t),s=n.Fs.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!pc(a))throw a;we(hw,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(s.target)}function GE(t,e,r){const n=Oe(t);let s=De.min(),i=Ye();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const f=Oe(c),m=f.Ms.get(d);return m!==void 0?ne.resolve(f.Fs.get(m)):f.hi.getTargetData(u,d)}(n,a,ps(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>n.Cs.getDocumentsMatchingQuery(a,e,r?s:De.min(),r?i:Ye())).next(l=>(nF(n,GL(e),l),{documents:l,qs:i})))}function nF(t,e,r){let n=t.xs.get(e)||De.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.xs.set(e,n)}class $E{constructor(){this.activeTargetIds=YL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sF{constructor(){this.Fo=new $E,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,r,n){this.Mo[e]=r}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new $E,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="ConnectivityMonitor";class HE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){we(zE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){we(zE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf=null;function Ky(){return nf===null?nf=function(){return 268435456+Math.round(2147483648*Math.random())}():nf++,"0x"+nf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="RestConnection",oF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aF{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=r+"://"+e.host,this.Uo=`projects/${n}/databases/${s}`,this.Ko=this.databaseId.database===Cm?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(e,r,n,s,i){const a=Ky(),l=this.Go(e,r.toUriEncodedString());we(f0,`Sending RPC '${e}' ${a}:`,l,n);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:u}=new URL(l),d=dc(u);return this.jo(e,l,c,n,d).then(f=>(we(f0,`Received RPC '${e}' ${a}: `,f),f),f=>{throw fo(f0,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",n),f})}Jo(e,r,n,s,i,a){return this.Wo(e,r,n,s,i)}zo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}Go(e,r){const n=oF[e];return`${this.$o}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="WebChannelConnection";class cF extends aF{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,r,n,s,i){const a=Ky();return new Promise((l,c)=>{const u=new eS;u.setWithCredentials(!0),u.listenOnce(tS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rf.NO_ERROR:const f=u.getResponseJson();we(xr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Rf.TIMEOUT:we(xr,`RPC '${e}' ${a} timed out`),c(new ye(te.DEADLINE_EXCEEDED,"Request time out"));break;case Rf.HTTP_ERROR:const m=u.getStatus();if(we(xr,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const g=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(w)>=0?w:te.UNKNOWN}(x.status);c(new ye(g,x.message))}else c(new ye(te.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ye(te.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:a,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{we(xr,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);we(xr,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",d,n,15)})}P_(e,r,n){const s=Ky(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=sS(),l=nS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=i.join("");we(xr,`Creating RPC '${e}' stream ${s}: ${d}`,c);const f=a.createWebChannel(d,c);this.T_(f);let m=!1,y=!1;const x=new lF({Ho:b=>{y?we(xr,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(we(xr,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),we(xr,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Yo:()=>f.close()}),g=(b,E,w)=>{b.listen(E,C=>{try{w(C)}catch(I){setTimeout(()=>{throw I},0)}})};return g(f,iu.EventType.OPEN,()=>{y||(we(xr,`RPC '${e}' stream ${s} transport opened.`),x.s_())}),g(f,iu.EventType.CLOSE,()=>{y||(y=!0,we(xr,`RPC '${e}' stream ${s} transport closed`),x.__(),this.I_(f))}),g(f,iu.EventType.ERROR,b=>{y||(y=!0,fo(xr,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),x.__(new ye(te.UNAVAILABLE,"The operation could not be completed")))}),g(f,iu.EventType.MESSAGE,b=>{var E;if(!y){const w=b.data[0];ot(!!w,16349);const C=w,I=(C==null?void 0:C.error)||((E=C[0])===null||E===void 0?void 0:E.error);if(I){we(xr,`RPC '${e}' stream ${s} received error:`,I);const j=I.status;let V=function(S){const P=Ut[S];if(P!==void 0)return US(P)}(j),R=I.message;V===void 0&&(V=te.INTERNAL,R="Unknown error status: "+j+" with message "+I.message),y=!0,x.__(new ye(V,R)),f.close()}else we(xr,`RPC '${e}' stream ${s} received:`,w),x.a_(w)}}),g(l,rS.STAT_EVENT,b=>{b.stat===Ly.PROXY?we(xr,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Ly.NOPROXY&&we(xr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(r=>r===e)}}function m0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t){return new f6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=r,this.d_=n,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const r=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),s=Math.max(0,r-n);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="PersistentStream";class rR{constructor(e,r,n,s,i,a,l,c){this.Fi=e,this.w_=n,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tR(e,r)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():r&&r.code===te.RESOURCE_EXHAUSTED?(oi(r.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):r&&r.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(r)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),r=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.b_===r&&this.W_(n,s)},n=>{e(()=>{const s=new ye(te.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(s)})})}W_(e,r){const n=this.K_(this.b_);this.stream=this.z_(e,r),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{n(()=>this.G_(s))}),this.stream.onMessage(s=>{n(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return we(WE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return r=>{this.Fi.enqueueAndForget(()=>this.b_===e?r():(we(WE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uF extends rR{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}z_(e,r){return this.connection.P_("Listen",e,r)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const r=g6(this.serializer,e),n=function(i){if(!("targetChange"in i))return De.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?De.min():a.readTime?gs(a.readTime):De.min()}(e);return this.listener.J_(r,n)}H_(e){const r={};r.database=Qy(this.serializer),r.addTarget=function(i,a){let l;const c=a.target;if(l=qy(c)?{documents:x6(i,c)}:{query:w6(i,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=$S(i,a.resumeToken);const u=zy(i,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(De.min())>0){l.readTime=Am(i,a.snapshotVersion.toTimestamp());const u=zy(i,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=E6(this.serializer,e);n&&(r.labels=n),this.k_(r)}Y_(e){const r={};r.database=Qy(this.serializer),r.removeTarget=e,this.k_(r)}}class dF extends rR{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,r){return this.connection.P_("Write",e,r)}j_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const r=v6(e.writeResults,e.commitTime),n=gs(e.commitTime);return this.listener.ta(n,r)}na(){const e={};e.database=Qy(this.serializer),this.k_(e)}X_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>y6(this.serializer,n))};this.k_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{}class fF extends hF{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,n,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,Hy(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ye(te.UNKNOWN,i.toString())})}Jo(e,r,n,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,Hy(r,n),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(te.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class mF{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(oi(r),this._a=!1):we("OnlineStateTracker",r)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class pF{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(a=>{n.enqueueAndForget(async()=>{Ra(this)&&(we(va,"Restarting streams for network reachability change."),await async function(c){const u=Oe(c);u.Ia.add(4),await Md(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Pp(u)}(this))})}),this.Aa=new mF(n,s)}}async function Pp(t){if(Ra(t))for(const e of t.da)await e(!0)}async function Md(t){for(const e of t.da)await e(!1)}function nR(t,e){const r=Oe(t);r.Ta.has(e.targetId)||(r.Ta.set(e.targetId,e),gw(r)?pw(r):yc(r).x_()&&mw(r,e))}function fw(t,e){const r=Oe(t),n=yc(r);r.Ta.delete(e),n.x_()&&sR(r,e),r.Ta.size===0&&(n.x_()?n.B_():Ra(r)&&r.Aa.set("Unknown"))}function mw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}yc(t).H_(e)}function sR(t,e){t.Ra.$e(e),yc(t).Y_(e)}function pw(t){t.Ra=new c6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),yc(t).start(),t.Aa.aa()}function gw(t){return Ra(t)&&!yc(t).M_()&&t.Ta.size>0}function Ra(t){return Oe(t).Ia.size===0}function iR(t){t.Ra=void 0}async function gF(t){t.Aa.set("Online")}async function yF(t){t.Ta.forEach((e,r)=>{mw(t,e)})}async function vF(t,e){iR(t),gw(t)?(t.Aa.la(e),pw(t)):t.Aa.set("Unknown")}async function xF(t,e,r){if(t.Aa.set("Online"),e instanceof GS&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(n){we(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Rm(t,n)}else if(e instanceof kf?t.Ra.Ye(e):e instanceof qS?t.Ra.it(e):t.Ra.et(e),!r.isEqual(De.min()))try{const n=await eR(t.localStore);r.compareTo(n)>=0&&await function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ta.get(u);d&&i.Ta.set(u,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ta.get(c);if(!d)return;i.Ta.set(c,d.withResumeToken(hr.EMPTY_BYTE_STRING,d.snapshotVersion)),sR(i,c);const f=new Qi(d.target,c,u,d.sequenceNumber);mw(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){we(va,"Failed to raise snapshot:",n),await Rm(t,n)}}async function Rm(t,e,r){if(!pc(e))throw e;t.Ia.add(1),await Md(t),t.Aa.set("Offline"),r||(r=()=>eR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(va,"Retrying IndexedDB access"),await r(),t.Ia.delete(1),await Pp(t)})}function oR(t,e){return e().catch(r=>Rm(t,r,e))}async function kp(t){const e=Oe(t),r=vo(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Zx;for(;wF(e);)try{const s=await tF(e.localStore,n);if(s===null){e.Pa.length===0&&r.B_();break}n=s.batchId,bF(e,s)}catch(s){await Rm(e,s)}aR(e)&&lR(e)}function wF(t){return Ra(t)&&t.Pa.length<10}function bF(t,e){t.Pa.push(e);const r=vo(t);r.x_()&&r.Z_&&r.X_(e.mutations)}function aR(t){return Ra(t)&&!vo(t).M_()&&t.Pa.length>0}function lR(t){vo(t).start()}async function EF(t){vo(t).na()}async function CF(t){const e=vo(t);for(const r of t.Pa)e.X_(r.mutations)}async function NF(t,e,r){const n=t.Pa.shift(),s=ow.from(n,e,r);await oR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await kp(t)}async function _F(t,e){e&&vo(t).Z_&&await async function(n,s){if(function(a){return a6(a)&&a!==te.ABORTED}(s.code)){const i=n.Pa.shift();vo(n).N_(),await oR(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await kp(n)}}(t,e),aR(t)&&lR(t)}async function QE(t,e){const r=Oe(t);r.asyncQueue.verifyOperationInProgress(),we(va,"RemoteStore received new credentials");const n=Ra(r);r.Ia.add(3),await Md(r),n&&r.Aa.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ia.delete(3),await Pp(r)}async function TF(t,e){const r=Oe(t);e?(r.Ia.delete(2),await Pp(r)):e||(r.Ia.add(2),await Md(r),r.Aa.set("Unknown"))}function yc(t){return t.Va||(t.Va=function(r,n,s){const i=Oe(r);return i.ia(),new uF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:gF.bind(null,t),e_:yF.bind(null,t),n_:vF.bind(null,t),J_:xF.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),gw(t)?pw(t):t.Aa.set("Unknown")):(await t.Va.stop(),iR(t))})),t.Va}function vo(t){return t.ma||(t.ma=function(r,n,s){const i=Oe(r);return i.ia(),new dF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:EF.bind(null,t),n_:_F.bind(null,t),ea:CF.bind(null,t),ta:NF.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await kp(t)):(await t.ma.stop(),t.Pa.length>0&&(we(va,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,l=new yw(e,r,a,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vw(t,e){if(oi("AsyncQueue",`${e}: ${t}`),pc(t))return new ye(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{static emptySet(e){return new Al(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Se.comparator(r.key,n.key):(r,n)=>Se.comparator(r.key,n.key),this.keyedMap=ou(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Al;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.fa=new jt(Se.comparator)}track(e){const r=e.doc.key,n=this.fa.get(r);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(r,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(r):e.type===1&&n.type===2?this.fa=this.fa.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):ke(63341,{At:e,ga:n}):this.fa=this.fa.insert(r,e)}pa(){const e=[];return this.fa.inorderTraversal((r,n)=>{e.push(n)}),e}}class rc{constructor(e,r,n,s,i,a,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new rc(e,r,Al.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class SF{constructor(){this.queries=KE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(r,n){const s=Oe(r),i=s.queries;s.queries=KE(),i.forEach((a,l)=>{for(const c of l.wa)c.onError(n)})})(this,new ye(te.ABORTED,"Firestore shutting down"))}}function KE(){return new Sa(t=>SS(t),Tp)}async function xw(t,e){const r=Oe(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.Sa()&&e.ba()&&(n=2):(i=new AF,n=e.ba()?0:1);try{switch(n){case 0:i.ya=await r.onListen(s,!0);break;case 1:i.ya=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=vw(a,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.wa.push(e),e.va(r.onlineState),i.ya&&e.Ca(i.ya)&&bw(r)}async function ww(t,e){const r=Oe(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.wa.indexOf(e);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function RF(t,e){const r=Oe(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(n=!0);a.ya=s}}n&&bw(r)}function IF(t,e,r){const n=Oe(t),s=n.queries.get(e);if(s)for(const i of s.wa)i.onError(r);n.queries.delete(e)}function bw(t){t.Da.forEach(e=>{e.next()})}var Jy,JE;(JE=Jy||(Jy={})).Fa="default",JE.Cache="cache";class Ew{constructor(e,r,n){this.query=e,this.Ma=r,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new rc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),r=!0):this.Ba(e,this.onlineState)&&(this.La(e),r=!0),this.Oa=e,r}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let r=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),r=!0),r}Ba(e,r){if(!e.fromCache||!this.ba())return!0;const n=r!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const r=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}La(e){e=rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Jy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.key=e}}class uR{constructor(e){this.key=e}}class jF{constructor(e,r){this.query=e,this.Ha=r,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ye(),this.mutatedKeys=Ye(),this.Xa=RS(e),this.eu=new Al(this.Xa)}get tu(){return this.Ha}nu(e,r){const n=r?r.ru:new YE,s=r?r.eu:this.eu;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),y=Ap(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),g=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;m&&y?m.data.isEqual(y.data)?x!==g&&(n.track({type:3,doc:y}),b=!0):this.iu(m,y)||(n.track({type:2,doc:y}),b=!0,(c&&this.Xa(y,c)>0||u&&this.Xa(y,u)<0)&&(l=!0)):!m&&y?(n.track({type:0,doc:y}),b=!0):m&&!y&&(n.track({type:1,doc:m}),b=!0,(c||u)&&(l=!0)),b&&(y?(a=a.add(y),i=g?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),n.track({type:1,doc:d})}return{eu:a,ru:n,Ds:l,mutatedKeys:i}}iu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((d,f)=>function(y,x){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:b})}};return g(y)-g(x)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(n),s=s!=null&&s;const l=r&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,u=c!==this.Ya;return this.Ya=c,a.length!==0||u?{snapshot:new rc(this.query,e.eu,i,a,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new YE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(r=>this.Ha=this.Ha.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ha=this.Ha.delete(r)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ye(),this.eu.forEach(n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))});const r=[];return e.forEach(n=>{this.Za.has(n)||r.push(new uR(n))}),this.Za.forEach(n=>{e.has(n)||r.push(new cR(n))}),r}uu(e){this.Ha=e.qs,this.Za=Ye();const r=this.nu(e.documents);return this.applyChanges(r,!0)}cu(){return rc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Cw="SyncEngine";class PF{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class kF{constructor(e){this.key=e,this.lu=!1}}class MF{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Sa(l=>SS(l),Tp),this.Tu=new Map,this.Iu=new Set,this.du=new jt(Se.comparator),this.Eu=new Map,this.Au=new cw,this.Ru={},this.Vu=new Map,this.mu=tc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function DF(t,e,r=!0){const n=gR(t);let s;const i=n.Pu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await dR(n,e,r,!0),s}async function OF(t,e){const r=gR(t);await dR(r,e,!0,!1)}async function dR(t,e,r,n){const s=await rF(t.localStore,ps(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await LF(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&nR(t.remoteStore,s),l}async function LF(t,e,r,n,s){t.gu=(f,m,y)=>async function(g,b,E,w){let C=b.view.nu(E);C.Ds&&(C=await GE(g.localStore,b.query,!1).then(({documents:R})=>b.view.nu(R,C)));const I=w&&w.targetChanges.get(b.targetId),j=w&&w.targetMismatches.get(b.targetId)!=null,V=b.view.applyChanges(C,g.isPrimaryClient,I,j);return ZE(g,b.targetId,V._u),V.snapshot}(t,f,m,y);const i=await GE(t.localStore,e,!0),a=new jF(e,i.qs),l=a.nu(i.documents),c=kd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);ZE(t,r,u._u);const d=new PF(e,r,a);return t.Pu.set(e,d),t.Tu.has(r)?t.Tu.get(r).push(e):t.Tu.set(r,[e]),u.snapshot}async function FF(t,e,r){const n=Oe(t),s=n.Pu.get(e),i=n.Tu.get(s.targetId);if(i.length>1)return n.Tu.set(s.targetId,i.filter(a=>!Tp(a,e))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Yy(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&fw(n.remoteStore,s.targetId),Xy(n,s.targetId)}).catch(mc)):(Xy(n,s.targetId),await Yy(n.localStore,s.targetId,!0))}async function VF(t,e){const r=Oe(t),n=r.Pu.get(e),s=r.Tu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),fw(r.remoteStore,n.targetId))}async function BF(t,e,r){const n=WF(t);try{const s=await function(a,l){const c=Oe(a),u=Ve.now(),d=l.reduce((y,x)=>y.add(x.key),Ye());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=ai(),g=Ye();return c.Os.getEntries(y,d).next(b=>{x=b,x.forEach((E,w)=>{w.isValidDocument()||(g=g.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,x)).next(b=>{f=b;const E=[];for(const w of l){const C=r6(w,f.get(w.key).overlayedDocument);C!=null&&E.push(new Io(w.key,C,wS(C.value.mapValue),Jn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,E,l)}).next(b=>{m=b;const E=b.applyToLocalDocumentSet(f,g);return c.documentOverlayCache.saveOverlays(y,b.batchId,E)})}).then(()=>({batchId:m.batchId,changes:jS(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Ru[a.currentUser.toKey()];u||(u=new jt(Be)),u=u.insert(l,c),a.Ru[a.currentUser.toKey()]=u}(n,s.batchId,r),await Dd(n,s.changes),await kp(n.remoteStore)}catch(s){const i=vw(s,"Failed to persist write");r.reject(i)}}async function hR(t,e){const r=Oe(t);try{const n=await Z6(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Eu.get(i);a&&(ot(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?ot(a.lu,14607):s.removedDocuments.size>0&&(ot(a.lu,42227),a.lu=!1))}),await Dd(r,n,e)}catch(n){await mc(n)}}function XE(t,e,r){const n=Oe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Pu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Oe(a);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.wa)m.va(l)&&(u=!0)}),u&&bw(c)}(n.eventManager,e),s.length&&n.hu.J_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function UF(t,e,r){const n=Oe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Eu.get(e),i=s&&s.key;if(i){let a=new jt(Se.comparator);a=a.insert(i,Cr.newNoDocument(i,De.min()));const l=Ye().add(i),c=new Ip(De.min(),new Map,new jt(Be),a,l);await hR(n,c),n.du=n.du.remove(i),n.Eu.delete(e),Nw(n)}else await Yy(n.localStore,e,!1).then(()=>Xy(n,e,r)).catch(mc)}async function qF(t,e){const r=Oe(t),n=e.batch.batchId;try{const s=await X6(r.localStore,e);mR(r,n,null),fR(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Dd(r,s)}catch(s){await mc(s)}}async function GF(t,e,r){const n=Oe(t);try{const s=await function(a,l){const c=Oe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ot(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);mR(n,e,r),fR(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Dd(n,s)}catch(s){await mc(s)}}function fR(t,e){(t.Vu.get(e)||[]).forEach(r=>{r.resolve()}),t.Vu.delete(e)}function mR(t,e,r){const n=Oe(t);let s=n.Ru[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ru[n.currentUser.toKey()]=s}}function Xy(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Tu.get(e))t.Pu.delete(n),r&&t.hu.pu(n,r);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(n=>{t.Au.containsKey(n)||pR(t,n)})}function pR(t,e){t.Iu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(fw(t.remoteStore,r),t.du=t.du.remove(e),t.Eu.delete(r),Nw(t))}function ZE(t,e,r){for(const n of r)n instanceof cR?(t.Au.addReference(n.key,e),$F(t,n)):n instanceof uR?(we(Cw,"Document no longer in limbo: "+n.key),t.Au.removeReference(n.key,e),t.Au.containsKey(n.key)||pR(t,n.key)):ke(19791,{yu:n})}function $F(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Iu.has(n)||(we(Cw,"New document in limbo: "+r),t.Iu.add(n),Nw(t))}function Nw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const r=new Se(gt.fromString(e)),n=t.mu.next();t.Eu.set(n,new kF(r)),t.du=t.du.insert(r,n),nR(t.remoteStore,new Qi(ps(_p(r.path)),n,"TargetPurposeLimboResolution",Ep.ue))}}async function Dd(t,e,r){const n=Oe(t),s=[],i=[],a=[];n.Pu.isEmpty()||(n.Pu.forEach((l,c)=>{a.push(n.gu(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=dw.Es(c.targetId,u);i.push(f)}}))}),await Promise.all(a),n.hu.J_(s),await async function(c,u){const d=Oe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ne.forEach(u,m=>ne.forEach(m.Is,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>ne.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!pc(f))throw f;we(hw,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const y=d.Fs.get(m),x=y.snapshotVersion,g=y.withLastLimboFreeSnapshotVersion(x);d.Fs=d.Fs.insert(m,g)}}}(n.localStore,i))}async function zF(t,e){const r=Oe(t);if(!r.currentUser.isEqual(e)){we(Cw,"User change. New user:",e.toKey());const n=await ZS(r.localStore,e);r.currentUser=e,function(i,a){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new ye(te.CANCELLED,a))})}),i.Vu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Dd(r,n.Bs)}}function HF(t,e){const r=Oe(t),n=r.Eu.get(e);if(n&&n.lu)return Ye().add(n.key);{let s=Ye();const i=r.Tu.get(e);if(!i)return s;for(const a of i){const l=r.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function gR(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UF.bind(null,e),e.hu.J_=RF.bind(null,e.eventManager),e.hu.pu=IF.bind(null,e.eventManager),e}function WF(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GF.bind(null,e),e}class Im{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,r){return null}Fu(e,r){return null}vu(e){return J6(this.persistence,new Q6,e.initialUser,this.serializer)}Du(e){return new XS(uw.Vi,this.serializer)}bu(e){return new sF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Im.provider={build:()=>new Im};class QF extends Im{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,r){ot(this.persistence.referenceDelegate instanceof Sm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new k6(n,e.asyncQueue,r)}Du(e){const r=this.cacheSizeBytes!==void 0?qr.withCacheSize(this.cacheSizeBytes):qr.DEFAULT;return new XS(n=>Sm.Vi(n,r),this.serializer)}}class Zy{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>XE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=zF.bind(null,this.syncEngine),await TF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new SF}()}createDatastore(e){const r=jp(e.databaseInfo.databaseId),n=function(i){return new cF(i)}(e.databaseInfo);return function(i,a,l,c){return new fF(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,l){return new pF(n,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>XE(this.syncEngine,r,0),function(){return HE.C()?new HE:new iF}())}createSyncEngine(e,r){return function(s,i,a,l,c,u,d){const f=new MF(s,i,a,l,c,u);return d&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Oe(s);we(va,"RemoteStore shutting down."),i.Ia.add(5),await Md(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Zy.provider={build:()=>new Zy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="FirestoreClient";class YF{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=br.UNAUTHENTICATED,this.clientId=Xx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{we(xo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(we(xo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=vw(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function p0(t,e){t.asyncQueue.verifyOperationInProgress(),we(xo,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await ZS(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>{fo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{we("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{fo("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function eC(t,e){t.asyncQueue.verifyOperationInProgress();const r=await KF(t);we(xo,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>QE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>QE(e.remoteStore,s)),t._onlineComponents=e}async function KF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(xo,"Using user provided OfflineComponentProvider");try{await p0(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;fo("Error using user provided cache. Falling back to memory cache: "+r),await p0(t,new Im)}}else we(xo,"Using default OfflineComponentProvider"),await p0(t,new QF(void 0));return t._offlineComponents}async function yR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(xo,"Using user provided OnlineComponentProvider"),await eC(t,t._uninitializedComponentsProvider._online)):(we(xo,"Using default OnlineComponentProvider"),await eC(t,new Zy))),t._onlineComponents}function JF(t){return yR(t).then(e=>e.syncEngine)}async function jm(t){const e=await yR(t),r=e.eventManager;return r.onListen=DF.bind(null,e.syncEngine),r.onUnlisten=FF.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=OF.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=VF.bind(null,e.syncEngine),r}function XF(t,e,r={}){const n=new Xs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const d=new _w({next:m=>{d.Ou(),a.enqueueAndForget(()=>ww(i,f));const y=m.docs.has(l);!y&&m.fromCache?u.reject(new ye(te.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new ye(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Ew(_p(l.path),d,{includeMetadataChanges:!0,ka:!0});return xw(i,f)}(await jm(t),t.asyncQueue,e,r,n)),n.promise}function ZF(t,e,r={}){const n=new Xs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const d=new _w({next:m=>{d.Ou(),a.enqueueAndForget(()=>ww(i,f)),m.fromCache&&c.source==="server"?u.reject(new ye(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Ew(l,d,{includeMetadataChanges:!0,ka:!0});return xw(i,f)}(await jm(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="firestore.googleapis.com",rC=!0;class nC{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xR,this.ssl=rC}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:rC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<j6)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vR((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new lL;switch(n.type){case"firstParty":return new hL(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ye(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=tC.get(r);n&&(we("ComponentProvider","Removing Datastore"),tC.delete(r),n.terminate())}(this),Promise.resolve()}}function eV(t,e,r,n={}){var s;t=cn(t,Mp);const i=dc(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${r}`;i&&(HA(`https://${c}`),WA("Firestore",!0)),a.host!==xR&&a.host!==c&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:n});if(!pa(u,l)&&(t._setSettings(u),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=br.MOCK_USER;else{d=P5(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new ye(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new br(m)}t._authCredentials=new cL(new oS(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=class wR{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wR(this.firestore,e,this._query)}};class Ot{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(jd(r,Ot._jsonSchema))return new Ot(e,n||null,new Se(gt.fromString(r.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:$t("string",Ot._jsonSchemaVersion),referencePath:$t("string")};class lo extends vc{constructor(e,r,n){super(e,r,_p(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Se(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function jo(t,e,...r){if(t=It(t),lS("collection","path",e),t instanceof Mp){const n=gt.fromString(e,...r);return gE(n),new lo(t,null,n)}{if(!(t instanceof Ot||t instanceof lo))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(gt.fromString(e,...r));return gE(n),new lo(t.firestore,null,n)}}function zt(t,e,...r){if(t=It(t),arguments.length===1&&(e=Xx.newId()),lS("doc","path",e),t instanceof Mp){const n=gt.fromString(e,...r);return pE(n),new Ot(t,null,new Se(n))}{if(!(t instanceof Ot||t instanceof lo))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(gt.fromString(e,...r));return pE(n),new Ot(t.firestore,t instanceof lo?t.converter:null,new Se(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="AsyncQueue";class iC{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tR(this,"async_queue_retry"),this.oc=()=>{const n=m0();n&&we(sC,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const r=m0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const r=m0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const r=new Xs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pc(e))throw e;we(sC,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const r=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,oi("INTERNAL UNHANDLED ERROR: ",oC(n)),n}).then(n=>(this.nc=!1,n))));return this._c=r,r}enqueueAfterDelay(e,r,n){this.ac(),this.sc.indexOf(e)>-1&&(r=0);const s=yw.createAndSchedule(this,e,r,n,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&ke(47125,{hc:oC(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const r of this.ec)if(r.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.ec)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const r=this.ec.indexOf(e);this.ec.splice(r,1)}}function oC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class wo extends Mp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new iC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iC(e),this._firestoreClient=void 0,await e}}}function tV(t,e){const r=typeof t=="object"?t:Kx(),n=typeof t=="string"?t:Cm,s=Yx(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=I5("firestore");i&&eV(s,...i)}return s}function Dp(t){if(t._terminated)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rV(t),t._firestoreClient}function rV(t){var e,r,n;const s=t._freezeSettings(),i=function(l,c,u,d){return new SL(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,vR(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new YF(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cn(hr.fromBase64String(e))}catch(r){throw new ye(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Cn(hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jd(e,Cn._jsonSchema))return Cn.fromBase64String(e.bytes)}}Cn._jsonSchemaVersion="firestore/bytes/1.0",Cn._jsonSchema={type:$t("string",Cn._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ye(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ye(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ye(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ys._jsonSchemaVersion}}static fromJSON(e){if(jd(e,ys._jsonSchema))return new ys(e.latitude,e.longitude)}}ys._jsonSchemaVersion="firestore/geoPoint/1.0",ys._jsonSchema={type:$t("string",ys._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jd(e,vs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new vs(e.vectorValues);throw new ye(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vs._jsonSchemaVersion="firestore/vectorValue/1.0",vs._jsonSchema={type:$t("string",vs._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=/^__.*__$/;class sV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Io(e,this.data,this.fieldMask,r,this.fieldTransforms):new Pd(e,this.data,r,this.fieldTransforms)}}class bR{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Io(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ER(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:t})}}class Tw{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Tw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.fc(e),s}gc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Pm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ER(this.Ec)&&nV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class iV{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||jp(e)}Dc(e,r,n,s=!1){return new Tw({Ec:e,methodName:r,bc:n,path:cr.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Aw(t){const e=t._freezeSettings(),r=jp(t._databaseId);return new iV(t._databaseId,!!e.ignoreUndefinedProperties,r)}function oV(t,e,r,n,s,i={}){const a=t.Dc(i.merge||i.mergeFields?2:0,e,r,s);Rw("Data must be an object, but it was:",a,n);const l=CR(n,a);let c,u;if(i.merge)c=new an(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=ev(e,f,r);if(!a.contains(m))throw new ye(te.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_R(d,m)||d.push(m)}c=new an(d),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new sV(new $r(l),c,u)}class Fp extends Lp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fp}}class Sw extends Lp{constructor(e,r){super(e),this.Cc=r}_toFieldTransform(e){const r=new ad(e.serializer,MS(e.serializer,this.Cc));return new XL(e.path,r)}isEqual(e){return e instanceof Sw&&this.Cc===e.Cc}}function aV(t,e,r,n){const s=t.Dc(1,e,r);Rw("Data must be an object, but it was:",s,n);const i=[],a=$r.empty();Ro(n,(c,u)=>{const d=Iw(e,c,r);u=It(u);const f=s.gc(d);if(u instanceof Fp)i.push(d);else{const m=Od(u,f);m!=null&&(i.push(d),a.set(d,m))}});const l=new an(i);return new bR(a,l,s.fieldTransforms)}function lV(t,e,r,n,s,i){const a=t.Dc(1,e,r),l=[ev(e,n,r)],c=[s];if(i.length%2!=0)throw new ye(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(ev(e,i[m])),c.push(i[m+1]);const u=[],d=$r.empty();for(let m=l.length-1;m>=0;--m)if(!_R(u,l[m])){const y=l[m];let x=c[m];x=It(x);const g=a.gc(y);if(x instanceof Fp)u.push(y);else{const b=Od(x,g);b!=null&&(u.push(y),d.set(y,b))}}const f=new an(u);return new bR(d,f,a.fieldTransforms)}function cV(t,e,r,n=!1){return Od(r,t.Dc(n?4:3,e))}function Od(t,e){if(NR(t=It(t)))return Rw("Unsupported field value:",e,t),CR(t,e);if(t instanceof Lp)return function(n,s){if(!ER(s.Ec))throw s.wc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const l of n){let c=Od(l,s.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=It(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return MS(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ve.fromDate(n);return{timestampValue:Am(s.serializer,i)}}if(n instanceof Ve){const i=new Ve(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Am(s.serializer,i)}}if(n instanceof ys)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Cn)return{bytesValue:$S(s.serializer,n._byteString)};if(n instanceof Ot){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:lw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof vs)return function(a,l){return{mapValue:{fields:{[yS]:{stringValue:xS},[Nm]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.wc("VectorValues must only contain numeric values.");return sw(l.serializer,u)})}}}}}}(n,s);throw s.wc(`Unsupported field value: ${bp(n)}`)}(t,e)}function CR(t,e){const r={};return dS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(t,(n,s)=>{const i=Od(s,e.Vc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function NR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof ys||t instanceof Cn||t instanceof Ot||t instanceof Lp||t instanceof vs)}function Rw(t,e,r){if(!NR(r)||!cS(r)){const n=bp(r);throw n==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+n)}}function ev(t,e,r){if((e=It(e))instanceof Op)return e._internalPath;if(typeof e=="string")return Iw(t,e);throw Pm("Field path arguments must be of type string or ",t,!1,void 0,r)}const uV=new RegExp("[~\\*/\\[\\]]");function Iw(t,e,r){if(e.search(uV)>=0)throw Pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Op(...e.split("."))._internalPath}catch{throw Pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Pm(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${n}`),a&&(c+=` in document ${s}`),c+=")"),new ye(te.INVALID_ARGUMENT,l+t+c)}function _R(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Vp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class dV extends TR{data(){return super.data()}}function Vp(t,e){return typeof e=="string"?Iw(t,e):e instanceof Op?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jw{}class SR extends jw{}function xc(t,e,...r){let n=[];e instanceof jw&&n.push(e),n=n.concat(r),function(i){const a=i.filter(c=>c instanceof Pw).length,l=i.filter(c=>c instanceof Bp).length;if(a>1||a>0&&l>0)throw new ye(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Bp extends SR{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Bp(e,r,n)}_apply(e){const r=this._parse(e);return RR(e._query,r),new vc(e.firestore,e.converter,Gy(e._query,r))}_parse(e){const r=Aw(e.firestore);return function(i,a,l,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ye(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){cC(f,d);const x=[];for(const g of f)x.push(lC(c,i,g));m={arrayValue:{values:x}}}else m=lC(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||cC(f,d),m=cV(l,a,f,d==="in"||d==="not-in");return Gt.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function km(t,e,r){const n=e,s=Vp("where",t);return Bp._create(s,n,r)}class Pw extends jw{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Pw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:es.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)RR(a,c),a=Gy(a,c)}(e._query,r),new vc(e.firestore,e.converter,Gy(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kw extends SR{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new kw(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new ye(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ye(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sd(i,a)}(e._query,this._field,this._direction);return new vc(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new gc(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Mw(t,e="asc"){const r=e,n=Vp("orderBy",t);return kw._create(n,r)}function lC(t,e,r){if(typeof(r=It(r))=="string"){if(r==="")throw new ye(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AS(e)&&r.indexOf("/")!==-1)throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(gt.fromString(r));if(!Se.isDocumentKey(n))throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return NE(t,new Se(n))}if(r instanceof Ot)return NE(t,r._key);throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bp(r)}.`)}function cC(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RR(t,e){const r=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class hV{convertValue(e,r="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ro(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r[Nm].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Lt(a.doubleValue));return new vs(i)}convertGeoPoint(e){return new ys(Lt(e.latitude),Lt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Np(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(td(e));default:return null}}convertTimestamp(e){const r=po(e);return new Ve(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=gt.fromString(e);ot(KS(n),9688,{name:e});const s=new rd(n.get(1),n.get(3)),i=new Se(n.popFirst(5));return s.isEqual(r)||oi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class lu{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oa extends TR{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Vp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=oa._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",oa._jsonSchema={type:$t("string",oa._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class Mf extends oa{data(e={}){return super.data(e)}}class aa{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new lu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Mf(this._firestore,this._userDataWriter,n.key,n,new lu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ye(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Mf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new lu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Mf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new lu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:mV(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){t=cn(t,Ot);const e=cn(t.firestore,wo);return XF(Dp(e),t._key).then(r=>jR(e,t,r))}aa._jsonSchemaVersion="firestore/querySnapshot/1.0",aa._jsonSchema={type:$t("string",aa._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class Dw extends hV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cn(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,r)}}function Ld(t){t=cn(t,vc);const e=cn(t.firestore,wo),r=Dp(e),n=new Dw(e);return AR(t._query),ZF(r,t._query).then(s=>new aa(e,n,t,s))}function Up(t,e,r){t=cn(t,Ot);const n=cn(t.firestore,wo),s=fV(t.converter,e);return Ow(n,[oV(Aw(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Jn.none())])}function Ia(t,e,r,...n){t=cn(t,Ot);const s=cn(t.firestore,wo),i=Aw(s);let a;return a=typeof(e=It(e))=="string"||e instanceof Op?lV(i,"updateDoc",t._key,e,r,n):aV(i,"updateDoc",t._key,e),Ow(s,[a.toMutation(t._key,Jn.exists(!0))])}function IR(t){return Ow(cn(t.firestore,wo),[new iw(t._key,Jn.none())])}function qp(t,...e){var r,n,s;t=It(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||aC(e[a])||(i=e[a++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(aC(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,d;if(t instanceof Ot)u=cn(t.firestore,wo),d=_p(t._key.path),c={next:f=>{e[a]&&e[a](jR(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=cn(t,vc);u=cn(f.firestore,wo),d=f._query;const m=new Dw(u);c={next:y=>{e[a]&&e[a](new aa(u,m,f,y))},error:e[a+1],complete:e[a+2]},AR(t._query)}return function(m,y,x,g){const b=new _w(g),E=new Ew(y,b,x);return m.asyncQueue.enqueueAndForget(async()=>xw(await jm(m),E)),()=>{b.Ou(),m.asyncQueue.enqueueAndForget(async()=>ww(await jm(m),E))}}(Dp(u),d,l,c)}function Ow(t,e){return function(n,s){const i=new Xs;return n.asyncQueue.enqueueAndForget(async()=>BF(await JF(n),s,i)),i.promise}(Dp(t),e)}function jR(t,e,r){const n=r.docs.get(e._key),s=new Dw(t);return new oa(t,s,e._key,n,new lu(r.hasPendingWrites,r.fromCache),e.converter)}function pV(t){return new Sw("increment",t)}(function(e,r=!0){(function(s){fc=s})(hc),Jl(new ga("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),l=new wo(new uL(n.getProvider("auth-internal")),new fL(a,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ye(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rd(u.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),oo(uE,dE,e),oo(uE,dE,"esm2017")})();var ds=function(){return ds=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ds.apply(this,arguments)};function Fd(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function gV(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function PR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yV=PR,kR=new Rd("auth","Firebase",PR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new Wx("@firebase/auth");function vV(t,...e){Mm.logLevel<=Qe.WARN&&Mm.warn(`Auth (${hc}): ${t}`,...e)}function Df(t,...e){Mm.logLevel<=Qe.ERROR&&Mm.error(`Auth (${hc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw Lw(t,...e)}function xs(t,...e){return Lw(t,...e)}function MR(t,e,r){const n=Object.assign(Object.assign({},yV()),{[e]:r});return new Rd("auth","Firebase",n).create(e,{appName:t.name})}function Zs(t){return MR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lw(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return kR.create(t,...e)}function Ie(t,e,...r){if(!t)throw Lw(e,...r)}function Qs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Df(e),new Error(e)}function li(t,e){t||Qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xV(){return uC()==="http:"||uC()==="https:"}function uC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xV()||F5()||"connection"in navigator)?navigator.onLine:!0}function bV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,r){this.shortDelay=e,this.longDelay=r,li(r>e,"Short delay should be less than long delay!"),this.isMobile=D5()||V5()}get(){return wV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e){li(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NV=new Vd(3e4,6e4);function Ns(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _s(t,e,r,n,s={}){return OR(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const l=Id(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return L5()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&dc(t.emulatorConfig.host)&&(u.credentials="include"),DR.fetch()(await LR(t,t.config.apiHost,r,l),u)})}async function OR(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},EV),e);try{const s=new TV(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw sf(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw sf(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw sf(t,"user-disabled",a);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw MR(t,d,u);jn(t,d)}}catch(s){if(s instanceof hi)throw s;jn(t,"network-request-failed",{message:String(s)})}}async function Bd(t,e,r,n,s={}){const i=await _s(t,e,r,n,s);return"mfaPendingCredential"in i&&jn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function LR(t,e,r,n){const s=`${e}${r}?${n}`,i=t,a=i.config.emulator?Fw(t.config,s):`${t.config.apiScheme}://${s}`;return CV.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function _V(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(xs(this.auth,"network-request-failed")),NV.get())})}}function sf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=xs(t,e,n);return s.customData._tokenResponse=r,s}function dC(t){return t!==void 0&&t.enterprise!==void 0}class AV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return _V(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SV(t,e){return _s(t,"GET","/v2/recaptchaConfig",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e){return _s(t,"POST","/v1/accounts:delete",e)}async function Dm(t,e){return _s(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IV(t,e=!1){const r=It(t),n=await r.getIdToken(e),s=Vw(n);Ie(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Ru(g0(s.auth_time)),issuedAtTime:Ru(g0(s.iat)),expirationTime:Ru(g0(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function g0(t){return Number(t)*1e3}function Vw(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{const s=qA(r);return s?JSON.parse(s):(Df("Failed to decode base64 JWT payload"),null)}catch(s){return Df("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hC(t){const e=Vw(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof hi&&jV(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function jV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Om(t){var e;const r=t.auth,n=await t.getIdToken(),s=await ld(t,Dm(r,{idToken:n}));Ie(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?FR(i.providerUserInfo):[],l=MV(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new rv(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function kV(t){const e=It(t);await Om(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MV(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function FR(t){return t.map(e=>{var{providerId:r}=e,n=Fd(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DV(t,e){const r=await OR(t,{},async()=>{const n=Id({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await LR(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&dc(t.emulatorConfig.host)&&(c.credentials="include"),DR.fetch()(a,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function OV(t,e){return _s(t,"POST","/v2/accounts:revokeToken",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const r=hC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await DV(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Sl;return n&&(Ie(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Ie(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Ie(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Fd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await ld(this,this.stsTokenManager.getToken(this.auth,e));return Ie(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return IV(this,e)}reload(){return kV(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Om(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(Zs(this.auth));const e=await this.getIdToken();return await ld(this,RV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,y=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,x=(a=r.photoURL)!==null&&a!==void 0?a:void 0,g=(l=r.tenantId)!==null&&l!==void 0?l:void 0,b=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,E=(u=r.createdAt)!==null&&u!==void 0?u:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:C,emailVerified:I,isAnonymous:j,providerData:V,stsTokenManager:R}=r;Ie(C&&R,e,"internal-error");const N=Sl.fromJSON(this.name,R);Ie(typeof C=="string",e,"internal-error"),Si(f,e.name),Si(m,e.name),Ie(typeof I=="boolean",e,"internal-error"),Ie(typeof j=="boolean",e,"internal-error"),Si(y,e.name),Si(x,e.name),Si(g,e.name),Si(b,e.name),Si(E,e.name),Si(w,e.name);const S=new Qn({uid:C,auth:e,email:m,emailVerified:I,displayName:f,isAnonymous:j,photoURL:x,phoneNumber:y,tenantId:g,stsTokenManager:N,createdAt:E,lastLoginAt:w});return V&&Array.isArray(V)&&(S.providerData=V.map(P=>Object.assign({},P))),b&&(S._redirectEventId=b),S}static async _fromIdTokenResponse(e,r,n=!1){const s=new Sl;s.updateFromServerResponse(r);const i=new Qn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Om(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?FR(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Sl;l.updateFromIdToken(n);const c=new Qn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Map;function Ys(t){li(t instanceof Function,"Expected a class definition");let e=fC.get(t);return e?(li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}VR.type="NONE";const mC=VR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t,e,r){return`firebase:${t}:${e}:${r}`}class Rl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Of(this.userKey,s.apiKey,i),this.fullPersistenceKey=Of("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Dm(this.auth,{idToken:e}).catch(()=>{});return r?Qn._fromGetAccountInfoResponse(this.auth,r,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Rl(Ys(mC),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ys(mC);const a=Of(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(a);if(d){let f;if(typeof d=="string"){const m=await Dm(e,{idToken:d}).catch(()=>{});if(!m)break;f=await Qn._fromGetAccountInfoResponse(e,m,d)}else f=Qn._fromJSON(e,d);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Rl(i,e,n):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Rl(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zR(e))return"Blackberry";if(HR(e))return"Webos";if(UR(e))return"Safari";if((e.includes("chrome/")||qR(e))&&!e.includes("edge/"))return"Chrome";if($R(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function BR(t=Ar()){return/firefox\//i.test(t)}function UR(t=Ar()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qR(t=Ar()){return/crios\//i.test(t)}function GR(t=Ar()){return/iemobile/i.test(t)}function $R(t=Ar()){return/android/i.test(t)}function zR(t=Ar()){return/blackberry/i.test(t)}function HR(t=Ar()){return/webos/i.test(t)}function Bw(t=Ar()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LV(t=Ar()){var e;return Bw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FV(){return B5()&&document.documentMode===10}function WR(t=Ar()){return Bw(t)||$R(t)||HR(t)||zR(t)||/windows phone/i.test(t)||GR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t,e=[]){let r;switch(t){case"Browser":r=pC(Ar());break;case"Worker":r=`${pC(Ar())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${hc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(t,e={}){return _s(t,"GET","/v2/passwordPolicy",Ns(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=6;class qV{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:UV,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gC(this),this.idTokenSubscription=new gC(this),this.beforeStateQueue=new VV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ys(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await Rl.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Dm(this,{idToken:e}),n=await Qn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(En(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Om(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(Zs(this));const r=e?It(e):null;return r&&Ie(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(Zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(Zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BV(this),r=new qV(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rd("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await OV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ys(e)||this._popupRedirectResolver;Ie(r,this,"argument-error"),this.redirectPersistenceManager=await Rl.create(this,[Ys(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{a=!0,c()}}else{const c=e.addObserver(r);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&vV(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function fi(t){return It(t)}class gC{constructor(e){this.auth=e,this.observer=null,this.addObserver=Q5(r=>this.observer=r)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $V(t){Gp=t}function YR(t){return Gp.loadJS(t)}function zV(){return Gp.recaptchaEnterpriseScript}function HV(){return Gp.gapiScript}function WV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class QV{constructor(){this.enterprise=new YV}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class YV{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const KV="recaptcha-enterprise",KR="NO_RECAPTCHA";class JV{constructor(e){this.type=KV,this.auth=fi(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{SV(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new AV(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;dC(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(KR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QV().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{n(this.auth).then(l=>{if(!r&&dC(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=zV();c.length!==0&&(c+=l),YR(c).then(()=>{s(l,i,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function yC(t,e,r,n=!1,s=!1){const i=new JV(t);let a;if(s)a=KR;else try{a=await i.verify(r)}catch{a=await i.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Lm(t,e,r,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await yC(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await yC(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t,e){const r=Yx(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(pa(i,e??{}))return s;jn(s,"already-initialized")}return r.initialize({options:e})}function ZV(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ys);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function eB(t,e,r){const n=fi(t);Ie(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=JR(e),{host:a,port:l}=tB(e),c=l===null?"":`:${l}`,u={url:`${i}//${a}${c}/`},d=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Ie(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ie(pa(u,n.config.emulator)&&pa(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,dc(a)?(HA(`${i}//${a}${c}`),WA("Auth",!0)):rB()}function JR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tB(t){const e=JR(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:vC(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:vC(a)}}}function vC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rB(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Qs("not implemented")}_getIdTokenResponse(e){return Qs("not implemented")}_linkToIdToken(e,r){return Qs("not implemented")}_getReauthenticationResolver(e){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e){return _s(t,"POST","/v1/accounts:resetPassword",Ns(t,e))}async function nB(t,e){return _s(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e){return Bd(t,"POST","/v1/accounts:signInWithPassword",Ns(t,e))}async function iB(t,e){return _s(t,"POST","/v1/accounts:sendOobCode",Ns(t,e))}async function oB(t,e){return iB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aB(t,e){return Bd(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}async function lB(t,e){return Bd(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends Uw{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new cd(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new cd(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,r,"signInWithPassword",sB);case"emailLink":return aB(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,n,"signUpPassword",nB);case"emailLink":return lB(e,{idToken:r,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t,e){return Bd(t,"POST","/v1/accounts:signInWithIdp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB="http://localhost";class xa extends Uw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):jn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Fd(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new xa(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Il(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Il(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Il(e,r)}buildRequest(){const e={requestUri:cB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Id(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dB(t){const e=nu(su(t)).link,r=e?nu(su(e)).deep_link_id:null,n=nu(su(t)).deep_link_id;return(n?nu(su(n)).link:null)||n||r||e||t}class qw{constructor(e){var r,n,s,i,a,l;const c=nu(su(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=uB((s=c.mode)!==null&&s!==void 0?s:null);Ie(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=c.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=dB(e);try{return new qw(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.providerId=wc.PROVIDER_ID}static credential(e,r){return cd._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=qw.parseLink(r);return Ie(n,"argument-error"),cd._fromEmailAndCode(e,n.code,n.tenantId)}}wc.PROVIDER_ID="password";wc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends ZR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Ud{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Ud{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return xa._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Fi.credential(r,n)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Ud{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com";Vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Ud{constructor(){super("twitter.com")}static credential(e,r){return xa._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Bi.credential(r,n)}catch{return null}}}Bi.TWITTER_SIGN_IN_METHOD="twitter.com";Bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hB(t,e){return Bd(t,"POST","/v1/accounts:signUp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Qn._fromIdTokenResponse(e,n,s),a=xC(n);return new wa({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=xC(n);return new wa({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function xC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends hi{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Fm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Fm(e,r,n,s)}}function eI(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fm._fromErrorAndOperation(t,i,e,n):i})}async function fB(t,e,r=!1){const n=await ld(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return wa._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mB(t,e,r=!1){const{auth:n}=t;if(En(n.app))return Promise.reject(Zs(n));const s="reauthenticate";try{const i=await ld(t,eI(n,s,e,t),r);Ie(i.idToken,n,"internal-error");const a=Vw(i.idToken);Ie(a,n,"internal-error");const{sub:l}=a;return Ie(t.uid===l,n,"user-mismatch"),wa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&jn(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(t,e,r=!1){if(En(t.app))return Promise.reject(Zs(t));const n="signIn",s=await eI(t,n,e),i=await wa._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function pB(t,e){return tI(fi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,r){this.factorId=e,this.uid=r.mfaEnrollmentId,this.enrollmentTime=new Date(r.enrolledAt).toUTCString(),this.displayName=r.displayName}static _fromServerResponse(e,r){return"phoneInfo"in r?$w._fromServerResponse(e,r):"totpInfo"in r?zw._fromServerResponse(e,r):jn(e,"internal-error")}}class $w extends Gw{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,r){return new $w(r)}}class zw extends Gw{constructor(e){super("totp",e)}static _fromServerResponse(e,r){return new zw(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(t){const e=fi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gB(t,e,r){const n=fi(t);await Lm(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",oB)}async function yB(t,e,r){await XR(It(t),{oobCode:e,newPassword:r}).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Hw(t),n})}async function vB(t,e){const r=It(t),n=await XR(r,{oobCode:e}),s=n.requestType;switch(Ie(s,r,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ie(n.newEmail,r,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ie(n.mfaInfo,r,"internal-error");default:Ie(n.email,r,"internal-error")}let i=null;return n.mfaInfo&&(i=Gw._fromServerResponse(fi(r),n.mfaInfo)),{data:{email:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.newEmail:n.email)||null,previousEmail:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.email:n.newEmail)||null,multiFactorInfo:i},operation:s}}async function xB(t,e){const{data:r}=await vB(It(t),e);return r.email}async function wB(t,e,r){if(En(t.app))return Promise.reject(Zs(t));const n=fi(t),a=await Lm(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hB).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Hw(t),c}),l=await wa._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(l.user),l}function bB(t,e,r){return En(t.app)?Promise.reject(Zs(t)):pB(It(t),wc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Hw(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t,e){return It(t).setPersistence(e)}function CB(t,e,r,n){return It(t).onIdTokenChanged(e,r,n)}function NB(t,e,r){return It(t).beforeAuthStateChanged(e,r)}function _B(t,e,r,n){return It(t).onAuthStateChanged(e,r,n)}function wC(t){return It(t).signOut()}const Vm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Vm,"1"),this.storage.removeItem(Vm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=1e3,AB=10;class nI extends rI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);FV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AB):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},TB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}nI.type="LOCAL";const sI=nI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI extends rI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}iI.type="SESSION";const oI=iI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new $p(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(a).map(async u=>u(r.origin,i)),c=await SB(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$p.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const u=Ww("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(){return window}function IB(t){ws().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return typeof ws().WorkerGlobalScope<"u"&&typeof ws().importScripts=="function"}async function jB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kB(){return aI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebaseLocalStorageDb",MB=1,Bm="firebaseLocalStorage",cI="fbase_key";class qd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function zp(t,e){return t.transaction([Bm],e?"readwrite":"readonly").objectStore(Bm)}function DB(){const t=indexedDB.deleteDatabase(lI);return new qd(t).toPromise()}function nv(){const t=indexedDB.open(lI,MB);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Bm,{keyPath:cI})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Bm)?e(n):(n.close(),await DB(),e(await nv()))})})}async function bC(t,e,r){const n=zp(t,!0).put({[cI]:e,value:r});return new qd(n).toPromise()}async function OB(t,e){const r=zp(t,!1).get(e),n=await new qd(r).toPromise();return n===void 0?null:n.value}function EC(t,e){const r=zp(t,!0).delete(e);return new qd(r).toPromise()}const LB=800,FB=3;class uI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>FB)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$p._getInstance(kB()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await jB(),!this.activeServiceWorker)return;this.sender=new RB(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nv();return await bC(e,Vm,"1"),await EC(e,Vm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>bC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>OB(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>EC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=zp(s,!1).getAll();return new qd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uI.type="LOCAL";const VB=uI;new Vd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(t,e){return e?Ys(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw extends Uw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Il(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Il(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Il(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function UB(t){return tI(t.auth,new Qw(t),t.bypassAuthState)}function qB(t){const{auth:e,user:r}=t;return Ie(r,e,"internal-error"),mB(r,new Qw(t),t.bypassAuthState)}async function GB(t){const{auth:e,user:r}=t;return Ie(r,e,"internal-error"),fB(r,new Qw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UB;case"linkViaPopup":case"linkViaRedirect":return GB;case"reauthViaPopup":case"reauthViaRedirect":return qB;default:jn(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=new Vd(2e3,1e4);class yl extends dI{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,yl.currentPopupAction&&yl.currentPopupAction.cancel(),yl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=Ww();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(xs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$B.get())};e()}}yl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB="pendingRedirect",Lf=new Map;class HB extends dI{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Lf.get(this.auth._key());if(!e){try{const n=await WB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Lf.set(this.auth._key(),e)}return this.bypassAuthState||Lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WB(t,e){const r=KB(e),n=YB(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function QB(t,e){Lf.set(t._key(),e)}function YB(t){return Ys(t._redirectPersistence)}function KB(t){return Of(zB,t.config.apiKey,t.name)}async function JB(t,e,r=!1){if(En(t.app))return Promise.reject(Zs(t));const n=fi(t),s=BB(n,e),a=await new HB(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB=10*60*1e3;class ZB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e8(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!hI(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(xs(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XB&&this.cachedEventUids.clear(),this.cachedEventUids.has(CC(e))}saveEventToCache(e){this.cachedEventUids.add(CC(e)),this.lastProcessedEventTime=Date.now()}}function CC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(t,e={}){return _s(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n8=/^https?/;async function s8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t8(t);for(const r of e)try{if(i8(r))return}catch{}jn(t,"unauthorized-domain")}function i8(t){const e=tv(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!n8.test(r))return!1;if(r8.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=new Vd(3e4,6e4);function NC(){const t=ws().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function a8(t){return new Promise((e,r)=>{var n,s,i;function a(){NC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NC(),r(xs(t,"network-request-failed"))},timeout:o8.get()})}if(!((s=(n=ws().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ws().gapi)===null||i===void 0)&&i.load)a();else{const l=WV("iframefcb");return ws()[l]=()=>{gapi.load?a():r(xs(t,"network-request-failed"))},YR(`${HV()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Ff=null,e})}let Ff=null;function l8(t){return Ff=Ff||a8(t),Ff}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=new Vd(5e3,15e3),u8="__/auth/iframe",d8="emulator/auth/iframe",h8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m8(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Fw(e,d8):`https://${t.config.authDomain}/${u8}`,n={apiKey:e.apiKey,appName:t.name,v:hc},s=f8.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Id(n).slice(1)}`}async function p8(t){const e=await l8(t),r=ws().gapi;return Ie(r,t,"internal-error"),e.open({where:document.body,url:m8(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h8,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=xs(t,"network-request-failed"),l=ws().setTimeout(()=>{i(a)},c8.get());function c(){ws().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y8=500,v8=600,x8="_blank",w8="http://localhost";class _C{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function b8(t,e,r,n=y8,s=v8){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},g8),{width:n.toString(),height:s.toString(),top:i,left:a}),u=Ar().toLowerCase();r&&(l=qR(u)?x8:r),BR(u)&&(e=e||w8,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(LV(u)&&l!=="_self")return E8(e||"",l),new _C(null);const f=window.open(e||"",l,d);Ie(f,t,"popup-blocked");try{f.focus()}catch{}return new _C(f)}function E8(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8="__/auth/handler",N8="emulator/auth/handler",_8=encodeURIComponent("fac");async function TC(t,e,r,n,s,i){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:hc,eventId:s};if(e instanceof ZR){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",W5(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof Ud){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${_8}=${encodeURIComponent(c)}`:"";return`${T8(t)}?${Id(l).slice(1)}${u}`}function T8({config:t}){return t.emulator?Fw(t,N8):`https://${t.authDomain}/${C8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="webStorageSupport";class A8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oI,this._completeRedirectFn=JB,this._overrideRedirectResult=QB}async _openPopup(e,r,n,s){var i;li((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await TC(e,r,n,tv(),s);return b8(e,a,Ww())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await TC(e,r,n,tv(),s);return IB(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(li(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await p8(e),n=new ZB(e);return r.register("authEvent",s=>(Ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(y0,{type:y0},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[y0];a!==void 0&&r(!!a),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=s8(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return WR()||UR()||Bw()}}const S8=A8;var AC="@firebase/auth",SC="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j8(t){Jl(new ga("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;Ie(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QR(t)},u=new GV(n,s,i,c);return ZV(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Jl(new ga("auth-internal",e=>{const r=fi(e.getProvider("auth").getImmediate());return(n=>new R8(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),oo(AC,SC,I8(t)),oo(AC,SC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=5*60,k8=zA("authIdTokenMaxAge")||P8;let RC=null;const M8=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>k8)return;const s=r==null?void 0:r.token;RC!==s&&(RC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function D8(t=Kx()){const e=Yx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=XV(t,{popupRedirectResolver:S8,persistence:[VB,sI,oI]}),n=zA("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=M8(i.toString());NB(r,a,()=>a(r.currentUser)),CB(r,l=>a(l))}}const s=GA("auth");return s&&eB(r,`http://${s}`),r}function O8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$V({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=xs("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",O8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j8("Browser");const L8={apiKey:"AIzaSyBUftmUEX4_zgW-7daz3Yq9Md7QJQWTDOM",authDomain:"vmaster-fcdff.firebaseapp.com",projectId:"vmaster-fcdff",storageBucket:"vmaster-fcdff.firebasestorage.app",messagingSenderId:"44584686885",appId:"1:44584686885:web:1aa7941cebb2ad30bf76cc",measurementId:"G-FH5MHDJ62K"},fI=YO().length?Kx():KA(L8),ft=tV(fI),bs=D8(fI);EB(bs,sI);function at(...t){return b5(RA(t))}const F8=_3,mI=p.forwardRef(({className:t,...e},r)=>o.jsx(EA,{ref:r,className:at("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));mI.displayName=EA.displayName;const V8=Lx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),pI=p.forwardRef(({className:t,variant:e,...r},n)=>o.jsx(CA,{ref:n,className:at(V8({variant:e}),t),...r}));pI.displayName=CA.displayName;const B8=p.forwardRef(({className:t,...e},r)=>o.jsx(TA,{ref:r,className:at("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));B8.displayName=TA.displayName;const gI=p.forwardRef(({className:t,...e},r)=>o.jsx(AA,{ref:r,className:at("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(ms,{className:"h-4 w-4"})}));gI.displayName=AA.displayName;const yI=p.forwardRef(({className:t,...e},r)=>o.jsx(NA,{ref:r,className:at("text-sm font-semibold",t),...e}));yI.displayName=NA.displayName;const vI=p.forwardRef(({className:t,...e},r)=>o.jsx(_A,{ref:r,className:at("text-sm opacity-90",t),...e}));vI.displayName=_A.displayName;function U8(){const{toasts:t}=LD();return o.jsxs(F8,{children:[t.map(function({id:e,title:r,description:n,action:s,...i}){return o.jsxs(pI,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(yI,{children:r}),n&&o.jsx(vI,{children:n})]}),s,o.jsx(gI,{})]},e)}),o.jsx(mI,{})]})}var IC=["light","dark"],q8="(prefers-color-scheme: dark)",G8=p.createContext(void 0),$8={setTheme:t=>{},themes:[]},z8=()=>{var t;return(t=p.useContext(G8))!=null?t:$8};p.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=s?IC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,b=!0)=>{let E=a?a[x]:x,w=g?x+"|| ''":`'${E}'`,C="";return s&&b&&!g&&IC.includes(x)&&(C+=`d.style.colorScheme = '${x}';`),r==="class"?g||E?C+=`c.add(${w})`:C+="null":E&&(C+=`d[s](n,${w})`),C},y=t?`!function(){${d}${m(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${q8}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:y}})});var H8=t=>{switch(t){case"success":return Y8;case"info":return J8;case"warning":return K8;case"error":return X8;default:return null}},W8=Array(12).fill(0),Q8=({visible:t})=>J.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},J.createElement("div",{className:"sonner-spinner"},W8.map((e,r)=>J.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Y8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),K8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),J8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),X8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Z8=()=>{let[t,e]=J.useState(document.hidden);return J.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},sv=1,e9=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:sv++,i=this.toasts.find(l=>l.id===s),a=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:r}),{...l,...t,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...n,dismissible:a,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0;return n.then(async i=>{if(r9(i)&&!i.ok){s=!1;let a=typeof e.error=="function"?await e.error(`HTTP error! status: ${i.status}`):e.error,l=typeof e.description=="function"?await e.description(`HTTP error! status: ${i.status}`):e.description;this.create({id:r,type:"error",message:a,description:l})}else if(e.success!==void 0){s=!1;let a=typeof e.success=="function"?await e.success(i):e.success,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"success",message:a,description:l})}}).catch(async i=>{if(e.error!==void 0){s=!1;let a=typeof e.error=="function"?await e.error(i):e.error,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"error",message:a,description:l})}}).finally(()=>{var i;s&&(this.dismiss(r),r=void 0),(i=e.finally)==null||i.call(e)}),r},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||sv++;return this.create({jsx:t(r),id:r,...e}),r},this.subscribers=[],this.toasts=[]}},rn=new e9,t9=(t,e)=>{let r=(e==null?void 0:e.id)||sv++;return rn.addToast({title:t,...e,id:r}),r},r9=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",n9=t9,s9=()=>rn.toasts;Object.assign(n9,{success:rn.success,info:rn.info,warning:rn.warning,error:rn.error,custom:rn.custom,message:rn.message,promise:rn.promise,dismiss:rn.dismiss,loading:rn.loading},{getHistory:s9});function i9(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}i9(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function of(t){return t.label!==void 0}var o9=3,a9="32px",l9=4e3,c9=356,u9=14,d9=20,h9=200;function f9(...t){return t.filter(Boolean).join(" ")}var m9=t=>{var e,r,n,s,i,a,l,c,u,d;let{invert:f,toast:m,unstyled:y,interacting:x,setHeights:g,visibleToasts:b,heights:E,index:w,toasts:C,expanded:I,removeToast:j,defaultRichColors:V,closeButton:R,style:N,cancelButtonStyle:S,actionButtonStyle:P,className:O="",descriptionClassName:M="",duration:k,position:B,gap:z,loadingIcon:Q,expandByDefault:Z,classNames:U,icons:H,closeButtonAriaLabel:se="Close toast",pauseWhenPageIsHidden:re,cn:ce}=t,[he,Te]=J.useState(!1),[Me,Ce]=J.useState(!1),[oe,le]=J.useState(!1),[G,de]=J.useState(!1),[ge,Ee]=J.useState(0),[fe,ve]=J.useState(0),mt=J.useRef(null),Ue=J.useRef(null),lt=w===0,Ge=w+1<=b,Et=m.type,fr=m.dismissible!==!1,Pn=m.className||"",Rs=m.descriptionClassName||"",mn=J.useMemo(()=>E.findIndex(Pe=>Pe.toastId===m.id)||0,[E,m.id]),Is=J.useMemo(()=>{var Pe;return(Pe=m.closeButton)!=null?Pe:R},[m.closeButton,R]),Oo=J.useMemo(()=>m.duration||k||l9,[m.duration,k]),Pt=J.useRef(0),Ct=J.useRef(0),js=J.useRef(0),kn=J.useRef(null),[Lo,pi]=B.split("-"),pn=J.useMemo(()=>E.reduce((Pe,We,rt)=>rt>=mn?Pe:Pe+We.height,0),[E,mn]),Mn=Z8(),Dn=m.invert||f,Sr=Et==="loading";Ct.current=J.useMemo(()=>mn*z+pn,[mn,pn]),J.useEffect(()=>{Te(!0)},[]),J.useLayoutEffect(()=>{if(!he)return;let Pe=Ue.current,We=Pe.style.height;Pe.style.height="auto";let rt=Pe.getBoundingClientRect().height;Pe.style.height=We,ve(rt),g(Jt=>Jt.find(mr=>mr.toastId===m.id)?Jt.map(mr=>mr.toastId===m.id?{...mr,height:rt}:mr):[{toastId:m.id,height:rt,position:m.position},...Jt])},[he,m.title,m.description,g,m.id]);let Rr=J.useCallback(()=>{Ce(!0),Ee(Ct.current),g(Pe=>Pe.filter(We=>We.toastId!==m.id)),setTimeout(()=>{j(m)},h9)},[m,j,g,Ct]);J.useEffect(()=>{if(m.promise&&Et==="loading"||m.duration===1/0||m.type==="loading")return;let Pe,We=Oo;return I||x||re&&Mn?(()=>{if(js.current<Pt.current){let rt=new Date().getTime()-Pt.current;We=We-rt}js.current=new Date().getTime()})():We!==1/0&&(Pt.current=new Date().getTime(),Pe=setTimeout(()=>{var rt;(rt=m.onAutoClose)==null||rt.call(m,m),Rr()},We)),()=>clearTimeout(Pe)},[I,x,Z,m,Oo,Rr,m.promise,Et,re,Mn]),J.useEffect(()=>{let Pe=Ue.current;if(Pe){let We=Pe.getBoundingClientRect().height;return ve(We),g(rt=>[{toastId:m.id,height:We,position:m.position},...rt]),()=>g(rt=>rt.filter(Jt=>Jt.toastId!==m.id))}},[g,m.id]),J.useEffect(()=>{m.delete&&Rr()},[Rr,m.delete]);function Ac(){return H!=null&&H.loading?J.createElement("div",{className:"sonner-loader","data-visible":Et==="loading"},H.loading):Q?J.createElement("div",{className:"sonner-loader","data-visible":Et==="loading"},Q):J.createElement(Q8,{visible:Et==="loading"})}return J.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ue,className:ce(O,Pn,U==null?void 0:U.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[Et],(r=m==null?void 0:m.classNames)==null?void 0:r[Et]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:V,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":he,"data-promise":!!m.promise,"data-removed":Me,"data-visible":Ge,"data-y-position":Lo,"data-x-position":pi,"data-index":w,"data-front":lt,"data-swiping":oe,"data-dismissible":fr,"data-type":Et,"data-invert":Dn,"data-swipe-out":G,"data-expanded":!!(I||Z&&he),style:{"--index":w,"--toasts-before":w,"--z-index":C.length-w,"--offset":`${Me?ge:Ct.current}px`,"--initial-height":Z?"auto":`${fe}px`,...N,...m.style},onPointerDown:Pe=>{Sr||!fr||(mt.current=new Date,Ee(Ct.current),Pe.target.setPointerCapture(Pe.pointerId),Pe.target.tagName!=="BUTTON"&&(le(!0),kn.current={x:Pe.clientX,y:Pe.clientY}))},onPointerUp:()=>{var Pe,We,rt,Jt;if(G||!fr)return;kn.current=null;let mr=Number(((Pe=Ue.current)==null?void 0:Pe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),On=new Date().getTime()-((We=mt.current)==null?void 0:We.getTime()),vt=Math.abs(mr)/On;if(Math.abs(mr)>=d9||vt>.11){Ee(Ct.current),(rt=m.onDismiss)==null||rt.call(m,m),Rr(),de(!0);return}(Jt=Ue.current)==null||Jt.style.setProperty("--swipe-amount","0px"),le(!1)},onPointerMove:Pe=>{var We;if(!kn.current||!fr)return;let rt=Pe.clientY-kn.current.y,Jt=Pe.clientX-kn.current.x,mr=(Lo==="top"?Math.min:Math.max)(0,rt),On=Pe.pointerType==="touch"?10:2;Math.abs(mr)>On?(We=Ue.current)==null||We.style.setProperty("--swipe-amount",`${rt}px`):Math.abs(Jt)>On&&(kn.current=null)}},Is&&!m.jsx?J.createElement("button",{"aria-label":se,"data-disabled":Sr,"data-close-button":!0,onClick:Sr||!fr?()=>{}:()=>{var Pe;Rr(),(Pe=m.onDismiss)==null||Pe.call(m,m)},className:ce(U==null?void 0:U.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},J.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),J.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||J.isValidElement(m.title)?m.jsx||m.title:J.createElement(J.Fragment,null,Et||m.icon||m.promise?J.createElement("div",{"data-icon":"",className:ce(U==null?void 0:U.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ac():null,m.type!=="loading"?m.icon||(H==null?void 0:H[Et])||H8(Et):null):null,J.createElement("div",{"data-content":"",className:ce(U==null?void 0:U.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},J.createElement("div",{"data-title":"",className:ce(U==null?void 0:U.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?J.createElement("div",{"data-description":"",className:ce(M,Rs,U==null?void 0:U.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),J.isValidElement(m.cancel)?m.cancel:m.cancel&&of(m.cancel)?J.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||S,onClick:Pe=>{var We,rt;of(m.cancel)&&fr&&((rt=(We=m.cancel).onClick)==null||rt.call(We,Pe),Rr())},className:ce(U==null?void 0:U.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,J.isValidElement(m.action)?m.action:m.action&&of(m.action)?J.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||P,onClick:Pe=>{var We,rt;of(m.action)&&(Pe.defaultPrevented||((rt=(We=m.action).onClick)==null||rt.call(We,Pe),Rr()))},className:ce(U==null?void 0:U.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function jC(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var p9=t=>{let{invert:e,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:a,offset:l,theme:c="light",richColors:u,duration:d,style:f,visibleToasts:m=o9,toastOptions:y,dir:x=jC(),gap:g=u9,loadingIcon:b,icons:E,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:C,cn:I=f9}=t,[j,V]=J.useState([]),R=J.useMemo(()=>Array.from(new Set([r].concat(j.filter(re=>re.position).map(re=>re.position)))),[j,r]),[N,S]=J.useState([]),[P,O]=J.useState(!1),[M,k]=J.useState(!1),[B,z]=J.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=J.useRef(null),Z=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=J.useRef(null),H=J.useRef(!1),se=J.useCallback(re=>{var ce;(ce=j.find(he=>he.id===re.id))!=null&&ce.delete||rn.dismiss(re.id),V(he=>he.filter(({id:Te})=>Te!==re.id))},[j]);return J.useEffect(()=>rn.subscribe(re=>{if(re.dismiss){V(ce=>ce.map(he=>he.id===re.id?{...he,delete:!0}:he));return}setTimeout(()=>{nA.flushSync(()=>{V(ce=>{let he=ce.findIndex(Te=>Te.id===re.id);return he!==-1?[...ce.slice(0,he),{...ce[he],...re},...ce.slice(he+1)]:[re,...ce]})})})}),[]),J.useEffect(()=>{if(c!=="system"){z(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:re})=>{z(re?"dark":"light")})},[c]),J.useEffect(()=>{j.length<=1&&O(!1)},[j]),J.useEffect(()=>{let re=ce=>{var he,Te;n.every(Me=>ce[Me]||ce.code===Me)&&(O(!0),(he=Q.current)==null||he.focus()),ce.code==="Escape"&&(document.activeElement===Q.current||(Te=Q.current)!=null&&Te.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[n]),J.useEffect(()=>{if(Q.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,H.current=!1)}},[Q.current]),j.length?J.createElement("section",{"aria-label":`${w} ${Z}`,tabIndex:-1},R.map((re,ce)=>{var he;let[Te,Me]=re.split("-");return J.createElement("ol",{key:re,dir:x==="auto"?jC():x,tabIndex:-1,ref:Q,className:a,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":Te,"data-x-position":Me,style:{"--front-toast-height":`${((he=N[0])==null?void 0:he.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||a9,"--width":`${c9}px`,"--gap":`${g}px`,...f},onBlur:Ce=>{H.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(H.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||H.current||(H.current=!0,U.current=Ce.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{M||O(!1)},onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||k(!0)},onPointerUp:()=>k(!1)},j.filter(Ce=>!Ce.position&&ce===0||Ce.position===re).map((Ce,oe)=>{var le,G;return J.createElement(m9,{key:Ce.id,icons:E,index:oe,toast:Ce,defaultRichColors:u,duration:(le=y==null?void 0:y.duration)!=null?le:d,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:e,visibleToasts:m,closeButton:(G=y==null?void 0:y.closeButton)!=null?G:i,interacting:M,position:re,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:se,toasts:j.filter(de=>de.position==Ce.position),heights:N.filter(de=>de.position==Ce.position),setHeights:S,expandByDefault:s,gap:g,loadingIcon:b,expanded:P,pauseWhenPageIsHidden:C,cn:I})}))})):null};const g9=({...t})=>{const{theme:e="system"}=z8();return o.jsx(p9,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var y9=e_.useId||(()=>{}),v9=0;function la(t){const[e,r]=p.useState(y9());return Tr(()=>{r(n=>n??String(v9++))},[t]),e?`radix-${e}`:""}const x9=["top","right","bottom","left"],Eo=Math.min,sn=Math.max,Um=Math.round,af=Math.floor,Co=t=>({x:t,y:t}),w9={left:"right",right:"left",bottom:"top",top:"bottom"},b9={start:"end",end:"start"};function iv(t,e,r){return sn(t,Eo(e,r))}function ci(t,e){return typeof t=="function"?t(e):t}function ui(t){return t.split("-")[0]}function bc(t){return t.split("-")[1]}function Yw(t){return t==="x"?"y":"x"}function Kw(t){return t==="y"?"height":"width"}function No(t){return["top","bottom"].includes(ui(t))?"y":"x"}function Jw(t){return Yw(No(t))}function E9(t,e,r){r===void 0&&(r=!1);const n=bc(t),s=Jw(t),i=Kw(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=qm(a)),[a,qm(a)]}function C9(t){const e=qm(t);return[ov(t),e,ov(e)]}function ov(t){return t.replace(/start|end/g,e=>b9[e])}function N9(t,e,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?i:a;default:return[]}}function _9(t,e,r,n){const s=bc(t);let i=N9(ui(t),r==="start",n);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(ov)))),i}function qm(t){return t.replace(/left|right|bottom|top/g,e=>w9[e])}function T9(t){return{top:0,right:0,bottom:0,left:0,...t}}function xI(t){return typeof t!="number"?T9(t):{top:t,right:t,bottom:t,left:t}}function Gm(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function PC(t,e,r){let{reference:n,floating:s}=t;const i=No(e),a=Jw(e),l=Kw(a),c=ui(e),u=i==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let y;switch(c){case"top":y={x:d,y:n.y-s.height};break;case"bottom":y={x:d,y:n.y+n.height};break;case"right":y={x:n.x+n.width,y:f};break;case"left":y={x:n.x-s.width,y:f};break;default:y={x:n.x,y:n.y}}switch(bc(e)){case"start":y[a]-=m*(r&&u?-1:1);break;case"end":y[a]+=m*(r&&u?-1:1);break}return y}const A9=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:a}=r,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=PC(u,n,c),m=n,y={},x=0;for(let g=0;g<l.length;g++){const{name:b,fn:E}=l[g],{x:w,y:C,data:I,reset:j}=await E({x:d,y:f,initialPlacement:n,placement:m,strategy:s,middlewareData:y,rects:u,platform:a,elements:{reference:t,floating:e}});d=w??d,f=C??f,y={...y,[b]:{...y[b],...I}},j&&x<=50&&(x++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:d,y:f}=PC(u,m,c)),g=-1)}return{x:d,y:f,placement:m,strategy:s,middlewareData:y}};async function ud(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:y=0}=ci(e,t),x=xI(y),b=l[m?f==="floating"?"reference":"floating":f],E=Gm(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=f==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},j=Gm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:C,strategy:c}):w);return{top:(E.top-j.top+x.top)/I.y,bottom:(j.bottom-E.bottom+x.bottom)/I.y,left:(E.left-j.left+x.left)/I.x,right:(j.right-E.right+x.right)/I.x}}const S9=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ci(t,e)||{};if(u==null)return{};const f=xI(d),m={x:r,y:n},y=Jw(s),x=Kw(y),g=await a.getDimensions(u),b=y==="y",E=b?"top":"left",w=b?"bottom":"right",C=b?"clientHeight":"clientWidth",I=i.reference[x]+i.reference[y]-m[y]-i.floating[x],j=m[y]-i.reference[y],V=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let R=V?V[C]:0;(!R||!await(a.isElement==null?void 0:a.isElement(V)))&&(R=l.floating[C]||i.floating[x]);const N=I/2-j/2,S=R/2-g[x]/2-1,P=Eo(f[E],S),O=Eo(f[w],S),M=P,k=R-g[x]-O,B=R/2-g[x]/2+N,z=iv(M,B,k),Q=!c.arrow&&bc(s)!=null&&B!==z&&i.reference[x]/2-(B<M?P:O)-g[x]/2<0,Z=Q?B<M?B-M:B-k:0;return{[y]:m[y]+Z,data:{[y]:z,centerOffset:B-z-Z,...Q&&{alignmentOffset:Z}},reset:Q}}}),R9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...b}=ci(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const E=ui(s),w=No(l),C=ui(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(C||!g?[qm(l)]:C9(l)),V=x!=="none";!m&&V&&j.push(..._9(l,g,x,I));const R=[l,...j],N=await ud(e,b),S=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&S.push(N[E]),f){const B=E9(s,a,I);S.push(N[B[0]],N[B[1]])}if(P=[...P,{placement:s,overflows:S}],!S.every(B=>B<=0)){var O,M;const B=(((O=i.flip)==null?void 0:O.index)||0)+1,z=R[B];if(z)return{data:{index:B,overflows:P},reset:{placement:z}};let Q=(M=P.filter(Z=>Z.overflows[0]<=0).sort((Z,U)=>Z.overflows[1]-U.overflows[1])[0])==null?void 0:M.placement;if(!Q)switch(y){case"bestFit":{var k;const Z=(k=P.filter(U=>{if(V){const H=No(U.placement);return H===w||H==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(H=>H>0).reduce((H,se)=>H+se,0)]).sort((U,H)=>U[1]-H[1])[0])==null?void 0:k[0];Z&&(Q=Z);break}case"initialPlacement":Q=l;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function kC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function MC(t){return x9.some(e=>t[e]>=0)}const I9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=ci(t,e);switch(n){case"referenceHidden":{const i=await ud(e,{...s,elementContext:"reference"}),a=kC(i,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:MC(a)}}}case"escaped":{const i=await ud(e,{...s,altBoundary:!0}),a=kC(i,r.floating);return{data:{escapedOffsets:a,escaped:MC(a)}}}default:return{}}}}};async function j9(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=ui(r),l=bc(r),c=No(r)==="y",u=["left","top"].includes(a)?-1:1,d=i&&c?-1:1,f=ci(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(y=l==="end"?x*-1:x),c?{x:y*d,y:m*u}:{x:m*u,y:y*d}}const P9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await j9(e,t);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},k9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:E,y:w}=b;return{x:E,y:w}}},...c}=ci(t,e),u={x:r,y:n},d=await ud(e,c),f=No(ui(s)),m=Yw(f);let y=u[m],x=u[f];if(i){const b=m==="y"?"top":"left",E=m==="y"?"bottom":"right",w=y+d[b],C=y-d[E];y=iv(w,y,C)}if(a){const b=f==="y"?"top":"left",E=f==="y"?"bottom":"right",w=x+d[b],C=x-d[E];x=iv(w,x,C)}const g=l.fn({...e,[m]:y,[f]:x});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:i,[f]:a}}}}}},M9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ci(t,e),d={x:r,y:n},f=No(s),m=Yw(f);let y=d[m],x=d[f];const g=ci(l,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const C=m==="y"?"height":"width",I=i.reference[m]-i.floating[C]+b.mainAxis,j=i.reference[m]+i.reference[C]-b.mainAxis;y<I?y=I:y>j&&(y=j)}if(u){var E,w;const C=m==="y"?"width":"height",I=["top","left"].includes(ui(s)),j=i.reference[f]-i.floating[C]+(I&&((E=a.offset)==null?void 0:E[f])||0)+(I?0:b.crossAxis),V=i.reference[f]+i.reference[C]+(I?0:((w=a.offset)==null?void 0:w[f])||0)-(I?b.crossAxis:0);x<j?x=j:x>V&&(x=V)}return{[m]:y,[f]:x}}}},D9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=ci(t,e),d=await ud(e,u),f=ui(s),m=bc(s),y=No(s)==="y",{width:x,height:g}=i.floating;let b,E;f==="top"||f==="bottom"?(b=f,E=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(E=f,b=m==="end"?"top":"bottom");const w=g-d.top-d.bottom,C=x-d.left-d.right,I=Eo(g-d[b],w),j=Eo(x-d[E],C),V=!e.middlewareData.shift;let R=I,N=j;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(N=C),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(R=w),V&&!m){const P=sn(d.left,0),O=sn(d.right,0),M=sn(d.top,0),k=sn(d.bottom,0);y?N=x-2*(P!==0||O!==0?P+O:sn(d.left,d.right)):R=g-2*(M!==0||k!==0?M+k:sn(d.top,d.bottom))}await c({...e,availableWidth:N,availableHeight:R});const S=await a.getDimensions(l.floating);return x!==S.width||g!==S.height?{reset:{rects:!0}}:{}}}};function Hp(){return typeof window<"u"}function Ec(t){return wI(t)?(t.nodeName||"").toLowerCase():"#document"}function un(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ts(t){var e;return(e=(wI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function wI(t){return Hp()?t instanceof Node||t instanceof un(t).Node:!1}function ts(t){return Hp()?t instanceof Element||t instanceof un(t).Element:!1}function Cs(t){return Hp()?t instanceof HTMLElement||t instanceof un(t).HTMLElement:!1}function DC(t){return!Hp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof un(t).ShadowRoot}function Gd(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=rs(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function O9(t){return["table","td","th"].includes(Ec(t))}function Wp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Xw(t){const e=Zw(),r=ts(t)?rs(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function L9(t){let e=_o(t);for(;Cs(e)&&!nc(e);){if(Xw(e))return e;if(Wp(e))return null;e=_o(e)}return null}function Zw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nc(t){return["html","body","#document"].includes(Ec(t))}function rs(t){return un(t).getComputedStyle(t)}function Qp(t){return ts(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _o(t){if(Ec(t)==="html")return t;const e=t.assignedSlot||t.parentNode||DC(t)&&t.host||Ts(t);return DC(e)?e.host:e}function bI(t){const e=_o(t);return nc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Cs(e)&&Gd(e)?e:bI(e)}function dd(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=bI(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),a=un(s);if(i){const l=av(a);return e.concat(a,a.visualViewport||[],Gd(s)?s:[],l&&r?dd(l):[])}return e.concat(s,dd(s,[],r))}function av(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function EI(t){const e=rs(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Cs(t),i=s?t.offsetWidth:r,a=s?t.offsetHeight:n,l=Um(r)!==i||Um(n)!==a;return l&&(r=i,n=a),{width:r,height:n,$:l}}function eb(t){return ts(t)?t:t.contextElement}function jl(t){const e=eb(t);if(!Cs(e))return Co(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=EI(e);let a=(i?Um(r.width):r.width)/n,l=(i?Um(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const F9=Co(0);function CI(t){const e=un(t);return!Zw()||!e.visualViewport?F9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function V9(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==un(t)?!1:e}function ba(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=eb(t);let a=Co(1);e&&(n?ts(n)&&(a=jl(n)):a=jl(t));const l=V9(i,r,n)?CI(i):Co(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,f=s.height/a.y;if(i){const m=un(i),y=n&&ts(n)?un(n):n;let x=m,g=av(x);for(;g&&n&&y!==x;){const b=jl(g),E=g.getBoundingClientRect(),w=rs(g),C=E.left+(g.clientLeft+parseFloat(w.paddingLeft))*b.x,I=E.top+(g.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=C,u+=I,x=un(g),g=av(x)}}return Gm({width:d,height:f,x:c,y:u})}function B9(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",a=Ts(n),l=e?Wp(e.floating):!1;if(n===a||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Co(1);const d=Co(0),f=Cs(n);if((f||!f&&!i)&&((Ec(n)!=="body"||Gd(a))&&(c=Qp(n)),Cs(n))){const m=ba(n);u=jl(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x,y:r.y*u.y-c.scrollTop*u.y+d.y}}function U9(t){return Array.from(t.getClientRects())}function lv(t,e){const r=Qp(t).scrollLeft;return e?e.left+r:ba(Ts(t)).left+r}function q9(t){const e=Ts(t),r=Qp(t),n=t.ownerDocument.body,s=sn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=sn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+lv(t);const l=-r.scrollTop;return rs(n).direction==="rtl"&&(a+=sn(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:a,y:l}}function G9(t,e){const r=un(t),n=Ts(t),s=r.visualViewport;let i=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Zw();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function $9(t,e){const r=ba(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=Cs(t)?jl(t):Co(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:a,height:l,x:c,y:u}}function OC(t,e,r){let n;if(e==="viewport")n=G9(t,r);else if(e==="document")n=q9(Ts(t));else if(ts(e))n=$9(e,r);else{const s=CI(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return Gm(n)}function NI(t,e){const r=_o(t);return r===e||!ts(r)||nc(r)?!1:rs(r).position==="fixed"||NI(r,e)}function z9(t,e){const r=e.get(t);if(r)return r;let n=dd(t,[],!1).filter(l=>ts(l)&&Ec(l)!=="body"),s=null;const i=rs(t).position==="fixed";let a=i?_o(t):t;for(;ts(a)&&!nc(a);){const l=rs(a),c=Xw(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Gd(a)&&!c&&NI(t,a))?n=n.filter(d=>d!==a):s=l,a=_o(a)}return e.set(t,n),n}function H9(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const a=[...r==="clippingAncestors"?Wp(e)?[]:z9(e,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,d)=>{const f=OC(e,d,s);return u.top=sn(f.top,u.top),u.right=Eo(f.right,u.right),u.bottom=Eo(f.bottom,u.bottom),u.left=sn(f.left,u.left),u},OC(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function W9(t){const{width:e,height:r}=EI(t);return{width:e,height:r}}function Q9(t,e,r){const n=Cs(e),s=Ts(e),i=r==="fixed",a=ba(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Co(0);if(n||!n&&!i)if((Ec(e)!=="body"||Gd(s))&&(l=Qp(e)),n){const y=ba(e,!0,i,e);c.x=y.x+e.clientLeft,c.y=y.y+e.clientTop}else s&&(c.x=lv(s));let u=0,d=0;if(s&&!n&&!i){const y=s.getBoundingClientRect();d=y.top+l.scrollTop,u=y.left+l.scrollLeft-lv(s,y)}const f=a.left+l.scrollLeft-c.x-u,m=a.top+l.scrollTop-c.y-d;return{x:f,y:m,width:a.width,height:a.height}}function v0(t){return rs(t).position==="static"}function LC(t,e){if(!Cs(t)||rs(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Ts(t)===r&&(r=r.ownerDocument.body),r}function _I(t,e){const r=un(t);if(Wp(t))return r;if(!Cs(t)){let s=_o(t);for(;s&&!nc(s);){if(ts(s)&&!v0(s))return s;s=_o(s)}return r}let n=LC(t,e);for(;n&&O9(n)&&v0(n);)n=LC(n,e);return n&&nc(n)&&v0(n)&&!Xw(n)?r:n||L9(t)||r}const Y9=async function(t){const e=this.getOffsetParent||_I,r=this.getDimensions,n=await r(t.floating);return{reference:Q9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function K9(t){return rs(t).direction==="rtl"}const J9={convertOffsetParentRelativeRectToViewportRelativeRect:B9,getDocumentElement:Ts,getClippingRect:H9,getOffsetParent:_I,getElementRects:Y9,getClientRects:U9,getDimensions:W9,getScale:jl,isElement:ts,isRTL:K9};function X9(t,e){let r=null,n;const s=Ts(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:u,top:d,width:f,height:m}=t.getBoundingClientRect();if(l||e(),!f||!m)return;const y=af(d),x=af(s.clientWidth-(u+f)),g=af(s.clientHeight-(d+m)),b=af(u),w={rootMargin:-y+"px "+-x+"px "+-g+"px "+-b+"px",threshold:sn(0,Eo(1,c))||1};let C=!0;function I(j){const V=j[0].intersectionRatio;if(V!==c){if(!C)return a();V?a(!1,V):n=setTimeout(()=>{a(!1,1e-7)},1e3)}C=!1}try{r=new IntersectionObserver(I,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(I,w)}r.observe(t)}return a(!0),i}function Z9(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=eb(t),d=s||i?[...u?dd(u):[],...dd(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",r,{passive:!0}),i&&E.addEventListener("resize",r)});const f=u&&l?X9(u,r):null;let m=-1,y=null;a&&(y=new ResizeObserver(E=>{let[w]=E;w&&w.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(e)})),r()}),u&&!c&&y.observe(u),y.observe(e));let x,g=c?ba(t):null;c&&b();function b(){const E=ba(t);g&&(E.x!==g.x||E.y!==g.y||E.width!==g.width||E.height!==g.height)&&r(),g=E,x=requestAnimationFrame(b)}return r(),()=>{var E;d.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),f==null||f(),(E=y)==null||E.disconnect(),y=null,c&&cancelAnimationFrame(x)}}const eU=P9,tU=k9,rU=R9,nU=D9,sU=I9,FC=S9,iU=M9,oU=(t,e,r)=>{const n=new Map,s={platform:J9,...r},i={...s.platform,_c:n};return A9(t,e,{...s,platform:i})};var Vf=typeof document<"u"?p.useLayoutEffect:p.useEffect;function $m(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!$m(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!$m(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function TI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function VC(t,e){const r=TI(t);return Math.round(e*r)/r}function x0(t){const e=p.useRef(t);return Vf(()=>{e.current=t}),e}function aU(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=p.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=p.useState(n);$m(m,n)||y(n);const[x,g]=p.useState(null),[b,E]=p.useState(null),w=p.useCallback(U=>{U!==V.current&&(V.current=U,g(U))},[]),C=p.useCallback(U=>{U!==R.current&&(R.current=U,E(U))},[]),I=i||x,j=a||b,V=p.useRef(null),R=p.useRef(null),N=p.useRef(d),S=c!=null,P=x0(c),O=x0(s),M=x0(u),k=p.useCallback(()=>{if(!V.current||!R.current)return;const U={placement:e,strategy:r,middleware:m};O.current&&(U.platform=O.current),oU(V.current,R.current,U).then(H=>{const se={...H,isPositioned:M.current!==!1};B.current&&!$m(N.current,se)&&(N.current=se,Ta.flushSync(()=>{f(se)}))})},[m,e,r,O,M]);Vf(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[u]);const B=p.useRef(!1);Vf(()=>(B.current=!0,()=>{B.current=!1}),[]),Vf(()=>{if(I&&(V.current=I),j&&(R.current=j),I&&j){if(P.current)return P.current(I,j,k);k()}},[I,j,k,P,S]);const z=p.useMemo(()=>({reference:V,floating:R,setReference:w,setFloating:C}),[w,C]),Q=p.useMemo(()=>({reference:I,floating:j}),[I,j]),Z=p.useMemo(()=>{const U={position:r,left:0,top:0};if(!Q.floating)return U;const H=VC(Q.floating,d.x),se=VC(Q.floating,d.y);return l?{...U,transform:"translate("+H+"px, "+se+"px)",...TI(Q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:se}},[r,l,Q.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:k,refs:z,elements:Q,floatingStyles:Z}),[d,k,z,Q,Z])}const lU=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?FC({element:n.current,padding:s}).fn(r):{}:n?FC({element:n,padding:s}).fn(r):{}}}},cU=(t,e)=>({...eU(t),options:[t,e]}),uU=(t,e)=>({...tU(t),options:[t,e]}),dU=(t,e)=>({...iU(t),options:[t,e]}),hU=(t,e)=>({...rU(t),options:[t,e]}),fU=(t,e)=>({...nU(t),options:[t,e]}),mU=(t,e)=>({...sU(t),options:[t,e]}),pU=(t,e)=>({...lU(t),options:[t,e]});var gU="Arrow",AI=p.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return o.jsx(He.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});AI.displayName=gU;var yU=AI;function vU(t,e=[]){let r=[];function n(i,a){const l=p.createContext(a),c=r.length;r=[...r,a];function u(f){const{scope:m,children:y,...x}=f,g=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>x,Object.values(x));return o.jsx(g.Provider,{value:b,children:y})}function d(f,m){const y=(m==null?void 0:m[t][c])||l,x=p.useContext(y);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const s=()=>{const i=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,xU(s,...e)]}function xU(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}function wU(t){const[e,r]=p.useState(void 0);return Tr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;r({width:a,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var tb="Popper",[SI,Cc]=vU(tb),[bU,RI]=SI(tb),II=t=>{const{__scopePopper:e,children:r}=t,[n,s]=p.useState(null);return o.jsx(bU,{scope:e,anchor:n,onAnchorChange:s,children:r})};II.displayName=tb;var jI="PopperAnchor",PI=p.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=RI(jI,r),a=p.useRef(null),l=dt(e,a);return p.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx(He.div,{...s,ref:l})});PI.displayName=jI;var rb="PopperContent",[EU,CU]=SI(rb),kI=p.forwardRef((t,e)=>{var oe,le,G,de,ge,Ee;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:x,...g}=t,b=RI(rb,r),[E,w]=p.useState(null),C=dt(e,fe=>w(fe)),[I,j]=p.useState(null),V=wU(I),R=(V==null?void 0:V.width)??0,N=(V==null?void 0:V.height)??0,S=n+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],M=O.length>0,k={padding:P,boundary:O.filter(_U),altBoundary:M},{refs:B,floatingStyles:z,placement:Q,isPositioned:Z,middlewareData:U}=aU({strategy:"fixed",placement:S,whileElementsMounted:(...fe)=>Z9(...fe,{animationFrame:y==="always"}),elements:{reference:b.anchor},middleware:[cU({mainAxis:s+N,alignmentAxis:a}),c&&uU({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?dU():void 0,...k}),c&&hU({...k}),fU({...k,apply:({elements:fe,rects:ve,availableWidth:mt,availableHeight:Ue})=>{const{width:lt,height:Ge}=ve.reference,Et=fe.floating.style;Et.setProperty("--radix-popper-available-width",`${mt}px`),Et.setProperty("--radix-popper-available-height",`${Ue}px`),Et.setProperty("--radix-popper-anchor-width",`${lt}px`),Et.setProperty("--radix-popper-anchor-height",`${Ge}px`)}}),I&&pU({element:I,padding:l}),TU({arrowWidth:R,arrowHeight:N}),m&&mU({strategy:"referenceHidden",...k})]}),[H,se]=OI(Q),re=_r(x);Tr(()=>{Z&&(re==null||re())},[Z,re]);const ce=(oe=U.arrow)==null?void 0:oe.x,he=(le=U.arrow)==null?void 0:le.y,Te=((G=U.arrow)==null?void 0:G.centerOffset)!==0,[Me,Ce]=p.useState();return Tr(()=>{E&&Ce(window.getComputedStyle(E).zIndex)},[E]),o.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:Z?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(de=U.transformOrigin)==null?void 0:de.x,(ge=U.transformOrigin)==null?void 0:ge.y].join(" "),...((Ee=U.hide)==null?void 0:Ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(EU,{scope:r,placedSide:H,onArrowChange:j,arrowX:ce,arrowY:he,shouldHideArrow:Te,children:o.jsx(He.div,{"data-side":H,"data-align":se,...g,ref:C,style:{...g.style,animation:Z?void 0:"none"}})})})});kI.displayName=rb;var MI="PopperArrow",NU={top:"bottom",right:"left",bottom:"top",left:"right"},DI=p.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=CU(MI,n),a=NU[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(yU,{...s,ref:r,style:{...s.style,display:"block"}})})});DI.displayName=MI;function _U(t){return t!==null}var TU=t=>({name:"transformOrigin",options:t,fn(e){var b,E,w;const{placement:r,rects:n,middlewareData:s}=e,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,d]=OI(r),f={start:"0%",center:"50%",end:"100%"}[d],m=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,y=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let x="",g="";return u==="bottom"?(x=a?f:`${m}px`,g=`${-c}px`):u==="top"?(x=a?f:`${m}px`,g=`${n.floating.height+c}px`):u==="right"?(x=`${-c}px`,g=a?f:`${y}px`):u==="left"&&(x=`${n.floating.width+c}px`,g=a?f:`${y}px`),{data:{x,y:g}}}});function OI(t){const[e,r="center"]=t.split("-");return[e,r]}var LI=II,nb=PI,sb=kI,ib=DI,[Yp,fQ]=Td("Tooltip",[Cc]),ob=Cc(),FI="TooltipProvider",AU=700,BC="tooltip.open",[SU,VI]=Yp(FI),BI=t=>{const{__scopeTooltip:e,delayDuration:r=AU,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,[a,l]=p.useState(!0),c=p.useRef(!1),u=p.useRef(0);return p.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),o.jsx(SU,{scope:e,isOpenDelayed:a,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:p.useCallback(d=>{c.current=d},[]),disableHoverableContent:s,children:i})};BI.displayName=FI;var UI="Tooltip",[mQ,Kp]=Yp(UI),cv="TooltipTrigger",RU=p.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Kp(cv,r),i=VI(cv,r),a=ob(r),l=p.useRef(null),c=dt(e,l,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(nb,{asChild:!0,...a,children:o.jsx(He.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:xe(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:xe(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:xe(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:xe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:xe(t.onBlur,s.onClose),onClick:xe(t.onClick,s.onClose)})})});RU.displayName=cv;var IU="TooltipPortal",[pQ,jU]=Yp(IU,{forceMount:void 0}),sc="TooltipContent",qI=p.forwardRef((t,e)=>{const r=jU(sc,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,a=Kp(sc,t.__scopeTooltip);return o.jsx(Aa,{present:n||a.open,children:a.disableHoverableContent?o.jsx(GI,{side:s,...i,ref:e}):o.jsx(PU,{side:s,...i,ref:e})})}),PU=p.forwardRef((t,e)=>{const r=Kp(sc,t.__scopeTooltip),n=VI(sc,t.__scopeTooltip),s=p.useRef(null),i=dt(e,s),[a,l]=p.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:f}=n,m=p.useCallback(()=>{l(null),f(!1)},[f]),y=p.useCallback((x,g)=>{const b=x.currentTarget,E={x:x.clientX,y:x.clientY},w=OU(E,b.getBoundingClientRect()),C=LU(E,w),I=FU(g.getBoundingClientRect()),j=BU([...C,...I]);l(j),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&d){const x=b=>y(b,d),g=b=>y(b,c);return c.addEventListener("pointerleave",x),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",g)}}},[c,d,y,m]),p.useEffect(()=>{if(a){const x=g=>{const b=g.target,E={x:g.clientX,y:g.clientY},w=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),C=!VU(E,a);w?m():C&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,d,a,u,m]),o.jsx(GI,{...t,ref:i})}),[kU,MU]=Yp(UI,{isInside:!1}),GI=p.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=Kp(sc,r),u=ob(r),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(BC,d),()=>document.removeEventListener(BC,d)),[d]),p.useEffect(()=>{if(c.trigger){const f=m=>{const y=m.target;y!=null&&y.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),o.jsx(Ad,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:o.jsxs(sb,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(iA,{children:n}),o.jsx(kU,{scope:r,isInside:!0,children:o.jsx(a3,{id:c.contentId,role:"tooltip",children:s||n})})]})})});qI.displayName=sc;var $I="TooltipArrow",DU=p.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=ob(r);return MU($I,r).isInside?null:o.jsx(ib,{...s,...n,ref:e})});DU.displayName=$I;function OU(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function LU(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function FU(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function VU(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,d=e[a].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function BU(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),UU(e)}function UU(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],a=r[r.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var qU=BI,zI=qI;const GU=qU,$U=p.forwardRef(({className:t,sideOffset:e=4,...r},n)=>o.jsx(zI,{ref:n,sideOffset:e,className:at("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));$U.displayName=zI.displayName;var Jp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Xp=typeof window>"u"||"Deno"in globalThis;function Gn(){}function zU(t,e){return typeof t=="function"?t(e):t}function HU(t){return typeof t=="number"&&t>=0&&t!==1/0}function WU(t,e){return Math.max(t+(e||0)-Date.now(),0)}function UC(t,e){return typeof t=="function"?t(e):t}function QU(t,e){return typeof t=="function"?t(e):t}function qC(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(n){if(e.queryHash!==ab(a,e.options))return!1}else if(!fd(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function GC(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(hd(e.options.mutationKey)!==hd(i))return!1}else if(!fd(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function ab(t,e){return((e==null?void 0:e.queryKeyHashFn)||hd)(t)}function hd(t){return JSON.stringify(t,(e,r)=>uv(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function fd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!fd(t[r],e[r])):!1}function HI(t,e){if(t===e)return t;const r=$C(t)&&$C(e);if(r||uv(t)&&uv(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),a=i.length,l=r?[]:{};let c=0;for(let u=0;u<a;u++){const d=r?u:i[u];(!r&&n.includes(d)||r)&&t[d]===void 0&&e[d]===void 0?(l[d]=void 0,c++):(l[d]=HI(t[d],e[d]),l[d]===t[d]&&t[d]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function $C(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function uv(t){if(!zC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!zC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function zC(t){return Object.prototype.toString.call(t)==="[object Object]"}function YU(t){return new Promise(e=>{setTimeout(e,t)})}function KU(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?HI(t,e):e}function JU(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function XU(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var lb=Symbol();function WI(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===lb?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ea,Ui,Ml,DN,ZU=(DN=class extends Jp{constructor(){super();st(this,ea);st(this,Ui);st(this,Ml);Fe(this,Ml,e=>{if(!Xp&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ie(this,Ui)||this.setEventListener(ie(this,Ml))}onUnsubscribe(){var e;this.hasListeners()||((e=ie(this,Ui))==null||e.call(this),Fe(this,Ui,void 0))}setEventListener(e){var r;Fe(this,Ml,e),(r=ie(this,Ui))==null||r.call(this),Fe(this,Ui,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){ie(this,ea)!==e&&(Fe(this,ea,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof ie(this,ea)=="boolean"?ie(this,ea):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ea=new WeakMap,Ui=new WeakMap,Ml=new WeakMap,DN),QI=new ZU,Dl,qi,Ol,ON,e7=(ON=class extends Jp{constructor(){super();st(this,Dl,!0);st(this,qi);st(this,Ol);Fe(this,Ol,e=>{if(!Xp&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ie(this,qi)||this.setEventListener(ie(this,Ol))}onUnsubscribe(){var e;this.hasListeners()||((e=ie(this,qi))==null||e.call(this),Fe(this,qi,void 0))}setEventListener(e){var r;Fe(this,Ol,e),(r=ie(this,qi))==null||r.call(this),Fe(this,qi,e(this.setOnline.bind(this)))}setOnline(e){ie(this,Dl)!==e&&(Fe(this,Dl,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return ie(this,Dl)}},Dl=new WeakMap,qi=new WeakMap,Ol=new WeakMap,ON),zm=new e7;function t7(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function r7(t){return Math.min(1e3*2**t,3e4)}function YI(t){return(t??"online")==="online"?zm.isOnline():!0}var KI=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function w0(t){return t instanceof KI}function JI(t){let e=!1,r=0,n=!1,s;const i=t7(),a=g=>{var b;n||(m(new KI(g)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>QI.isFocused()&&(t.networkMode==="always"||zm.isOnline())&&t.canRun(),d=()=>YI(t.networkMode)&&t.canRun(),f=g=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,g),s==null||s(),i.resolve(g))},m=g=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,g),s==null||s(),i.reject(g))},y=()=>new Promise(g=>{var b;s=E=>{(n||u())&&g(E)},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;s=void 0,n||(g=t.onContinue)==null||g.call(t)}),x=()=>{if(n)return;let g;const b=r===0?t.initialPromise:void 0;try{g=b??t.fn()}catch(E){g=Promise.reject(E)}Promise.resolve(g).then(f).catch(E=>{var V;if(n)return;const w=t.retry??(Xp?0:3),C=t.retryDelay??r7,I=typeof C=="function"?C(r,E):C,j=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,E);if(e||!j){m(E);return}r++,(V=t.onFail)==null||V.call(t,r,E),YU(I).then(()=>u()?void 0:y()).then(()=>{e?m(E):x()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():y().then(x),i)}}function n7(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{r(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Dr=n7(),ta,LN,XI=(LN=class{constructor(){st(this,ta)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HU(this.gcTime)&&Fe(this,ta,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Xp?1/0:5*60*1e3))}clearGcTimeout(){ie(this,ta)&&(clearTimeout(ie(this,ta)),Fe(this,ta,void 0))}},ta=new WeakMap,LN),Ll,Fl,xn,wr,vd,ra,$n,Gs,FN,s7=(FN=class extends XI{constructor(e){super();st(this,$n);st(this,Ll);st(this,Fl);st(this,xn);st(this,wr);st(this,vd);st(this,ra);Fe(this,ra,!1),Fe(this,vd,e.defaultOptions),this.setOptions(e.options),this.observers=[],Fe(this,xn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Fe(this,Ll,o7(this.options)),this.state=e.state??ie(this,Ll),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ie(this,wr))==null?void 0:e.promise}setOptions(e){this.options={...ie(this,vd),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ie(this,xn).remove(this)}setData(e,r){const n=KU(this.state.data,e,this.options);return gr(this,$n,Gs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){gr(this,$n,Gs).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=ie(this,wr))==null?void 0:n.promise;return(s=ie(this,wr))==null||s.cancel(e),r?r.then(Gn).catch(Gn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ie(this,Ll))}isActive(){return this.observers.some(e=>QU(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===lb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!WU(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=ie(this,wr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=ie(this,wr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ie(this,xn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(ie(this,wr)&&(ie(this,ra)?ie(this,wr).cancel({revert:!0}):ie(this,wr).cancelRetry()),this.scheduleGc()),ie(this,xn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||gr(this,$n,Gs).call(this,{type:"invalidate"})}fetch(e,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ie(this,wr))return ie(this,wr).continueRetry(),ie(this,wr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Fe(this,ra,!0),n.signal)})},i=()=>{const f=WI(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return s(m),Fe(this,ra,!1),this.options.persister?this.options.persister(f,m,this):f(m)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),Fe(this,Fl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&gr(this,$n,Gs).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var m,y,x,g;w0(f)&&f.silent||gr(this,$n,Gs).call(this,{type:"error",error:f}),w0(f)||((y=(m=ie(this,xn).config).onError)==null||y.call(m,f,this),(g=(x=ie(this,xn).config).onSettled)==null||g.call(x,this.state.data,f,this)),this.scheduleGc()};return Fe(this,wr,JI({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,y,x,g;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(b){l(b);return}(y=(m=ie(this,xn).config).onSuccess)==null||y.call(m,f,this),(g=(x=ie(this,xn).config).onSettled)==null||g.call(x,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{gr(this,$n,Gs).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{gr(this,$n,Gs).call(this,{type:"pause"})},onContinue:()=>{gr(this,$n,Gs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),ie(this,wr).start()}},Ll=new WeakMap,Fl=new WeakMap,xn=new WeakMap,wr=new WeakMap,vd=new WeakMap,ra=new WeakMap,$n=new WeakSet,Gs=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...i7(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return w0(s)&&s.revert&&ie(this,Fl)?{...ie(this,Fl),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Dr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ie(this,xn).notify({query:this,type:"updated",action:e})})},FN);function i7(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:YI(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function o7(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var as,VN,a7=(VN=class extends Jp{constructor(e={}){super();st(this,as);this.config=e,Fe(this,as,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??ab(s,r);let a=this.get(i);return a||(a=new s7({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){ie(this,as).has(e.queryHash)||(ie(this,as).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=ie(this,as).get(e.queryHash);r&&(e.destroy(),r===e&&ie(this,as).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Dr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ie(this,as).get(e)}getAll(){return[...ie(this,as).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>qC(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>qC(e,n)):r}notify(e){Dr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Dr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Dr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},as=new WeakMap,VN),ls,kr,na,cs,Ii,BN,l7=(BN=class extends XI{constructor(e){super();st(this,cs);st(this,ls);st(this,kr);st(this,na);this.mutationId=e.mutationId,Fe(this,kr,e.mutationCache),Fe(this,ls,[]),this.state=e.state||c7(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ie(this,ls).includes(e)||(ie(this,ls).push(e),this.clearGcTimeout(),ie(this,kr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Fe(this,ls,ie(this,ls).filter(r=>r!==e)),this.scheduleGc(),ie(this,kr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ie(this,ls).length||(this.state.status==="pending"?this.scheduleGc():ie(this,kr).remove(this))}continue(){var e;return((e=ie(this,na))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,a,l,c,u,d,f,m,y,x,g,b,E,w,C,I,j,V,R;Fe(this,na,JI({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,S)=>{gr(this,cs,Ii).call(this,{type:"failed",failureCount:N,error:S})},onPause:()=>{gr(this,cs,Ii).call(this,{type:"pause"})},onContinue:()=>{gr(this,cs,Ii).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ie(this,kr).canRun(this)}));const r=this.state.status==="pending",n=!ie(this,na).canStart();try{if(!r){gr(this,cs,Ii).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(s=ie(this,kr).config).onMutate)==null?void 0:i.call(s,e,this));const S=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));S!==this.state.context&&gr(this,cs,Ii).call(this,{type:"pending",context:S,variables:e,isPaused:n})}const N=await ie(this,na).start();return await((u=(c=ie(this,kr).config).onSuccess)==null?void 0:u.call(c,N,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,N,e,this.state.context)),await((y=(m=ie(this,kr).config).onSettled)==null?void 0:y.call(m,N,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,N,null,e,this.state.context)),gr(this,cs,Ii).call(this,{type:"success",data:N}),N}catch(N){try{throw await((E=(b=ie(this,kr).config).onError)==null?void 0:E.call(b,N,e,this.state.context,this)),await((C=(w=this.options).onError)==null?void 0:C.call(w,N,e,this.state.context)),await((j=(I=ie(this,kr).config).onSettled)==null?void 0:j.call(I,void 0,N,this.state.variables,this.state.context,this)),await((R=(V=this.options).onSettled)==null?void 0:R.call(V,void 0,N,e,this.state.context)),N}finally{gr(this,cs,Ii).call(this,{type:"error",error:N})}}finally{ie(this,kr).runNext(this)}}},ls=new WeakMap,kr=new WeakMap,na=new WeakMap,cs=new WeakSet,Ii=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Dr.batch(()=>{ie(this,ls).forEach(n=>{n.onMutationUpdate(e)}),ie(this,kr).notify({mutation:this,type:"updated",action:e})})},BN);function c7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var tn,xd,UN,u7=(UN=class extends Jp{constructor(e={}){super();st(this,tn);st(this,xd);this.config=e,Fe(this,tn,new Map),Fe(this,xd,Date.now())}build(e,r,n){const s=new l7({mutationCache:this,mutationId:++jh(this,xd)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){const r=lf(e),n=ie(this,tn).get(r)??[];n.push(e),ie(this,tn).set(r,n),this.notify({type:"added",mutation:e})}remove(e){var n;const r=lf(e);if(ie(this,tn).has(r)){const s=(n=ie(this,tn).get(r))==null?void 0:n.filter(i=>i!==e);s&&(s.length===0?ie(this,tn).delete(r):ie(this,tn).set(r,s))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const r=(n=ie(this,tn).get(lf(e)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===e}runNext(e){var n;const r=(n=ie(this,tn).get(lf(e)))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Dr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ie(this,tn).values()].flat()}find(e){const r={exact:!0,...e};return this.getAll().find(n=>GC(r,n))}findAll(e={}){return this.getAll().filter(r=>GC(e,r))}notify(e){Dr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Dr.batch(()=>Promise.all(e.map(r=>r.continue().catch(Gn))))}},tn=new WeakMap,xd=new WeakMap,UN);function lf(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function HC(t){return{onFetch:(e,r)=>{var d,f,m,y,x;const n=e.options,s=(m=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],a=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const b=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},E=WI(e.options,e.fetchOptions),w=async(C,I,j)=>{if(g)return Promise.reject();if(I==null&&C.pages.length)return Promise.resolve(C);const V={queryKey:e.queryKey,pageParam:I,direction:j?"backward":"forward",meta:e.options.meta};b(V);const R=await E(V),{maxPages:N}=e.options,S=j?XU:JU;return{pages:S(C.pages,R,N),pageParams:S(C.pageParams,I,N)}};if(s&&i.length){const C=s==="backward",I=C?d7:WC,j={pages:i,pageParams:a},V=I(n,j);l=await w(j,V,C)}else{const C=t??i.length;do{const I=c===0?a[0]??n.initialPageParam:WC(n,l);if(c>0&&I==null)break;l=await w(l,I),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function WC(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function d7(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Mt,Gi,$i,Vl,Bl,zi,Ul,ql,qN,h7=(qN=class{constructor(t={}){st(this,Mt);st(this,Gi);st(this,$i);st(this,Vl);st(this,Bl);st(this,zi);st(this,Ul);st(this,ql);Fe(this,Mt,t.queryCache||new a7),Fe(this,Gi,t.mutationCache||new u7),Fe(this,$i,t.defaultOptions||{}),Fe(this,Vl,new Map),Fe(this,Bl,new Map),Fe(this,zi,0)}mount(){jh(this,zi)._++,ie(this,zi)===1&&(Fe(this,Ul,QI.subscribe(async t=>{t&&(await this.resumePausedMutations(),ie(this,Mt).onFocus())})),Fe(this,ql,zm.subscribe(async t=>{t&&(await this.resumePausedMutations(),ie(this,Mt).onOnline())})))}unmount(){var t,e;jh(this,zi)._--,ie(this,zi)===0&&((t=ie(this,Ul))==null||t.call(this),Fe(this,Ul,void 0),(e=ie(this,ql))==null||e.call(this),Fe(this,ql,void 0))}isFetching(t){return ie(this,Mt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ie(this,Gi).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=ie(this,Mt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=ie(this,Mt).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(UC(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return ie(this,Mt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=ie(this,Mt).get(n.queryHash),i=s==null?void 0:s.state.data,a=zU(e,i);if(a!==void 0)return ie(this,Mt).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return Dr.batch(()=>ie(this,Mt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=ie(this,Mt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=ie(this,Mt);Dr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=ie(this,Mt),n={type:"active",...t};return Dr.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Dr.batch(()=>ie(this,Mt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Gn).catch(Gn)}invalidateQueries(t={},e={}){return Dr.batch(()=>{if(ie(this,Mt).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Dr.batch(()=>ie(this,Mt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Gn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Gn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=ie(this,Mt).build(this,e);return r.isStaleByTime(UC(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Gn).catch(Gn)}fetchInfiniteQuery(t){return t.behavior=HC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Gn).catch(Gn)}ensureInfiniteQueryData(t){return t.behavior=HC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zm.isOnline()?ie(this,Gi).resumePausedMutations():Promise.resolve()}getQueryCache(){return ie(this,Mt)}getMutationCache(){return ie(this,Gi)}getDefaultOptions(){return ie(this,$i)}setDefaultOptions(t){Fe(this,$i,t)}setQueryDefaults(t,e){ie(this,Vl).set(hd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ie(this,Vl).values()];let r={};return e.forEach(n=>{fd(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){ie(this,Bl).set(hd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ie(this,Bl).values()];let r={};return e.forEach(n=>{fd(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ie(this,$i).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ab(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===lb&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ie(this,$i).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ie(this,Mt).clear(),ie(this,Gi).clear()}},Mt=new WeakMap,Gi=new WeakMap,$i=new WeakMap,Vl=new WeakMap,Bl=new WeakMap,zi=new WeakMap,Ul=new WeakMap,ql=new WeakMap,qN),f7=p.createContext(void 0),m7=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(f7.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function md(){return md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},md.apply(this,arguments)}var Yi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yi||(Yi={}));const QC="popstate";function p7(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:l}=n.location;return dv("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Hm(s)}return y7(e,r,null,t)}function Vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ZI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g7(){return Math.random().toString(36).substr(2,8)}function YC(t,e){return{usr:t.state,key:t.key,idx:e}}function dv(t,e,r,n){return r===void 0&&(r=null),md({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Nc(e):e,{state:r,key:e&&e.key||n||g7()})}function Hm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Nc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function y7(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=Yi.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(md({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=Yi.Pop;let b=d(),E=b==null?null:b-u;u=b,c&&c({action:l,location:g.location,delta:E})}function m(b,E){l=Yi.Push;let w=dv(g.location,b,E);u=d()+1;let C=YC(w,u),I=g.createHref(w);try{a.pushState(C,"",I)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(I)}i&&c&&c({action:l,location:g.location,delta:1})}function y(b,E){l=Yi.Replace;let w=dv(g.location,b,E);u=d();let C=YC(w,u),I=g.createHref(w);a.replaceState(C,"",I),i&&c&&c({action:l,location:g.location,delta:0})}function x(b){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:Hm(b);return w=w.replace(/ $/,"%20"),Vt(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let g={get action(){return l},get location(){return t(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(QC,f),c=b,()=>{s.removeEventListener(QC,f),c=null}},createHref(b){return e(s,b)},createURL:x,encodeLocation(b){let E=x(b);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:y,go(b){return a.go(b)}};return g}var KC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(KC||(KC={}));function v7(t,e,r){return r===void 0&&(r="/"),x7(t,e,r,!1)}function x7(t,e,r,n){let s=typeof e=="string"?Nc(e):e,i=cb(s.pathname||"/",r);if(i==null)return null;let a=e2(t);w7(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=j7(i);l=R7(a[c],u,n)}return l}function e2(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Vt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=co([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Vt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),e2(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:A7(u,i.index),routesMeta:d})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of t2(i.path))s(i,a,c)}),e}function t2(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=t2(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function w7(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:S7(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const b7=/^:[\w-]+$/,E7=3,C7=2,N7=1,_7=10,T7=-2,JC=t=>t==="*";function A7(t,e){let r=t.split("/"),n=r.length;return r.some(JC)&&(n+=T7),e&&(n+=C7),r.filter(s=>!JC(s)).reduce((s,i)=>s+(b7.test(i)?E7:i===""?N7:_7),n)}function S7(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function R7(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=XC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=XC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:co([i,f.pathname]),pathnameBase:D7(co([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=co([i,f.pathnameBase]))}return a}function XC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=I7(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let g=l[f]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[f];return y&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function I7(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),ZI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function j7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ZI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function P7(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Nc(t):t;return{pathname:r?r.startsWith("/")?r:k7(r,e):e,search:O7(n),hash:L7(s)}}function k7(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function b0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function M7(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ub(t,e){let r=M7(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function db(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Nc(t):(s=md({},t),Vt(!s.pathname||!s.pathname.includes("?"),b0("?","pathname","search",s)),Vt(!s.pathname||!s.pathname.includes("#"),b0("#","pathname","hash",s)),Vt(!s.search||!s.search.includes("#"),b0("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=P7(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const co=t=>t.join("/").replace(/\/\/+/g,"/"),D7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),O7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,L7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function F7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const r2=["post","put","patch","delete"];new Set(r2);const V7=["get",...r2];new Set(V7);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pd.apply(this,arguments)}const hb=p.createContext(null),B7=p.createContext(null),Po=p.createContext(null),Zp=p.createContext(null),ko=p.createContext({outlet:null,matches:[],isDataRoute:!1}),n2=p.createContext(null);function U7(t,e){let{relative:r}=e===void 0?{}:e;_c()||Vt(!1);let{basename:n,navigator:s}=p.useContext(Po),{hash:i,pathname:a,search:l}=i2(t,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:co([n,a])),s.createHref({pathname:c,search:l,hash:i})}function _c(){return p.useContext(Zp)!=null}function As(){return _c()||Vt(!1),p.useContext(Zp).location}function s2(t){p.useContext(Po).static||p.useLayoutEffect(t)}function Kr(){let{isDataRoute:t}=p.useContext(ko);return t?eq():q7()}function q7(){_c()||Vt(!1);let t=p.useContext(hb),{basename:e,future:r,navigator:n}=p.useContext(Po),{matches:s}=p.useContext(ko),{pathname:i}=As(),a=JSON.stringify(ub(s,r.v7_relativeSplatPath)),l=p.useRef(!1);return s2(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=db(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:co([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,a,i,t])}function i2(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=p.useContext(Po),{matches:s}=p.useContext(ko),{pathname:i}=As(),a=JSON.stringify(ub(s,n.v7_relativeSplatPath));return p.useMemo(()=>db(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function G7(t,e){return $7(t,e)}function $7(t,e,r,n){_c()||Vt(!1);let{navigator:s}=p.useContext(Po),{matches:i}=p.useContext(ko),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=As(),d;if(e){var f;let b=typeof e=="string"?Nc(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Vt(!1),d=b}else d=u;let m=d.pathname||"/",y=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=v7(t,{pathname:y}),g=Y7(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:co([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:co([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return e&&g?p.createElement(Zp.Provider,{value:{location:pd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Yi.Pop}},g):g}function z7(){let t=Z7(),e=F7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),r?p.createElement("pre",{style:s},r):null,null)}const H7=p.createElement(z7,null);class W7 extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?p.createElement(ko.Provider,{value:this.props.routeContext},p.createElement(n2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Q7(t){let{routeContext:e,match:r,children:n}=t,s=p.useContext(hb);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(ko.Provider,{value:e},n)}function Y7(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Vt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:y}=r,x=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,m)=>{let y,x=!1,g=null,b=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||H7,c&&(u<0&&m===0?(x=!0,b=null):u===m&&(x=!0,b=f.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,m+1)),w=()=>{let C;return y?C=g:x?C=b:f.route.Component?C=p.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=d,p.createElement(Q7,{match:f,routeContext:{outlet:d,matches:E,isDataRoute:r!=null},children:C})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?p.createElement(W7,{location:r.location,revalidation:r.revalidation,component:g,error:y,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var o2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(o2||{}),Wm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Wm||{});function K7(t){let e=p.useContext(hb);return e||Vt(!1),e}function J7(t){let e=p.useContext(B7);return e||Vt(!1),e}function X7(t){let e=p.useContext(ko);return e||Vt(!1),e}function a2(t){let e=X7(),r=e.matches[e.matches.length-1];return r.route.id||Vt(!1),r.route.id}function Z7(){var t;let e=p.useContext(n2),r=J7(Wm.UseRouteError),n=a2(Wm.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function eq(){let{router:t}=K7(o2.UseNavigateStable),e=a2(Wm.UseNavigateStable),r=p.useRef(!1);return s2(()=>{r.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,pd({fromRouteId:e},i)))},[t,e])}function Qm(t){let{to:e,replace:r,state:n,relative:s}=t;_c()||Vt(!1);let{future:i,static:a}=p.useContext(Po),{matches:l}=p.useContext(ko),{pathname:c}=As(),u=Kr(),d=db(e,ub(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function vn(t){Vt(!1)}function tq(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Yi.Pop,navigator:i,static:a=!1,future:l}=t;_c()&&Vt(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:a,future:pd({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=Nc(n));let{pathname:d="/",search:f="",hash:m="",state:y=null,key:x="default"}=n,g=p.useMemo(()=>{let b=cb(d,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:y,key:x},navigationType:s}},[c,d,f,m,y,x,s]);return g==null?null:p.createElement(Po.Provider,{value:u},p.createElement(Zp.Provider,{children:r,value:g}))}function rq(t){let{children:e,location:r}=t;return G7(hv(e),r)}new Promise(()=>{});function hv(t,e){e===void 0&&(e=[]);let r=[];return p.Children.forEach(t,(n,s)=>{if(!p.isValidElement(n))return;let i=[...e,s];if(n.type===p.Fragment){r.push.apply(r,hv(n.props.children,i));return}n.type!==vn&&Vt(!1),!n.props.index||!n.props.children||Vt(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=hv(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fv(){return fv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fv.apply(this,arguments)}function nq(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function sq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iq(t,e){return t.button===0&&(!e||e==="_self")&&!sq(t)}function mv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function oq(t,e){let r=mv(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}const aq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lq="6";try{window.__reactRouterVersion=lq}catch{}const cq="startTransition",ZC=e_[cq];function uq(t){let{basename:e,children:r,future:n,window:s}=t,i=p.useRef();i.current==null&&(i.current=p7({window:s,v5Compat:!0}));let a=i.current,[l,c]=p.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=p.useCallback(f=>{u&&ZC?ZC(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>a.listen(d),[a,d]),p.createElement(tq,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const dq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sr=p.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,m=nq(e,aq),{basename:y}=p.useContext(Po),x,g=!1;if(typeof u=="string"&&hq.test(u)&&(x=u,dq))try{let C=new URL(window.location.href),I=u.startsWith("//")?new URL(C.protocol+u):new URL(u),j=cb(I.pathname,y);I.origin===C.origin&&j!=null?u=j+I.search+I.hash:g=!0}catch{}let b=U7(u,{relative:s}),E=fq(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function w(C){n&&n(C),C.defaultPrevented||E(C)}return p.createElement("a",fv({},m,{href:x||b,onClick:g||i?n:w,ref:r,target:c}))});var eN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eN||(eN={}));var tN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tN||(tN={}));function fq(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=Kr(),u=As(),d=i2(t,{relative:a});return p.useCallback(f=>{if(iq(f,r)){f.preventDefault();let m=n!==void 0?n:Hm(u)===Hm(d);c(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,n,s,r,t,i,a,l])}function mq(t){let e=p.useRef(mv(t)),r=p.useRef(!1),n=As(),s=p.useMemo(()=>oq(n.search,r.current?null:e.current),[n.search]),i=Kr(),a=p.useCallback((l,c)=>{const u=mv(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,a]}const l2=()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,pq=async(t,e)=>{try{console.log("loginUser: Starting login process for email:",t);const r=await bB(bs,t,e);console.log("loginUser: Firebase Auth successful for UID:",r.user.uid);const n=await bo(zt(ft,"users",r.user.uid));if(console.log("loginUser: User document exists:",n.exists()),n.exists()){const s=n.data();console.log("loginUser: User data retrieved, current session status:",s.isSessionValid);const i=l2(),a=Ve.now();console.log("loginUser: Updating user document with new session"),await Ia(zt(ft,"users",r.user.uid),{sessionToken:i,lastLoginAt:a,isSessionValid:!0}),console.log("loginUser: User document updated with new session");const l={...s,sessionToken:i,lastLoginAt:a,isSessionValid:!0};return console.log("loginUser: Returning updated user data with session:",l.isSessionValid),l}return console.log("loginUser: User document not found, returning null"),null}catch(r){throw console.error("loginUser error:",r),r}},gq=async(t,e,r,n,s)=>{try{const i=await wB(bs,e,r),a=l2(),l=Ve.now(),c={id:i.user.uid,name:t,email:e,mobileNumber:n,purchases:0,isRewardReady:!1,createdAt:l,rewards:[],role:"customer",currentOfferId:"default_offer",currentOfferProgress:0,sessionToken:a,lastLoginAt:l,isSessionValid:!0};try{await Up(zt(ft,"users",i.user.uid),c),(await bo(zt(ft,"users",i.user.uid))).exists()?console.log("✅ User document verified in Firestore"):console.error("❌ User document not found after creation!")}catch(u){throw console.error("Firestore error during user creation:",u),u}return c}catch(i){throw console.error("registerUser error:",i),i}},yq=async()=>{try{const t=bs.currentUser;t&&await Ia(zt(ft,"users",t.uid),{isSessionValid:!1,sessionToken:null}),await wC(bs)}catch(t){console.error("Logout error:",t),await wC(bs)}},vq=t=>_B(bs,t),xq=(t,e)=>{const r=jo(ft,"users"),n=xc(r,Mw("createdAt","desc"));return qp(n,s=>{const i=[];s.forEach(a=>{const l=a.data();i.push({...l,id:a.id})}),t(i)},e)},wq=(t,e,r)=>{const n=zt(ft,"users",t);return qp(n,s=>{s.exists()?e(s.data()):e(null)},r)},bq=async(t,e,r)=>{if(!t||t.role!=="super_admin")throw new Error("Only super admins can update user roles");const n=zt(ft,"users",e);await Ia(n,{role:r})},Eq=async t=>{try{const e=jo(ft,"users"),r=xc(e,km("email","==",t.toLowerCase()));return!(await Ld(r)).empty}catch(e){throw console.error("Error checking user exists:",e),e}},Cq=async(t,e,r,n)=>{var V,R;const s=e&&r;if(!t&&!s)return;const i=s?zt(ft,"users",r):zt(ft,"users",t.id),a=await bo(i);if(!a.exists())throw new Error("User not found");const l=a.data(),c=n||l.currentOfferId;if(!c)throw new Error("No offer specified and user has no active offer assigned");const u=zt(ft,"offers",c),d=await bo(u);if(!d.exists())throw new Error("Specified offer not found");const f=d.data(),m=f.stampRequirement,y=(V=l.completedRewards)==null?void 0:V.find(N=>{var S,P,O;return((S=N.offerSnapshot)==null?void 0:S.offerId)===c&&((P=N.scanHistory)==null?void 0:P.length)<((O=N.offerSnapshot)==null?void 0:O.stampRequirement)&&!N.claimedAt});let x=0,g=y;if(y){if(x=((R=y.scanHistory)==null?void 0:R.length)||0,x>=m)throw new Error("User has already completed this offer");console.log(`User continuing existing offer: ${c}, current progress: ${x}/${m}`)}else{if(!f.isActive)throw new Error("This offer is no longer active for new users. Only users who have already started collecting stamps can continue.");g={rewardId:`reward_${Date.now()}`,claimedAt:null,scanHistory:[],rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription,offerSnapshot:{offerId:f.offerId,offerName:f.name,description:f.description,stampRequirement:f.stampRequirement,rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription},createdAt:Ve.now()}}const b=x+(f.stampsPerScan||1),E=f.stampsPerScan||1,w={scannedBy:t?`${t.name} (${t.email})`:"Unknown Admin",scannedByEmail:(t==null?void 0:t.email)||"unknown",scannedByName:(t==null?void 0:t.name)||"Unknown",timestamp:Ve.now(),stampsEarned:E,scanId:`scan_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},C={...g,scanHistory:[...g.scanHistory||[],w]};let I=l.completedRewards||[];y?I=I.map(N=>N.rewardId===y.rewardId?C:N):I=[...I,C];const j=f.stampsPerScan||1;console.log(`Adding ${j} stamps for offer ${c}. Progress: ${x} -> ${b}/${m}`),console.log(`Created scan event with ${j} stamps for user ${l.email}`),await Ia(i,{lastScanAt:Ve.now(),completedRewards:I,purchases:pV(j)})},Nq=async(t,e,r,n)=>{const s=e&&r;if(!t&&!s)return;const i=s?zt(ft,"users",r):zt(ft,"users",t.id),a=await bo(i);if(!a.exists())throw new Error("User not found");const c=a.data().completedRewards||[],u=c.find(f=>f.rewardId===n);if(!u)throw new Error("Reward not found");if(u.claimedAt)throw new Error("Reward has already been redeemed");const d=c.map(f=>f.rewardId===n?{...f,claimedAt:Ve.now()}:f);await Ia(i,{completedRewards:d})},_q=(t,e)=>{const r=zt(ft,"settings","global");return qp(r,n=>{if(n.exists())t(n.data());else{const s={purchaseLimit:5,descriptionMessage:"Complete purchases to unlock your reward!",rewardType:"percentage",rewardValue:"20",rewardDescription:"20% OFF",updatedAt:Ve.now(),updatedBy:"system"};Up(r,s),t(s)}},e)},Tq=async(t,e,r,n,s,i)=>{if(!t||t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can update settings");const a=zt(ft,"settings","global");await Ia(a,{purchaseLimit:e,descriptionMessage:r,rewardType:n,rewardValue:s,rewardDescription:i,updatedAt:Ve.now(),updatedBy:t.email})},Aq=5,Sq="Welcome Offer",Rq="Complete purchases to unlock your reward!",Iq=5,jq="percentage",Pq="20",kq="20% OFF",Mq=async t=>{jo(ft,"offers");const e={offerId:"default_offer",name:Sq,description:Rq,stampRequirement:Iq,stampsPerScan:1,rewardType:jq,rewardValue:Pq,rewardDescription:kq,isActive:!0,createdAt:Ve.now(),updatedAt:Ve.now(),createdBy:t.email||"system",expiresAt:null};await Up(zt(ft,"offers","default_offer"),e)},c2=async()=>{const t=jo(ft,"offers"),e=await Ld(t);return e.empty?[]:e.docs.map(r=>r.data())},u2=async(t,e)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can create offers");if(!e.name||!e.description||!e.rewardValue||!e.rewardDescription)throw new Error("Missing required fields");if(e.stampRequirement<1||e.stampsPerScan<1)throw new Error("Stamp requirements must be at least 1");const r=`offer_${Date.now()}`,n={...e,offerId:r,createdAt:Ve.now(),updatedAt:Ve.now(),createdBy:t.email||"system",stampsPerScan:e.stampsPerScan||1,expiresAt:e.expiresAt||null};await Up(zt(ft,"offers",r),n)},rN=async(t,e,r)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can update offers");const n=zt(ft,"offers",e);if(!(await bo(n)).exists())throw new Error("Offer not found");await Ia(n,{...r,updatedAt:Ve.now()})},Dq=async(t,e)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can delete offers");const r=jo(ft,"users"),n=xc(r,km("completedRewards","array-contains",{"offerSnapshot.offerId":e})),s=await Ld(n);let i=!1;if(s.forEach(a=>{var u;((u=a.data().completedRewards)==null?void 0:u.find(d=>{var f,m,y;return((f=d.offerSnapshot)==null?void 0:f.offerId)===e&&((m=d.scanHistory)==null?void 0:m.length)<((y=d.offerSnapshot)==null?void 0:y.stampRequirement)&&!d.claimedAt}))&&(i=!0)}),i)throw new Error("Cannot delete offer - users are actively collecting stamps. Deactivate the offer instead to hide it from new users while allowing existing users to complete their rewards.");await IR(zt(ft,"offers",e))};function mi(t,e){return async(...r)=>{try{return await t(...r)}catch(n){throw console.error(`${e} error:`,n),n}}}const Oq=mi(pq,"loginUser"),Lq=mi(gq,"registerUser"),nN=mi(yq,"logoutUser"),Fq=vq,Vq=xq,Bq=wq,Uq=mi(bq,"updateUserRole"),qq=mi(Eq,"checkUserExistsByEmail"),Gq=mi(Cq,"addPurchase"),d2=mi(Nq,"redeemReward"),$q=_q,Iu=c2,zq=mi(u2,"createOffer"),sN=mi(Mq,"createDefaultOffer"),h2=p.createContext(null),Hq=({children:t})=>{const[e,r]=p.useState(null),[n,s]=p.useState(!0),[i,a]=p.useState(null),[l,c]=p.useState(!0),[u,d]=p.useState([]),[f,m]=p.useState(!1);p.useEffect(()=>{const C=$q(I=>{a(I),c(!1)},I=>{console.error("Error listening to settings:",I),c(!1)});return()=>C()},[]),p.useEffect(()=>{if(!e||e.role!=="admin"&&e.role!=="super_admin"){d([]);return}m(!0);const C=Vq(I=>{d(I),m(!1)},I=>{console.error("Error listening to all users:",I),m(!1)});return()=>C()},[e==null?void 0:e.role]),p.useEffect(()=>{let C=null,I=!1;const j=Fq(async R=>{I||(I=!0),R&&typeof R=="object"&&R!==null&&"uid"in R?(console.log("Firebase Auth user detected, setting up real-time listener for:",R.uid),setTimeout(()=>{C=Bq(R.uid,N=>{console.log("Real-time user data received:",{uid:N.id,isSessionValid:N.isSessionValid,hasSessionToken:!!N.sessionToken}),N.isSessionValid===!1?(console.log("Session explicitly invalidated, signing out user"),r(null),s(!1),nN()):(console.log("Accepting user data during login, session status:",N.isSessionValid),r(N),s(!1))},N=>{console.error("Error listening to user data:",N),r(null),s(!1)})},500)):(r(null),s(!1),C&&(C(),C=null))}),V=setTimeout(()=>{I||s(!1)},1e4);return()=>{j&&j(),C&&C(),clearTimeout(V)}},[]);const y=async(C,I)=>{console.log("Login attempt started for:",C);try{const j=await Oq(C,I);return console.log("Login successful, user data received:",!!j),j}catch(j){throw console.error("Login failed:",j),j}},x=(C,I,j,V)=>Lq(C,I,j,V,null),g=(C,I,j)=>Gq(e,C,I,j),b=C=>d2(e,void 0,void 0,C),E=(C,I)=>Uq(e,C,I),w=async()=>{console.log("Logout called from useAuth hook"),await nN(),r(null)};return o.jsx(h2.Provider,{value:{user:e,loading:n,settings:i,settingsLoading:l,allUsers:u,allUsersLoading:f,login:y,register:x,addPurchase:g,redeemReward:b,logout:w,updateUserRole:E},children:t})},Ss=()=>{const t=p.useContext(h2);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Jc=({children:t,requiredRole:e})=>{const{user:r,loading:n}=Ss(),s=As();if(n)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ux,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!r)return o.jsx(Qm,{to:"/login",state:{from:s},replace:!0});if(e){const i=r.role,a={customer:1,admin:2,super_admin:3};if(a[i]<a[e])return o.jsx(Qm,{to:"/dashboard",replace:!0})}return o.jsx(o.Fragment,{children:t})},cf=({children:t})=>{const{user:e,loading:r}=Ss();return r?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ux,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):e?o.jsx(Qm,{to:"/dashboard",replace:!0}):o.jsx(o.Fragment,{children:t})},Wq=Lx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_e=p.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const a=n?ma:"button";return o.jsx(a,{className:at(Wq({variant:e,size:r,className:t})),ref:i,...s})});_e.displayName="Button";const Qq=()=>{const[t,e]=p.useState(!1),[r,n]=p.useState(!1),s=()=>{const i=window.matchMedia("(display-mode: standalone)").matches,a=window.matchMedia("(display-mode: fullscreen)").matches,l=window.matchMedia("(display-mode: minimal-ui)").matches,c=navigator.standalone===!0;return i||a||l||c};return p.useEffect(()=>{s()&&n(!0);const a=window.matchMedia("(display-mode: standalone)"),l=c=>{c.matches&&n(!0)};return a.addEventListener("change",l),()=>{a.removeEventListener("change",l)}},[]),r?null:o.jsxs("div",{className:"fixed top-4 right-4 z-40",children:[o.jsxs(_e,{onClick:()=>e(!t),size:"sm",variant:"outline",className:"bg-white/90 backdrop-blur-sm border-gray-200 hover:bg-white",children:[o.jsx(PA,{className:"w-4 h-4 mr-2"}),"Install Guide"]}),t&&o.jsxs("div",{className:"absolute top-12 right-0 w-80 bg-white rounded-lg shadow-lg border border-gray-200 p-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"How to Install"}),o.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Chrome/Edge (Desktop):"}),o.jsx("p",{children:'Look for the install icon (plus sign) in your browser address bar, or use the menu (three dots) and select "Install app"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Chrome/Edge (Mobile):"}),o.jsx("p",{children:'Tap the menu (three dots) and select "Add to Home screen" or "Install app"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Safari (Mobile):"}),o.jsx("p",{children:'Tap the Share button (square with arrow) and select "Add to Home Screen"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Safari (Desktop):"}),o.jsx("p",{children:'Use the Share button in the toolbar and select "Add to Dock"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Firefox:"}),o.jsx("p",{children:'Use the menu (three lines) and select "Install App" or "Add to Home Screen"'})]})]}),o.jsx(_e,{onClick:()=>e(!1),size:"sm",className:"mt-3 w-full",children:"Got it!"})]})]})},Yq=()=>{const[t,e]=p.useState(!1),r=()=>{const n=window.matchMedia("(display-mode: standalone)").matches,s=window.matchMedia("(display-mode: fullscreen)").matches,i=window.matchMedia("(display-mode: minimal-ui)").matches,a=navigator.standalone===!0;return n||s||i||a};return p.useEffect(()=>{r()&&e(!0);const s=window.matchMedia("(display-mode: standalone)"),i=a=>{a.matches&&e(!0)};return s.addEventListener("change",i),()=>{s.removeEventListener("change",i)}},[]),o.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/bgCover.jpeg)"}}),o.jsx("div",{className:"absolute inset-0 bg-black/60"}),o.jsxs("div",{className:"absolute inset-0 opacity-20",children:[o.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-red-700 rounded-full blur-3xl animate-pulse delay-500"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6 text-center",children:[o.jsx("div",{children:o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("img",{src:"/logo.png",alt:"Vape Master Logo",className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-48 lg:h-48 object-contain"})})}),o.jsxs("div",{className:"mb-12 max-w-md",children:[o.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-semibold text-white mb-4",children:"Loyalty Program"}),o.jsx("p",{className:"text-gray-300 text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed",children:"Join our loyalty program and get rewards! Earn points with every purchase and unlock exclusive benefits."})]}),o.jsxs("div",{className:"space-y-4 w-full max-w-sm",children:[o.jsx(sr,{to:"/register",className:"block",children:o.jsx(_e,{className:"w-full py-4 text-lg font-semibold bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"Join Now"})}),o.jsx(sr,{to:"/login",className:"block",children:o.jsx(_e,{variant:"outline",className:"w-full py-4 text-lg font-semibold bg-transparent border-2 border-red-500 text-red-400 hover:bg-red-500 hover:text-white transition-all duration-300 transform hover:scale-105",children:"Already a Member?"})})]}),!t&&o.jsx("div",{className:"mt-8",children:o.jsx(Qq,{})}),o.jsx("div",{className:"absolute bottom-6 text-center text-gray-500",children:o.jsx("p",{className:"text-sm",children:"Smoke responsibly • 21+ only"})})]})]})},Kq=()=>{const{user:t,loading:e}=Ss();return e?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ux,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):t?o.jsx(Qm,{to:"/dashboard",replace:!0}):o.jsx(Yq,{})},Ae=p.forwardRef(({className:t,type:e,...r},n)=>o.jsx("input",{type:e,className:at("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Ae.displayName="Input";var Jq="Label",f2=p.forwardRef((t,e)=>o.jsx(He.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));f2.displayName=Jq;var m2=f2;const Xq=Lx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ne=p.forwardRef(({className:t,...e},r)=>o.jsx(m2,{ref:r,className:at(Xq(),t),...e}));Ne.displayName=m2.displayName;function Ze(t,e){const r=window;typeof window<"u"&&typeof r.gtag=="function"&&r.gtag("event",t,e||{})}const ic=new Map,nr={MAX_REGISTRATIONS_PER_IP:3,MAX_REGISTRATIONS_PER_EMAIL:1,RATE_LIMIT_WINDOW:60*60*1e3,MIN_REQUEST_INTERVAL:3e3,MAX_REQUESTS_PER_MINUTE:5,MIN_PASSWORD_LENGTH:8,REQUIRE_UPPERCASE:!0,REQUIRE_LOWERCASE:!0,REQUIRE_NUMBERS:!0,REQUIRE_SPECIAL_CHARS:!0,BLOCKED_EMAIL_DOMAINS:["tempmail.org","10minutemail.com","guerrillamail.com","mailinator.com","yopmail.com","throwaway.email","fakeinbox.com","sharklasers.com","grr.la","temp-mail.org","dispostable.com","mailnesia.com","maildrop.cc"],MIN_PHONE_LENGTH:10,MAX_PHONE_LENGTH:15,MIN_NAME_LENGTH:2,MAX_NAME_LENGTH:50,SUSPICIOUS_PATTERNS:[/test\d+/i,/user\d+/i,/admin\d+/i,/demo\d+/i,/fake\d+/i,/spam\d+/i,/bot\d+/i,/scam\d+/i,/temp\d+/i,/dummy\d+/i]},p2=()=>`${navigator.userAgent.slice(0,20)}_${Date.now()}`,iN=(t,e)=>{const r=Date.now(),n=`${e}:${t}`,s=ic.get(n);return!s||r>s.resetTime?(ic.set(n,{count:1,resetTime:r+nr.RATE_LIMIT_WINDOW,lastRequest:r}),!0):s.count>=(e==="ip"?nr.MAX_REGISTRATIONS_PER_IP:nr.MAX_REGISTRATIONS_PER_EMAIL)?!1:(s.count++,s.lastRequest=r,!0)},Zq=t=>{const e=Date.now(),r=`throttle:${t}`,n=ic.get(r);return n?e-n.lastRequest<nr.MIN_REQUEST_INTERVAL?!1:e>n.resetTime?(n.count=1,n.resetTime=e+6e4,n.lastRequest=e,!0):n.count>=nr.MAX_REQUESTS_PER_MINUTE?!1:(n.count++,n.lastRequest=e,!0):(ic.set(r,{count:1,resetTime:e+6e4,lastRequest:e}),!0)},oN=t=>{const e=[];return t.length<nr.MIN_PASSWORD_LENGTH&&e.push(`Password must be at least ${nr.MIN_PASSWORD_LENGTH} characters long`),/[A-Z]/.test(t)||e.push("Password must contain at least one uppercase letter"),/[a-z]/.test(t)||e.push("Password must contain at least one lowercase letter"),/\d/.test(t)||e.push("Password must contain at least one number"),/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(t)||e.push("Password must contain at least one special character"),["password","123456","qwerty","admin","letmein","password123","123456789"].includes(t.toLowerCase())&&e.push("Password is too common and easily guessable"),/(.)\1{3,}/.test(t)&&e.push("Password contains too many repeated characters"),{isValid:e.length===0,errors:e}},aN=t=>{var a;const e=[],r=t.toLowerCase();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return e.push("Please enter a valid email address"),{isValid:!1,errors:e};const s=(a=r.split("@")[1])==null?void 0:a.toLowerCase();s&&nr.BLOCKED_EMAIL_DOMAINS.includes(s)&&e.push("Temporary or disposable email addresses are not allowed");const i=r.split("@")[0];return nr.SUSPICIOUS_PATTERNS.some(l=>l.test(i))&&e.push("Email address contains suspicious patterns"),r.length>254&&e.push("Email address is too long"),i.length>64&&e.push("Email username part is too long"),(i.match(/\./g)||[]).length>3&&e.push("Email username contains too many dots"),{isValid:e.length===0,errors:e}},lN=t=>{const e=[],r=t.replace(/\D/g,"");return r.length<nr.MIN_PHONE_LENGTH&&e.push(`Phone number must be at least ${nr.MIN_PHONE_LENGTH} digits`),r.length>nr.MAX_PHONE_LENGTH&&e.push(`Phone number must be no more than ${nr.MAX_PHONE_LENGTH} digits`),/(\d)\1{5,}/.test(r)&&e.push("Phone number contains suspicious repeating patterns"),/^(\d)\1+$/.test(r)&&e.push("Phone number cannot be all the same digit"),["1234567890","0000000000","1111111111","9999999999"].includes(r)&&e.push("Phone number appears to be a test number"),{isValid:e.length===0,errors:e}},cN=t=>{const e=[];return t.length<nr.MIN_NAME_LENGTH&&e.push(`Name must be at least ${nr.MIN_NAME_LENGTH} characters long`),t.length>nr.MAX_NAME_LENGTH&&e.push(`Name must be no more than ${nr.MAX_NAME_LENGTH} characters long`),nr.SUSPICIOUS_PATTERNS.some(i=>i.test(t))&&e.push("Name contains suspicious patterns"),(t.match(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/g)||[]).length>t.length*.3&&e.push("Name contains too many special characters"),(t.match(/\d/g)||[]).length>t.length*.5&&e.push("Name contains too many numbers"),["test","user","admin","demo","fake","spam","bot","scam"].some(i=>t.toLowerCase().includes(i))&&e.push("Name contains suspicious words"),{isValid:e.length===0,errors:e}},eG=()=>{try{const t=document.createElement("canvas"),e=t.getContext("2d");if(e)return e.textBaseline="top",e.font="14px Arial",e.fillText("Browser fingerprint",2,2),t.toDataURL()}catch{console.warn("Canvas fingerprinting not available")}return`${navigator.userAgent}_${navigator.language}_${screen.width}x${screen.height}_${new Date().getTimezoneOffset()}`},qs=(t,e)=>{const r={timestamp:new Date().toISOString(),event:t,details:e,userAgent:navigator.userAgent,fingerprint:eG(),identifier:p2(),url:window.location.href,referrer:document.referrer};console.log("🔒 Security Event:",r)};setInterval(()=>{const t=Date.now();for(const[e,r]of ic.entries())t>r.resetTime&&ic.delete(e)},6e4);const tG=()=>{var U,H,se,re,ce,he,Te,Me,Ce,oe;const[t,e]=p.useState(""),[r,n]=p.useState(""),[s,i]=p.useState(""),[a,l]=p.useState(""),[c,u]=p.useState(""),[d,f]=p.useState(!1),[m,y]=p.useState(!1),[x,g]=p.useState(!1),[b,E]=p.useState({}),[w,C]=p.useState(""),[I,j]=p.useState(0),[V,R]=p.useState(""),[N,S]=p.useState(""),{register:P,user:O,loading:M}=Ss(),k=Kr(),B=p.useRef(null),z=p.useRef(null);p.useEffect(()=>{Ze("page_view",{page:"Register"}),qs("registration_page_visit",{timestamp:new Date().toISOString(),userAgent:navigator.userAgent})},[]),p.useEffect(()=>{w&&C("")},[t,r,s,a,c]),p.useEffect(()=>{const le=(ge,Ee)=>{let fe=[];switch(ge){case"name":{fe=cN(Ee).errors;break}case"email":{fe=aN(Ee).errors;break}case"contactNumber":{fe=lN(Ee).errors;break}case"password":{fe=oN(Ee).errors;break}case"confirmPassword":{Ee&&Ee!==a&&fe.push("Passwords do not match");break}}E(ve=>({...ve,[ge]:fe}))},G={},de=(ge,Ee)=>{G[ge]&&clearTimeout(G[ge]),G[ge]=setTimeout(()=>{le(ge,Ee)},500)};return t&&de("name",t),r&&de("email",r.toLowerCase()),s&&de("contactNumber",s),a&&de("password",a),c&&de("confirmPassword",c),()=>{Object.values(G).forEach(ge=>clearTimeout(ge))}},[t,r,s,a,c]);const Q=async le=>{le.preventDefault(),C("");const G=Date.now(),de=p2();if(V.trim()!==""||N.trim()!==""){qs("honeypot_triggered",{honeypotWebsite:V,honeypotCompany:N,clientId:de}),C("Suspicious activity detected. Please try again later.");return}if(!Zq(de)){qs("request_throttled",{clientId:de,timeSinceLastRequest:G-I}),C("Too many requests. Please wait a few seconds before trying again.");return}if(!iN(de,"ip")){qs("ip_rate_limit_exceeded",{clientId:de,timeSinceLastRequest:G-I}),C("Too many registration attempts from this location. Please try again later.");return}const ge=r.trim().toLowerCase();if(!iN(ge,"email")){qs("email_rate_limit_exceeded",{email:ge,clientId:de}),C("This email address has already been registered.");return}const Ee=cN(t.trim()),fe=aN(ge),ve=lN(s.trim()),mt=oN(a);if(!Ee.isValid||!fe.isValid||!ve.isValid||!mt.isValid||a!==c){const Ue={name:Ee.errors,email:fe.errors,contactNumber:ve.errors,password:mt.errors,confirmPassword:a!==c?["Passwords do not match"]:[]};E(Ue),qs("validation_failed",{clientId:de,errors:Ue}),C("Please fix the errors in the form.");return}f(!0),j(G);try{qs("registration_attempt",{email:ge,clientId:de,timestamp:new Date().toISOString()}),Ze("register_attempt",{email:ge}),await P(t.trim(),ge,a,s.trim()),qs("registration_success",{email:ge,clientId:de,userId:O==null?void 0:O.id,userRole:O==null?void 0:O.role}),pt({title:"Welcome to Vape Master!",description:"Your loyalty card is ready!"}),Ze("register_success",{user_id:O==null?void 0:O.id,user_role:O==null?void 0:O.role}),k("/dashboard")}catch(Ue){let lt="Unable to create account. Please try again.";if(Ue&&typeof Ue=="object"&&"message"in Ue&&typeof Ue.message=="string"){const Ge=Ue.message;Ge.includes("email-already-in-use")?lt="This email address is already registered. Please use a different email or try signing in.":Ge.includes("weak-password")?lt="Password is too weak. Please choose a stronger password.":Ge.includes("invalid-email")?lt="Please enter a valid email address.":Ge.includes("network")?lt="Connection error. Please check your internet connection and try again.":Ge.includes("timeout")?lt="Request timed out. Please try again.":Ge.includes("too-many-requests")?lt="Too many registration attempts. Please wait a few minutes and try again.":lt="Unable to create account. Please check your information and try again."}qs("registration_failed",{email:ge,clientId:de,error:Ue.message}),C(lt),Ze("register_failed",{email:ge,error:Ue.message})}finally{f(!1)}},Z=Object.values(b).some(le=>le.length>0);return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx(sr,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(si,{className:"w-6 h-6"})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("h1",{className:"text-3xl font-bold text-white",children:"Join the Club"})})}),o.jsxs("form",{ref:B,onSubmit:Q,className:"space-y-6",children:[w&&o.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-3",children:o.jsx("p",{className:"text-red-300 text-sm",children:w})}),o.jsxs("div",{className:"hidden",children:[o.jsx("input",{type:"text",name:"website",value:V,onChange:le=>R(le.target.value),tabIndex:-1,autoComplete:"off"}),o.jsx("input",{type:"text",name:"company",value:N,onChange:le=>S(le.target.value),tabIndex:-1,autoComplete:"off"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"name",className:"text-white",children:"Full Name"}),o.jsx(Ae,{id:"name",type:"text",value:t,onChange:le=>e(le.target.value),placeholder:"Enter your full name",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${(U=b.name)!=null&&U.length||w?"border-red-500":""}`,required:!0,autoComplete:"name"}),((H=b.name)==null?void 0:H.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.name.map((le,G)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Qc,{className:"w-3 h-3 mr-1"}),le]},G))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"email",className:"text-white",children:"Email"}),o.jsx(Ae,{id:"email",type:"email",value:r,onChange:le=>n(le.target.value),placeholder:"Enter your email",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${(se=b.email)!=null&&se.length||w?"border-red-500":""}`,required:!0,autoComplete:"email"}),((re=b.email)==null?void 0:re.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.email.map((le,G)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Qc,{className:"w-3 h-3 mr-1"}),le]},G))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"password",className:"text-white",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ae,{id:"password",type:m?"text":"password",value:a,onChange:le=>l(le.target.value),placeholder:"Create a strong password",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 pr-10 ${(ce=b.password)!=null&&ce.length||w?"border-red-500":""}`,required:!0,autoComplete:"new-password"}),o.jsx("button",{type:"button",onClick:()=>y(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:m?o.jsx(Ju,{className:"w-4 h-4"}):o.jsx(Zn,{className:"w-4 h-4"})})]}),((he=b.password)==null?void 0:he.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.password.map((le,G)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Qc,{className:"w-3 h-3 mr-1"}),le]},G))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"confirmPassword",className:"text-white",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ae,{id:"confirmPassword",type:x?"text":"password",value:c,onChange:le=>u(le.target.value),placeholder:"Confirm your password",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 pr-10 ${(Te=b.confirmPassword)!=null&&Te.length||w?"border-red-500":""}`,required:!0,autoComplete:"new-password"}),o.jsx("button",{type:"button",onClick:()=>g(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:x?o.jsx(Ju,{className:"w-4 h-4"}):o.jsx(Zn,{className:"w-4 h-4"})})]}),((Me=b.confirmPassword)==null?void 0:Me.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.confirmPassword.map((le,G)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Qc,{className:"w-3 h-3 mr-1"}),le]},G))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"contactNumber",className:"text-white",children:"Contact Number"}),o.jsx(Ae,{id:"contactNumber",type:"tel",value:s,onChange:le=>i(le.target.value),placeholder:"Enter your contact number",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${(Ce=b.contactNumber)!=null&&Ce.length||w?"border-red-500":""}`,required:!0,autoComplete:"tel"}),((oe=b.contactNumber)==null?void 0:oe.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.contactNumber.map((le,G)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Qc,{className:"w-3 h-3 mr-1"}),le]},G))})]}),o.jsx(_e,{ref:z,type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:d||Z,children:d?"Creating Account...":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",o.jsx(sr,{to:"/login",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign in"})]})})]})})})]})]})},rG=()=>{const[t,e]=p.useState(""),[r,n]=p.useState(""),[s,i]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState(""),{login:d,user:f,loading:m}=Ss(),y=Kr(),x=As();p.useEffect(()=>{Ze("page_view",{page:"Login"})},[]),p.useEffect(()=>{c&&u("")},[t,r]);const g=async b=>{var E,w;if(b.preventDefault(),u(""),!t.trim()||!r.trim()){u("Please enter your email and password."),Ze("login_missing_info");return}l(!0);try{Ze("login_attempt",{email:t});const C=await d(t.trim(),r.trim());if(C){pt({title:"Welcome back!",description:`Good to see you again, ${C.name}!`}),Ze("login_success",{user_id:C.id,user_role:C.role});const I=((w=(E=x.state)==null?void 0:E.from)==null?void 0:w.pathname)||"/dashboard";y(I,{replace:!0})}else u("No account found with this email. Please register first."),Ze("login_user_not_found",{email:t})}catch(C){let I="Email or password is incorrect. Please try again.";if(C&&typeof C=="object"&&"message"in C&&typeof C.message=="string"){const j=C.message;j.includes("user-not-found")?I="No account found with this email. Please check your email or create a new account.":j.includes("wrong-password")?I="Incorrect email or password. Please check your credentials and try again.":j.includes("invalid-email")?I="Please enter a valid email address.":j.includes("too-many-requests")?I="Too many login attempts. Please wait a few minutes and try again.":j.includes("user-disabled")?I="This account is temporarily unavailable. Please contact customer support.":j.includes("network")?I="Connection error. Please check your internet connection and try again.":j.includes("timeout")?I="Request timed out. Please try again.":I="Unable to sign in. Please check your email and password, then try again."}u(I),Ze("login_failed",{email:t,error:C.message})}finally{l(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx(sr,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(si,{className:"w-6 h-6"})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-400",children:"Sign in to your loyalty account"})]}),o.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c&&o.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-3",children:o.jsx("p",{className:"text-red-300 text-sm",children:c})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"email",className:"text-white",children:"Email"}),o.jsx(Ae,{id:"email",type:"email",value:t,onChange:b=>e(b.target.value),placeholder:"Enter your email",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${c?"border-red-500":""}`,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"password",className:"text-white",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ae,{id:"password",type:s?"text":"password",value:r,onChange:b=>n(b.target.value),placeholder:"Enter your password",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 pr-12 ${c?"border-red-500":""}`,required:!0}),o.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",tabIndex:-1,children:s?o.jsx(Ju,{className:"w-5 h-5"}):o.jsx(Zn,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(sr,{to:"/forgot-password",className:"text-sm text-red-400 hover:text-red-300 transition-colors",children:"Forgot Password?"})}),o.jsx(_e,{type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold",disabled:a,children:a?"Signing In...":"Sign In"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",o.jsx(sr,{to:"/register",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign up"})]})})]})})})]})]})},nG=()=>{const[t,e]=p.useState(""),[r,n]=p.useState(!1),[s,i]=p.useState(""),[a,l]=p.useState(!1);Kr(),p.useEffect(()=>{Ze("page_view",{page:"ForgotPassword"})},[]),p.useEffect(()=>{s&&i("")},[t]);const c=async u=>{if(u.preventDefault(),i(""),l(!1),!t.trim()){i("Please enter your email address."),Ze("forgot_password_missing_email");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim())){i("Please enter a valid email address.");return}n(!0);try{if(Ze("forgot_password_attempt",{email:t.trim()}),!await qq(t.trim())){i("No account found with this email address. Please check your email or create a new account."),Ze("forgot_password_user_not_found",{email:t.trim()});return}await gB(bs,t.trim()),l(!0),Ze("forgot_password_success",{email:t.trim()})}catch(f){let m="Unable to send reset email. Please try again.";if(f&&typeof f=="object"&&"message"in f&&typeof f.message=="string"){const y=f.message;y.includes("user-not-found")?m="No account found with this email address. Please check your email or create a new account.":y.includes("invalid-email")?m="Please enter a valid email address.":y.includes("too-many-requests")?m="Too many reset attempts. Please wait a few minutes and try again.":y.includes("network")?m="Connection error. Please check your internet connection and try again.":m="Unable to send reset email. Please try again."}i(m),Ze("forgot_password_failed",{email:t.trim(),error:f.message})}finally{n(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx(sr,{to:"/login",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(si,{className:"w-6 h-6"})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx(Cu,{className:"w-12 h-12 text-red-400"})}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Reset Password"}),o.jsx("p",{className:"text-gray-400",children:"Enter your email address and we'll send you a link to reset your password."})]}),a?o.jsxs("div",{className:"text-center space-y-6",children:[o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx(Tn,{className:"w-16 h-16 text-green-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Check Your Email"}),o.jsx("p",{className:"text-gray-300 mb-4",children:"We've sent a password reset link to:"}),o.jsx("p",{className:"text-red-400 font-medium mb-6",children:t}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Click the link in the email to reset your password. The link will expire in 1 hour."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(_e,{onClick:()=>{l(!1),e("")},className:"w-full py-3 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-semibold",children:"Send to Different Email"}),o.jsx(sr,{to:"/login",className:"block w-full py-3 bg-transparent border border-gray-600 text-gray-300 hover:bg-gray-800/50 rounded-lg font-semibold transition-colors",children:"Back to Login"})]})]}):o.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s&&o.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-3",children:[o.jsx("p",{className:"text-red-300 text-sm",children:s}),s.includes("No account found")&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-red-500/30",children:[o.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"Don't have an account yet?"}),o.jsx(sr,{to:"/register",className:"text-red-400 hover:text-red-300 transition-colors font-semibold text-sm",children:"Create a new account"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"email",className:"text-white",children:"Email Address"}),o.jsx(Ae,{id:"email",type:"email",value:t,onChange:u=>e(u.target.value),placeholder:"Enter your email address",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${s?"border-red-500":""}`,required:!0,autoComplete:"email"})]}),o.jsx(_e,{type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold",disabled:r,children:r?"Sending...":"Send Reset Link"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-400",children:["Remember your password?"," ",o.jsx(sr,{to:"/login",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign in"})]})})]})})})]})]})},sG=()=>{const[t]=mq(),[e,r]=p.useState(""),[n,s]=p.useState(""),[i,a]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[f,m]=p.useState(!0),[y,x]=p.useState(""),[g,b]=p.useState(!1),[E,w]=p.useState(!1);Kr();const C=t.get("oobCode");p.useEffect(()=>{Ze("page_view",{page:"ResetPassword"})},[]),p.useEffect(()=>{(async()=>{if(!C){x("Invalid reset link. Please request a new password reset."),m(!1);return}try{await xB(bs,C),w(!0)}catch(R){let N="Invalid or expired reset link. Please request a new password reset.";if(R&&typeof R=="object"&&"message"in R&&typeof R.message=="string"){const S=R.message;S.includes("expired")?N="This reset link has expired. Please request a new password reset.":S.includes("invalid")&&(N="Invalid reset link. Please request a new password reset.")}x(N)}finally{m(!1)}})()},[C]),p.useEffect(()=>{y&&x("")},[e,n]);const I=V=>{const R=[];return V.length<8&&R.push("Password must be at least 8 characters long"),/(?=.*[a-z])/.test(V)||R.push("Password must contain at least one lowercase letter"),/(?=.*[A-Z])/.test(V)||R.push("Password must contain at least one uppercase letter"),/(?=.*\d)/.test(V)||R.push("Password must contain at least one number"),R},j=async V=>{if(V.preventDefault(),x(""),!e.trim()){x("Please enter a new password.");return}if(!n.trim()){x("Please confirm your new password.");return}if(e!==n){x("Passwords do not match.");return}const R=I(e);if(R.length>0){x(R[0]);return}d(!0);try{Ze("reset_password_attempt"),await yB(bs,C,e),b(!0),Ze("reset_password_success")}catch(N){let S="Unable to reset password. Please try again.";if(N&&typeof N=="object"&&"message"in N&&typeof N.message=="string"){const P=N.message;P.includes("expired")?S="This reset link has expired. Please request a new password reset.":P.includes("invalid")?S="Invalid reset link. Please request a new password reset.":P.includes("weak-password")?S="Password is too weak. Please choose a stronger password.":P.includes("network")&&(S="Connection error. Please check your internet connection and try again.")}x(S),Ze("reset_password_failed",{error:N.message})}finally{d(!1)}};return f?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:o.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Validating reset link..."})]})})}):E?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx(sr,{to:"/login",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(si,{className:"w-6 h-6"})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:g?o.jsxs("div",{className:"text-center space-y-6",children:[o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx(Tn,{className:"w-16 h-16 text-green-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Password Reset Successfully!"}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Your password has been updated. You can now sign in with your new password."})]}),o.jsx(sr,{to:"/login",className:"inline-block w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold rounded-lg transition-colors",children:"Sign In"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx(D3,{className:"w-12 h-12 text-red-400"})}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Set New Password"}),o.jsx("p",{className:"text-gray-400",children:"Enter your new password below."})]}),o.jsxs("form",{onSubmit:j,className:"space-y-6",children:[y&&o.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-3",children:o.jsx("p",{className:"text-red-300 text-sm",children:y})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"password",className:"text-white",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ae,{id:"password",type:i?"text":"password",value:e,onChange:V=>r(V.target.value),placeholder:"Enter your new password",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 pr-12 ${y?"border-red-500":""}`,required:!0,autoComplete:"new-password"}),o.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",tabIndex:-1,children:i?o.jsx(Ju,{className:"w-5 h-5"}):o.jsx(Zn,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"confirmPassword",className:"text-white",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ae,{id:"confirmPassword",type:l?"text":"password",value:n,onChange:V=>s(V.target.value),placeholder:"Confirm your new password",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 pr-12 ${y?"border-red-500":""}`,required:!0,autoComplete:"new-password"}),o.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",tabIndex:-1,children:l?o.jsx(Ju,{className:"w-5 h-5"}):o.jsx(Zn,{className:"w-5 h-5"})})]})]}),o.jsx(_e,{type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold",disabled:u,children:u?"Resetting...":"Reset Password"})]})]})})})})]})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx(sr,{to:"/login",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(si,{className:"w-6 h-6"})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl text-center",children:[o.jsx("div",{className:"text-red-400 text-6xl mb-4",children:"⚠️"}),o.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Invalid Reset Link"}),o.jsx("p",{className:"text-gray-300 mb-6",children:y}),o.jsx(sr,{to:"/forgot-password",className:"inline-block bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Request New Reset Link"})]})})})]})})};function iG(){const{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:a}=Ss(),[l,c]=p.useState([]),u=Kr(),[d,f]=p.useState(!1),m=p.useRef(null),[y,x]=p.useState(!1),[g,b]=p.useState(0),[E,w]=p.useState(null),[C,I]=p.useState("progress"),j=(t==null?void 0:t.purchaseLimit)||(s==null?void 0:s.purchaseLimit)||Aq;p.useEffect(()=>{!e&&!t&&u("/login")},[t,e,u]),p.useEffect(()=>{t&&(async()=>{try{const O=await Iu();c(O)}catch(O){console.error("Error loading offers:",O)}})()},[t]),p.useEffect(()=>{t&&(w(new Date),m.current!==null&&m.current!==t.purchases&&t.purchases-m.current>0&&(pt({title:"Purchase Updated! 📱",description:`Your purchase count was updated via QR scan. New total: ${t.purchases}/${j}`}),x(!0),b(O=>O+1),setTimeout(()=>x(!1),2500),t.isRewardReady&&m.current<j&&setTimeout(()=>{pt({title:"Reward Unlocked! 🎉",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)},1e3)),m.current===0&&t.purchases===1&&(f(!0),setTimeout(()=>f(!1),3e3)),m.current=t.purchases)},[t==null?void 0:t.purchases,t==null?void 0:t.isRewardReady,u,j]);const V=Math.max(0,j-((t==null?void 0:t.purchases)||0));return{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:a,offers:l,navigate:u,showFirstConfetti:d,showConfetti:y,confettiKey:g,lastUpdateTime:E,activeTab:C,setActiveTab:I,userPurchaseLimit:j,purchasesRemaining:V,handleAddPurchase:()=>{!t||t.purchases>=j||(r(),x(!0),b(P=>P+1),setTimeout(()=>x(!1),2500),t.purchases+1>=j?(pt({title:"Reward Unlocked! 🎉",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)):pt({title:"Purchase Added!",description:`${j-1-t.purchases} more purchases until your next reward!`}))},handleLogout:()=>{n(),pt({title:"Logged Out",description:"Thanks for visiting Vape Master!"}),u("/")},handleOfferSelection:async P=>{try{console.log("Selecting offer:",P)}catch(O){console.error("Error selecting offer:",O)}}}}var Bf={linear:function(t,e,r,n){var s=r-e;return s*t/n+e},easeInQuad:function(t,e,r,n){var s=r-e;return s*(t/=n)*t+e},easeOutQuad:function(t,e,r,n){var s=r-e;return-s*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t+e},easeOutCubic:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,r,n){var s=r-e;return-s*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,r,n){var s=r-e;return-s*Math.cos(t/n*(Math.PI/2))+s+e},easeOutSine:function(t,e,r,n){var s=r-e;return s*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,r,n){var s=r-e;return-s/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,r,n){var s=r-e;return t==0?e:s*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,r,n){var s=r-e;return t==n?e+s:s*(-Math.pow(2,-10*t/n)+1)+e},easeInOutExpo:function(t,e,r,n){var s=r-e;return t===0?e:t===n?e+s:(t/=n/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,r,n){var s=r-e;return-s*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,r,n){var s=r-e;return s*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,r,n){var s=r-e,i,a,l;return l=1.70158,a=0,i=s,t===0?e:(t/=n)===1?e+s:(a||(a=n*.3),i<Math.abs(s)?(i=s,l=a/4):l=a/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/a))+e)},easeOutElastic:function(t,e,r,n){var s=r-e,i,a,l;return l=1.70158,a=0,i=s,t===0?e:(t/=n)===1?e+s:(a||(a=n*.3),i<Math.abs(s)?(i=s,l=a/4):l=a/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*n-l)*(2*Math.PI)/a)+s+e)},easeInOutElastic:function(t,e,r,n){var s=r-e,i,a,l;return l=1.70158,a=0,i=s,t===0?e:(t/=n/2)===2?e+s:(a||(a=n*(.3*1.5)),i<Math.abs(s)?(i=s,l=a/4):l=a/(2*Math.PI)*Math.asin(s/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/a))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/a)*.5+s+e)},easeInBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),(t/=n/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,r,n){var s=r-e,i;return i=Bf.easeOutBounce(n-t,0,s,n),s-i+e},easeOutBounce:function(t,e,r,n){var s=r-e;return(t/=n)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,r,n){var s=r-e,i;return t<n/2?(i=Bf.easeInBounce(t*2,0,s,n),i*.5+e):(i=Bf.easeOutBounce(t*2-n,0,s,n),i*.5+s*.5+e)}},oG=Bf;function aG(t){return t*Math.PI/180}function en(t,e){return t+Math.random()*(e-t)}function lG(t,e){return Math.floor(t+Math.random()*(e-t+1))}var ju;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(ju||(ju={}));var Mi;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Mi||(Mi={}));const cG=1e3/60;class uG{constructor(e,r,n,s){this.getOptions=r;const{colors:i,initialVelocityX:a,initialVelocityY:l}=this.getOptions();this.context=e,this.x=n,this.y=s,this.w=en(5,20),this.h=en(5,20),this.radius=en(5,10),this.vx=typeof a=="number"?en(-a,a):en(a.min,a.max),this.vy=typeof l=="number"?en(-l,0):en(l.min,l.max),this.shape=lG(0,2),this.angle=aG(en(0,360)),this.angularSpin=en(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=en(0,1),this.rotationDirection=en(0,1)?Mi.Positive:Mi.Negative}update(e){const{gravity:r,wind:n,friction:s,opacity:i,drawShape:a}=this.getOptions(),l=e/cG;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=r*l,this.vx+=n*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===Mi.Positive?this.rotationDirection=Mi.Negative:this.rotateY<=-1&&this.rotationDirection===Mi.Negative&&(this.rotationDirection=Mi.Positive);const c=.1*this.rotationDirection*l;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case ju.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case ju.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case ju.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class dG{constructor(e,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=en(this.x,this.w+this.x),i=en(this.y,this.h+this.y);return new uG(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:a,particlesGenerated:l,lastNumberOfPieces:c}=this,{run:u,recycle:d,numberOfPieces:f,debug:m,tweenFunction:y,tweenDuration:x}=this.getOptions();if(!u)return!1;const g=this.particles.length,b=d?g:l;if(b<f){c!==f&&(this.tweenProgress=0,this.tweenFrom=b,this.lastNumberOfPieces=f),this.tweenProgress=Math.min(x,Math.max(0,this.tweenProgress+s));const E=y(this.tweenProgress,this.tweenFrom,f,x),w=Math.round(E-b);for(let C=0;C<w;C++)this.particles.push(this.getParticle());this.particlesGenerated+=w}m&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${g}`,i.width-10,i.height-20));for(let E=this.particles.length-1;E>=0;E--){const w=this.particles[E];w.update(s),(w.y>i.height||w.y<-100||w.x>i.width+100||w.x<-100)&&(d&&b<=f?this.particles[E]=this.getParticle():this.removeParticleAt(E))}return g>0||b<f},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=r}}const fb={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:oG.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class hG{constructor(e,r){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...fb,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:a,frameRate:l},canvas:c,context:u}=this,d=Math.min(s-this.lastFrameTime,50);if(l&&d<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?d%l:0),i&&(u.fillStyle="white",u.clearRect(0,0,c.width,c.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new dG(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(e){var s,i;const r=(s=this._options)==null?void 0:s.run,n=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&n===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&r===!1&&this.update()}}const fG=J.createRef();class mb extends J.Component{constructor(e){super(e),this.canvas=J.createRef(),this.canvas=e.canvasRef||fG}componentDidMount(){if(this.canvas.current){const e=E0(this.props)[0];this.confetti=new hG(this.canvas.current,e)}}componentDidUpdate(){const e=E0(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,r]=E0(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return o.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...r,style:n})}}mb.defaultProps={...fb};mb.displayName="ReactConfetti";function E0(t){const e={},r={},n={},s=[...Object.keys(fb),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const a in t){const l=t[a];s.includes(a)?e[a]=l:i.includes(a)?i[a]=l:n[a]=l}return[e,n,r]}const g2=J.forwardRef((t,e)=>o.jsx(mb,{canvasRef:e,...t})),mG=({title:t,onBack:e,actions:r})=>o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[e&&o.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:t})]}),o.jsx("div",{className:"flex gap-2",children:r})]})}),pG=({reward:t,isOpen:e,onClose:r})=>!e||!t?null:o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gray-900 border border-red-900/30 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-red-900/30",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Reward Details"}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[o.jsxs("p",{children:["Reward ID: ",t.rewardId]}),t.claimedAt&&o.jsxs("p",{className:"text-green-600",children:["Claimed:"," ",t.claimedAt.toDate?new Date(t.claimedAt.toDate()).toLocaleString():""]})]})]}),o.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:t.scanHistory&&t.scanHistory.length>0?o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4",children:["Scan History (",t.scanHistory.length," scans)"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b justify-between border-gray-700 md:table-row flex flex-col md:flex-row",children:[o.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[o.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scan #"}),o.jsx("span",{className:"hidden md:block",children:"Scan #"})]}),o.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[o.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scanned By"}),o.jsx("span",{className:"hidden md:block",children:"Scanned By"})]}),o.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[o.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Date & Time"}),o.jsx("span",{className:"hidden md:block",children:"Date & Time"})]})]})}),o.jsx("tbody",{children:t.scanHistory.map((n,s)=>{var i,a;return o.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50 md:table-row flex flex-col md:flex-row justify-center text-center md:text-left",children:[o.jsxs("td",{className:"px-4 py-3 font-medium flex flex-col md:table-cell items-center md:items-start",children:[o.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scan #"}),s+1]}),o.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[o.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scanned By"}),n.scannedBy]}),o.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[o.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Date & Time"}),(i=n.timestamp)!=null&&i.toDate?new Date(n.timestamp.toDate()).toLocaleString():""]})]},((a=n.timestamp)==null?void 0:a.seconds)+n.scannedBy)})})]})})]}):o.jsx("div",{className:"text-center text-gray-400 py-8",children:o.jsx("p",{children:"No scan history available for this reward."})})}),o.jsx("div",{className:"p-6 border-t border-red-900/30",children:o.jsx("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Close"})})]})}),gG=({rewards:t,onRewardClick:e})=>!t||t.length===0?o.jsx("div",{className:"text-gray-400 text-sm",children:"No rewards claimed."}):o.jsxs("div",{className:"space-y-4 mt-2 mb-4",children:[o.jsx("h4",{className:"text-sm font-semibold text-white",children:"Claimed Rewards"}),t.slice().reverse().map((r,n)=>o.jsxs("div",{className:"border border-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-800/50 transition-colors",onClick:()=>e(r),children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[o.jsxs("h5",{className:"text-sm font-medium text-white",children:["Reward #",t.length-n," - ",r.rewardId]}),o.jsxs("span",{className:"text-xs text-green-500 text-gray-400",children:["Claimed:"," ",r.claimedAt&&r.claimedAt.toDate?new Date(r.claimedAt.toDate()).toLocaleString():""]})]}),r.scanHistory&&r.scanHistory.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsxs("h6",{className:"text-xs font-medium text-gray-300 mb-1",children:["Scans for this reward: ",r.scanHistory.length," scans"]}),o.jsx("p",{className:"text-xs text-gray-400",children:"Click to view detailed scan history"})]})]},r.rewardId))]}),yG=({allUsers:t})=>{const[e,r]=p.useState(null),[n,s]=p.useState(!1);return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-none p-6 min-h-[460px] flex flex-col justify-start -mt-0 shadow-2xl",children:[o.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Rewards History"}),o.jsx("div",{className:"space-y-2",children:t.filter(i=>i.role==="customer").map(i=>{var a,l;return o.jsxs("div",{className:"bg-gray-800/60 rounded-lg p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[o.jsxs("span",{className:"font-semibold text-white",children:[i.name," (",i.email,")"]}),o.jsxs("span",{className:"text-xs text-gray-400",children:["Total Scans: ",((l=(a=i.currentReward)==null?void 0:a.scanHistory)==null?void 0:l.length)||0]})]}),o.jsx(gG,{rewards:i.rewards,onRewardClick:c=>{r(c),s(!0)}})]},i.id)})}),o.jsx(pG,{reward:e,isOpen:n,onClose:()=>{s(!1),r(null)}})]})},vG=({users:t,loading:e})=>{const r=s=>{switch(s){case"super_admin":return o.jsx(Ry,{className:"w-4 h-4 text-yellow-500"});case"admin":return o.jsx(Gx,{className:"w-4 h-4 text-blue-500"});default:return o.jsx(An,{className:"w-4 h-4 text-gray-400"})}},n=s=>{switch(s){case"super_admin":return"text-yellow-400";case"admin":return"text-blue-400";default:return"text-gray-400"}};return e?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}),o.jsx("span",{className:"ml-3 text-gray-400",children:"Loading users..."})]}):t.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(An,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No users found"})]}):o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map(s=>{var l;const i=s.purchaseLimit||5,a=Math.min(100,s.purchases/i*100);return o.jsxs("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-lg p-4 hover:bg-gray-800/80 transition-all duration-200",children:[o.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[r(s.role),o.jsx("span",{className:`text-sm font-medium ${n(s.role)}`,children:(s.role||"").replace("_"," ").toUpperCase()})]}),o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:"text-sm text-gray-400",children:s.lastScanAt?new Date(s.lastScanAt.toDate()).toLocaleDateString():"Never"})})]}),o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-1",children:[o.jsx("span",{className:"font-semibold text-white",children:s.name}),o.jsx("span",{className:"text-sm text-gray-400",children:s.email})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white font-medium",children:[s.purchases,"/",i]})]}),o.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${a>=100?"bg-green-500":"bg-red-500"}`,style:{width:`${a}%`}})}),o.jsxs("div",{className:"flex items-center flex-wrap justify-between text-xs text-gray-500",children:[o.jsxs("span",{children:[((l=s.rewards)==null?void 0:l.length)||0," rewards claimed"]}),o.jsx("span",{children:s.isRewardReady?"🎉 Ready!":`${i-s.purchases} to go`})]})]})]},s.id)})})},xG=({activeTab:t,onTabChange:e,userRole:r})=>{const n=[{key:"progress",label:"Progress",icon:Hr,description:"Track your stamps & rewards",color:"blue",activeColor:"from-blue-500 to-blue-600",inactiveColor:"from-blue-400/20 to-blue-500/20",borderColor:"border-blue-500/30",textColor:"text-blue-300",hoverColor:"hover:from-blue-400/30 hover:to-blue-500/30"},{key:"offers",label:"Offers",icon:it,description:"Available loyalty offers",color:"green",activeColor:"from-green-500 to-green-600",inactiveColor:"from-green-400/20 to-green-500/20",borderColor:"border-green-500/30",textColor:"text-green-300",hoverColor:"hover:from-green-400/30 hover:to-green-500/30"},{key:"card",label:"Rewards",icon:Js,description:"Your earned rewards",color:"purple",activeColor:"from-purple-500 to-purple-600",inactiveColor:"from-purple-400/20 to-purple-500/20",borderColor:"border-purple-500/30",textColor:"text-purple-300",hoverColor:"hover:from-purple-400/30 hover:to-purple-500/30"}];return o.jsx("div",{className:"bg-gradient-to-r from-gray-900/80 via-gray-800/80 to-gray-900/80 border border-gray-700/50 rounded-xl p-3 backdrop-blur-sm shadow-lg",children:o.jsx("div",{className:"flex space-x-2 h-24",children:n.map(s=>{const i=s.icon,a=t===s.key;return o.jsxs("button",{onClick:()=>e(s.key),className:`flex-1 flex flex-col items-center justify-center rounded-lg transition-all duration-300 ease-out group relative overflow-hidden min-h-[88px] ${a?`bg-gradient-to-b ${s.activeColor} border-2 ${s.borderColor} text-white shadow-lg shadow-${s.color}-500/25`:`bg-gradient-to-b ${s.inactiveColor} border-2 border-transparent text-gray-400 ${s.hoverColor} hover:border-${s.color}-500/30 hover:text-${s.color}-300`}`,children:[o.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${a?`bg-gradient-to-b from-${s.color}-500/10 to-${s.color}-400/10`:"bg-transparent"}`}),a&&o.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-${s.color}-400 to-${s.color}-500`}),o.jsx(i,{className:`w-6 h-6 mb-2 transition-all duration-300 ${a?"text-white scale-110 drop-shadow-sm relative z-10":`group-hover:scale-110 group-hover:text-${s.color}-300`}`}),o.jsx("span",{className:`text-sm font-bold transition-all duration-300 mb-1 ${a?"text-white font-extrabold drop-shadow-lg relative z-10":"text-gray-300 group-hover:text-white"}`,children:s.label}),o.jsx("span",{className:`text-xs text-center transition-all duration-300 leading-tight ${a?"text-white font-semibold drop-shadow-lg relative z-10":"text-gray-400 group-hover:text-gray-200"}`,children:s.description}),o.jsx("div",{className:`absolute inset-0 rounded-lg transition-all duration-300 ${a?`ring-2 ring-${s.color}-500/30`:`group-hover:ring-1 group-hover:ring-${s.color}-500/20`}`}),a&&o.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-b from-${s.color}-500/5 to-transparent`})]},s.key)})})})},wG=({user:t,userPurchaseLimit:e,settings:r,purchasesRemaining:n,onViewReward:s,currentOffer:i})=>{var C,I,j;const[a,l]=p.useState({inProgress:!0,completed:!1}),[c,u]=p.useState(!1),d=t.purchases||0,f=((C=t.completedRewards)==null?void 0:C.filter(V=>{var N,S;return(((N=V.scanHistory)==null?void 0:N.reduce((P,O)=>P+(O.stampsEarned||1),0))||0)>=(((S=V.offerSnapshot)==null?void 0:S.stampRequirement)||0)}))||[],m=((I=t.completedRewards)==null?void 0:I.filter(V=>{var N,S;return(((N=V.scanHistory)==null?void 0:N.reduce((P,O)=>P+(O.stampsEarned||1),0))||0)<(((S=V.offerSnapshot)==null?void 0:S.stampRequirement)||0)}))||[],y=f.filter(V=>!V.claimedAt),x=((j=t.completedRewards)==null?void 0:j.reduce((V,R)=>{var N;return V+(((N=R.scanHistory)==null?void 0:N.reduce((S,P)=>S+(P.stampsEarned||1),0))||0)},0))||0,g=Math.max(d,x),b=3,E=c?m:m.slice(0,b);c||f.slice(0,b);const w=V=>{l(R=>({...R,[V]:!R[V]}))};return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-xl p-6 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsxs("div",{className:"flex items-center justify-center mb-3",children:[o.jsx(Iy,{className:"w-8 h-8 text-yellow-400 mr-3"}),o.jsx("h3",{className:"text-2xl font-bold text-white",children:"Life Stamps"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-5xl font-black text-white drop-shadow-[0_2px_8px_#000a] mb-2",children:g}),o.jsx("div",{className:"text-lg text-gray-300 font-medium",children:"Total Stamps Collected Since Joining"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-blue-400",children:f.length}),o.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards Completed"})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-green-400",children:m.length}),o.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards in Progress"})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-yellow-400",children:y.length}),o.jsx("div",{className:"text-gray-300 text-xs",children:"Ready to Redeem"})]})]}),m.length>0&&o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>w("inProgress"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Hr,{className:"w-4 h-4 text-blue-400 mr-2"}),o.jsxs("span",{className:"text-blue-300 text-sm font-medium",children:["Current Active Rewards (",m.length,")"]})]}),a.inProgress?o.jsx(wm,{className:"w-4 h-4 text-blue-400"}):o.jsx(Ku,{className:"w-4 h-4 text-blue-400"})]}),a.inProgress&&o.jsxs("div",{className:"space-y-3",children:[E.map((V,R)=>{var M,k,B;const N=((M=V.scanHistory)==null?void 0:M.reduce((z,Q)=>z+(Q.stampsEarned||1),0))||0,S=((k=V.offerSnapshot)==null?void 0:k.stampRequirement)||0,P=S>0?Math.min(N/S*100,100):0,O=Math.max(0,S-N);return o.jsx("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-3",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-2",children:((B=V.offerSnapshot)==null?void 0:B.offerName)||"Loyalty Reward"}),o.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white font-medium",children:[N," / ",S," stamps"]})]}),o.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3",children:o.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${P}%`}})}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-gray-300 text-xs mb-2",children:V.rewardDescription}),o.jsx("div",{className:"text-blue-300 text-xs",children:O>0?`${O} more stamps needed`:"🎉 Reward ready to redeem!"})]})]})},V.rewardId)}),m.length>b&&o.jsx("div",{className:"text-center pt-2",children:o.jsx(_e,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${m.length} Rewards`})})]})]})}),m.length===0&&o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-gray-400 text-sm mb-2",children:f.length>0?"All rewards completed! 🎉":"No active rewards yet"}),o.jsx("div",{className:"text-gray-500 text-xs",children:f.length>0?"Check the Offers tab to start a new reward":"Visit the Offers tab to start collecting stamps"})]})}),o.jsx("div",{className:"text-center mb-4",children:o.jsxs("div",{className:"flex items-center justify-center text-gray-400 text-xs",children:[o.jsx(Fx,{className:"w-3 h-3 mr-1"}),"Member since"," ",t.createdAt.toDate().toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"short",year:"numeric"})]})}),t.isRewardReady&&s&&o.jsx("div",{className:"text-center",children:o.jsxs(_e,{onClick:s,className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-medium px-6 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[o.jsx(ru,{className:"w-4 h-4 mr-2"}),"View Reward"]})})]})};var bG=Object.defineProperty,Ym=Object.getOwnPropertySymbols,y2=Object.prototype.hasOwnProperty,v2=Object.prototype.propertyIsEnumerable,uN=(t,e,r)=>e in t?bG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pv=(t,e)=>{for(var r in e||(e={}))y2.call(e,r)&&uN(t,r,e[r]);if(Ym)for(var r of Ym(e))v2.call(e,r)&&uN(t,r,e[r]);return t},gv=(t,e)=>{var r={};for(var n in t)y2.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Ym)for(var n of Ym(t))e.indexOf(n)<0&&v2.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ea;(t=>{const e=class $e{constructor(c,u,d,f){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<$e.MIN_VERSION||c>$e.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const y=this.addEccAndInterleave(d);if(this.drawCodewords(y),f==-1){let x=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);const b=this.getPenaltyScore();b<x&&(f=g,x=b),this.applyMask(g)}}s(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,u){const d=t.QrSegment.makeSegments(c);return $e.encodeSegments(d,u)}static encodeBinary(c,u){const d=t.QrSegment.makeBytes(c);return $e.encodeSegments([d],u)}static encodeSegments(c,u,d=1,f=40,m=-1,y=!0){if(!($e.MIN_VERSION<=d&&d<=f&&f<=$e.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,g;for(x=d;;x++){const C=$e.getNumDataCodewords(x,u)*8,I=a.getTotalBits(c,x);if(I<=C){g=I;break}if(x>=f)throw new RangeError("Data too long")}for(const C of[$e.Ecc.MEDIUM,$e.Ecc.QUARTILE,$e.Ecc.HIGH])y&&g<=$e.getNumDataCodewords(x,C)*8&&(u=C);let b=[];for(const C of c){r(C.mode.modeBits,4,b),r(C.numChars,C.mode.numCharCountBits(x),b);for(const I of C.getData())b.push(I)}s(b.length==g);const E=$e.getNumDataCodewords(x,u)*8;s(b.length<=E),r(0,Math.min(4,E-b.length),b),r(0,(8-b.length%8)%8,b),s(b.length%8==0);for(let C=236;b.length<E;C^=253)r(C,8,b);let w=[];for(;w.length*8<b.length;)w.push(0);return b.forEach((C,I)=>w[I>>>3]|=C<<7-(I&7)),new $e(x,u,w,m)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let d=0;d<u;d++)for(let f=0;f<u;f++)d==0&&f==0||d==0&&f==u-1||d==u-1&&f==0||this.drawAlignmentPattern(c[d],c[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let d=u;for(let m=0;m<10;m++)d=d<<1^(d>>>9)*1335;const f=(u<<10|d)^21522;s(f>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,n(f,m));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,n(f,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,n(f,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,n(f,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let d=0;d<12;d++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;s(u>>>18==0);for(let d=0;d<18;d++){const f=n(u,d),m=this.size-11+d%3,y=Math.floor(d/3);this.setFunctionModule(m,y,f),this.setFunctionModule(y,m,f)}}drawFinderPattern(c,u){for(let d=-4;d<=4;d++)for(let f=-4;f<=4;f++){const m=Math.max(Math.abs(f),Math.abs(d)),y=c+f,x=u+d;0<=y&&y<this.size&&0<=x&&x<this.size&&this.setFunctionModule(y,x,m!=2&&m!=4)}}drawAlignmentPattern(c,u){for(let d=-2;d<=2;d++)for(let f=-2;f<=2;f++)this.setFunctionModule(c+f,u+d,Math.max(Math.abs(f),Math.abs(d))!=1)}setFunctionModule(c,u,d){this.modules[u][c]=d,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,d=this.errorCorrectionLevel;if(c.length!=$e.getNumDataCodewords(u,d))throw new RangeError("Invalid argument");const f=$e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u],m=$e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u],y=Math.floor($e.getNumRawDataModules(u)/8),x=f-y%f,g=Math.floor(y/f);let b=[];const E=$e.reedSolomonComputeDivisor(m);for(let C=0,I=0;C<f;C++){let j=c.slice(I,I+g-m+(C<x?0:1));I+=j.length;const V=$e.reedSolomonComputeRemainder(j,E);C<x&&j.push(0),b.push(j.concat(V))}let w=[];for(let C=0;C<b[0].length;C++)b.forEach((I,j)=>{(C!=g-m||j>=x)&&w.push(I[C])});return s(w.length==y),w}drawCodewords(c){if(c.length!=Math.floor($e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let f=0;f<this.size;f++)for(let m=0;m<2;m++){const y=d-m,g=(d+1&2)==0?this.size-1-f:f;!this.isFunction[g][y]&&u<c.length*8&&(this.modules[g][y]=n(c[u>>>3],7-(u&7)),u++)}}s(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let d=0;d<this.size;d++){let f;switch(c){case 0:f=(d+u)%2==0;break;case 1:f=u%2==0;break;case 2:f=d%3==0;break;case 3:f=(d+u)%3==0;break;case 4:f=(Math.floor(d/3)+Math.floor(u/2))%2==0;break;case 5:f=d*u%2+d*u%3==0;break;case 6:f=(d*u%2+d*u%3)%2==0;break;case 7:f=((d+u)%2+d*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][d]&&f&&(this.modules[u][d]=!this.modules[u][d])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let y=!1,x=0,g=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[m][b]==y?(x++,x==5?c+=$e.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,g),y||(c+=this.finderPenaltyCountPatterns(g)*$e.PENALTY_N3),y=this.modules[m][b],x=1);c+=this.finderPenaltyTerminateAndCount(y,x,g)*$e.PENALTY_N3}for(let m=0;m<this.size;m++){let y=!1,x=0,g=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][m]==y?(x++,x==5?c+=$e.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,g),y||(c+=this.finderPenaltyCountPatterns(g)*$e.PENALTY_N3),y=this.modules[b][m],x=1);c+=this.finderPenaltyTerminateAndCount(y,x,g)*$e.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let y=0;y<this.size-1;y++){const x=this.modules[m][y];x==this.modules[m][y+1]&&x==this.modules[m+1][y]&&x==this.modules[m+1][y+1]&&(c+=$e.PENALTY_N2)}let u=0;for(const m of this.modules)u=m.reduce((y,x)=>y+(x?1:0),u);const d=this.size*this.size,f=Math.ceil(Math.abs(u*20-d*10)/d)-1;return s(0<=f&&f<=9),c+=f*$e.PENALTY_N4,s(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let d=[6];for(let f=this.size-7;d.length<c;f-=u)d.splice(1,0,f);return d}}static getNumRawDataModules(c){if(c<$e.MIN_VERSION||c>$e.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const d=Math.floor(c/7)+2;u-=(25*d-10)*d-55,c>=7&&(u-=36)}return s(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor($e.getNumRawDataModules(c)/8)-$e.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*$e.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let f=0;f<c-1;f++)u.push(0);u.push(1);let d=1;for(let f=0;f<c;f++){for(let m=0;m<u.length;m++)u[m]=$e.reedSolomonMultiply(u[m],d),m+1<u.length&&(u[m]^=u[m+1]);d=$e.reedSolomonMultiply(d,2)}return u}static reedSolomonComputeRemainder(c,u){let d=u.map(f=>0);for(const f of c){const m=f^d.shift();d.push(0),u.forEach((y,x)=>d[x]^=$e.reedSolomonMultiply(y,m))}return d}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let d=0;for(let f=7;f>=0;f--)d=d<<1^(d>>>7)*285,d^=(u>>>f&1)*c;return s(d>>>8==0),d}finderPenaltyCountPatterns(c){const u=c[1];s(u<=this.size*3);const d=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(d&&c[0]>=u*4&&c[6]>=u?1:0)+(d&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,d){return c&&(this.finderPenaltyAddHistory(u,d),u=0),u+=this.size,this.finderPenaltyAddHistory(u,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let d=c-1;d>=0;d--)u.push(l>>>d&1)}function n(l,c){return(l>>>c&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const i=class kt{constructor(c,u,d){if(this.mode=c,this.numChars=u,this.bitData=d,u<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(c){let u=[];for(const d of c)r(d,8,u);return new kt(kt.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!kt.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let d=0;d<c.length;){const f=Math.min(c.length-d,3);r(parseInt(c.substring(d,d+f),10),f*3+1,u),d+=f}return new kt(kt.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!kt.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],d;for(d=0;d+2<=c.length;d+=2){let f=kt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d))*45;f+=kt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d+1)),r(f,11,u)}return d<c.length&&r(kt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d)),6,u),new kt(kt.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:kt.isNumeric(c)?[kt.makeNumeric(c)]:kt.isAlphanumeric(c)?[kt.makeAlphanumeric(c)]:[kt.makeBytes(kt.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,u);else if(c<16384)r(2,2,u),r(c,14,u);else if(c<1e6)r(6,3,u),r(c,21,u);else throw new RangeError("ECI assignment value out of range");return new kt(kt.Mode.ECI,0,u)}static isNumeric(c){return kt.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return kt.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let d=0;for(const f of c){const m=f.mode.numCharCountBits(u);if(f.numChars>=1<<m)return 1/0;d+=4+m+f.bitData.length}return d}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let d=0;d<c.length;d++)c.charAt(d)!="%"?u.push(c.charCodeAt(d)):(u.push(parseInt(c.substring(d+1,d+3),16)),d+=2);return u}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=i;t.QrSegment=i})(Ea||(Ea={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Ea||(Ea={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Ea||(Ea={}));var vl=Ea;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var EG={L:vl.QrCode.Ecc.LOW,M:vl.QrCode.Ecc.MEDIUM,Q:vl.QrCode.Ecc.QUARTILE,H:vl.QrCode.Ecc.HIGH},x2=128,w2="L",b2="#FFFFFF",E2="#000000",C2=!1,N2=1,CG=4,NG=0,_G=.1;function _2(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(a,l){if(!a&&i!==null){r.push(`M${i+e} ${s+e}h${l-i}v1H${i+e}z`),i=null;return}if(l===n.length-1){if(!a)return;i===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${i+e},${s+e} h${l+1-i}v1H${i+e}z`);return}a&&i===null&&(i=l)})}),r.join("")}function T2(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function TG(t,e,r,n){if(n==null)return null;const s=t.length+r*2,i=Math.floor(e*_G),a=s/e,l=(n.width||i)*a,c=(n.height||i)*a,u=n.x==null?t.length/2-l/2:n.x*a,d=n.y==null?t.length/2-c/2:n.y*a,f=n.opacity==null?1:n.opacity;let m=null;if(n.excavate){let x=Math.floor(u),g=Math.floor(d),b=Math.ceil(l+u-x),E=Math.ceil(c+d-g);m={x,y:g,w:b,h:E}}const y=n.crossOrigin;return{x:u,y:d,h:c,w:l,excavation:m,opacity:f,crossOrigin:y}}function AG(t,e){return e!=null?Math.max(Math.floor(e),0):t?CG:NG}function A2({value:t,level:e,minVersion:r,includeMargin:n,marginSize:s,imageSettings:i,size:a,boostLevel:l}){let c=J.useMemo(()=>{const x=(Array.isArray(t)?t:[t]).reduce((g,b)=>(g.push(...vl.QrSegment.makeSegments(b)),g),[]);return vl.QrCode.encodeSegments(x,EG[e],r,void 0,void 0,l)},[t,e,r,l]);const{cells:u,margin:d,numCells:f,calculatedImageSettings:m}=J.useMemo(()=>{let y=c.getModules();const x=AG(n,s),g=y.length+x*2,b=TG(y,a,x,i);return{cells:y,margin:x,numCells:g,calculatedImageSettings:b}},[c,a,i,n,s]);return{qrcode:c,margin:d,cells:u,numCells:f,calculatedImageSettings:m}}var SG=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),RG=J.forwardRef(function(e,r){const n=e,{value:s,size:i=x2,level:a=w2,bgColor:l=b2,fgColor:c=E2,includeMargin:u=C2,minVersion:d=N2,boostLevel:f,marginSize:m,imageSettings:y}=n,g=gv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:b}=g,E=gv(g,["style"]),w=y==null?void 0:y.src,C=J.useRef(null),I=J.useRef(null),j=J.useCallback(B=>{C.current=B,typeof r=="function"?r(B):r&&(r.current=B)},[r]),[V,R]=J.useState(!1),{margin:N,cells:S,numCells:P,calculatedImageSettings:O}=A2({value:s,level:a,minVersion:d,boostLevel:f,includeMargin:u,marginSize:m,imageSettings:y,size:i});J.useEffect(()=>{if(C.current!=null){const B=C.current,z=B.getContext("2d");if(!z)return;let Q=S;const Z=I.current,U=O!=null&&Z!==null&&Z.complete&&Z.naturalHeight!==0&&Z.naturalWidth!==0;U&&O.excavation!=null&&(Q=T2(S,O.excavation));const H=window.devicePixelRatio||1;B.height=B.width=i*H;const se=i/P*H;z.scale(se,se),z.fillStyle=l,z.fillRect(0,0,P,P),z.fillStyle=c,SG?z.fill(new Path2D(_2(Q,N))):S.forEach(function(re,ce){re.forEach(function(he,Te){he&&z.fillRect(Te+N,ce+N,1,1)})}),O&&(z.globalAlpha=O.opacity),U&&z.drawImage(Z,O.x+N,O.y+N,O.w,O.h)}}),J.useEffect(()=>{R(!1)},[w]);const M=pv({height:i,width:i},b);let k=null;return w!=null&&(k=J.createElement("img",{src:w,key:w,style:{display:"none"},onLoad:()=>{R(!0)},ref:I,crossOrigin:O==null?void 0:O.crossOrigin})),J.createElement(J.Fragment,null,J.createElement("canvas",pv({style:M,height:i,width:i,ref:j,role:"img"},E)),k)});RG.displayName="QRCodeCanvas";var S2=J.forwardRef(function(e,r){const n=e,{value:s,size:i=x2,level:a=w2,bgColor:l=b2,fgColor:c=E2,includeMargin:u=C2,minVersion:d=N2,boostLevel:f,title:m,marginSize:y,imageSettings:x}=n,g=gv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:b,cells:E,numCells:w,calculatedImageSettings:C}=A2({value:s,level:a,minVersion:d,boostLevel:f,includeMargin:u,marginSize:y,imageSettings:x,size:i});let I=E,j=null;x!=null&&C!=null&&(C.excavation!=null&&(I=T2(E,C.excavation)),j=J.createElement("image",{href:x.src,height:C.h,width:C.w,x:C.x+b,y:C.y+b,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const V=_2(I,b);return J.createElement("svg",pv({height:i,width:i,viewBox:`0 0 ${w} ${w}`,ref:r,role:"img"},g),!!m&&J.createElement("title",null,m),J.createElement("path",{fill:l,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),J.createElement("path",{fill:c,d:V,shapeRendering:"crispEdges"}),j)});S2.displayName="QRCodeSVG";const R2=({qrData:t,isOpen:e,onClose:r})=>{if(!e)return null;const n=JSON.stringify(t);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-white flex-1 text-center truncate",children:t.offerName}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors ml-4",children:o.jsx(ms,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-6 flex justify-center",children:o.jsx("div",{className:"p-4 bg-white rounded-lg",children:o.jsx(S2,{value:n,size:200,level:"M",includeMargin:!0})})})]})})},IG=({user:t,offers:e})=>{var M,k;const[r,n]=p.useState(!1),[s,i]=p.useState(null),[a,l]=p.useState({inProgress:!0,completed:!0}),[c,u]=p.useState(!1),[d,f]=p.useState(!1),m=t.completedRewards||[],y=m.filter(B=>{var Q,Z;return(((Q=B.scanHistory)==null?void 0:Q.reduce((U,H)=>U+(H.stampsEarned||1),0))||0)<(((Z=B.offerSnapshot)==null?void 0:Z.stampRequirement)||0)}),x=m.filter(B=>{var Q,Z;return(((Q=B.scanHistory)==null?void 0:Q.reduce((U,H)=>U+(H.stampsEarned||1),0))||0)>=(((Z=B.offerSnapshot)==null?void 0:Z.stampRequirement)||0)}),g=x.filter(B=>!B.claimedAt),b=x.filter(B=>!!B.claimedAt),E=(B,z)=>{const Q=B.createdAt.toDate().getTime();return z.createdAt.toDate().getTime()-Q},w=[...y].sort(E),C=[...g].sort(E),I=[...b].sort(E),j=3,V=c?w:w.slice(0,j),R=c?C:C.slice(0,j),N=d?I:I.slice(0,j),S=B=>{i(B),n(!0)},P=()=>{n(!1),i(null)},O=B=>{l(z=>({...z,[B]:!z[B]}))};return o.jsxs("div",{className:"space-y-6",children:[y.length>0&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 hover:bg-blue-900/30 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>O("inProgress"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Hr,{className:"w-5 h-5 text-blue-400 mr-2 animate-pulse"}),o.jsxs("h3",{className:"text-lg font-semibold text-blue-300",children:["Rewards in Progress (",y.length,")"]})]}),a.inProgress?o.jsx(wm,{className:"w-5 h-5 text-blue-400"}):o.jsx(Ku,{className:"w-5 h-5 text-blue-400"})]}),a.inProgress&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-4",children:V.map(B=>{var H,se,re,ce;const z=((H=B.scanHistory)==null?void 0:H.reduce((he,Te)=>he+(Te.stampsEarned||1),0))||0,Q=((se=B.offerSnapshot)==null?void 0:se.stampRequirement)||0,Z=Math.min(z/Q*100,100),U=Math.max(0,Q-z);return o.jsxs("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-4 hover:bg-blue-900/20 hover:border-blue-500/30 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-blue-200 transition-colors duration-200",children:((re=B.offerSnapshot)==null?void 0:re.offerName)||"Loyalty Reward"}),o.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((ce=B.offerSnapshot)==null?void 0:ce.description)||"Collect stamps to earn this reward"}),o.jsx("p",{className:"text-blue-300 text-xs font-medium",children:B.rewardDescription})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm text-white font-medium",children:[z," / ",Q]}),o.jsx("div",{className:"text-xs text-gray-400",children:"stamps collected"})]})]}),o.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3 overflow-hidden",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full transition-all duration-1000 ease-out shadow-sm",style:{width:`${Z}%`}})}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-gray-400",children:U>0?`${U} more stamps needed`:"🎉 Ready to redeem!"}),o.jsxs("span",{className:"text-blue-300 font-medium",children:["Started"," ",B.createdAt.toDate().toLocaleDateString()]})]})]},B.rewardId)})}),y.length>j&&o.jsx("div",{className:"text-center pt-4",children:o.jsx(_e,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${y.length} In-Progress Rewards`})})]})]}),(g.length>0||b.length>0)&&o.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 hover:bg-green-900/30 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-green-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>O("completed"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Iy,{className:"w-5 h-5 text-green-400 mr-2 animate-pulse"}),o.jsxs("h3",{className:"text-lg font-semibold text-green-300",children:["Completed Rewards (",g.length+b.length,")"]})]}),a.completed?o.jsx(wm,{className:"w-5 h-5 text-green-400"}):o.jsx(Ku,{className:"w-5 h-5 text-green-400"})]}),a.completed&&o.jsxs(o.Fragment,{children:[g.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h4",{className:"text-md font-medium text-green-200 mb-3 flex items-center",children:[o.jsx(it,{className:"w-4 h-4 mr-2 text-green-400"}),"Ready to Redeem (",g.length,")"]}),o.jsx("div",{className:"space-y-4",children:R.map(B=>{var Q,Z,U;const z=!!B.claimedAt;return o.jsxs("div",{className:`border rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group ${z?"bg-gray-800/30 border-gray-600/30":"bg-green-900/10 border-green-600/20 hover:bg-green-900/20 hover:border-green-500/30"}`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-green-200 transition-colors duration-200",children:((Q=B.offerSnapshot)==null?void 0:Q.offerName)||"Loyalty Reward"}),o.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((Z=B.offerSnapshot)==null?void 0:Z.description)||"Reward description"}),o.jsx("p",{className:"text-green-300 text-xs font-medium",children:B.rewardDescription})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${z?"bg-gray-700 text-gray-300":"bg-green-700 text-green-300 animate-pulse"}`,children:z?"REDEEMED":"AVAILABLE"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-400",children:["Earned"," ",B.createdAt.toDate().toLocaleDateString()]}),z&&o.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(U=B.claimedAt)==null?void 0:U.toDate().toLocaleDateString()]})]}),!z&&o.jsx("div",{className:"mt-3",children:o.jsxs(_e,{onClick:()=>S(B),className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-medium py-2 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-green-500/25",children:[o.jsx(it,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})})]},B.rewardId)})})]}),b.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-md font-medium text-gray-300 mb-3 flex items-center",children:[o.jsx(Iy,{className:"w-4 h-4 mr-2 text-gray-400"}),"Previously Redeemed (",b.length,")"]}),o.jsx("div",{className:"space-y-4",children:N.map(B=>{var z,Q,Z;return o.jsxs("div",{className:"bg-gray-800/30 border border-gray-600/30 rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-gray-200 transition-colors duration-200",children:((z=B.offerSnapshot)==null?void 0:z.offerName)||"Loyalty Reward"}),o.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((Q=B.offerSnapshot)==null?void 0:Q.description)||"Reward description"}),o.jsx("p",{className:"text-gray-400 text-xs font-medium",children:B.rewardDescription})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:"text-xs px-2 py-1 rounded-full font-medium bg-gray-700 text-gray-300",children:"REDEEMED"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-400",children:["Earned"," ",B.createdAt.toDate().toLocaleDateString()]}),o.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(Z=B.claimedAt)==null?void 0:Z.toDate().toLocaleDateString()]})]})]},B.rewardId)})})]}),(g.length>j||b.length>j)&&o.jsx("div",{className:"text-center pt-4",children:o.jsx(_e,{onClick:()=>f(!d),variant:"outline",size:"sm",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-colors duration-200",children:d?"Show Less":`Show All ${g.length+b.length} Completed Rewards`})})]})]}),m.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-xl p-8 hover:bg-gray-800/40 transition-all duration-300",children:[o.jsx(it,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No Rewards Yet"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Start collecting stamps from the Offers tab to earn your first reward!"})]})}),r&&s&&o.jsx(R2,{qrData:{userId:t.id,userEmail:t.email,userName:t.name,offerId:((M=s.offerSnapshot)==null?void 0:M.offerId)||"",offerName:((k=s.offerSnapshot)==null?void 0:k.offerName)||"Reward Redemption",stampsPerScan:1,timestamp:new Date().toISOString(),rewardId:s.rewardId,action:"redeem_reward"},isOpen:r,onClose:P})]})},dN=[{key:"profile",label:"Edit Profile",route:"profile",colorClass:"border-cyan-500 text-cyan-400 hover:bg-cyan-500 hover:text-white",roles:["customer","admin","super_admin"],icon:Js},{key:"scan",label:"Scan",route:"/scan",colorClass:"border-green-500 text-green-400 hover:bg-green-500 hover:text-white",roles:["admin","super_admin"],icon:G3},{key:"settings",label:"Settings",route:"/settings",colorClass:"border-blue-500 text-blue-400 hover:bg-blue-500 hover:text-white",roles:["super_admin"],icon:xp},{key:"users",label:"Users",route:"/users",colorClass:"border-purple-500 text-purple-400 hover:bg-purple-500 hover:text-white",roles:["super_admin"],icon:An},{key:"logout",label:"Logout",route:"logout",colorClass:"border-red-500 text-red-400 hover:bg-red-500 hover:text-white",roles:["customer","admin","super_admin"],icon:kA}];var jG=p.createContext(void 0);function eg(t){const e=p.useContext(jG);return t||e||"ltr"}var C0=0;function I2(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??hN()),document.body.insertAdjacentElement("beforeend",t[1]??hN()),C0++,()=>{C0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),C0--}},[])}function hN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var N0="focusScope.autoFocusOnMount",_0="focusScope.autoFocusOnUnmount",fN={bubbles:!1,cancelable:!0},PG="FocusScope",pb=p.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=p.useState(null),u=_r(s),d=_r(i),f=p.useRef(null),m=dt(e,g=>c(g)),y=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let g=function(C){if(y.paused||!l)return;const I=C.target;l.contains(I)?f.current=I:ji(f.current,{select:!0})},b=function(C){if(y.paused||!l)return;const I=C.relatedTarget;I!==null&&(l.contains(I)||ji(f.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const j of C)j.removedNodes.length>0&&ji(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const w=new MutationObserver(E);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),w.disconnect()}}},[n,l,y.paused]),p.useEffect(()=>{if(l){pN.add(y);const g=document.activeElement;if(!l.contains(g)){const E=new CustomEvent(N0,fN);l.addEventListener(N0,u),l.dispatchEvent(E),E.defaultPrevented||(kG(FG(j2(l)),{select:!0}),document.activeElement===g&&ji(l))}return()=>{l.removeEventListener(N0,u),setTimeout(()=>{const E=new CustomEvent(_0,fN);l.addEventListener(_0,d),l.dispatchEvent(E),E.defaultPrevented||ji(g??document.body,{select:!0}),l.removeEventListener(_0,d),pN.remove(y)},0)}}},[l,u,d,y]);const x=p.useCallback(g=>{if(!r&&!n||y.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,E=document.activeElement;if(b&&E){const w=g.currentTarget,[C,I]=MG(w);C&&I?!g.shiftKey&&E===I?(g.preventDefault(),r&&ji(C,{select:!0})):g.shiftKey&&E===C&&(g.preventDefault(),r&&ji(I,{select:!0})):E===w&&g.preventDefault()}},[r,n,y.paused]);return o.jsx(He.div,{tabIndex:-1,...a,ref:m,onKeyDown:x})});pb.displayName=PG;function kG(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(ji(n,{select:e}),document.activeElement!==r)return}function MG(t){const e=j2(t),r=mN(e,t),n=mN(e.reverse(),t);return[r,n]}function j2(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function mN(t,e){for(const r of t)if(!DG(r,{upTo:e}))return r}function DG(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function OG(t){return t instanceof HTMLInputElement&&"select"in t}function ji(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&OG(t)&&e&&t.select()}}var pN=LG();function LG(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=gN(t,e),t.unshift(e)},remove(e){var r;t=gN(t,e),(r=t[0])==null||r.resume()}}}function gN(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function FG(t){return t.filter(e=>e.tagName!=="A")}function VG(t,e=[]){let r=[];function n(i,a){const l=p.createContext(a),c=r.length;r=[...r,a];function u(f){const{scope:m,children:y,...x}=f,g=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>x,Object.values(x));return o.jsx(g.Provider,{value:b,children:y})}function d(f,m){const y=(m==null?void 0:m[t][c])||l,x=p.useContext(y);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const s=()=>{const i=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,BG(s,...e)]}function BG(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var T0="rovingFocusGroup.onEntryFocus",UG={bubbles:!1,cancelable:!0},tg="RovingFocusGroup",[yv,P2,qG]=_d(tg),[GG,rg]=VG(tg,[qG]),[$G,zG]=GG(tg),k2=p.forwardRef((t,e)=>o.jsx(yv.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(yv.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(HG,{...t,ref:e})})}));k2.displayName=tg;var HG=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,m=p.useRef(null),y=dt(e,m),x=eg(i),[g=null,b]=Yu({prop:a,defaultProp:l,onChange:c}),[E,w]=p.useState(!1),C=_r(u),I=P2(r),j=p.useRef(!1),[V,R]=p.useState(0);return p.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(T0,C),()=>N.removeEventListener(T0,C)},[C]),o.jsx($G,{scope:r,orientation:n,dir:x,loop:s,currentTabStopId:g,onItemFocus:p.useCallback(N=>b(N),[b]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>R(N=>N+1),[]),onFocusableItemRemove:p.useCallback(()=>R(N=>N-1),[]),children:o.jsx(He.div,{tabIndex:E||V===0?-1:0,"data-orientation":n,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:xe(t.onMouseDown,()=>{j.current=!0}),onFocus:xe(t.onFocus,N=>{const S=!j.current;if(N.target===N.currentTarget&&S&&!E){const P=new CustomEvent(T0,UG);if(N.currentTarget.dispatchEvent(P),!P.defaultPrevented){const O=I().filter(Q=>Q.focusable),M=O.find(Q=>Q.active),k=O.find(Q=>Q.id===g),z=[M,k,...O].filter(Boolean).map(Q=>Q.ref.current);O2(z,d)}}j.current=!1}),onBlur:xe(t.onBlur,()=>w(!1))})})}),M2="RovingFocusGroupItem",D2=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...a}=t,l=la(),c=i||l,u=zG(M2,r),d=u.currentTabStopId===c,f=P2(r),{onFocusableItemAdd:m,onFocusableItemRemove:y}=u;return p.useEffect(()=>{if(n)return m(),()=>y()},[n,m,y]),o.jsx(yv.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:o.jsx(He.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:xe(t.onMouseDown,x=>{n?u.onItemFocus(c):x.preventDefault()}),onFocus:xe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:xe(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const g=YG(x,u.orientation,u.dir);if(g!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let E=f().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")E.reverse();else if(g==="prev"||g==="next"){g==="prev"&&E.reverse();const w=E.indexOf(x.currentTarget);E=u.loop?KG(E,w+1):E.slice(w+1)}setTimeout(()=>O2(E))}})})})});D2.displayName=M2;var WG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function QG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function YG(t,e,r){const n=QG(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return WG[n]}function O2(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function KG(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var L2=k2,F2=D2,JG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Xa=new WeakMap,uf=new WeakMap,df={},A0=0,V2=function(t){return t&&(t.host||V2(t.parentNode))},XG=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=V2(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},ZG=function(t,e,r,n){var s=XG(e,Array.isArray(t)?t:[t]);df[r]||(df[r]=new WeakMap);var i=df[r],a=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var y=m.getAttribute(n),x=y!==null&&y!=="false",g=(Xa.get(m)||0)+1,b=(i.get(m)||0)+1;Xa.set(m,g),i.set(m,b),a.push(m),g===1&&x&&uf.set(m,!0),b===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return d(e),l.clear(),A0++,function(){a.forEach(function(f){var m=Xa.get(f)-1,y=i.get(f)-1;Xa.set(f,m),i.set(f,y),m||(uf.has(f)||f.removeAttribute(n),uf.delete(f)),y||f.removeAttribute(r)}),A0--,A0||(Xa=new WeakMap,Xa=new WeakMap,uf=new WeakMap,df={})}},B2=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=JG(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),ZG(n,s,r,"aria-hidden")):function(){return null}},Uf="right-scroll-bar-position",qf="width-before-scroll-bar",e$="with-scroll-bars-hidden",t$="--removed-body-scroll-bar-size";function S0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function r$(t,e){var r=p.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var n$=typeof window<"u"?p.useLayoutEffect:p.useEffect,yN=new WeakMap;function s$(t,e){var r=r$(null,function(n){return t.forEach(function(s){return S0(s,n)})});return n$(function(){var n=yN.get(r);if(n){var s=new Set(n),i=new Set(t),a=r.current;s.forEach(function(l){i.has(l)||S0(l,null)}),i.forEach(function(l){s.has(l)||S0(l,a)})}yN.set(r,t)},[t]),r}function i$(t){return t}function o$(t,e){e===void 0&&(e=i$);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var a=e(i,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(n=!0;r.length;){var a=r;r=[],a.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(i),a=r}var c=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),r}}}};return s}function a$(t){t===void 0&&(t={});var e=o$(null);return e.options=ds({async:!0,ssr:!1},t),e}var U2=function(t){var e=t.sideCar,r=Fd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,ds({},r))};U2.isSideCarExport=!0;function l$(t,e){return t.useMedium(e),U2}var q2=a$(),R0=function(){},ng=p.forwardRef(function(t,e){var r=p.useRef(null),n=p.useState({onScrollCapture:R0,onWheelCapture:R0,onTouchMoveCapture:R0}),s=n[0],i=n[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,m=t.sideCar,y=t.noIsolation,x=t.inert,g=t.allowPinchZoom,b=t.as,E=b===void 0?"div":b,w=t.gapMode,C=Fd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=m,j=s$([r,e]),V=ds(ds({},C),s);return p.createElement(p.Fragment,null,d&&p.createElement(I,{sideCar:q2,removeScrollBar:u,shards:f,noIsolation:y,inert:x,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:w}),a?p.cloneElement(p.Children.only(l),ds(ds({},V),{ref:j})):p.createElement(E,ds({},V,{className:c,ref:j}),l))});ng.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ng.classNames={fullWidth:qf,zeroRight:Uf};var c$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function u$(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=c$();return e&&t.setAttribute("nonce",e),t}function d$(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function h$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var f$=function(){var t=0,e=null;return{add:function(r){t==0&&(e=u$())&&(d$(e,r),h$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},m$=function(){var t=f$();return function(e,r){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},G2=function(){var t=m$(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},p$={left:0,top:0,right:0,gap:0},I0=function(t){return parseInt(t||"",10)||0},g$=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[I0(r),I0(n),I0(s)]},y$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return p$;var e=g$(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},v$=G2(),Pl="data-scroll-locked",x$=function(t,e,r,n){var s=t.left,i=t.top,a=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(e$,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Pl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Uf,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(qf,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Uf," .").concat(Uf,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(qf," .").concat(qf,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Pl,`] {
    `).concat(t$,": ").concat(l,`px;
  }
`)},vN=function(){var t=parseInt(document.body.getAttribute(Pl)||"0",10);return isFinite(t)?t:0},w$=function(){p.useEffect(function(){return document.body.setAttribute(Pl,(vN()+1).toString()),function(){var t=vN()-1;t<=0?document.body.removeAttribute(Pl):document.body.setAttribute(Pl,t.toString())}},[])},b$=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;w$();var i=p.useMemo(function(){return y$(s)},[s]);return p.createElement(v$,{styles:x$(i,!e,s,r?"":"!important")})},vv=!1;if(typeof window<"u")try{var hf=Object.defineProperty({},"passive",{get:function(){return vv=!0,!0}});window.addEventListener("test",hf,hf),window.removeEventListener("test",hf,hf)}catch{vv=!1}var Za=vv?{passive:!1}:!1,E$=function(t){return t.tagName==="TEXTAREA"},$2=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!E$(t)&&r[e]==="visible")},C$=function(t){return $2(t,"overflowY")},N$=function(t){return $2(t,"overflowX")},xN=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=z2(t,n);if(s){var i=H2(t,n),a=i[1],l=i[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},_$=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},T$=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},z2=function(t,e){return t==="v"?C$(e):N$(e)},H2=function(t,e){return t==="v"?_$(e):T$(e)},A$=function(t,e){return t==="h"&&e==="rtl"?-1:1},S$=function(t,e,r,n,s){var i=A$(t,window.getComputedStyle(e).direction),a=i*n,l=r.target,c=e.contains(l),u=!1,d=a>0,f=0,m=0;do{var y=H2(t,l),x=y[0],g=y[1],b=y[2],E=g-b-i*x;(x||E)&&z2(t,l)&&(f+=E,m+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(f)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},ff=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},wN=function(t){return[t.deltaX,t.deltaY]},bN=function(t){return t&&"current"in t?t.current:t},R$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},I$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},j$=0,el=[];function P$(t){var e=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(j$++)[0],i=p.useState(G2)[0],a=p.useRef(t);p.useEffect(function(){a.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=gV([t.lockRef.current],(t.shards||[]).map(bN),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var E=ff(g),w=r.current,C="deltaX"in g?g.deltaX:w[0]-E[0],I="deltaY"in g?g.deltaY:w[1]-E[1],j,V=g.target,R=Math.abs(C)>Math.abs(I)?"h":"v";if("touches"in g&&R==="h"&&V.type==="range")return!1;var N=xN(R,V);if(!N)return!0;if(N?j=R:(j=R==="v"?"h":"v",N=xN(R,V)),!N)return!1;if(!n.current&&"changedTouches"in g&&(C||I)&&(n.current=j),!j)return!0;var S=n.current||j;return S$(S,b,g,S==="h"?C:I,!0)},[]),c=p.useCallback(function(g){var b=g;if(!(!el.length||el[el.length-1]!==i)){var E="deltaY"in b?wN(b):ff(b),w=e.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&R$(j.delta,E)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var C=(a.current.shards||[]).map(bN).filter(Boolean).filter(function(j){return j.contains(b.target)}),I=C.length>0?l(b,C[0]):!a.current.noIsolation;I&&b.cancelable&&b.preventDefault()}}},[]),u=p.useCallback(function(g,b,E,w){var C={name:g,delta:b,target:E,should:w,shadowParent:k$(E)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(I){return I!==C})},1)},[]),d=p.useCallback(function(g){r.current=ff(g),n.current=void 0},[]),f=p.useCallback(function(g){u(g.type,wN(g),g.target,l(g,t.lockRef.current))},[]),m=p.useCallback(function(g){u(g.type,ff(g),g.target,l(g,t.lockRef.current))},[]);p.useEffect(function(){return el.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Za),document.addEventListener("touchmove",c,Za),document.addEventListener("touchstart",d,Za),function(){el=el.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Za),document.removeEventListener("touchmove",c,Za),document.removeEventListener("touchstart",d,Za)}},[]);var y=t.removeScrollBar,x=t.inert;return p.createElement(p.Fragment,null,x?p.createElement(i,{styles:I$(s)}):null,y?p.createElement(b$,{gapMode:t.gapMode}):null)}function k$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const M$=l$(q2,P$);var gb=p.forwardRef(function(t,e){return p.createElement(ng,ds({},t,{ref:e,sideCar:M$}))});gb.classNames=ng.classNames;var xv=["Enter"," "],D$=["ArrowDown","PageUp","Home"],W2=["ArrowUp","PageDown","End"],O$=[...D$,...W2],L$={ltr:[...xv,"ArrowRight"],rtl:[...xv,"ArrowLeft"]},F$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},$d="Menu",[gd,V$,B$]=_d($d),[ja,U$]=Td($d,[B$,Cc,rg]),sg=Cc(),Q2=rg(),[q$,Pa]=ja($d),[G$,zd]=ja($d),Y2=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:a=!0}=t,l=sg(e),[c,u]=p.useState(null),d=p.useRef(!1),f=_r(i),m=eg(s);return p.useEffect(()=>{const y=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),o.jsx(LI,{...l,children:o.jsx(q$,{scope:e,open:r,onOpenChange:f,content:c,onContentChange:u,children:o.jsx(G$,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:a,children:n})})})};Y2.displayName=$d;var $$="MenuAnchor",yb=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=sg(r);return o.jsx(nb,{...s,...n,ref:e})});yb.displayName=$$;var vb="MenuPortal",[z$,K2]=ja(vb,{forceMount:void 0}),J2=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=Pa(vb,e);return o.jsx(z$,{scope:e,forceMount:r,children:o.jsx(Aa,{present:r||i.open,children:o.jsx(gp,{asChild:!0,container:s,children:n})})})};J2.displayName=vb;var Sn="MenuContent",[H$,xb]=ja(Sn),X2=p.forwardRef((t,e)=>{const r=K2(Sn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Pa(Sn,t.__scopeMenu),a=zd(Sn,t.__scopeMenu);return o.jsx(gd.Provider,{scope:t.__scopeMenu,children:o.jsx(Aa,{present:n||i.open,children:o.jsx(gd.Slot,{scope:t.__scopeMenu,children:a.modal?o.jsx(W$,{...s,ref:e}):o.jsx(Q$,{...s,ref:e})})})})}),W$=p.forwardRef((t,e)=>{const r=Pa(Sn,t.__scopeMenu),n=p.useRef(null),s=dt(e,n);return p.useEffect(()=>{const i=n.current;if(i)return B2(i)},[]),o.jsx(wb,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:xe(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Q$=p.forwardRef((t,e)=>{const r=Pa(Sn,t.__scopeMenu);return o.jsx(wb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),wb=p.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:y,disableOutsideScroll:x,...g}=t,b=Pa(Sn,r),E=zd(Sn,r),w=sg(r),C=Q2(r),I=V$(r),[j,V]=p.useState(null),R=p.useRef(null),N=dt(e,R,b.onContentChange),S=p.useRef(0),P=p.useRef(""),O=p.useRef(0),M=p.useRef(null),k=p.useRef("right"),B=p.useRef(0),z=x?gb:p.Fragment,Q=x?{as:ma,allowPinchZoom:!0}:void 0,Z=H=>{var oe,le;const se=P.current+H,re=I().filter(G=>!G.disabled),ce=document.activeElement,he=(oe=re.find(G=>G.ref.current===ce))==null?void 0:oe.textValue,Te=re.map(G=>G.textValue),Me=oz(Te,se,he),Ce=(le=re.find(G=>G.textValue===Me))==null?void 0:le.ref.current;(function G(de){P.current=de,window.clearTimeout(S.current),de!==""&&(S.current=window.setTimeout(()=>G(""),1e3))})(se),Ce&&setTimeout(()=>Ce.focus())};p.useEffect(()=>()=>window.clearTimeout(S.current),[]),I2();const U=p.useCallback(H=>{var re,ce;return k.current===((re=M.current)==null?void 0:re.side)&&lz(H,(ce=M.current)==null?void 0:ce.area)},[]);return o.jsx(H$,{scope:r,searchRef:P,onItemEnter:p.useCallback(H=>{U(H)&&H.preventDefault()},[U]),onItemLeave:p.useCallback(H=>{var se;U(H)||((se=R.current)==null||se.focus(),V(null))},[U]),onTriggerLeave:p.useCallback(H=>{U(H)&&H.preventDefault()},[U]),pointerGraceTimerRef:O,onPointerGraceIntentChange:p.useCallback(H=>{M.current=H},[]),children:o.jsx(z,{...Q,children:o.jsx(pb,{asChild:!0,trapped:s,onMountAutoFocus:xe(i,H=>{var se;H.preventDefault(),(se=R.current)==null||se.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(Ad,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:y,children:o.jsx(L2,{asChild:!0,...C,dir:E.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:V,onEntryFocus:xe(c,H=>{E.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(sb,{role:"menu","aria-orientation":"vertical","data-state":mj(b.open),"data-radix-menu-content":"",dir:E.dir,...w,...g,ref:N,style:{outline:"none",...g.style},onKeyDown:xe(g.onKeyDown,H=>{const re=H.target.closest("[data-radix-menu-content]")===H.currentTarget,ce=H.ctrlKey||H.altKey||H.metaKey,he=H.key.length===1;re&&(H.key==="Tab"&&H.preventDefault(),!ce&&he&&Z(H.key));const Te=R.current;if(H.target!==Te||!O$.includes(H.key))return;H.preventDefault();const Ce=I().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);W2.includes(H.key)&&Ce.reverse(),sz(Ce)}),onBlur:xe(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(S.current),P.current="")}),onPointerMove:xe(t.onPointerMove,yd(H=>{const se=H.target,re=B.current!==H.clientX;if(H.currentTarget.contains(se)&&re){const ce=H.clientX>B.current?"right":"left";k.current=ce,B.current=H.clientX}}))})})})})})})});X2.displayName=Sn;var Y$="MenuGroup",bb=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(He.div,{role:"group",...n,ref:e})});bb.displayName=Y$;var K$="MenuLabel",Z2=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(He.div,{...n,ref:e})});Z2.displayName=K$;var Km="MenuItem",EN="menu.itemSelect",ig=p.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=p.useRef(null),a=zd(Km,t.__scopeMenu),l=xb(Km,t.__scopeMenu),c=dt(e,i),u=p.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const m=new CustomEvent(EN,{bubbles:!0,cancelable:!0});f.addEventListener(EN,y=>n==null?void 0:n(y),{once:!0}),kx(f,m),m.defaultPrevented?u.current=!1:a.onClose()}};return o.jsx(ej,{...s,ref:c,disabled:r,onClick:xe(t.onClick,d),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:xe(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:xe(t.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||xv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});ig.displayName=Km;var ej=p.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,a=xb(Km,r),l=Q2(r),c=p.useRef(null),u=dt(e,c),[d,f]=p.useState(!1),[m,y]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&y((x.textContent??"").trim())},[i.children]),o.jsx(gd.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:o.jsx(F2,{asChild:!0,...l,focusable:!n,children:o.jsx(He.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:xe(t.onPointerMove,yd(x=>{n?a.onItemLeave(x):(a.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xe(t.onPointerLeave,yd(x=>a.onItemLeave(x))),onFocus:xe(t.onFocus,()=>f(!0)),onBlur:xe(t.onBlur,()=>f(!1))})})})}),J$="MenuCheckboxItem",tj=p.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return o.jsx(oj,{scope:t.__scopeMenu,checked:r,children:o.jsx(ig,{role:"menuitemcheckbox","aria-checked":Jm(r)?"mixed":r,...s,ref:e,"data-state":Cb(r),onSelect:xe(s.onSelect,()=>n==null?void 0:n(Jm(r)?!0:!r),{checkForDefaultPrevented:!1})})})});tj.displayName=J$;var rj="MenuRadioGroup",[X$,Z$]=ja(rj,{value:void 0,onValueChange:()=>{}}),nj=p.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=_r(n);return o.jsx(X$,{scope:t.__scopeMenu,value:r,onValueChange:i,children:o.jsx(bb,{...s,ref:e})})});nj.displayName=rj;var sj="MenuRadioItem",ij=p.forwardRef((t,e)=>{const{value:r,...n}=t,s=Z$(sj,t.__scopeMenu),i=r===s.value;return o.jsx(oj,{scope:t.__scopeMenu,checked:i,children:o.jsx(ig,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":Cb(i),onSelect:xe(n.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,r)},{checkForDefaultPrevented:!1})})})});ij.displayName=sj;var Eb="MenuItemIndicator",[oj,ez]=ja(Eb,{checked:!1}),aj=p.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=ez(Eb,r);return o.jsx(Aa,{present:n||Jm(i.checked)||i.checked===!0,children:o.jsx(He.span,{...s,ref:e,"data-state":Cb(i.checked)})})});aj.displayName=Eb;var tz="MenuSeparator",lj=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(He.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});lj.displayName=tz;var rz="MenuArrow",cj=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=sg(r);return o.jsx(ib,{...s,...n,ref:e})});cj.displayName=rz;var nz="MenuSub",[vQ,uj]=ja(nz),cu="MenuSubTrigger",dj=p.forwardRef((t,e)=>{const r=Pa(cu,t.__scopeMenu),n=zd(cu,t.__scopeMenu),s=uj(cu,t.__scopeMenu),i=xb(cu,t.__scopeMenu),a=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(yb,{asChild:!0,...u,children:o.jsx(ej,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":mj(r.open),...t,ref:Px(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:xe(t.onPointerMove,yd(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!r.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:xe(t.onPointerLeave,yd(f=>{var y,x;d();const m=(y=r.content)==null?void 0:y.getBoundingClientRect();if(m){const g=(x=r.content)==null?void 0:x.dataset.side,b=g==="right",E=b?-5:5,w=m[b?"left":"right"],C=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+E,y:f.clientY},{x:w,y:m.top},{x:C,y:m.top},{x:C,y:m.bottom},{x:w,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:xe(t.onKeyDown,f=>{var y;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||L$[n.dir].includes(f.key)&&(r.onOpenChange(!0),(y=r.content)==null||y.focus(),f.preventDefault())})})})});dj.displayName=cu;var hj="MenuSubContent",fj=p.forwardRef((t,e)=>{const r=K2(Sn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Pa(Sn,t.__scopeMenu),a=zd(Sn,t.__scopeMenu),l=uj(hj,t.__scopeMenu),c=p.useRef(null),u=dt(e,c);return o.jsx(gd.Provider,{scope:t.__scopeMenu,children:o.jsx(Aa,{present:n||i.open,children:o.jsx(gd.Slot,{scope:t.__scopeMenu,children:o.jsx(wb,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:xe(t.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:xe(t.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:xe(t.onKeyDown,d=>{var y;const f=d.currentTarget.contains(d.target),m=F$[a.dir].includes(d.key);f&&m&&(i.onOpenChange(!1),(y=l.trigger)==null||y.focus(),d.preventDefault())})})})})})});fj.displayName=hj;function mj(t){return t?"open":"closed"}function Jm(t){return t==="indeterminate"}function Cb(t){return Jm(t)?"indeterminate":t?"checked":"unchecked"}function sz(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function iz(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function oz(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let a=iz(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function az(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,d=e[a].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function lz(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return az(r,e)}function yd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var cz=Y2,uz=yb,dz=J2,hz=X2,fz=bb,mz=Z2,pz=ig,gz=tj,yz=nj,vz=ij,xz=aj,wz=lj,bz=cj,Ez=dj,Cz=fj,og="Menubar",[wv,Nz,_z]=_d(og),[pj,xQ]=Td(og,[_z,rg]),Br=U$(),gj=rg(),[Tz,Nb]=pj(og),yj=p.forwardRef((t,e)=>{const{__scopeMenubar:r,value:n,onValueChange:s,defaultValue:i,loop:a=!0,dir:l,...c}=t,u=eg(l),d=gj(r),[f="",m]=Yu({prop:n,onChange:s,defaultProp:i}),[y,x]=p.useState(null);return o.jsx(Tz,{scope:r,value:f,onMenuOpen:p.useCallback(g=>{m(g),x(g)},[m]),onMenuClose:p.useCallback(()=>m(""),[m]),onMenuToggle:p.useCallback(g=>{m(b=>b?"":g),x(g)},[m]),dir:u,loop:a,children:o.jsx(wv.Provider,{scope:r,children:o.jsx(wv.Slot,{scope:r,children:o.jsx(L2,{asChild:!0,...d,orientation:"horizontal",loop:a,dir:u,currentTabStopId:y,onCurrentTabStopIdChange:x,children:o.jsx(He.div,{role:"menubar",...c,ref:e})})})})})});yj.displayName=og;var _b="MenubarMenu",[Az,vj]=pj(_b),xj=t=>{const{__scopeMenubar:e,value:r,...n}=t,s=la(),i=r||s||"LEGACY_REACT_AUTO_VALUE",a=Nb(_b,e),l=Br(e),c=p.useRef(null),u=p.useRef(!1),d=a.value===i;return p.useEffect(()=>{d||(u.current=!1)},[d]),o.jsx(Az,{scope:e,value:i,triggerId:la(),triggerRef:c,contentId:la(),wasKeyboardTriggerOpenRef:u,children:o.jsx(cz,{...l,open:d,onOpenChange:f=>{f||a.onMenuClose()},modal:!1,dir:a.dir,...n})})};xj.displayName=_b;var bv="MenubarTrigger",wj=p.forwardRef((t,e)=>{const{__scopeMenubar:r,disabled:n=!1,...s}=t,i=gj(r),a=Br(r),l=Nb(bv,r),c=vj(bv,r),u=p.useRef(null),d=dt(e,u,c.triggerRef),[f,m]=p.useState(!1),y=l.value===c.value;return o.jsx(wv.ItemSlot,{scope:r,value:c.value,disabled:n,children:o.jsx(F2,{asChild:!0,...i,focusable:!n,tabStopId:c.value,children:o.jsx(uz,{asChild:!0,...a,children:o.jsx(He.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":y,"aria-controls":y?c.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":y?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:d,onPointerDown:xe(t.onPointerDown,x=>{!n&&x.button===0&&x.ctrlKey===!1&&(l.onMenuOpen(c.value),y||x.preventDefault())}),onPointerEnter:xe(t.onPointerEnter,()=>{var g;!!l.value&&!y&&(l.onMenuOpen(c.value),(g=u.current)==null||g.focus())}),onKeyDown:xe(t.onKeyDown,x=>{n||(["Enter"," "].includes(x.key)&&l.onMenuToggle(c.value),x.key==="ArrowDown"&&l.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(x.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,x.preventDefault()))}),onFocus:xe(t.onFocus,()=>m(!0)),onBlur:xe(t.onBlur,()=>m(!1))})})})})});wj.displayName=bv;var Sz="MenubarPortal",bj=t=>{const{__scopeMenubar:e,...r}=t,n=Br(e);return o.jsx(dz,{...n,...r})};bj.displayName=Sz;var Ev="MenubarContent",Ej=p.forwardRef((t,e)=>{const{__scopeMenubar:r,align:n="start",...s}=t,i=Br(r),a=Nb(Ev,r),l=vj(Ev,r),c=Nz(r),u=p.useRef(!1);return o.jsx(hz,{id:l.contentId,"aria-labelledby":l.triggerId,"data-radix-menubar-content":"",...i,...s,ref:e,align:n,onCloseAutoFocus:xe(t.onCloseAutoFocus,d=>{var m;!!!a.value&&!u.current&&((m=l.triggerRef.current)==null||m.focus()),u.current=!1,d.preventDefault()}),onFocusOutside:xe(t.onFocusOutside,d=>{const f=d.target;c().some(y=>{var x;return(x=y.ref.current)==null?void 0:x.contains(f)})&&d.preventDefault()}),onInteractOutside:xe(t.onInteractOutside,()=>{u.current=!0}),onEntryFocus:d=>{l.wasKeyboardTriggerOpenRef.current||d.preventDefault()},onKeyDown:xe(t.onKeyDown,d=>{if(["ArrowRight","ArrowLeft"].includes(d.key)){const f=d.target,m=f.hasAttribute("data-radix-menubar-subtrigger"),y=f.closest("[data-radix-menubar-content]")!==d.currentTarget,g=(a.dir==="rtl"?"ArrowRight":"ArrowLeft")===d.key;if(!g&&m||y&&g)return;let w=c().filter(j=>!j.disabled).map(j=>j.value);g&&w.reverse();const C=w.indexOf(l.value);w=a.loop?Gz(w,C+1):w.slice(C+1);const[I]=w;I&&a.onMenuOpen(I)}},{checkForDefaultPrevented:!1}),style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Ej.displayName=Ev;var Rz="MenubarGroup",Iz=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(fz,{...s,...n,ref:e})});Iz.displayName=Rz;var jz="MenubarLabel",Cj=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(mz,{...s,...n,ref:e})});Cj.displayName=jz;var Pz="MenubarItem",Nj=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(pz,{...s,...n,ref:e})});Nj.displayName=Pz;var kz="MenubarCheckboxItem",_j=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(gz,{...s,...n,ref:e})});_j.displayName=kz;var Mz="MenubarRadioGroup",Dz=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(yz,{...s,...n,ref:e})});Dz.displayName=Mz;var Oz="MenubarRadioItem",Tj=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(vz,{...s,...n,ref:e})});Tj.displayName=Oz;var Lz="MenubarItemIndicator",Aj=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(xz,{...s,...n,ref:e})});Aj.displayName=Lz;var Fz="MenubarSeparator",Sj=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(wz,{...s,...n,ref:e})});Sj.displayName=Fz;var Vz="MenubarArrow",Bz=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(bz,{...s,...n,ref:e})});Bz.displayName=Vz;var Uz="MenubarSubTrigger",Rj=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(Ez,{"data-radix-menubar-subtrigger":"",...s,...n,ref:e})});Rj.displayName=Uz;var qz="MenubarSubContent",Ij=p.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Br(r);return o.jsx(Cz,{...s,"data-radix-menubar-content":"",...n,ref:e,style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Ij.displayName=qz;function Gz(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var jj=yj,$z=xj,Pj=wj,zz=bj,kj=Ej,Mj=Cj,Dj=Nj,Oj=_j,Lj=Tj,Fj=Aj,Vj=Sj,Bj=Rj,Uj=Ij;const Hz=$z,qj=p.forwardRef(({className:t,...e},r)=>o.jsx(jj,{ref:r,className:at("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",t),...e}));qj.displayName=jj.displayName;const Gj=p.forwardRef(({className:t,...e},r)=>o.jsx(Pj,{ref:r,className:at("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t),...e}));Gj.displayName=Pj.displayName;const Wz=p.forwardRef(({className:t,inset:e,children:r,...n},s)=>o.jsxs(Bj,{ref:s,className:at("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",t),...n,children:[r,o.jsx(P3,{className:"ml-auto h-4 w-4"})]}));Wz.displayName=Bj.displayName;const Qz=p.forwardRef(({className:t,...e},r)=>o.jsx(Uj,{ref:r,className:at("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Qz.displayName=Uj.displayName;const $j=p.forwardRef(({className:t,align:e="start",alignOffset:r=-4,sideOffset:n=8,...s},i)=>o.jsx(zz,{children:o.jsx(kj,{ref:i,align:e,alignOffset:r,sideOffset:n,className:at("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));$j.displayName=kj.displayName;const zj=p.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(Dj,{ref:n,className:at("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));zj.displayName=Dj.displayName;const Yz=p.forwardRef(({className:t,children:e,checked:r,...n},s)=>o.jsxs(Oj,{ref:s,className:at("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Fj,{children:o.jsx(jA,{className:"h-4 w-4"})})}),e]}));Yz.displayName=Oj.displayName;const Kz=p.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(Lj,{ref:n,className:at("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Fj,{children:o.jsx(k3,{className:"h-2 w-2 fill-current"})})}),e]}));Kz.displayName=Lj.displayName;const Jz=p.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(Mj,{ref:n,className:at("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));Jz.displayName=Mj.displayName;const Xz=p.forwardRef(({className:t,...e},r)=>o.jsx(Vj,{ref:r,className:at("-mx-1 my-1 h-px bg-muted",t),...e}));Xz.displayName=Vj.displayName;const Zz=({user:t,handleLogout:e,navigate:r})=>{const[n,s]=p.useState(!1),[i,a]=p.useState({name:t.name,mobileNumber:t.mobileNumber||""});p.useEffect(()=>{n&&a({name:t.name,mobileNumber:t.mobileNumber||""})},[n,t.name,t.mobileNumber]);const l=()=>{s(!0)},c=()=>{console.log("Saving profile:",i),s(!1)},u=()=>{a({name:t.name,mobileNumber:t.mobileNumber||""}),s(!1)},d=f=>{if(f==="logout")e();else if(f==="profile")l();else{const m=dN.find(y=>y.key===f);m&&r(m.route)}};return o.jsxs(o.Fragment,{children:[o.jsx(qj,{children:o.jsxs(Hz,{children:[o.jsx(Gj,{className:"bg-transparent text-black border border-white",children:"Menu"}),o.jsx($j,{children:dN.filter(f=>f.roles.includes(t.role)).map(f=>{const m=f.icon;return o.jsxs(zj,{className:f.colorClass+" flex gap-2 items-center",onClick:()=>d(f.key),children:[o.jsx(m,{className:"w-4 h-4"}),f.label]},f.key)})})]})}),n&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 grid place-items-center p-4",children:o.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[o.jsx("div",{className:"p-6 border-b border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit Profile"}),o.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(ms,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),o.jsx(Ae,{value:i.name,onChange:f=>a({...i,name:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter your name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-700/30 border border-gray-600 rounded-md",children:[o.jsx(Cu,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-300 text-sm",children:t.email})]}),o.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Email cannot be changed for security reasons"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),o.jsx(Ae,{value:i.mobileNumber,onChange:f=>a({...i,mobileNumber:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter mobile number",type:"tel"})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(_e,{onClick:c,className:"flex-1 bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-700 hover:to-cyan-800",children:"Save Changes"}),o.jsx(_e,{onClick:u,variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"})]})]})]})})]})};function Or({className:t,...e}){return o.jsx("div",{className:at("animate-pulse rounded-md bg-muted",t),...e})}const eH=()=>o.jsxs("div",{className:"flex items-center justify-between px-4 py-4 mb-4",children:[o.jsx(Or,{className:"h-8 w-32 rounded"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Or,{className:"h-8 w-20 rounded"}),o.jsx(Or,{className:"h-8 w-20 rounded"}),o.jsx(Or,{className:"h-8 w-20 rounded"})]})]}),tH=()=>o.jsxs("div",{className:"mb-6 bg-gray-900/80 backdrop-blur-sm border border-red-900/30 text-center relative overflow-hidden rounded-2xl",children:[o.jsxs("div",{className:"flex flex-col items-center p-6",children:[o.jsx(Or,{className:"h-16 w-16 rounded-full mb-2"}),o.jsx(Or,{className:"h-6 w-40 mb-2"}),o.jsx(Or,{className:"h-4 w-56 mb-2"})]}),o.jsx("div",{className:"px-6 pb-4",children:o.jsx(Or,{className:"h-4 w-32 mx-auto"})})]}),rH=()=>o.jsxs("div",{className:"flex gap-4 mb-6 justify-center",children:[o.jsx(Or,{className:"h-8 w-24 rounded"}),o.jsx(Or,{className:"h-8 w-24 rounded"}),o.jsx(Or,{className:"h-8 w-24 rounded"})]}),nH=()=>o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-2xl p-6 min-h-[220px] shadow-2xl mb-6",children:[o.jsx(Or,{className:"h-6 w-40 mb-4"}),o.jsx(Or,{className:"h-4 w-56 mb-4"}),o.jsx(Or,{className:"h-4 w-full rounded mb-2"}),o.jsx(Or,{className:"h-8 w-32 mt-6 mx-auto"})]}),sH=({reward:t,onClose:e})=>{const r=Kr(),[n,s]=p.useState(!0),[i,a]=p.useState(!0);p.useEffect(()=>{const u=setTimeout(()=>s(!1),5e3),d=setTimeout(()=>a(!1),3e3);return()=>{clearTimeout(u),clearTimeout(d)}},[]);const l=u=>{switch(u){case"percentage":return"💯";case"fixed_amount":return"💰";case"free_item":return"🎁";default:return"🎉"}},c=u=>{switch(u){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:[n&&o.jsx(g2,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:300,recycle:!1,colors:["#ef4444","#fff","#facc15","#ff9800","#a3e635","#8b5cf6"]}),i&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[o.jsx("div",{className:"w-96 h-96 border-4 border-red-500/30 rounded-full animate-ping"}),o.jsx("div",{className:"absolute w-80 h-80 border-4 border-yellow-500/30 rounded-full animate-ping",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"absolute w-64 h-64 border-4 border-green-500/30 rounded-full animate-ping",style:{animationDelay:"1s"}})]})}),o.jsxs("div",{className:"relative z-10 bg-gradient-to-br from-gray-900/95 to-red-900/95 border border-red-800/50 rounded-3xl p-8 max-w-md mx-4 text-center shadow-2xl",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:l(t.rewardType)}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"🎉 Congratulations! 🎉"}),o.jsx("p",{className:"text-gray-300 text-lg",children:"You've earned your reward!"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-800/50 to-red-800/50 border border-red-700/50 rounded-2xl p-6 mb-6",children:[o.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:t.rewardDescription}),o.jsx("div",{className:"text-gray-300 mb-4",children:t.settingsSnapshot.descriptionMessage}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:t.rewardType})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:t.rewardValue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Goal:"}),o.jsxs("span",{className:"text-white",children:[t.settingsSnapshot.purchaseLimit," purchases"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Earned:"}),o.jsx("span",{className:"text-white",children:t.createdAt.toDate().toLocaleDateString()})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(_e,{onClick:()=>r("/rewards"),className:`w-full bg-gradient-to-r ${c(t.rewardType)} hover:opacity-90 text-white font-semibold py-3 text-lg`,children:[o.jsx(it,{className:"w-5 h-5 mr-2"}),"View All Rewards"]}),o.jsx(_e,{onClick:e,variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white",children:"Continue Shopping"})]}),o.jsx("div",{className:"mt-6 flex items-center justify-center",children:o.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-600 to-yellow-700 border border-yellow-500 rounded-full",children:[o.jsx($x,{className:"w-4 h-4 mr-2 text-yellow-200"}),o.jsx("span",{className:"text-yellow-100 text-sm font-medium",children:"ACHIEVEMENT UNLOCKED"})]})})]})]})},iH=({totalUsers:t,customers:e,activeUsers:r,totalRewards:n,totalOffers:s,activeOffers:i,recentUsers:a})=>o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"}),o.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"All registered users"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),o.jsx("div",{className:"text-green-300 text-lg",children:"Customers"}),o.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Loyalty program members"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),o.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-yellow-400 mb-2",children:n}),o.jsx("div",{className:"text-yellow-300 text-lg",children:"Total Rewards"}),o.jsx("div",{className:"text-yellow-400 text-sm mt-2",children:"Earned by customers"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(it,{className:"w-5 h-5 mr-2 text-red-400"}),"Offers Status"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Total Offers:"}),o.jsx("span",{className:"text-white font-semibold",children:s})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Active Offers:"}),o.jsx("span",{className:"text-green-400 font-semibold",children:i})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Inactive Offers:"}),o.jsx("span",{className:"text-red-400 font-semibold",children:s-i})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-indigo-800/50 border border-indigo-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Kl,{className:"w-5 h-5 mr-2 text-indigo-400"}),"User Activity"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Active Rate:"}),o.jsxs("span",{className:"text-white font-semibold",children:[e.length>0?Math.round(r/e.length*100):0,"%"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Avg. Rewards:"}),o.jsx("span",{className:"text-white font-semibold",children:e.length>0?(n/e.length).toFixed(1):0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Engagement:"}),o.jsx("span",{className:"text-green-400 font-semibold",children:r>0?"High":"Low"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Wn,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Business Insights"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:[t>0?Math.round(e.length/t*100):0,"%"]}),o.jsx("div",{className:"text-blue-300 text-sm",children:"Customer Conversion"}),o.jsx("div",{className:"text-blue-400 text-xs",children:"Users to Loyalty Members"})]}),o.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-1",children:[e.length>0?Math.round(r/e.length*100):0,"%"]}),o.jsx("div",{className:"text-green-300 text-sm",children:"Customer Engagement"}),o.jsx("div",{className:"text-green-400 text-xs",children:"Active in Last 7 Days"})]}),o.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:[s>0?Math.round(i/s*100):0,"%"]}),o.jsx("div",{className:"text-purple-300 text-sm",children:"Offer Utilization"}),o.jsx("div",{className:"text-purple-400 text-xs",children:"Active vs Total Offers"})]})]})]})]}),oH=({users:t,searchTerm:e,setSearchTerm:r,statusFilter:n,setStatusFilter:s,roleFilter:i,setRoleFilter:a})=>{var V,R,N;const[l,c]=p.useState(null),[u,d]=p.useState(!1),[f,m]=p.useState(!1),[y,x]=p.useState({name:"",email:"",mobileNumber:""}),g=S=>{c(S),d(!0)},b=S=>{S.role==="customer"&&(x({name:S.name,email:S.email,mobileNumber:S.mobileNumber||""}),c(S),m(!0))},E=()=>{console.log("Saving user:",l==null?void 0:l.id,y),m(!1),c(null)},w=t.length,C=t.filter(S=>S.role==="customer"),I=t.filter(S=>S.role==="admin"||S.role==="super_admin"),j=t.filter(S=>S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3);return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-4 sm:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-4 sm:space-y-0",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Bx,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 sm:space-x-2",children:[o.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-blue-400",children:w}),o.jsx("div",{className:"text-blue-300 text-xs",children:"Users"})]}),o.jsxs("div",{className:"bg-green-900/20 border border-green-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-green-400",children:C.length}),o.jsx("div",{className:"text-green-300 text-xs",children:"Customers"})]}),o.jsxs("div",{className:"bg-purple-900/20 border border-purple-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-purple-400",children:I.length}),o.jsx("div",{className:"text-purple-300 text-xs",children:"Admins"})]}),o.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-yellow-400",children:j.length}),o.jsx("div",{className:"text-yellow-300 text-xs",children:"Active"})]})]})]}),o.jsx(_e,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",onClick:()=>{r(""),s("all"),a("all")},children:"Clear Filters"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Users"}),o.jsxs("div",{className:"relative",children:[o.jsx(qx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Ae,{placeholder:"Search by name or email...",value:e,onChange:S=>r(S.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),o.jsxs("select",{value:n,onChange:S=>s(S.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active (Last 7 days)"}),o.jsx("option",{value:"inactive",children:"Inactive"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role Filter"}),o.jsxs("select",{value:i,onChange:S=>a(S.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Roles"}),o.jsx("option",{value:"customer",children:"Customers"}),o.jsx("option",{value:"admin",children:"Admins"}),o.jsx("option",{value:"super_admin",children:"Super Admins"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50",children:o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(An,{className:"w-5 h-5 mr-2 text-blue-400"}),"Users (",t.length,")"]})}),o.jsx("div",{className:"block sm:hidden",children:o.jsx("div",{className:"p-4 space-y-4",children:t.map(S=>{var P;return o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-white text-sm font-bold",children:S.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:S.name}),o.jsxs("div",{className:"text-gray-400 text-sm flex items-center",children:[o.jsx(Cu,{className:"w-3 h-3 mr-1"}),S.email]})]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":S.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:S.role.replace("_"," ").toUpperCase()})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"text-white font-medium",children:S.purchases}),o.jsx("span",{className:"text-gray-400",children:"Stamps"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ru,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{className:"text-white font-medium",children:((P=S.completedRewards)==null?void 0:P.length)||0}),o.jsx("span",{className:"text-gray-400",children:"Rewards"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Wn,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-300 text-sm",children:S.lastScanAt?S.lastScanAt.toDate().toLocaleDateString():"Never"})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50":"bg-gradient-to-r from-gray-900/50 to-gray-800/50 text-gray-300 border border-gray-700/50"}`,children:S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})]}),o.jsxs("div",{className:"flex space-x-2 pt-2",children:[o.jsxs(_e,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200 flex-1",onClick:()=>g(S),title:"View user profile",children:[o.jsx(Zn,{className:"w-4 h-4 mr-1"}),"View"]}),o.jsxs(_e,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200 flex-1",onClick:()=>b(S),disabled:S.role!=="customer",title:S.role!=="customer"?"Only customers can be edited":"Edit customer",children:[o.jsx(_l,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]},S.id)})})}),o.jsx("div",{className:"hidden sm:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-700/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"User"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Role"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Stamps"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Rewards"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Last Activity"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:t.map(S=>{var P;return o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-colors duration-200",children:[o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-white text-sm font-bold",children:S.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:S.name}),o.jsxs("div",{className:"text-gray-400 text-sm flex items-center",children:[o.jsx(Cu,{className:"w-3 h-3 mr-1"}),S.email]})]})]})}),o.jsx("td",{className:"p-4",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${S.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":S.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:S.role.replace("_"," ").toUpperCase()})}),o.jsx("td",{className:"p-4",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50":"bg-gradient-to-r from-gray-900/50 to-gray-800/50 text-gray-300 border border-gray-700/50"}`,children:S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hr,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"text-white font-medium",children:S.purchases})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ru,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{className:"text-white font-medium",children:((P=S.completedRewards)==null?void 0:P.length)||0})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Wn,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-300",children:S.lastScanAt?S.lastScanAt.toDate().toLocaleDateString():"Never"})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(_e,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>g(S),title:"View user profile",children:o.jsx(Zn,{className:"w-4 h-4"})}),o.jsx(_e,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200",onClick:()=>b(S),disabled:S.role!=="customer",title:S.role!=="customer"?"Only customers can be edited":"Edit customer",children:o.jsx(_l,{className:"w-4 h-4"})})]})})]},S.id)})})]})})]}),u&&l&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl w-full max-w-2xl max-h-[95vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[o.jsx(An,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-blue-400"}),"User Profile"]}),o.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(ms,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg mx-auto sm:mx-0",children:o.jsx("span",{className:"text-white text-xl sm:text-2xl font-bold",children:l.name.charAt(0)})}),o.jsxs("div",{className:"text-center sm:text-left",children:[o.jsx("h4",{className:"text-xl sm:text-2xl font-bold text-white",children:l.name}),o.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-2 text-gray-400 mb-2",children:[o.jsx(Cu,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:l.email})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":l.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:l.role.replace("_"," ").toUpperCase()})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-800/30 border border-blue-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-blue-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(Hr,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),(()=>{var P;const S=((P=l.completedRewards)==null?void 0:P.reduce((O,M)=>{var k;return O+(((k=M.scanHistory)==null?void 0:k.length)||0)},0))||0;return Math.max(l.purchases||0,S)})()]}),o.jsx("div",{className:"text-blue-300 text-xs sm:text-sm",children:"Lifetime Stamps"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/30 border border-green-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-green-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(ru,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),((V=l.completedRewards)==null?void 0:V.filter(S=>{var P,O;return((P=S.scanHistory)==null?void 0:P.length)>=(((O=S.offerSnapshot)==null?void 0:O.stampRequirement)||0)}).length)||0]}),o.jsx("div",{className:"text-green-300 text-xs sm:text-sm",children:"Completed Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/30 border border-purple-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-purple-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(Kl,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),((R=l.completedRewards)==null?void 0:R.filter(S=>{var P,O;return((P=S.scanHistory)==null?void 0:P.length)<(((O=S.offerSnapshot)==null?void 0:O.stampRequirement)||0)}).length)||0]}),o.jsx("div",{className:"text-purple-300 text-xs sm:text-sm",children:"In-Progress Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 to-yellow-800/30 border border-yellow-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-yellow-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(it,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),((N=l.completedRewards)==null?void 0:N.filter(S=>S.claimedAt).length)||0]}),o.jsx("div",{className:"text-yellow-300 text-xs sm:text-sm",children:"Redeemed Rewards"})]})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("h5",{className:"text-base sm:text-lg font-semibold text-white flex items-center",children:[o.jsx(Kl,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-yellow-400"}),"Activity Details"]}),o.jsx("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-3 sm:p-4",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-1 flex items-center",children:[o.jsx(Fx,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Member Since"]}),o.jsx("div",{className:"text-white font-medium text-sm sm:text-base",children:l.createdAt.toDate().toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-1 flex items-center",children:[o.jsx(Wn,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Last Activity"]}),o.jsx("div",{className:"text-white font-medium text-sm sm:text-base",children:l.lastScanAt?l.lastScanAt.toDate().toLocaleDateString():"Never"})]})]})}),l.mobileNumber&&o.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-2 flex items-center",children:[o.jsx(V3,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Contact Number"]}),o.jsx("div",{className:"text-white text-sm sm:text-base",children:l.mobileNumber})]}),l.role==="customer"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-700/30 to-blue-800/30 border border-blue-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-3 flex items-center",children:[o.jsx(Hr,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Current In-Progress Rewards"]}),l.completedRewards&&l.completedRewards.filter(S=>{var P,O;return((P=S.scanHistory)==null?void 0:P.length)<(((O=S.offerSnapshot)==null?void 0:O.stampRequirement)||0)}).length>0?o.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(S=>{var P,O;return((P=S.scanHistory)==null?void 0:P.length)<(((O=S.offerSnapshot)==null?void 0:O.stampRequirement)||0)}).map((S,P)=>{var B,z,Q;const O=((B=S.scanHistory)==null?void 0:B.length)||0,M=((z=S.offerSnapshot)==null?void 0:z.stampRequirement)||0,k=M>0?Math.min(O/M*100,100):0;return o.jsxs("div",{className:"bg-blue-800/20 rounded p-3 border border-blue-700/30",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("div",{className:"text-white font-medium text-xs sm:text-sm",children:((Q=S.offerSnapshot)==null?void 0:Q.offerName)||"Loyalty Reward"}),o.jsxs("span",{className:"text-blue-300 text-xs",children:[O,"/",M," stamps"]})]}),o.jsx("div",{className:"w-full bg-blue-600/30 rounded-full h-2 mb-2",children:o.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})}),o.jsxs("div",{className:"text-blue-300 text-xs",children:["Started:"," ",S.createdAt.toDate().toLocaleDateString()]})]},P)})}):o.jsx("div",{className:"text-gray-400 text-xs sm:text-sm italic",children:"No rewards in progress"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-700/30 to-green-800/30 border border-green-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-3 flex items-center",children:[o.jsx(it,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Available Rewards to Redeem"]}),(()=>{var O;const P=(((O=l.completedRewards)==null?void 0:O.filter(M=>{var k,B;return((k=M.scanHistory)==null?void 0:k.length)>=((B=M.offerSnapshot)==null?void 0:B.stampRequirement)}))||[]).filter(M=>!M.claimedAt);return console.log(P),P.length>0?o.jsx("div",{className:"space-y-3",children:P.map((M,k)=>{var B;return o.jsxs("div",{className:"bg-green-800/20 rounded p-3 border border-green-700/30",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("div",{className:"text-white font-medium text-xs sm:text-sm",children:((B=M.offerSnapshot)==null?void 0:B.offerName)||"Loyalty Reward"}),o.jsx("span",{className:"text-green-300 text-xs",children:"Ready to Redeem"})]}),o.jsx("div",{className:"text-green-300 text-xs mb-2",children:M.rewardDescription||"No description"}),o.jsxs("div",{className:"text-green-300 text-xs",children:["Completed:"," ",M.createdAt.toDate().toLocaleDateString()]})]},k)})}):o.jsx("div",{className:"text-gray-400 text-xs sm:text-sm italic",children:"No rewards ready to redeem"})})()]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-700/30 to-purple-800/30 border border-purple-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-3 flex items-center",children:[o.jsx(ru,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Already Redeemed Rewards"]}),l.completedRewards&&l.completedRewards.filter(S=>S.claimedAt).length>0?o.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(S=>S.claimedAt).map((S,P)=>{var O,M;return o.jsxs("div",{className:"bg-purple-800/20 rounded p-3 border border-purple-700/30",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("div",{className:"text-white font-medium text-xs sm:text-sm",children:((O=S.offerSnapshot)==null?void 0:O.offerName)||"Loyalty Reward"}),o.jsx("span",{className:"text-purple-300 text-xs",children:"Redeemed"})]}),o.jsx("div",{className:"text-purple-300 text-xs mb-2",children:((M=S.offerSnapshot)==null?void 0:M.rewardDescription)||"No description"}),o.jsxs("div",{className:"text-purple-300 text-xs",children:["Redeemed:"," ",S.claimedAt?S.claimedAt.toDate().toLocaleDateString():"Unknown"]})]},P)})}):o.jsx("div",{className:"text-gray-400 text-xs sm:text-sm italic",children:"No rewards redeemed yet"})]})]}),l.role!=="customer"&&o.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-2 flex items-center",children:[o.jsx(An,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Admin Information"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300 text-sm",children:"Role Level:"}),o.jsx("span",{className:"text-white font-medium text-sm",children:l.role==="super_admin"?"Super Administrator":"Administrator"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300 text-sm",children:"Permissions:"}),o.jsx("span",{className:"text-white font-medium text-sm",children:l.role==="super_admin"?"Full system access":"User and offer management"})]})]})]})]})]})]})}),f&&l&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl w-full max-w-md max-h-[95vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[o.jsx(_l,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-green-400"}),"Edit Customer"]}),o.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(ms,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),o.jsx(Ae,{value:y.name,onChange:S=>x({...y,name:S.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsx(Ae,{value:y.email,onChange:S=>x({...y,email:S.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),o.jsx(Ae,{value:y.mobileNumber,onChange:S=>x({...y,mobileNumber:S.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 pt-4",children:[o.jsx(_e,{onClick:E,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200",children:"Save Changes"}),o.jsx(_e,{onClick:()=>m(!1),variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200",children:"Cancel"})]})]})]})})]})},oc=p.forwardRef(({className:t,...e},r)=>o.jsx("textarea",{className:at("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));oc.displayName="Textarea";const aH=({offers:t,userRole:e,onOfferCreated:r,currentUser:n})=>{const[s,i]=p.useState(""),[a,l]=p.useState("all"),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[m,y]=p.useState(""),[x,g]=p.useState(""),[b,E]=p.useState(null),[w,C]=p.useState(!1),[I,j]=p.useState(!1),[V,R]=p.useState(null),[N,S]=p.useState(null),[P,O]=p.useState(!1),[M,k]=p.useState({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),[B,z]=p.useState({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),Q=G=>!G.isActive,Z=t.filter(G=>{const de=G.name.toLowerCase().includes(s.toLowerCase())||G.description.toLowerCase().includes(s.toLowerCase()),ge=a==="all"||a==="active"&&G.isActive||a==="inactive"&&!G.isActive;return de&&ge});t.length,t.filter(G=>G.isActive).length,t.filter(G=>!G.isActive).length,t.reduce((G,de)=>G+de.stampRequirement,0),p.useEffect(()=>{const G=de=>{de.key==="Escape"&&c&&H()};return c&&document.addEventListener("keydown",G),()=>{document.removeEventListener("keydown",G)}},[c]);const U=async()=>{try{if(f(!0),y(""),g(""),!M.name.trim()){y("Offer name is required");return}if(!M.description.trim()){y("Description is required");return}if(!M.rewardValue.trim()){y("Reward value is required");return}if(!M.rewardDescription.trim()){y("Reward description is required");return}const G={name:M.name.trim(),description:M.description.trim(),stampRequirement:M.stampRequirement,stampsPerScan:M.stampsPerScan,rewardType:M.rewardType,rewardValue:M.rewardValue.trim(),rewardDescription:M.rewardDescription.trim(),isActive:!1,expiresAt:M.expiryDate?Ve.fromDate(new Date(M.expiryDate)):null};if(!n)throw new Error("User context not available");await u2(n,G),g("Offer created successfully!"),r==null||r(),setTimeout(()=>{g("")},5e3),k({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),y("")}catch(G){y(G instanceof Error?G.message:"Failed to create offer. Please try again."),console.error("Error creating offer:",G)}finally{f(!1)}},H=()=>{k({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),y(""),g(""),f(!1)},se=async G=>{const de=G.isActive?"deactivate":"activate",ge=G.isActive?`Are you sure you want to deactivate "${G.name}"? This will hide it from new users, but existing users can continue collecting stamps.`:`Are you sure you want to activate "${G.name}"? This will make it visible to all customers.`;S({type:de,offer:G,message:ge}),O(!0)},re=async()=>{if(!(!N||!n))try{const{offer:G}=N,de=!G.isActive;await rN(n,G.offerId,{isActive:de}),g(`Offer ${de?"activated":"deactivated"} successfully!`),r==null||r(),setTimeout(()=>{g("")},5e3)}catch(G){y(G instanceof Error?G.message:`Failed to ${N.type} offer. Please try again.`),console.error("Error toggling offer status:",G)}finally{oe()}},ce=G=>{E(G),z({name:G.name,description:G.description,stampRequirement:G.stampRequirement,stampsPerScan:G.stampsPerScan||1,rewardType:G.rewardType,rewardValue:G.rewardValue,rewardDescription:G.rewardDescription,expiryDate:G.expiresAt?G.expiresAt.toDate().toISOString().split("T")[0]:""}),C(!0)},he=async()=>{try{if(!n||!b){y("User context or offer not available");return}if(j(!0),y(""),!B.name.trim()){y("Offer name is required");return}if(!B.description.trim()){y("Description is required");return}if(!B.rewardValue.trim()){y("Reward value is required");return}if(!B.rewardDescription.trim()){y("Reward description is required");return}const G={name:B.name.trim(),description:B.description.trim(),stampRequirement:B.stampRequirement,stampsPerScan:B.stampsPerScan,rewardType:B.rewardType,rewardValue:B.rewardValue.trim(),rewardDescription:B.rewardDescription.trim(),expiresAt:B.expiryDate?Ve.fromDate(new Date(B.expiryDate)):null};await rN(n,b.offerId,G),g("Offer updated successfully!"),r==null||r(),setTimeout(()=>{g("")},5e3),C(!1),E(null),y("")}catch(G){y(G instanceof Error?G.message:"Failed to update offer. Please try again."),console.error("Error updating offer:",G)}finally{j(!1)}},Te=()=>{C(!1),E(null),z({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),y("")},Me=async G=>{const de=`Are you sure you want to delete "${G.name}"? This action cannot be undone and will remove the offer completely.`;S({type:"delete",offer:G,message:de}),O(!0)},Ce=async()=>{if(!(!N||!n))try{R(N.offer.offerId),await Dq(n,N.offer.offerId),g("Offer deleted successfully!"),r==null||r(),setTimeout(()=>{g("")},5e3)}catch(G){y(G instanceof Error?G.message:"Failed to delete offer. Please try again."),console.error("Error deleting offer:",G)}finally{R(null),oe()}},oe=()=>{O(!1),S(null)},le=()=>{const G=new Date;return G.setFullYear(G.getFullYear()+10),G.toISOString().split("T")[0]};return o.jsxs("div",{className:"space-y-8",children:[e==="admin"&&o.jsx("div",{className:"mb-6 bg-blue-900/20 border border-blue-700/50 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-600/20 rounded-full flex items-center justify-center",children:o.jsx(Zn,{className:"w-5 h-5 text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-blue-300 font-semibold",children:"Read-Only Access"}),o.jsx("p",{className:"text-blue-200 text-sm",children:"You have view-only access to offers. You can see all offers and their details, but cannot create, edit, or delete them. Contact a super admin for any changes."})]})]})}),o.jsx("div",{className:"bg-gradient-to-r from-blue-900/20 to-blue-800/20 border border-blue-700/30 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"text-blue-400 mt-1",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-blue-300 mb-2",children:"Offer Lifecycle Management"}),o.jsxs("div",{className:"text-sm text-gray-300 space-y-2",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Active Offers:"})," Visible to all customers, new users can start collecting stamps"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Inactive Offers:"})," Hidden from new users, but existing users can continue collecting stamps"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"User Protection:"})," Users who started collecting stamps can complete their rewards even if the offer becomes inactive"]}),e==="super_admin"?o.jsxs("p",{children:[o.jsx("strong",{children:"Admin Control:"})," Use Play button to activate offers, Pause button to deactivate. Only inactive offers can be edited or deleted."]}):o.jsxs("p",{children:[o.jsx("strong",{children:"Read-Only Access:"})," You can view all offers and their details, but cannot modify them. Contact a super admin for changes."]})]})]})]})}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Bx,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]})}),o.jsx(_e,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",onClick:()=>{i(""),l("all")},children:"Clear Filters"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Offers"}),o.jsxs("div",{className:"relative",children:[o.jsx(qx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Ae,{placeholder:"Search by name or description...",value:s,onChange:G=>i(G.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),o.jsxs("select",{value:a,onChange:G=>l(G.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Offers"}),o.jsx("option",{value:"inactive",children:"Inactive Offers"})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs(_e,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 w-full",onClick:()=>u(!0),disabled:e!=="super_admin",title:e!=="super_admin"?"Only super admins can create offers":"Create new loyalty offer",children:[o.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50",children:o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(it,{className:"w-5 h-5 mr-2 text-green-400"}),"Loyalty Offers (",Z.length,")"]})}),x&&o.jsx("div",{className:"mx-6 mt-4 bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Tn,{className:"w-5 h-5 text-green-400"}),o.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),o.jsx("div",{className:"p-6",children:Z.length>0?o.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Z.map(G=>o.jsxs("div",{className:`bg-gradient-to-br ${G.isActive?"from-green-900/30 to-green-800/30 border-green-700/50":"from-gray-800/30 to-gray-700/30 border-gray-600/50"} border rounded-xl p-6 hover:shadow-lg transition-all duration-300`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-white truncate",children:G.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[!G.isActive&&Q(G)&&o.jsx("div",{className:"text-xs text-yellow-400 bg-yellow-900/30 px-2 py-1 rounded-full border border-yellow-600/30",children:"⚠️ Users collecting"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${G.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:G.isActive?"ACTIVE":"INACTIVE"})]})]}),o.jsx("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:G.description}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(Hr,{className:"w-4 h-4 mr-2"}),"Stamps Required"]}),o.jsx("span",{className:"text-white font-medium",children:G.stampRequirement})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(it,{className:"w-4 h-4 mr-2"}),"Reward"]}),o.jsx("span",{className:"text-white font-medium",children:G.rewardDescription})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(Kl,{className:"w-4 h-4 mr-2"}),"Type"]}),o.jsx("span",{className:"text-white font-medium capitalize",children:G.rewardType})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(Fx,{className:"w-4 h-4 mr-2"}),"Created"]}),o.jsx("span",{className:"text-white font-medium text-sm",children:G.createdAt.toDate().toLocaleDateString()})]})]}),o.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-gray-600/30",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[e==="super_admin"&&o.jsxs(_e,{size:"sm",variant:"outline",className:`${G.isActive?"border-yellow-600 text-yellow-400 hover:bg-yellow-600/20":"border-green-600 text-green-400 hover:bg-green-600/20"} transition-all duration-200`,onClick:()=>se(G),title:G.isActive?"Deactivate offer":"Activate offer",children:[G.isActive?o.jsx(n0,{className:"w-4 h-4"}):o.jsx(s0,{className:"w-4 h-4"}),G.isActive?"Pause":"Play"]}),e==="super_admin"&&!G.isActive&&o.jsxs(_e,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600/20 transition-all duration-200",title:"Edit offer",onClick:()=>ce(G),children:[o.jsx(_l,{className:"w-4 h-4"}),"Edit"]}),e==="super_admin"&&!G.isActive&&o.jsxs(_e,{size:"sm",variant:"outline",className:"border-red-600 text-red-400 hover:bg-red-600/20 transition-all duration-200",title:"Delete offer",onClick:()=>Me(G),children:[o.jsx(i0,{className:"w-4 h-4"}),"Delete"]}),e==="admin"&&o.jsx("div",{className:"text-xs text-gray-400 bg-gray-800/50 px-3 py-2 rounded-lg border border-gray-600/30",children:"📖 Read-only access"})]})})]},G.offerId))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(it,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No offers found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:s||a!=="all"?"Try adjusting your search or filters":"Create your first loyalty offer to get started"}),!s&&a==="all"&&o.jsxs(_e,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",onClick:()=>u(!0),disabled:e!=="super_admin",children:[o.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Create First Offer"]})]})})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(Xh,{className:"w-5 h-5 mr-2 text-green-400"}),"Create New Loyalty Offer"]}),o.jsx("button",{onClick:H,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(ms,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[m&&o.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Q1,{className:"w-5 h-5 text-red-400"}),o.jsx("span",{className:"text-red-300 font-medium",children:m})]})}),x&&o.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Tn,{className:"w-5 h-5 text-green-400"}),o.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(it,{className:"w-4 h-4 mr-2 text-green-400"}),"Basic Information"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Name *"}),o.jsx(Ae,{value:M.name,onChange:G=>k({...M,name:G.target.value}),placeholder:"Enter offer name...",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),o.jsx(oc,{value:M.description,onChange:G=>k({...M,description:G.target.value}),placeholder:"Describe the offer...",rows:3,className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Hr,{className:"w-4 h-4 mr-2 text-blue-400"}),"Stamp Requirements"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Stamps Required *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Ae,{type:"number",min:"1",value:M.stampRequirement,onChange:G=>k({...M,stampRequirement:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stamps Per Scan *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Ae,{type:"number",min:"1",value:M.stampsPerScan,onChange:G=>k({...M,stampsPerScan:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 stamp per scan. Can be increased for special promotions."})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(it,{className:"w-4 h-4 mr-2 text-purple-400"}),"Reward Details"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Type *"}),o.jsxs("select",{value:M.rewardType,onChange:G=>k({...M,rewardType:G.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"}),o.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Value *"}),o.jsx(Ae,{value:M.rewardValue,onChange:G=>k({...M,rewardValue:G.target.value}),placeholder:M.rewardType==="percentage"?"20":M.rewardType==="fixed_amount"?"5.00":"Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Description *"}),o.jsx(Ae,{value:M.rewardDescription,onChange:G=>k({...M,rewardDescription:G.target.value}),placeholder:"e.g., 20% OFF, $5.00 OFF, Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Wn,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Expiry Settings"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),o.jsx(Ae,{type:"date",value:M.expiryDate||le(),onChange:G=>k({...M,expiryDate:G.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 10 years from creation date"})]})]}),o.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(B3,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"text-blue-300 text-sm font-medium",children:"Offer Status: Inactive by Default"})]}),o.jsx("p",{className:"text-blue-200 text-xs mt-1",children:"New offers are created as inactive. Use the Play button to activate them when ready. Only inactive offers can be edited or deleted."})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(_e,{onClick:U,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 flex-1",disabled:!M.name||!M.description||!M.rewardValue||!M.rewardDescription||d,children:d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Create Offer"]})}),o.jsx(_e,{onClick:H,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200 flex-1",disabled:d,children:"Cancel"})]})]})]})}),w&&b&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(_l,{className:"w-5 h-5 mr-2 text-blue-400"}),"Edit Loyalty Offer"]}),o.jsx("button",{onClick:Te,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(ms,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[m&&o.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Q1,{className:"w-5 h-5 text-red-400"}),o.jsx("span",{className:"text-red-300 font-medium",children:m})]})}),x&&o.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Tn,{className:"w-5 h-5 text-green-400"}),o.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(it,{className:"w-4 h-4 mr-2 text-green-400"}),"Basic Information"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Name *"}),o.jsx(Ae,{value:B.name,onChange:G=>z({...B,name:G.target.value}),placeholder:"Enter offer name...",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),o.jsx(oc,{value:B.description,onChange:G=>z({...B,description:G.target.value}),placeholder:"Describe the offer...",rows:3,className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Hr,{className:"w-4 h-4 mr-2 text-blue-400"}),"Stamp Requirements"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Stamps Required *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Ae,{type:"number",min:"1",value:B.stampRequirement,onChange:G=>z({...B,stampRequirement:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stamps Per Scan *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Ae,{type:"number",min:"1",value:B.stampsPerScan,onChange:G=>z({...B,stampsPerScan:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 stamp per scan. Can be increased for special promotions."})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(it,{className:"w-4 h-4 mr-2 text-purple-400"}),"Reward Details"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Type *"}),o.jsxs("select",{value:B.rewardType,onChange:G=>z({...B,rewardType:G.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"}),o.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Value *"}),o.jsx(Ae,{value:B.rewardValue,onChange:G=>z({...B,rewardValue:G.target.value}),placeholder:B.rewardType==="percentage"?"20":B.rewardType==="fixed_amount"?"5.00":"Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Description *"}),o.jsx(Ae,{value:B.rewardDescription,onChange:G=>z({...B,rewardDescription:G.target.value}),placeholder:"e.g., 20% OFF, $5.00 OFF, Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Wn,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Expiry Settings"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),o.jsx(Ae,{type:"date",value:B.expiryDate||le(),onChange:G=>z({...B,expiryDate:G.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 year from creation date"})]})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(_e,{onClick:he,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex-1",disabled:!B.name||!B.description||!B.rewardValue||!B.rewardDescription||I,children:I?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(_l,{className:"w-4 h-4 mr-2"}),"Update Offer"]})}),o.jsx(_e,{onClick:Te,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200 flex-1",disabled:I,children:"Cancel"})]})]})]})}),P&&N&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-md w-full max-h-[80vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[N.type==="delete"?o.jsx(i0,{className:"w-5 h-5 mr-2 text-red-400"}):N.type==="activate"?o.jsx(s0,{className:"w-5 h-5 mr-2 text-green-400"}):o.jsx(n0,{className:"w-5 h-5 mr-2 text-yellow-400"}),N.type==="delete"?"Delete Offer":N.type==="activate"?"Activate Offer":"Deactivate Offer"]}),o.jsx("button",{onClick:oe,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(ms,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("p",{className:"text-gray-300 text-sm",children:N.message}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(_e,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200",onClick:oe,children:"Cancel"}),o.jsxs(_e,{className:`transition-all duration-200 ${N.type==="delete"?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800":N.type==="activate"?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800":"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800"}`,onClick:N.type==="delete"?Ce:re,disabled:d||I,children:[d||I?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):N.type==="delete"?o.jsx(i0,{className:"w-4 h-4 mr-2"}):N.type==="activate"?o.jsx(s0,{className:"w-4 h-4 mr-2"}):o.jsx(n0,{className:"w-4 h-4 mr-2"}),N.type==="delete"?"Delete Offer":N.type==="activate"?"Activate Offer":"Deactivate Offer"]})]})]})]})})]})},lH=({allUsers:t})=>{var x,g,b,E,w,C,I,j,V;const[e,r]=p.useState(""),[n,s]=p.useState("all"),[i,a]=p.useState(null),[l,c]=p.useState(!1),u=p.useMemo(()=>t.flatMap(R=>(R.completedRewards||[]).map(N=>({...N,userName:R.name,userEmail:R.email,userId:R.id}))),[t]),d=p.useMemo(()=>u.filter(R=>{var P,O;const N=R.userName.toLowerCase().includes(e.toLowerCase())||R.userEmail.toLowerCase().includes(e.toLowerCase())||R.rewardDescription.toLowerCase().includes(e.toLowerCase())||((O=(P=R.offerSnapshot)==null?void 0:P.offerName)==null?void 0:O.toLowerCase().includes(e.toLowerCase())),S=n==="all"||n==="active"&&!R.claimedAt||n==="claimed"&&R.claimedAt;return N&&S}),[u,e,n]),f=R=>{a(R),c(!0)},m=()=>{c(!1),a(null)},y=()=>{r(""),s("all")};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-4 sm:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-4 sm:space-y-0",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Bx,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]})}),o.jsx(_e,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",onClick:y,children:"Clear Filters"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Rewards"}),o.jsxs("div",{className:"relative",children:[o.jsx(qx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Ae,{placeholder:"Search by user, reward, or offer...",value:e,onChange:R=>r(R.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),o.jsxs("select",{value:n,onChange:R=>s(R.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Rewards"}),o.jsx("option",{value:"claimed",children:"Claimed Rewards"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(it,{className:"w-5 h-5 mr-2 text-green-400"}),"Rewards (",d.length,")"]}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[o.jsxs(_e,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",onClick:()=>window.location.reload(),children:[o.jsx(MA,{className:"w-4 h-4 mr-2"}),"Refresh"]}),o.jsxs(_e,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",children:[o.jsx(M3,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})}),o.jsx("div",{className:"block sm:hidden",children:o.jsx("div",{className:"p-4 space-y-4",children:d.map(R=>{var N,S,P;return o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(Js,{className:"h-5 w-5 text-white"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:R.userName}),o.jsx("div",{className:"text-gray-400 text-sm flex items-center",children:o.jsx("span",{className:"truncate",children:R.userEmail})})]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.claimedAt?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50"}`,children:R.claimedAt?o.jsxs(o.Fragment,{children:[o.jsx(Tn,{className:"w-3 h-3 mr-1"}),"Claimed"]}):o.jsxs(o.Fragment,{children:[o.jsx(Wn,{className:"w-3 h-3 mr-1"}),"Active"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium text-sm",children:R.rewardDescription}),o.jsxs("div",{className:"text-gray-400 text-xs capitalize",children:[R.rewardType," • ",R.rewardValue]})]}),o.jsx("div",{className:"text-gray-300 text-sm",children:((N=R.offerSnapshot)==null?void 0:N.offerName)||"Unknown Offer"}),o.jsxs("div",{className:"text-xs text-gray-500",children:[((S=R.scanHistory)==null?void 0:S.length)||0," scans •"," ",((P=R.scanHistory)==null?void 0:P.reduce((O,M)=>O+(M.stampsEarned||1),0))||0," ","stamps"]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("div",{className:"text-gray-300",children:R.createdAt.toDate().toLocaleDateString()}),o.jsxs(_e,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>f(R),title:"View reward details and scan history",children:[o.jsx(Zn,{className:"w-4 h-4 mr-1"}),"View"]})]})]},R.rewardId)})})}),o.jsx("div",{className:"hidden sm:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-800/50 border-b border-gray-700/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Reward"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Offer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Earned"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-700/50",children:d.map(R=>{var N,S,P;return o.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:o.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:o.jsx(Js,{className:"h-5 w-5 text-white"})})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-white",children:R.userName}),o.jsx("div",{className:"text-sm text-gray-400",children:R.userEmail})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-white",children:R.rewardDescription}),o.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[R.rewardType," • ",R.rewardValue]})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-gray-300",children:((N=R.offerSnapshot)==null?void 0:N.offerName)||"Unknown Offer"}),o.jsxs("div",{className:"text-xs text-gray-500",children:[((S=R.scanHistory)==null?void 0:S.length)||0," scans •"," ",((P=R.scanHistory)==null?void 0:P.reduce((O,M)=>O+(M.stampsEarned||1),0))||0," ","stamps"]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.claimedAt?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50"}`,children:R.claimedAt?o.jsxs(o.Fragment,{children:[o.jsx(Tn,{className:"w-3 h-3 mr-1"}),"Claimed"]}):o.jsxs(o.Fragment,{children:[o.jsx(Wn,{className:"w-3 h-3 mr-1"}),"Active"]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:R.createdAt.toDate().toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs(_e,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>f(R),title:"View reward details and scan history",children:[o.jsx(Zn,{className:"w-4 h-4 mr-2"}),"View"]})})]},R.rewardId)})})]})}),d.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(it,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No rewards found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:e||n!=="all"?"Try adjusting your search or filters":"No rewards have been earned yet"}),(e||n!=="all")&&o.jsx(_e,{className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",onClick:y,children:"Clear All Filters"})]})]}),l&&i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl w-full max-w-4xl max-h-[95vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[o.jsx(it,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-green-400"}),"Reward Details"]}),o.jsx("button",{onClick:m,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(ms,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(Js,{className:"w-4 h-4 mr-2 text-blue-400"}),"User Information"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Name:"}),o.jsx("span",{className:"text-white",children:i.userName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Email:"}),o.jsx("span",{className:"text-white",children:i.userEmail})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"User ID:"}),o.jsx("span",{className:"text-white font-mono text-xs",children:i.userId})]})]})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(it,{className:"w-4 h-4 mr-2 text-green-400"}),"Reward Details"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Description:"}),o.jsx("span",{className:"text-white",children:i.rewardDescription})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:i.rewardType})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:i.rewardValue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Status:"}),o.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${i.claimedAt?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50"}`,children:i.claimedAt?"Claimed":"Active"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(Hr,{className:"w-4 h-4 mr-2 text-purple-400"}),"Offer Information"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Offer Name:"}),o.jsx("span",{className:"text-white",children:((x=i.offerSnapshot)==null?void 0:x.offerName)||"Unknown"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Description:"}),o.jsx("span",{className:"text-white",children:((g=i.offerSnapshot)==null?void 0:g.description)||"No description"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Stamps Required:"}),o.jsx("span",{className:"text-white",children:((b=i.offerSnapshot)==null?void 0:b.stampRequirement)||"Unknown"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Created:"}),o.jsx("span",{className:"text-white",children:i.createdAt.toDate().toLocaleDateString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Claimed:"}),o.jsx("span",{className:"text-white",children:i.claimedAt?i.claimedAt.toDate().toLocaleDateString():"Not claimed yet"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white",children:[((E=i.scanHistory)==null?void 0:E.reduce((R,N)=>R+(N.stampsEarned||1),0))||0," ","/"," ",((w=i.offerSnapshot)==null?void 0:w.stampRequirement)||"?"," ","stamps"]})]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(Wn,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Scan History (",((C=i.scanHistory)==null?void 0:C.length)||0," scans)"]}),o.jsx("div",{className:"mb-4 p-3 bg-gray-700/20 rounded-lg border border-gray-600/30",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold text-white",children:((I=i.scanHistory)==null?void 0:I.length)||0}),o.jsx("div",{className:"text-gray-400 text-xs",children:"Total Scans"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold text-green-400",children:((j=i.scanHistory)==null?void 0:j.reduce((R,N)=>R+(N.stampsEarned||1),0))||0}),o.jsx("div",{className:"text-gray-400 text-xs",children:"Total Stamps"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold text-blue-400",children:((V=i.offerSnapshot)==null?void 0:V.stampRequirement)||0}),o.jsx("div",{className:"text-gray-400 text-xs",children:"Required"})]})]})}),i.scanHistory&&i.scanHistory.length>0?o.jsx("div",{className:"space-y-3",children:i.scanHistory.map((R,N)=>o.jsx("div",{className:"bg-gray-700/30 rounded-lg p-3 border border-gray-600/30",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-medium",children:N+1})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"text-sm font-medium text-white",children:["Scanned by: ",R.scannedBy||"Unknown Admin"]}),o.jsx("div",{className:"text-xs text-gray-400",children:R.timestamp.toDate().toLocaleString()}),o.jsxs("div",{className:"text-xs text-green-400 font-medium",children:["+",R.stampsEarned||1," stamp",R.stampsEarned>1?"s":""," earned"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-xs text-gray-500",children:["Scan #",N+1]}),o.jsx("div",{className:"text-xs text-blue-400 font-medium",children:R.scanId?R.scanId.slice(-8):"N/A"})]})]})},R.scanId||N))}):o.jsxs("div",{className:"text-center py-6 text-gray-400",children:[o.jsx(Wn,{className:"w-8 h-8 mx-auto mb-2"}),o.jsx("p",{children:"No scan history available"})]})]})]})]})})]})},cH=({allUsers:t,offers:e})=>{var c,u;const r=p.useMemo(()=>{const d=t.filter(B=>B.role==="customer");t.filter(B=>B.role==="admin"||B.role==="super_admin");const f=d.length,m=d.filter(B=>{var Z;const z=(Z=B.createdAt)==null?void 0:Z.toDate();if(!z)return!1;const Q=new Date;return z.getMonth()===Q.getMonth()&&z.getFullYear()===Q.getFullYear()}).length,y=d.filter(B=>B.lastScanAt&&new Date().getTime()-B.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,x=d.filter(B=>B.lastScanAt&&new Date().getTime()-B.lastScanAt.toDate().getTime()<24*60*60*1e3).length,g=d.flatMap(B=>B.completedRewards||[]),b=g.length,E=g.filter(B=>B.claimedAt).length,w=b-E,C=b>0?(E/b*100).toFixed(1):0,I=e.filter(B=>B.isActive).length,j=e.length>0?(I/e.length*100).toFixed(1):0,V=g.reduce((B,z)=>{var Q;return B+(((Q=z.scanHistory)==null?void 0:Q.length)||0)},0),R=f>0?(V/f).toFixed(1):0,N=new Date,S=new Date(N.getFullYear(),N.getMonth()-1,1),P=new Date(N.getFullYear(),N.getMonth(),1),O=g.filter(B=>{var Q;const z=(Q=B.createdAt)==null?void 0:Q.toDate();return z?z>=P:!1}).length,M=g.filter(B=>{var Q;const z=(Q=B.createdAt)==null?void 0:Q.toDate();return z?z>=S&&z<P:!1}).length,k=M>0?((O-M)/M*100).toFixed(1):O>0?100:0;return{customers:{total:f,newThisMonth:m},activity:{active:y,veryActive:x},rewards:{total:b,claimed:E,active:w,redemptionRate:parseFloat(C)},offers:{total:e.length,active:I,utilization:parseFloat(j)},engagement:{totalStamps:V,avgPerCustomer:parseFloat(R)},growth:{thisMonth:O,lastMonth:M,monthOverMonth:parseFloat(k)}}},[t,e]),n=p.useMemo(()=>e.map(f=>{const m=t.flatMap(b=>(b.completedRewards||[]).filter(E=>{var w;return((w=E.offerSnapshot)==null?void 0:w.offerId)===f.offerId})),y=m.length,x=m.filter(b=>b.claimedAt).length,g=m.reduce((b,E)=>{var w;return b+(((w=E.scanHistory)==null?void 0:w.length)||0)},0);return{...f,totalRewards:y,claimedRewards:x,totalStamps:g,conversionRate:g>0?(y/g*100).toFixed(1):0}}).filter(f=>f.totalStamps>0).sort((f,m)=>m.totalStamps-f.totalStamps).slice(0,5),[e,t]),s=p.useMemo(()=>{const d=t.filter(m=>m.role==="customer");return{new:d.filter(m=>{var g;const y=(g=m.createdAt)==null?void 0:g.toDate();return y?(new Date().getTime()-y.getTime())/(1e3*60*60*24)<=30:!1}).length,active:d.filter(m=>m.lastScanAt&&new Date().getTime()-m.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,returning:d.filter(m=>m.lastScanAt&&new Date().getTime()-m.lastScanAt.toDate().getTime()>=7*24*60*60*1e3&&new Date().getTime()-m.lastScanAt.toDate().getTime()<30*24*60*60*1e3).length,dormant:d.filter(m=>!m.lastScanAt||new Date().getTime()-m.lastScanAt.toDate().getTime()>=30*24*60*60*1e3).length}},[t]),i=d=>d>0?o.jsx(I3,{className:"w-4 h-4 text-green-400"}):d<0?o.jsx(R3,{className:"w-4 h-4 text-red-400"}):o.jsx(L3,{className:"w-4 h-4 text-gray-400"}),a=d=>d>0?"text-green-400":d<0?"text-red-400":"text-gray-400",l=d=>typeof d=="number"?d:parseFloat(d)||0;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:o.jsx(An,{className:"w-6 h-6 text-blue-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-blue-300",children:"This Month"}),o.jsxs("div",{className:"text-sm font-medium text-blue-400",children:["+",r.customers.newThisMonth]})]})]}),o.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:r.customers.total.toLocaleString()}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-green-600/20 rounded-lg",children:o.jsx(it,{className:"w-6 h-6 text-green-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-green-300",children:"Redemption Rate"}),o.jsxs("div",{className:"text-sm font-medium text-green-400",children:[r.rewards.redemptionRate,"%"]})]})]}),o.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:r.rewards.total.toLocaleString()}),o.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-purple-600/20 rounded-lg",children:o.jsx(Kl,{className:"w-6 h-6 text-purple-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-purple-300",children:"Active Users"}),o.jsx("div",{className:"text-sm font-medium text-purple-400",children:r.activity.active})]})]}),o.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:r.engagement.avgPerCustomer}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Avg Stamps/Customer"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-yellow-600/20 rounded-lg",children:o.jsx(zx,{className:"w-6 h-6 text-yellow-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-yellow-300",children:"Month over Month"}),o.jsxs("div",{className:`text-sm font-medium ${a(r.growth.monthOverMonth)}`,children:[i(r.growth.monthOverMonth),Math.abs(parseFloat(r.growth.monthOverMonth)),"%"]})]})]}),o.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:r.growth.thisMonth}),o.jsx("div",{className:"text-yellow-300 text-lg",children:"Rewards This Month"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(An,{className:"w-5 h-5 mr-2 text-blue-400"}),"Customer Segments"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"New (30 days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.new})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"Active (7 days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.active})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"Returning (30 days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.returning})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"Dormant (30+ days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.dormant})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700/50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:r.customers.total}),o.jsx("div",{className:"text-gray-400 text-sm",children:"Total Customers"})]})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx($x,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Top Performing Offers"]}),o.jsx("div",{className:"space-y-3",children:n.map((d,f)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-full flex items-center justify-center text-xs font-bold text-white",children:f+1}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium text-sm",children:d.name}),o.jsxs("div",{className:"text-gray-400 text-xs",children:[d.totalStamps," stamps collected"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-white font-medium text-sm",children:d.totalRewards}),o.jsxs("div",{className:"text-gray-400 text-xs",children:[d.conversionRate,"% conversion"]})]})]},d.offerId))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-green-800/30 border border-green-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(it,{className:"w-4 h-4 mr-2 text-green-400"}),"Reward Redemption"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Total Earned:"}),o.jsx("span",{className:"text-white font-medium",children:r.rewards.total})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Claimed:"}),o.jsx("span",{className:"text-white font-medium",children:r.rewards.claimed})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Active:"}),o.jsx("span",{className:"text-white font-medium",children:r.rewards.active})]}),o.jsx("div",{className:"pt-2 border-t border-green-700/30",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[r.rewards.redemptionRate,"%"]}),o.jsx("div",{className:"text-green-300 text-sm",children:"Redemption Rate"})]})})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/30 to-blue-800/30 border border-blue-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(Kl,{className:"w-4 h-4 mr-2 text-blue-400"}),"Customer Engagement"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Total Stamps:"}),o.jsx("span",{className:"text-white font-medium",children:r.engagement.totalStamps.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Avg per Customer:"}),o.jsx("span",{className:"text-white font-medium",children:r.engagement.avgPerCustomer})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Very Active:"}),o.jsx("span",{className:"text-white font-medium",children:r.activity.veryActive})]}),o.jsx("div",{className:"pt-2 border-t border-blue-700/30",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.activity.active}),o.jsx("div",{className:"text-blue-300 text-sm",children:"Active This Week"})]})})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/30 to-purple-800/30 border border-purple-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(Hr,{className:"w-4 h-4 mr-2 text-purple-400"}),"Offer Utilization"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Total Offers:"}),o.jsx("span",{className:"text-white font-medium",children:r.offers.total})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Active Offers:"}),o.jsx("span",{className:"text-white font-medium",children:r.offers.active})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Utilization:"}),o.jsxs("span",{className:"text-white font-medium",children:[r.offers.utilization,"%"]})]}),o.jsx("div",{className:"pt-2 border-t border-purple-700/30",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-400",children:r.growth.thisMonth}),o.jsx("div",{className:"text-purple-300 text-sm",children:"Rewards This Month"})]})})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Vx,{className:"w-5 h-5 mr-2 text-blue-400"}),"Actionable Business Insights"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-white",children:"Customer Retention"}),o.jsxs("div",{className:"space-y-3",children:[s.dormant>s.active&&o.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-700/50 rounded-lg",children:[o.jsx("div",{className:"text-red-300 font-medium",children:"⚠️ High Dormant Customer Rate"}),o.jsxs("div",{className:"text-red-200 text-sm mt-1",children:[s.dormant," customers haven't been active in 30+ days. Consider re-engagement campaigns."]})]}),r.rewards.redemptionRate<50&&o.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-700/50 rounded-lg",children:[o.jsx("div",{className:"text-yellow-300 font-medium",children:"📊 Low Reward Redemption"}),o.jsxs("div",{className:"text-yellow-200 text-sm mt-1",children:["Only ",r.rewards.redemptionRate,"% of rewards are being claimed. Review reward attractiveness and communication."]})]}),r.offers.utilization<50&&o.jsxs("div",{className:"p-3 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:[o.jsx("div",{className:"text-blue-300 font-medium",children:"🎯 Low Offer Utilization"}),o.jsxs("div",{className:"text-blue-200 text-sm mt-1",children:["Only ",r.offers.utilization,"% of offers are active. Consider deactivating underperforming offers."]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-white",children:"Growth Opportunities"}),o.jsxs("div",{className:"space-y-3",children:[l(r.growth.monthOverMonth)>0&&o.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-700/50 rounded-lg",children:[o.jsx("div",{className:"text-green-300 font-medium",children:"🚀 Positive Growth Trend"}),o.jsxs("div",{className:"text-green-200 text-sm mt-1",children:["Rewards increased by ",r.growth.monthOverMonth,"% this month. Current strategies are working well."]})]}),r.customers.newThisMonth>0&&o.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-700/50 rounded-lg",children:[o.jsx("div",{className:"text-green-300 font-medium",children:"👥 New Customer Acquisition"}),o.jsxs("div",{className:"text-green-200 text-sm mt-1",children:[r.customers.newThisMonth," new customers this month. Focus on converting them to active users."]})]}),n.length>0&&o.jsxs("div",{className:"p-3 bg-purple-900/20 border border-purple-700/50 rounded-lg",children:[o.jsx("div",{className:"text-purple-300 font-medium",children:"⭐ Top Performing Offer"}),o.jsxs("div",{className:"text-purple-200 text-sm mt-1",children:['"',(c=n[0])==null?void 0:c.name,'" is your best performer with'," ",(u=n[0])==null?void 0:u.totalStamps," stamps. Consider similar offers or promotions."]})]})]})]})]})]})]})},uH=({user:t})=>{p.useState(!1);const[e,r]=p.useState(!1),[n,s]=p.useState({businessName:"Vape Master",businessDescription:"Premium Vape & E-Liquid Loyalty Program",supportEmail:"support@vapemaster.com",supportPhone:"+1 (555) 123-4567",businessHours:"Mon-Fri: 9AM-9PM, Sat-Sun: 10AM-8PM",timezone:"America/New_York"}),[i,a]=p.useState({defaultStampsPerScan:1,maxStampsPerScan:5,defaultStampRequirement:5,maxStampRequirement:50,allowMultipleRewards:!0,rewardExpiryDays:365,autoAssignDefaultOffer:!0}),[l,c]=p.useState({defaultRewardType:"percentage",defaultRewardValue:"20",defaultRewardDescription:"20% OFF",allowCustomRewards:!0,maxRewardValue:"100",requireApproval:!1}),[u,d]=p.useState({sessionTimeoutHours:24,allowMultiDeviceLogin:!0,requireEmailVerification:!0,maxLoginAttempts:5,lockoutDurationMinutes:30,enableAuditLog:!0}),[f,m]=p.useState({emailNotifications:!0,pushNotifications:!0,rewardReminders:!0,inactivityAlerts:!0,adminAlerts:!0,customerUpdates:!0}),[y,x]=p.useState({primaryColor:"#ef4444",secondaryColor:"#1f2937",accentColor:"#f59e0b",logoUrl:"/logo.png",faviconUrl:"/favicon.ico",enableAnimations:!0,enableDarkMode:!0,customCSS:""}),[g,b]=p.useState({dataRetentionDays:2555,allowDataExport:!0,allowDataDeletion:!0,anonymizeOldData:!1,backupFrequency:"daily",enableAnalytics:!0});p.useEffect(()=>{E()},[]);const E=()=>{try{const j=localStorage.getItem("vm_business_settings");if(j){const V=JSON.parse(j);s(V.system||n),a(V.loyalty||i),c(V.rewards||l),d(V.security||u),m(V.notifications||f),x(V.ui||y),b(V.data||g)}}catch(j){console.error("Error loading settings:",j)}},w=async()=>{r(!0);try{const j={system:n,loyalty:i,rewards:l,security:u,notifications:f,ui:y,data:g,lastUpdated:new Date().toISOString(),updatedBy:t.email};localStorage.setItem("vm_business_settings",JSON.stringify(j)),await Tq(t,i.defaultStampRequirement,l.defaultRewardDescription,l.defaultRewardType,l.defaultRewardValue,l.defaultRewardDescription),pt({title:"Settings Saved",description:"All business settings have been updated successfully!"})}catch{pt({title:"Save Failed",description:"Failed to save some settings. Please try again.",variant:"destructive"})}finally{r(!1)}},C=()=>{window.confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(s({businessName:"Vape Master",businessDescription:"Premium Vape & E-Liquid Loyalty Program",supportEmail:"support@vapemaster.com",supportPhone:"+1 (555) 123-4567",businessHours:"Mon-Fri: 9AM-9PM, Sat-Sun: 10AM-8PM",timezone:"America/New_York"}),a({defaultStampsPerScan:1,maxStampsPerScan:5,defaultStampRequirement:5,maxStampRequirement:50,allowMultipleRewards:!0,rewardExpiryDays:365,autoAssignDefaultOffer:!0}),c({defaultRewardType:"percentage",defaultRewardValue:"20",defaultRewardDescription:"20% OFF",allowCustomRewards:!0,maxRewardValue:"100",requireApproval:!1}),d({sessionTimeoutHours:24,allowMultiDeviceLogin:!0,requireEmailVerification:!0,maxLoginAttempts:5,lockoutDurationMinutes:30,enableAuditLog:!0}),m({emailNotifications:!0,pushNotifications:!0,rewardReminders:!0,inactivityAlerts:!0,adminAlerts:!0,customerUpdates:!0}),x({primaryColor:"#ef4444",secondaryColor:"#1f2937",accentColor:"#f59e0b",logoUrl:"/logo.png",faviconUrl:"/favicon.ico",enableAnimations:!0,enableDarkMode:!0,customCSS:""}),b({dataRetentionDays:2555,allowDataExport:!0,allowDataDeletion:!0,anonymizeOldData:!1,backupFrequency:"daily",enableAnalytics:!0}),pt({title:"Settings Reset",description:"All settings have been reset to defaults."}))},I=()=>{const j={system:n,loyalty:i,rewards:l,security:u,notifications:f,ui:y,data:g,exportedAt:new Date().toISOString(),exportedBy:t.email},V=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),R=URL.createObjectURL(V),N=document.createElement("a");N.href=R,N.download=`vm_business_settings_${new Date().toISOString().split("T")[0]}.json`,N.click(),URL.revokeObjectURL(R),pt({title:"Settings Exported",description:"Business settings have been exported successfully!"})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:o.jsx(xp,{className:"w-6 h-6 text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Business Settings"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Configure your loyalty program and business preferences"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(_e,{variant:"outline",onClick:I,className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",children:[o.jsx(Y1,{className:"w-4 h-4 mr-2"}),"Export"]}),o.jsxs(_e,{variant:"outline",onClick:C,className:"border-yellow-600 text-yellow-400 hover:bg-yellow-600 hover:text-white",children:[o.jsx(MA,{className:"w-4 h-4 mr-2"}),"Reset"]}),o.jsx(_e,{onClick:w,disabled:e,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:e?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(q3,{className:"w-4 h-4 mr-2"}),"Save All Settings"]})})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(PA,{className:"w-5 h-5 mr-2 text-blue-400"}),"Business Information"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Business Name"}),o.jsx(Ae,{value:n.businessName,onChange:j=>s({...n,businessName:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Your Business Name"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Business Description"}),o.jsx(oc,{value:n.businessDescription,onChange:j=>s({...n,businessDescription:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Describe your business and loyalty program",rows:3})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Support Email"}),o.jsx(Ae,{value:n.supportEmail,onChange:j=>s({...n,supportEmail:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"email"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Support Phone"}),o.jsx(Ae,{value:n.supportPhone,onChange:j=>s({...n,supportPhone:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Business Hours"}),o.jsx(Ae,{value:n.businessHours,onChange:j=>s({...n,businessHours:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"e.g., Mon-Fri: 9AM-9PM, Sat-Sun: 10AM-8PM"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(it,{className:"w-5 h-5 mr-2 text-green-400"}),"Loyalty Program"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Stamps/Scan"}),o.jsx(Ae,{value:i.defaultStampsPerScan,onChange:j=>a({...i,defaultStampsPerScan:parseInt(j.target.value)||1}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"10"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Max Stamps/Scan"}),o.jsx(Ae,{value:i.maxStampsPerScan,onChange:j=>a({...i,maxStampsPerScan:parseInt(j.target.value)||5}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"20"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Stamp Requirement"}),o.jsx(Ae,{value:i.defaultStampRequirement,onChange:j=>a({...i,defaultStampRequirement:parseInt(j.target.value)||5}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"100"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Max Stamp Requirement"}),o.jsx(Ae,{value:i.maxStampRequirement,onChange:j=>a({...i,maxStampRequirement:parseInt(j.target.value)||50}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"10",max:"200"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowMultipleRewards",checked:i.allowMultipleRewards,onChange:j=>a({...i,allowMultipleRewards:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowMultipleRewards",className:"text-gray-300 text-sm",children:"Allow multiple rewards per offer"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"autoAssignDefaultOffer",checked:i.autoAssignDefaultOffer,onChange:j=>a({...i,autoAssignDefaultOffer:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"autoAssignDefaultOffer",className:"text-gray-300 text-sm",children:"Auto-assign default offer to new users"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Reward Expiry (Days)"}),o.jsx(Ae,{value:i.rewardExpiryDays,onChange:j=>a({...i,rewardExpiryDays:parseInt(j.target.value)||365}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"30",max:"3650"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(it,{className:"w-5 h-5 mr-2 text-purple-400"}),"Reward Configuration"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Reward Type"}),o.jsxs("select",{value:l.defaultRewardType,onChange:j=>c({...l,defaultRewardType:j.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"}),o.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Reward Value"}),o.jsx(Ae,{value:l.defaultRewardValue,onChange:j=>c({...l,defaultRewardValue:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"20"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Max Reward Value"}),o.jsx(Ae,{value:l.maxRewardValue,onChange:j=>c({...l,maxRewardValue:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"100"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Reward Description"}),o.jsx(Ae,{value:l.defaultRewardDescription,onChange:j=>c({...l,defaultRewardDescription:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"20% OFF"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowCustomRewards",checked:l.allowCustomRewards,onChange:j=>c({...l,allowCustomRewards:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowCustomRewards",className:"text-gray-300 text-sm",children:"Allow custom reward creation"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"requireApproval",checked:l.requireApproval,onChange:j=>c({...l,requireApproval:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"requireApproval",className:"text-gray-300 text-sm",children:"Require admin approval for rewards"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(Gx,{className:"w-5 h-5 mr-2 text-red-400"}),"Security & Access"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Session Timeout (Hours)"}),o.jsx(Ae,{value:u.sessionTimeoutHours,onChange:j=>d({...u,sessionTimeoutHours:parseInt(j.target.value)||24}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"168"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Max Login Attempts"}),o.jsx(Ae,{value:u.maxLoginAttempts,onChange:j=>d({...u,maxLoginAttempts:parseInt(j.target.value)||5}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"3",max:"10"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Lockout Duration (Min)"}),o.jsx(Ae,{value:u.lockoutDurationMinutes,onChange:j=>d({...u,lockoutDurationMinutes:parseInt(j.target.value)||30}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"15",max:"1440"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowMultiDeviceLogin",checked:u.allowMultiDeviceLogin,onChange:j=>d({...u,allowMultiDeviceLogin:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowMultiDeviceLogin",className:"text-gray-300 text-sm",children:"Allow multi-device login"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"requireEmailVerification",checked:u.requireEmailVerification,onChange:j=>d({...u,requireEmailVerification:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"requireEmailVerification",className:"text-gray-300 text-sm",children:"Require email verification"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableAuditLog",checked:u.enableAuditLog,onChange:j=>d({...u,enableAuditLog:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"enableAuditLog",className:"text-gray-300 text-sm",children:"Enable audit logging"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(j3,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Notifications"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"emailNotifications",checked:f.emailNotifications,onChange:j=>m({...f,emailNotifications:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"emailNotifications",className:"text-gray-300 text-sm",children:"Email notifications"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"pushNotifications",checked:f.pushNotifications,onChange:j=>m({...f,pushNotifications:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"pushNotifications",className:"text-gray-300 text-sm",children:"Push notifications"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"rewardReminders",checked:f.rewardReminders,onChange:j=>m({...f,rewardReminders:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"rewardReminders",className:"text-gray-300 text-sm",children:"Reward reminders"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"inactivityAlerts",checked:f.inactivityAlerts,onChange:j=>m({...f,inactivityAlerts:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"inactivityAlerts",className:"text-gray-300 text-sm",children:"Inactivity alerts"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"adminAlerts",checked:f.adminAlerts,onChange:j=>m({...f,adminAlerts:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"adminAlerts",className:"text-gray-300 text-sm",children:"Admin alerts"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"customerUpdates",checked:f.customerUpdates,onChange:j=>m({...f,customerUpdates:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"customerUpdates",className:"text-gray-300 text-sm",children:"Customer updates"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(F3,{className:"w-5 h-5 mr-2 text-pink-400"}),"UI & Branding"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Primary Color"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(Ae,{value:y.primaryColor,onChange:j=>x({...y,primaryColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white w-20",type:"color"}),o.jsx(Ae,{value:y.primaryColor,onChange:j=>x({...y,primaryColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white flex-1",placeholder:"#ef4444"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Secondary Color"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(Ae,{value:y.secondaryColor,onChange:j=>x({...y,secondaryColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white w-20",type:"color"}),o.jsx(Ae,{value:y.secondaryColor,onChange:j=>x({...y,secondaryColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white flex-1",placeholder:"#1f2937"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Accent Color"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(Ae,{value:y.accentColor,onChange:j=>x({...y,accentColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white w-20",type:"color"}),o.jsx(Ae,{value:y.accentColor,onChange:j=>x({...y,accentColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white flex-1",placeholder:"#f59e0b"})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableAnimations",checked:y.enableAnimations,onChange:j=>x({...y,enableAnimations:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"enableAnimations",className:"text-gray-300 text-sm",children:"Enable animations"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableDarkMode",checked:y.enableDarkMode,onChange:j=>x({...y,enableDarkMode:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"enableDarkMode",className:"text-gray-300 text-sm",children:"Enable dark mode"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Custom CSS"}),o.jsx(oc,{value:y.customCSS,onChange:j=>x({...y,customCSS:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"/* Custom CSS styles */",rows:3})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(Y1,{className:"w-5 h-5 mr-2 text-indigo-400"}),"Data & Privacy"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Data Retention (Days)"}),o.jsx(Ae,{value:g.dataRetentionDays,onChange:j=>b({...g,dataRetentionDays:parseInt(j.target.value)||2555}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"365",max:"3650"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Backup Frequency"}),o.jsxs("select",{value:g.backupFrequency,onChange:j=>b({...g,backupFrequency:j.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[o.jsx("option",{value:"hourly",children:"Hourly"}),o.jsx("option",{value:"daily",children:"Daily"}),o.jsx("option",{value:"weekly",children:"Weekly"}),o.jsx("option",{value:"monthly",children:"Monthly"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowDataExport",checked:g.allowDataExport,onChange:j=>b({...g,allowDataExport:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowDataExport",className:"text-gray-300 text-sm",children:"Allow data export"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowDataDeletion",checked:g.allowDataDeletion,onChange:j=>b({...g,allowDataDeletion:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowDataDeletion",className:"text-gray-300 text-sm",children:"Allow data deletion"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"anonymizeOldData",checked:g.anonymizeOldData,onChange:j=>b({...g,anonymizeOldData:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"anonymizeOldData",className:"text-gray-300 text-sm",children:"Anonymize old data"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableAnalytics",checked:g.enableAnalytics,onChange:j=>b({...g,enableAnalytics:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"enableAnalytics",className:"text-gray-300 text-sm",children:"Enable analytics"})]})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(Tn,{className:"w-5 h-5 mr-2 text-green-400"}),"Settings Summary"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Business:"}),o.jsx("span",{className:"text-white",children:n.businessName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Default Stamps:"}),o.jsx("span",{className:"text-white",children:i.defaultStampRequirement})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Default Reward:"}),o.jsx("span",{className:"text-white",children:l.defaultRewardDescription})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Session Timeout:"}),o.jsxs("span",{className:"text-white",children:[u.sessionTimeoutHours,"h"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Multi-Device:"}),o.jsx("span",{className:"text-white",children:u.allowMultiDeviceLogin?"Enabled":"Disabled"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Audit Log:"}),o.jsx("span",{className:"text-white",children:u.enableAuditLog?"Enabled":"Disabled"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Notifications:"}),o.jsx("span",{className:"text-white",children:f.emailNotifications?"Email":"Disabled"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Data Retention:"}),o.jsxs("span",{className:"text-white",children:[g.dataRetentionDays," days"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Backup:"}),o.jsx("span",{className:"text-white",children:g.backupFrequency})]})]})]})]})]})},dH=({user:t,allUsers:e,offers:r,onLogout:n,onScan:s})=>{var M;const[i,a]=p.useState(()=>localStorage.getItem("adminActiveTab")||"overview"),[l,c]=p.useState(""),[u,d]=p.useState("all"),[f,m]=p.useState("all"),[y,x]=p.useState(!1),[g,b]=p.useState(r);Kr(),p.useEffect(()=>{b(r)},[r]),p.useEffect(()=>{if((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="super_admin"){const k=jo(ft,"offers"),B=xc(k,Mw("createdAt","desc")),z=qp(B,Q=>{const Z=[];Q.forEach(U=>{Z.push({...U.data(),offerId:U.id})}),b(Z)},Q=>{console.error("Error listening to offers:",Q)});return()=>z()}},[t==null?void 0:t.role]);const E=async()=>{try{const k=await c2();b(k),console.log("Offers refreshed successfully. New offers count:",k.length)}catch(k){console.error("Failed to refresh offers:",k)}},w=e.filter(k=>{const B=k.name.toLowerCase().includes(l.toLowerCase())||k.email.toLowerCase().includes(l.toLowerCase()),z=u==="all"||u==="active"&&k.lastScanAt&&new Date().getTime()-k.lastScanAt.toDate().getTime()<7*24*60*60*1e3||u==="inactive"&&(!k.lastScanAt||new Date().getTime()-k.lastScanAt.toDate().getTime()>=7*24*60*60*1e3),Q=f==="all"||k.role===f;return B&&z&&Q}),C=e.length,I=e.filter(k=>k.role==="customer"),j=I.filter(k=>k.lastScanAt&&new Date().getTime()-k.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,V=I.reduce((k,B)=>{var z;return k+(((z=B.completedRewards)==null?void 0:z.length)||0)},0),R=g.length,N=g.filter(k=>k.isActive).length;p.useEffect(()=>{Ze("admin_dashboard_view",{tab:i,user_id:t.id})},[i,t.id]);const P=[{id:"overview",label:"Overview",icon:Vx,color:"text-blue-400",roles:["admin","super_admin"]},{id:"users",label:"Users",icon:An,color:"text-green-400",roles:["super_admin"]},{id:"offers",label:"Offers",icon:it,color:"text-purple-400",roles:["admin","super_admin"]},{id:"rewards",label:"Rewards",icon:Hr,color:"text-yellow-400",roles:["super_admin"]},{id:"analytics",label:"Analytics",icon:zx,color:"text-indigo-400",roles:["super_admin"]},{id:"settings",label:"Settings",icon:xp,color:"text-red-400",roles:["super_admin"]}].filter(k=>k.roles.includes(t.role)),O=k=>{a(k),localStorage.setItem("adminActiveTab",k),x(!1)};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[y&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>x(!1)}),o.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 bg-gray-900/95 backdrop-blur-sm border-r border-red-800/50 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${y?"translate-x-0":"-translate-x-full"}`,children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-red-800/30",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"}),o.jsx("p",{className:"text-red-300 text-sm",children:"Vape Master"})]}),o.jsx("button",{onClick:()=>x(!1),className:"lg:hidden text-gray-400 hover:text-white",children:o.jsx(ms,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"p-6 border-b border-red-800/30",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-lg font-bold",children:t.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:t.name}),o.jsx("div",{className:"text-gray-400 text-sm capitalize",children:t.role.replace("_"," ")})]})]})}),o.jsx("nav",{className:"flex-1 p-4 space-y-2",children:P.map(k=>{const B=k.icon;return o.jsxs("button",{onClick:()=>O(k.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ${i===k.id?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-800/50"}`,children:[o.jsx(B,{className:`w-5 h-5 ${i===k.id?"text-white":k.color}`}),o.jsx("span",{className:"font-medium",children:k.label})]},k.id)})}),o.jsxs("div",{className:"p-4 space-y-3 border-t border-red-800/30",children:[o.jsxs(_e,{onClick:s,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:[o.jsx(U3,{className:"w-4 h-4 mr-2"}),"Scan QR"]}),o.jsxs(_e,{onClick:n,variant:"outline",className:"w-full border-red-600 text-red-300 hover:bg-red-700/20",children:[o.jsx(kA,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),o.jsxs("div",{className:"lg:pl-80",children:[o.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50 sticky top-0 z-30",children:o.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>x(!0),className:"lg:hidden text-gray-400 hover:text-white",children:o.jsx(O3,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:(M=P.find(k=>k.id===i))==null?void 0:M.label}),o.jsxs("p",{className:"text-red-300 text-sm",children:[i==="overview"&&"System overview and key metrics",i==="users"&&"Manage users and permissions",i==="offers"&&(t.role==="super_admin"?"Create and manage loyalty offers":"View loyalty offers (read-only access)"),i==="rewards"&&"Track rewards and redemptions",i==="analytics"&&"Performance insights and reports",i==="settings"&&"System configuration and preferences"]})]})]}),o.jsxs("div",{className:"hidden md:flex items-center space-x-6 text-sm",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white font-semibold",children:C}),o.jsx("div",{className:"text-gray-400",children:"Users"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white font-semibold",children:R}),o.jsx("div",{className:"text-gray-400",children:"Offers"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white font-semibold",children:V}),o.jsx("div",{className:"text-gray-400",children:"Rewards"})]})]})]})}),o.jsxs("div",{className:"p-6",children:[i==="overview"&&o.jsx(iH,{totalUsers:C,customers:I,activeUsers:j,totalRewards:V,totalOffers:R,activeOffers:N,recentUsers:e.slice(0,5)}),i==="users"&&o.jsx(oH,{users:w,searchTerm:l,setSearchTerm:c,statusFilter:u,setStatusFilter:d,roleFilter:f,setRoleFilter:m}),i==="offers"&&o.jsx(aH,{offers:g,userRole:t.role,onOfferCreated:E,currentUser:t}),i==="rewards"&&o.jsx(lH,{allUsers:e}),i==="analytics"&&o.jsx(cH,{allUsers:e,offers:g}),i==="settings"&&o.jsx(uH,{user:t})]})]})]})},hH=()=>{const{user:t,loading:e,settings:r,allUsers:n,allUsersLoading:s,offers:i,showConfetti:a,confettiKey:l,lastUpdateTime:c,activeTab:u,setActiveTab:d,userPurchaseLimit:f,purchasesRemaining:m,handleLogout:y,navigate:x,handleOfferSelection:g}=iG(),[b,E]=p.useState(!1),[w,C]=p.useState(null),[I,j]=p.useState(!1),[V,R]=p.useState(null);if(e)return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsx(eH,{}),o.jsx("div",{className:"flex-1 px-6 pb-6",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(tH,{}),o.jsx(rH,{}),o.jsx(nH,{})]})})]});if(!t)return null;const N=u==="progress",S=u==="offers",P=t.role==="customer";return t.role==="admin"||t.role==="super_admin"?o.jsx(dH,{user:t,allUsers:n,offers:i,onLogout:y,onScan:()=>x("/scan")}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a&&o.jsx(g2,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:200,recycle:!1},l),o.jsx(mG,{title:"Dashboard",onBack:()=>x("/"),actions:o.jsx(Zz,{user:t,handleLogout:y,navigate:x})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(xG,{activeTab:u,onTabChange:d,userRole:t.role}),S&&P&&o.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-green-300 mb-2 flex items-center",children:[o.jsx(it,{className:"w-6 h-6 mr-2 text-green-400"}),"Available Offers"]}),o.jsx("p",{className:"text-green-200/80 text-sm",children:"Choose an offer and start collecting stamps to earn rewards"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:i&&i.length>0?o.jsx("div",{className:"grid gap-4",children:i.filter(M=>{var B;return M.isActive?!0:((B=t.completedRewards)==null?void 0:B.find(z=>{var Q,Z,U;return((Q=z.offerSnapshot)==null?void 0:Q.offerId)===M.offerId&&((Z=z.scanHistory)==null?void 0:Z.length)<((U=z.offerSnapshot)==null?void 0:U.stampRequirement)&&!z.claimedAt}))!==void 0}).map(M=>{var z,Q;const k=(z=t.completedRewards)==null?void 0:z.find(Z=>{var U,H,se;return((U=Z.offerSnapshot)==null?void 0:U.offerId)===M.offerId&&((H=Z.scanHistory)==null?void 0:H.length)>=((se=Z.offerSnapshot)==null?void 0:se.stampRequirement)&&!Z.claimedAt}),B=(Q=t.completedRewards)==null?void 0:Q.find(Z=>{var U,H,se;return((U=Z.offerSnapshot)==null?void 0:U.offerId)===M.offerId&&((H=Z.scanHistory)==null?void 0:H.length)<((se=Z.offerSnapshot)==null?void 0:se.stampRequirement)&&!Z.claimedAt});return o.jsxs("div",{className:`bg-gradient-to-br ${B?"from-green-900/40 to-green-800/40 border-green-600/50 hover:from-green-900/50 hover:to-green-800/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50 hover:from-gray-800/50 hover:to-gray-700/50"} border rounded-xl p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-lg`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-white mb-1",children:M.name}),o.jsx("p",{className:"text-gray-300 text-sm",children:M.description}),!M.isActive&&o.jsx("div",{className:"mt-2 text-xs text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded-full inline-block",children:"⚠️ Offer is inactive - you can continue collecting stamps"})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${B?M.isActive?"bg-green-600/80 text-white border border-green-500/50 shadow-lg":"bg-yellow-600/80 text-white border border-yellow-500/50 shadow-lg":"bg-gray-600/80 text-gray-200 border border-gray-500/50"}`,children:B?M.isActive?"ACTIVE":"CONTINUING":"AVAILABLE"})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Required Stamps:"}),o.jsx("span",{className:"text-white font-medium",children:M.stampRequirement})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Reward:"}),o.jsx("span",{className:"text-white font-medium",children:M.rewardDescription})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white font-medium capitalize",children:M.rewardType})]})]}),o.jsx("div",{className:"flex justify-center",children:B?o.jsx("button",{onClick:()=>{const Z={userId:t.id,userEmail:t.email,userName:t.name,offerId:M.offerId,offerName:M.name,stampsPerScan:M.stampsPerScan||1,timestamp:new Date().toISOString()};R(Z),j(!0)},className:`w-full px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg ${M.isActive?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white":"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white"}`,children:M.isActive?"Continue Collecting":"Continue Collecting (Inactive)"}):o.jsx("button",{onClick:()=>{const Z={userId:t.id,userEmail:t.email,userName:t.name,offerId:M.offerId,offerName:M.name,stampsPerScan:M.stampsPerScan||1,timestamp:new Date().toISOString()};R(Z),j(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg",children:k?"Start New Reward":"Start Collecting"})})]},M.offerId)})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(it,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),o.jsx("div",{className:"text-gray-300 text-lg font-medium mb-2",children:"No active offers available"}),o.jsx("div",{className:"text-gray-500 text-sm",children:"Check back later for new offers"})]})})]}),N&&o.jsx(o.Fragment,{children:P?o.jsx("div",{className:"h-[720px] overflow-hidden",children:o.jsx(wG,{user:t,userPurchaseLimit:f,settings:r,purchasesRemaining:m,onViewReward:()=>x("/scan"),currentOffer:i==null?void 0:i.find(M=>M.offerId===t.currentOfferId)})}):o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-blue-300 mb-2 flex items-center",children:[o.jsx(Hr,{className:"w-6 h-6 mr-2 text-blue-400"}),"User Progress Tracking"]}),o.jsx("p",{className:"text-blue-200/80 text-sm",children:"Real-time updates of all user loyalty progress"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:o.jsx(vG,{users:n.filter(M=>M.role==="customer"),loading:s})})]})}),u==="card"&&(t.role==="super_admin"?o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[o.jsx(Js,{className:"w-6 h-6 mr-2 text-purple-400"}),"Rewards History"]}),o.jsx("p",{className:"text-purple-200/80 text-sm",children:"Complete overview of all user rewards and redemptions"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:o.jsx(yG,{allUsers:n})})]}):o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[o.jsx(Js,{className:"w-6 h-6 mr-2 text-purple-400"}),"Your Rewards"]}),o.jsx("p",{className:"text-purple-200/80 text-sm",children:"Track your progress and manage your earned rewards"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:o.jsx(IG,{user:t,offers:i})})]}))]})}),b&&w&&o.jsx(sH,{reward:w,onClose:()=>{E(!1),C(null)}}),I&&V&&o.jsx(R2,{qrData:V,isOpen:I,onClose:()=>{j(!1),R(null)}})]})},fH=()=>{var f,m,y,x;const{user:t,loading:e,redeemReward:r}=Ss(),n=Kr(),[s,i]=p.useState(null);if(p.useEffect(()=>{Ze("page_view",{page:"Rewards"})},[]),p.useEffect(()=>{!e&&!t&&n("/login")},[t,e,n]),e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t)return null;const a=async g=>{i(g);try{await r(g),pt({title:"Reward Redeemed!",description:"Your reward has been successfully redeemed."}),Ze("reward_redeemed",{reward_id:g,user_id:t.id}),window.location.reload()}catch{pt({title:"Error",description:"Failed to redeem reward. Please try again.",variant:"destructive"})}finally{i(null)}},l=g=>{switch(g){case"percentage":return"💯";case"fixed_amount":return"💰";case"free_item":return"🎁";default:return"🎉"}},c=g=>{switch(g){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}},u=((f=t.completedRewards)==null?void 0:f.filter(g=>!g.claimedAt))||[],d=((m=t.completedRewards)==null?void 0:m.filter(g=>g.claimedAt))||[];return t.currentReward,o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[o.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50",children:o.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(_e,{variant:"ghost",size:"sm",onClick:()=>n("/dashboard"),className:"text-red-300 hover:text-white hover:bg-red-900/30",children:[o.jsx(si,{className:"w-5 h-5 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:"My Rewards"}),o.jsx("p",{className:"text-red-300 text-sm",children:"Manage and redeem your earned rewards"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-white text-sm",children:"Total Rewards"}),o.jsx("div",{className:"text-2xl font-bold text-red-400",children:((y=t.completedRewards)==null?void 0:y.length)||0})]})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.completedRewards&&t.completedRewards.filter(g=>{var E,w;return(((E=g.scanHistory)==null?void 0:E.reduce((C,I)=>C+(I.stampsEarned||1),0))||0)<(((w=g.offerSnapshot)==null?void 0:w.stampRequirement)||0)}).length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Wn,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Rewards in Progress"]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.completedRewards.filter(g=>{var E,w;return(((E=g.scanHistory)==null?void 0:E.reduce((C,I)=>C+(I.stampsEarned||1),0))||0)<(((w=g.offerSnapshot)==null?void 0:w.stampRequirement)||0)}).map(g=>{var C,I,j;const b=((C=g.scanHistory)==null?void 0:C.reduce((V,R)=>V+(R.stampsEarned||1),0))||0,E=((I=g.offerSnapshot)==null?void 0:I.stampRequirement)||0,w=E>0?Math.min(b/E*100,100):0;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-blue-900/90 border border-blue-800/50 rounded-xl p-6 hover:border-blue-600/70 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/20",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"text-4xl mb-2",children:"🎯"}),o.jsx("div",{className:"text-xl font-bold text-white mb-1",children:((j=g.offerSnapshot)==null?void 0:j.offerName)||"Loyalty Reward"}),o.jsx("div",{className:"text-sm text-gray-400",children:g.rewardDescription})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white font-medium",children:[b," / ",E," stamps"]})]}),o.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${w}%`}})}),o.jsx("div",{className:"text-center mt-2",children:o.jsx("div",{className:"text-blue-300 text-xs",children:E-b>0?`${E-b} more stamps needed`:"🎉 Ready to complete!"})})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:g.rewardType})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:g.rewardValue})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Started:"}),o.jsx("span",{className:"text-white",children:g.createdAt.toDate().toLocaleDateString()})]})]})]},g.rewardId)})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(it,{className:"w-5 h-5 mr-2 text-green-400"}),"Available Rewards (",u.length,")"]}),u.length===0?o.jsxs("div",{className:"text-center py-12 bg-gradient-to-r from-gray-900/50 to-red-900/50 border border-gray-700/50 rounded-xl",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),o.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Available Rewards"}),o.jsx("p",{className:"text-gray-400 mb-4",children:"Complete your purchase goal to earn your first reward!"}),o.jsx(_e,{onClick:()=>n("/dashboard"),className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800",children:"Go to Dashboard"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(g=>{var b;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6 hover:border-red-600/70 transition-all duration-300 hover:shadow-lg hover:shadow-red-500/20",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"text-4xl mb-2",children:l(g.rewardType)}),o.jsx("div",{className:"text-xl font-bold text-white mb-1",children:g.rewardDescription}),o.jsxs("div",{className:"text-sm text-gray-400",children:["Earned on ",g.createdAt.toDate().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:g.rewardType})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:g.rewardValue})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Goal:"}),o.jsxs("span",{className:"text-white",children:[((b=g.offerSnapshot)==null?void 0:b.stampRequirement)||0," stamps"]})]})]}),o.jsxs(_e,{onClick:()=>a(g.rewardId),disabled:s===g.rewardId,className:`w-full bg-gradient-to-r ${c(g.rewardType)} hover:opacity-90 transition-all duration-300`,children:[s===g.rewardId?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):o.jsx(Tn,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})]},g.rewardId)})})]}),d.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Tn,{className:"w-5 h-5 mr-2 text-green-400"}),"Claimed Rewards (",d.length,")"]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(g=>{var b,E;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border border-gray-700/50 rounded-xl p-6 opacity-75",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"text-4xl mb-2",children:l(g.rewardType)}),o.jsx("div",{className:"text-xl font-bold text-gray-300 mb-1",children:g.rewardDescription}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Claimed on"," ",(b=g.claimedAt)==null?void 0:b.toDate().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Type:"}),o.jsx("span",{className:"text-gray-300 capitalize",children:g.rewardType})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Value:"}),o.jsx("span",{className:"text-gray-300",children:g.rewardValue})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Goal:"}),o.jsxs("span",{className:"text-gray-300",children:[((E=g.offerSnapshot)==null?void 0:E.stampRequirement)||0," stamps"]})]})]}),o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-green-900/50 border border-green-600/50 rounded-full",children:[o.jsx(Tn,{className:"w-4 h-4 mr-2 text-green-400"}),o.jsx("span",{className:"text-green-300 text-sm font-medium",children:"REDEEMED"})]})})]},g.rewardId)})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx($x,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Reward Statistics"]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:((x=t.completedRewards)==null?void 0:x.length)||0}),o.jsx("div",{className:"text-sm text-gray-400",children:"Total Earned"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-400",children:d.length}),o.jsx("div",{className:"text-sm text-gray-400",children:"Redeemed"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:u.length}),o.jsx("div",{className:"text-sm text-gray-400",children:"Available"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.purchases}),o.jsx("div",{className:"text-sm text-gray-400",children:"Current Progress"})]})]})]})]})]})},mH=()=>{const{user:t,loading:e,allUsers:r}=Ss(),n=Kr(),[s,i]=p.useState([]),[a,l]=p.useState(!0);p.useState(!1),p.useState(!1);const[c,u]=p.useState("offers");return p.useEffect(()=>{Ze("page_view",{page:"Settings"})},[]),p.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),p.useEffect(()=>{t&&(async()=>{try{l(!0);const f=await Iu();if(f.length===0){await sN(t);const m=await Iu();i(m)}else i(f)}catch(f){console.error("Error loading offers:",f);try{await sN(t);const m=await Iu();i(m)}catch(m){console.error("Error creating default offer:",m)}}finally{l(!1)}})()},[t]),e||a?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):!t||t.role!=="admin"&&t.role!=="super_admin"?null:o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(sr,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(si,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Settings"})]}),o.jsxs("div",{className:"flex items-center text-gray-400",children:[o.jsx(xp,{className:"w-6 h-6 mr-2"}),o.jsx("span",{className:"text-sm",children:"Admin Panel"})]})]})}),o.jsx("div",{className:"flex-1 px-6 py-8",children:o.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex space-x-1 mb-8 bg-gray-800/50 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>u("offers"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="offers"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(it,{className:"w-4 h-4 mr-2"}),"Manage Offers"]}),o.jsxs("button",{onClick:()=>u("rewards"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="rewards"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(it,{className:"w-4 h-4 mr-2"}),"Rewards History"]}),o.jsxs("button",{onClick:()=>u("analytics"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="analytics"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(Vx,{className:"w-4 h-4 mr-2"}),"Analytics"]}),o.jsxs("button",{onClick:()=>u("users"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="users"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(An,{className:"w-4 h-4 mr-2"}),"User Management"]})]}),c==="offers"&&o.jsx(pH,{offers:s,onOffersChange:i,user:t}),c==="rewards"&&o.jsx(gH,{allUsers:r}),c==="analytics"&&o.jsx(yH,{allUsers:r}),c==="users"&&o.jsx(vH,{allUsers:r})]})})]})]})},pH=({offers:t,onOffersChange:e,user:r})=>{const[n,s]=p.useState(!1),[i,a]=p.useState(!1),[l,c]=p.useState(""),[u,d]=p.useState(""),[f,m]=p.useState(5),[y,x]=p.useState("percentage"),[g,b]=p.useState("20"),[E,w]=p.useState("20% OFF"),C=async()=>{if(!l.trim()||!u.trim()||!g.trim()||!E.trim()){pt({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});return}s(!0);try{await zq(r,{name:l.trim(),description:u.trim(),stampRequirement:f,stampsPerScan:1,rewardType:y,rewardValue:g.trim(),rewardDescription:E.trim(),isActive:!0});const I=await Iu();e(I),a(!1),c(""),d(""),m(5),x("percentage"),b("20"),w("20% OFF"),pt({title:"Offer Created",description:"New offer has been created successfully!"})}catch{pt({title:"Creation Failed",description:"Failed to create offer. Please try again.",variant:"destructive"})}finally{s(!1)}};return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Offers"}),o.jsx("p",{className:"text-gray-400",children:"Create and manage loyalty program offers for customers"})]}),o.jsx("div",{className:"mb-8 text-center",children:o.jsxs(_e,{onClick:()=>a(!0),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold px-6 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300",children:[o.jsx(it,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})}),i&&o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6 mb-8",children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create New Offer"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"offerName",className:"text-white font-medium",children:"Offer Name"}),o.jsx(Ae,{id:"offerName",value:l,onChange:I=>c(I.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"e.g., Welcome Offer, Summer Special"})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"offerDescription",className:"text-white font-medium",children:"Description"}),o.jsx(oc,{id:"offerDescription",value:u,onChange:I=>d(I.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Describe what customers need to do to earn this reward"})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"stampRequirement",className:"text-white font-medium",children:"Stamps Required"}),o.jsx(Ae,{id:"stampRequirement",type:"number",min:"1",max:"50",value:f,onChange:I=>m(parseInt(I.target.value)||1),className:"bg-gray-700/50 border-gray-600 text-white mt-1"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"rewardType",className:"text-white font-medium",children:"Reward Type"}),o.jsxs("select",{id:"rewardType",value:y,onChange:I=>x(I.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"rewardValue",className:"text-white font-medium",children:"Reward Value"}),o.jsx(Ae,{id:"rewardValue",value:g,onChange:I=>b(I.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:y==="percentage"?"20":y==="fixed_amount"?"5.00":"Free Coffee"})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"rewardDescription",className:"text-white font-medium",children:"Reward Description"}),o.jsx(Ae,{id:"rewardDescription",value:E,onChange:I=>w(I.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:y==="percentage"?"20% OFF":y==="fixed_amount"?"$5.00 OFF":"Free Coffee"})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(_e,{variant:"outline",onClick:()=>a(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),o.jsx(_e,{onClick:C,disabled:n,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Offer"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Current Offers"}),t.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),o.jsx("h4",{className:"text-xl font-semibold text-white mb-2",children:"No Offers Yet"}),o.jsx("p",{className:"text-gray-400",children:"Create your first offer to get started!"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(I=>o.jsxs("div",{className:`bg-gradient-to-br ${I.isActive?"from-green-900/40 to-green-800/40 border-green-700/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50"} border rounded-xl p-4`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"text-lg font-semibold text-white",children:I.name}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${I.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:I.isActive?"ACTIVE":"INACTIVE"})]}),o.jsx("p",{className:"text-gray-300 text-sm mb-3",children:I.description}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Stamps:"}),o.jsx("span",{className:"text-white",children:I.stampRequirement})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Reward:"}),o.jsx("span",{className:"text-white",children:I.rewardDescription})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:I.rewardType})]})]})]},I.offerId))})]})]})},gH=({allUsers:t})=>{const e=a=>{var c,u;if((c=a.offerSnapshot)!=null&&c.stampRequirement)return a.offerSnapshot.stampRequirement;const l=a;return(u=l.settingsSnapshot)!=null&&u.purchaseLimit?l.settingsSnapshot.purchaseLimit:"Unknown"},r=t.flatMap(a=>(a.completedRewards||[]).map(l=>({...l,userName:a.name,userEmail:a.email,userId:a.id}))),n=r.filter(a=>!a.claimedAt),s=r.filter(a=>a.claimedAt),i=r.filter(a=>a.expiresAt?new Date>a.expiresAt.toDate():!1);return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Rewards History & Status"}),o.jsx("p",{className:"text-gray-400",children:"Monitor all rewards across the system"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.length}),o.jsx("div",{className:"text-blue-300 text-sm",children:"Total Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-400",children:n.length}),o.jsx("div",{className:"text-green-300 text-sm",children:"Active Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:s.length}),o.jsx("div",{className:"text-yellow-300 text-sm",children:"Claimed Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-400",children:i.length}),o.jsx("div",{className:"text-red-300 text-sm",children:"Expired Rewards"})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Zn,{className:"w-5 h-5 mr-2 text-green-400"}),"Active Rewards (",n.length,")"]}),n.length===0?o.jsxs("div",{className:"text-center py-8 bg-gray-800/30 rounded-xl",children:[o.jsx("div",{className:"text-4xl mb-2",children:"🎯"}),o.jsx("p",{className:"text-gray-400",children:"No active rewards at the moment"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(a=>o.jsxs("div",{className:"bg-gradient-to-br from-green-900/40 to-green-800/40 border border-green-700/50 rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-lg font-semibold text-white",children:a.rewardDescription}),o.jsx("div",{className:"text-xs text-green-300 bg-green-900/50 px-2 py-1 rounded-full",children:"ACTIVE"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"User:"}),o.jsx("span",{className:"text-white",children:a.userName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:a.rewardType})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:a.rewardValue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Goal:"}),o.jsxs("span",{className:"text-white",children:[e(a)," purchases"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Earned:"}),o.jsx("span",{className:"text-white",children:a.createdAt.toDate().toLocaleDateString()})]})]})]},a.rewardId))})]}),s.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Tn,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Claimed Rewards (",s.length,")"]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.slice(0,6).map(a=>{var l;return o.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 border border-yellow-700/50 rounded-xl p-4 opacity-75",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-lg font-semibold text-white",children:a.rewardDescription}),o.jsx("div",{className:"text-xs text-yellow-300 bg-yellow-900/50 px-2 py-1 rounded-full",children:"CLAIMED"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"User:"}),o.jsx("span",{className:"text-white",children:a.userName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Claimed:"}),o.jsx("span",{className:"text-white",children:(l=a.claimedAt)==null?void 0:l.toDate().toLocaleDateString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:a.rewardType})]})]})]},a.rewardId)})}),s.length>6&&o.jsx("div",{className:"text-center mt-4",children:o.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 6 of ",s.length," claimed rewards"]})})]})]})},yH=({allUsers:t})=>{const e=t.filter(s=>s.role==="customer"),r=e.reduce((s,i)=>{var a;return s+(((a=i.completedRewards)==null?void 0:a.length)||0)},0),n=e.filter(s=>s.lastScanAt&&new Date().getTime()-s.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length;return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"System Analytics"}),o.jsx("p",{className:"text-gray-400",children:"Overview of loyalty program performance"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:e.length}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"}),o.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"Active loyalty members"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:r}),o.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"}),o.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Earned by customers"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:n}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),o.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]})]}),o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(zx,{className:"w-5 h-5 mr-2 text-green-400"}),"Recent Activity"]}),o.jsx("div",{className:"space-y-3",children:e.slice(0,5).map(s=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-bold",children:s.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:s.name}),o.jsx("div",{className:"text-gray-400 text-sm",children:s.email})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-white font-medium",children:[s.purchases," purchases"]}),o.jsx("div",{className:"text-gray-400 text-sm",children:s.lastScanAt?s.lastScanAt.toDate().toLocaleDateString():"Never"})]})]},s.id))})]})]})},vH=({allUsers:t})=>{const e=t.filter(n=>n.role==="customer"),r=t.filter(n=>n.role==="admin"||n.role==="super_admin");return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),o.jsx("p",{className:"text-gray-400",children:"Overview of all system users"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t.length}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),o.jsx("div",{className:"text-green-300 text-lg",children:"Customers"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r.length}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Administrators"})]})]}),o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(An,{className:"w-5 h-5 mr-2 text-blue-400"}),"Customer Overview"]}),o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-700",children:[o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Name"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Email"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Purchases"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Rewards"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Last Scan"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Status"})]})}),o.jsx("tbody",{children:e.slice(0,10).map(n=>{var s;return o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[o.jsx("td",{className:"p-3 text-white",children:n.name}),o.jsx("td",{className:"p-3 text-gray-300",children:n.email}),o.jsx("td",{className:"p-3 text-white",children:n.purchases}),o.jsx("td",{className:"p-3 text-white",children:((s=n.completedRewards)==null?void 0:s.length)||0}),o.jsx("td",{className:"p-3 text-gray-300",children:n.lastScanAt?n.lastScanAt.toDate().toLocaleDateString():"Never"}),o.jsx("td",{className:"p-3",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-700/50"}`,children:n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})})]},n.id)})})]}),e.length>10&&o.jsx("div",{className:"text-center mt-4",children:o.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 10 of ",e.length," customers"]})})]})]})]})};function CN(t,[e,r]){return Math.min(r,Math.max(e,t))}function xH(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var wH=[" ","Enter","ArrowUp","ArrowDown"],bH=[" ","Enter"],Hd="Select",[ag,lg,EH]=_d(Hd),[Tc,wQ]=Td(Hd,[EH,Cc]),cg=Cc(),[CH,Mo]=Tc(Hd),[NH,_H]=Tc(Hd),Hj=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:y,form:x}=t,g=cg(e),[b,E]=p.useState(null),[w,C]=p.useState(null),[I,j]=p.useState(!1),V=eg(u),[R=!1,N]=Yu({prop:n,defaultProp:s,onChange:i}),[S,P]=Yu({prop:a,defaultProp:l,onChange:c}),O=p.useRef(null),M=b?x||!!b.closest("form"):!0,[k,B]=p.useState(new Set),z=Array.from(k).map(Q=>Q.props.value).join(";");return o.jsx(LI,{...g,children:o.jsxs(CH,{required:y,scope:e,trigger:b,onTriggerChange:E,valueNode:w,onValueNodeChange:C,valueNodeHasChildren:I,onValueNodeHasChildrenChange:j,contentId:la(),value:S,onValueChange:P,open:R,onOpenChange:N,dir:V,triggerPointerDownPosRef:O,disabled:m,children:[o.jsx(ag.Provider,{scope:e,children:o.jsx(NH,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(Q=>{B(Z=>new Set(Z).add(Q))},[]),onNativeOptionRemove:p.useCallback(Q=>{B(Z=>{const U=new Set(Z);return U.delete(Q),U})},[]),children:r})}),M?o.jsxs(yP,{"aria-hidden":!0,required:y,tabIndex:-1,name:d,autoComplete:f,value:S,onChange:Q=>P(Q.target.value),disabled:m,form:x,children:[S===void 0?o.jsx("option",{value:""}):null,Array.from(k)]},z):null]})})};Hj.displayName=Hd;var Wj="SelectTrigger",Qj=p.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=cg(r),a=Mo(Wj,r),l=a.disabled||n,c=dt(e,a.onTriggerChange),u=lg(r),d=p.useRef("touch"),[f,m,y]=vP(g=>{const b=u().filter(C=>!C.disabled),E=b.find(C=>C.value===a.value),w=xP(b,g,E);w!==void 0&&a.onValueChange(w.value)}),x=g=>{l||(a.onOpenChange(!0),y()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(nb,{asChild:!0,...i,children:o.jsx(He.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":gP(a.value)?"":void 0,...s,ref:c,onClick:xe(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&x(g)}),onPointerDown:xe(s.onPointerDown,g=>{d.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:xe(s.onKeyDown,g=>{const b=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(b&&g.key===" ")&&wH.includes(g.key)&&(x(),g.preventDefault())})})})});Qj.displayName=Wj;var Yj="SelectValue",Kj=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:a="",...l}=t,c=Mo(Yj,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=dt(e,c.onValueNodeChange);return Tr(()=>{u(d)},[u,d]),o.jsx(He.span,{...l,ref:f,style:{pointerEvents:"none"},children:gP(c.value)?o.jsx(o.Fragment,{children:a}):i})});Kj.displayName=Yj;var TH="SelectIcon",Jj=p.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return o.jsx(He.span,{"aria-hidden":!0,...s,ref:e,children:n||"▼"})});Jj.displayName=TH;var AH="SelectPortal",Xj=t=>o.jsx(gp,{asChild:!0,...t});Xj.displayName=AH;var Ca="SelectContent",Zj=p.forwardRef((t,e)=>{const r=Mo(Ca,t.__scopeSelect),[n,s]=p.useState();if(Tr(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?Ta.createPortal(o.jsx(eP,{scope:t.__scopeSelect,children:o.jsx(ag.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(tP,{...t,ref:e})});Zj.displayName=Ca;var Un=10,[eP,Do]=Tc(Ca),SH="SelectContentImpl",tP=p.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:x,hideWhenDetached:g,avoidCollisions:b,...E}=t,w=Mo(Ca,r),[C,I]=p.useState(null),[j,V]=p.useState(null),R=dt(e,oe=>I(oe)),[N,S]=p.useState(null),[P,O]=p.useState(null),M=lg(r),[k,B]=p.useState(!1),z=p.useRef(!1);p.useEffect(()=>{if(C)return B2(C)},[C]),I2();const Q=p.useCallback(oe=>{const[le,...G]=M().map(Ee=>Ee.ref.current),[de]=G.slice(-1),ge=document.activeElement;for(const Ee of oe)if(Ee===ge||(Ee==null||Ee.scrollIntoView({block:"nearest"}),Ee===le&&j&&(j.scrollTop=0),Ee===de&&j&&(j.scrollTop=j.scrollHeight),Ee==null||Ee.focus(),document.activeElement!==ge))return},[M,j]),Z=p.useCallback(()=>Q([N,C]),[Q,N,C]);p.useEffect(()=>{k&&Z()},[k,Z]);const{onOpenChange:U,triggerPointerDownPosRef:H}=w;p.useEffect(()=>{if(C){let oe={x:0,y:0};const le=de=>{var ge,Ee;oe={x:Math.abs(Math.round(de.pageX)-(((ge=H.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(de.pageY)-(((Ee=H.current)==null?void 0:Ee.y)??0))}},G=de=>{oe.x<=10&&oe.y<=10?de.preventDefault():C.contains(de.target)||U(!1),document.removeEventListener("pointermove",le),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",le),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",le),document.removeEventListener("pointerup",G,{capture:!0})}}},[C,U,H]),p.useEffect(()=>{const oe=()=>U(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[U]);const[se,re]=vP(oe=>{const le=M().filter(ge=>!ge.disabled),G=le.find(ge=>ge.ref.current===document.activeElement),de=xP(le,oe,G);de&&setTimeout(()=>de.ref.current.focus())}),ce=p.useCallback((oe,le,G)=>{const de=!z.current&&!G;(w.value!==void 0&&w.value===le||de)&&(S(oe),de&&(z.current=!0))},[w.value]),he=p.useCallback(()=>C==null?void 0:C.focus(),[C]),Te=p.useCallback((oe,le,G)=>{const de=!z.current&&!G;(w.value!==void 0&&w.value===le||de)&&O(oe)},[w.value]),Me=n==="popper"?Cv:rP,Ce=Me===Cv?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:x,hideWhenDetached:g,avoidCollisions:b}:{};return o.jsx(eP,{scope:r,content:C,viewport:j,onViewportChange:V,itemRefCallback:ce,selectedItem:N,onItemLeave:he,itemTextRefCallback:Te,focusSelectedItem:Z,selectedItemText:P,position:n,isPositioned:k,searchRef:se,children:o.jsx(gb,{as:ma,allowPinchZoom:!0,children:o.jsx(pb,{asChild:!0,trapped:w.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:xe(s,oe=>{var le;(le=w.trigger)==null||le.focus({preventScroll:!0}),oe.preventDefault()}),children:o.jsx(Ad,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(Me,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:oe=>oe.preventDefault(),...E,...Ce,onPlaced:()=>B(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:xe(E.onKeyDown,oe=>{const le=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!le&&oe.key.length===1&&re(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let de=M().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const ge=oe.target,Ee=de.indexOf(ge);de=de.slice(Ee+1)}setTimeout(()=>Q(de)),oe.preventDefault()}})})})})})})});tP.displayName=SH;var RH="SelectItemAlignedPosition",rP=p.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=Mo(Ca,r),a=Do(Ca,r),[l,c]=p.useState(null),[u,d]=p.useState(null),f=dt(e,R=>d(R)),m=lg(r),y=p.useRef(!1),x=p.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:E,focusSelectedItem:w}=a,C=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&b&&E){const R=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),S=i.valueNode.getBoundingClientRect(),P=E.getBoundingClientRect();if(i.dir!=="rtl"){const ge=P.left-N.left,Ee=S.left-ge,fe=R.left-Ee,ve=R.width+fe,mt=Math.max(ve,N.width),Ue=window.innerWidth-Un,lt=CN(Ee,[Un,Math.max(Un,Ue-mt)]);l.style.minWidth=ve+"px",l.style.left=lt+"px"}else{const ge=N.right-P.right,Ee=window.innerWidth-S.right-ge,fe=window.innerWidth-R.right-Ee,ve=R.width+fe,mt=Math.max(ve,N.width),Ue=window.innerWidth-Un,lt=CN(Ee,[Un,Math.max(Un,Ue-mt)]);l.style.minWidth=ve+"px",l.style.right=lt+"px"}const O=m(),M=window.innerHeight-Un*2,k=g.scrollHeight,B=window.getComputedStyle(u),z=parseInt(B.borderTopWidth,10),Q=parseInt(B.paddingTop,10),Z=parseInt(B.borderBottomWidth,10),U=parseInt(B.paddingBottom,10),H=z+Q+k+U+Z,se=Math.min(b.offsetHeight*5,H),re=window.getComputedStyle(g),ce=parseInt(re.paddingTop,10),he=parseInt(re.paddingBottom,10),Te=R.top+R.height/2-Un,Me=M-Te,Ce=b.offsetHeight/2,oe=b.offsetTop+Ce,le=z+Q+oe,G=H-le;if(le<=Te){const ge=O.length>0&&b===O[O.length-1].ref.current;l.style.bottom="0px";const Ee=u.clientHeight-g.offsetTop-g.offsetHeight,fe=Math.max(Me,Ce+(ge?he:0)+Ee+Z),ve=le+fe;l.style.height=ve+"px"}else{const ge=O.length>0&&b===O[0].ref.current;l.style.top="0px";const fe=Math.max(Te,z+g.offsetTop+(ge?ce:0)+Ce)+G;l.style.height=fe+"px",g.scrollTop=le-Te+g.offsetTop}l.style.margin=`${Un}px 0`,l.style.minHeight=se+"px",l.style.maxHeight=M+"px",n==null||n(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,l,u,g,b,E,i.dir,n]);Tr(()=>C(),[C]);const[I,j]=p.useState();Tr(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const V=p.useCallback(R=>{R&&x.current===!0&&(C(),w==null||w(),x.current=!1)},[C,w]);return o.jsx(jH,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:V,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:o.jsx(He.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});rP.displayName=RH;var IH="SelectPopperPosition",Cv=p.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Un,...i}=t,a=cg(r);return o.jsx(sb,{...a,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Cv.displayName=IH;var[jH,Tb]=Tc(Ca,{}),Nv="SelectViewport",nP=p.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=Do(Nv,r),a=Tb(Nv,r),l=dt(e,i.onViewportChange),c=p.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(ag.Slot,{scope:r,children:o.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:xe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const y=Math.abs(c.current-d.scrollTop);if(y>0){const x=window.innerHeight-Un*2,g=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),E=Math.max(g,b);if(E<x){const w=E+y,C=Math.min(x,w),I=w-C;f.style.height=C+"px",f.style.bottom==="0px"&&(d.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});nP.displayName=Nv;var sP="SelectGroup",[PH,kH]=Tc(sP),MH=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=la();return o.jsx(PH,{scope:r,id:s,children:o.jsx(He.div,{role:"group","aria-labelledby":s,...n,ref:e})})});MH.displayName=sP;var iP="SelectLabel",oP=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=kH(iP,r);return o.jsx(He.div,{id:s.id,...n,ref:e})});oP.displayName=iP;var Xm="SelectItem",[DH,aP]=Tc(Xm),lP=p.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...a}=t,l=Mo(Xm,r),c=Do(Xm,r),u=l.value===n,[d,f]=p.useState(i??""),[m,y]=p.useState(!1),x=dt(e,w=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,w,n,s)}),g=la(),b=p.useRef("touch"),E=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(DH,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:p.useCallback(w=>{f(C=>C||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(ag.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:o.jsx(He.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:x,onFocus:xe(a.onFocus,()=>y(!0)),onBlur:xe(a.onBlur,()=>y(!1)),onClick:xe(a.onClick,()=>{b.current!=="mouse"&&E()}),onPointerUp:xe(a.onPointerUp,()=>{b.current==="mouse"&&E()}),onPointerDown:xe(a.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:xe(a.onPointerMove,w=>{var C;b.current=w.pointerType,s?(C=c.onItemLeave)==null||C.call(c):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xe(a.onPointerLeave,w=>{var C;w.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:xe(a.onKeyDown,w=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&w.key===" "||(bH.includes(w.key)&&E(),w.key===" "&&w.preventDefault())})})})})});lP.displayName=Xm;var uu="SelectItemText",cP=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,a=Mo(uu,r),l=Do(uu,r),c=aP(uu,r),u=_H(uu,r),[d,f]=p.useState(null),m=dt(e,E=>f(E),c.onItemTextChange,E=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,E,c.value,c.disabled)}),y=d==null?void 0:d.textContent,x=p.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return Tr(()=>(g(x),()=>b(x)),[g,b,x]),o.jsxs(o.Fragment,{children:[o.jsx(He.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ta.createPortal(i.children,a.valueNode):null]})});cP.displayName=uu;var uP="SelectItemIndicator",dP=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return aP(uP,r).isSelected?o.jsx(He.span,{"aria-hidden":!0,...n,ref:e}):null});dP.displayName=uP;var _v="SelectScrollUpButton",hP=p.forwardRef((t,e)=>{const r=Do(_v,t.__scopeSelect),n=Tb(_v,t.__scopeSelect),[s,i]=p.useState(!1),a=dt(e,n.onScrollButtonChange);return Tr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(mP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});hP.displayName=_v;var Tv="SelectScrollDownButton",fP=p.forwardRef((t,e)=>{const r=Do(Tv,t.__scopeSelect),n=Tb(Tv,t.__scopeSelect),[s,i]=p.useState(!1),a=dt(e,n.onScrollButtonChange);return Tr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(mP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});fP.displayName=Tv;var mP=p.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=Do("SelectScrollButton",r),a=p.useRef(null),l=lg(r),c=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Tr(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),o.jsx(He.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:xe(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:xe(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:xe(s.onPointerLeave,()=>{c()})})}),OH="SelectSeparator",pP=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return o.jsx(He.div,{"aria-hidden":!0,...n,ref:e})});pP.displayName=OH;var Av="SelectArrow",LH=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=cg(r),i=Mo(Av,r),a=Do(Av,r);return i.open&&a.position==="popper"?o.jsx(ib,{...s,...n,ref:e}):null});LH.displayName=Av;function gP(t){return t===""||t===void 0}var yP=p.forwardRef((t,e)=>{const{value:r,...n}=t,s=p.useRef(null),i=dt(e,s),a=xH(r);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==r&&d){const f=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(f)}},[a,r]),o.jsx(Sd,{asChild:!0,children:o.jsx("select",{...n,ref:i,defaultValue:r})})});yP.displayName="BubbleSelect";function vP(t){const e=_r(t),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(a=>{const l=r.current+a;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function xP(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let a=FH(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function FH(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var VH=Hj,wP=Qj,BH=Kj,UH=Jj,qH=Xj,bP=Zj,GH=nP,EP=oP,CP=lP,$H=cP,zH=dP,NP=hP,_P=fP,TP=pP;const HH=VH,WH=BH,AP=p.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(wP,{ref:n,className:at("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,o.jsx(UH,{asChild:!0,children:o.jsx(Ku,{className:"h-4 w-4 opacity-50"})})]}));AP.displayName=wP.displayName;const SP=p.forwardRef(({className:t,...e},r)=>o.jsx(NP,{ref:r,className:at("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(wm,{className:"h-4 w-4"})}));SP.displayName=NP.displayName;const RP=p.forwardRef(({className:t,...e},r)=>o.jsx(_P,{ref:r,className:at("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(Ku,{className:"h-4 w-4"})}));RP.displayName=_P.displayName;const IP=p.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>o.jsx(qH,{children:o.jsxs(bP,{ref:s,className:at("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[o.jsx(SP,{}),o.jsx(GH,{className:at("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(RP,{})]})}));IP.displayName=bP.displayName;const QH=p.forwardRef(({className:t,...e},r)=>o.jsx(EP,{ref:r,className:at("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));QH.displayName=EP.displayName;const Gf=p.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(CP,{ref:n,className:at("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(zH,{children:o.jsx(jA,{className:"h-4 w-4"})})}),o.jsx($H,{children:e})]}));Gf.displayName=CP.displayName;const YH=p.forwardRef(({className:t,...e},r)=>o.jsx(TP,{ref:r,className:at("-mx-1 my-1 h-px bg-muted",t),...e}));YH.displayName=TP.displayName;const KH=()=>{const{user:t,loading:e,updateUserRole:r}=Ss(),n=Kr(),[s,i]=p.useState([]),[a,l]=p.useState(!0),[c,u]=p.useState(null),[d,f]=p.useState(null),[m,y]=p.useState(null);if(p.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),p.useEffect(()=>{const w=async()=>{if(!(!t||t.role!=="super_admin"))try{const C=jo(ft,"users"),I=xc(C,Mw("createdAt","desc")),j=await Ld(I),V=[];j.forEach(R=>{const N=R.data();V.push({id:R.id,name:N.name,email:N.email,role:N.role||"customer",purchases:N.purchases||0,createdAt:N.createdAt})}),i(V)}catch(C){console.error("Error loading users:",C),pt({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{l(!1)}};(t==null?void 0:t.role)==="super_admin"&&w()},[t]),e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t||t.role!=="super_admin")return null;const x=async(w,C)=>{if(w===t.id){pt({title:"Cannot Update Own Role",description:"You cannot change your own role",variant:"destructive"});return}u(w);try{await r(w,C),pt({title:"Role Updated",description:"User role has been updated successfully!"}),i(I=>I.map(j=>j.id===w?{...j,role:C}:j))}catch(I){console.error("Error updating role:",I),pt({title:"Update Failed",description:"Failed to update user role. Please try again.",variant:"destructive"})}finally{u(null)}},g=async w=>{f(w);try{await IR(zt(ft,"users",w)),i(C=>C.filter(I=>I.id!==w)),pt({title:"User Deleted",description:"The user has been deleted successfully."})}catch(C){console.error("Error deleting user:",C),pt({title:"Delete Failed",description:"Failed to delete user. Please try again.",variant:"destructive"})}finally{f(null),y(null)}},b=w=>{switch(w){case"super_admin":return o.jsx(Ry,{className:"w-4 h-4 text-yellow-500"});case"admin":return o.jsx(Gx,{className:"w-4 h-4 text-blue-500"});case"customer":return o.jsx(Js,{className:"w-4 h-4 text-gray-500"});default:return o.jsx(Js,{className:"w-4 h-4 text-gray-500"})}},E=w=>{switch(w){case"super_admin":return"text-yellow-500 bg-yellow-500/10 border-yellow-500/20";case"admin":return"text-blue-500 bg-blue-500/10 border-blue-500/20";case"customer":return"text-gray-500 bg-gray-500/10 border-gray-500/20";default:return"text-gray-500 bg-gray-500/10 border-gray-500/20"}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(sr,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(si,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"User Management"})]}),o.jsxs("div",{className:"flex items-center text-gray-400",children:[o.jsx(Ry,{className:"w-6 h-6 mr-2 text-yellow-500"}),o.jsx("span",{className:"text-sm",children:"Super Admin Panel"})]})]})}),o.jsx("div",{className:"flex-1 px-6 py-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Users"}),o.jsx("p",{className:"text-gray-400",children:"Update user roles and permissions"})]}),a?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white",children:"Loading users..."})]}):o.jsx("div",{className:"space-y-4",children:s.map(w=>o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[b(w.role),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold",children:w.name}),o.jsx("p",{className:"text-gray-400 text-sm",children:w.email}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${E(w.role)}`,children:w.role.replace("_"," ").toUpperCase()}),o.jsxs("span",{className:"text-gray-500 text-xs",children:[w.purchases," purchases"]})]})]})]})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[w.id!==t.id&&o.jsx(o.Fragment,{children:o.jsxs(HH,{value:w.role,onValueChange:C=>x(w.id,C),disabled:c===w.id,children:[o.jsx(AP,{className:"w-32 bg-gray-700 border-gray-600 text-white",children:o.jsx(WH,{})}),o.jsxs(IP,{className:"bg-gray-800 border-gray-700",children:[o.jsx(Gf,{value:"customer",children:"Customer"}),o.jsx(Gf,{value:"admin",children:"Admin"}),o.jsx(Gf,{value:"super_admin",children:"Super Admin"})]})]})}),w.id===t.id&&o.jsx("span",{className:"text-gray-500 text-sm",children:"Current User"})]})]},w.id))}),s.length===0&&!a&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(An,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No users found"})]})]})})})]}),m&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:o.jsxs("div",{className:"bg-gray-900 rounded-lg p-8 border border-red-700 shadow-xl w-full max-w-sm",children:[o.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Confirm Delete"}),o.jsxs("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to delete"," ",o.jsx("span",{className:"font-semibold text-red-400",children:m.name}),"? This action cannot be undone."]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(_e,{variant:"ghost",onClick:()=>y(null),className:"text-gray-300 hover:text-white",children:"Cancel"}),o.jsx(_e,{variant:"destructive",onClick:()=>g(m.id),disabled:d===m.id,children:d===m.id?"Deleting...":"Delete"})]})]})})]})},JH=()=>{const t=As();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};let jP=!0,PP=!0;function du(t,e,r){const n=t.match(e);return n&&n.length>=r&&parseFloat(n[r],10)}function ka(t,e,r){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype,s=n.addEventListener;n.addEventListener=function(a,l){if(a!==e)return s.apply(this,arguments);const c=u=>{const d=r(u);d&&(l.handleEvent?l.handleEvent(d):l(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,c),s.apply(this,[a,c])};const i=n.removeEventListener;n.removeEventListener=function(a,l){if(a!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(l))return i.apply(this,arguments);const c=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[a,c])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function XH(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(jP=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function ZH(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(PP=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function kP(){if(typeof window=="object"){if(jP)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Ab(t,e){PP&&console.warn(t+" is deprecated, please use "+e+" instead.")}function eW(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=t;if(r.userAgentData&&r.userAgentData.brands){const n=r.userAgentData.brands.find(s=>s.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(r.mozGetUserMedia)e.browser="firefox",e.version=parseInt(du(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(du(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(du(r.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=du(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function NN(t){return Object.prototype.toString.call(t)==="[object Object]"}function MP(t){return NN(t)?Object.keys(t).reduce(function(e,r){const n=NN(t[r]),s=n?MP(t[r]):t[r],i=n&&!Object.keys(s).length;return s===void 0||i?e:Object.assign(e,{[r]:s})},{}):t}function Sv(t,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?Sv(t,t.get(e[n]),r):n.endsWith("Ids")&&e[n].forEach(s=>{Sv(t,t.get(s),r)})}))}function _N(t,e,r){const n=r?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const i=[];return t.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&i.push(a)}),i.forEach(a=>{t.forEach(l=>{l.type===n&&l.trackId===a.id&&Sv(t,l,s)})}),s}const TN=kP;function DP(t,e){const r=t&&t.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const c={};return Object.keys(l).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const d=typeof l[u]=="object"?l[u]:{ideal:l[u]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const f=function(m,y){return m?m+y.charAt(0).toUpperCase()+y.slice(1):y==="deviceId"?"sourceId":y};if(d.ideal!==void 0){c.optional=c.optional||[];let m={};typeof d.ideal=="number"?(m[f("min",u)]=d.ideal,c.optional.push(m),m={},m[f("max",u)]=d.ideal,c.optional.push(m)):(m[f("",u)]=d.ideal,c.optional.push(m))}d.exact!==void 0&&typeof d.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[f("",u)]=d.exact):["min","max"].forEach(m=>{d[m]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[f(m,u)]=d[m])})}),l.advanced&&(c.optional=(c.optional||[]).concat(l.advanced)),c},s=function(l,c){if(e.version>=61)return c(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const u=function(d,f,m){f in d&&!(m in d)&&(d[m]=d[f],delete d[f])};l=JSON.parse(JSON.stringify(l)),u(l.audio,"autoGainControl","googAutoGainControl"),u(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let u=l.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const d=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete l.video.facingMode;let f;if(u.exact==="environment"||u.ideal==="environment"?f=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(f=["front"]),f)return r.mediaDevices.enumerateDevices().then(m=>{m=m.filter(x=>x.kind==="videoinput");let y=m.find(x=>f.some(g=>x.label.toLowerCase().includes(g)));return!y&&m.length&&f.includes("back")&&(y=m[m.length-1]),y&&(l.video.deviceId=u.exact?{exact:y.deviceId}:{ideal:y.deviceId}),l.video=n(l.video),TN("chrome: "+JSON.stringify(l)),c(l)})}l.video=n(l.video)}return TN("chrome: "+JSON.stringify(l)),c(l)},i=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(l,c,u){s(l,d=>{r.webkitGetUserMedia(d,c,f=>{u&&u(i(f))})})};if(r.getUserMedia=a.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(c){return s(c,u=>l(u).then(d=>{if(u.audio&&!d.getAudioTracks().length||u.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(i(d))))}}}function OP(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function LP(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.track.id):i={track:s.track};const a=new Event("track");a.track=s.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[n.stream],this.dispatchEvent(a)}),n.stream.getTracks().forEach(s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.id):i={track:s};const a=new Event("track");a.track=s,a.receiver=i,a.transceiver={receiver:i},a.streams=[n.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else ka(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function FP(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=s.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,c){let u=s.apply(this,arguments);return u||(u=e(this,l),this._senders.push(u)),u};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){i.apply(this,arguments);const c=this._senders.indexOf(l);c!==-1&&this._senders.splice(c,1)}}const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(a=>{this._senders.push(e(this,a))})};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(a=>{const l=this._senders.find(c=>c.track===a);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function VP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(a=>a._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(a=>_N(a,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=r.apply(this,[]);return s.forEach(i=>i._pc=this),s}),ka(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>_N(i,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const n=arguments[0];let s,i,a;return this.getSenders().forEach(l=>{l.track===n&&(s?a=!0:s=l)}),this.getReceivers().forEach(l=>(l.track===n&&(i?a=!0:i=l),l.track===n)),a||s&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function BP(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(c)===-1&&this._shimmedLocalStreams[l.id].push(c):this._shimmedLocalStreams[l.id]=[l,c],c};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(u=>{if(this.getSenders().find(f=>f.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const c=this.getSenders().filter(u=>l.indexOf(u)===-1);this._shimmedLocalStreams[a.id]=[a].concat(c)};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],n.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const c=this._shimmedLocalStreams[l].indexOf(a);c!==-1&&this._shimmedLocalStreams[l].splice(c,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),s.apply(this,arguments)}}function UP(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return BP(t);const r=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const d=r.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(f=>this._reverseStreams[f.id])};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(f=>{if(this.getSenders().find(y=>y.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const f=new t.MediaStream(d.getTracks());this._streams[d.id]=f,this._reverseStreams[f.id]=d,d=f}n.apply(this,[d])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},t.RTCPeerConnection.prototype.addTrack=function(d,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const m=[].slice.call(arguments,1);if(m.length!==1||!m[0].getTracks().find(g=>g===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[f.id];if(x)x.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const g=new t.MediaStream([d]);this._streams[f.id]=g,this._reverseStreams[g.id]=f,this.addStream(g)}return this.getSenders().find(g=>g.track===d)};function i(u,d){let f=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const y=u._reverseStreams[m],x=u._streams[y.id];f=f.replace(new RegExp(x.id,"g"),y.id)}),new RTCSessionDescription({type:d.type,sdp:f})}function a(u,d){let f=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const y=u._reverseStreams[m],x=u._streams[y.id];f=f.replace(new RegExp(y.id,"g"),x.id)}),new RTCSessionDescription({type:d.type,sdp:f})}["createOffer","createAnswer"].forEach(function(u){const d=t.RTCPeerConnection.prototype[u],f={[u](){const m=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[x=>{const g=i(this,x);m[0].apply(null,[g])},x=>{m[1]&&m[1].apply(null,x)},arguments[2]]):d.apply(this,arguments).then(x=>i(this,x))}};t.RTCPeerConnection.prototype[u]=f[u]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=a(this,arguments[0]),l.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=c.get.apply(this);return u.type===""?u:i(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let m;Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(g=>d.track===g)&&(m=this._streams[y])}),m&&(m.getTracks().length===1?this.removeStream(this._reverseStreams[m.id]):m.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Rv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=t.RTCPeerConnection.prototype[r],s={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=s[r]})}function qP(t,e){ka(t,"negotiationneeded",r=>{const n=r.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const AN=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:qP,shimAddTrackRemoveTrack:UP,shimAddTrackRemoveTrackWithNative:BP,shimGetSendersWithDtmf:FP,shimGetUserMedia:DP,shimMediaStream:OP,shimOnTrack:LP,shimPeerConnection:Rv,shimSenderReceiverGetStats:VP},Symbol.toStringTag,{value:"Module"}));function GP(t,e){const r=t&&t.navigator,n=t&&t.MediaStreamTrack;if(r.getUserMedia=function(s,i,a){Ab("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(s).then(i,a)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const s=function(a,l,c){l in a&&!(c in a)&&(a[c]=a[l],delete a[l])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),s(a.audio,"autoGainControl","mozAutoGainControl"),s(a.audio,"noiseSuppression","mozNoiseSuppression")),i(a)},n&&n.prototype.getSettings){const a=n.prototype.getSettings;n.prototype.getSettings=function(){const l=a.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[l])}}}}function tW(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}function $P(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Iv(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const i=t.RTCPeerConnection.prototype[s],a={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=a[s]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,a,l]=arguments;return n.apply(this,[i||null]).then(c=>{if(e.version<53&&!a)try{c.forEach(u=>{u.type=r[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;c.forEach((d,f)=>{c.set(f,Object.assign({},d,{type:r[d.type]||d.type}))})}return c}).then(a,l)}}function zP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(i=>i._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function HP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n}),ka(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function WP(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){Ab("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function QP(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function YP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const s=n.length>0;s&&n.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=e.apply(this,arguments);if(s){const{sender:a}=i,l=a.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n,a.sendEncodings=n,this.setParametersPromises.push(a.setParameters(l).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return i})}function KP(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function JP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function XP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const SN=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:YP,shimCreateAnswer:XP,shimCreateOffer:JP,shimGetDisplayMedia:tW,shimGetParameters:KP,shimGetUserMedia:GP,shimOnTrack:$P,shimPeerConnection:Iv,shimRTCDataChannel:QP,shimReceiverGetStats:HP,shimRemoveStream:WP,shimSenderGetStats:zP},Symbol.toStringTag,{value:"Module"}));function ZP(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(s=>e.call(this,s,n)),n.getVideoTracks().forEach(s=>e.call(this,s,n))},t.RTCPeerConnection.prototype.addTrack=function(n,...s){return s&&s.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const s=r.getTracks();this.getSenders().forEach(i=>{s.includes(i.track)&&this.removeTrack(i)})})}}function ek(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,this.dispatchEvent(i)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(i=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(i)>=0)return;n._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,n.dispatchEvent(a)})}),e.apply(n,arguments)}}}function tk(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,r=e.createOffer,n=e.createAnswer,s=e.setLocalDescription,i=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(u,d){const f=arguments.length>=2?arguments[2]:arguments[0],m=r.apply(this,[f]);return d?(m.then(u,d),Promise.resolve()):m},e.createAnswer=function(u,d){const f=arguments.length>=2?arguments[2]:arguments[0],m=n.apply(this,[f]);return d?(m.then(u,d),Promise.resolve()):m};let l=function(c,u,d){const f=s.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f};e.setLocalDescription=l,l=function(c,u,d){const f=i.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f},e.setRemoteDescription=l,l=function(c,u,d){const f=a.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f},e.addIceCandidate=l}function rk(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,n=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=s=>n(nk(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(n,s,i){e.mediaDevices.getUserMedia(n).then(s,i)}).bind(e))}function nk(t){return t&&t.video!==void 0?Object.assign({},t,{video:MP(t.video)}):t}function sk(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,s){if(n&&n.iceServers){const i=[];for(let a=0;a<n.iceServers.length;a++){let l=n.iceServers[a];l.urls===void 0&&l.url?(Ab("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,i.push(l)):i.push(n.iceServers[a])}n.iceServers=i}return new e(n,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function ik(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ok(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function ak(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const RN=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ak,shimCallbacksAPI:tk,shimConstraints:nk,shimCreateOfferLegacy:ok,shimGetUserMedia:rk,shimLocalStreamsAPI:ZP,shimRTCIceServerUrls:sk,shimRemoteStreamsAPI:ek,shimTrackEventTransceiver:ik},Symbol.toStringTag,{value:"Module"}));var lk={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(r){return r.split(`
m=`).map((s,i)=>(i>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(r){const n=e.splitSections(r);return n&&n[0]},e.getMediaSections=function(r){const n=e.splitSections(r);return n.shift(),n},e.matchPrefix=function(r,n){return e.splitLines(r).filter(s=>s.indexOf(n)===0)},e.parseCandidate=function(r){let n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");const s={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let i=8;i<n.length;i+=2)switch(n[i]){case"raddr":s.relatedAddress=n[i+1];break;case"rport":s.relatedPort=parseInt(n[i+1],10);break;case"tcptype":s.tcpType=n[i+1];break;case"ufrag":s.ufrag=n[i+1],s.usernameFragment=n[i+1];break;default:s[n[i]]===void 0&&(s[n[i]]=n[i+1]);break}return s},e.writeCandidate=function(r){const n=[];n.push(r.foundation);const s=r.component;s==="rtp"?n.push(1):s==="rtcp"?n.push(2):n.push(s),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);const i=r.type;return n.push("typ"),n.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let n=r.substring(9).split(" ");const s={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),s.name=n[0],s.clockRate=parseInt(n[1],10),s.channels=n.length===3?parseInt(n[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);const s=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(r){const n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const n={};let s;const i=r.substring(r.indexOf(" ")+1).split(";");for(let a=0;a<i.length;a++)s=i[a].trim().split("="),n[s[0].trim()]=s[1];return n},e.writeFmtp=function(r){let n="",s=r.payloadType;if(r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const i=[];Object.keys(r.parameters).forEach(a=>{r.parameters[a]!==void 0?i.push(a+"="+r.parameters[a]):i.push(a)}),n+="a=fmtp:"+s+" "+i.join(";")+`\r
`}return n},e.parseRtcpFb=function(r){const n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(r){let n="",s=r.payloadType;return r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(i=>{n+="a=rtcp-fb:"+s+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(r){const n=r.indexOf(" "),s={ssrc:parseInt(r.substring(7,n),10)},i=r.indexOf(":",n);return i>-1?(s.attribute=r.substring(n+1,i),s.value=r.substring(i+1)):s.attribute=r.substring(n+1),s},e.parseSsrcGroup=function(r){const n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(s=>parseInt(s,10))}},e.getMid=function(r){const n=e.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(r){const n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:e.matchPrefix(r+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,n){let s="a=setup:"+n+`\r
`;return r.fingerprints.forEach(i=>{s+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),s},e.parseCryptoLine=function(r){const n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,n){return e.matchPrefix(r+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,n){const s=e.matchPrefix(r+n,"a=ice-ufrag:")[0],i=e.matchPrefix(r+n,"a=ice-pwd:")[0];return s&&i?{usernameFragment:s.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(r){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(r)[0].split(" ");n.profile=i[2];for(let l=3;l<i.length;l++){const c=i[l],u=e.matchPrefix(r,"a=rtpmap:"+c+" ")[0];if(u){const d=e.parseRtpMap(u),f=e.matchPrefix(r,"a=fmtp:"+c+" ");switch(d.parameters=f.length?e.parseFmtp(f[0]):{},d.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),n.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(d.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(l=>{n.headerExtensions.push(e.parseExtmap(l))});const a=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(l=>{a.forEach(c=>{l.rtcpFeedback.find(d=>d.type===c.type&&d.parameter===c.parameter)||l.rtcpFeedback.push(c)})}),n},e.writeRtpDescription=function(r,n){let s="";s+="m="+r+" ",s+=n.codecs.length>0?"9":"0",s+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=n.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(a=>{s+=e.writeRtpMap(a),s+=e.writeFmtp(a),s+=e.writeRtcpFb(a)});let i=0;return n.codecs.forEach(a=>{a.maxptime>i&&(i=a.maxptime)}),i>0&&(s+="a=maxptime:"+i+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(a=>{s+=e.writeExtmap(a)}),s},e.parseRtpEncodingParameters=function(r){const n=[],s=e.parseRtpParameters(r),i=s.fecMechanisms.indexOf("RED")!==-1,a=s.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(r,"a=ssrc:").map(m=>e.parseSsrcMedia(m)).filter(m=>m.attribute==="cname"),c=l.length>0&&l[0].ssrc;let u;const d=e.matchPrefix(r,"a=ssrc-group:FID").map(m=>m.substring(17).split(" ").map(x=>parseInt(x,10)));d.length>0&&d[0].length>1&&d[0][0]===c&&(u=d[0][1]),s.codecs.forEach(m=>{if(m.name.toUpperCase()==="RTX"&&m.parameters.apt){let y={ssrc:c,codecPayloadType:parseInt(m.parameters.apt,10)};c&&u&&(y.rtx={ssrc:u}),n.push(y),i&&(y=JSON.parse(JSON.stringify(y)),y.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(y))}}),n.length===0&&c&&n.push({ssrc:c});let f=e.matchPrefix(r,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,n.forEach(m=>{m.maxBitrate=f})),n},e.parseRtcpParameters=function(r){const n={},s=e.matchPrefix(r,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];s&&(n.cname=s.value,n.ssrc=s.ssrc);const i=e.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=i.length===0;const a=e.matchPrefix(r,"a=rtcp-mux");return n.mux=a.length>0,n},e.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},e.parseMsid=function(r){let n;const s=e.matchPrefix(r,"a=msid:");if(s.length===1)return n=s[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=e.matchPrefix(r,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(i.length>0)return n=i[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(r){const n=e.parseMLine(r),s=e.matchPrefix(r,"a=max-message-size:");let i;s.length>0&&(i=parseInt(s[0].substring(19),10)),isNaN(i)&&(i=65536);const a=e.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const l=e.matchPrefix(r,"a=sctpmap:");if(l.length>0){const c=l[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:i}}},e.writeSctpDescription=function(r,n){let s=[];return r.protocol!=="DTLS/SCTP"?s=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:s=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&s.push("a=max-message-size:"+n.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,n,s){let i;const a=n!==void 0?n:2;return r?i=r:i=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+i+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,n){const s=e.splitLines(r);for(let i=0;i<s.length;i++)switch(s[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[i].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const s=e.splitLines(r)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(r){const s=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const n=e.splitLines(r);for(let s=0;s<n.length;s++)if(n[s].length<2||n[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(lk);var ck=lk.exports;const kl=Lv(ck),rW=GN({__proto__:null,default:kl},[ck]);function $f(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const s=new e(n),i=kl.parseCandidate(n.candidate);for(const a in i)a in s||Object.defineProperty(s,a,{value:i[a]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(n)},t.RTCIceCandidate.prototype=e.prototype,ka(t,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"}),r))}function jv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||ka(t,"icecandidate",e=>{if(e.candidate){const r=kl.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function zf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const c=kl.splitSections(l.sdp);return c.shift(),c.some(u=>{const d=kl.parseMLine(u);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},n=function(l){const c=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const u=parseInt(c[1],10);return u!==u?-1:u},s=function(l){let c=65536;return e.browser==="firefox"&&(e.version<57?l===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},i=function(l,c){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const d=kl.matchPrefix(l.sdp,"a=max-message-size:");return d.length>0?u=parseInt(d[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(u=2147483637),u},a=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const c=n(arguments[0]),u=s(c),d=i(arguments[0],c);let f;u===0&&d===0?f=Number.POSITIVE_INFINITY:u===0||d===0?f=Math.max(u,d):f=Math.min(u,d);const m={};Object.defineProperty(m,"maxMessageSize",{get(){return f}}),this._sctp=m}return a.apply(this,arguments)}}function Hf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(n,s){const i=n.send;n.send=function(){const l=arguments[0],c=l.length||l.size||l.byteLength;if(n.readyState==="open"&&s.sctp&&c>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return i.apply(n,arguments)}}const r=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=r.apply(this,arguments);return e(s,this),s},ka(t,"datachannel",n=>(e(n.channel,n.target),n))}function Pv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const i=s.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const a=new Event("connectionstatechange",s);i.dispatchEvent(a)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function kv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=s.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:i}):s.sdp=i}return r.apply(this,arguments)}}function Wf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Qf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return r.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?r.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>r.apply(this,[a]))})}const nW=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:kv,shimAddIceCandidateNullOrEmpty:Wf,shimConnectionState:Pv,shimMaxMessageSize:zf,shimParameterlessSetLocalDescription:Qf,shimRTCIceCandidate:$f,shimRTCIceCandidateRelayProtocol:jv,shimSendThrowTypeError:Hf},Symbol.toStringTag,{value:"Module"}));function sW({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=kP,n=eW(t),s={browserDetails:n,commonShim:nW,extractVersion:du,disableLog:XH,disableWarnings:ZH,sdp:rW};switch(n.browser){case"chrome":if(!AN||!Rv||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),s;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),s;r("adapter.js shimming chrome."),s.browserShim=AN,Wf(t,n),Qf(t),DP(t,n),OP(t),Rv(t,n),LP(t),UP(t,n),FP(t),VP(t),qP(t,n),$f(t),jv(t),Pv(t),zf(t,n),Hf(t),kv(t,n);break;case"firefox":if(!SN||!Iv||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),s;r("adapter.js shimming firefox."),s.browserShim=SN,Wf(t,n),Qf(t),GP(t,n),Iv(t,n),$P(t),WP(t),zP(t),HP(t),QP(t),YP(t),KP(t),JP(t),XP(t),$f(t),Pv(t),zf(t,n),Hf(t);break;case"safari":if(!RN||!e.shimSafari)return r("Safari shim is not included in this adapter release."),s;r("adapter.js shimming safari."),s.browserShim=RN,Wf(t,n),Qf(t),sk(t),ok(t),tk(t),ZP(t),ek(t),ik(t),rk(t),ak(t),$f(t),jv(t),zf(t,n),Hf(t),kv(t,n);break;default:r("Unsupported browser!");break}return s}sW({window:typeof window>"u"?void 0:window});var uk=t=>{throw TypeError(t)},dk=(t,e,r)=>e.has(t)||uk("Cannot "+r),iW=(t,e,r)=>(dk(t,e,"read from private field"),r?r.call(t):e.get(t)),oW=(t,e,r)=>e.has(t)?uk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),aW=(t,e,r,n)=>(dk(t,e,"write to private field"),e.set(t,r),r);const ug=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],dg=ug.map(([t])=>t),lW=dg.filter((t,e)=>ug[e][1]==="L"),cW=dg.filter((t,e)=>ug[e][1]==="M");function Mv(t){switch(t){case"Linear-Codes":return lW.reduce((e,r)=>e|Mv(r),0);case"Matrix-Codes":return cW.reduce((e,r)=>e|Mv(r),0);case"Any":return(1<<ug.length)-1;case"None":return 0;default:return 1<<dg.indexOf(t)}}function uW(t){if(t===0)return"None";const e=31-Math.clz32(t);return dg[e]}function dW(t){return t.reduce((e,r)=>e|Mv(r),0)}const hW=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function fW(t){return hW.indexOf(t)}const IN=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function mW(t){return t==="UnicodeBig"?IN.indexOf("UTF16BE"):IN.indexOf(t)}const pW=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function gW(t){return pW[t]}const yW=["Ignore","Read","Require"];function vW(t){return yW.indexOf(t)}const xW=["Plain","ECI","HRI","Hex","Escaped"];function wW(t){return xW.indexOf(t)}const Zm={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function jN(t){return{...t,formats:dW(t.formats),binarizer:fW(t.binarizer),eanAddOnSymbol:vW(t.eanAddOnSymbol),textMode:wW(t.textMode),characterSet:mW(t.characterSet)}}function bW(t){return{...t,format:uW(t.format),contentType:gW(t.contentType),eccLevel:t.ecLevel}}const EW={locateFile:(t,e)=>{const r=t.match(/_(.+?)\.wasm$/);return r?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.1.2/dist/${r[1]}/${t}`:e+t}},j0=new WeakMap;function CW(t,e){return Object.is(t,e)||Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>Object.prototype.hasOwnProperty.call(e,r)&&t[r]===e[r])}function hk(t,{overrides:e,equalityFn:r=CW,fireImmediately:n=!1}={}){var s;const[i,a]=(s=j0.get(t))!=null?s:[EW],l=e??i;let c;if(n){if(a&&(c=r(i,l)))return a;const u=t({...l});return j0.set(t,[l,u]),u}(c??r(i,l))||j0.set(t,[l])}async function NW(t,e,r=Zm){const n={...Zm,...r},s=await hk(t,{fireImmediately:!0});let i,a;if("width"in e&&"height"in e&&"data"in e){const{data:c,data:{byteLength:u},width:d,height:f}=e;a=s._malloc(u),s.HEAPU8.set(c,a),i=s.readBarcodesFromPixmap(a,d,f,jN(n))}else{let c,u;if("buffer"in e)[c,u]=[e.byteLength,e];else if("byteLength"in e)[c,u]=[e.byteLength,new Uint8Array(e)];else if("size"in e)[c,u]=[e.size,new Uint8Array(await e.arrayBuffer())];else throw new TypeError("Invalid input type");a=s._malloc(c),s.HEAPU8.set(u,a),i=s.readBarcodesFromImage(a,c,jN(n))}s._free(a);const l=[];for(let c=0;c<i.size();++c)l.push(bW(i.get(c)));return l}({...Zm,formats:[...Zm.formats]});var fk=async function(t={}){var e,r=t,n,s,i=new Promise((T,_)=>{n=T,s=_}),a=typeof window=="object",l=typeof Bun<"u",c=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var u="./this.program",d="";function f(T){return r.locateFile?r.locateFile(T,d):d+T}var m,y;(a||c||l)&&(c?d=self.location.href:typeof document<"u"&&document.currentScript&&(d=document.currentScript.src),d.startsWith("blob:")?d="":d=d.slice(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1),c&&(y=T=>{var _=new XMLHttpRequest;return _.open("GET",T,!1),_.responseType="arraybuffer",_.send(null),new Uint8Array(_.response)}),m=async T=>{var _=await fetch(T,{credentials:"same-origin"});if(_.ok)return _.arrayBuffer();throw new Error(_.status+" : "+_.url)});var x=console.log.bind(console),g=console.error.bind(console),b,E,w=!1,C,I,j,V,R,N,S,P;function O(){var T=E.buffer;C=new Int8Array(T),j=new Int16Array(T),r.HEAPU8=I=new Uint8Array(T),V=new Uint16Array(T),R=new Int32Array(T),N=new Uint32Array(T),S=new Float32Array(T),P=new Float64Array(T)}function M(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Ee(r.preRun.shift());le(ge)}function k(){v.ya()}function B(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)de(r.postRun.shift());le(G)}var z=0,Q=null;function Z(T){var _;z++,(_=r.monitorRunDependencies)===null||_===void 0||_.call(r,z)}function U(T){var _;if(z--,(_=r.monitorRunDependencies)===null||_===void 0||_.call(r,z),z==0&&Q){var D=Q;Q=null,D()}}function H(T){var _;(_=r.onAbort)===null||_===void 0||_.call(r,T),T="Aborted("+T+")",g(T),w=!0,T+=". Build with -sASSERTIONS for more info.";var D=new WebAssembly.RuntimeError(T);throw s(D),D}var se;function re(){return f("zxing_reader.wasm")}function ce(T){if(T==se&&b)return new Uint8Array(b);if(y)return y(T);throw"both async and sync fetching of the wasm failed"}async function he(T){if(!b)try{var _=await m(T);return new Uint8Array(_)}catch{}return ce(T)}async function Te(T,_){try{var D=await he(T),F=await WebAssembly.instantiate(D,_);return F}catch(q){g(`failed to asynchronously prepare wasm: ${q}`),H(q)}}async function Me(T,_,D){if(!T&&typeof WebAssembly.instantiateStreaming=="function")try{var F=fetch(_,{credentials:"same-origin"}),q=await WebAssembly.instantiateStreaming(F,D);return q}catch($){g(`wasm streaming compile failed: ${$}`),g("falling back to ArrayBuffer instantiation")}return Te(_,D)}function Ce(){return{a:h}}async function oe(){function T($,K){return v=$.exports,E=v.xa,O(),Va=v.Ba,U(),v}Z();function _($){return T($.instance)}var D=Ce();if(r.instantiateWasm)return new Promise(($,K)=>{r.instantiateWasm(D,(Y,ae)=>{$(T(Y))})});se!=null||(se=re());try{var F=await Me(b,se,D),q=_(F);return q}catch($){return s($),Promise.reject($)}}var le=T=>{for(;T.length>0;)T.shift()(r)},G=[],de=T=>G.push(T),ge=[],Ee=T=>ge.push(T),fe=T=>Ht(T),ve=()=>Je(),mt=[],Ue=0,lt=T=>{var _=new fr(T);return _.get_caught()||(_.set_caught(!0),Ue--),_.set_rethrown(!1),mt.push(_),Zt(T),X(T)},Ge=0,Et=()=>{ee(0,0);var T=mt.pop();Xt(T.excPtr),Ge=0};class fr{constructor(_){this.excPtr=_,this.ptr=_-24}set_type(_){N[this.ptr+4>>2]=_}get_type(){return N[this.ptr+4>>2]}set_destructor(_){N[this.ptr+8>>2]=_}get_destructor(){return N[this.ptr+8>>2]}set_caught(_){_=_?1:0,C[this.ptr+12]=_}get_caught(){return C[this.ptr+12]!=0}set_rethrown(_){_=_?1:0,C[this.ptr+13]=_}get_rethrown(){return C[this.ptr+13]!=0}init(_,D){this.set_adjusted_ptr(0),this.set_type(_),this.set_destructor(D)}set_adjusted_ptr(_){N[this.ptr+16>>2]=_}get_adjusted_ptr(){return N[this.ptr+16>>2]}}var Pn=T=>ct(T),Rs=T=>{var _=Ge;if(!_)return Pn(0),0;var D=new fr(_);D.set_adjusted_ptr(_);var F=D.get_type();if(!F)return Pn(0),_;for(var q of T){if(q===0||q===F)break;var $=D.ptr+16;if(Ni(q,F,$))return Pn(q),_}return Pn(F),_},mn=()=>Rs([]),Is=T=>Rs([T]),Oo=(T,_)=>Rs([T,_]),Pt=()=>{var T=mt.pop();T||H("no exception to throw");var _=T.excPtr;throw T.get_rethrown()||(mt.push(T),T.set_rethrown(!0),T.set_caught(!1),Ue++),Ge=_,Ge},Ct=(T,_,D)=>{var F=new fr(T);throw F.init(_,D),Ge=T,Ue++,Ge},js=()=>Ue,kn=T=>{throw Ge||(Ge=T),Ge},Lo=()=>H(""),pi={},pn=T=>{for(;T.length;){var _=T.pop(),D=T.pop();D(_)}};function Mn(T){return this.fromWireType(N[T>>2])}var Dn={},Sr={},Rr={},Ac=r.InternalError=class extends Error{constructor(T){super(T),this.name="InternalError"}},Pe=T=>{throw new Ac(T)},We=(T,_,D)=>{T.forEach(Y=>Rr[Y]=_);function F(Y){var ae=D(Y);ae.length!==T.length&&Pe("Mismatched type converter count");for(var me=0;me<T.length;++me)pr(T[me],ae[me])}var q=new Array(_.length),$=[],K=0;_.forEach((Y,ae)=>{Sr.hasOwnProperty(Y)?q[ae]=Sr[Y]:($.push(Y),Dn.hasOwnProperty(Y)||(Dn[Y]=[]),Dn[Y].push(()=>{q[ae]=Sr[Y],++K,K===$.length&&F(q)}))}),$.length===0&&F(q)},rt=T=>{var _=pi[T];delete pi[T];var D=_.rawConstructor,F=_.rawDestructor,q=_.fields,$=q.map(K=>K.getterReturnType).concat(q.map(K=>K.setterArgumentType));We([T],$,K=>{var Y={};return q.forEach((ae,me)=>{var pe=ae.fieldName,je=K[me],et=K[me].optional,nt=ae.getter,_t=ae.getterContext,Wt=K[me+q.length],Bt=ae.setter,er=ae.setterContext;Y[pe]={read:Bs=>je.fromWireType(nt(_t,Bs)),write:(Bs,Ur)=>{var yn=[];Bt(er,Bs,Wt.toWireType(yn,Ur)),pn(yn)},optional:et}}),[{name:_.name,fromWireType:ae=>{var me={};for(var pe in Y)me[pe]=Y[pe].read(ae);return F(ae),me},toWireType:(ae,me)=>{for(var pe in Y)if(!(pe in me)&&!Y[pe].optional)throw new TypeError(`Missing field: "${pe}"`);var je=D();for(pe in Y)Y[pe].write(je,me[pe]);return ae!==null&&ae.push(F,je),je},argPackAdvance:gn,readValueFromPointer:Mn,destructorFunction:F}]})},Jt=(T,_,D,F,q)=>{},mr=()=>{for(var T=new Array(256),_=0;_<256;++_)T[_]=String.fromCharCode(_);On=T},On,vt=T=>{for(var _="",D=T;I[D];)_+=On[I[D++]];return _},gi=r.BindingError=class extends Error{constructor(T){super(T),this.name="BindingError"}},Ke=T=>{throw new gi(T)};function Wd(T,_){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var F=_.name;if(T||Ke(`type "${F}" must have a positive integer typeid pointer`),Sr.hasOwnProperty(T)){if(D.ignoreDuplicateRegistrations)return;Ke(`Cannot register type '${F}' twice`)}if(Sr[T]=_,delete Rr[T],Dn.hasOwnProperty(T)){var q=Dn[T];delete Dn[T],q.forEach($=>$())}}function pr(T,_){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Wd(T,_,D)}var gn=8,or=(T,_,D,F)=>{_=vt(_),pr(T,{name:_,fromWireType:function(q){return!!q},toWireType:function(q,$){return $?D:F},argPackAdvance:gn,readValueFromPointer:function(q){return this.fromWireType(I[q])},destructorFunction:null})},Qd=T=>({count:T.count,deleteScheduled:T.deleteScheduled,preservePointerOnDelete:T.preservePointerOnDelete,ptr:T.ptr,ptrType:T.ptrType,smartPtr:T.smartPtr,smartPtrType:T.smartPtrType}),Ps=T=>{function _(D){return D.$$.ptrType.registeredClass.name}Ke(_(T)+" instance already deleted")},ks=!1,Yd=T=>{},hg=T=>{T.smartPtr?T.smartPtrType.rawDestructor(T.smartPtr):T.ptrType.registeredClass.rawDestructor(T.ptr)},Ms=T=>{T.count.value-=1;var _=T.count.value===0;_&&hg(T)},Fo=T=>typeof FinalizationRegistry>"u"?(Fo=_=>_,T):(ks=new FinalizationRegistry(_=>{Ms(_.$$)}),Fo=_=>{var D=_.$$,F=!!D.smartPtr;if(F){var q={$$:D};ks.register(_,q,_)}return _},Yd=_=>ks.unregister(_),Fo(T)),fg=()=>{let T=Ds.prototype;Object.assign(T,{isAliasOf(D){if(!(this instanceof Ds)||!(D instanceof Ds))return!1;var F=this.$$.ptrType.registeredClass,q=this.$$.ptr;D.$$=D.$$;for(var $=D.$$.ptrType.registeredClass,K=D.$$.ptr;F.baseClass;)q=F.upcast(q),F=F.baseClass;for(;$.baseClass;)K=$.upcast(K),$=$.baseClass;return F===$&&q===K},clone(){if(this.$$.ptr||Ps(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var D=Fo(Object.create(Object.getPrototypeOf(this),{$$:{value:Qd(this.$$)}}));return D.$$.count.value+=1,D.$$.deleteScheduled=!1,D},delete(){this.$$.ptr||Ps(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ke("Object already scheduled for deletion"),Yd(this),Ms(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ps(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ke("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const _=Symbol.dispose;_&&(T[_]=T.delete)};function Ds(){}var Ma=(T,_)=>Object.defineProperty(_,"name",{value:T}),Da={},Vo=(T,_,D)=>{if(T[_].overloadTable===void 0){var F=T[_];T[_]=function(){for(var q=arguments.length,$=new Array(q),K=0;K<q;K++)$[K]=arguments[K];return T[_].overloadTable.hasOwnProperty($.length)||Ke(`Function '${D}' called with an invalid number of arguments (${$.length}) - expects one of (${T[_].overloadTable})!`),T[_].overloadTable[$.length].apply(this,$)},T[_].overloadTable=[],T[_].overloadTable[F.argCount]=F}},Ln=(T,_,D)=>{r.hasOwnProperty(T)?((D===void 0||r[T].overloadTable!==void 0&&r[T].overloadTable[D]!==void 0)&&Ke(`Cannot register public name '${T}' twice`),Vo(r,T,T),r[T].overloadTable.hasOwnProperty(D)&&Ke(`Cannot register multiple overloads of a function with the same number of arguments (${D})!`),r[T].overloadTable[D]=_):(r[T]=_,r[T].argCount=D)},Kd=48,Jd=57,Sc=T=>{T=T.replace(/[^a-zA-Z0-9_]/g,"$");var _=T.charCodeAt(0);return _>=Kd&&_<=Jd?`_${T}`:T};function Rc(T,_,D,F,q,$,K,Y){this.name=T,this.constructor=_,this.instancePrototype=D,this.rawDestructor=F,this.baseClass=q,this.getActualType=$,this.upcast=K,this.downcast=Y,this.pureVirtualFunctions=[]}var Oa=(T,_,D)=>{for(;_!==D;)_.upcast||Ke(`Expected null or instance of ${D.name}, got an instance of ${_.name}`),T=_.upcast(T),_=_.baseClass;return T};function Xd(T,_){if(_===null)return this.isReference&&Ke(`null is not a valid ${this.name}`),0;_.$$||Ke(`Cannot pass "${embindRepr(_)}" as a ${this.name}`),_.$$.ptr||Ke(`Cannot pass deleted object as a pointer of type ${this.name}`);var D=_.$$.ptrType.registeredClass,F=Oa(_.$$.ptr,D,this.registeredClass);return F}function mg(T,_){var D;if(_===null)return this.isReference&&Ke(`null is not a valid ${this.name}`),this.isSmartPointer?(D=this.rawConstructor(),T!==null&&T.push(this.rawDestructor,D),D):0;(!_||!_.$$)&&Ke(`Cannot pass "${embindRepr(_)}" as a ${this.name}`),_.$$.ptr||Ke(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&_.$$.ptrType.isConst&&Ke(`Cannot convert argument of type ${_.$$.smartPtrType?_.$$.smartPtrType.name:_.$$.ptrType.name} to parameter type ${this.name}`);var F=_.$$.ptrType.registeredClass;if(D=Oa(_.$$.ptr,F,this.registeredClass),this.isSmartPointer)switch(_.$$.smartPtr===void 0&&Ke("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:_.$$.smartPtrType===this?D=_.$$.smartPtr:Ke(`Cannot convert argument of type ${_.$$.smartPtrType?_.$$.smartPtrType.name:_.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:D=_.$$.smartPtr;break;case 2:if(_.$$.smartPtrType===this)D=_.$$.smartPtr;else{var q=_.clone();D=this.rawShare(D,Fn.toHandle(()=>q.delete())),T!==null&&T.push(this.rawDestructor,D)}break;default:Ke("Unsupporting sharing policy")}return D}function La(T,_){if(_===null)return this.isReference&&Ke(`null is not a valid ${this.name}`),0;_.$$||Ke(`Cannot pass "${embindRepr(_)}" as a ${this.name}`),_.$$.ptr||Ke(`Cannot pass deleted object as a pointer of type ${this.name}`),_.$$.ptrType.isConst&&Ke(`Cannot convert argument of type ${_.$$.ptrType.name} to parameter type ${this.name}`);var D=_.$$.ptrType.registeredClass,F=Oa(_.$$.ptr,D,this.registeredClass);return F}var Ic=(T,_,D)=>{if(_===D)return T;if(D.baseClass===void 0)return null;var F=Ic(T,_,D.baseClass);return F===null?null:D.downcast(F)},jc={},Bo=(T,_)=>{for(_===void 0&&Ke("ptr should not be undefined");T.baseClass;)_=T.upcast(_),T=T.baseClass;return _},Os=(T,_)=>(_=Bo(T,_),jc[_]),yi=(T,_)=>{(!_.ptrType||!_.ptr)&&Pe("makeClassHandle requires ptr and ptrType");var D=!!_.smartPtrType,F=!!_.smartPtr;return D!==F&&Pe("Both smartPtrType and smartPtr must be specified"),_.count={value:1},Fo(Object.create(T,{$$:{value:_,writable:!0}}))};function pg(T){var _=this.getPointee(T);if(!_)return this.destructor(T),null;var D=Os(this.registeredClass,_);if(D!==void 0){if(D.$$.count.value===0)return D.$$.ptr=_,D.$$.smartPtr=T,D.clone();var F=D.clone();return this.destructor(T),F}function q(){return this.isSmartPointer?yi(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:_,smartPtrType:this,smartPtr:T}):yi(this.registeredClass.instancePrototype,{ptrType:this,ptr:T})}var $=this.registeredClass.getActualType(_),K=Da[$];if(!K)return q.call(this);var Y;this.isConst?Y=K.constPointerType:Y=K.pointerType;var ae=Ic(_,this.registeredClass,Y.registeredClass);return ae===null?q.call(this):this.isSmartPointer?yi(Y.registeredClass.instancePrototype,{ptrType:Y,ptr:ae,smartPtrType:this,smartPtr:T}):yi(Y.registeredClass.instancePrototype,{ptrType:Y,ptr:ae})}var Zd=()=>{Object.assign(Uo.prototype,{getPointee(T){return this.rawGetPointee&&(T=this.rawGetPointee(T)),T},destructor(T){var _;(_=this.rawDestructor)===null||_===void 0||_.call(this,T)},argPackAdvance:gn,readValueFromPointer:Mn,fromWireType:pg})};function Uo(T,_,D,F,q,$,K,Y,ae,me,pe){this.name=T,this.registeredClass=_,this.isReference=D,this.isConst=F,this.isSmartPointer=q,this.pointeeType=$,this.sharingPolicy=K,this.rawGetPointee=Y,this.rawConstructor=ae,this.rawShare=me,this.rawDestructor=pe,!q&&_.baseClass===void 0?F?(this.toWireType=Xd,this.destructorFunction=null):(this.toWireType=La,this.destructorFunction=null):this.toWireType=mg}var Pc=(T,_,D)=>{r.hasOwnProperty(T)||Pe("Replacing nonexistent public symbol"),r[T].overloadTable!==void 0&&D!==void 0?r[T].overloadTable[D]=_:(r[T]=_,r[T].argCount=D)},Fa=[],Va,qe=T=>{var _=Fa[T];return _||(Fa[T]=_=Va.get(T)),_},eh=function(T,_){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(T.includes("j"))return dynCallLegacy(T,_,D);var F=qe(_),q=F(...D);return q},gg=function(T,_){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var F=arguments.length,q=new Array(F),$=0;$<F;$++)q[$]=arguments[$];return eh(T,_,q,D)}},Jr=function(T,_){T=vt(T);function D(){if(T.includes("j"))return gg(T,_);var q=qe(_);return q}var F=D();return typeof F!="function"&&Ke(`unknown function pointer with signature ${T}: ${_}`),F};class th extends Error{}var kc=T=>{var _=A(T),D=vt(_);return L(_),D},Ba=(T,_)=>{var D=[],F={};function q($){if(!F[$]&&!Sr[$]){if(Rr[$]){Rr[$].forEach(q);return}D.push($),F[$]=!0}}throw _.forEach(q),new th(`${T}: `+D.map(kc).join([", "]))},Ls=(T,_,D,F,q,$,K,Y,ae,me,pe,je,et)=>{pe=vt(pe),$=Jr(q,$),Y&&(Y=Jr(K,Y)),me&&(me=Jr(ae,me)),et=Jr(je,et);var nt=Sc(pe);Ln(nt,function(){Ba(`Cannot construct ${pe} due to unbound types`,[F])}),We([T,_,D],F?[F]:[],_t=>{_t=_t[0];var Wt,Bt;F?(Wt=_t.registeredClass,Bt=Wt.instancePrototype):Bt=Ds.prototype;var er=Ma(pe,function(){if(Object.getPrototypeOf(this)!==Bs)throw new gi(`Use 'new' to construct ${pe}`);if(Ur.constructor_body===void 0)throw new gi(`${pe} has no accessible constructor`);for(var Ib=arguments.length,Rh=new Array(Ib),Ih=0;Ih<Ib;Ih++)Rh[Ih]=arguments[Ih];var jb=Ur.constructor_body[Rh.length];if(jb===void 0)throw new gi(`Tried to invoke ctor of ${pe} with invalid number of parameters (${Rh.length}) - expected (${Object.keys(Ur.constructor_body).toString()}) parameters instead!`);return jb.apply(this,Rh)}),Bs=Object.create(Bt,{constructor:{value:er}});er.prototype=Bs;var Ur=new Rc(pe,er,Bs,et,Wt,$,Y,me);if(Ur.baseClass){var yn,Sh;(Sh=(yn=Ur.baseClass).__derivedClasses)!==null&&Sh!==void 0||(yn.__derivedClasses=[]),Ur.baseClass.__derivedClasses.push(Ur)}var a4=new Uo(pe,Ur,!0,!1,!1),Sb=new Uo(pe+"*",Ur,!1,!1,!1),Rb=new Uo(pe+" const*",Ur,!1,!0,!1);return Da[T]={pointerType:Sb,constPointerType:Rb},Pc(nt,er),[a4,Sb,Rb]})},Xr=(T,_)=>{for(var D=[],F=0;F<T;F++)D.push(N[_+F*4>>2]);return D};function Ua(T){for(var _=1;_<T.length;++_)if(T[_]!==null&&T[_].destructorFunction===void 0)return!0;return!1}function vi(T,_,D,F,q,$){var K=_.length;K<2&&Ke("argTypes array size mismatch! Must at least get return value and 'this' types!");var Y=_[1]!==null&&D!==null,ae=Ua(_),me=_[0].name!=="void",pe=K-2,je=new Array(pe),et=[],nt=[],_t=function(){nt.length=0;var Wt;et.length=Y?2:1,et[0]=q,Y&&(Wt=_[1].toWireType(nt,this),et[1]=Wt);for(var Bt=0;Bt<pe;++Bt)je[Bt]=_[Bt+2].toWireType(nt,Bt<0||arguments.length<=Bt?void 0:arguments[Bt]),et.push(je[Bt]);var er=F(...et);function Bs(Ur){if(ae)pn(nt);else for(var yn=Y?1:2;yn<_.length;yn++){var Sh=yn===1?Wt:je[yn-2];_[yn].destructorFunction!==null&&_[yn].destructorFunction(Sh)}if(me)return _[0].fromWireType(Ur)}return Bs(er)};return Ma(T,_t)}var rh=(T,_,D,F,q,$)=>{var K=Xr(_,D);q=Jr(F,q),We([],[T],Y=>{Y=Y[0];var ae=`constructor ${Y.name}`;if(Y.registeredClass.constructor_body===void 0&&(Y.registeredClass.constructor_body=[]),Y.registeredClass.constructor_body[_-1]!==void 0)throw new gi(`Cannot register multiple constructors with identical number of parameters (${_-1}) for class '${Y.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Y.registeredClass.constructor_body[_-1]=()=>{Ba(`Cannot construct ${Y.name} due to unbound types`,K)},We([],K,me=>(me.splice(1,0,null),Y.registeredClass.constructor_body[_-1]=vi(ae,me,null,q,$),[])),[]})},ht=T=>{T=T.trim();const _=T.indexOf("(");return _===-1?T:T.slice(0,_)},qa=(T,_,D,F,q,$,K,Y,ae,me)=>{var pe=Xr(D,F);_=vt(_),_=ht(_),$=Jr(q,$),We([],[T],je=>{je=je[0];var et=`${je.name}.${_}`;_.startsWith("@@")&&(_=Symbol[_.substring(2)]),Y&&je.registeredClass.pureVirtualFunctions.push(_);function nt(){Ba(`Cannot call ${et} due to unbound types`,pe)}var _t=je.registeredClass.instancePrototype,Wt=_t[_];return Wt===void 0||Wt.overloadTable===void 0&&Wt.className!==je.name&&Wt.argCount===D-2?(nt.argCount=D-2,nt.className=je.name,_t[_]=nt):(Vo(_t,_,et),_t[_].overloadTable[D-2]=nt),We([],pe,Bt=>{var er=vi(et,Bt,je,$,K);return _t[_].overloadTable===void 0?(er.argCount=D-2,_t[_]=er):_t[_].overloadTable[D-2]=er,[]}),[]})},Fs=[],Ir=[],Mc=T=>{T>9&&--Ir[T+1]===0&&(Ir[T]=void 0,Fs.push(T))},nh=()=>Ir.length/2-5-Fs.length,yg=()=>{Ir.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=nh},Fn={toValue:T=>(T||Ke(`Cannot use deleted val. handle = ${T}`),Ir[T]),toHandle:T=>{switch(T){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const _=Fs.pop()||Ir.length;return Ir[_]=T,Ir[_+1]=1,_}}}},sh={name:"emscripten::val",fromWireType:T=>{var _=Fn.toValue(T);return Mc(T),_},toWireType:(T,_)=>Fn.toHandle(_),argPackAdvance:gn,readValueFromPointer:Mn,destructorFunction:null},vg=T=>pr(T,sh),qo=(T,_)=>{switch(_){case 4:return function(D){return this.fromWireType(S[D>>2])};case 8:return function(D){return this.fromWireType(P[D>>3])};default:throw new TypeError(`invalid float width (${_}): ${T}`)}},ns=(T,_,D)=>{_=vt(_),pr(T,{name:_,fromWireType:F=>F,toWireType:(F,q)=>q,argPackAdvance:gn,readValueFromPointer:qo(_,D),destructorFunction:null})},ih=(T,_,D,F,q,$,K,Y)=>{var ae=Xr(_,D);T=vt(T),T=ht(T),q=Jr(F,q),Ln(T,function(){Ba(`Cannot call ${T} due to unbound types`,ae)},_-1),We([],ae,me=>{var pe=[me[0],null].concat(me.slice(1));return Pc(T,vi(T,pe,null,q,$),_-1),[]})},oh=(T,_,D)=>{switch(_){case 1:return D?F=>C[F]:F=>I[F];case 2:return D?F=>j[F>>1]:F=>V[F>>1];case 4:return D?F=>R[F>>2]:F=>N[F>>2];default:throw new TypeError(`invalid integer width (${_}): ${T}`)}},ah=(T,_,D,F,q)=>{_=vt(_);var $=pe=>pe;if(F===0){var K=32-8*D;$=pe=>pe<<K>>>K}var Y=_.includes("unsigned"),ae=(pe,je)=>{},me;Y?me=function(pe,je){return ae(je,this.name),je>>>0}:me=function(pe,je){return ae(je,this.name),je},pr(T,{name:_,fromWireType:$,toWireType:me,argPackAdvance:gn,readValueFromPointer:oh(_,D,F!==0),destructorFunction:null})},xi=(T,_,D)=>{var F=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],q=F[_];function $(K){var Y=N[K>>2],ae=N[K+4>>2];return new q(C.buffer,ae,Y)}D=vt(D),pr(T,{name:D,fromWireType:$,argPackAdvance:gn,readValueFromPointer:$},{ignoreDuplicateRegistrations:!0})},xg=Object.assign({optional:!0},sh),wg=(T,_)=>{pr(T,xg)},bg=(T,_,D,F)=>{if(!(F>0))return 0;for(var q=D,$=D+F-1,K=0;K<T.length;++K){var Y=T.charCodeAt(K);if(Y>=55296&&Y<=57343){var ae=T.charCodeAt(++K);Y=65536+((Y&1023)<<10)|ae&1023}if(Y<=127){if(D>=$)break;_[D++]=Y}else if(Y<=2047){if(D+1>=$)break;_[D++]=192|Y>>6,_[D++]=128|Y&63}else if(Y<=65535){if(D+2>=$)break;_[D++]=224|Y>>12,_[D++]=128|Y>>6&63,_[D++]=128|Y&63}else{if(D+3>=$)break;_[D++]=240|Y>>18,_[D++]=128|Y>>12&63,_[D++]=128|Y>>6&63,_[D++]=128|Y&63}}return _[D]=0,D-q},jr=(T,_,D)=>bg(T,I,_,D),lh=T=>{for(var _=0,D=0;D<T.length;++D){var F=T.charCodeAt(D);F<=127?_++:F<=2047?_+=2:F>=55296&&F<=57343?(_+=4,++D):_+=3}return _},ch=typeof TextDecoder<"u"?new TextDecoder:void 0,Go=function(T){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var F=_+D,q=_;T[q]&&!(q>=F);)++q;if(q-_>16&&T.buffer&&ch)return ch.decode(T.subarray(_,q));for(var $="";_<q;){var K=T[_++];if(!(K&128)){$+=String.fromCharCode(K);continue}var Y=T[_++]&63;if((K&224)==192){$+=String.fromCharCode((K&31)<<6|Y);continue}var ae=T[_++]&63;if((K&240)==224?K=(K&15)<<12|Y<<6|ae:K=(K&7)<<18|Y<<12|ae<<6|T[_++]&63,K<65536)$+=String.fromCharCode(K);else{var me=K-65536;$+=String.fromCharCode(55296|me>>10,56320|me&1023)}}return $},Ga=(T,_)=>T?Go(I,T,_):"",uh=(T,_)=>{_=vt(_),pr(T,{name:_,fromWireType(D){for(var F=N[D>>2],q=D+4,$,Y,K=q,Y=0;Y<=F;++Y){var ae=q+Y;if(Y==F||I[ae]==0){var me=ae-K,pe=Ga(K,me);$===void 0?$=pe:($+="\0",$+=pe),K=ae+1}}return L(D),$},toWireType(D,F){F instanceof ArrayBuffer&&(F=new Uint8Array(F));var q,$=typeof F=="string";$||ArrayBuffer.isView(F)&&F.BYTES_PER_ELEMENT==1||Ke("Cannot pass non-string to std::string"),$?q=lh(F):q=F.length;var K=W(4+q+1),Y=K+4;return N[K>>2]=q,$?jr(F,Y,q+1):I.set(F,Y),D!==null&&D.push(L,K),K},argPackAdvance:gn,readValueFromPointer:Mn,destructorFunction(D){L(D)}})},wi=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,$o=(T,_)=>{for(var D=T,F=D>>1,q=F+_/2;!(F>=q)&&V[F];)++F;if(D=F<<1,D-T>32&&wi)return wi.decode(I.subarray(T,D));for(var $="",K=0;!(K>=_/2);++K){var Y=j[T+K*2>>1];if(Y==0)break;$+=String.fromCharCode(Y)}return $},dh=(T,_,D)=>{if(D!=null||(D=2147483647),D<2)return 0;D-=2;for(var F=_,q=D<T.length*2?D/2:T.length,$=0;$<q;++$){var K=T.charCodeAt($);j[_>>1]=K,_+=2}return j[_>>1]=0,_-F},Dc=T=>T.length*2,Nt=(T,_)=>{for(var D=0,F="";!(D>=_/4);){var q=R[T+D*4>>2];if(q==0)break;if(++D,q>=65536){var $=q-65536;F+=String.fromCharCode(55296|$>>10,56320|$&1023)}else F+=String.fromCharCode(q)}return F},Eg=(T,_,D)=>{if(D!=null||(D=2147483647),D<4)return 0;for(var F=_,q=F+D-4,$=0;$<T.length;++$){var K=T.charCodeAt($);if(K>=55296&&K<=57343){var Y=T.charCodeAt(++$);K=65536+((K&1023)<<10)|Y&1023}if(R[_>>2]=K,_+=4,_+4>q)break}return R[_>>2]=0,_-F},Cg=T=>{for(var _=0,D=0;D<T.length;++D){var F=T.charCodeAt(D);F>=55296&&F<=57343&&++D,_+=4}return _},hh=(T,_,D)=>{D=vt(D);var F,q,$,K;_===2?(F=$o,q=dh,K=Dc,$=Y=>V[Y>>1]):_===4&&(F=Nt,q=Eg,K=Cg,$=Y=>N[Y>>2]),pr(T,{name:D,fromWireType:Y=>{for(var ae=N[Y>>2],me,pe=Y+4,je=0;je<=ae;++je){var et=Y+4+je*_;if(je==ae||$(et)==0){var nt=et-pe,_t=F(pe,nt);me===void 0?me=_t:(me+="\0",me+=_t),pe=et+_}}return L(Y),me},toWireType:(Y,ae)=>{typeof ae!="string"&&Ke(`Cannot pass non-string to C++ string type ${D}`);var me=K(ae),pe=W(4+me+_);return N[pe>>2]=me/_,q(ae,pe+4,me+_),Y!==null&&Y.push(L,pe),pe},argPackAdvance:gn,readValueFromPointer:Mn,destructorFunction(Y){L(Y)}})},fh=(T,_,D,F,q,$)=>{pi[T]={name:vt(_),rawConstructor:Jr(D,F),rawDestructor:Jr(q,$),fields:[]}},mh=(T,_,D,F,q,$,K,Y,ae,me)=>{pi[T].fields.push({fieldName:vt(_),getterReturnType:D,getter:Jr(F,q),getterContext:$,setterArgumentType:K,setter:Jr(Y,ae),setterContext:me})},$a=(T,_)=>{_=vt(_),pr(T,{isVoid:!0,name:_,argPackAdvance:0,fromWireType:()=>{},toWireType:(D,F)=>{}})},za=[],Vn=(T,_,D,F)=>(T=za[T],_=Fn.toValue(_),T(null,_,D,F)),ph={},Ng=T=>{var _=ph[T];return _===void 0?vt(T):_},bi=()=>{if(typeof globalThis=="object")return globalThis;function T(_){_.$$$embind_global$$$=_;var D=typeof $$$embind_global$$$=="object"&&_.$$$embind_global$$$==_;return D||delete _.$$$embind_global$$$,D}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&T(global)?$$$embind_global$$$=global:typeof self=="object"&&T(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},gh=T=>T===0?Fn.toHandle(bi()):(T=Ng(T),Fn.toHandle(bi()[T])),Oc=T=>{var _=za.length;return za.push(T),_},zo=(T,_)=>{var D=Sr[T];return D===void 0&&Ke(`${_} has unknown type ${kc(T)}`),D},yh=(T,_)=>{for(var D=new Array(T),F=0;F<T;++F)D[F]=zo(N[_+F*4>>2],`parameter ${F}`);return D},Ha=(T,_,D)=>{var F=[],q=T.toWireType(F,D);return F.length&&(N[_>>2]=Fn.toHandle(F)),q},_g=Reflect.construct,vh=(T,_,D)=>{var F=yh(T,_),q=F.shift();T--;var $=new Array(T),K=(ae,me,pe,je)=>{for(var et=0,nt=0;nt<T;++nt)$[nt]=F[nt].readValueFromPointer(je+et),et+=F[nt].argPackAdvance;var _t=D===1?_g(me,$):me.apply(ae,$);return Ha(q,pe,_t)},Y=`methodCaller<(${F.map(ae=>ae.name).join(", ")}) => ${q.name}>`;return Oc(Ma(Y,K))},Ho=T=>{T>9&&(Ir[T+1]+=1)},xh=T=>{var _=Fn.toValue(T);pn(_),Mc(T)},wh=(T,_)=>{T=zo(T,"_emval_take_value");var D=T.readValueFromPointer(_);return Fn.toHandle(D)},Lc=(T,_,D,F)=>{var q=new Date().getFullYear(),$=new Date(q,0,1),K=new Date(q,6,1),Y=$.getTimezoneOffset(),ae=K.getTimezoneOffset(),me=Math.max(Y,ae);N[T>>2]=me*60,R[_>>2]=+(Y!=ae);var pe=nt=>{var _t=nt>=0?"-":"+",Wt=Math.abs(nt),Bt=String(Math.floor(Wt/60)).padStart(2,"0"),er=String(Wt%60).padStart(2,"0");return`UTC${_t}${Bt}${er}`},je=pe(Y),et=pe(ae);ae<Y?(jr(je,D,17),jr(et,F,17)):(jr(je,F,17),jr(et,D,17))},Fc=()=>2147483648,bh=(T,_)=>Math.ceil(T/_)*_,Wa=T=>{var _=E.buffer,D=(T-_.byteLength+65535)/65536|0;try{return E.grow(D),O(),1}catch{}},Eh=T=>{var _=I.length;T>>>=0;var D=Fc();if(T>D)return!1;for(var F=1;F<=4;F*=2){var q=_*(1+.2/F);q=Math.min(q,T+100663296);var $=Math.min(D,bh(Math.max(T,q),65536)),K=Wa($);if(K)return!0}return!1},Qa={},Vs=()=>u||"./this.program",Ei=()=>{if(!Ei.strings){var T=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:T,_:Vs()};for(var D in Qa)Qa[D]===void 0?delete _[D]:_[D]=Qa[D];var F=[];for(var D in _)F.push(`${D}=${_[D]}`);Ei.strings=F}return Ei.strings},Ch=(T,_)=>{var D=0,F=0;for(var q of Ei()){var $=_+D;N[T+F>>2]=$,D+=jr(q,$,1/0)+1,F+=4}return 0},Nh=(T,_)=>{var D=Ei();N[T>>2]=D.length;var F=0;for(var q of D)F+=lh(q)+1;return N[_>>2]=F,0},_h=T=>52;function Ya(T,_,D,F,q){return 70}var Pr=[null,[],[]],Th=(T,_)=>{var D=Pr[T];_===0||_===10?((T===1?x:g)(Go(D)),D.length=0):D.push(_)},Ah=(T,_,D,F)=>{for(var q=0,$=0;$<D;$++){var K=N[_>>2],Y=N[_+4>>2];_+=8;for(var ae=0;ae<Y;ae++)Th(T,I[K+ae]);q+=Y}return N[F>>2]=q,0},Ci=T=>T;mr(),fg(),Zd(),yg(),r.noExitRuntime&&r.noExitRuntime,r.print&&(x=r.print),r.printErr&&(g=r.printErr),r.wasmBinary&&(b=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&(u=r.thisProgram);var h={s:lt,w:Et,a:mn,j:Is,m:Oo,N:Pt,p:Ct,da:js,d:kn,_:Lo,sa:rt,Z:Jt,na:or,qa:Ls,pa:rh,F:qa,la:vg,R:ns,S:ih,y:ah,t:xi,ra:wg,ma:uh,O:hh,K:fh,ta:mh,oa:$a,V:Vn,ua:Mc,wa:gh,$:vh,T:Ho,va:xh,ka:wh,aa:Lc,ea:Eh,ba:Ch,ca:Nh,fa:_h,X:Ya,Q:Ah,I:Hk,C:Qk,U:Ik,P:t4,q:qk,b:Tk,D:zk,ia:Kk,c:Sk,ha:Jk,h:Rk,i:Dk,r:Lk,M:$k,v:Vk,E:Uk,J:Gk,A:Yk,H:r4,W:i4,k:Pk,f:jk,e:Ak,g:Vc,L:e4,l:Mk,ja:Wk,o:Fk,x:Ok,u:Bk,ga:Zk,B:Xk,n:kk,G:n4,Y:s4,z:Ci},v=await oe();v.ya;var A=v.za,L=r._free=v.Aa,W=r._malloc=v.Ca,X=v.Da,ee=v.Ea,ct=v.Fa,Ht=v.Ga,Je=v.Ha,Xt=v.Ia,Zt=v.Ja,Ni=v.Ka;r.dynCall_viijii=v.La;var Zr=r.dynCall_vij=v.Ma;r.dynCall_jiji=v.Na;var Ka=r.dynCall_jiiii=v.Oa;r.dynCall_iiiiij=v.Pa,r.dynCall_iiiiijj=v.Qa,r.dynCall_iiiiiijj=v.Ra;function Vc(T,_,D,F){var q=ve();try{qe(T)(_,D,F)}catch($){if(fe(q),$!==$+0)throw $;ee(1,0)}}function Tk(T,_){var D=ve();try{return qe(T)(_)}catch(F){if(fe(D),F!==F+0)throw F;ee(1,0)}}function Ak(T,_,D){var F=ve();try{qe(T)(_,D)}catch(q){if(fe(F),q!==q+0)throw q;ee(1,0)}}function Sk(T,_,D){var F=ve();try{return qe(T)(_,D)}catch(q){if(fe(F),q!==q+0)throw q;ee(1,0)}}function Rk(T,_,D,F){var q=ve();try{return qe(T)(_,D,F)}catch($){if(fe(q),$!==$+0)throw $;ee(1,0)}}function Ik(T,_,D,F,q){var $=ve();try{return qe(T)(_,D,F,q)}catch(K){if(fe($),K!==K+0)throw K;ee(1,0)}}function jk(T,_){var D=ve();try{qe(T)(_)}catch(F){if(fe(D),F!==F+0)throw F;ee(1,0)}}function Pk(T){var _=ve();try{qe(T)()}catch(D){if(fe(_),D!==D+0)throw D;ee(1,0)}}function kk(T,_,D,F,q,$,K,Y,ae,me,pe){var je=ve();try{qe(T)(_,D,F,q,$,K,Y,ae,me,pe)}catch(et){if(fe(je),et!==et+0)throw et;ee(1,0)}}function Mk(T,_,D,F,q){var $=ve();try{qe(T)(_,D,F,q)}catch(K){if(fe($),K!==K+0)throw K;ee(1,0)}}function Dk(T,_,D,F,q){var $=ve();try{return qe(T)(_,D,F,q)}catch(K){if(fe($),K!==K+0)throw K;ee(1,0)}}function Ok(T,_,D,F,q,$,K){var Y=ve();try{qe(T)(_,D,F,q,$,K)}catch(ae){if(fe(Y),ae!==ae+0)throw ae;ee(1,0)}}function Lk(T,_,D,F,q,$){var K=ve();try{return qe(T)(_,D,F,q,$)}catch(Y){if(fe(K),Y!==Y+0)throw Y;ee(1,0)}}function Fk(T,_,D,F,q,$){var K=ve();try{qe(T)(_,D,F,q,$)}catch(Y){if(fe(K),Y!==Y+0)throw Y;ee(1,0)}}function Vk(T,_,D,F,q,$,K){var Y=ve();try{return qe(T)(_,D,F,q,$,K)}catch(ae){if(fe(Y),ae!==ae+0)throw ae;ee(1,0)}}function Bk(T,_,D,F,q,$,K,Y){var ae=ve();try{qe(T)(_,D,F,q,$,K,Y)}catch(me){if(fe(ae),me!==me+0)throw me;ee(1,0)}}function Uk(T,_,D,F,q,$,K,Y){var ae=ve();try{return qe(T)(_,D,F,q,$,K,Y)}catch(me){if(fe(ae),me!==me+0)throw me;ee(1,0)}}function qk(T){var _=ve();try{return qe(T)()}catch(D){if(fe(_),D!==D+0)throw D;ee(1,0)}}function Gk(T,_,D,F,q,$,K,Y,ae){var me=ve();try{return qe(T)(_,D,F,q,$,K,Y,ae)}catch(pe){if(fe(me),pe!==pe+0)throw pe;ee(1,0)}}function $k(T,_,D,F,q,$,K){var Y=ve();try{return qe(T)(_,D,F,q,$,K)}catch(ae){if(fe(Y),ae!==ae+0)throw ae;ee(1,0)}}function zk(T,_,D,F){var q=ve();try{return qe(T)(_,D,F)}catch($){if(fe(q),$!==$+0)throw $;ee(1,0)}}function Hk(T,_,D,F){var q=ve();try{return qe(T)(_,D,F)}catch($){if(fe(q),$!==$+0)throw $;ee(1,0)}}function Wk(T,_,D,F,q,$,K,Y){var ae=ve();try{qe(T)(_,D,F,q,$,K,Y)}catch(me){if(fe(ae),me!==me+0)throw me;ee(1,0)}}function Qk(T,_,D,F,q,$){var K=ve();try{return qe(T)(_,D,F,q,$)}catch(Y){if(fe(K),Y!==Y+0)throw Y;ee(1,0)}}function Yk(T,_,D,F,q,$,K,Y,ae,me){var pe=ve();try{return qe(T)(_,D,F,q,$,K,Y,ae,me)}catch(je){if(fe(pe),je!==je+0)throw je;ee(1,0)}}function Kk(T,_,D){var F=ve();try{return qe(T)(_,D)}catch(q){if(fe(F),q!==q+0)throw q;ee(1,0)}}function Jk(T,_,D,F,q){var $=ve();try{return qe(T)(_,D,F,q)}catch(K){if(fe($),K!==K+0)throw K;ee(1,0)}}function Xk(T,_,D,F,q,$,K,Y,ae,me){var pe=ve();try{qe(T)(_,D,F,q,$,K,Y,ae,me)}catch(je){if(fe(pe),je!==je+0)throw je;ee(1,0)}}function Zk(T,_,D,F,q,$,K,Y,ae){var me=ve();try{qe(T)(_,D,F,q,$,K,Y,ae)}catch(pe){if(fe(me),pe!==pe+0)throw pe;ee(1,0)}}function e4(T,_,D,F,q,$,K){var Y=ve();try{qe(T)(_,D,F,q,$,K)}catch(ae){if(fe(Y),ae!==ae+0)throw ae;ee(1,0)}}function t4(T,_,D,F){var q=ve();try{return qe(T)(_,D,F)}catch($){if(fe(q),$!==$+0)throw $;ee(1,0)}}function r4(T,_,D,F,q,$,K,Y,ae,me,pe,je){var et=ve();try{return qe(T)(_,D,F,q,$,K,Y,ae,me,pe,je)}catch(nt){if(fe(et),nt!==nt+0)throw nt;ee(1,0)}}function n4(T,_,D,F,q,$,K,Y,ae,me,pe,je,et,nt,_t,Wt){var Bt=ve();try{qe(T)(_,D,F,q,$,K,Y,ae,me,pe,je,et,nt,_t,Wt)}catch(er){if(fe(Bt),er!==er+0)throw er;ee(1,0)}}function s4(T,_,D,F){var q=ve();try{Zr(T,_,D,F)}catch($){if(fe(q),$!==$+0)throw $;ee(1,0)}}function i4(T,_,D,F,q){var $=ve();try{return Ka(T,_,D,F,q)}catch(K){if(fe($),K!==K+0)throw K;ee(1,0)}}function Tg(){if(z>0){Q=Tg;return}if(M(),z>0){Q=Tg;return}function T(){var _;r.calledRun=!0,!w&&(k(),n(r),(_=r.onRuntimeInitialized)===null||_===void 0||_.call(r),B())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),T()},1)):T()}function o4(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return o4(),Tg(),e=i,e};function _W(t){return hk(fk,t)}async function TW(t,e){return NW(fk,t,e)}const mk=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],AW=[...mk,["unknown"]].map(t=>t[0]),Dv=new Map(mk);function SW(t){for(const[e,r]of Dv)if(t===r)return e;return"unknown"}function RW(t){if(pk(t))return{width:t.naturalWidth,height:t.naturalHeight};if(gk(t))return{width:t.width.baseVal.value,height:t.height.baseVal.value};if(yk(t))return{width:t.videoWidth,height:t.videoHeight};if(xk(t))return{width:t.width,height:t.height};if(bk(t))return{width:t.displayWidth,height:t.displayHeight};if(vk(t))return{width:t.width,height:t.height};if(wk(t))return{width:t.width,height:t.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function pk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLImageElement)}catch{return!1}}function gk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.SVGImageElement)}catch{return!1}}function yk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLVideoElement)}catch{return!1}}function vk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLCanvasElement)}catch{return!1}}function xk(t){try{return t instanceof ImageBitmap||Object.prototype.toString.call(t)==="[object ImageBitmap]"}catch{return!1}}function wk(t){try{return t instanceof OffscreenCanvas||Object.prototype.toString.call(t)==="[object OffscreenCanvas]"}catch{return!1}}function bk(t){try{return t instanceof VideoFrame||Object.prototype.toString.call(t)==="[object VideoFrame]"}catch{return!1}}function IW(t){try{return t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"}catch{return!1}}function jW(t){try{return t instanceof ImageData||Object.prototype.toString.call(t)==="[object ImageData]"}catch{return!1}}function PW(t,e){try{const r=new OffscreenCanvas(t,e);if(r.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return r;throw void 0}catch{const r=document.createElement("canvas");return r.width=t,r.height=e,r}}async function Ek(t){if(pk(t)&&!await OW(t))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(gk(t)&&!await LW(t))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(bk(t)&&FW(t))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(yk(t)&&(t.readyState===0||t.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(xk(t)&&BW(t))throw new DOMException("The image source is detached.","InvalidStateError");const{width:e,height:r}=RW(t);if(e===0||r===0)return null;const n=PW(e,r).getContext("2d");n.drawImage(t,0,0);try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function kW(t){let e;try{e=await createImageBitmap(t)}catch{try{if(globalThis.Image){e=new Image;let r="";try{r=URL.createObjectURL(t),e.src=r,await e.decode()}finally{URL.revokeObjectURL(r)}}else return t}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await Ek(e)}function MW(t){const{width:e,height:r}=t;if(e===0||r===0)return null;const n=t.getContext("2d");try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function DW(t){if(IW(t))return await kW(t);if(jW(t)){if(VW(t))throw new DOMException("The image data has been detached.","InvalidStateError");return t}return vk(t)||wk(t)?MW(t):await Ek(t)}async function OW(t){try{return await t.decode(),!0}catch{return!1}}async function LW(t){var e;try{return await((e=t.decode)==null?void 0:e.call(t)),!0}catch{return!1}}function FW(t){return t.format===null}function VW(t){return t.data.buffer.byteLength===0}function BW(t){return t.width===0&&t.height===0}function PN(t,e){return UW(t)?new DOMException(`${e}: ${t.message}`,t.name):qW(t)?new t.constructor(`${e}: ${t.message}`):new Error(`${e}: ${t}`)}function UW(t){return t instanceof DOMException||Object.prototype.toString.call(t)==="[object DOMException]"}function qW(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}var Yf;class Ov{constructor(e={}){oW(this,Yf);var r;try{const n=(r=e==null?void 0:e.formats)==null?void 0:r.filter(s=>s!=="unknown");if((n==null?void 0:n.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const s of n??[])if(!Dv.has(s))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${s}' is not a valid enum value of type BarcodeFormat.`);aW(this,Yf,n??[]),_W({fireImmediately:!0}).catch(()=>{})}catch(n){throw PN(n,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return AW.filter(e=>e!=="unknown")}async detect(e){try{const r=await DW(e);if(r===null)return[];let n;const s={tryCode39ExtendedMode:!1,textMode:"Plain",formats:iW(this,Yf).map(i=>Dv.get(i))};try{n=await TW(r,s)}catch(i){throw console.error(i),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return n.map(i=>{const{topLeft:{x:a,y:l},topRight:{x:c,y:u},bottomLeft:{x:d,y:f},bottomRight:{x:m,y}}=i.position,x=Math.min(a,c,d,m),g=Math.min(l,u,f,y),b=Math.max(a,c,d,m),E=Math.max(l,u,f,y);return{boundingBox:new DOMRectReadOnly(x,g,b-x,E-g),rawValue:i.text,format:SW(i.format),cornerPoints:[{x:a,y:l},{x:c,y:u},{x:m,y},{x:d,y:f}]}})}catch(r){throw PN(r,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Yf=new WeakMap;globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=Ov);function GW(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return J.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M3 3L6.00007 6.00007M21 21L19.8455 19.8221M9.74194 4.06811C9.83646 4.04279 9.93334 4.02428 10.0319 4.01299C10.1453 4 10.2683 4 10.5141 4H13.5327C13.7786 4 13.9015 4 14.015 4.01299C14.6068 4.08078 15.1375 4.40882 15.4628 4.90782C15.5252 5.00345 15.5802 5.11345 15.6901 5.33333C15.7451 5.44329 15.7726 5.49827 15.8037 5.54609C15.9664 5.79559 16.2318 5.95961 16.5277 5.9935C16.5844 6 16.6459 6 16.7688 6H17.8234C18.9435 6 19.5036 6 19.9314 6.21799C20.3077 6.40973 20.6137 6.71569 20.8055 7.09202C21.0234 7.51984 21.0234 8.0799 21.0234 9.2V15.3496M19.8455 19.8221C19.4278 20 18.8702 20 17.8234 20H6.22344C5.10333 20 4.54328 20 4.11546 19.782C3.73913 19.5903 3.43317 19.2843 3.24142 18.908C3.02344 18.4802 3.02344 17.9201 3.02344 16.8V9.2C3.02344 8.0799 3.02344 7.51984 3.24142 7.09202C3.43317 6.71569 3.73913 6.40973 4.11546 6.21799C4.51385 6.015 5.0269 6.00103 6.00007 6.00007M19.8455 19.8221L14.5619 14.5619M14.5619 14.5619C14.0349 15.4243 13.0847 16 12 16C10.3431 16 9 14.6569 9 13C9 11.9153 9.57566 10.9651 10.4381 10.4381M14.5619 14.5619L10.4381 10.4381M10.4381 10.4381L6.00007 6.00007"}))}function $W(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return J.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M12 16C13.6569 16 15 14.6569 15 13C15 11.3431 13.6569 10 12 10C10.3431 10 9 11.3431 9 13C9 14.6569 10.3431 16 12 16Z"}),J.createElement("path",{d:"M3 16.8V9.2C3 8.0799 3 7.51984 3.21799 7.09202C3.40973 6.71569 3.71569 6.40973 4.09202 6.21799C4.51984 6 5.0799 6 6.2 6H7.25464C7.37758 6 7.43905 6 7.49576 5.9935C7.79166 5.95961 8.05705 5.79559 8.21969 5.54609C8.25086 5.49827 8.27836 5.44328 8.33333 5.33333C8.44329 5.11342 8.49827 5.00346 8.56062 4.90782C8.8859 4.40882 9.41668 4.08078 10.0085 4.01299C10.1219 4 10.2448 4 10.4907 4H13.5093C13.7552 4 13.8781 4 13.9915 4.01299C14.5833 4.08078 15.1141 4.40882 15.4394 4.90782C15.5017 5.00345 15.5567 5.11345 15.6667 5.33333C15.7216 5.44329 15.7491 5.49827 15.7803 5.54609C15.943 5.79559 16.2083 5.95961 16.5042 5.9935C16.561 6 16.6224 6 16.7454 6H17.8C18.9201 6 19.4802 6 19.908 6.21799C20.2843 6.40973 20.5903 6.71569 20.782 7.09202C21 7.51984 21 8.0799 21 9.2V16.8C21 17.9201 21 18.4802 20.782 18.908C20.5903 19.2843 20.2843 19.5903 19.908 19.782C19.4802 20 18.9201 20 17.8 20H6.2C5.0799 20 4.51984 20 4.09202 19.782C3.71569 19.5903 3.40973 19.2843 3.21799 18.908C3 18.4802 3 17.9201 3 16.8Z"}))}function zW(t){const{scanning:e,startScanning:r,stopScanning:n}=t,[s,i]=p.useState(!1);function a(){i(!0),e?n():r(),setTimeout(()=>i(!1),1e3)}return J.createElement("div",{style:{bottom:85,right:8,position:"absolute",zIndex:2,cursor:s?"default":"pointer"}},e?J.createElement(GW,{disabled:s,onClick:a}):J.createElement($W,{disabled:s,onClick:a}))}function HW(t){const{onClick:e,className:r,style:n}=t;return J.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M13.225 9l5.025-7h-7.972l-3.3 11h5.359l-2.452 8.648.75.364L20.374 9zm.438 3H8.322l2.7-9H16.3l-5.025 7h7.101l-6.7 8.953z"}))}function WW(t){const{onClick:e,className:r,style:n}=t;return J.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M14.516 15.158l.714.714-4.595 6.14-.75-.364L12.337 13H6.978L8.22 8.861l.803.803L8.322 12h3.036l1.793 1.792-1.475 5.16zm5.984 4.05L4.793 3.5l.707-.707 3.492 3.492L10.278 2h7.972l-5.025 7h7.149l-3.71 4.957 4.543 4.543zM12.707 10l3.243 3.243L18.376 10zM9.795 7.088l2.079 2.079L16.3 3h-5.278z"}))}function QW(t){const{status:e,scanning:r,torchToggle:n}=t;function s(i){n(i)}return r&&n?J.createElement("div",{style:{bottom:35,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},e?J.createElement(WW,{onClick:()=>s(!1)}):J.createElement(HW,{onClick:()=>s(!0)})):null}function YW(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return J.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-7.46,0.5l-1.5,0c-0.645,0 -0.643,-1 -0,-1l1.5,0l-0,-1.5c-0,-0.645 1,-0.643 1,0l-0,1.5l1.5,0c0.645,0 0.643,1 -0,1l-1.5,0l-0,1.5c-0,0.645 -1,0.643 -1,0l-0,-1.5Z"}))}function KW(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return J.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-4.96,-0.5c0.645,0 0.643,1 -0,1l-4,0c-0.645,0 -0.643,-1 -0,-1l4,0Z"}))}function JW(t){const{scanning:e,capabilities:r,onZoom:n,value:s}=t;if(!e||!n)return null;const i=(r.max-r.min)/3;return J.createElement(p.Fragment,null,J.createElement("div",{style:{bottom:130,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},J.createElement(KW,{disabled:s<=r.min,onClick:function(){n(Math.max(s-i,r.min))}})),J.createElement("div",{style:{bottom:180,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},J.createElement(YW,{disabled:s>=r.max,onClick:function(){n(Math.min(s+i,r.max))}})))}const Ri={fullContainer:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},innerContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},borderBox:{position:"relative",width:"70%",aspectRatio:"1 / 1",border:"2px dashed rgba(239, 68, 68, 0.4)",borderRadius:"0.5rem"},cornerTopLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,left:0,borderBottomColor:"transparent",borderRightColor:"transparent",borderTopLeftRadius:"0.5rem"},cornerTopRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,right:0,borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopRightRadius:"0.5rem"},cornerBottomLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,left:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomLeftRadius:"0.5rem"},cornerBottomRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,right:0,borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomRightRadius:"0.5rem"}};function XW(t){const{scanning:e,capabilities:r,onOff:n,torch:s,zoom:i,startScanning:a,stopScanning:l}=t;return J.createElement("div",{style:Ri.fullContainer},J.createElement("div",{style:Ri.innerContainer},J.createElement("div",{style:Ri.overlay},J.createElement("div",{style:Ri.borderBox},J.createElement("div",{style:Ri.cornerTopLeft}),J.createElement("div",{style:Ri.cornerTopRight}),J.createElement("div",{style:Ri.cornerBottomLeft}),J.createElement("div",{style:Ri.cornerBottomRight}))),n&&J.createElement(zW,{scanning:e,startScanning:a,stopScanning:l}),s&&r.torch&&J.createElement(QW,{scanning:e,status:s.status,torchToggle:s.toggle}),i&&r.zoom&&J.createElement(JW,{scanning:e,capabilities:r.zoom,value:i.value,onZoom:i.onChange})))}const ZW="data:audio/mp3;base64,//PkZAAhghE0AKToAJra/n0FQygAAAGIkYJgmCYXBMAAGCTJz3zhCEM//z//1hz//8MMMMN08ssV6e5DDWIQreAgCvFKy8bXgIKMkUDDBgzJwIBtkRMQAocxIFdxghQGKDoEziAzQxOBOdH92i/iGi+zDCAEIX46a73HrSybZw1x3JZjXp7dSNy/P68rjcbt7p7fakMP5LVMyzCaj1pjvejYYAIDgDGzECjEAk1Jl3559HIon8hzlfPVTCvGJZzfcKSxXfyMWM88//9VKSxXdtnb9vomOuuRyiWVYbf+X8zp6fKGHIdycuWMMMMMMKSnp+6wsYc/9f/7z7rPPWHN556p6fP8MMMP///PPP/7+GHK9PT6p7f/unldP2np7YeHjweiYA4GLNAgAiI7u57n5//oc5/yfk6znOcPhwOBwggHCMpA4HA4KEyHOc5znO+hPIc5//+fqJh8XQPh90JU5xQinOf//87/zvP+ggAYuhCKHxdA+Hxd0EA4KKHA4ciB3kOXfXB/gmf8p/B96lAMKAgAADU+BujARHgwdisgHMfAUHAiceBg4ASBgZBiBIBH4ZaHOJsLhf8R+HYEciIgYSwj/+Bi7EqBh+AcBn5P6Bh4TuBmrAMBiZH7gaLEWgew//PkZFMlyek60MpYAShzqqZhm6gCUWeEUWAewEWYGN4X4GDEPwGE8S4GDoOIGAYKgIQOkz//gGARAUB+CwGxTwMAACAEgyAwdAlAxKhzAxXiZ///AxcEwAwJjDAziCAAwQgdAwRgdAsJQDAmAcGzYDwAhZIAKAcIQB4GT9TQMJ9/4Gi1Fv/AcAYUqKBAwGgNAwVBAAwGhwAwdBlAxFg1AwlgzAwNBuAkJQDBgEEDEqGECgChFgBgL//CIswYYH//+HKCpk4K0C9AaKKCAOBeMcR4X9C44BwABCgGAsGYCgTwHAcAwXAiAwSAQV///CJP9lwMBQAwAAAWGo5lVLCcaeneVhJAVGai3//ioaUEf//gaTAYGCj8BnEwfrIqDcsIQb/vmhU/8fAs0G8YGGwKST8Igj4GCATipksVzY8p//90FWJwh45AkX//4fCF9wMEgkL3uQc+gbGJ8t4MBAMBP/hEXf9FRuWBcAfIFjYzQdoLCBwh7IWVlxaX/w8oMCP/+EQT5poGB1Ir90DhiV6af/jFYBpT2BgoQyyt2M0ToBdEaZyzt8nTo3xdNDCTSd//o6F06CjooxRr4jVF/0bOKD6OMUNDRxiMUVFR0FFQPhGXRjDpr4MAEA4wIQUhYOIw//PkZE4nrg08sOx4ACQ0CopD2aAAlwTTBxQeMcwd8w8gZTAgABXwGABOkzpI0wAQAExnWfP4x8ZjKunWdZ1o1Qe6lFGKCNULORQCELAAPnRUf/GIx/0FHGfo3SdZ0qP2cukXKLlRtBKFgAQwCkwJgFRYBEEATmDsLSY2QiQYCEnEra+UZo6F1aKMRr6GhoaP/+j//ov+i+hjLqBgMkYoqChoo1GqCjoY06TpRqjjLOYzRRmMuizmgdKhdF8kjTAAAPMCwGswzglgwAJfzqxmioKH/////////////+ijLOAwFmN0f/////////Q///8ZjP/9DGYyFwIDBeB3MA4AlBWidKM5spykAUAQOCakK+udGqN8VDYjTRuN//0bVX//6Kio4xQFv//nf//kKOoAEIB6SY6hcxenp85///4/DEPf/84Xvl4vF4dwtxfEJgCYQHMSgKCROp4+fn////L4tQf0unz89OecLxeL0ul09y6enzp4dIhKAQFA5hKfLu1nU7/Wr71rRKJUBQSUVt////l08GUPVWgAAYAeNKsxbQNAAhQx3/oKGMM6dZ1Yy6sajMbfKio7lNcv0sScZ47lNcw32ekVFMP9fp/f+mklI6at6u/dBMQuW6y+C5BcgwAA//PkZEomGg1HYGe0riWsCqbEwiY0BJFJMxrCcxGgQ2VK8xxCF1wsABgQBBgQBAYAFCkYCgALkK4fJ00E5ctJN1Uxy5au3XoGcM4dSN0EYZwzhW0WCh1PZwzhnFFQxtnbO2d0Kt6CdXbruggkTEX5Rs4TEQUVsdVXaCcuWXIBQUGmwmgoAGcJiM4dSioHQdBnEY+hjcbov//jcb/43G43G/jCRibfxugdBnDqULO2duvQumztncbo4xGKKNxugooxGIxQULoOgFgUMTA/jbrxiMDmETL+eLhcPThzOeeOZfL5fIcBYuXD/OHv8t//LJFxjxQYHHKDGFkZMtlmKM0RgQfbVtxFIHbQBDRuzRguEI1c9XZ/rWmrZfVU3Oc/9utNNygRQkCoHlAYstNN6DJ1IINpoINppv+WG/+g2mmnUmmmpBAoJIJhnwB5xkymn606Df/t000xhU03UXC5Ol8uFyXy+Xy/l8v5w4cLk4XAvwAYUvl/QL5fTdlKZkEEEEGumaKaX00zIOemf6CH///ywI3LKpiQ2Ef4xYWMSDyI0XwzikpL0ajVHZ3j9DGIjeuXcNfjn96/S/TUz/X/vX////5K/r+v7Jn+LlAoGZOIQIwMKBQM/yppKYURmhGZkR2b//PkZE0mHg1HEG8wyiD7mlwAyDU8nJHi5htakZmZGNiRcpkJhBmUmZYQcM1VDEEBggNDV/ASEZRYKFZIhkXKLlKmk7IVTKmZNJ5KhiqVUqpX+k7+qlVKyV/ZIqZDFDWTJlFyi5TJpKhiXKBQyZzIS5JhBoayV/AQWVpGWkcYTV5O/rIVSv8/0nkr+v6/vyR/X9f1/ZN8kf5/n99/n+f5/lTKmf9/mRP8yFUqpWSv4yJUqpX9kj/MmZNJ5K/z/P9J5P/v6yFUz/CEoywgUMqZkz/FssECIsVq0aPRrRRatFFFykQZJ2Ukl///5KjmksOaA7ALROJLDnEsLbq3GTMVrwb/0dGzmM0DlfBlHQOmrdR0MYi92TX6b/cmDHLclyUVYO/4O8sFTKFTKFf8yhUyhUyhXzKlDKlCsr/+ZUoVlSsr/+ZQqZUoZUoceMfcoZUoZUoVlfOPGcmDHKcpynKg9yXJcr3JclyXJclyYO+DXJclyfgxFZVb3KcqD/g2MxzsY72L9LubPR0dCyf5K5NNd+Tv9GXRdV0XJclyfcl/n+k8kf6SX/iVynvXf///4Mg/1OkxguYzmM5jMcLHMxwwGhgNCwXMLAcwMXTLi1MD7w7tmTdBvMmE0xQFzCwHMDAd//PkZGMpigkmAGOUvCfTgcgAuC+ITswMFzC4oMLhYMByn0xvU+p9Tr0xUxf/0xv///1PBYDhgNTFTFTGTGTGTGTGTGTGTGC4GTFMDAcLAdMVMVMULAcMBpgYDhcDGFwsYXFBikLGFwMGA4MBxgcDKfTEMUoAx2BisD+mKp5Tv1OkxkxkxkxkxkxkxkxlO0xVPJi/6nv////U7CwHTFTFTGTGTGTGU+p71PpjJipihYDpipi/6n1Ov//C4GC4GTGTGTGTFU8WBSZdLhWB//yKlotyLZFiLf8tyyRUipFSKkVGRBZQMiWC3yx//wxUGKsSvDFQGHUAL3QMsHDFIYpCYy2Bmagy6BjLgy6Bh3od58DCLAizBgRb+EQiyEQiwGBFuDAi3/////20QqSBJf/qcumv/////wMZdGXAYMu1gYy6MuBEZdBgy4BjLgy6BjLgy6BjLgy6BjLQy6DBlz2cJDLgRGXAMZdGXAYMuhMZcCIy6sJGaoGMuppwNRl3WBjLgy63wiEWAwIt/+EQi0IhFsDCLAi0GBFkGBFgMJCqaqYAgAYIhBBvwf7kwcqRq7V3IctacvlN6NxqgooxRRuNRiijEZjMGRuMvz9FGozQ+1X2qe1T1S//+VhaWAtKwtML//PkZEIkbgcaAHc1xCJrjeAAtfuUAtLAWf///mWePH95ZFgsyssvM88+jzO6K+z7OM48sH+WDiweZx5YOK+zxWLGJWsa6xadAv02fTZLSpsFpvLSga0tMgWgUgWmwgUmyWl8tMgWWmLSoFJsoFlpSwsmyBg4HhEdgwHAYPBwGDgeBg8HwMHg4DB4PBgOAwcOwMHLwDn5lAwcDgiDgYDwMHA/4MB3//+EQeDAdwiDwYLPhEWQYLODBYERZBgt8Ii34GLBaB5pfAZ0FvEAQ/UfwxULlx+IXx+8f5CELH8fxKhAIDFoHBEDRc3////gwHgaRXgMHYMB2EU/gwZ/gYbw3gY3QbgYNgbgYiAbgwN3/+EQbBEG4MBuDAbAwG4RBtAwbg2////+B9B6F//////////hEdD//////////8DRahEQGCInMNg3LBElgNjDciCwG/lgNiwGxWG///mG4bf/+WA3Kw3KyIMNw2Kw3MNg3MNg3MNiIMiQ2OK0xMiA3KyJLAEZgRARmBEDEYFwBBgEgEeomowol5YAJKwCDAIAJ8sAE+gGBgCJYAQUZ/13LubMu5dyiYOAhKwEFGf9AOoz/g4CFAIol/lgAjysAgsAElYBP////lgJksBM//lgRUxF//PkZGApggsIAHt2wiNLoggAqCz8RFSwIqYioipkjEjHCCSN/+WJg5iYOYmPK5krmTmZk5mZ8sTJYmf8yJiNiIisi/ywRmRkZkZGZGRmRERkREZERGRERkREZERGxEf///hETIMEyBiZEyBiZEzwiJgDEwU4DV2gQGFOBgmP8GAiAwRAiBgIgYCIGAi/4MBHAwRgjAwRgjwMEQIgMcgY8DBGCMDBGCMDEyJn///+BiYQIBlObj4eYLIwsjAOBGFkYBoEQ84eULIw88LIA88PKHnw8sPKFkeHlANAiAaFUDAiMYPIHmDzBZBhZB///8GBOA1sH/Awni7AwnhPCITwYE/CKzBgt8Ig8GA4Ig6EQdww4Yb+F1sIgtwYCwGAsAwWAsBgLAYCwDBYCwDBaHUDF+VEDKgC2BgtBaDAWgYLQW////gYLAWQMFgLAMFoLcGAt////4RMABmBSj4NgwMOGHBsHhdcLrwbB4XXC6+F14YcLrww4Ng8MOGHBsHww4Ng8AUC4AoMQMC4fgw3wutV4QIsAgFYIBWCCVgHeVgHeWABCwAIVgH+YBwB5aRAstKgV6Ba1oMg9avtUVN/qdLWciD/cqD3Jg6DFPuTB/////lYAn//mC8C+YLwL5gvgvGC//PkZFEpLgMKYXt2xB5LogAArbdc+C8VgvlYL/mC8C+YLwL5YBfMNgNkwXixDWoHPMc4VUxVA2TBeDZPYXzXl815fK14sLxYXvK1//NeXzXl815fMtdDLSw3UsMtLCstMtLDLSwsFhWWlgt//8sFhW6f/////+WF7zXl8sL5ry+Vrxry+WF/wMLwX4MC+EQv/AwvBfAxsjYAyqpKA0lpLAwvBfBgXv///4RA2DANAYGgNgYGgNgYGwN+EQvf/BgXwYF//8DC+F4Dd6NgGBf4AgFwbB0MMF1wuuDYMBsGwusDYOBsHA2Dvg2DQuuDYOhdcMMF14YYDGYDEGwfhhgbB0MN///4RBaEQWgZByoYRWYMFvwiDsGwaF1gbB34GDwdC64XW/w1aKxDVgatir4YcLrQbBwNg7////////////+ESfgZPyff/////////4MFmBvvMAERZ8CC5adNj02E2S0qbCBSBZaYtN///oFlpU2QMXIFAYuQK9AtAo7IxLTpsIFJs/5aZRxQawaxGfIg9CsrI+PUqkWdOHp7ODsOl6cOHZ4dsulfLI9/8BAAgMBACsBLACVgBjoAWAE5OTM6WDAR0zodMdHCsJLASWAjzCQgsBJhASWAjysI8wkJMICU//PkZFkeqgcaYDd1th6DogAAqCuIxQwtDA5MdMULgyY6YqnXqdep5TpMdMVRNRL/UT9AN6jCiSjKAZRNRhAMomgFQDfCIJwYCQiCAiCMGAkGAgDBJUA3eVAMEgj////8SrDFIYqh5g8kPMHkDzB5OFkYeYPJ+HlDzB5+AYVQDibCyIPLLEZIsjIliWS0WywWyyWuWCyWJaLZbLJYDHgLAItFvy3///4eYPKBlQTh5QYEODBb//hhoNg7/C62DYPFUKwKsVgNWBq8VkVcVkVUVYrH//hGff/8Iz8GT7//////wiX4ML3gwvgwvf4ML3gZeqoHVGyBl4vgZfL2F1oNg4Lrg2DcLrg2DQw0Lrhh8Lr4YcMNBsGhdcGBcMOGGAFGAGMQsF1guuGG4XXV/4uQXOLmF1kL/8lCXkuSk4O8/FzHzuP0hIucf/CIFAMCgFPgYFAKAwCgGBQCgGHYO4GBVM4GgQI4RCMEQKQOtQjUI1CNcI14MqDKwDIAGQDzh5wsjDyw8uHmDzYeUPN+DEYRRhFEIowYgDQgIhWDApgwKAwKQYFAYFQMKkYDOxHAzsRgMKBUGBX/h5v+Hm4ecPNh5A8wBwjhZHhZAHlDzBZAFkAeQPKHnCyILIAsih5QsgDz//PkZLQgIgsMAFp1xCGLogAAA2rkB5w8oeYLIQ8kPMHkCyGHnAMKoGmAgFkUPMHmDYAtfHPHNkr/JYl8c8lCWHPHMkqSo5onMAkBDnfJX//8IgDBgBhEdAaxSQMHUGAEIgAV4risCcipBOMVRVBO////hEvAxsAwvf////8MPDDww4XWC64XXDDww4YcMPC6wYb/wYGgiGwMplMDYhTCIaCIaBga/////8GA+EQdgYPB4MB4GDwdhEH8Ig8Ig8GA6EQcEQf8DBxlBjoAweDuFwgCQXiL//iLiKCKCL4XCiKRFwEgoRT4iqpMQU1FMy4xMDCqqqqqqqr////xuDd8fv/DVwrArEIg6EQdhEHAYPBwMB+ERYBi0WAwWAZ0FoGLYOB+JfgZ0FoGdBaDBYbn+WHm9xW7/Nzzc83PLDzc8reWlA7S0oHamx//6BflpU2C0qbBaf/8yk/ysn+VkMhTKQrKVk8yE8rIVkKyYsAn/5WC+YICmCApWCGTkxtKMcVWlgFMEBTBAX////0C0C0C/////////LTFpvTZLTlpv/0Ci0xaYtOgWmymyWkAxcWmTZTYTY8tMmygUWmLTIFpsFpv9NnywLmLCx2RgWmQKTZ98UjnzZ1/++D4M6/////3//PkZOgjIg8IAFcbxCaTogAAoCuIzfJ8vfJ8Wcs5fBnD5//++L5f////////6nCKv//+o0o0FUYwqDNGCwgUMKC0VVGkVv//4Yf8LrxVCriqDVoasDVuKsNWw1bisBqwVkVkVX//gy/4YYMMGGhhgwwNg4LrhdcLrAYWGAA0zBsH4Ng3C6/////4MAoGBQIDAKBgUCAwCgYEAsDAoEAwKBAYBYMAoGBQIBgUCYGBQIBgUCwiBAYBYMAoRAgRAoGBBMBooCAYFAkIgTEUxFv/EWxFxFhFoi0LhQuFiLCL/EWqTEFNRTMuMTAwqqqq//////8TWJriV/hERAwRgYiEYGIhGBmIRgYiEYMEQMEcDMSiA1GYwMR+UDMTkA7KIgMRGIGGM0SIrRGjRlhEV4jxov8rR/5YRFhEdQSViCsR5iRJWIKxPlgQYgSViSsR5WJMQJLC78IiKERF4REeERGEREERHwMRGOBmIRhERhERAwRAYiEQGIhGBmIRAajkgG5TEEREDBHwYIwYI4REXCIV/4MCmDArgwKAYUO/gYVCkGBUGBTgYUCsGBUIhUDCoUCIVBgVBgVBgUhEKQMKhUDCoUBgVAwoFAYFcGBQDI6oA5+qQiFAMjBUGBXCyEPIFkOH//PkZPMj6gr6AFdVwifkBdwAoC2Ilh5/8PPh5Qsih5IeUA0TAZrE8PP////wMRiIIqID8piAxEIwMxCMDEQjCIj//BiIDRo8Iogii/4MKwYVhEoESkDEiIGJEgYlfBgmDBIMEAYgSBiBIREAwSERH/8I7wPfuCO4I7v/8GBvAw3Bv/////gwN34RBuBg2BuBg2BuBg2BuEQbhEG+EQbAwG4MBtwiDaDAbhEGwMBuDAbAwG4GDYG8DBsDcDBuNwDRWDcIg2AwbA34RBv///CINvCINgMRIN/////wiG4DDeG+TEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq/zB4OLAP8rBxWDisHlYOKxb5WLTFgsMWiw18LDOnjPxZoxadDOgsLAtLAbKymVhsrDZWG/LAb8w2GywGysNlgNFgNGFwuBQuWnTZLToFFpisLJsFp0Cy0voFAQLFZkMCAQwIBCsC/5WBCwBCwBCwBCsCeVgUwIBCwBDEwEMCAQrAhgUClgCFgTlgCGJgJ5gQTGJwKWAKYFApgQTGBQL5kY0HMjQYnAhWJvKwIWAIVgQrApYAhWBPBgECIEBgE/8IgXhECQiBAMCkcDEwEwMCAQGAQIhoIhsGBsIhvgwN//PkZN4irgr2AAOVqiUThegAnCtMgwNwiG/8IhuDA1hENhENgYbKYHb2IBhoNhENAwN////8IhsDKZS////8IhuBhspgc0KQRDWEQ3///CNf4GAIMDAwgAwAAwhAwAwYAIgwiHBgAMAYGAAGHv///CIBqBqESDEIgRYGoGHBiDEIgGoGgMAYgxgwgxCIETwYFYMCoMCuDApBgU8DCoU//gY3G//wYFOBhUKBEKQYFfBgV8IhSEQoBkYK8IhT/wMKhXBgUCIU4RCoRCvgYVCsDCp3A1SqAYFAiFP////gY3G1TEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVgwCAwCBEC///////8IgUIgWEQIBgUCAwTQMCAQDAoEhECAYFIwGaRMBotWAasdwH/KqBmhFgaKI4GRgKVpjCBTCBPMJHNMFMIFKwnlgJ5hUxhUwGWlpAMuMuWLTFpvQKQLQKLTIFJsoFIFFZb/8woQwoT///MIF8rC+WAphAphAppgpYClgsmwBC6bHoFFpUCi0wGXFguWCwFLgUsgX6BZaVNj0Ci03//+EQKEQKEQLCIFAxMBcDAgFAwIBQYBODAKBgUCAYEAuDAKBgUCAYFAgRAngwCgwCwiBIRAmE//PkZN4iogj2AFdVxiUrhewAhOkwQIBgQ0gbOI4GRhOBiYCgYEAv////CIFAyMBQYBf///CIF8IgUDAgFBgEAwIRwMCCcDEwFAwIBf///CIEQGMDGEXCKBpCIDCEQDCAsYInDFQMMAuYSoTQMVfBlf//+DKfBgAiGDAQMIMIgCIQYADAEGAgwP////8ItgNu2/8DAAAiABgHhECBgQGEQARA8GAeEQIMABECEQIMAwYBBgCDAARA4GAAgYACDAARAwiAgwDhED4RABEBCIGBgDoH2dgZwCBgAP//BhX/+DCiTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqF1ww////////hdeGGDDBhwjeF102E2fTYAowMLjE0zTDfyyMYjEDJTwMLSwFi0/gQLoFIFpsegWmyBQsWlQL9ApNgtIWn8tMgX6BaBX+WmQL9Nn02f9NktIgUgWmwWl9Avy06bCBSbJaUtImyWkQKLTIFgYWoFFpAKFwMLzZgwAwvLTIFlpU2fQLQK///4Yf4YaF1sLrg2DAuuDYNDDQw4NgwLrhh4XXC64Ng3C60MNwbB4XWC64YcMODYPCJYDlMQBlwRLg2DOF1v/////PkZM0eKgz0AE+UuCnLFfAAk3Fsg2DAYX/ww//4YaGGDDhdbDDACFwMuXA2DADlygusDYOBsGhhv//wNU/CKQusF1oXX+F1wuuGGC6wXWDDBdbC6wXXhHv//4AHIFgC0BZAA4Ba4FkADwFsC3AtQAOcC0BYAtgAcAA9+BYAsgW4FvgWOABwC1oq+it4RT0VVG0VFGkVywo1/RWU4U59TlFb1GvRX////QK9Nj/9AtNn02fTY9NhNlAr/QK//TYTZLSJsIFemx///oF/5aZNj02U2C0yBaBfoFAS6bKBfoFVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQiA8GAO/4RAf//////wYA4GAO+EQHAwB4GDoB4GA4HQRB0BhlDIBpEAcBgPDIBgPAeDAHIFAYuLTpspsJsFpi0haRApAtAstIYKClgF/ysF/ysE/ysF//LAJ6plTlYC1ZUypmqtWVK1VqyplSFgBaqqcwAAVIqcrEBAAKmMBERCQhwD5iICIQEyABMAABBVGXF4gIA4DLAAWAEQgLVSsBaq1ZUv+YKClgELAJ////5YBP//LAL5WC+Vgn+WAX/LT+gW//PkZMIhLgrsAFt1yiD7FiB6A9qwmwViybCbCbCBSBabCBSBabPpsegWmwWn9ApApApNgCGBmEwWlLSpsf////hEHgYOB3////4GDkiBxMHhEdgYOB4GDwcBg4HW23gooFYHd/+BnAz8O8Vv//FaBm4rBWh38es2zbAtD1m2PVBqBrBqBrAF7AF3/5el84MkuHTgyy+dL0dRnEajMIyOn8RsZ5HGG/kbIpHIkYUiD0y2WctlZaWSwrKx6FZbxnL54ul04eLhw9Ol84dl86cOHT3Ipb5Z8qKpVx6/j0EkLctVTEFNRTMuMTAwgWQLQAHgLf/////4Fn+EQESEcIgInCIRW9TkrCzH0YIjjWtI+YeCD0woLCBQwsKRWUaRVCBZFZRtRtFRTlTlThRtAr0C0C//02E2fTZQK/0Ck2f9TlFRTlTlFT/9TlFVFRFb/9ThThynIQbWkAREue5S11rKdlkDEVABh61ExYPU+tOD4MQgcn4iwigivxFRFoXDcRQLhoiwioXCeAkFBcNiL8RURQBIKEVEWiLBcKIqIpEXC4QReIoIpCIKAQMxFAFAsIuIr/4YYLr//ww4XWBgwC64XX/hhgw3hhwuv8MNhhguvhdcAUYgaYTAAoWDDg2DQbBg//PkZPYe6gzuADd1uDKsBhBAe89cYYdGjtDT2hDmlD2leaOv9oX0OX/0NNLplNf8ewakNWGrTfTRpphNJtfaeh7T1/tStdtTpqN532lpX/1/kmQ5eaf2hoaV9paGleJAvd0rer2pWu1ar2vk56vVrV5Hj1Nop+/lfv5Zpkem5kX/2vtata2rq783nbvtbW6VjW6a2rq13+rO6VysV58K7tbp0ru6Vrtqa1a67tr6sau1ulYrnfa2v927Vrt21NSuN5X927/D4diAQANh4gEIfxB+IQG/D/4gDw/iGIRD+HRATEFNRTMuMTAwqqqqqqqqqqqqqqqqqiIEK/ititFX///8VcVuK38VsVhXBOQTpq/qm8QCAcBmIxgdfFZCHECpxFBFAuFEUC4cLhsRTEVEUDVoDQD+KrFYirFX+KwKoVgVUVUVeKwGrhWRWBViqFYDV4rMViKyGroauBg/A0YThVgNAEVQqw1fisis4quKxxWYrAatxWIqoqg1dFYxVxWIrAavAaAArIrAqoqhWYrIqvxWMVYrARCADhcKoVYavDVgqhV4qorIrHFWKuKxFViscVUVYasAaAfFY/4YcMNhdfwuuGGC64YfDDA2DwusANygbBwAxhAECwNg8MOF1hD4//PkZOkc4g7yBjd1sDNkDhgqYwtcYoUyiQ0NCkxQ0NCQkSIbGKIyRGEo5mUaNEhGKEHMmaGhI0UokORvMmZmZSZSiMZQkRnKKZkzRoSNCQpQ0NEZoaNFJkhh3KOUJEhIcoSJCQkIzlDlEjMDMyMpQ0JCQzNCRGaNCRISEZoZihoaIwlEHKNGiMzFEjRmSIwlHMyZmcyiGyMxRyhIkIxRSZokSEYGBkiRojAPESNGjQxvKHMmMoSKTJCQkIwlFKLDYWGhoZhYWAAUGBsAwsMDYUAcK4XDPhQVwwLAH/DfgHC6TEFNRaqqBgjwYI//wYI/8GCL///+DBFhERgwRcIiPAzGYgMRKIDcskBgjAxEIwYI4GiRwNEjhFH4MRwYjA0aOEUf8Io/BiLgxGEUYRRQij/BiKDEYMR+DBGBiMRQiIgYIwiIwYIgiIgMRGIDUSjhEReEREBiIRAwR/wYI/8IiP4MEcGCIIiOERH8GCIIiMIiIIiODBHBgjBgjwiIoREcIiOEREDBFCKiAxHJcIiMGCMGCLwYI8IiPhERgwRAwRAYjEUIiIGCP/AxGIgiIsGCL//4REYMEXhERBERhExhExAzyAZiEWDBGERGeKsVsVRVFcVwTnFcVxVgnYqipFUV//PkZPkcfgzeAFaVxDgUBgAgatvIYrgnYqgnQJyK4riqK4rwTsVor4rQAjABAgnQritFSKoqQTsE5C1haxfF7F4XQtULSFqC1i4LwWkXIWkXRdF+LwqAnME4iqCdwToVuK+HAERWAkAlgJB0OB3Doc8OYc8VCsVgIB3DuHAERUAkAkHMOBwOAIisO4dwEAEAEg6AkAl4CeHA4AkKhXioBIOiv8OB3F+LgWkXxeF8XouxcF0XBeF8XBdF8XhdAdouC8AEsXYWsXOKsVBU/FaKmK/FTxXFbFUVPiv/8VfxXitVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVAXX/8MN/wwwYf//DDBh4Yf/+DYODDfCIFAwKBQiaANFgUDAgFAwIBcADwFuBY/At8C1wLfgAdAtwLGBawLcC3AsgWeBYwLX4XW8LrBhgiFgMlhYLrhh4XWhdb8MOGGhdcMP4YaF1gw8LrwuvhhoYYLrYXWDDBdcGwfC60MN/ww8GwZ4XXC64GZQsF1wbBnDD4XXg2DcLrBdaDYPhhgusF1uGGC64YfhhoNg0LrQwwYcMNC62F1/g2DYXW4XXC6+GH8DTIW4YeB/wR/wjwR+DP/y06bJaRAtAtAtAs//PkZNwY2grqBFW1xDhTRegABLBstL6BRaVAstN5aYtN/psIFf5aQtIgWgUWk8tImyWkQL9Avy0qbKbKbJaf02f/0CkCy05adAsC3K7+mx5aVAv0C/TZ8tOmymwB2pspsFpPLSlpy0qbCBSBXlpk2E2E2C0paUtP6Bfpslp0CkCy0ibJaZAosWQLLTJsemwgUmz6BZaYtOgUWmLTpsJsoFJslpPLT+mwmz//6Bfpsf6BSBSbCBXoFeWk9NhNhAr0Cy0/+WnTZ8tJ/oFf6bP+myWn//8tMmz/lpf//////8sPTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBgJwiCYMBP//gwE//////wiCAMEgkIggIqIDKpUCIIgwE8IzA4j+EYhGAZMIyDJA5gGRhGcIyDIhEQiIGAgwIRDwiAGAAwYMHBghGAZMGRCMhGYRgGRA5gIyDIwZPBk/wZIRmEY/gyOBxIMgIzCMgcTgwRBgjwYJBgngwTwYJhEQBiBGERMIrwOouAxAgGCQYIhERhEQDBGDBAREgwTCIgGCQYJgwSDBHwiI4MEAwSBiRHCIkGCYGJEQiI/Bgn4REYREeBiBIH6XhERhETwogoy04mpZibFmJuWYmx8n//PkZN4ZrgrkAFZUyDcjofgAA9qc0HafZ8HwNrjaG3xtjaDtJwTo+D55Ow7fxNRNSyLPlqJsAr/lmA/FmWYm5acTQVgTkVQTnBOQTgVxVBOBVFWK4J3FUE7gBABOwToVQTsVhUFcVRXBOhUBORWiuKkVYrCqK+KoqgnQrAnEV+K8E7FQE5xWBOQToVQTsVRW8V4qRUFYVgTsVhXioKgrCqKwqAnYqCtBOhUioK+CcisK8VRUFSKnirFQVBVFcE6FcVoJwKoqCrFXFUE7gnAqiuCcQTsE7xU8VP8VYrgnYrCuTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqn3/l/J/8vHL5f/BhwCETgGpIDOATgEIOFoDcHzgEIDgC+pG7eve1S/6tat7rXupDXSStWoIpGS4TSMQNIySMwpIyAaRkkZ8GJGdBtbwYkZ63tCKRkoIpGWDEjLCKRmEkjOvsEUjJOsIpGa6bOrgxIzsEkjIGJGYUkZVKCKRmqoDkgEjMJJGSYMSMAikZJ3qhp0dq9ru3X1I36FujPbXuxwKbr//waABfg0AC6DUDUDXBqBoAmQawJiGrhqDUGoN//PkZL8USgKcAAblrroTgfQAbhtQAag1QawaYNIAuQa12Lv9si7F2NnXa2Vsi7i/DZl2tlL9l+vL8tlUTUTUTUYQDIBlGUAyifqJKJqJ+p5Mf/U7TETEU7CxkxVO1PKdqeU8u4vq2ddnrsbM2Zs/tl9s67V2NlbIu5sgaA1Q14ExAmAaA0BrDVDXhpgTPDQGuBMA0gTKGgCYgTHDQGrDUGgNcNQaw1hoAmcNIaRIAtALVEgC1gteI8FpBaBIAtcRwkAWgFpBaILVBaIkAWgRwjhIiPEeDXwa/4NUGr+DRwaKBgX/8IhP//wiF8GBMGBP/wYEhEKEQmEQuDAoGFTAwLgwLhG/4MvCM8GSDJCNwZQOXg2DwbB8MPDDhhuGGBsHhh8Lrf4MCQYFCIUGJgiE8GBQMIFhELDDhdaGHhdYGwaGGDDhhuDYMBsHg2D8MMGHBsH8GwYDYMhEKEQgMCeDAsIhAiFBgQIhAYFhEKDAkGBMIhYGEC4GFCBELgYUKDAuEQsGBQMKEwiEBgUGBcIhQYFwYFAwgWDAoRC8GBAYE4RCgwKEQvhEJgYUIBhQkIhAiECIUGBIMC4RCgwJCIUGBAiFgaYLwiEA5cGXCNhGBGwZAw4Ng0MPBkqNqcoqorlh//PkZP8cygrkAFI0wjo7lfAAjhq4SnPor//psoFemygWmwWm/0C0Ci05adApNn/TZQLU5RU9FRFVFdTn1OFG1Gywv/UbUa9Ff0VoFgCwBbAtQLUCzAtgAchHAN8ImAbgBvwDd4RwjQDeAN8I0ImEQEQAbwRgiQjBHhHAN0A3vgG6Ab/CIhEgG5AN6EQESAbmEYI4RABvYRoRABuYRgDehEQiAiIRABvcA3QiQDfwjwDfCICPCJCJCJ4RwiYRwjBEwDehEYRgDfCNCOEQEQEcI+BagAd4FrAscCxAswLfwLAFgC1wLNVMQU1FMy4xMDBVVVVVVVVVBlBkwO3wZAZMIz//////+DJwO0IwI0DsA7cGUI34Rn4RgMuEZgywZQjAZP/hGAcmDKEYDIB28GQGQGXhGgcgRoMgRoHYBywZAZYMmBygyQYFCIUDChQYE4MCgaYJ/gwKEQsGBAiEBgXAwgQLrhdcGwcGHBsGA2Dgw4YYGwZC6/hdYMMF14YcLrYYcMPDDhdYGweF1oYb4MCwYEwYEgwJBgTCIQGBIRC/BgQDCBcIhAMKFhEKDAsGBQYFAwgTgwKDAoMCQiEgwIBhAnCIUGBQiFwiEBicIhAiFhEIgIoBooGieDPA+4GeDPCP//PkZOobXgrkAEY0jjazieQgBKKIBGgyBGhGhGgyAdoMmEaDIB2gyhGwZYMsI0GSDIEaDKB2QOWEaDKB2hGgygcoHYBygdkDtgygcngyAyhG4MgMgRgRmDJCNBkA7QjAZIRoRoMuByhGgyAyAyhGwZYHKByAcgMgRoHIEbCNCNA7fCNA7AZAO0GSEYEaDLA7cDthGgyAyAyQjAOwGUIyDKEYEaEYEYEaEbA5AZQZAZAZIMgRkGXBlBkCMgyAyQZYMngcmEb8GUGQIyDIBywZAZOEZhGBGwO2EbwjcI3hGYMqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqquDqz8GMDQIvBj///+DGDEGAMAifBj8IuEThFCIEQGPCLwiQYBFCKESDCETBhhGAZGEZ4MjgcSEY4GoRQigxCIEQGPCKBiBrgxwiBEwMIRAY4MQNMIkImDEGIRYMIRYRAYhFBjwYwNQYgwBgBh4GAMQiwYgxA0gahFBgBjgYBFhFhFCKEWBgEWEUGEIgMQYQMYRAMQigxhFBh4GkIgRIRYRAY4RIMQYgYhFA18IoMQYQihFhEgwhFCIDEGIRQieBiEUIoRQYhEwYDAFwGrBog0waAaQawacGsGiDQp9MZMVT3piJjJjK//PkZOYZBgjoaUJQ0DprofQgbhq0dep71PqeU69TpMdMVT6n1OlPKdJjpiKdFZkxlPKdJiJj+mKp/0xFPBoAmYaw0BpwJhDSBMQ1BqAmIEzDSGgNXDRDRhp+GsNMNAEyAmYagJkBMA1BpDXAmECZhoDXhqAmYawJjgTICZBrDSGsNAExDVDQGqGgNHDWBMIaQ0BrAmcCYgTHAmIEzDWGgNYaOBMw0BqDSBMYaA04aA1hqwJhw0ATKGqBM8NYEz4aQJkGoNMNIag1+GsCY+BMQJlDVw0cCYfDXw1ho4aQ0gTCTEFNRTMuMTAwqqoD37wjuhHf/////hGf////hHf/gycEZwRn4MnYMncIzsGTwOdOA507A507hGeEZ8GTuDJ4Rn4HPn4Mn4RnhGcDJwM3YM3gzdBm6DNwR3QjvA927Bm//Bm7Bm/Bm8GbgZvBm4GboR3gzeEd+DN8GbvBm6EZ+Bzp4Mn4HOnBGfA588IzsDnTgZPCM8Iz+EZ/CM4DnTgOdPBk8Iz4RJwGTidBi7AycTgiT4RJ8GE6ESdhEngZPJwGTieDCcESfwYToMJ3AycTwiTsDJ5OhEnwibwYb+ETdwibwibvCJuwYb/4RN/Btf/jYGyNv8bHLUtSzE0/LQBW//PkZPQcHgjQAFKVrjfDmgAge1eMLITcshNy1LX8si0LUTQtCyLQTUteWQmvLItSz4mgmnTJops0umEymDSPsnR9HwfB8k7Pvn0fAvwtcLXF/F+L4vQtQWuFoC0BaReF7AeBfwtcXBdF4XheFwXAtAui9C1haRdi6LwvirgnUE6FcVBVisKgrCvioK+KoqiqAhh3AQFXhwVYrFYCWHMOioVAI4dFWHPDgCAdDgdDmHcBIBEO+HRWAiKsBMO4dFQCAdATw6HBWHBWAgHBUHMOf/gICsOCoV4qw7+KxWHA6KhVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVC11Fz1+NP+/Xkqpr9OfuhQ6lZNWf+XsZc/si+KNoOj/Ntai9j7IISgZAklTqQhjToNTeQoreRdaSDODWvYAVFaWWkQmVuZPP8bRUzq896vc+XS6mm5gnnW7JLnV4z9N5XnW4k86x+uyHyxnWkmdborzraff2SvOtvljOtjd/5XRW8MivOsry/K3gUzrFPS1eFTOttTsul1+lLGdbV3c53h51mdbK7xPOr1SpnWlM63kedZnV4XPK86onnW7myrnWTmRTOqascoabXd/L+yuzS95dv1efjhl92ntYyTuIb6wuWRZFmWRa//PkZOcb/gqMACDf1LTLofggA9qc/gKRZiblqWYm3E24moSQnR9BJj6JwfBaFqWZZFoWvLUshNPxNuWn6bTZHgozRTSaNAY5oGjFQVgTkE6FUVorioK8VBXBO8VRUioAhxVioK4qAnIrYrCqKsVRVBORXBORVFcVcVwTgVBUBORUisK4rCoKwrxXFYE4FYVATjFcVhX4rcVBVFQV4rxVFSKwqCpFcV+K8VhXFYV4qivFUE4FaCdivBORUBOfBOgToE6FUVYqisKgqCtxWFbFQVxXisKgqRU4qioKuKwqCvxVBkH/4Mgf4Rg4RgfgxZBizhFYEVuDFvhFbBi3CKyEVsGLf/4MgAxaDFoGsWYMWgaxYBrFngxaDFnCKwIrAYswNas+DFgRWYGtWYMWBFZgxbgaxbgxZCKwGLIRWgxZCK2EVmDFmDFgMW4GtW8IrAYtBi3Bi0GLAYsCK0IrQit4MWeEVgRW+DFsI9cDW9AYtgxZhFaBrVgMWgxaDFvCKwIrIGtWhFaBrFuEVvBi3hFZA1i0IrYMWYMWAxaEVkGLAisCKzBizCK0DWrIRg+EYIRgQjABkHwODABkDhGDwODBgyAEYIRoRvww4YcKILYKILfhRg5htjY4OQbQ2hNAH8su//PkZP8cRgjWAFAUYjwDofQAi9pcJry1E1LUsuWvE2E0LQTcB+E2LMTctQFEEcWnFYVwTkAI4rRWFYE6BOhWwToBBAQgnIrisETANwIiAb/COEQEbgG+EcA38A3wjhGCMEeEaEeKoJwK4J2KoARBVBOIJ1FWKoJ0CcCuCdRWFcV4rioK4rAnYJ2K0V8VYr8E4xWFUVBVFQE6FXBORWFSKorxVFcVwToE5wTvBOoqwToVIJziuKwJxAQgnUVBUgnAqQCaCdxWirFaKwrRWFcE7FfFeK4rgnIrAnYrCoKoqgnAqCrip4qgnCr/////8Iu8BjvP4Ry5/8Izggc4Zw4RnD/hGcP8GThBk4eDJwgycIMnDwjOD4MnBA3eu9hF3kGO8gx3vBjvAN3jvMGO8CLvAY72DHeAbvXe+DHehF3kGO8gbvHeBF3oG713gG713vgx3oMd5BjvAi7wGO9A3eu8BjvMDd470Iu9wN3jvQY7wGO9wN3jvIRd4Bu9d6Bu9d6DHeAbvHewi7yEXecGO9BjvQN3rvIG7zykGO9A3eO9CLvYMd6EXegx3gG7x3kDd470Dd472DHewY7yDHeAKomwmhZFkAof8tCy4m5aCbcTUswFYsy0/LQTX9NBqBgJgYaY//PkZPcaTdCuAFgWlkI0DfQAe9r8Jxz6CShr8++JsArgjxNBNC0LQsyyLMsgRxallyyLIsi0LUTUtS0AVwFPia8si0LMTXiacsxNizLMTYTcsi1LMsy0E2LUsuJqJvxNyy/E1LMteWgm4mpZlkJuWRZFmWnLQTfgncVATkVcVQTsVIqQToVxWFeK4rwTmATCsCcAnQJyKoriqKwrxWiqKoqwToVRWBORWBOBVFSKgq4qAnAqAnArRVgnIJ3FYVQAgCriqK4qYqivBOsVoJwKgJ3FYVBWFfBOIqCoCcivipxUFSCd4qRV4rCvFaCc/BOhW8VxWFUVhX4r1eX/+DHgaYMOEX/CJgwwYQY8GODH/wYf4RAiQiAxCKBj4GAMYRQiwYcGEGMIoMfhECIBgEXAwCJhEA1BjhF+BhCIDEGARYGoRAYgxCLwYeESEUGMDEIoGAMAiAwBiBrCJ8GMGGEWEUGIRYMAYAxCKBiBgBqDDA1wiBEBiDAIsGIMANANMIoMAYhEBh4GMGMGARfAxBj8GAMANYRAYBFAwCIBhgYhEwNQMYGIRAMAiwNYRQi4RQYwYgahEBiBqBgESEUIqa6Z6bTBpGkmUwmkwaZpJlNCkifmkaaaBymgm0wmRPxSDTTa//PkZOYYTgboZUAQIkCEFgAAe898YTZpJtMJhNilphNdMJhMGgmemDSNJNmkaX6aNJN9MJhMc0E2mzSNJMpg0umU2mDS5oJlNJtNJnpg0DSTBoml0wmzTE8TRpGgm00mkzzRNNMJg0jQTSb/NFNdNGl02KTzRTfTPTSbTKZNLphNJpNmgmUymkwaaaTKZ/TSYTBoJr/ifptMpr9MJlNptMpg0kymumEwmf+mEwmOmkymTT5ppv80eaHTCYTHTSaNBNJtN80/0yaBoJo0k2aPTPNA0OaSaTJoplMJv9MgBAB4MBUGwbwVwUBkFAYDAU4NBoMBqhAELk//h/y1/vz6/6zMnEglwqnIsVSHBzAMMIqXiLgxS8ucoLCKl7VwipeupwYpeAxS8Z22hSl4U+qE1L2goKUva1GUJqXqwkpeAxS81IQpS8smBqXql6E1LyEVLxdEJqXoSUvAmpeJhFS8rpH3CKl6EVLxPWFKXgDUvVL1LCal4kuDFL2EVLxFlPClLyEVL2FKXhdwYpeswGpeqXkGKXqLAxS8wYpeqWk8KUvATUvQYpehJS9Bil6yoUpegipeZT2x1vN5NR2X3KrRuXjFmaS0AUCyE1BHflmWZacTYsvy05ZgAIs+WQCqJoWZ//PkZOwZ+gaYBgbm6EQMAfQAe9r8ZCbiaFkWv5ZibialoArlryyDtCSnyfR8hrE7PpNmiaIxDTGKafTJalqJoJoWQm4mnLUtSzE1LUsxNyy4mpZlqJpy14mgD8WpagKvLIEcJuWnLItBNhNhNxNgH8tSyLMTflmA/iaCaFqJqWf4mxZFmCdCvFWKwqivgnQJzFfwToAIwqgnOKgqCoK4J2KwqisKwJwKwqCqKgJwK4rYqirgnIJ2K8VhVwTmKorYrioK4JwKwrRWFQE5FUE6BOwTgV4qYqiuCdAnYqAnMVBVFUVATkVBVirioKoqCviuK8VwTjxWFfivFUVxXBOcVuKvFaKoqiuCdeEW3Bjb/gxvhFvCLYGN8GNwi3CLf8DbtuEW//CM7+DG+EW+DG8DbNgi3CLfA2zYItwY3gbZuDG8GT/Bk+DJ+DJ/hGdCM+EZwMnQZP8GT8GToRngc6dBk4IzwZOBk8GTvhGdBk+DG8Dbt8DbtgY2CLbBjYGNwi2A2zYDbN4RbhFtA2zcDbNwNu3CLaEW4RbeEW2DG8DbNwY3BjYDbNgY3A2zYItwi3CLbgbdvA27YGN/CLaDG4RbgxsDG4Rb8ItsI7oR3cGb00m0wmTT6aTZoJgUpMc0kwaa//PkZNcYqeLUAAAUHjw8DgQAe88cYTXTXNBpXiQdfLVpLJoaCSJs0TQNAbRpJpDWleaGlDmlfQ9fQ7tBZoa0IeOw3Ccq44TcHgrufDVzQNA0Om0wmDTNE0EymkymumU2mU0aSY6ZE8NFMmiaaYNDptMGn+aJpdNptNps0OmU0J50wNtMGmmEz/zQTJpppNplMJlM9M8FAYCoKAAApgqDIMACwAQbBsAMGQAQaCkGg0GgyCkGeCgNABwAAUgrwA+CoAQNAeHCAOAeAyIQHBwgDg4QYDAGgMEEOEAeA0Q4DxAHh0PEMGYMBsFQYDPgoDMGQV4NBqryAZfhGfwjMDl4Rv/wjcGT/4R/CPBH//hH4H3gzv4M7A+/gzoR4GdBnAf+DPBnwj4M7BnwivA1QIpCKcIpgaqDFgaqBogMWBqgGqgxQinA0XBi8IqEUCKBFcD7/CPwj0I+DPA/8GfBnQZ8I+EeCPwZ4R6EfhGcI0GSDIDJCNCMBkgdsIwGQDkBk4HIEZgy4RoHZwZQjcDtCMgcoRgRoRgHKDJBl4RgHIDKDIEYEaEZgyYMoRsIwGQGQIwGUGUI3A5AZMI2EaDLBlwjQZQjAjAZQoqIqqN+pypx/qNIqoqqNKNKcqchwGrCAPqN//PkZOsaCgjiBUZRnkhEBfAgw9tw+iu1RUqp2qNUNalOVG1GkV/U58sLU48sLLCiwFU4hAYA+qQQgasVhVIYQNWKwmAKpvasNoHIDm4OQHIDlGwNgbH4D+JuWQm4mhZFoJsWgm4I4TcbA2xtA5ODnGyNoHJ+NgHKDl/LMBXLUtS04mvLQteAqCaCbFoWQmha8bQ2Acg2ht8bI2RsjaGyNrjYGwNvjbByja/GxFYE4ipBOIrwTiK4J2KuK8BAK4rAnAJwKkE4FYE7FUVgEIqgIRVBO4qRXFQVBVBOMVwCcE5itBOoqAnQqCpBOIrxVBOoJ0KwJxgnQrCuKsVBXioCcCqCdAnYJyKsVYqipBOgjwiAj/8InhH4RMIkIioAC4RiJCMRP////CNk//Blkv4M6F8I9C/8GWT/8I2SwjZOEbJQZZIGWShGyYMsnwj0P///CPQ/hGyQRsn8I2SCNkgOyVkoMsnhGyQMslCNkoMsl4MsnhGyXCNk4MsmEbJ/wZZP8I2SA7JWTgyyQMiKDIieEYiAcRIihGIkIxFwZEUIxEA4iREgcRYihGIoHESIkDiJEUIxFwjEQIxEwZEWDIihGIoRiKEYiHcYJRIr9kzDmO5cIaApXE/NA0TTTKZGym/0//PkZMQWjdCsAwAWCsQ8Cfwoe89cyaXTKZACgKxsmybQFQCyPQPUbRtA9x6QAoegHKmRtClpk0RSkwaCYE/GyaaZ6ZFJTaaTCbTabTBomgmk2mxS0x0waSaTI2gcgOcT0T5MiedM9M9NCfCeGgNhMJlNJoT1MdNJhMjaNPptNGkmhtpnmgmv+KQmRSE0aaY6ZTKZTRoJg0U0aBopg0emU1/xPzTTaa5o80DRTZoJs0TRNEUhMikJs0P0x0wmkwmUymkwaKb5pppNJg0OaInhpGgmeaSbTBp9N/ptNJo0DTNAbOCkGAwGABgA4NgwAAAMAPBgAQKAyDAZgoCkFINAABWAEDAUBTAABgMBTgqACDcGAAQYDAUqLUlVt///+Bj4MIRcGH/hE//hEwY/wi8GPBj8GH8IgRcIv4RYMQi+DAIsIsIn8GHCLCJCJ/BhBgBpgwwifhFhEhF/gwCIDAGIMIMAMQYBFhFBgDH4GAMQiQNAYAwwYBECIAMIAMAAiHBgAMIAiAIg4MABgABhADAhEAGAARCBhCEQhEIMABh6EQAwIMABgCEQwMAQYD4MDCIcGACIQiHwYGDAhEOEQ4MAENB8hJD7PsnXJ0fZ98+D6LItQR3PgnZHmgPYYRopk0xj//PkZMkU/gLsKkITrkL0CfzIetvgJtNdNGkmkwCPLITf8s+WpaFmApAjgFUsyz49jSTCaGMmkyaRZlkJsWpaiagKBZlmWomh8c+CdcnROj4Pk+Akh9E6DsJ0fJ8c+OTs+idk4J2Tg+j7Pr8nB9nwfAa59k7598+D74Sk+eEkFQdDmKsOhwBEVYCeAiAmAiHcBEV4CYCIWmCHF6FqC0haRcF4XYvxfF2LwvC+FqC0xcC0C/FwLSFoF0XBfi7C0xei8LwvcLQLoWoXheC0BaIWoXBdiNiMY6cZ8RkZxnjqOojAz4zx0HUdBGozjoMw6iMjpxdi+L4uC5F/xd/haIui/bZ/+DGBp4RYMQYgw8Ivgw/CJ4RfBh/hECKBgEUGODH8InhFwY4GoMcIgRIMcInCIBrBhCIESESBp+DEGARfhEA1gxBjBj4RAYQYgxgYwiYRcIgMAiAwBjCJgYAawYYRQMQMAYhFgagYhEA0AxA1A1CJBhBgEXwMQNAihFhFAxwYAwgaYMPCJA1hEBiBrwYQiwYwiBFwYhFgxgawihFCLA0gYAwCKESBoBpCJ4MIRcGOEVB9ALR8BJj7/PonB9HyEoJwfZ9E4Dt5OeTnlqJtxNAH7nwfHPonJ8E759E6PoJI//PkZOAWKgjoZUAQYka0Ffgge9VcfZOCdE7J0To+Cc8JWTo+D7J0EqPoO0+T5PsJSfJ9n0TkJUfJOeTknPPo+z6J2Ts+ycE759/k7Pg+z5J2TonBOeTkJUTg+T5DtJ0Tvk5Pjk5DXPg+idH2HYfR9E6PgnR9k5JyfZ9cnR9cNYJSfROidE6Ps+Cdn0fB8E6DtPs+CdHwfH5OAlR8nyfB98+SdE4J0ff5OidH2TknfPkJMfYSg+Cd8+D6PsnP/JwTk++fYSQO0+D5J0fZ8HwTjn2AWDgdAL8ApALQCkO8GACwMgyAVBiAVhzwY4BeDIMgFMOh0ArDgc4BeAV4cgFsOhz/wP225HGw7wCsO4M8AqHP/+DEGQ7/8OgzgFoM4Bf4MhwO4BT4cDmHcGfDnw78GcVhUFTFXFeKoqYJ3isKuKkVgTsVoqCsKwrCoKsVQTqKorYWoXhfxeF/xdi58XOL4WmLnFYVQToE4FXiuK0VwTnFQVRVFcVhU4JzFfDgdhzBnDuHfALgyDAMQZBgGQCgBUAoDAMh3BkAsDMGcGAYgxBn+HAC0ArwCwMAS5adAry0yBSBfoFBVaKqKwVUVrRXUa9FUOEqVUjV3ySPLkvkzlNlNn02E2S06pvVKWACECpW//PkZN8VDgj+zymq5krb1ewAxJvkqe1XysDVFSqlVIo2o0ispyFVoqKNIrKcqNKcKcFhSjaKiKyKhYWiv6nCnCKijajSnPorKNKcKcqcIrqNoqKNqcKNoqKNKNqNKcIqKN//orf6BSbKbKBSBXlp0CvQKTYTZ/0C/LTxFxFoigioigCLC4cRYRWItEXC4cRcI0IoFwwXCiKwjQXC8LhRFcRcRQRSFwoikRcLhxFRFguHiKRF8E7FYVhVBOgCYVRUACKKgqgE0E6ACJFYVoJ0CcgnQrAnMVwTgE6ioKoRwDdhHhG4RARgDcCMEaEYIiAbwRIRuESEcIwRwiYRwjQjBEgWoFuBa4FngWkIQQigwhEwigx/CL/4RfCKEQGP/wYiEUwYHwYGDAwYAGA4RCEQBEGB0rCNcGU4RrBlcIsGGDCESBiEWDCBhCIEWBiDAGHCKEUGEGEGMIgMAiwigxCIDADQGIRfCIEQDXgYYRfBgBoESEXwY/CJCKEQIsGIRODEGIRQYgw8IgRYMMGAGGDEDGDAIoMcDQIkGMGGBrgwCKDAIsIkDUDWDGDDA1hE4RQMQYgwBhhFBhBh4MAMYRMIoRAiAxBjhF4mhZFpxNBNy0LQTUTXhKglR9FqWpaAP5Zi//PkZNYXkgTkGEJwlkXcDfQAe9r8bCa/k5JwTriacsizBHE6CSH1w7efHLPgjuJqWnLITYTX8tRNAH/ialqJuJuWZaFkCO4m5aE7J2TonB8E559nyEnJyfB8FmJrxNxNhNS1E3LT8sxNC0E0LTlqJuWQm3E15ZiaFqWRZiaCagP5aCblkKoqCsCdioKoqwToE6FcVwAhRWBOIrCpFbgnEVRVFUVIJ2K4rAnIqioKgrcV4riuK0E4FcVQTsVxUBOoJ3FUE7itFYE7FYVRXFUVwTkVoqAnYJxBO4rReF4XYWsLWLoui4LwuC9AdsLQL0LQA9C8Lgvi6LguBahfFwXAtIvQQ4vCqKwrxX/8E5xXit4JwKzBnwj+DF+F1guvBiQYkDRIR8I/gz8Gd4R/wYsGLBi8I8DPBneDPBnwZ/8I8DP8I8B/0Gd+DPA+8I/+Ef+DOgzvwj4R/hHoM+Ee4M4D74M+Ef/A/7gfcDPBn4R7BnfCPgz4M7Bngf8DPwjwR6B/3CPwj0Gfgz+EfBnhH8GfwioRQGIBqgRUDVAYoGiBFcIoBqoMWEUA1UDRYRUIqEUA1WBooGiAaqBogRUGJwigM8I/gz+DOCPwj/Bnwj3BnBHgZ4M4I+DOhHhNCz5aiaCb//PkZM0YugrgAAASBEUEBfQAe9rclmWompZ8shNyzLMsy1LMBUAfhNxNicBJCcE5J0JpyyLMTcBVLXloCO5aCagKACiAqflqWYmvE3E3BHlmArFnxNRNC1LUBS5aFoWhZFmWR8k5CTnxz4PonZ8E5Pg+j4LUshNQH4TYtSzLMshNBNhNSyAViyE0FQE4FYVoJ0CcRUgnYqisKoJxFWAhiuKgrCtFUE7FQE5iqKgqRVFWKorwTsVxVFYE7FTFTBOxVgnAqRXBOPisK4BOK0VoriuK0E5BOxUivFcE5FYE5FQVBXFQE6FQVBVFYVxWioCcCoLovi4LoWiL0LSL+LouBaIvBahdi6LoWgEMFoC1hacXxdC14uipiqKn8VPFbiqKsVb//Bm/+EXgx4RdhFb///hE1/8GLP//CKwIrQjoGa/wPewZqEdYM1wZqDNAetgzWEd8GagzYM2DN4M1wjoI7Bm+DNhHcD3rA9awZuEdwZvCOwjsGaA964M1A978I7hHQR0DNge98I6hHYR1wZrBmwPWgPWwZsI7wjqB63COvgzQR3BmwZsGaget8D3rCOgZoGa4R1gzYM0EdwZsI6CO+DN4R1wZsD3oGaBmwjqEdAzXCO/4R0DNAzYR0WgI8TQT//PkZL4XFgTcAE6Tekf8EfQAe9t8YTXiagKwCsJuWXLMTUtC1LMTT8TYTUJP+fAdomomoD8JuWoCgWoI7iaFkJqJqfZ8hrk4CSE5Pk+Cdk5PgnBOT7JwTg+uWZaiaCbcsgFAsy0LPlmJsWYmom5ZFmWpaibiaAjy15ZFkWQm5Zll+JsJqJvy1E0CThJz65OQlJ8H2TknZOT759k6J3z4PgTQTcsy0LITflmWfLUsiyLITYTcTT8syzLQsi0LMEcWZa8tSyE1LTibibFqWYI/8shNCyE1LQsy1LUTUBTLLloWXLUsiyLUtBN+JqJvy1E05Z8TcsxNeWn/LTnxydHwfZ9n1ydk4PsnHJyfR9E4JwTgnB8k4588nB9cnR8c+D7PjxV4q4r8VsVgTgE4/itFShX/xV4rirxVFWKoq4qfxX8E6xVxUBOYrCtwTvwTj/xV8E5/irBOsVuKwqRXFTFQVorCrFf/xWioKwrCtioCcxUFUVAToE4FUVxWFQVhUBO4rgnUVIJyKkVgToE4ipFUVoq4qisKsE64qCoCdxUFUVxXFUE78VxWFQV4qiuKgqiuK4CCK2KoqirBOATsE4FWK4qxVFUVhVFYE4gnIriuCcQTiK4rCoCdCtirBORUiqK2//PkZLAWsgzuADQNNkZj/fjIe9r8K/FXFUVwSE5aiaAKgmhaFpxNQkp8n3z5PsJOGsffLQsyyE1LItS1E1Af+CPLMTUTfibFmJoWQmxanzydHwTsnASknBaCalqWom5ZcsxNyc8nASsnHDt59BrhJgkpOicBKg7D7JyfZ8E5Pk+Cd8EeWXE0LQsiyLQtSyLIsi0LUTYsy0E3LITQshNiyLUsiy4I78shNy0LMVcE6ipgnArRVgncE4wTsVIrCqCcCtBOYrwTgE7iuKwqCoKwrcE7BOQTqKgqiqFpBEC1gPYD3F0X4WoLTF0Xxei6FqC0BaAtQWgXxdwtWFqC0haBW/FQVRUBOBUFcE6ioCcAnEVRX4rYrxWFUVBViuLsXgtAuC6FoBDBaYvi7F8XxexdF8XhcFyI//gx//CJBhgxhEwY/+EXwYgx8ImDH8GPhE8GPhEwigwhFwNQNQNfhE+DGDAGHCIBrhEhEBh4RQMAY/gYBFBhhEAxCIDCEUDEDHBiEUIoRQY+DCBp4McGEIgGgMcGIGMGIGIGgRQYgxCKBiBjBgDGESDADWBgEUDEIuDADWBpBiEUDEDDgYgwBgDEDQDUGIGgRAYQYAxCKBhCKEThEBgBiEUGIRQMQiQiwNAY//PkZKwWNgjoZUAQREakFfQAe9t8YMfwi4GBaFoJsWpaFlyyBHctCzE25ZiaFoAocsy1E24Sk+idk6LMTYTYTQsyyLUtCyLQTUswFYJMGuTg+CdHwErPotAFAsuJtxNCz4m4mvBHiafloWZZ8YppBqzTNI0jTNBMpg0jTTZZFqWfE3Af/xNf+WomhZ8suWZZCb8tC1LQtS14m/LQtBNhNOfR8hKCc8nHJ2EqCUE5CSHxydk6Pg+D7Ps+Sdk6LUTQTcTcTctSz4mwmha8TXlmJvyy5ZiaFl+WpZFoWZa8TQshNCz4mhalmJsWfLQsuWRactBNRNC1E1LLlly0E2PgJWfR8h2H2fJOSdnx+fXPs+T5PgNbnzz6Po+T7JwTk+z4PonROglJ84qCvxXxUirFX4q4qeCd1f8InCI/4R/CP//4RMI/CMEYI4RAR8I8IjCJ4REI/gG8ESEfCOERCP4R/+EaERCPCNCNCI4BvQjYRMHINobIOfjZBzDZG3xtja42gcw2PwcvG2Nng5+NgbY2wcn42htDYGwNrjYGwNsbX42vxscbI2gc3Bzg5Qcg2uNvjaGwNgbI2+Dl4OUbI2Qc42RsjbBy//g5eAboR4RwjQDeCP+EcI8IwBuwjwjBEBEA//PkZKoZMgrqADXt9EV8FfQAe9scG+EThEBGCMESESEbhEQjwjwjwjBHCIwiQDcCNCI/hHE0/LQBSLITf/lqWoSvk7LT8BWLMtRNAk58E7Po+CyLQTcsyyLUsi0Afi1LUTUTUtBNS05aFkWpZHzwkoSgnB9HwfQSsTYsizLQtRNRNgFf/8NcJWEmAWCdn0To+T4CUHyGtxNiyLT/lmJqJqJqWgmpZFqJsWgmwmwmwmv5ZiaibiactBNv/yyLTiaFkWZagKgCmJqWQmgmom3E0LTibAKfE0LLiuKgrYqipBO4JzFUE5BORXBOhVioKwqRWBOYJyKkE6BOIrYqCqCcxVxVFUV8E4FSCdcVgAgCuKkLTBDC6CHi+LwuRfha4uC+FpF8XQtAWgB2wtAWoXBchaBfwtQWnFSCdxVxXFUVhUFYV4rgnOK3wTiKir//1eDCsf//7/+wOYd///ei/f6lmiqGXpyOlCSRm+yP3UtDhFIzqBhwCFHAGFHABYGcAnAAMOAAYcAAw4BYKOAIROANgicAQYcABE4AAzgE4B+1wmcAwYcAK+sDOADgFLCJwAlWBnABwABnABwDWraETgEDOADgDBiRkgoJpGaP+64RSMoRSMGBiRkkwMSMlq7AxIy4//PkZJUYEgieBFw3fkL8FgAied8AROAAicA8DOATgAGHAAROAFwM4BOAGBhwADDgAGHANQUcAgicAYROAfgw4AIkbPNNNpo0TSNBNJgUs0l7lomEwmRSOaRp80zQFK4nvTInnTEGgwGwAwYmOmkyaInppJpMJg0k1+KUaaaTCb42U0mBsGiaSaNNNpo0OaKZNE0jTTSY5oGmaZpJrphM9MGkmDQTCZBzpg0OKR+mBtdMJobfTSbTfG2KSaBpGgaZomiaBomn02mOmkwmjSNPpjmmaKZNA0zSNFNCeClJkT40DTTCY5oJk0kyaJpdMppMdMdN80TR6ZTXTfNJNmimumem+aKZTKaTaaTRops0kwaZppk0+aSa6ZTKYTfTfTPTHTKa5omgmEyaJo9NmkaRp/pnmmaf6aNNMplMplMdMpv8TxMJlNplNJn9MdM1OM6hWa/EjiRiRiO/xIcSP+GgCZQ1+GvDRDV//4aP///4I8EwTwTBLwS/4AHgnBHBHgiwR4JgAgS4IwAYPA8ADg+AAAAFwfB4L4WADC2AGAGFwsFwuD2FgAcAPC+F/B8L4X/B7B4L4WwuD+AGDwXACAAC2D2AEFgfCwAAAAXB8LhcLeDwXCwPYPA+ACACD+AH4XwA//PkZJMVIgb2ejVLxkBMEgTIe898vwv4X/ACB/C4WwtgBg/gA4PA9gBeFhLRTXTRomkmP0yJ6J+mPy0NA0OvibNDQmfzTNNMjaFKNATxMiemiaRoGkmE2mkwmTRTHNBMGiaCZTSZTZomh0PaV9fX2hoX14kzSmOaCY5pJr80U0aPTfNFMps0jSNJMmiaSaTKb6aTKYNLphMpg0eaJoGkJ8aBoppMppMJg00xzTTabNFNJpNJpNpnpg0DT6bTRoppoJMWrSh/690NQ5paV5D2le/LND2hoQxDF/rzR1/r/aWhfaWleQxfXmheaevNDS0tLQ0ryGoch/X15D+vLy+0oc0ry/19DUOXuvIc0oav9oXkNX1/r3X18QCGHQGQHB8PiAPAaHgPDsBgcH+Hqv//+DJ0GNuEW4MbQY2wZO4Rn///4R34R3Qjv//8Gbv//8GbgZuwZvCO4GbsD37+Ed3A586DJ4Rn8DnToRn8GTsGT8GToRn4HOngyf4HOnBGeDJ0IzgjOCM8DnTwjOgydwOdP4RnYMncDbtwY2A27cItgNs3CLeDGwMbwY3CLaEWwRbQi3A27eDG0GN4G2bBFvA2zcItgY3A27YGN4G2bAxtA58/gc6eDJwHOnAyfCM7A588//PkZLMYngTSAFAUhEYcDfggw9V8DnzwOdOBk8IzuEZ4MnAyfgychsy7F3oE13Nl9sy7myrsL6qqOU5anCqkHqNDI3KVUTEU8GNU7U6gxyHKchyVV/Xa2Zspfds3rubK2VsjZmztk9djZi/TZV2NnXYu0vsm0yaBoDZNEbA2k0aKZNjmwbH/Nvm2bRtGyBVArD1G0bQPUevg9h6/+PRzZNkCrzZNgesegesermyPQPXzbHpNvm0PQPUPSbJs82TaHqAtj082h6DaNn8eo2DbHrHpNjj1m1zYHqNo2jYNnmwbPNgek2ja5sj0D1m0bJs80xtJlMdMCeps0U0meaaa6b5p/mmmU3zRTfNFN/pgHPzQNPmkaaaTXTKbTRoJk0zS6b/NBNdNJlNGj02aH6Z4IgAEEYJ4I+CMEQJcEUEXBOpHDX/w1Q0Q1Q1cNWGvw0Q0/hp/AmIaA0cCYhow0w1/w0hoDRhpw1w1BrgTLDXw1BrhrDQGgNQEzAmOGuGiGgNfgTHDQGoCZw1w0BrDWBMIEzDVDTDUGgNfAFwGjBrg1A1YNcGsAXAaQaABcBqg1g1QagaINYaoEyw1Bow1YaA1hoDSBMw1gTICYQJkGrDQGoNGGmGsNcNQawJkGuBM4aIa//PkZKAYngTsATQNQkKMFgDifh7AYagJkGsCZ+GkNWGiGsNAaYaOGgCYgTENQaw0Yaw1Q1Q0/hqw1BkAfmkaCb6ZTCY6bNBNLwmqGA5fzSTCb/lgwXOmMmMmTQ5pmkmUwmkymfzRTaZFJ6aNM002NrppMpg0kwKQmE2m0yKUaKaE95o9MJj9N9NJk0UymOaSaE/TabNNNmmmk2mU2aHTKZTCaNDjaTJoGimkyNvpk0TRTHTf6bTRopg001+mU0aXNBMjYNA0k2mjR5pfps0U100mUz0ym02mDRTHTaaTRpplMc0kz0ySA000mDSTKbNI002mzQTHTaYTf//NA0zQTBodNJk0UyKSaaZNJMprmkaP5oGmKUmEymUyaCbTHNBMJlN80DRNBMmkm/00mUwaZpprplNpvmiaJo80+aSa//TaY/6ZaH//wY4ReEX4RIMfwiAxBh/BhCJ/+ESDDwYcIn+EQIoMAiQYAw8IsGIGGETBj4MP4MQiAxhEAwAxAxBjBiEUIgMIMcDCDAGIMcGMDEGGBgEUDTwNfAx4MAiwiQYgwBgEUIgMIRAiQYhFwYAwBhA1CKDEIoGoGgMQi4MeDADGEQIkIgGMDCDAIoMAiQiAYwYYMQNQigwCJBiDEGAR//PkZJwV+gzoZUAQRkZsCfQAe9tcQYgx8GEGIMQiwMAY4MANAMcIoMSyE1E1/LMTUtCz5OD5PkJJz5Pk+uA/FqWRaib8TUTUTQtC05alqWYm4momgI8TYsxNCzE3LUtQFEsgFM+z6J0fB8nz+TsNcnB9BK+Tk+g7CdhJT6LTiaFqWYI7lqWoCvy05ZlnxNy0/LUshNBNvwR4moCj+Wv5ZlkJqWpalkCOE1E1LQsiyLITUBULLlqWZZlmJsWhZcsi1/4CiWpalkJqJuWvLXlkJsJpyy4mwm5ZlmJuWXLUTQteWgmgmwCsJoWfE3LMsiyLP8TTlkJuAolqJryzE1LTibCbloJuWhZFoWYmxZ8TcXIvxeC0i+FrF0B2i4L8LSL4uBaIDyCHF8XRfF6FqgiwtIuYWoXIrYqAncVvxVip8VIqCvUxPqtFbFf/4q/8V/8V/iririr8VATjxXipxWgnYq+KwqfFTFQVoq+KsVBW8VhUisKuK0VRXivFYE4FTBOhVFcVRV4riuCdCuCdCtwTiCcCqCcgnYqxWFcVIJwKsVxWisK8VxVgnArYqRWFeK0V4qgnQrgnYrfBOoqAnAq4J0CciqKviuK3BOoJyKsE4FUVoqisK2KwrAnArgBAFSK4//PkZJ0VagjyJgGtbkOkFfwAbh4AqRViuK4J0KgrCrFUVxVjOEeDQgjlcT4T40xtjaNI0uaI2QciGNJIl4kJZtCGIaSckIm6GL3TQ2zRTY2UwmjSNE0fxS02aY2BsJs0/+mzSE8TQpHTKZTaaG0aQpApZp/mmm+aHTfTCZGwNgUk0E0aRp/ilJlNJgT5MmkJ9zQNA0TQTH6ZG2mk0mk0mk3zQTKY/G3zQTHTabTBpGgmU0aKaTJpJpNJtMphNjYTfNE0emkymE2mEyaCbNBNfmkaJpdNJnpg0k0mDTTCbTaZTBp80k2aCbTfNE00yaCb6bTZoplMmmaKZTKaTJpmiaHTXNJNdMDbTab6Y6Z6ZNNMJhMJhN9NJrmim02m0ymU300aPTSa6Y//5pJpNdN/9NppxWxU4Jx/xWxU/xU4qcV/ipiuKwqxWFbioK/8VIqivFTwTkVgTkVor4JxFXxX8VcVxUFQE4FaCcwTvBOIqwToVuKwqCtFUVYqxXxWFeK0E7FQVYrwTnwTsV4rCqCcfFaCcRVFQE5gnAr4JyK4r4Jz4J0Koqip4rCvisKoJ3xWBOME7iuKgriuKgrAnAqgnArxXiqCcgnYJzFQVQTmAEIVYrwToAIYrwTiKkVQTkE5//PkZK4XGgzsADQNAkIcCfwAe898FXFTFYVxXxUFQVkzzS5oilg5TTTY2kyaJpJtNGgJ8aKaTQ2k2aCaNI0eaSYNJM/tKHEiQxfJG09MmgaSYTRppg0TRNNMJlMptMCfppNprmiaA2jQNLmmaRppk0jRFLNP9NJhMGmaQpZpJhNCkGkmE0J+mxSk0m0x02mjRTKbTCZ42EwaQpJpptNprmgaRpmim00J4mzSNM0kymkyKWmE0muaKYGwNjmgafTPNE0U0mUwJ7+mem01+J8mhSk2mjRTSb6aTCbNBM9MpjpjppMpk0E2mE2mE2mjSTfTaZ6YNFMcT1MpnprptNmim0wmE100aSaTRo9MGjzTTHTaaTfTSaNLpoFMAAFYNBQGwAvwAYM4NgqqkjaAN3d3d3etERNK5CZ/3Ctf8AaiAc/u7vaIn/+8XPv//+GDKv8W1/+AC8K4Yw+94xe940jgceOBwOcRaxGwH4EuNIjBfxazB8HhkwVjIAII/vDkjG/wAcJPeF5e98hNgSYLWMFvhZ73pX06aoehpmh01hMJtM9K3TKY9E10x+memvlIpZM9MUTCbShbUrtM+n5ophNZuXK+0wmemumMCemkmvc0Uwm/lJJlLe5oJZI0SyW6R0mE//PkZLcXlgrzECFvrEmMEfgAfh7k2aORpbTYUo9SBNsekGYNVKgqg6hrUXK4Q42DOwPWbILEzBSumEgkWJPU8S72G5wUuGDwguEKa1Q0UykS3Bn7FJNgg5qoEgpsGabBtGabZt7NrKCNgLYes1idmabBtm2bZsBRm0PQbF9mwPSPUBbMwzB6QojYM42ePTzbMwzR6TaNs1eBVNv81yDUJ2QYhJtD0m0PVe+x6T2M8HsbFwsh6B6D7HpugT2uZhO6HqZhmE7ISZhhkFNcghtmybBnnsD1Ho49ZtG2bZs5PVBc2EEepCaEHNjj1EJHq5smabZtmwbNEEPR+bJse9z2PY2T1SN0rdNJq6yXI06COvNJj9MGmkkGmUj7pI0TToNGlEsNEnCW10ymi5FtNFKpvps0kz0uW3aaTF00mTSzdNJu0KFYz1KjaGAhyoQCFGM//zFARgIUZ/oZpdCttay6M5drW1joSj6Ekk1b7J7R7aoQNlPrWBKLTTzOsGT5yYxLrtHTy2iUxEkES0HIBVD066VjGj31odPkkSjJtbWs6OIjKmlXHR9K5MTv5pdZolE10kk2lly74TFx5KTXeTGLrS6ExiucvJSSDUdXZm3NLn1rtYBCUEoRj77WOhCPc+g5//PkZJ8XPgzoAABMTrz8BfQyY9ONGxJULutaa1TE5LHxWEo+XecmMa3p0kqBCR6qOFaFUGpNJIIjqVi0ylBqJIkiSJIkmJj605EkSRJPetWAyVacmodBUVhGfrAZPF0AUrgRLNiqDU4VHo8h6HRObJJNdqlRBMFT0qdNE0WZhmay2tCuOY6oieWieianCnVSbzjd7SGhrLi6eUSeLcZTWqdML5PM50uOGJms9VqtYU6hrgrm4V0frUzTvYsiegR2FOkqUxSKdVCpmRCSkIAUZ4VPhqEKgFDU2VhUiIhUaIg0RAkTBYEjYBUbBMuCJgLAkCUBUinABgBE3/9EQqFRM0s0qzktk9ZFqqFC6RULE11JVDkd8Y1vVFOx9oUIpZ8Vnq5klkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";var hu=t=>t instanceof Date,Ck=t=>t==null;const Nk=t=>typeof t=="object";var kN=t=>!Ck(t)&&!Array.isArray(t)&&Nk(t)&&!hu(t),MN=t=>Ck(t)||!Nk(t);function _k(t,e){if(MN(t)||MN(e))return t===e;if(hu(t)&&hu(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const i=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const a=e[s];if(hu(i)&&hu(a)||kN(i)&&kN(a)||Array.isArray(i)&&Array.isArray(a)?!_k(i,a):i!==a)return!1}}return!0}const eQ={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},tQ={finder:!0,torch:!0,tracker:void 0,onOff:!1,zoom:!1},rQ={width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",aspectRatio:"1/1"},nQ={width:"100%",height:"100%",objectFit:"cover",overflow:"hidden"};function mf(t){if(t===null)throw new Error("Canvas should always be defined when component is mounted.");const e=t.getContext("2d");if(e===null)throw new Error("Canvas 2D context should be non-null");e.clearRect(0,0,t.width,t.height)}function sQ(t){var e;const{onScan:r,constraints:n,formats:s=["qr_code"],paused:i=!1,components:a,children:l,styles:c,classNames:u,allowMultiple:d,scanDelay:f,onError:m,sound:y}=t,x=p.useRef(null),g=p.useRef(null),b=p.useRef(null),E=p.useMemo(()=>({...eQ,...n}),[n]),w=p.useMemo(()=>({...tQ,...a}),[a]),[C,I]=p.useState(!1),[j,V]=p.useState(!0),[R,N]=p.useState(E),S=function(){const z=p.useRef(Promise.resolve({type:"stop",data:{}})),Q=p.useRef(null),Z=p.useRef(null),[U,H]=p.useState({}),[se,re]=p.useState({}),ce=p.useCallback(async(oe,le)=>{var G,de,ge;if(!window.isSecureContext)throw new Error("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.");if(((G=navigator==null?void 0:navigator.mediaDevices)===null||G===void 0?void 0:G.getUserMedia)===void 0)throw new Error("this browser has no Stream API support");const Ee=await navigator.mediaDevices.getUserMedia({audio:!1,video:le});oe.srcObject!==void 0?oe.srcObject=Ee:oe.mozSrcObject!==void 0?oe.mozSrcObject=Ee:window.URL.createObjectURL?oe.src=window.URL.createObjectURL(Ee):window.webkitURL?oe.src=window.webkitURL.createObjectURL(Ee):oe.src=Ee.id,await Promise.race([oe.play(),new Promise(ve=>setTimeout(ve,3e3)).then(()=>{throw new Error("Loading camera stream timed out after 3 seconds.")})]),await new Promise(ve=>setTimeout(ve,500));const[fe]=Ee.getVideoTracks();return re(fe.getSettings()),H((ge=(de=fe==null?void 0:fe.getCapabilities)===null||de===void 0?void 0:de.call(fe))!==null&&ge!==void 0?ge:{}),Q.current=Ee,Z.current=fe,{type:"start",data:{videoEl:oe,stream:Ee,constraints:le}}},[]),he=p.useCallback(async(oe,le)=>{oe.src="",oe.srcObject=null,oe.load();for(const G of le.getTracks())le.removeTrack(G),G.stop();return Q.current=null,Z.current=null,re({}),{type:"stop",data:{}}},[]),Te=p.useCallback(async(oe,{constraints:le,restart:G=!1})=>{if(z.current=z.current.then(de=>{if(de.type==="start"){const{data:{videoEl:ge,stream:Ee,constraints:fe}}=de;return G||oe!==ge||le!==fe?he(ge,Ee).then(()=>ce(oe,le)):de}return ce(oe,le)}),(await z.current).type==="stop")throw new Error("Something went wrong with the camera task queue (start task).")},[ce,he]),Me=p.useCallback(async()=>{if(z.current=z.current.then(oe=>{if(oe.type==="stop")return oe;const{data:{videoEl:le,stream:G}}=oe;return he(le,G)}),(await z.current).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")},[he]),Ce=p.useCallback(async oe=>{const le=Z.current;if(!le)throw new Error("No active video track found.");{oe.advanced&&oe.advanced[0].zoom&&le.getCapabilities().torch&&await le.applyConstraints({advanced:[{torch:!1}]}),await le.applyConstraints(oe);const G=le.getCapabilities(),de=le.getSettings();H(G),re(de)}},[]);return p.useEffect(()=>()=>{(async()=>await Me())()},[Me]),{capabilities:U,settings:se,startCamera:Te,stopCamera:Me,updateConstraints:Ce}}(),{startScanning:P,stopScanning:O}=function(z){const{videoElementRef:Q,onScan:Z,onFound:U,retryDelay:H=100,scanDelay:se=0,formats:re=[],allowMultiple:ce=!1,sound:he=!0}=z,Te=p.useRef(new Ov({formats:re})),Me=p.useRef(null),Ce=p.useRef(null);p.useEffect(()=>{Te.current=new Ov({formats:re})},[re]),p.useEffect(()=>{typeof window<"u"&&he&&(Me.current=new Audio(typeof he=="string"?he:ZW))},[he]);const oe=p.useCallback(le=>async G=>{if(Q.current!==null&&Q.current.readyState>1){const{lastScan:de,contentBefore:ge,lastScanHadContent:Ee}=le;if(G-de<H)Ce.current=window.requestAnimationFrame(oe(le));else{const fe=await Te.current.detect(Q.current),ve=fe.some(Ge=>!ge.includes(Ge.rawValue)),mt=fe.length>0;let Ue=le.lastOnScan;(ve||ce&&mt&&G-Ue>=se)&&(he&&Me.current&&Me.current.paused&&Me.current.play().catch(Ge=>console.error("Error playing the sound",Ge)),Ue=G,Z(fe)),mt&&U(fe),!mt&&Ee&&U(fe);const lt={lastScan:G,lastOnScan:Ue,lastScanHadContent:mt,contentBefore:ve?fe.map(Ge=>Ge.rawValue):ge};Ce.current=window.requestAnimationFrame(oe(lt))}}},[Q.current,Z,U,H]);return{startScanning:p.useCallback(()=>{const le=performance.now(),G={lastScan:le,lastOnScan:le,contentBefore:[],lastScanHadContent:!1};Ce.current=window.requestAnimationFrame(oe(G))},[oe]),stopScanning:p.useCallback(()=>{Ce.current!==null&&(window.cancelAnimationFrame(Ce.current),Ce.current=null)},[])}}({videoElementRef:x,onScan:r,onFound:z=>function(Q,Z,U,H){const se=U;if(se==null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas is always defined.");const re=Z;if(re==null)throw new Error("onFound handler should only be called when component is mounted. Thus video element is always defined.");if(Q.length===0||H===void 0)mf(se);else{const ce=re.offsetWidth,he=re.offsetHeight,Te=re.videoWidth,Me=re.videoHeight,Ce=Math.max(ce/Te,he/Me),oe=Te*Ce,le=Me*Ce,G=oe/Te,de=le/Me,ge=(ce-oe)/2,Ee=(he-le)/2,fe=({x:lt,y:Ge})=>({x:Math.floor(lt*G),y:Math.floor(Ge*de)}),ve=({x:lt,y:Ge})=>({x:Math.floor(lt+ge),y:Math.floor(Ge+Ee)}),mt=Q.map(lt=>{const{boundingBox:Ge,cornerPoints:Et}=lt,{x:fr,y:Pn}=ve(fe({x:Ge.x,y:Ge.y})),{x:Rs,y:mn}=fe({x:Ge.width,y:Ge.height});return{...lt,cornerPoints:Et.map(Is=>ve(fe(Is))),boundingBox:DOMRectReadOnly.fromRect({x:fr,y:Pn,width:Rs,height:mn})}});se.width=re.offsetWidth,se.height=re.offsetHeight;const Ue=se.getContext("2d");if(Ue===null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas 2D context is always defined.");H(mt,Ue)}}(z,x.current,b.current,w.tracker),formats:s,retryDelay:w.tracker===void 0?500:10,scanDelay:f,allowMultiple:d,sound:y});p.useEffect(()=>(I(!0),()=>{I(!1)}),[]),p.useEffect(()=>{C&&(O(),P())},[a==null?void 0:a.tracker]),p.useEffect(()=>{if(!_k(E,R)){const z=E;n!=null&&n.deviceId&&delete z.facingMode,N(z)}},[n]);const M=p.useMemo(()=>({constraints:R,shouldStream:C&&!i}),[R,C,i]),k=async()=>{const z=x.current;if(z==null)throw new Error("Video should be defined when component is mounted.");const Q=g.current;if(Q==null)throw new Error("Canvas should be defined when component is mounted.");const Z=Q.getContext("2d");if(Z==null)throw new Error("Canvas should be defined when component is mounted.");if(M.shouldStream){await S.stopCamera(),V(!1);try{await S.startCamera(z,M),z?V(!0):await S.stopCamera()}catch(U){m==null||m(U),console.error("error",U)}}else Q.width=z.videoWidth,Q.height=z.videoHeight,Z.drawImage(z,0,0,z.videoWidth,z.videoHeight),await S.stopCamera(),V(!1)};p.useEffect(()=>{(async()=>await k())()},[M]);const B=p.useMemo(()=>M.shouldStream&&j,[M.shouldStream,j]);return p.useEffect(()=>{if(B){if(g.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus pause frame canvas is defined");if(mf(g.current),b.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus tracking canvas is defined");if(mf(b.current),x.current==null)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus video element is defined");P()}},[B]),J.createElement("div",{style:{...rQ,...c==null?void 0:c.container},className:u==null?void 0:u.container},J.createElement("video",{ref:x,style:{...nQ,...c==null?void 0:c.video,visibility:i?"hidden":"visible"},className:u==null?void 0:u.video,autoPlay:!0,muted:!0,playsInline:!0}),J.createElement("canvas",{ref:g,style:{display:i?"block":"none",position:"absolute",width:"100%",height:"100%"}}),J.createElement("canvas",{ref:b,style:{position:"absolute",width:"100%",height:"100%"}}),J.createElement("div",{style:{position:"absolute",width:"100%",height:"100%"}},w.finder&&J.createElement(XW,{scanning:j,capabilities:S.capabilities,onOff:w.onOff,zoom:w.zoom&&S.settings.zoom?{value:S.settings.zoom,onChange:async z=>{const Q={...R,advanced:[{zoom:z}]};await S.updateConstraints(Q)}}:void 0,torch:w.torch?{status:(e=S.settings.torch)!==null&&e!==void 0&&e,toggle:async z=>{const Q={...R,advanced:[{torch:z}]};await S.updateConstraints(Q)}}:void 0,startScanning:async()=>await k(),stopScanning:async()=>{await S.stopCamera(),mf(b.current),V(!1)}}),l))}const iQ=()=>{const[t,e]=p.useState(null),[r,n]=p.useState(null),[s,i]=p.useState(!1),[a,l]=p.useState(null);Kr(),As();const{addPurchase:c}=Ss();p.useEffect(()=>{Ze("page_view",{page:"Scan"})},[]);const u=async m=>{var y,x,g;if(!s){i(!0),e(null),n(null);try{if(!Array.isArray(m)||!m[0]||typeof m[0].rawValue!="string")throw new Error("Invalid QR scan result format");const b=m[0].rawValue;Ze("scan_qr_attempt",{rawValue:b});let E;try{E=JSON.parse(b)}catch{const R=b.split(":");if(R.length<3||R[0]!=="LOYALTY")throw Ze("scan_qr_invalid",{rawValue:b}),new Error("Invalid QR code format");E={userEmail:R[1],userId:R[2],offerId:"default_offer"}}if(!E.userEmail||!E.userId)throw new Error("Invalid QR code data - missing user information");const w=zt(ft,"users",E.userId),C=await Ld(xc(jo(ft,"users"),km("email","==",E.userEmail),km("id","==",E.userId)));if(C.empty)throw Ze("scan_qr_no_user",{email:E.userEmail,uid:E.userId}),new Error("No user found for this QR code");const j=C.docs[0].data();Ze("scan_qr_success",{scanned_user:E.userEmail,scanned_uid:E.userId,offer_id:E.offerId}),E.action==="redeem_reward"&&E.rewardId?(console.log("Processing reward redemption for:",E.rewardId),await d2(null,E.userEmail,E.userId,E.rewardId)):(console.log("Processing stamp collection for offer:",E.offerId),console.log("QR Data:",E),await c(E.userEmail,E.userId,E.offerId)),n(E.userEmail),e(!0),l(E);const V=await bo(w);if(V.exists()){const N=V.data().purchases||0;let S="";if(E.action==="redeem_reward")S=`Reward redeemed for ${E.userName}! 🎉`,Ze("reward_redeemed",{scanned_user:E.userEmail,reward_id:E.rewardId});else{const P=E.stampsPerScan||1;S=`${P} ${P===1?"stamp":"stamps"} added for ${E.offerName||"loyalty program"}!`;const M=await bo(w);if(M.exists()){const k=M.data(),B=k.purchases||0;if(S+=` Total stamps: ${B}`,E.offerId&&E.offerId!=="default_offer"){const z=(y=k.completedRewards)==null?void 0:y.find(Q=>{var Z;return((Z=Q.offerSnapshot)==null?void 0:Z.offerId)===E.offerId});if(z){const Q=((x=z.scanHistory)==null?void 0:x.length)||0,Z=((g=z.offerSnapshot)==null?void 0:g.stampRequirement)||5,U=Math.max(0,Z-Q);console.log(`Offer progress: ${Q}/${Z}, remaining: ${U}`),Q>=Z?(S+=" - Offer completed! 🎉",Ze("offer_completed",{scanned_user:E.userEmail,offer_id:E.offerId})):S+=` - Progress: ${Q}/${Z} (${U} more needed)`}}else{const z=k.purchaseLimit||5;if(B>=z)S+=" - Reward ready! 🎉",Ze("reward_ready",{scanned_user:E.userEmail,scanned_uid:E.userId});else{const Q=z-B;S+=` - ${Q} more to earn reward`}}}}pt({title:"Success",description:S})}setTimeout(()=>{window.location.href="/dashboard"},1500)}catch(b){console.error("Error processing QR scan:",b);let E="Failed to process loyalty point";b instanceof Error&&(E=b.message),e(!1),pt({title:"Error",description:E,variant:"destructive"}),Ze("scan_qr_error",{error:b.message})}finally{i(!1)}}},d=m=>{console.error("Scanner error:",m),e(!1),pt({title:"Scanner Error",description:"Camera error - please check permissions",variant:"destructive"}),Ze("scan_qr_scanner_error",{error:String(m)})},f=()=>{e(null),n(null),i(!1),l(null)};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsx("div",{className:"p-6 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(sr,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(si,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Scan Loyalty QR"})]})})}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6",children:o.jsxs("div",{className:"w-full max-w-md bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl flex flex-col items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Scan a User's QR Code"}),!t&&o.jsxs("div",{className:"relative w-full flex flex-col items-center",children:[o.jsx("div",{style:{width:300,height:300,margin:"20px auto"},children:o.jsx(sQ,{onScan:u,onError:d})}),s&&o.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"Processing..."})]}),t===!0&&o.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-green-900/50 to-emerald-900/50 border border-green-700 rounded-xl text-center shadow-2xl animate-pulse",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),o.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:"Stamp Added Successfully!"}),o.jsxs("div",{className:"text-lg text-green-300 mb-3",children:[r&&o.jsxs("div",{className:"mb-3",children:[o.jsx("span",{className:"text-green-400 font-semibold",children:r}),o.jsxs("span",{className:"text-green-300",children:[" ","has earned ",(a==null?void 0:a.stampsPerScan)||1," ",(a==null?void 0:a.stampsPerScan)===1?"stamp":"stamps","!"]})]}),(a==null?void 0:a.offerName)&&o.jsxs("div",{className:"text-sm text-green-400 bg-green-900/30 px-3 py-1 rounded-full inline-block mb-2",children:["Offer: ",a.offerName]}),(a==null?void 0:a.stampsPerScan)&&a.stampsPerScan>1&&o.jsxs("div",{className:"text-xs text-green-400 bg-green-900/20 px-2 py-1 rounded-full inline-block",children:[a.stampsPerScan,"x Multiplier Active"]}),o.jsxs("div",{className:"text-xs text-green-300 mt-2",children:["This scan added ",(a==null?void 0:a.stampsPerScan)||1," stamp",(a==null?void 0:a.stampsPerScan)>1?"s":""," to the user's progress"]})]}),o.jsx("div",{className:"mt-4 text-xs text-green-500",children:"Redirecting to dashboard..."})]}),t===!1&&o.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700 rounded-xl text-center shadow-2xl",children:[o.jsx("div",{className:"text-6xl mb-4",children:"❌"}),o.jsx("div",{className:"text-2xl font-bold text-red-400 mb-2",children:"Scan Failed"}),o.jsx("div",{className:"text-lg text-red-300 mb-3",children:"There was an error processing the QR code"}),o.jsx("div",{className:"text-sm text-red-400 bg-red-900/30 px-3 py-1 rounded-full inline-block",children:"Please try scanning again"})]}),!t&&o.jsx("div",{className:"mt-6 flex gap-3",children:o.jsx(_e,{onClick:f,disabled:!t,variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500/20",children:"Reset Scanner"})})]})})]})]})},oQ=new h7,aQ=()=>o.jsx(m7,{client:oQ,children:o.jsx(GU,{children:o.jsxs(Hq,{children:[o.jsx(U8,{}),o.jsx(g9,{}),o.jsx(uq,{children:o.jsxs(rq,{children:[o.jsx(vn,{path:"/",element:o.jsx(Kq,{})}),o.jsx(vn,{path:"/register",element:o.jsx(cf,{children:o.jsx(tG,{})})}),o.jsx(vn,{path:"/login",element:o.jsx(cf,{children:o.jsx(rG,{})})}),o.jsx(vn,{path:"/forgot-password",element:o.jsx(cf,{children:o.jsx(nG,{})})}),o.jsx(vn,{path:"/reset-password",element:o.jsx(cf,{children:o.jsx(sG,{})})}),o.jsx(vn,{path:"/dashboard",element:o.jsx(Jc,{children:o.jsx(hH,{})})}),o.jsx(vn,{path:"/rewards",element:o.jsx(Jc,{children:o.jsx(fH,{})})}),o.jsx(vn,{path:"/settings",element:o.jsx(Jc,{children:o.jsx(mH,{})})}),o.jsx(vn,{path:"/scan",element:o.jsx(Jc,{children:o.jsx(iQ,{})})}),o.jsx(vn,{path:"/users",element:o.jsx(Jc,{requiredRole:"admin",children:o.jsx(KH,{})})}),o.jsx(vn,{path:"*",element:o.jsx(JH,{})})]})})]})})});sA(document.getElementById("root")).render(o.jsx(aQ,{}));
