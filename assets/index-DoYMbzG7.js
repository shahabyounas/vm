var mb=t=>{throw TypeError(t)};var gg=(t,e,r)=>e.has(t)||mb("Cannot "+r);var re=(t,e,r)=>(gg(t,e,"read from private field"),r?r.call(t):e.get(t)),et=(t,e,r)=>e.has(t)?mb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Oe=(t,e,r,n)=>(gg(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),fr=(t,e,r)=>(gg(t,e,"access private method"),r);var bh=(t,e,r,n)=>({set _(s){Oe(t,e,s,r)},get _(){return re(t,e,n)}});function w_(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Tv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var b_={exports:{}},Gm={},E_={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ud=Symbol.for("react.element"),Vj=Symbol.for("react.portal"),Bj=Symbol.for("react.fragment"),Uj=Symbol.for("react.strict_mode"),qj=Symbol.for("react.profiler"),Gj=Symbol.for("react.provider"),$j=Symbol.for("react.context"),zj=Symbol.for("react.forward_ref"),Wj=Symbol.for("react.suspense"),Qj=Symbol.for("react.memo"),Hj=Symbol.for("react.lazy"),pb=Symbol.iterator;function Yj(t){return t===null||typeof t!="object"?null:(t=pb&&t[pb]||t["@@iterator"],typeof t=="function"?t:null)}var C_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},__=Object.assign,T_={};function Xl(t,e,r){this.props=t,this.context=e,this.refs=T_,this.updater=r||C_}Xl.prototype.isReactComponent={};Xl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function A_(){}A_.prototype=Xl.prototype;function Av(t,e,r){this.props=t,this.context=e,this.refs=T_,this.updater=r||C_}var Sv=Av.prototype=new A_;Sv.constructor=Av;__(Sv,Xl.prototype);Sv.isPureReactComponent=!0;var gb=Array.isArray,S_=Object.prototype.hasOwnProperty,Nv={current:null},N_={key:!0,ref:!0,__self:!0,__source:!0};function I_(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)S_.call(e,n)&&!N_.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ud,type:t,key:i,ref:o,props:s,_owner:Nv.current}}function Kj(t,e){return{$$typeof:ud,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Iv(t){return typeof t=="object"&&t!==null&&t.$$typeof===ud}function Jj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var yb=/\/+/g;function yg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Jj(""+t.key):e.toString(36)}function nf(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ud:case Vj:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+yg(o,0):n,gb(s)?(r="",t!=null&&(r=t.replace(yb,"$&/")+"/"),nf(s,e,r,"",function(u){return u})):s!=null&&(Iv(s)&&(s=Kj(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",gb(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+yg(i,l);o+=nf(i,e,r,c,s)}else if(c=Yj(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+yg(i,l++),o+=nf(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Eh(t,e,r){if(t==null)return t;var n=[],s=0;return nf(t,n,"","",function(i){return e.call(r,i,s++)}),n}function Xj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dr={current:null},sf={transition:null},Zj={ReactCurrentDispatcher:Dr,ReactCurrentBatchConfig:sf,ReactCurrentOwner:Nv};function R_(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:Eh,forEach:function(t,e,r){Eh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Eh(t,function(){e++}),e},toArray:function(t){return Eh(t,function(e){return e})||[]},only:function(t){if(!Iv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=Xl;Ue.Fragment=Bj;Ue.Profiler=qj;Ue.PureComponent=Av;Ue.StrictMode=Uj;Ue.Suspense=Wj;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zj;Ue.act=R_;Ue.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=__({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Nv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)S_.call(e,c)&&!N_.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ud,type:t.type,key:s,ref:i,props:n,_owner:o}};Ue.createContext=function(t){return t={$$typeof:$j,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Gj,_context:t},t.Consumer=t};Ue.createElement=I_;Ue.createFactory=function(t){var e=I_.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:zj,render:t}};Ue.isValidElement=Iv;Ue.lazy=function(t){return{$$typeof:Hj,_payload:{_status:-1,_result:t},_init:Xj}};Ue.memo=function(t,e){return{$$typeof:Qj,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=sf.transition;sf.transition={};try{t()}finally{sf.transition=e}};Ue.unstable_act=R_;Ue.useCallback=function(t,e){return Dr.current.useCallback(t,e)};Ue.useContext=function(t){return Dr.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return Dr.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return Dr.current.useEffect(t,e)};Ue.useId=function(){return Dr.current.useId()};Ue.useImperativeHandle=function(t,e,r){return Dr.current.useImperativeHandle(t,e,r)};Ue.useInsertionEffect=function(t,e){return Dr.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return Dr.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return Dr.current.useMemo(t,e)};Ue.useReducer=function(t,e,r){return Dr.current.useReducer(t,e,r)};Ue.useRef=function(t){return Dr.current.useRef(t)};Ue.useState=function(t){return Dr.current.useState(t)};Ue.useSyncExternalStore=function(t,e,r){return Dr.current.useSyncExternalStore(t,e,r)};Ue.useTransition=function(){return Dr.current.useTransition()};Ue.version="18.3.1";E_.exports=Ue;var y=E_.exports;const K=Tv(y),P_=w_({__proto__:null,default:K},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e4=y,t4=Symbol.for("react.element"),r4=Symbol.for("react.fragment"),n4=Object.prototype.hasOwnProperty,s4=e4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i4={key:!0,ref:!0,__self:!0,__source:!0};function k_(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)n4.call(e,n)&&!i4.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:t4,type:t,key:i,ref:o,props:s,_owner:s4.current}}Gm.Fragment=r4;Gm.jsx=k_;Gm.jsxs=k_;b_.exports=Gm;var a=b_.exports,j_={exports:{}},ln={},M_={exports:{}},D_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,W){var ie=G.length;G.push(W);e:for(;0<ie;){var ne=ie-1>>>1,U=G[ne];if(0<s(U,W))G[ne]=W,G[ie]=U,ie=ne;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var W=G[0],ie=G.pop();if(ie!==W){G[0]=ie;e:for(var ne=0,U=G.length,le=U>>>1;ne<le;){var _e=2*(ne+1)-1,je=G[_e],we=_e+1,ae=G[we];if(0>s(je,ie))we<U&&0>s(ae,je)?(G[ne]=ae,G[we]=ie,ne=we):(G[ne]=je,G[_e]=ie,ne=_e);else if(we<U&&0>s(ae,ie))G[ne]=ae,G[we]=ie,ne=we;else break e}}return W}function s(G,W){var ie=G.sortIndex-W.sortIndex;return ie!==0?ie:G.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,m=3,g=!1,x=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=G)n(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=r(u)}}function R(G){if(p=!1,C(G),!x)if(r(c)!==null)x=!0,J(L);else{var W=r(u);W!==null&&se(R,W.startTime-G)}}function L(G,W){x=!1,p&&(p=!1,_(A),A=-1),g=!0;var ie=m;try{for(C(W),f=r(c);f!==null&&(!(f.expirationTime>W)||G&&!D());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,m=f.priorityLevel;var U=ne(f.expirationTime<=W);W=t.unstable_now(),typeof U=="function"?f.callback=U:f===r(c)&&n(c),C(W)}else n(c);f=r(c)}if(f!==null)var le=!0;else{var _e=r(u);_e!==null&&se(R,_e.startTime-W),le=!1}return le}finally{f=null,m=ie,g=!1}}var V=!1,I=null,A=-1,N=5,P=-1;function D(){return!(t.unstable_now()-P<N)}function O(){if(I!==null){var G=t.unstable_now();P=G;var W=!0;try{W=I(!0,G)}finally{W?j():(V=!1,I=null)}}else V=!1}var j;if(typeof w=="function")j=function(){w(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Y=$.port2;$.port1.onmessage=O,j=function(){Y.postMessage(null)}}else j=function(){b(O,0)};function J(G){I=G,V||(V=!0,j())}function se(G,W){A=b(function(){G(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,J(L))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(G){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var ie=m;m=W;try{return G()}finally{m=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ie=m;m=G;try{return W()}finally{m=ie}},t.unstable_scheduleCallback=function(G,W,ie){var ne=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,G){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ie+U,G={id:h++,callback:W,priorityLevel:G,startTime:ie,expirationTime:U,sortIndex:-1},ie>ne?(G.sortIndex=ie,e(u,G),r(c)===null&&G===r(u)&&(p?(_(A),A=-1):p=!0,se(R,ie-ne))):(G.sortIndex=U,e(c,G),x||g||(x=!0,J(L))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var W=m;return function(){var ie=m;m=W;try{return G.apply(this,arguments)}finally{m=ie}}}})(D_);M_.exports=D_;var o4=M_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a4=y,an=o4;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O_=new Set,Eu={};function ga(t,e){Dl(t,e),Dl(t+"Capture",e)}function Dl(t,e){for(Eu[t]=e,t=0;t<e.length;t++)O_.add(e[t])}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v0=Object.prototype.hasOwnProperty,l4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vb={},xb={};function c4(t){return v0.call(xb,t)?!0:v0.call(vb,t)?!1:l4.test(t)?xb[t]=!0:(vb[t]=!0,!1)}function u4(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function d4(t,e,r,n){if(e===null||typeof e>"u"||u4(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Or(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lr[t]=new Or(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lr[e]=new Or(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lr[t]=new Or(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lr[t]=new Or(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lr[t]=new Or(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lr[t]=new Or(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lr[t]=new Or(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lr[t]=new Or(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lr[t]=new Or(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rv=/[\-:]([a-z])/g;function Pv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rv,Pv);lr[e]=new Or(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rv,Pv);lr[e]=new Or(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rv,Pv);lr[e]=new Or(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lr[t]=new Or(t,1,!1,t.toLowerCase(),null,!1,!1)});lr.xlinkHref=new Or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lr[t]=new Or(t,1,!1,t.toLowerCase(),null,!0,!0)});function kv(t,e,r,n){var s=lr.hasOwnProperty(e)?lr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(d4(e,r,s,n)&&(r=null),n||s===null?c4(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Zs=a4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ch=Symbol.for("react.element"),Xa=Symbol.for("react.portal"),Za=Symbol.for("react.fragment"),jv=Symbol.for("react.strict_mode"),x0=Symbol.for("react.profiler"),L_=Symbol.for("react.provider"),F_=Symbol.for("react.context"),Mv=Symbol.for("react.forward_ref"),w0=Symbol.for("react.suspense"),b0=Symbol.for("react.suspense_list"),Dv=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),V_=Symbol.for("react.offscreen"),wb=Symbol.iterator;function kc(t){return t===null||typeof t!="object"?null:(t=wb&&t[wb]||t["@@iterator"],typeof t=="function"?t:null)}var At=Object.assign,vg;function Gc(t){if(vg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);vg=e&&e[1]||""}return`
`+vg+t}var xg=!1;function wg(t,e){if(!t||xg)return"";xg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{xg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Gc(t):""}function h4(t){switch(t.tag){case 5:return Gc(t.type);case 16:return Gc("Lazy");case 13:return Gc("Suspense");case 19:return Gc("SuspenseList");case 0:case 2:case 15:return t=wg(t.type,!1),t;case 11:return t=wg(t.type.render,!1),t;case 1:return t=wg(t.type,!0),t;default:return""}}function E0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Za:return"Fragment";case Xa:return"Portal";case x0:return"Profiler";case jv:return"StrictMode";case w0:return"Suspense";case b0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case F_:return(t.displayName||"Context")+".Consumer";case L_:return(t._context.displayName||"Context")+".Provider";case Mv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dv:return e=t.displayName||null,e!==null?e:E0(t.type)||"Memo";case xi:e=t._payload,t=t._init;try{return E0(t(e))}catch{}}return null}function f4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E0(e);case 8:return e===jv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function m4(t){var e=B_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _h(t){t._valueTracker||(t._valueTracker=m4(t))}function U_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=B_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Bf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function C0(t,e){var r=e.checked;return At({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function bb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ji(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q_(t,e){e=e.checked,e!=null&&kv(t,"checked",e,!1)}function _0(t,e){q_(t,e);var r=Ji(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?T0(t,e.type,r):e.hasOwnProperty("defaultValue")&&T0(t,e.type,Ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function T0(t,e,r){(e!=="number"||Bf(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var $c=Array.isArray;function hl(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ji(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function A0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return At({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ce(92));if($c(r)){if(1<r.length)throw Error(ce(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ji(r)}}function G_(t,e){var r=Ji(e.value),n=Ji(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function _b(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Th,z_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Th=Th||document.createElement("div"),Th.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Th.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var nu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},p4=["Webkit","ms","Moz","O"];Object.keys(nu).forEach(function(t){p4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nu[e]=nu[t]})});function W_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||nu.hasOwnProperty(t)&&nu[t]?(""+e).trim():e+"px"}function Q_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=W_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var g4=At({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function N0(t,e){if(e){if(g4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function I0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var R0=null;function Ov(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var P0=null,fl=null,ml=null;function Tb(t){if(t=fd(t)){if(typeof P0!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=Hm(e),P0(t.stateNode,t.type,e))}}function H_(t){fl?ml?ml.push(t):ml=[t]:fl=t}function Y_(){if(fl){var t=fl,e=ml;if(ml=fl=null,Tb(t),e)for(t=0;t<e.length;t++)Tb(e[t])}}function K_(t,e){return t(e)}function J_(){}var bg=!1;function X_(t,e,r){if(bg)return t(e,r);bg=!0;try{return K_(t,e,r)}finally{bg=!1,(fl!==null||ml!==null)&&(J_(),Y_())}}function _u(t,e){var r=t.stateNode;if(r===null)return null;var n=Hm(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ce(231,e,typeof r));return r}var k0=!1;if(qs)try{var jc={};Object.defineProperty(jc,"passive",{get:function(){k0=!0}}),window.addEventListener("test",jc,jc),window.removeEventListener("test",jc,jc)}catch{k0=!1}function y4(t,e,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var su=!1,Uf=null,qf=!1,j0=null,v4={onError:function(t){su=!0,Uf=t}};function x4(t,e,r,n,s,i,o,l,c){su=!1,Uf=null,y4.apply(v4,arguments)}function w4(t,e,r,n,s,i,o,l,c){if(x4.apply(this,arguments),su){if(su){var u=Uf;su=!1,Uf=null}else throw Error(ce(198));qf||(qf=!0,j0=u)}}function ya(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Z_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ab(t){if(ya(t)!==t)throw Error(ce(188))}function b4(t){var e=t.alternate;if(!e){if(e=ya(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ab(s),t;if(i===n)return Ab(s),e;i=i.sibling}throw Error(ce(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?t:e}function eT(t){return t=b4(t),t!==null?tT(t):null}function tT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tT(t);if(e!==null)return e;t=t.sibling}return null}var rT=an.unstable_scheduleCallback,Sb=an.unstable_cancelCallback,E4=an.unstable_shouldYield,C4=an.unstable_requestPaint,Dt=an.unstable_now,_4=an.unstable_getCurrentPriorityLevel,Lv=an.unstable_ImmediatePriority,nT=an.unstable_UserBlockingPriority,Gf=an.unstable_NormalPriority,T4=an.unstable_LowPriority,sT=an.unstable_IdlePriority,$m=null,os=null;function A4(t){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot($m,t,void 0,(t.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:I4,S4=Math.log,N4=Math.LN2;function I4(t){return t>>>=0,t===0?32:31-(S4(t)/N4|0)|0}var Ah=64,Sh=4194304;function zc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $f(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=zc(l):(i&=o,i!==0&&(n=zc(i)))}else o=r&~s,o!==0?n=zc(o):i!==0&&(n=zc(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Bn(e),s=1<<r,n|=t[r],e&=~s;return n}function R4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P4(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Bn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=R4(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function M0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iT(){var t=Ah;return Ah<<=1,!(Ah&4194240)&&(Ah=64),t}function Eg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function dd(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bn(e),t[e]=r}function k4(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Bn(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Fv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Bn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var it=0;function oT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aT,Vv,lT,cT,uT,D0=!1,Nh=[],Li=null,Fi=null,Vi=null,Tu=new Map,Au=new Map,Ei=[],j4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nb(t,e){switch(t){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":Tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(e.pointerId)}}function Mc(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fd(e),e!==null&&Vv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function M4(t,e,r,n,s){switch(e){case"focusin":return Li=Mc(Li,t,e,r,n,s),!0;case"dragenter":return Fi=Mc(Fi,t,e,r,n,s),!0;case"mouseover":return Vi=Mc(Vi,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Tu.set(i,Mc(Tu.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Au.set(i,Mc(Au.get(i)||null,t,e,r,n,s)),!0}return!1}function dT(t){var e=Bo(t.target);if(e!==null){var r=ya(e);if(r!==null){if(e=r.tag,e===13){if(e=Z_(r),e!==null){t.blockedOn=e,uT(t.priority,function(){lT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function of(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=O0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);R0=n,r.target.dispatchEvent(n),R0=null}else return e=fd(r),e!==null&&Vv(e),t.blockedOn=r,!1;e.shift()}return!0}function Ib(t,e,r){of(t)&&r.delete(e)}function D4(){D0=!1,Li!==null&&of(Li)&&(Li=null),Fi!==null&&of(Fi)&&(Fi=null),Vi!==null&&of(Vi)&&(Vi=null),Tu.forEach(Ib),Au.forEach(Ib)}function Dc(t,e){t.blockedOn===e&&(t.blockedOn=null,D0||(D0=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,D4)))}function Su(t){function e(s){return Dc(s,t)}if(0<Nh.length){Dc(Nh[0],t);for(var r=1;r<Nh.length;r++){var n=Nh[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Li!==null&&Dc(Li,t),Fi!==null&&Dc(Fi,t),Vi!==null&&Dc(Vi,t),Tu.forEach(e),Au.forEach(e),r=0;r<Ei.length;r++)n=Ei[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ei.length&&(r=Ei[0],r.blockedOn===null);)dT(r),r.blockedOn===null&&Ei.shift()}var pl=Zs.ReactCurrentBatchConfig,zf=!0;function O4(t,e,r,n){var s=it,i=pl.transition;pl.transition=null;try{it=1,Bv(t,e,r,n)}finally{it=s,pl.transition=i}}function L4(t,e,r,n){var s=it,i=pl.transition;pl.transition=null;try{it=4,Bv(t,e,r,n)}finally{it=s,pl.transition=i}}function Bv(t,e,r,n){if(zf){var s=O0(t,e,r,n);if(s===null)kg(t,e,n,Wf,r),Nb(t,n);else if(M4(s,t,e,r,n))n.stopPropagation();else if(Nb(t,n),e&4&&-1<j4.indexOf(t)){for(;s!==null;){var i=fd(s);if(i!==null&&aT(i),i=O0(t,e,r,n),i===null&&kg(t,e,n,Wf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else kg(t,e,n,null,r)}}var Wf=null;function O0(t,e,r,n){if(Wf=null,t=Ov(n),t=Bo(t),t!==null)if(e=ya(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Z_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wf=t,null}function hT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_4()){case Lv:return 1;case nT:return 4;case Gf:case T4:return 16;case sT:return 536870912;default:return 16}default:return 16}}var ji=null,Uv=null,af=null;function fT(){if(af)return af;var t,e=Uv,r=e.length,n,s="value"in ji?ji.value:ji.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return af=s.slice(t,1<n?1-n:void 0)}function lf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ih(){return!0}function Rb(){return!1}function cn(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ih:Rb,this.isPropagationStopped=Rb,this}return At(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ih)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ih)},persist:function(){},isPersistent:Ih}),e}var Zl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qv=cn(Zl),hd=At({},Zl,{view:0,detail:0}),F4=cn(hd),Cg,_g,Oc,zm=At({},hd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oc&&(Oc&&t.type==="mousemove"?(Cg=t.screenX-Oc.screenX,_g=t.screenY-Oc.screenY):_g=Cg=0,Oc=t),Cg)},movementY:function(t){return"movementY"in t?t.movementY:_g}}),Pb=cn(zm),V4=At({},zm,{dataTransfer:0}),B4=cn(V4),U4=At({},hd,{relatedTarget:0}),Tg=cn(U4),q4=At({},Zl,{animationName:0,elapsedTime:0,pseudoElement:0}),G4=cn(q4),$4=At({},Zl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),z4=cn($4),W4=At({},Zl,{data:0}),kb=cn(W4),Q4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Y4[t])?!!e[t]:!1}function Gv(){return K4}var J4=At({},hd,{key:function(t){if(t.key){var e=Q4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?H4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gv,charCode:function(t){return t.type==="keypress"?lf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),X4=cn(J4),Z4=At({},zm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jb=cn(Z4),eM=At({},hd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gv}),tM=cn(eM),rM=At({},Zl,{propertyName:0,elapsedTime:0,pseudoElement:0}),nM=cn(rM),sM=At({},zm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iM=cn(sM),oM=[9,13,27,32],$v=qs&&"CompositionEvent"in window,iu=null;qs&&"documentMode"in document&&(iu=document.documentMode);var aM=qs&&"TextEvent"in window&&!iu,mT=qs&&(!$v||iu&&8<iu&&11>=iu),Mb=" ",Db=!1;function pT(t,e){switch(t){case"keyup":return oM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var el=!1;function lM(t,e){switch(t){case"compositionend":return gT(e);case"keypress":return e.which!==32?null:(Db=!0,Mb);case"textInput":return t=e.data,t===Mb&&Db?null:t;default:return null}}function cM(t,e){if(el)return t==="compositionend"||!$v&&pT(t,e)?(t=fT(),af=Uv=ji=null,el=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mT&&e.locale!=="ko"?null:e.data;default:return null}}var uM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ob(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uM[t.type]:e==="textarea"}function yT(t,e,r,n){H_(n),e=Qf(e,"onChange"),0<e.length&&(r=new qv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ou=null,Nu=null;function dM(t){NT(t,0)}function Wm(t){var e=nl(t);if(U_(e))return t}function hM(t,e){if(t==="change")return e}var vT=!1;if(qs){var Ag;if(qs){var Sg="oninput"in document;if(!Sg){var Lb=document.createElement("div");Lb.setAttribute("oninput","return;"),Sg=typeof Lb.oninput=="function"}Ag=Sg}else Ag=!1;vT=Ag&&(!document.documentMode||9<document.documentMode)}function Fb(){ou&&(ou.detachEvent("onpropertychange",xT),Nu=ou=null)}function xT(t){if(t.propertyName==="value"&&Wm(Nu)){var e=[];yT(e,Nu,t,Ov(t)),X_(dM,e)}}function fM(t,e,r){t==="focusin"?(Fb(),ou=e,Nu=r,ou.attachEvent("onpropertychange",xT)):t==="focusout"&&Fb()}function mM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wm(Nu)}function pM(t,e){if(t==="click")return Wm(e)}function gM(t,e){if(t==="input"||t==="change")return Wm(e)}function yM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $n=typeof Object.is=="function"?Object.is:yM;function Iu(t,e){if($n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!v0.call(e,s)||!$n(t[s],e[s]))return!1}return!0}function Vb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bb(t,e){var r=Vb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vb(r)}}function wT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bT(){for(var t=window,e=Bf();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Bf(t.document)}return e}function zv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vM(t){var e=bT(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&wT(r.ownerDocument.documentElement,r)){if(n!==null&&zv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Bb(r,i);var o=Bb(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xM=qs&&"documentMode"in document&&11>=document.documentMode,tl=null,L0=null,au=null,F0=!1;function Ub(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;F0||tl==null||tl!==Bf(n)||(n=tl,"selectionStart"in n&&zv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),au&&Iu(au,n)||(au=n,n=Qf(L0,"onSelect"),0<n.length&&(e=new qv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=tl)))}function Rh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var rl={animationend:Rh("Animation","AnimationEnd"),animationiteration:Rh("Animation","AnimationIteration"),animationstart:Rh("Animation","AnimationStart"),transitionend:Rh("Transition","TransitionEnd")},Ng={},ET={};qs&&(ET=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Qm(t){if(Ng[t])return Ng[t];if(!rl[t])return t;var e=rl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in ET)return Ng[t]=e[r];return t}var CT=Qm("animationend"),_T=Qm("animationiteration"),TT=Qm("animationstart"),AT=Qm("transitionend"),ST=new Map,qb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mo(t,e){ST.set(t,e),ga(e,[t])}for(var Ig=0;Ig<qb.length;Ig++){var Rg=qb[Ig],wM=Rg.toLowerCase(),bM=Rg[0].toUpperCase()+Rg.slice(1);mo(wM,"on"+bM)}mo(CT,"onAnimationEnd");mo(_T,"onAnimationIteration");mo(TT,"onAnimationStart");mo("dblclick","onDoubleClick");mo("focusin","onFocus");mo("focusout","onBlur");mo(AT,"onTransitionEnd");Dl("onMouseEnter",["mouseout","mouseover"]);Dl("onMouseLeave",["mouseout","mouseover"]);Dl("onPointerEnter",["pointerout","pointerover"]);Dl("onPointerLeave",["pointerout","pointerover"]);ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ga("onBeforeInput",["compositionend","keypress","textInput","paste"]);ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wc));function Gb(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,w4(n,e,void 0,t),t.currentTarget=null}function NT(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Gb(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Gb(s,l,u),i=c}}}if(qf)throw t=j0,qf=!1,j0=null,t}function pt(t,e){var r=e[G0];r===void 0&&(r=e[G0]=new Set);var n=t+"__bubble";r.has(n)||(IT(e,t,2,!1),r.add(n))}function Pg(t,e,r){var n=0;e&&(n|=4),IT(r,t,n,e)}var Ph="_reactListening"+Math.random().toString(36).slice(2);function Ru(t){if(!t[Ph]){t[Ph]=!0,O_.forEach(function(r){r!=="selectionchange"&&(EM.has(r)||Pg(r,!1,t),Pg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ph]||(e[Ph]=!0,Pg("selectionchange",!1,e))}}function IT(t,e,r,n){switch(hT(e)){case 1:var s=O4;break;case 4:s=L4;break;default:s=Bv}r=s.bind(null,e,r,t),s=void 0,!k0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function kg(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Bo(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}X_(function(){var u=i,h=Ov(r),f=[];e:{var m=ST.get(t);if(m!==void 0){var g=qv,x=t;switch(t){case"keypress":if(lf(r)===0)break e;case"keydown":case"keyup":g=X4;break;case"focusin":x="focus",g=Tg;break;case"focusout":x="blur",g=Tg;break;case"beforeblur":case"afterblur":g=Tg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Pb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=B4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=tM;break;case CT:case _T:case TT:g=G4;break;case AT:g=nM;break;case"scroll":g=F4;break;case"wheel":g=iM;break;case"copy":case"cut":case"paste":g=z4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=jb}var p=(e&4)!==0,b=!p&&t==="scroll",_=p?m!==null?m+"Capture":null:m;p=[];for(var w=u,C;w!==null;){C=w;var R=C.stateNode;if(C.tag===5&&R!==null&&(C=R,_!==null&&(R=_u(w,_),R!=null&&p.push(Pu(w,R,C)))),b)break;w=w.return}0<p.length&&(m=new g(m,x,null,r,h),f.push({event:m,listeners:p}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==R0&&(x=r.relatedTarget||r.fromElement)&&(Bo(x)||x[Gs]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=r.relatedTarget||r.toElement,g=u,x=x?Bo(x):null,x!==null&&(b=ya(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(p=Pb,R="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(p=jb,R="onPointerLeave",_="onPointerEnter",w="pointer"),b=g==null?m:nl(g),C=x==null?m:nl(x),m=new p(R,w+"leave",g,r,h),m.target=b,m.relatedTarget=C,R=null,Bo(h)===u&&(p=new p(_,w+"enter",x,r,h),p.target=C,p.relatedTarget=b,R=p),b=R,g&&x)t:{for(p=g,_=x,w=0,C=p;C;C=$a(C))w++;for(C=0,R=_;R;R=$a(R))C++;for(;0<w-C;)p=$a(p),w--;for(;0<C-w;)_=$a(_),C--;for(;w--;){if(p===_||_!==null&&p===_.alternate)break t;p=$a(p),_=$a(_)}p=null}else p=null;g!==null&&$b(f,m,g,p,!1),x!==null&&b!==null&&$b(f,b,x,p,!0)}}e:{if(m=u?nl(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var L=hM;else if(Ob(m))if(vT)L=gM;else{L=mM;var V=fM}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=pM);if(L&&(L=L(t,u))){yT(f,L,r,h);break e}V&&V(t,m,u),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&T0(m,"number",m.value)}switch(V=u?nl(u):window,t){case"focusin":(Ob(V)||V.contentEditable==="true")&&(tl=V,L0=u,au=null);break;case"focusout":au=L0=tl=null;break;case"mousedown":F0=!0;break;case"contextmenu":case"mouseup":case"dragend":F0=!1,Ub(f,r,h);break;case"selectionchange":if(xM)break;case"keydown":case"keyup":Ub(f,r,h)}var I;if($v)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else el?pT(t,r)&&(A="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(mT&&r.locale!=="ko"&&(el||A!=="onCompositionStart"?A==="onCompositionEnd"&&el&&(I=fT()):(ji=h,Uv="value"in ji?ji.value:ji.textContent,el=!0)),V=Qf(u,A),0<V.length&&(A=new kb(A,t,null,r,h),f.push({event:A,listeners:V}),I?A.data=I:(I=gT(r),I!==null&&(A.data=I)))),(I=aM?lM(t,r):cM(t,r))&&(u=Qf(u,"onBeforeInput"),0<u.length&&(h=new kb("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:u}),h.data=I))}NT(f,e)})}function Pu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Qf(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_u(t,r),i!=null&&n.unshift(Pu(t,i,s)),i=_u(t,e),i!=null&&n.push(Pu(t,i,s))),t=t.return}return n}function $a(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $b(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=_u(r,i),c!=null&&o.unshift(Pu(r,c,l))):s||(c=_u(r,i),c!=null&&o.push(Pu(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var CM=/\r\n?/g,_M=/\u0000|\uFFFD/g;function zb(t){return(typeof t=="string"?t:""+t).replace(CM,`
`).replace(_M,"")}function kh(t,e,r){if(e=zb(e),zb(t)!==e&&r)throw Error(ce(425))}function Hf(){}var V0=null,B0=null;function U0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var q0=typeof setTimeout=="function"?setTimeout:void 0,TM=typeof clearTimeout=="function"?clearTimeout:void 0,Wb=typeof Promise=="function"?Promise:void 0,AM=typeof queueMicrotask=="function"?queueMicrotask:typeof Wb<"u"?function(t){return Wb.resolve(null).then(t).catch(SM)}:q0;function SM(t){setTimeout(function(){throw t})}function jg(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Su(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Su(e)}function Bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ec=Math.random().toString(36).slice(2),ss="__reactFiber$"+ec,ku="__reactProps$"+ec,Gs="__reactContainer$"+ec,G0="__reactEvents$"+ec,NM="__reactListeners$"+ec,IM="__reactHandles$"+ec;function Bo(t){var e=t[ss];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Gs]||r[ss]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Qb(t);t!==null;){if(r=t[ss])return r;t=Qb(t)}return e}t=r,r=t.parentNode}return null}function fd(t){return t=t[ss]||t[Gs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function Hm(t){return t[ku]||null}var $0=[],sl=-1;function po(t){return{current:t}}function yt(t){0>sl||(t.current=$0[sl],$0[sl]=null,sl--)}function dt(t,e){sl++,$0[sl]=t.current,t.current=e}var Xi={},br=po(Xi),Gr=po(!1),ta=Xi;function Ol(t,e){var r=t.type.contextTypes;if(!r)return Xi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $r(t){return t=t.childContextTypes,t!=null}function Yf(){yt(Gr),yt(br)}function Hb(t,e,r){if(br.current!==Xi)throw Error(ce(168));dt(br,e),dt(Gr,r)}function RT(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ce(108,f4(t)||"Unknown",s));return At({},r,n)}function Kf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xi,ta=br.current,dt(br,t),dt(Gr,Gr.current),!0}function Yb(t,e,r){var n=t.stateNode;if(!n)throw Error(ce(169));r?(t=RT(t,e,ta),n.__reactInternalMemoizedMergedChildContext=t,yt(Gr),yt(br),dt(br,t)):yt(Gr),dt(Gr,r)}var Ms=null,Ym=!1,Mg=!1;function PT(t){Ms===null?Ms=[t]:Ms.push(t)}function RM(t){Ym=!0,PT(t)}function go(){if(!Mg&&Ms!==null){Mg=!0;var t=0,e=it;try{var r=Ms;for(it=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ms=null,Ym=!1}catch(s){throw Ms!==null&&(Ms=Ms.slice(t+1)),rT(Lv,go),s}finally{it=e,Mg=!1}}return null}var il=[],ol=0,Jf=null,Xf=0,pn=[],gn=0,ra=null,Ds=1,Os="";function Lo(t,e){il[ol++]=Xf,il[ol++]=Jf,Jf=t,Xf=e}function kT(t,e,r){pn[gn++]=Ds,pn[gn++]=Os,pn[gn++]=ra,ra=t;var n=Ds;t=Os;var s=32-Bn(n)-1;n&=~(1<<s),r+=1;var i=32-Bn(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ds=1<<32-Bn(e)+s|r<<s|n,Os=i+t}else Ds=1<<i|r<<s|n,Os=t}function Wv(t){t.return!==null&&(Lo(t,1),kT(t,1,0))}function Qv(t){for(;t===Jf;)Jf=il[--ol],il[ol]=null,Xf=il[--ol],il[ol]=null;for(;t===ra;)ra=pn[--gn],pn[gn]=null,Os=pn[--gn],pn[gn]=null,Ds=pn[--gn],pn[gn]=null}var nn=null,tn=null,Ct=!1,Fn=null;function jT(t,e){var r=xn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Kb(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,tn=Bi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ra!==null?{id:Ds,overflow:Os}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=xn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,nn=t,tn=null,!0):!1;default:return!1}}function z0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function W0(t){if(Ct){var e=tn;if(e){var r=e;if(!Kb(t,e)){if(z0(t))throw Error(ce(418));e=Bi(r.nextSibling);var n=nn;e&&Kb(t,e)?jT(n,r):(t.flags=t.flags&-4097|2,Ct=!1,nn=t)}}else{if(z0(t))throw Error(ce(418));t.flags=t.flags&-4097|2,Ct=!1,nn=t}}}function Jb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function jh(t){if(t!==nn)return!1;if(!Ct)return Jb(t),Ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!U0(t.type,t.memoizedProps)),e&&(e=tn)){if(z0(t))throw MT(),Error(ce(418));for(;e;)jT(t,e),e=Bi(e.nextSibling)}if(Jb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){tn=Bi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}tn=null}}else tn=nn?Bi(t.stateNode.nextSibling):null;return!0}function MT(){for(var t=tn;t;)t=Bi(t.nextSibling)}function Ll(){tn=nn=null,Ct=!1}function Hv(t){Fn===null?Fn=[t]:Fn.push(t)}var PM=Zs.ReactCurrentBatchConfig;function Lc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,t))}return t}function Mh(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xb(t){var e=t._init;return e(t._payload)}function DT(t){function e(_,w){if(t){var C=_.deletions;C===null?(_.deletions=[w],_.flags|=16):C.push(w)}}function r(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function n(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=$i(_,w),_.index=0,_.sibling=null,_}function i(_,w,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<w?(_.flags|=2,w):C):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,C,R){return w===null||w.tag!==6?(w=Ug(C,_.mode,R),w.return=_,w):(w=s(w,C),w.return=_,w)}function c(_,w,C,R){var L=C.type;return L===Za?h(_,w,C.props.children,R,C.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xi&&Xb(L)===w.type)?(R=s(w,C.props),R.ref=Lc(_,w,C),R.return=_,R):(R=pf(C.type,C.key,C.props,null,_.mode,R),R.ref=Lc(_,w,C),R.return=_,R)}function u(_,w,C,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=qg(C,_.mode,R),w.return=_,w):(w=s(w,C.children||[]),w.return=_,w)}function h(_,w,C,R,L){return w===null||w.tag!==7?(w=Yo(C,_.mode,R,L),w.return=_,w):(w=s(w,C),w.return=_,w)}function f(_,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ug(""+w,_.mode,C),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ch:return C=pf(w.type,w.key,w.props,null,_.mode,C),C.ref=Lc(_,null,w),C.return=_,C;case Xa:return w=qg(w,_.mode,C),w.return=_,w;case xi:var R=w._init;return f(_,R(w._payload),C)}if($c(w)||kc(w))return w=Yo(w,_.mode,C,null),w.return=_,w;Mh(_,w)}return null}function m(_,w,C,R){var L=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:l(_,w,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ch:return C.key===L?c(_,w,C,R):null;case Xa:return C.key===L?u(_,w,C,R):null;case xi:return L=C._init,m(_,w,L(C._payload),R)}if($c(C)||kc(C))return L!==null?null:h(_,w,C,R,null);Mh(_,C)}return null}function g(_,w,C,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(C)||null,l(w,_,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ch:return _=_.get(R.key===null?C:R.key)||null,c(w,_,R,L);case Xa:return _=_.get(R.key===null?C:R.key)||null,u(w,_,R,L);case xi:var V=R._init;return g(_,w,C,V(R._payload),L)}if($c(R)||kc(R))return _=_.get(C)||null,h(w,_,R,L,null);Mh(w,R)}return null}function x(_,w,C,R){for(var L=null,V=null,I=w,A=w=0,N=null;I!==null&&A<C.length;A++){I.index>A?(N=I,I=null):N=I.sibling;var P=m(_,I,C[A],R);if(P===null){I===null&&(I=N);break}t&&I&&P.alternate===null&&e(_,I),w=i(P,w,A),V===null?L=P:V.sibling=P,V=P,I=N}if(A===C.length)return r(_,I),Ct&&Lo(_,A),L;if(I===null){for(;A<C.length;A++)I=f(_,C[A],R),I!==null&&(w=i(I,w,A),V===null?L=I:V.sibling=I,V=I);return Ct&&Lo(_,A),L}for(I=n(_,I);A<C.length;A++)N=g(I,_,A,C[A],R),N!==null&&(t&&N.alternate!==null&&I.delete(N.key===null?A:N.key),w=i(N,w,A),V===null?L=N:V.sibling=N,V=N);return t&&I.forEach(function(D){return e(_,D)}),Ct&&Lo(_,A),L}function p(_,w,C,R){var L=kc(C);if(typeof L!="function")throw Error(ce(150));if(C=L.call(C),C==null)throw Error(ce(151));for(var V=L=null,I=w,A=w=0,N=null,P=C.next();I!==null&&!P.done;A++,P=C.next()){I.index>A?(N=I,I=null):N=I.sibling;var D=m(_,I,P.value,R);if(D===null){I===null&&(I=N);break}t&&I&&D.alternate===null&&e(_,I),w=i(D,w,A),V===null?L=D:V.sibling=D,V=D,I=N}if(P.done)return r(_,I),Ct&&Lo(_,A),L;if(I===null){for(;!P.done;A++,P=C.next())P=f(_,P.value,R),P!==null&&(w=i(P,w,A),V===null?L=P:V.sibling=P,V=P);return Ct&&Lo(_,A),L}for(I=n(_,I);!P.done;A++,P=C.next())P=g(I,_,A,P.value,R),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?A:P.key),w=i(P,w,A),V===null?L=P:V.sibling=P,V=P);return t&&I.forEach(function(O){return e(_,O)}),Ct&&Lo(_,A),L}function b(_,w,C,R){if(typeof C=="object"&&C!==null&&C.type===Za&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ch:e:{for(var L=C.key,V=w;V!==null;){if(V.key===L){if(L=C.type,L===Za){if(V.tag===7){r(_,V.sibling),w=s(V,C.props.children),w.return=_,_=w;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xi&&Xb(L)===V.type){r(_,V.sibling),w=s(V,C.props),w.ref=Lc(_,V,C),w.return=_,_=w;break e}r(_,V);break}else e(_,V);V=V.sibling}C.type===Za?(w=Yo(C.props.children,_.mode,R,C.key),w.return=_,_=w):(R=pf(C.type,C.key,C.props,null,_.mode,R),R.ref=Lc(_,w,C),R.return=_,_=R)}return o(_);case Xa:e:{for(V=C.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){r(_,w.sibling),w=s(w,C.children||[]),w.return=_,_=w;break e}else{r(_,w);break}else e(_,w);w=w.sibling}w=qg(C,_.mode,R),w.return=_,_=w}return o(_);case xi:return V=C._init,b(_,w,V(C._payload),R)}if($c(C))return x(_,w,C,R);if(kc(C))return p(_,w,C,R);Mh(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(r(_,w.sibling),w=s(w,C),w.return=_,_=w):(r(_,w),w=Ug(C,_.mode,R),w.return=_,_=w),o(_)):r(_,w)}return b}var Fl=DT(!0),OT=DT(!1),Zf=po(null),em=null,al=null,Yv=null;function Kv(){Yv=al=em=null}function Jv(t){var e=Zf.current;yt(Zf),t._currentValue=e}function Q0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function gl(t,e){em=t,Yv=al=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qr=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(Yv!==t)if(t={context:t,memoizedValue:e,next:null},al===null){if(em===null)throw Error(ce(308));al=t,em.dependencies={lanes:0,firstContext:t}}else al=al.next=t;return e}var Uo=null;function Xv(t){Uo===null?Uo=[t]:Uo.push(t)}function LT(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Xv(e)):(r.next=s.next,s.next=r),e.interleaved=r,$s(t,n)}function $s(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var wi=!1;function Zv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ke&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,$s(t,r)}return s=n.interleaved,s===null?(e.next=e,Xv(n)):(e.next=s.next,s.next=e),n.interleaved=e,$s(t,r)}function cf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Fv(t,r)}}function Zb(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function tm(t,e,r,n){var s=t.updateQueue;wi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,p=l;switch(m=e,g=r,p.tag){case 1:if(x=p.payload,typeof x=="function"){f=x.call(g,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,m=typeof x=="function"?x.call(g,f,m):x,m==null)break e;f=At({},f,m);break e;case 2:wi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);sa|=o,t.lanes=o,t.memoizedState=f}}function e1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ce(191,s));s.call(n)}}}var md={},as=po(md),ju=po(md),Mu=po(md);function qo(t){if(t===md)throw Error(ce(174));return t}function ex(t,e){switch(dt(Mu,e),dt(ju,t),dt(as,md),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:S0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=S0(e,t)}yt(as),dt(as,e)}function Vl(){yt(as),yt(ju),yt(Mu)}function VT(t){qo(Mu.current);var e=qo(as.current),r=S0(e,t.type);e!==r&&(dt(ju,t),dt(as,r))}function tx(t){ju.current===t&&(yt(as),yt(ju))}var _t=po(0);function rm(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dg=[];function rx(){for(var t=0;t<Dg.length;t++)Dg[t]._workInProgressVersionPrimary=null;Dg.length=0}var uf=Zs.ReactCurrentDispatcher,Og=Zs.ReactCurrentBatchConfig,na=0,Tt=null,Wt=null,tr=null,nm=!1,lu=!1,Du=0,kM=0;function mr(){throw Error(ce(321))}function nx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!$n(t[r],e[r]))return!1;return!0}function sx(t,e,r,n,s,i){if(na=i,Tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uf.current=t===null||t.memoizedState===null?OM:LM,t=r(n,s),lu){i=0;do{if(lu=!1,Du=0,25<=i)throw Error(ce(301));i+=1,tr=Wt=null,e.updateQueue=null,uf.current=FM,t=r(n,s)}while(lu)}if(uf.current=sm,e=Wt!==null&&Wt.next!==null,na=0,tr=Wt=Tt=null,nm=!1,e)throw Error(ce(300));return t}function ix(){var t=Du!==0;return Du=0,t}function Zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?Tt.memoizedState=tr=t:tr=tr.next=t,tr}function Cn(){if(Wt===null){var t=Tt.alternate;t=t!==null?t.memoizedState:null}else t=Wt.next;var e=tr===null?Tt.memoizedState:tr.next;if(e!==null)tr=e,Wt=t;else{if(t===null)throw Error(ce(310));Wt=t,t={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},tr===null?Tt.memoizedState=tr=t:tr=tr.next=t}return tr}function Ou(t,e){return typeof e=="function"?e(t):e}function Lg(t){var e=Cn(),r=e.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=t;var n=Wt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((na&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Tt.lanes|=h,sa|=h}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,$n(n,e.memoizedState)||(qr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Tt.lanes|=i,sa|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Fg(t){var e=Cn(),r=e.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);$n(i,e.memoizedState)||(qr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function BT(){}function UT(t,e){var r=Tt,n=Cn(),s=e(),i=!$n(n.memoizedState,s);if(i&&(n.memoizedState=s,qr=!0),n=n.queue,ox($T.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||tr!==null&&tr.memoizedState.tag&1){if(r.flags|=2048,Lu(9,GT.bind(null,r,n,s,e),void 0,null),rr===null)throw Error(ce(349));na&30||qT(r,e,s)}return s}function qT(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function GT(t,e,r,n){e.value=r,e.getSnapshot=n,zT(e)&&WT(t)}function $T(t,e,r){return r(function(){zT(e)&&WT(t)})}function zT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!$n(t,r)}catch{return!0}}function WT(t){var e=$s(t,1);e!==null&&Un(e,t,1,-1)}function t1(t){var e=Zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:t},e.queue=t,t=t.dispatch=DM.bind(null,Tt,t),[e.memoizedState,t]}function Lu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function QT(){return Cn().memoizedState}function df(t,e,r,n){var s=Zn();Tt.flags|=t,s.memoizedState=Lu(1|e,r,void 0,n===void 0?null:n)}function Km(t,e,r,n){var s=Cn();n=n===void 0?null:n;var i=void 0;if(Wt!==null){var o=Wt.memoizedState;if(i=o.destroy,n!==null&&nx(n,o.deps)){s.memoizedState=Lu(e,r,i,n);return}}Tt.flags|=t,s.memoizedState=Lu(1|e,r,i,n)}function r1(t,e){return df(8390656,8,t,e)}function ox(t,e){return Km(2048,8,t,e)}function HT(t,e){return Km(4,2,t,e)}function YT(t,e){return Km(4,4,t,e)}function KT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JT(t,e,r){return r=r!=null?r.concat([t]):null,Km(4,4,KT.bind(null,e,t),r)}function ax(){}function XT(t,e){var r=Cn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function ZT(t,e){var r=Cn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function eA(t,e,r){return na&21?($n(r,e)||(r=iT(),Tt.lanes|=r,sa|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qr=!0),t.memoizedState=r)}function jM(t,e){var r=it;it=r!==0&&4>r?r:4,t(!0);var n=Og.transition;Og.transition={};try{t(!1),e()}finally{it=r,Og.transition=n}}function tA(){return Cn().memoizedState}function MM(t,e,r){var n=Gi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},rA(t))nA(e,r);else if(r=LT(t,e,r,n),r!==null){var s=Mr();Un(r,t,n,s),sA(r,e,n)}}function DM(t,e,r){var n=Gi(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(rA(t))nA(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,$n(l,o)){var c=e.interleaved;c===null?(s.next=s,Xv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=LT(t,e,s,n),r!==null&&(s=Mr(),Un(r,t,n,s),sA(r,e,n))}}function rA(t){var e=t.alternate;return t===Tt||e!==null&&e===Tt}function nA(t,e){lu=nm=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function sA(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Fv(t,r)}}var sm={readContext:En,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},OM={readContext:En,useCallback:function(t,e){return Zn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:r1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,df(4194308,4,KT.bind(null,e,t),r)},useLayoutEffect:function(t,e){return df(4194308,4,t,e)},useInsertionEffect:function(t,e){return df(4,2,t,e)},useMemo:function(t,e){var r=Zn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Zn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=MM.bind(null,Tt,t),[n.memoizedState,t]},useRef:function(t){var e=Zn();return t={current:t},e.memoizedState=t},useState:t1,useDebugValue:ax,useDeferredValue:function(t){return Zn().memoizedState=t},useTransition:function(){var t=t1(!1),e=t[0];return t=jM.bind(null,t[1]),Zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Tt,s=Zn();if(Ct){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=e(),rr===null)throw Error(ce(349));na&30||qT(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,r1($T.bind(null,n,i,t),[t]),n.flags|=2048,Lu(9,GT.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Zn(),e=rr.identifierPrefix;if(Ct){var r=Os,n=Ds;r=(n&~(1<<32-Bn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Du++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=kM++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LM={readContext:En,useCallback:XT,useContext:En,useEffect:ox,useImperativeHandle:JT,useInsertionEffect:HT,useLayoutEffect:YT,useMemo:ZT,useReducer:Lg,useRef:QT,useState:function(){return Lg(Ou)},useDebugValue:ax,useDeferredValue:function(t){var e=Cn();return eA(e,Wt.memoizedState,t)},useTransition:function(){var t=Lg(Ou)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:BT,useSyncExternalStore:UT,useId:tA,unstable_isNewReconciler:!1},FM={readContext:En,useCallback:XT,useContext:En,useEffect:ox,useImperativeHandle:JT,useInsertionEffect:HT,useLayoutEffect:YT,useMemo:ZT,useReducer:Fg,useRef:QT,useState:function(){return Fg(Ou)},useDebugValue:ax,useDeferredValue:function(t){var e=Cn();return Wt===null?e.memoizedState=t:eA(e,Wt.memoizedState,t)},useTransition:function(){var t=Fg(Ou)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:BT,useSyncExternalStore:UT,useId:tA,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=At({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function H0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:At({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Jm={isMounted:function(t){return(t=t._reactInternals)?ya(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Mr(),s=Gi(t),i=Vs(n,s);i.payload=e,r!=null&&(i.callback=r),e=Ui(t,i,s),e!==null&&(Un(e,t,s,n),cf(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Mr(),s=Gi(t),i=Vs(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Ui(t,i,s),e!==null&&(Un(e,t,s,n),cf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Mr(),n=Gi(t),s=Vs(r,n);s.tag=2,e!=null&&(s.callback=e),e=Ui(t,s,n),e!==null&&(Un(e,t,n,r),cf(e,t,n))}};function n1(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Iu(r,n)||!Iu(s,i):!0}function iA(t,e,r){var n=!1,s=Xi,i=e.contextType;return typeof i=="object"&&i!==null?i=En(i):(s=$r(e)?ta:br.current,n=e.contextTypes,i=(n=n!=null)?Ol(t,s):Xi),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function s1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Jm.enqueueReplaceState(e,e.state,null)}function Y0(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Zv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=En(i):(i=$r(e)?ta:br.current,s.context=Ol(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(H0(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jm.enqueueReplaceState(s,s.state,null),tm(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Bl(t,e){try{var r="",n=e;do r+=h4(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Vg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function K0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var VM=typeof WeakMap=="function"?WeakMap:Map;function oA(t,e,r){r=Vs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){om||(om=!0,oy=n),K0(t,e)},r}function aA(t,e,r){r=Vs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){K0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){K0(t,e),typeof n!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function i1(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new VM;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=ZM.bind(null,t,e,r),e.then(t,t))}function o1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function a1(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Vs(-1,1),e.tag=2,Ui(r,e,1))),r.lanes|=1),t)}var BM=Zs.ReactCurrentOwner,qr=!1;function Pr(t,e,r,n){e.child=t===null?OT(e,null,r,n):Fl(e,t.child,r,n)}function l1(t,e,r,n,s){r=r.render;var i=e.ref;return gl(e,s),n=sx(t,e,r,n,i,s),r=ix(),t!==null&&!qr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zs(t,e,s)):(Ct&&r&&Wv(e),e.flags|=1,Pr(t,e,n,s),e.child)}function c1(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!px(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,lA(t,e,i,n,s)):(t=pf(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Iu,r(o,n)&&t.ref===e.ref)return zs(t,e,s)}return e.flags|=1,t=$i(i,n),t.ref=e.ref,t.return=e,e.child=t}function lA(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Iu(i,n)&&t.ref===e.ref)if(qr=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(qr=!0);else return e.lanes=t.lanes,zs(t,e,s)}return J0(t,e,r,n,s)}function cA(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(cl,Xr),Xr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dt(cl,Xr),Xr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,dt(cl,Xr),Xr|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,dt(cl,Xr),Xr|=n;return Pr(t,e,s,r),e.child}function uA(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function J0(t,e,r,n,s){var i=$r(r)?ta:br.current;return i=Ol(e,i),gl(e,s),r=sx(t,e,r,n,i,s),n=ix(),t!==null&&!qr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zs(t,e,s)):(Ct&&n&&Wv(e),e.flags|=1,Pr(t,e,r,s),e.child)}function u1(t,e,r,n,s){if($r(r)){var i=!0;Kf(e)}else i=!1;if(gl(e,s),e.stateNode===null)hf(t,e),iA(e,r,n),Y0(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=En(u):(u=$r(r)?ta:br.current,u=Ol(e,u));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&s1(e,o,n,u),wi=!1;var m=e.memoizedState;o.state=m,tm(e,n,o,s),c=e.memoizedState,l!==n||m!==c||Gr.current||wi?(typeof h=="function"&&(H0(e,r,h,n),c=e.memoizedState),(l=wi||n1(e,r,l,n,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,FT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Mn(e.type,l),o.props=u,f=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=En(c):(c=$r(r)?ta:br.current,c=Ol(e,c));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&s1(e,o,n,c),wi=!1,m=e.memoizedState,o.state=m,tm(e,n,o,s);var x=e.memoizedState;l!==f||m!==x||Gr.current||wi?(typeof g=="function"&&(H0(e,r,g,n),x=e.memoizedState),(u=wi||n1(e,r,u,n,m,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return X0(t,e,r,n,i,s)}function X0(t,e,r,n,s,i){uA(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Yb(e,r,!1),zs(t,e,i);n=e.stateNode,BM.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Fl(e,t.child,null,i),e.child=Fl(e,null,l,i)):Pr(t,e,l,i),e.memoizedState=n.state,s&&Yb(e,r,!0),e.child}function dA(t){var e=t.stateNode;e.pendingContext?Hb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hb(t,e.context,!1),ex(t,e.containerInfo)}function d1(t,e,r,n,s){return Ll(),Hv(s),e.flags|=256,Pr(t,e,r,n),e.child}var Z0={dehydrated:null,treeContext:null,retryLane:0};function ey(t){return{baseLanes:t,cachePool:null,transitions:null}}function hA(t,e,r){var n=e.pendingProps,s=_t.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),dt(_t,s&1),t===null)return W0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ep(o,n,0,null),t=Yo(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ey(r),e.memoizedState=Z0,t):lx(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return UM(t,e,o,n,l,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=$i(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$i(l,i):(i=Yo(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?ey(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Z0,n}return i=t.child,t=i.sibling,n=$i(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function lx(t,e){return e=ep({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dh(t,e,r,n){return n!==null&&Hv(n),Fl(e,t.child,null,r),t=lx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function UM(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Vg(Error(ce(422))),Dh(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=ep({mode:"visible",children:n.children},s,0,null),i=Yo(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Fl(e,t.child,null,o),e.child.memoizedState=ey(o),e.memoizedState=Z0,i);if(!(e.mode&1))return Dh(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ce(419)),n=Vg(i,n,void 0),Dh(t,e,o,n)}if(l=(o&t.childLanes)!==0,qr||l){if(n=rr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$s(t,s),Un(n,t,s,-1))}return mx(),n=Vg(Error(ce(421))),Dh(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eD.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,tn=Bi(s.nextSibling),nn=e,Ct=!0,Fn=null,t!==null&&(pn[gn++]=Ds,pn[gn++]=Os,pn[gn++]=ra,Ds=t.id,Os=t.overflow,ra=e),e=lx(e,n.children),e.flags|=4096,e)}function h1(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Q0(t.return,e,r)}function Bg(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function fA(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Pr(t,e,n.children,r),n=_t.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&h1(t,r,e);else if(t.tag===19)h1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(dt(_t,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&rm(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Bg(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&rm(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Bg(e,!0,r,null,i);break;case"together":Bg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),sa|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,r=$i(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=$i(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function qM(t,e,r){switch(e.tag){case 3:dA(e),Ll();break;case 5:VT(e);break;case 1:$r(e.type)&&Kf(e);break;case 4:ex(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;dt(Zf,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(dt(_t,_t.current&1),e.flags|=128,null):r&e.child.childLanes?hA(t,e,r):(dt(_t,_t.current&1),t=zs(t,e,r),t!==null?t.sibling:null);dt(_t,_t.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return fA(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),dt(_t,_t.current),n)break;return null;case 22:case 23:return e.lanes=0,cA(t,e,r)}return zs(t,e,r)}var mA,ty,pA,gA;mA=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ty=function(){};pA=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,qo(as.current);var i=null;switch(r){case"input":s=C0(t,s),n=C0(t,n),i=[];break;case"select":s=At({},s,{value:void 0}),n=At({},n,{value:void 0}),i=[];break;case"textarea":s=A0(t,s),n=A0(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Hf)}N0(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Eu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&pt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};gA=function(t,e,r,n){r!==n&&(e.flags|=4)};function Fc(t,e){if(!Ct)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function pr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function GM(t,e,r){var n=e.pendingProps;switch(Qv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(e),null;case 1:return $r(e.type)&&Yf(),pr(e),null;case 3:return n=e.stateNode,Vl(),yt(Gr),yt(br),rx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(jh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(cy(Fn),Fn=null))),ty(t,e),pr(e),null;case 5:tx(e);var s=qo(Mu.current);if(r=e.type,t!==null&&e.stateNode!=null)pA(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ce(166));return pr(e),null}if(t=qo(as.current),jh(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[ss]=e,n[ku]=i,t=(e.mode&1)!==0,r){case"dialog":pt("cancel",n),pt("close",n);break;case"iframe":case"object":case"embed":pt("load",n);break;case"video":case"audio":for(s=0;s<Wc.length;s++)pt(Wc[s],n);break;case"source":pt("error",n);break;case"img":case"image":case"link":pt("error",n),pt("load",n);break;case"details":pt("toggle",n);break;case"input":bb(n,i),pt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},pt("invalid",n);break;case"textarea":Cb(n,i),pt("invalid",n)}N0(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&kh(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&kh(n.textContent,l,t),s=["children",""+l]):Eu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pt("scroll",n)}switch(r){case"input":_h(n),Eb(n,i,!0);break;case"textarea":_h(n),_b(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Hf)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[ss]=e,t[ku]=n,mA(t,e,!1,!1),e.stateNode=t;e:{switch(o=I0(r,n),r){case"dialog":pt("cancel",t),pt("close",t),s=n;break;case"iframe":case"object":case"embed":pt("load",t),s=n;break;case"video":case"audio":for(s=0;s<Wc.length;s++)pt(Wc[s],t);s=n;break;case"source":pt("error",t),s=n;break;case"img":case"image":case"link":pt("error",t),pt("load",t),s=n;break;case"details":pt("toggle",t),s=n;break;case"input":bb(t,n),s=C0(t,n),pt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=At({},n,{value:void 0}),pt("invalid",t);break;case"textarea":Cb(t,n),s=A0(t,n),pt("invalid",t);break;default:s=n}N0(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Q_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&z_(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Cu(t,c):typeof c=="number"&&Cu(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Eu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&pt("scroll",t):c!=null&&kv(t,i,c,o))}switch(r){case"input":_h(t),Eb(t,n,!1);break;case"textarea":_h(t),_b(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ji(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?hl(t,!!n.multiple,i,!1):n.defaultValue!=null&&hl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pr(e),null;case 6:if(t&&e.stateNode!=null)gA(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ce(166));if(r=qo(Mu.current),qo(as.current),jh(e)){if(n=e.stateNode,r=e.memoizedProps,n[ss]=e,(i=n.nodeValue!==r)&&(t=nn,t!==null))switch(t.tag){case 3:kh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kh(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ss]=e,e.stateNode=n}return pr(e),null;case 13:if(yt(_t),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ct&&tn!==null&&e.mode&1&&!(e.flags&128))MT(),Ll(),e.flags|=98560,i=!1;else if(i=jh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[ss]=e}else Ll(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pr(e),i=!1}else Fn!==null&&(cy(Fn),Fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Qt===0&&(Qt=3):mx())),e.updateQueue!==null&&(e.flags|=4),pr(e),null);case 4:return Vl(),ty(t,e),t===null&&Ru(e.stateNode.containerInfo),pr(e),null;case 10:return Jv(e.type._context),pr(e),null;case 17:return $r(e.type)&&Yf(),pr(e),null;case 19:if(yt(_t),i=e.memoizedState,i===null)return pr(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Fc(i,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rm(t),o!==null){for(e.flags|=128,Fc(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return dt(_t,_t.current&1|2),e.child}t=t.sibling}i.tail!==null&&Dt()>Ul&&(e.flags|=128,n=!0,Fc(i,!1),e.lanes=4194304)}else{if(!n)if(t=rm(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Fc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ct)return pr(e),null}else 2*Dt()-i.renderingStartTime>Ul&&r!==1073741824&&(e.flags|=128,n=!0,Fc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Dt(),e.sibling=null,r=_t.current,dt(_t,n?r&1|2:r&1),e):(pr(e),null);case 22:case 23:return fx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Xr&1073741824&&(pr(e),e.subtreeFlags&6&&(e.flags|=8192)):pr(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function $M(t,e){switch(Qv(e),e.tag){case 1:return $r(e.type)&&Yf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vl(),yt(Gr),yt(br),rx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tx(e),null;case 13:if(yt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));Ll()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yt(_t),null;case 4:return Vl(),null;case 10:return Jv(e.type._context),null;case 22:case 23:return fx(),null;case 24:return null;default:return null}}var Oh=!1,xr=!1,zM=typeof WeakSet=="function"?WeakSet:Set,ye=null;function ll(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Pt(t,e,n)}else r.current=null}function ry(t,e,r){try{r()}catch(n){Pt(t,e,n)}}var f1=!1;function WM(t,e){if(V0=zf,t=bT(),zv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===r&&++u===s&&(l=o),m===i&&++h===n&&(c=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(B0={focusedElem:t,selectionRange:r},zf=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,b=x.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?p:Mn(e.type,p),b);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(R){Pt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return x=f1,f1=!1,x}function cu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ry(e,r,i)}s=s.next}while(s!==n)}}function Xm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function ny(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function yA(t){var e=t.alternate;e!==null&&(t.alternate=null,yA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ss],delete e[ku],delete e[G0],delete e[NM],delete e[IM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vA(t){return t.tag===5||t.tag===3||t.tag===4}function m1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sy(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Hf));else if(n!==4&&(t=t.child,t!==null))for(sy(t,e,r),t=t.sibling;t!==null;)sy(t,e,r),t=t.sibling}function iy(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(iy(t,e,r),t=t.sibling;t!==null;)iy(t,e,r),t=t.sibling}var sr=null,Ln=!1;function hi(t,e,r){for(r=r.child;r!==null;)xA(t,e,r),r=r.sibling}function xA(t,e,r){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount($m,r)}catch{}switch(r.tag){case 5:xr||ll(r,e);case 6:var n=sr,s=Ln;sr=null,hi(t,e,r),sr=n,Ln=s,sr!==null&&(Ln?(t=sr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):sr.removeChild(r.stateNode));break;case 18:sr!==null&&(Ln?(t=sr,r=r.stateNode,t.nodeType===8?jg(t.parentNode,r):t.nodeType===1&&jg(t,r),Su(t)):jg(sr,r.stateNode));break;case 4:n=sr,s=Ln,sr=r.stateNode.containerInfo,Ln=!0,hi(t,e,r),sr=n,Ln=s;break;case 0:case 11:case 14:case 15:if(!xr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ry(r,e,o),s=s.next}while(s!==n)}hi(t,e,r);break;case 1:if(!xr&&(ll(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Pt(r,e,l)}hi(t,e,r);break;case 21:hi(t,e,r);break;case 22:r.mode&1?(xr=(n=xr)||r.memoizedState!==null,hi(t,e,r),xr=n):hi(t,e,r);break;default:hi(t,e,r)}}function p1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new zM),e.forEach(function(n){var s=tD.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function kn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:sr=l.stateNode,Ln=!1;break e;case 3:sr=l.stateNode.containerInfo,Ln=!0;break e;case 4:sr=l.stateNode.containerInfo,Ln=!0;break e}l=l.return}if(sr===null)throw Error(ce(160));xA(i,o,s),sr=null,Ln=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Pt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wA(e,t),e=e.sibling}function wA(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),Jn(t),n&4){try{cu(3,t,t.return),Xm(3,t)}catch(p){Pt(t,t.return,p)}try{cu(5,t,t.return)}catch(p){Pt(t,t.return,p)}}break;case 1:kn(e,t),Jn(t),n&512&&r!==null&&ll(r,r.return);break;case 5:if(kn(e,t),Jn(t),n&512&&r!==null&&ll(r,r.return),t.flags&32){var s=t.stateNode;try{Cu(s,"")}catch(p){Pt(t,t.return,p)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&q_(s,i),I0(l,o);var u=I0(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?Q_(s,f):h==="dangerouslySetInnerHTML"?z_(s,f):h==="children"?Cu(s,f):kv(s,h,f,u)}switch(l){case"input":_0(s,i);break;case"textarea":G_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?hl(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?hl(s,!!i.multiple,i.defaultValue,!0):hl(s,!!i.multiple,i.multiple?[]:"",!1))}s[ku]=i}catch(p){Pt(t,t.return,p)}}break;case 6:if(kn(e,t),Jn(t),n&4){if(t.stateNode===null)throw Error(ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){Pt(t,t.return,p)}}break;case 3:if(kn(e,t),Jn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Su(e.containerInfo)}catch(p){Pt(t,t.return,p)}break;case 4:kn(e,t),Jn(t);break;case 13:kn(e,t),Jn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dx=Dt())),n&4&&p1(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(xr=(u=xr)||h,kn(e,t),xr=u):kn(e,t),Jn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ye=t,h=t.child;h!==null;){for(f=ye=h;ye!==null;){switch(m=ye,g=m.child,m.tag){case 0:case 11:case 14:case 15:cu(4,m,m.return);break;case 1:ll(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(p){Pt(n,r,p)}}break;case 5:ll(m,m.return);break;case 22:if(m.memoizedState!==null){y1(f);continue}}g!==null?(g.return=m,ye=g):y1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=W_("display",o))}catch(p){Pt(t,t.return,p)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Pt(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kn(e,t),Jn(t),n&4&&p1(t);break;case 21:break;default:kn(e,t),Jn(t)}}function Jn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(vA(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Cu(s,""),n.flags&=-33);var i=m1(t);iy(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=m1(t);sy(t,l,o);break;default:throw Error(ce(161))}}catch(c){Pt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QM(t,e,r){ye=t,bA(t)}function bA(t,e,r){for(var n=(t.mode&1)!==0;ye!==null;){var s=ye,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Oh;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||xr;l=Oh;var u=xr;if(Oh=o,(xr=c)&&!u)for(ye=s;ye!==null;)o=ye,c=o.child,o.tag===22&&o.memoizedState!==null?v1(s):c!==null?(c.return=o,ye=c):v1(s);for(;i!==null;)ye=i,bA(i),i=i.sibling;ye=s,Oh=l,xr=u}g1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ye=i):g1(t)}}function g1(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xr||Xm(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!xr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Mn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&e1(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}e1(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Su(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}xr||e.flags&512&&ny(e)}catch(m){Pt(e,e.return,m)}}if(e===t){ye=null;break}if(r=e.sibling,r!==null){r.return=e.return,ye=r;break}ye=e.return}}function y1(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ye=r;break}ye=e.return}}function v1(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Xm(4,e)}catch(c){Pt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){Pt(e,s,c)}}var i=e.return;try{ny(e)}catch(c){Pt(e,i,c)}break;case 5:var o=e.return;try{ny(e)}catch(c){Pt(e,o,c)}}}catch(c){Pt(e,e.return,c)}if(e===t){ye=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ye=l;break}ye=e.return}}var HM=Math.ceil,im=Zs.ReactCurrentDispatcher,cx=Zs.ReactCurrentOwner,wn=Zs.ReactCurrentBatchConfig,Ke=0,rr=null,Bt=null,ar=0,Xr=0,cl=po(0),Qt=0,Fu=null,sa=0,Zm=0,ux=0,uu=null,Br=null,dx=0,Ul=1/0,js=null,om=!1,oy=null,qi=null,Lh=!1,Mi=null,am=0,du=0,ay=null,ff=-1,mf=0;function Mr(){return Ke&6?Dt():ff!==-1?ff:ff=Dt()}function Gi(t){return t.mode&1?Ke&2&&ar!==0?ar&-ar:PM.transition!==null?(mf===0&&(mf=iT()),mf):(t=it,t!==0||(t=window.event,t=t===void 0?16:hT(t.type)),t):1}function Un(t,e,r,n){if(50<du)throw du=0,ay=null,Error(ce(185));dd(t,r,n),(!(Ke&2)||t!==rr)&&(t===rr&&(!(Ke&2)&&(Zm|=r),Qt===4&&Ci(t,ar)),zr(t,n),r===1&&Ke===0&&!(e.mode&1)&&(Ul=Dt()+500,Ym&&go()))}function zr(t,e){var r=t.callbackNode;P4(t,e);var n=$f(t,t===rr?ar:0);if(n===0)r!==null&&Sb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Sb(r),e===1)t.tag===0?RM(x1.bind(null,t)):PT(x1.bind(null,t)),AM(function(){!(Ke&6)&&go()}),r=null;else{switch(oT(n)){case 1:r=Lv;break;case 4:r=nT;break;case 16:r=Gf;break;case 536870912:r=sT;break;default:r=Gf}r=IA(r,EA.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function EA(t,e){if(ff=-1,mf=0,Ke&6)throw Error(ce(327));var r=t.callbackNode;if(yl()&&t.callbackNode!==r)return null;var n=$f(t,t===rr?ar:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=lm(t,n);else{e=n;var s=Ke;Ke|=2;var i=_A();(rr!==t||ar!==e)&&(js=null,Ul=Dt()+500,Ho(t,e));do try{JM();break}catch(l){CA(t,l)}while(!0);Kv(),im.current=i,Ke=s,Bt!==null?e=0:(rr=null,ar=0,e=Qt)}if(e!==0){if(e===2&&(s=M0(t),s!==0&&(n=s,e=ly(t,s))),e===1)throw r=Fu,Ho(t,0),Ci(t,n),zr(t,Dt()),r;if(e===6)Ci(t,n);else{if(s=t.current.alternate,!(n&30)&&!YM(s)&&(e=lm(t,n),e===2&&(i=M0(t),i!==0&&(n=i,e=ly(t,i))),e===1))throw r=Fu,Ho(t,0),Ci(t,n),zr(t,Dt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ce(345));case 2:Fo(t,Br,js);break;case 3:if(Ci(t,n),(n&130023424)===n&&(e=dx+500-Dt(),10<e)){if($f(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Mr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=q0(Fo.bind(null,t,Br,js),e);break}Fo(t,Br,js);break;case 4:if(Ci(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Bn(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=Dt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*HM(n/1960))-n,10<n){t.timeoutHandle=q0(Fo.bind(null,t,Br,js),n);break}Fo(t,Br,js);break;case 5:Fo(t,Br,js);break;default:throw Error(ce(329))}}}return zr(t,Dt()),t.callbackNode===r?EA.bind(null,t):null}function ly(t,e){var r=uu;return t.current.memoizedState.isDehydrated&&(Ho(t,e).flags|=256),t=lm(t,e),t!==2&&(e=Br,Br=r,e!==null&&cy(e)),t}function cy(t){Br===null?Br=t:Br.push.apply(Br,t)}function YM(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!$n(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ci(t,e){for(e&=~ux,e&=~Zm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Bn(e),n=1<<r;t[r]=-1,e&=~n}}function x1(t){if(Ke&6)throw Error(ce(327));yl();var e=$f(t,0);if(!(e&1))return zr(t,Dt()),null;var r=lm(t,e);if(t.tag!==0&&r===2){var n=M0(t);n!==0&&(e=n,r=ly(t,n))}if(r===1)throw r=Fu,Ho(t,0),Ci(t,e),zr(t,Dt()),r;if(r===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fo(t,Br,js),zr(t,Dt()),null}function hx(t,e){var r=Ke;Ke|=1;try{return t(e)}finally{Ke=r,Ke===0&&(Ul=Dt()+500,Ym&&go())}}function ia(t){Mi!==null&&Mi.tag===0&&!(Ke&6)&&yl();var e=Ke;Ke|=1;var r=wn.transition,n=it;try{if(wn.transition=null,it=1,t)return t()}finally{it=n,wn.transition=r,Ke=e,!(Ke&6)&&go()}}function fx(){Xr=cl.current,yt(cl)}function Ho(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,TM(r)),Bt!==null)for(r=Bt.return;r!==null;){var n=r;switch(Qv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Yf();break;case 3:Vl(),yt(Gr),yt(br),rx();break;case 5:tx(n);break;case 4:Vl();break;case 13:yt(_t);break;case 19:yt(_t);break;case 10:Jv(n.type._context);break;case 22:case 23:fx()}r=r.return}if(rr=t,Bt=t=$i(t.current,null),ar=Xr=e,Qt=0,Fu=null,ux=Zm=sa=0,Br=uu=null,Uo!==null){for(e=0;e<Uo.length;e++)if(r=Uo[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Uo=null}return t}function CA(t,e){do{var r=Bt;try{if(Kv(),uf.current=sm,nm){for(var n=Tt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}nm=!1}if(na=0,tr=Wt=Tt=null,lu=!1,Du=0,cx.current=null,r===null||r.return===null){Qt=1,Fu=e,Bt=null;break}e:{var i=t,o=r.return,l=r,c=e;if(e=ar,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=o1(o);if(g!==null){g.flags&=-257,a1(g,o,l,i,e),g.mode&1&&i1(i,u,e),e=g,c=u;var x=e.updateQueue;if(x===null){var p=new Set;p.add(c),e.updateQueue=p}else x.add(c);break e}else{if(!(e&1)){i1(i,u,e),mx();break e}c=Error(ce(426))}}else if(Ct&&l.mode&1){var b=o1(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),a1(b,o,l,i,e),Hv(Bl(c,l));break e}}i=c=Bl(c,l),Qt!==4&&(Qt=2),uu===null?uu=[i]:uu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=oA(i,c,e);Zb(i,_);break e;case 1:l=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(qi===null||!qi.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=aA(i,l,e);Zb(i,R);break e}}i=i.return}while(i!==null)}AA(r)}catch(L){e=L,Bt===r&&r!==null&&(Bt=r=r.return);continue}break}while(!0)}function _A(){var t=im.current;return im.current=sm,t===null?sm:t}function mx(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),rr===null||!(sa&268435455)&&!(Zm&268435455)||Ci(rr,ar)}function lm(t,e){var r=Ke;Ke|=2;var n=_A();(rr!==t||ar!==e)&&(js=null,Ho(t,e));do try{KM();break}catch(s){CA(t,s)}while(!0);if(Kv(),Ke=r,im.current=n,Bt!==null)throw Error(ce(261));return rr=null,ar=0,Qt}function KM(){for(;Bt!==null;)TA(Bt)}function JM(){for(;Bt!==null&&!E4();)TA(Bt)}function TA(t){var e=NA(t.alternate,t,Xr);t.memoizedProps=t.pendingProps,e===null?AA(t):Bt=e,cx.current=null}function AA(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=$M(r,e),r!==null){r.flags&=32767,Bt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,Bt=null;return}}else if(r=GM(r,e,Xr),r!==null){Bt=r;return}if(e=e.sibling,e!==null){Bt=e;return}Bt=e=t}while(e!==null);Qt===0&&(Qt=5)}function Fo(t,e,r){var n=it,s=wn.transition;try{wn.transition=null,it=1,XM(t,e,r,n)}finally{wn.transition=s,it=n}return null}function XM(t,e,r,n){do yl();while(Mi!==null);if(Ke&6)throw Error(ce(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(k4(t,i),t===rr&&(Bt=rr=null,ar=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Lh||(Lh=!0,IA(Gf,function(){return yl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=wn.transition,wn.transition=null;var o=it;it=1;var l=Ke;Ke|=4,cx.current=null,WM(t,r),wA(r,t),vM(B0),zf=!!V0,B0=V0=null,t.current=r,QM(r),C4(),Ke=l,it=o,wn.transition=i}else t.current=r;if(Lh&&(Lh=!1,Mi=t,am=s),i=t.pendingLanes,i===0&&(qi=null),A4(r.stateNode),zr(t,Dt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(om)throw om=!1,t=oy,oy=null,t;return am&1&&t.tag!==0&&yl(),i=t.pendingLanes,i&1?t===ay?du++:(du=0,ay=t):du=0,go(),null}function yl(){if(Mi!==null){var t=oT(am),e=wn.transition,r=it;try{if(wn.transition=null,it=16>t?16:t,Mi===null)var n=!1;else{if(t=Mi,Mi=null,am=0,Ke&6)throw Error(ce(331));var s=Ke;for(Ke|=4,ye=t.current;ye!==null;){var i=ye,o=i.child;if(ye.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ye=u;ye!==null;){var h=ye;switch(h.tag){case 0:case 11:case 15:cu(8,h,i)}var f=h.child;if(f!==null)f.return=h,ye=f;else for(;ye!==null;){h=ye;var m=h.sibling,g=h.return;if(yA(h),h===u){ye=null;break}if(m!==null){m.return=g,ye=m;break}ye=g}}}var x=i.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ye=o;else e:for(;ye!==null;){if(i=ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:cu(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ye=_;break e}ye=i.return}}var w=t.current;for(ye=w;ye!==null;){o=ye;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ye=C;else e:for(o=w;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xm(9,l)}}catch(L){Pt(l,l.return,L)}if(l===o){ye=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ye=R;break e}ye=l.return}}if(Ke=s,go(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot($m,t)}catch{}n=!0}return n}finally{it=r,wn.transition=e}}return!1}function w1(t,e,r){e=Bl(r,e),e=oA(t,e,1),t=Ui(t,e,1),e=Mr(),t!==null&&(dd(t,1,e),zr(t,e))}function Pt(t,e,r){if(t.tag===3)w1(t,t,r);else for(;e!==null;){if(e.tag===3){w1(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qi===null||!qi.has(n))){t=Bl(r,t),t=aA(e,t,1),e=Ui(e,t,1),t=Mr(),e!==null&&(dd(e,1,t),zr(e,t));break}}e=e.return}}function ZM(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Mr(),t.pingedLanes|=t.suspendedLanes&r,rr===t&&(ar&r)===r&&(Qt===4||Qt===3&&(ar&130023424)===ar&&500>Dt()-dx?Ho(t,0):ux|=r),zr(t,e)}function SA(t,e){e===0&&(t.mode&1?(e=Sh,Sh<<=1,!(Sh&130023424)&&(Sh=4194304)):e=1);var r=Mr();t=$s(t,e),t!==null&&(dd(t,e,r),zr(t,r))}function eD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),SA(t,r)}function tD(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(e),SA(t,r)}var NA;NA=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gr.current)qr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return qr=!1,qM(t,e,r);qr=!!(t.flags&131072)}else qr=!1,Ct&&e.flags&1048576&&kT(e,Xf,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;hf(t,e),t=e.pendingProps;var s=Ol(e,br.current);gl(e,r),s=sx(null,e,n,t,s,r);var i=ix();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$r(n)?(i=!0,Kf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zv(e),s.updater=Jm,e.stateNode=s,s._reactInternals=e,Y0(e,n,t,r),e=X0(null,e,n,!0,i,r)):(e.tag=0,Ct&&i&&Wv(e),Pr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(hf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=nD(n),t=Mn(n,t),s){case 0:e=J0(null,e,n,t,r);break e;case 1:e=u1(null,e,n,t,r);break e;case 11:e=l1(null,e,n,t,r);break e;case 14:e=c1(null,e,n,Mn(n.type,t),r);break e}throw Error(ce(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),J0(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),u1(t,e,n,s,r);case 3:e:{if(dA(e),t===null)throw Error(ce(387));n=e.pendingProps,i=e.memoizedState,s=i.element,FT(t,e),tm(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Bl(Error(ce(423)),e),e=d1(t,e,n,r,s);break e}else if(n!==s){s=Bl(Error(ce(424)),e),e=d1(t,e,n,r,s);break e}else for(tn=Bi(e.stateNode.containerInfo.firstChild),nn=e,Ct=!0,Fn=null,r=OT(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ll(),n===s){e=zs(t,e,r);break e}Pr(t,e,n,r)}e=e.child}return e;case 5:return VT(e),t===null&&W0(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,U0(n,s)?o=null:i!==null&&U0(n,i)&&(e.flags|=32),uA(t,e),Pr(t,e,o,r),e.child;case 6:return t===null&&W0(e),null;case 13:return hA(t,e,r);case 4:return ex(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Fl(e,null,n,r):Pr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),l1(t,e,n,s,r);case 7:return Pr(t,e,e.pendingProps,r),e.child;case 8:return Pr(t,e,e.pendingProps.children,r),e.child;case 12:return Pr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,dt(Zf,n._currentValue),n._currentValue=o,i!==null)if($n(i.value,o)){if(i.children===s.children&&!Gr.current){e=zs(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Vs(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Q0(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ce(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Q0(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,gl(e,r),s=En(s),n=n(s),e.flags|=1,Pr(t,e,n,r),e.child;case 14:return n=e.type,s=Mn(n,e.pendingProps),s=Mn(n.type,s),c1(t,e,n,s,r);case 15:return lA(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),hf(t,e),e.tag=1,$r(n)?(t=!0,Kf(e)):t=!1,gl(e,r),iA(e,n,s),Y0(e,n,s,r),X0(null,e,n,!0,t,r);case 19:return fA(t,e,r);case 22:return cA(t,e,r)}throw Error(ce(156,e.tag))};function IA(t,e){return rT(t,e)}function rD(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,r,n){return new rD(t,e,r,n)}function px(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nD(t){if(typeof t=="function")return px(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mv)return 11;if(t===Dv)return 14}return 2}function $i(t,e){var r=t.alternate;return r===null?(r=xn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function pf(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")px(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Za:return Yo(r.children,s,i,e);case jv:o=8,s|=8;break;case x0:return t=xn(12,r,e,s|2),t.elementType=x0,t.lanes=i,t;case w0:return t=xn(13,r,e,s),t.elementType=w0,t.lanes=i,t;case b0:return t=xn(19,r,e,s),t.elementType=b0,t.lanes=i,t;case V_:return ep(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L_:o=10;break e;case F_:o=9;break e;case Mv:o=11;break e;case Dv:o=14;break e;case xi:o=16,n=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=xn(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Yo(t,e,r,n){return t=xn(7,t,n,e),t.lanes=r,t}function ep(t,e,r,n){return t=xn(22,t,n,e),t.elementType=V_,t.lanes=r,t.stateNode={isHidden:!1},t}function Ug(t,e,r){return t=xn(6,t,null,e),t.lanes=r,t}function qg(t,e,r){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sD(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eg(0),this.expirationTimes=Eg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gx(t,e,r,n,s,i,o,l,c){return t=new sD(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=xn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zv(i),t}function iD(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xa,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function RA(t){if(!t)return Xi;t=t._reactInternals;e:{if(ya(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var r=t.type;if($r(r))return RT(t,r,e)}return e}function PA(t,e,r,n,s,i,o,l,c){return t=gx(r,n,!0,t,s,i,o,l,c),t.context=RA(null),r=t.current,n=Mr(),s=Gi(r),i=Vs(n,s),i.callback=e??null,Ui(r,i,s),t.current.lanes=s,dd(t,s,n),zr(t,n),t}function tp(t,e,r,n){var s=e.current,i=Mr(),o=Gi(s);return r=RA(r),e.context===null?e.context=r:e.pendingContext=r,e=Vs(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ui(s,e,o),t!==null&&(Un(t,s,o,i),cf(t,s,o)),o}function cm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function b1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function yx(t,e){b1(t,e),(t=t.alternate)&&b1(t,e)}function oD(){return null}var kA=typeof reportError=="function"?reportError:function(t){console.error(t)};function vx(t){this._internalRoot=t}rp.prototype.render=vx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));tp(t,e,null,null)};rp.prototype.unmount=vx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ia(function(){tp(null,t,null,null)}),e[Gs]=null}};function rp(t){this._internalRoot=t}rp.prototype.unstable_scheduleHydration=function(t){if(t){var e=cT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ei.length&&e!==0&&e<Ei[r].priority;r++);Ei.splice(r,0,t),r===0&&dT(t)}};function xx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function np(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function E1(){}function aD(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=cm(o);i.call(u)}}var o=PA(e,n,t,0,null,!1,!1,"",E1);return t._reactRootContainer=o,t[Gs]=o.current,Ru(t.nodeType===8?t.parentNode:t),ia(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=cm(c);l.call(u)}}var c=gx(t,0,!1,null,null,!1,!1,"",E1);return t._reactRootContainer=c,t[Gs]=c.current,Ru(t.nodeType===8?t.parentNode:t),ia(function(){tp(e,c,r,n)}),c}function sp(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=cm(o);l.call(c)}}tp(e,o,t,s)}else o=aD(r,e,t,s,n);return cm(o)}aT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=zc(e.pendingLanes);r!==0&&(Fv(e,r|1),zr(e,Dt()),!(Ke&6)&&(Ul=Dt()+500,go()))}break;case 13:ia(function(){var n=$s(t,1);if(n!==null){var s=Mr();Un(n,t,1,s)}}),yx(t,1)}};Vv=function(t){if(t.tag===13){var e=$s(t,134217728);if(e!==null){var r=Mr();Un(e,t,134217728,r)}yx(t,134217728)}};lT=function(t){if(t.tag===13){var e=Gi(t),r=$s(t,e);if(r!==null){var n=Mr();Un(r,t,e,n)}yx(t,e)}};cT=function(){return it};uT=function(t,e){var r=it;try{return it=t,e()}finally{it=r}};P0=function(t,e,r){switch(e){case"input":if(_0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Hm(n);if(!s)throw Error(ce(90));U_(n),_0(n,s)}}}break;case"textarea":G_(t,r);break;case"select":e=r.value,e!=null&&hl(t,!!r.multiple,e,!1)}};K_=hx;J_=ia;var lD={usingClientEntryPoint:!1,Events:[fd,nl,Hm,H_,Y_,hx]},Vc={findFiberByHostInstance:Bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cD={bundleType:Vc.bundleType,version:Vc.version,rendererPackageName:Vc.rendererPackageName,rendererConfig:Vc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eT(t),t===null?null:t.stateNode},findFiberByHostInstance:Vc.findFiberByHostInstance||oD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{$m=Fh.inject(cD),os=Fh}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lD;ln.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xx(e))throw Error(ce(200));return iD(t,e,null,r)};ln.createRoot=function(t,e){if(!xx(t))throw Error(ce(299));var r=!1,n="",s=kA;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gx(t,1,!1,null,null,r,!1,n,s),t[Gs]=e.current,Ru(t.nodeType===8?t.parentNode:t),new vx(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=eT(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return ia(t)};ln.hydrate=function(t,e,r){if(!np(e))throw Error(ce(200));return sp(null,t,e,!0,r)};ln.hydrateRoot=function(t,e,r){if(!xx(t))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=kA;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=PA(e,null,t,1,r??null,s,!1,i,o),t[Gs]=e.current,Ru(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new rp(e)};ln.render=function(t,e,r){if(!np(e))throw Error(ce(200));return sp(null,t,e,!1,r)};ln.unmountComponentAtNode=function(t){if(!np(t))throw Error(ce(40));return t._reactRootContainer?(ia(function(){sp(null,null,t,!1,function(){t._reactRootContainer=null,t[Gs]=null})}),!0):!1};ln.unstable_batchedUpdates=hx;ln.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!np(r))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return sp(t,e,r,!1,n)};ln.version="18.3.1-next-f1338f8080-20240426";function jA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jA)}catch(t){console.error(t)}}jA(),j_.exports=ln;var va=j_.exports;const MA=Tv(va);var DA,C1=va;DA=C1.createRoot,C1.hydrateRoot;const uD=1,dD=1e6;let Gg=0;function hD(){return Gg=(Gg+1)%Number.MAX_SAFE_INTEGER,Gg.toString()}const $g=new Map,_1=t=>{if($g.has(t))return;const e=setTimeout(()=>{$g.delete(t),hu({type:"REMOVE_TOAST",toastId:t})},dD);$g.set(t,e)},fD=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,uD)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?_1(r):t.toasts.forEach(n=>{_1(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},gf=[];let yf={toasts:[]};function hu(t){yf=fD(yf,t),gf.forEach(e=>{e(yf)})}function ct({...t}){const e=hD(),r=s=>hu({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>hu({type:"DISMISS_TOAST",toastId:e});return hu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function mD(){const[t,e]=y.useState(yf);return y.useEffect(()=>(gf.push(e),()=>{const r=gf.indexOf(e);r>-1&&gf.splice(r,1)}),[t]),{...t,toast:ct,dismiss:r=>hu({type:"DISMISS_TOAST",toastId:r})}}function me(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function pD(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function wx(...t){return e=>t.forEach(r=>pD(r,e))}function ot(...t){return y.useCallback(wx(...t),t)}function gD(t,e=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:m,children:g,...x}=f,p=(m==null?void 0:m[t][c])||l,b=y.useMemo(()=>x,Object.values(x));return a.jsx(p.Provider,{value:b,children:g})}function h(f,m){const g=(m==null?void 0:m[t][c])||l,x=y.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,h]}const s=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,yD(s,...e)]}function yD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var oa=y.forwardRef((t,e)=>{const{children:r,...n}=t,s=y.Children.toArray(r),i=s.find(vD);if(i){const o=i.props.children,l=s.map(c=>c===i?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:c);return a.jsx(uy,{...n,ref:e,children:y.isValidElement(o)?y.cloneElement(o,void 0,l):null})}return a.jsx(uy,{...n,ref:e,children:r})});oa.displayName="Slot";var uy=y.forwardRef((t,e)=>{const{children:r,...n}=t;if(y.isValidElement(r)){const s=wD(r);return y.cloneElement(r,{...xD(n,r.props),ref:e?wx(e,s):s})}return y.Children.count(r)>1?y.Children.only(null):null});uy.displayName="SlotClone";var OA=({children:t})=>a.jsx(a.Fragment,{children:t});function vD(t){return y.isValidElement(t)&&t.type===OA}function xD(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{i(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function wD(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function pd(t){const e=t+"CollectionProvider",[r,n]=gD(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:p}=g,b=K.useRef(null),_=K.useRef(new Map).current;return a.jsx(s,{scope:x,itemMap:_,collectionRef:b,children:p})};o.displayName=e;const l=t+"CollectionSlot",c=K.forwardRef((g,x)=>{const{scope:p,children:b}=g,_=i(l,p),w=ot(x,_.collectionRef);return a.jsx(oa,{ref:w,children:b})});c.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=K.forwardRef((g,x)=>{const{scope:p,children:b,..._}=g,w=K.useRef(null),C=ot(x,w),R=i(u,p);return K.useEffect(()=>(R.itemMap.set(w,{ref:w,..._}),()=>void R.itemMap.delete(w))),a.jsx(oa,{[h]:"",ref:C,children:b})});f.displayName=u;function m(g){const x=i(t+"CollectionConsumer",g);return K.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((R,L)=>_.indexOf(R.ref.current)-_.indexOf(L.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},m,n]}function gd(t,e=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];const u=f=>{var _;const{scope:m,children:g,...x}=f,p=((_=m==null?void 0:m[t])==null?void 0:_[c])||l,b=y.useMemo(()=>x,Object.values(x));return a.jsx(p.Provider,{value:b,children:g})};u.displayName=i+"Provider";function h(f,m){var p;const g=((p=m==null?void 0:m[t])==null?void 0:p[c])||l,x=y.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,bD(s,...e)]}function bD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var ED=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],qe=ED.reduce((t,e)=>{const r=y.forwardRef((n,s)=>{const{asChild:i,...o}=n,l=i?oa:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function bx(t,e){t&&va.flushSync(()=>t.dispatchEvent(e))}function Er(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function CD(t,e=globalThis==null?void 0:globalThis.document){const r=Er(t);y.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var _D="DismissableLayer",dy="dismissableLayer.update",TD="dismissableLayer.pointerDownOutside",AD="dismissableLayer.focusOutside",T1,LA=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yd=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=y.useContext(LA),[h,f]=y.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=y.useState({}),x=ot(e,I=>f(I)),p=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=p.indexOf(b),w=h?p.indexOf(h):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,R=w>=_,L=ND(I=>{const A=I.target,N=[...u.branches].some(P=>P.contains(A));!R||N||(s==null||s(I),o==null||o(I),I.defaultPrevented||l==null||l())},m),V=ID(I=>{const A=I.target;[...u.branches].some(P=>P.contains(A))||(i==null||i(I),o==null||o(I),I.defaultPrevented||l==null||l())},m);return CD(I=>{w===u.layers.size-1&&(n==null||n(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},m),y.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(T1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),A1(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=T1)}},[h,m,r,u]),y.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),A1())},[h,u]),y.useEffect(()=>{const I=()=>g({});return document.addEventListener(dy,I),()=>document.removeEventListener(dy,I)},[]),a.jsx(qe.div,{...c,ref:x,style:{pointerEvents:C?R?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,V.onFocusCapture),onBlurCapture:me(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,L.onPointerDownCapture)})});yd.displayName=_D;var SD="DismissableLayerBranch",FA=y.forwardRef((t,e)=>{const r=y.useContext(LA),n=y.useRef(null),s=ot(e,n);return y.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(qe.div,{...t,ref:s})});FA.displayName=SD;function ND(t,e=globalThis==null?void 0:globalThis.document){const r=Er(t),n=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){VA(TD,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function ID(t,e=globalThis==null?void 0:globalThis.document){const r=Er(t),n=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!n.current&&VA(AD,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function A1(){const t=new CustomEvent(dy);document.dispatchEvent(t)}function VA(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?bx(s,i):s.dispatchEvent(i)}var RD=yd,PD=FA,Cr=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},kD="Portal",ip=y.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,i]=y.useState(!1);Cr(()=>i(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?MA.createPortal(a.jsx(qe.div,{...n,ref:e}),o):null});ip.displayName=kD;function jD(t,e){return y.useReducer((r,n)=>e[r][n]??r,t)}var xa=t=>{const{present:e,children:r}=t,n=MD(e),s=typeof r=="function"?r({present:n.isPresent}):y.Children.only(r),i=ot(n.ref,DD(s));return typeof r=="function"||n.isPresent?y.cloneElement(s,{ref:i}):null};xa.displayName="Presence";function MD(t){const[e,r]=y.useState(),n=y.useRef({}),s=y.useRef(t),i=y.useRef("none"),o=t?"mounted":"unmounted",[l,c]=jD(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Vh(n.current);i.current=l==="mounted"?u:"none"},[l]),Cr(()=>{const u=n.current,h=s.current;if(h!==t){const m=i.current,g=Vh(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Cr(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const p=Vh(n.current).includes(g.animationName);if(g.target===e&&p&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(i.current=Vh(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Vh(t){return(t==null?void 0:t.animationName)||"none"}function DD(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Vu({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,s]=OD({defaultProp:e,onChange:r}),i=t!==void 0,o=i?t:n,l=Er(r),c=y.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function OD({defaultProp:t,onChange:e}){const r=y.useState(t),[n]=r,s=y.useRef(n),i=Er(e);return y.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var LD="VisuallyHidden",vd=y.forwardRef((t,e)=>a.jsx(qe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));vd.displayName=LD;var FD=vd,Ex="ToastProvider",[Cx,VD,BD]=pd("Toast"),[BA,bQ]=gd("Toast",[BD]),[UD,op]=BA(Ex),UA=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=y.useState(null),[u,h]=y.useState(0),f=y.useRef(!1),m=y.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ex}\`. Expected non-empty \`string\`.`),a.jsx(Cx.Provider,{scope:e,children:a.jsx(UD,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:y.useCallback(()=>h(g=>g+1),[]),onToastRemove:y.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};UA.displayName=Ex;var qA="ToastViewport",qD=["F8"],hy="toast.viewportPause",fy="toast.viewportResume",GA=y.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=qD,label:s="Notifications ({hotkey})",...i}=t,o=op(qA,r),l=VD(r),c=y.useRef(null),u=y.useRef(null),h=y.useRef(null),f=y.useRef(null),m=ot(e,f,o.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;y.useEffect(()=>{const b=_=>{var C;n.length!==0&&n.every(R=>_[R]||_.code===R)&&((C=f.current)==null||C.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),y.useEffect(()=>{const b=c.current,_=f.current;if(x&&b&&_){const w=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent(hy);_.dispatchEvent(V),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(fy);_.dispatchEvent(V),o.isClosePausedRef.current=!1}},R=V=>{!b.contains(V.relatedTarget)&&C()},L=()=>{b.contains(document.activeElement)||C()};return b.addEventListener("focusin",w),b.addEventListener("focusout",R),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",L),window.addEventListener("blur",w),window.addEventListener("focus",C),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",R),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",L),window.removeEventListener("blur",w),window.removeEventListener("focus",C)}}},[x,o.isClosePausedRef]);const p=y.useCallback(({tabbingDirection:b})=>{const w=l().map(C=>{const R=C.ref.current,L=[R,...tO(R)];return b==="forwards"?L:L.reverse()});return(b==="forwards"?w.reverse():w).flat()},[l]);return y.useEffect(()=>{const b=f.current;if(b){const _=w=>{var L,V,I;const C=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!C){const A=document.activeElement,N=w.shiftKey;if(w.target===b&&N){(L=u.current)==null||L.focus();return}const O=p({tabbingDirection:N?"backwards":"forwards"}),j=O.findIndex($=>$===A);zg(O.slice(j+1))?w.preventDefault():N?(V=u.current)==null||V.focus():(I=h.current)==null||I.focus()}};return b.addEventListener("keydown",_),()=>b.removeEventListener("keydown",_)}},[l,p]),a.jsxs(PD,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&a.jsx(my,{ref:u,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"forwards"});zg(b)}}),a.jsx(Cx.Slot,{scope:r,children:a.jsx(qe.ol,{tabIndex:-1,...i,ref:m})}),x&&a.jsx(my,{ref:h,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"backwards"});zg(b)}})]})});GA.displayName=qA;var $A="ToastFocusProxy",my=y.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,i=op($A,r);return a.jsx(vd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});my.displayName=$A;var ap="Toast",GD="toast.swipeStart",$D="toast.swipeMove",zD="toast.swipeCancel",WD="toast.swipeEnd",zA=y.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=Vu({prop:n,defaultProp:s,onChange:i});return a.jsx(xa,{present:r||l,children:a.jsx(YD,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Er(t.onPause),onResume:Er(t.onResume),onSwipeStart:me(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});zA.displayName=ap;var[QD,HD]=BA(ap,{onClose(){}}),YD=y.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:g,...x}=t,p=op(ap,r),[b,_]=y.useState(null),w=ot(e,$=>_($)),C=y.useRef(null),R=y.useRef(null),L=s||p.duration,V=y.useRef(0),I=y.useRef(L),A=y.useRef(0),{onToastAdd:N,onToastRemove:P}=p,D=Er(()=>{var Y;(b==null?void 0:b.contains(document.activeElement))&&((Y=p.viewport)==null||Y.focus()),o()}),O=y.useCallback($=>{!$||$===1/0||(window.clearTimeout(A.current),V.current=new Date().getTime(),A.current=window.setTimeout(D,$))},[D]);y.useEffect(()=>{const $=p.viewport;if($){const Y=()=>{O(I.current),u==null||u()},J=()=>{const se=new Date().getTime()-V.current;I.current=I.current-se,window.clearTimeout(A.current),c==null||c()};return $.addEventListener(hy,J),$.addEventListener(fy,Y),()=>{$.removeEventListener(hy,J),$.removeEventListener(fy,Y)}}},[p.viewport,L,c,u,O]),y.useEffect(()=>{i&&!p.isClosePausedRef.current&&O(L)},[i,L,p.isClosePausedRef,O]),y.useEffect(()=>(N(),()=>P()),[N,P]);const j=y.useMemo(()=>b?XA(b):null,[b]);return p.viewport?a.jsxs(a.Fragment,{children:[j&&a.jsx(KD,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),a.jsx(QD,{scope:r,onClose:D,children:va.createPortal(a.jsx(Cx.ItemSlot,{scope:r,children:a.jsx(RD,{asChild:!0,onEscapeKeyDown:me(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||D(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...x,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:me(t.onPointerDown,$=>{$.button===0&&(C.current={x:$.clientX,y:$.clientY})}),onPointerMove:me(t.onPointerMove,$=>{if(!C.current)return;const Y=$.clientX-C.current.x,J=$.clientY-C.current.y,se=!!R.current,G=["left","right"].includes(p.swipeDirection),W=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,ie=G?W(0,Y):0,ne=G?0:W(0,J),U=$.pointerType==="touch"?10:2,le={x:ie,y:ne},_e={originalEvent:$,delta:le};se?(R.current=le,Bh($D,f,_e,{discrete:!1})):S1(le,p.swipeDirection,U)?(R.current=le,Bh(GD,h,_e,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(Y)>U||Math.abs(J)>U)&&(C.current=null)}),onPointerUp:me(t.onPointerUp,$=>{const Y=R.current,J=$.target;if(J.hasPointerCapture($.pointerId)&&J.releasePointerCapture($.pointerId),R.current=null,C.current=null,Y){const se=$.currentTarget,G={originalEvent:$,delta:Y};S1(Y,p.swipeDirection,p.swipeThreshold)?Bh(WD,g,G,{discrete:!0}):Bh(zD,m,G,{discrete:!0}),se.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),KD=t=>{const{__scopeToast:e,children:r,...n}=t,s=op(ap,e),[i,o]=y.useState(!1),[l,c]=y.useState(!1);return ZD(()=>o(!0)),y.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(ip,{asChild:!0,children:a.jsx(vd,{...n,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",r]})})})},JD="ToastTitle",WA=y.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return a.jsx(qe.div,{...n,ref:e})});WA.displayName=JD;var XD="ToastDescription",QA=y.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return a.jsx(qe.div,{...n,ref:e})});QA.displayName=XD;var HA="ToastAction",YA=y.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?a.jsx(JA,{altText:r,asChild:!0,children:a.jsx(_x,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${HA}\`. Expected non-empty \`string\`.`),null)});YA.displayName=HA;var KA="ToastClose",_x=y.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=HD(KA,r);return a.jsx(JA,{asChild:!0,children:a.jsx(qe.button,{type:"button",...n,ref:e,onClick:me(t.onClick,s.onClose)})})});_x.displayName=KA;var JA=y.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return a.jsx(qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function XA(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),eO(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...XA(n))}}),e}function Bh(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?bx(s,i):s.dispatchEvent(i)}var S1=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),i=n>s;return e==="left"||e==="right"?i&&n>r:!i&&s>r};function ZD(t=()=>{}){const e=Er(t);Cr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function eO(t){return t.nodeType===t.ELEMENT_NODE}function tO(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function zg(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var rO=UA,ZA=GA,eS=zA,tS=WA,rS=QA,nS=YA,sS=_x;function iS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=iS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function oS(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=iS(t))&&(n&&(n+=" "),n+=e);return n}const N1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,I1=oS,Tx=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return I1(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=r==null?void 0:r[u],f=i==null?void 0:i[u];if(h===null)return null;const m=N1(h)||N1(f);return s[u][m]}),l=r&&Object.entries(r).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,h)=>{let{class:f,className:m,...g}=h;return Object.entries(g).every(x=>{let[p,b]=x;return Array.isArray(b)?b.includes({...i,...l}[p]):{...i,...l}[p]===b})?[...u,f,m]:u},[]);return I1(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aS=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>y.createElement("svg",{ref:c,...sO,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:aS("lucide",s),...l},[...o.map(([u,h])=>y.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(t,e)=>{const r=y.forwardRef(({className:n,...s},i)=>y.createElement(iO,{ref:i,iconNode:e,className:aS(`lucide-${nO(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=De("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=De("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=De("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=De("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=De("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=De("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=De("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=De("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=De("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=De("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=De("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=De("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=De("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=De("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=De("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=De("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=De("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=De("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=De("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=De("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=De("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kx="-",gO=t=>{const e=vO(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(kx);return l[0]===""&&l.length!==1&&l.shift(),mS(l,e)||yO(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},mS=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?mS(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(kx);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},P1=/^\[(.+)\]$/,yO=t=>{if(P1.test(t)){const e=P1.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},vO=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return wO(Object.entries(t.classGroups),r).forEach(([i,o])=>{vy(o,n,i,e)}),n},vy=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:k1(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(xO(s)){vy(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{vy(o,k1(e,i),r,n)})})},k1=(t,e)=>{let r=t;return e.split(kx).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},xO=t=>t.isThemeGetter,wO=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[r,s]}):t,bO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},pS="!",EO=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let b=0;b<l.length;b++){let _=l[b];if(u===0){if(_===s&&(n||l.slice(b,b+i)===e)){c.push(l.slice(h,b)),h=b+i;continue}if(_==="/"){f=b;continue}}_==="["?u++:_==="]"&&u--}const m=c.length===0?l:l.substring(h),g=m.startsWith(pS),x=g?m.substring(1):m,p=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:o}):o},CO=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},_O=t=>({cache:bO(t.cacheSize),parseClassName:EO(t),...gO(t)}),TO=/\s+/,AO=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(TO);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}=r(u);let x=!!g,p=n(x?m.substring(0,g):m);if(!p){if(!x){l=u+(l.length>0?" "+l:l);continue}if(p=n(m),!p){l=u+(l.length>0?" "+l:l);continue}x=!1}const b=CO(h).join(":"),_=f?b+pS:b,w=_+p;if(i.includes(w))continue;i.push(w);const C=s(p,x);for(let R=0;R<C.length;++R){const L=C[R];i.push(_+L)}l=u+(l.length>0?" "+l:l)}return l};function SO(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=gS(e))&&(n&&(n+=" "),n+=r);return n}const gS=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=gS(t[n]))&&(r&&(r+=" "),r+=e);return r};function NO(t,...e){let r,n,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return r=_O(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const h=AO(c,r);return s(c,h),h}return function(){return i(SO.apply(null,arguments))}}const mt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},yS=/^\[(?:([a-z-]+):)?(.+)\]$/i,IO=/^\d+\/\d+$/,RO=new Set(["px","full","screen"]),PO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,MO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ps=t=>vl(t)||RO.has(t)||IO.test(t),fi=t=>rc(t,"length",GO),vl=t=>!!t&&!Number.isNaN(Number(t)),Wg=t=>rc(t,"number",vl),Bc=t=>!!t&&Number.isInteger(Number(t)),OO=t=>t.endsWith("%")&&vl(t.slice(0,-1)),Me=t=>yS.test(t),mi=t=>PO.test(t),LO=new Set(["length","size","percentage"]),FO=t=>rc(t,LO,vS),VO=t=>rc(t,"position",vS),BO=new Set(["image","url"]),UO=t=>rc(t,BO,zO),qO=t=>rc(t,"",$O),Uc=()=>!0,rc=(t,e,r)=>{const n=yS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},GO=t=>kO.test(t)&&!jO.test(t),vS=()=>!1,$O=t=>MO.test(t),zO=t=>DO.test(t),WO=()=>{const t=mt("colors"),e=mt("spacing"),r=mt("blur"),n=mt("brightness"),s=mt("borderColor"),i=mt("borderRadius"),o=mt("borderSpacing"),l=mt("borderWidth"),c=mt("contrast"),u=mt("grayscale"),h=mt("hueRotate"),f=mt("invert"),m=mt("gap"),g=mt("gradientColorStops"),x=mt("gradientColorStopPositions"),p=mt("inset"),b=mt("margin"),_=mt("opacity"),w=mt("padding"),C=mt("saturate"),R=mt("scale"),L=mt("sepia"),V=mt("skew"),I=mt("space"),A=mt("translate"),N=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Me,e],O=()=>[Me,e],j=()=>["",Ps,fi],$=()=>["auto",vl,Me],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Me],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[vl,Me];return{cacheSize:500,separator:":",theme:{colors:[Uc],spacing:[Ps,fi],blur:["none","",mi,Me],brightness:ne(),borderColor:[t],borderRadius:["none","","full",mi,Me],borderSpacing:O(),borderWidth:j(),contrast:ne(),grayscale:W(),hueRotate:ne(),invert:W(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[OO,fi],inset:D(),margin:D(),opacity:ne(),padding:O(),saturate:ne(),scale:ne(),sepia:W(),skew:ne(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[mi]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),Me]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bc,Me]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Bc,Me]}],"grid-cols":[{"grid-cols":[Uc]}],"col-start-end":[{col:["auto",{span:["full",Bc,Me]},Me]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Uc]}],"row-start-end":[{row:["auto",{span:[Bc,Me]},Me]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Me,e]}],"min-w":[{"min-w":[Me,e,"min","max","fit"]}],"max-w":[{"max-w":[Me,e,"none","full","min","max","fit","prose",{screen:[mi]},mi]}],h:[{h:[Me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",mi,fi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wg]}],"font-family":[{font:[Uc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",vl,Wg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ps,Me]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ps,fi]}],"underline-offset":[{"underline-offset":["auto",Ps,Me]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),VO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},UO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Ps,Me]}],"outline-w":[{outline:[Ps,fi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Ps,fi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",mi,qO]}],"shadow-color":[{shadow:[Uc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":se()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",mi,Me]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Bc,Me]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ps,fi,Wg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},QO=NO(WO),HO=()=>{};var j1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},YO=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],l=t[r++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},wS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),n.push(r[h],r[f],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new KO;const m=i<<2|l>>4;if(n.push(m),u!==64){const g=l<<4&240|u>>2;if(n.push(g),f!==64){const x=u<<6&192|f;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JO=function(t){const e=xS(t);return wS.encodeByteArray(e,!0)},hm=function(t){return JO(t).replace(/\./g,"")},bS=function(t){try{return wS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=()=>XO().__FIREBASE_DEFAULTS__,e3=()=>{if(typeof process>"u"||typeof j1>"u")return;const t=j1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},t3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bS(t[1]);return e&&JSON.parse(e)},lp=()=>{try{return HO()||ZO()||e3()||t3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ES=t=>{var e,r;return(r=(e=lp())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},r3=t=>{const e=ES(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},CS=()=>{var t;return(t=lp())===null||t===void 0?void 0:t.config},_S=t=>{var e;return(e=lp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hm(JSON.stringify(r)),hm(JSON.stringify(o)),""].join(".")}const mu={};function i3(){const t={prod:[],emulator:[]};for(const e of Object.keys(mu))mu[e]?t.emulator.push(e):t.prod.push(e);return t}function o3(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let M1=!1;function AS(t,e){if(typeof window>"u"||typeof document>"u"||!nc(window.location.host)||mu[t]===e||mu[t]||M1)return;mu[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",i=i3().prod.length>0;function o(){const m=document.getElementById(n);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{M1=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=o3(n),g=r("text"),x=document.getElementById(g)||document.createElement("span"),p=r("learnmore"),b=document.getElementById(p)||document.createElement("a"),_=r("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),h(b,p);const R=u();c(w,_),C.append(w,x,b,R),document.body.appendChild(C)}i?(x.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function l3(){var t;const e=(t=lp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function u3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function d3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h3(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function f3(){return!l3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m3(){try{return typeof indexedDB=="object"}catch{return!1}}function p3(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="FirebaseError";class ei extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=g3,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xd.prototype.create)}}class xd{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?y3(i,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ei(s,l,n)}}function y3(t,e){return t.replace(v3,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const v3=/\{\$([^}]+)}/g;function x3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function aa(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(D1(i)&&D1(o)){if(!aa(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function D1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Qc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Hc(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function w3(t,e){const r=new b3(t,e);return r.subscribe.bind(r)}class b3{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");E3(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Qg),s.error===void 0&&(s.error=Qg),s.complete===void 0&&(s.complete=Qg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function E3(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Qg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class la{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C3=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new n3;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T3(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:_3(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _3(t){return t===Vo?void 0:t}function T3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new C3(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const S3={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},N3=$e.INFO,I3={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},R3=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=I3[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jx{constructor(e){this.name=e,this._logLevel=N3,this._logHandler=R3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const P3=(t,e)=>e.some(r=>t instanceof r);let O1,L1;function k3(){return O1||(O1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j3(){return L1||(L1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SS=new WeakMap,xy=new WeakMap,NS=new WeakMap,Hg=new WeakMap,Mx=new WeakMap;function M3(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(zi(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&SS.set(r,t)}).catch(()=>{}),Mx.set(e,t),e}function D3(t){if(xy.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});xy.set(t,e)}let wy={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return xy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NS.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return zi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O3(t){wy=t(wy)}function L3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Yg(this),e,...r);return NS.set(n,e.sort?e.sort():[e]),zi(n)}:j3().includes(t)?function(...e){return t.apply(Yg(this),e),zi(SS.get(this))}:function(...e){return zi(t.apply(Yg(this),e))}}function F3(t){return typeof t=="function"?L3(t):(t instanceof IDBTransaction&&D3(t),P3(t,k3())?new Proxy(t,wy):t)}function zi(t){if(t instanceof IDBRequest)return M3(t);if(Hg.has(t))return Hg.get(t);const e=F3(t);return e!==t&&(Hg.set(t,e),Mx.set(e,t)),e}const Yg=t=>Mx.get(t);function V3(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=zi(o);return n&&o.addEventListener("upgradeneeded",c=>{n(zi(o.result),c.oldVersion,c.newVersion,zi(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const B3=["get","getKey","getAll","getAllKeys","count"],U3=["put","add","delete","clear"],Kg=new Map;function F1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kg.get(e))return Kg.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=U3.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||B3.includes(r)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return Kg.set(e,i),i}O3(t=>({...t,get:(e,r,n)=>F1(e,r)||t.get(e,r,n),has:(e,r)=>!!F1(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(G3(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function G3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const by="@firebase/app",V1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new jx("@firebase/app"),$3="@firebase/app-compat",z3="@firebase/analytics-compat",W3="@firebase/analytics",Q3="@firebase/app-check-compat",H3="@firebase/app-check",Y3="@firebase/auth",K3="@firebase/auth-compat",J3="@firebase/database",X3="@firebase/data-connect",Z3="@firebase/database-compat",e5="@firebase/functions",t5="@firebase/functions-compat",r5="@firebase/installations",n5="@firebase/installations-compat",s5="@firebase/messaging",i5="@firebase/messaging-compat",o5="@firebase/performance",a5="@firebase/performance-compat",l5="@firebase/remote-config",c5="@firebase/remote-config-compat",u5="@firebase/storage",d5="@firebase/storage-compat",h5="@firebase/firestore",f5="@firebase/ai",m5="@firebase/firestore-compat",p5="firebase",g5="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="[DEFAULT]",y5={[by]:"fire-core",[$3]:"fire-core-compat",[W3]:"fire-analytics",[z3]:"fire-analytics-compat",[H3]:"fire-app-check",[Q3]:"fire-app-check-compat",[Y3]:"fire-auth",[K3]:"fire-auth-compat",[J3]:"fire-rtdb",[X3]:"fire-data-connect",[Z3]:"fire-rtdb-compat",[e5]:"fire-fn",[t5]:"fire-fn-compat",[r5]:"fire-iid",[n5]:"fire-iid-compat",[s5]:"fire-fcm",[i5]:"fire-fcm-compat",[o5]:"fire-perf",[a5]:"fire-perf-compat",[l5]:"fire-rc",[c5]:"fire-rc-compat",[u5]:"fire-gcs",[d5]:"fire-gcs-compat",[h5]:"fire-fst",[m5]:"fire-fst-compat",[f5]:"fire-vertex","fire-js":"fire-js",[p5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new Map,v5=new Map,Cy=new Map;function B1(t,e){try{t.container.addComponent(e)}catch(r){Ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function $l(t){const e=t.name;if(Cy.has(e))return Ws.debug(`There were multiple attempts to register component ${e}.`),!1;Cy.set(e,t);for(const r of Uu.values())B1(r,t);for(const r of v5.values())B1(r,t);return!0}function Dx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wi=new xd("app","Firebase",x5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=g5;function IS(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ey,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw Wi.create("bad-app-name",{appName:String(s)});if(r||(r=CS()),!r)throw Wi.create("no-options");const i=Uu.get(s);if(i){if(aa(r,i.options)&&aa(n,i.config))return i;throw Wi.create("duplicate-app",{appName:s})}const o=new A3(s);for(const c of Cy.values())o.addComponent(c);const l=new w5(r,n,o);return Uu.set(s,l),l}function Ox(t=Ey){const e=Uu.get(t);if(!e&&t===Ey&&CS())return IS();if(!e)throw Wi.create("no-app",{appName:t});return e}function b5(){return Array.from(Uu.values())}function Qi(t,e,r){var n;let s=(n=y5[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ws.warn(l.join(" "));return}$l(new la(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="firebase-heartbeat-database",C5=1,qu="firebase-heartbeat-store";let Jg=null;function RS(){return Jg||(Jg=V3(E5,C5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qu)}catch(r){console.warn(r)}}}}).catch(t=>{throw Wi.create("idb-open",{originalErrorMessage:t.message})})),Jg}async function _5(t){try{const r=(await RS()).transaction(qu),n=await r.objectStore(qu).get(PS(t));return await r.done,n}catch(e){if(e instanceof ei)Ws.warn(e.message);else{const r=Wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ws.warn(r.message)}}}async function U1(t,e){try{const n=(await RS()).transaction(qu,"readwrite");await n.objectStore(qu).put(e,PS(t)),await n.done}catch(r){if(r instanceof ei)Ws.warn(r.message);else{const n=Wi.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ws.warn(n.message)}}}function PS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=1024,A5=30;class S5{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new I5(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=q1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>A5){const o=R5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ws.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=q1(),{heartbeatsToSend:n,unsentEntries:s}=N5(this._heartbeatsCache.heartbeats),i=hm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Ws.warn(r),""}}}function q1(){return new Date().toISOString().substring(0,10)}function N5(t,e=T5){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),G1(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),G1(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class I5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m3()?p3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await _5(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return U1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return U1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function G1(t){return hm(JSON.stringify({version:2,heartbeats:t})).length}function R5(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(t){$l(new la("platform-logger",e=>new q3(e),"PRIVATE")),$l(new la("heartbeat",e=>new S5(e),"PRIVATE")),Qi(by,V1,t),Qi(by,V1,"esm2017"),Qi("fire-js","")}P5("");var k5="firebase",j5="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(k5,j5,"app");var $1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,kS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function N(){}N.prototype=A.prototype,I.D=A.prototype,I.prototype=new N,I.prototype.constructor=I,I.C=function(P,D,O){for(var j=Array(arguments.length-2),$=2;$<arguments.length;$++)j[$-2]=arguments[$];return A.prototype[D].apply(P,j)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,A,N){N||(N=0);var P=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)P[D]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(D=0;16>D;++D)P[D]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=I.g[0],N=I.g[1],D=I.g[2];var O=I.g[3],j=A+(O^N&(D^O))+P[0]+3614090360&4294967295;A=N+(j<<7&4294967295|j>>>25),j=O+(D^A&(N^D))+P[1]+3905402710&4294967295,O=A+(j<<12&4294967295|j>>>20),j=D+(N^O&(A^N))+P[2]+606105819&4294967295,D=O+(j<<17&4294967295|j>>>15),j=N+(A^D&(O^A))+P[3]+3250441966&4294967295,N=D+(j<<22&4294967295|j>>>10),j=A+(O^N&(D^O))+P[4]+4118548399&4294967295,A=N+(j<<7&4294967295|j>>>25),j=O+(D^A&(N^D))+P[5]+1200080426&4294967295,O=A+(j<<12&4294967295|j>>>20),j=D+(N^O&(A^N))+P[6]+2821735955&4294967295,D=O+(j<<17&4294967295|j>>>15),j=N+(A^D&(O^A))+P[7]+4249261313&4294967295,N=D+(j<<22&4294967295|j>>>10),j=A+(O^N&(D^O))+P[8]+1770035416&4294967295,A=N+(j<<7&4294967295|j>>>25),j=O+(D^A&(N^D))+P[9]+2336552879&4294967295,O=A+(j<<12&4294967295|j>>>20),j=D+(N^O&(A^N))+P[10]+4294925233&4294967295,D=O+(j<<17&4294967295|j>>>15),j=N+(A^D&(O^A))+P[11]+2304563134&4294967295,N=D+(j<<22&4294967295|j>>>10),j=A+(O^N&(D^O))+P[12]+1804603682&4294967295,A=N+(j<<7&4294967295|j>>>25),j=O+(D^A&(N^D))+P[13]+4254626195&4294967295,O=A+(j<<12&4294967295|j>>>20),j=D+(N^O&(A^N))+P[14]+2792965006&4294967295,D=O+(j<<17&4294967295|j>>>15),j=N+(A^D&(O^A))+P[15]+1236535329&4294967295,N=D+(j<<22&4294967295|j>>>10),j=A+(D^O&(N^D))+P[1]+4129170786&4294967295,A=N+(j<<5&4294967295|j>>>27),j=O+(N^D&(A^N))+P[6]+3225465664&4294967295,O=A+(j<<9&4294967295|j>>>23),j=D+(A^N&(O^A))+P[11]+643717713&4294967295,D=O+(j<<14&4294967295|j>>>18),j=N+(O^A&(D^O))+P[0]+3921069994&4294967295,N=D+(j<<20&4294967295|j>>>12),j=A+(D^O&(N^D))+P[5]+3593408605&4294967295,A=N+(j<<5&4294967295|j>>>27),j=O+(N^D&(A^N))+P[10]+38016083&4294967295,O=A+(j<<9&4294967295|j>>>23),j=D+(A^N&(O^A))+P[15]+3634488961&4294967295,D=O+(j<<14&4294967295|j>>>18),j=N+(O^A&(D^O))+P[4]+3889429448&4294967295,N=D+(j<<20&4294967295|j>>>12),j=A+(D^O&(N^D))+P[9]+568446438&4294967295,A=N+(j<<5&4294967295|j>>>27),j=O+(N^D&(A^N))+P[14]+3275163606&4294967295,O=A+(j<<9&4294967295|j>>>23),j=D+(A^N&(O^A))+P[3]+4107603335&4294967295,D=O+(j<<14&4294967295|j>>>18),j=N+(O^A&(D^O))+P[8]+1163531501&4294967295,N=D+(j<<20&4294967295|j>>>12),j=A+(D^O&(N^D))+P[13]+2850285829&4294967295,A=N+(j<<5&4294967295|j>>>27),j=O+(N^D&(A^N))+P[2]+4243563512&4294967295,O=A+(j<<9&4294967295|j>>>23),j=D+(A^N&(O^A))+P[7]+1735328473&4294967295,D=O+(j<<14&4294967295|j>>>18),j=N+(O^A&(D^O))+P[12]+2368359562&4294967295,N=D+(j<<20&4294967295|j>>>12),j=A+(N^D^O)+P[5]+4294588738&4294967295,A=N+(j<<4&4294967295|j>>>28),j=O+(A^N^D)+P[8]+2272392833&4294967295,O=A+(j<<11&4294967295|j>>>21),j=D+(O^A^N)+P[11]+1839030562&4294967295,D=O+(j<<16&4294967295|j>>>16),j=N+(D^O^A)+P[14]+4259657740&4294967295,N=D+(j<<23&4294967295|j>>>9),j=A+(N^D^O)+P[1]+2763975236&4294967295,A=N+(j<<4&4294967295|j>>>28),j=O+(A^N^D)+P[4]+1272893353&4294967295,O=A+(j<<11&4294967295|j>>>21),j=D+(O^A^N)+P[7]+4139469664&4294967295,D=O+(j<<16&4294967295|j>>>16),j=N+(D^O^A)+P[10]+3200236656&4294967295,N=D+(j<<23&4294967295|j>>>9),j=A+(N^D^O)+P[13]+681279174&4294967295,A=N+(j<<4&4294967295|j>>>28),j=O+(A^N^D)+P[0]+3936430074&4294967295,O=A+(j<<11&4294967295|j>>>21),j=D+(O^A^N)+P[3]+3572445317&4294967295,D=O+(j<<16&4294967295|j>>>16),j=N+(D^O^A)+P[6]+76029189&4294967295,N=D+(j<<23&4294967295|j>>>9),j=A+(N^D^O)+P[9]+3654602809&4294967295,A=N+(j<<4&4294967295|j>>>28),j=O+(A^N^D)+P[12]+3873151461&4294967295,O=A+(j<<11&4294967295|j>>>21),j=D+(O^A^N)+P[15]+530742520&4294967295,D=O+(j<<16&4294967295|j>>>16),j=N+(D^O^A)+P[2]+3299628645&4294967295,N=D+(j<<23&4294967295|j>>>9),j=A+(D^(N|~O))+P[0]+4096336452&4294967295,A=N+(j<<6&4294967295|j>>>26),j=O+(N^(A|~D))+P[7]+1126891415&4294967295,O=A+(j<<10&4294967295|j>>>22),j=D+(A^(O|~N))+P[14]+2878612391&4294967295,D=O+(j<<15&4294967295|j>>>17),j=N+(O^(D|~A))+P[5]+4237533241&4294967295,N=D+(j<<21&4294967295|j>>>11),j=A+(D^(N|~O))+P[12]+1700485571&4294967295,A=N+(j<<6&4294967295|j>>>26),j=O+(N^(A|~D))+P[3]+2399980690&4294967295,O=A+(j<<10&4294967295|j>>>22),j=D+(A^(O|~N))+P[10]+4293915773&4294967295,D=O+(j<<15&4294967295|j>>>17),j=N+(O^(D|~A))+P[1]+2240044497&4294967295,N=D+(j<<21&4294967295|j>>>11),j=A+(D^(N|~O))+P[8]+1873313359&4294967295,A=N+(j<<6&4294967295|j>>>26),j=O+(N^(A|~D))+P[15]+4264355552&4294967295,O=A+(j<<10&4294967295|j>>>22),j=D+(A^(O|~N))+P[6]+2734768916&4294967295,D=O+(j<<15&4294967295|j>>>17),j=N+(O^(D|~A))+P[13]+1309151649&4294967295,N=D+(j<<21&4294967295|j>>>11),j=A+(D^(N|~O))+P[4]+4149444226&4294967295,A=N+(j<<6&4294967295|j>>>26),j=O+(N^(A|~D))+P[11]+3174756917&4294967295,O=A+(j<<10&4294967295|j>>>22),j=D+(A^(O|~N))+P[2]+718787259&4294967295,D=O+(j<<15&4294967295|j>>>17),j=N+(O^(D|~A))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+O&4294967295}n.prototype.u=function(I,A){A===void 0&&(A=I.length);for(var N=A-this.blockSize,P=this.B,D=this.h,O=0;O<A;){if(D==0)for(;O<=N;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<A;)if(P[D++]=I.charCodeAt(O++),D==this.blockSize){s(this,P),D=0;break}}else for(;O<A;)if(P[D++]=I[O++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=A},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;var N=8*this.o;for(A=I.length-8;A<I.length;++A)I[A]=N&255,N/=256;for(this.u(I),I=Array(16),A=N=0;4>A;++A)for(var P=0;32>P;P+=8)I[N++]=this.g[A]>>>P&255;return I};function i(I,A){var N=l;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=A(I)}function o(I,A){this.h=A;for(var N=[],P=!0,D=I.length-1;0<=D;D--){var O=I[D]|0;P&&O==A||(N[D]=O,P=!1)}this.g=N}var l={};function c(I){return-128<=I&&128>I?i(I,function(A){return new o([A|0],0>A?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return b(u(-I));for(var A=[],N=1,P=0;I>=N;P++)A[P]=I/N|0,N*=4294967296;return new o(A,0)}function h(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return b(h(I.substring(1),A));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(A,8)),P=f,D=0;D<I.length;D+=8){var O=Math.min(8,I.length-D),j=parseInt(I.substring(D,D+O),A);8>O?(O=u(Math.pow(A,O)),P=P.j(O).add(u(j))):(P=P.j(N),P=P.add(u(j)))}return P}var f=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-b(this).m();for(var I=0,A=1,N=0;N<this.g.length;N++){var P=this.i(N);I+=(0<=P?P:4294967296+P)*A,A*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(p(this))return"-"+b(this).toString(I);for(var A=u(Math.pow(I,6)),N=this,P="";;){var D=R(N,A).g;N=_(N,D.j(A));var O=((0<N.g.length?N.g[0]:N.h)>>>0).toString(I);if(N=D,x(N))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(var A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function p(I){return I.h==-1}t.l=function(I){return I=_(this,I),p(I)?-1:x(I)?0:1};function b(I){for(var A=I.g.length,N=[],P=0;P<A;P++)N[P]=~I.g[P];return new o(N,~I.h).add(m)}t.abs=function(){return p(this)?b(this):this},t.add=function(I){for(var A=Math.max(this.g.length,I.g.length),N=[],P=0,D=0;D<=A;D++){var O=P+(this.i(D)&65535)+(I.i(D)&65535),j=(O>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);P=j>>>16,O&=65535,j&=65535,N[D]=j<<16|O}return new o(N,N[N.length-1]&-2147483648?-1:0)};function _(I,A){return I.add(b(A))}t.j=function(I){if(x(this)||x(I))return f;if(p(this))return p(I)?b(this).j(b(I)):b(b(this).j(I));if(p(I))return b(this.j(b(I)));if(0>this.l(g)&&0>I.l(g))return u(this.m()*I.m());for(var A=this.g.length+I.g.length,N=[],P=0;P<2*A;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<I.g.length;D++){var O=this.i(P)>>>16,j=this.i(P)&65535,$=I.i(D)>>>16,Y=I.i(D)&65535;N[2*P+2*D]+=j*Y,w(N,2*P+2*D),N[2*P+2*D+1]+=O*Y,w(N,2*P+2*D+1),N[2*P+2*D+1]+=j*$,w(N,2*P+2*D+1),N[2*P+2*D+2]+=O*$,w(N,2*P+2*D+2)}for(P=0;P<A;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=A;P<2*A;P++)N[P]=0;return new o(N,0)};function w(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function C(I,A){this.g=I,this.h=A}function R(I,A){if(x(A))throw Error("division by zero");if(x(I))return new C(f,f);if(p(I))return A=R(b(I),A),new C(b(A.g),b(A.h));if(p(A))return A=R(I,b(A)),new C(b(A.g),A.h);if(30<I.g.length){if(p(I)||p(A))throw Error("slowDivide_ only works with positive integers.");for(var N=m,P=A;0>=P.l(I);)N=L(N),P=L(P);var D=V(N,1),O=V(P,1);for(P=V(P,2),N=V(N,2);!x(P);){var j=O.add(P);0>=j.l(I)&&(D=D.add(N),O=j),P=V(P,1),N=V(N,1)}return A=_(I,D.j(A)),new C(D,A)}for(D=f;0<=I.l(A);){for(N=Math.max(1,Math.floor(I.m()/A.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=u(N),j=O.j(A);p(j)||0<j.l(I);)N-=P,O=u(N),j=O.j(A);x(O)&&(O=m),D=D.add(O),I=_(I,j)}return new C(D,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var A=Math.max(this.g.length,I.g.length),N=[],P=0;P<A;P++)N[P]=this.i(P)&I.i(P);return new o(N,this.h&I.h)},t.or=function(I){for(var A=Math.max(this.g.length,I.g.length),N=[],P=0;P<A;P++)N[P]=this.i(P)|I.i(P);return new o(N,this.h|I.h)},t.xor=function(I){for(var A=Math.max(this.g.length,I.g.length),N=[],P=0;P<A;P++)N[P]=this.i(P)^I.i(P);return new o(N,this.h^I.h)};function L(I){for(var A=I.g.length+1,N=[],P=0;P<A;P++)N[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(N,I.h)}function V(I,A){var N=A>>5;A%=32;for(var P=I.g.length-N,D=[],O=0;O<P;O++)D[O]=0<A?I.i(O+N)>>>A|I.i(O+N+1)<<32-A:I.i(O+N);return new o(D,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,kS=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Hi=o}).apply(typeof $1<"u"?$1:typeof self<"u"?self:typeof window<"u"?window:{});var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jS,Yc,MS,xf,_y,DS,OS,LS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,S){return d==Array.prototype||d==Object.prototype||(d[v]=S.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gh=="object"&&Gh];for(var v=0;v<d.length;++v){var S=d[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var n=r(this);function s(d,v){if(v)e:{var S=n;d=d.split(".");for(var M=0;M<d.length-1;M++){var z=d[M];if(!(z in S))break e;S=S[z]}d=d[d.length-1],M=S[d],v=v(M),v!=M&&v!=null&&e(S,d,{configurable:!0,writable:!0,value:v})}}function i(d,v){d instanceof String&&(d+="");var S=0,M=!1,z={next:function(){if(!M&&S<d.length){var X=S++;return{value:v(X,d[X]),done:!1}}return M=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(d){return d||function(){return i(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function u(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function h(d,v,S){return d.call.apply(d.bind,arguments)}function f(d,v,S){if(!d)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,M),d.apply(v,z)}}return function(){return d.apply(v,arguments)}}function m(d,v,S){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(d,v){var S=Array.prototype.slice.call(arguments,1);return function(){var M=S.slice();return M.push.apply(M,arguments),d.apply(this,M)}}function x(d,v){function S(){}S.prototype=v.prototype,d.aa=v.prototype,d.prototype=new S,d.prototype.constructor=d,d.Qb=function(M,z,X){for(var Z=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Z[nt-2]=arguments[nt];return v.prototype[z].apply(M,Z)}}function p(d){const v=d.length;if(0<v){const S=Array(v);for(let M=0;M<v;M++)S[M]=d[M];return S}return[]}function b(d,v){for(let S=1;S<arguments.length;S++){const M=arguments[S];if(c(M)){const z=d.length||0,X=M.length||0;d.length=z+X;for(let Z=0;Z<X;Z++)d[z+Z]=M[Z]}else d.push(M)}}class _{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function w(d){return/^[\s\xa0]*$/.test(d)}function C(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var L=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function V(d,v,S){for(const M in d)v.call(S,d[M],M,d)}function I(d,v){for(const S in d)v.call(void 0,d[S],S,d)}function A(d){const v={};for(const S in d)v[S]=d[S];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,v){let S,M;for(let z=1;z<arguments.length;z++){M=arguments[z];for(S in M)d[S]=M[S];for(let X=0;X<N.length;X++)S=N[X],Object.prototype.hasOwnProperty.call(M,S)&&(d[S]=M[S])}}function D(d){var v=1;d=d.split(":");const S=[];for(;0<v&&d.length;)S.push(d.shift()),v--;return d.length&&S.push(d.join(":")),S}function O(d){l.setTimeout(()=>{throw d},0)}function j(){var d=W;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class ${constructor(){this.h=this.g=null}add(v,S){const M=Y.get();M.set(v,S),this.h?this.h.next=M:this.g=M,this.h=M}}var Y=new _(()=>new J,d=>d.reset());class J{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let se,G=!1,W=new $,ie=()=>{const d=l.Promise.resolve(void 0);se=()=>{d.then(ne)}};var ne=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(S){O(S)}var v=Y;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}G=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};l.addEventListener("test",S,v),l.removeEventListener("test",S,v)}catch{}return d}();function je(d,v){if(le.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var S=this.type=d.type,M=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(L){e:{try{R(v.nodeName);var z=!0;break e}catch{}z=!1}z||(v=null)}}else S=="mouseover"?v=d.fromElement:S=="mouseout"&&(v=d.toElement);this.relatedTarget=v,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:we[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&je.aa.h.call(this)}}x(je,le);var we={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),ge=0;function xe(d,v,S,M,z){this.listener=d,this.proxy=null,this.src=v,this.type=S,this.capture=!!M,this.ha=z,this.key=++ge,this.da=this.fa=!1}function be(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ae(d){this.src=d,this.g={},this.h=0}Ae.prototype.add=function(d,v,S,M,z){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var Z=he(d,v,M,z);return-1<Z?(v=d[Z],S||(v.fa=!1)):(v=new xe(v,this.src,X,!!M,z),v.fa=S,d.push(v)),v};function Ce(d,v){var S=v.type;if(S in d.g){var M=d.g[S],z=Array.prototype.indexOf.call(M,v,void 0),X;(X=0<=z)&&Array.prototype.splice.call(M,z,1),X&&(be(v),d.g[S].length==0&&(delete d.g[S],d.h--))}}function he(d,v,S,M){for(var z=0;z<d.length;++z){var X=d[z];if(!X.da&&X.listener==v&&X.capture==!!S&&X.ha==M)return z}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),vt={};function lt(d,v,S,M,z){if(Array.isArray(v)){for(var X=0;X<v.length;X++)lt(d,v[X],S,M,z);return null}return S=Ao(S),d&&d[ae]?d.K(v,S,u(M)?!!M.capture:!!M,z):Lt(d,v,S,!1,M,z)}function Lt(d,v,S,M,z,X){if(!v)throw Error("Invalid event type");var Z=u(z)?!!z.capture:!!z,nt=un(d);if(nt||(d[ve]=nt=new Ae(d)),S=nt.add(v,S,M,Z,X),S.proxy)return S;if(M=Ze(),S.proxy=M,M.src=d,M.listener=S,d.addEventListener)_e||(z=Z),z===void 0&&(z=!1),d.addEventListener(v.toString(),M,z);else if(d.attachEvent)d.attachEvent(_n(v.toString()),M);else if(d.addListener&&d.removeListener)d.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Ze(){function d(S){return v.call(d.src,d.listener,S)}const v=xs;return d}function xt(d,v,S,M,z){if(Array.isArray(v))for(var X=0;X<v.length;X++)xt(d,v[X],S,M,z);else M=u(M)?!!M.capture:!!M,S=Ao(S),d&&d[ae]?(d=d.i,v=String(v).toString(),v in d.g&&(X=d.g[v],S=he(X,S,M,z),-1<S&&(be(X[S]),Array.prototype.splice.call(X,S,1),X.length==0&&(delete d.g[v],d.h--)))):d&&(d=un(d))&&(v=d.g[v.toString()],d=-1,v&&(d=he(v,S,M,z)),(S=-1<d?v[d]:null)&&ur(S))}function ur(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ae])Ce(v.i,d);else{var S=d.type,M=d.proxy;v.removeEventListener?v.removeEventListener(S,M,d.capture):v.detachEvent?v.detachEvent(_n(S),M):v.addListener&&v.removeListener&&v.removeListener(M),(S=un(v))?(Ce(S,d),S.h==0&&(S.src=null,v[ve]=null)):be(d)}}}function _n(d){return d in vt?vt[d]:vt[d]="on"+d}function xs(d,v){if(d.da)d=!0;else{v=new je(v,this);var S=d.listener,M=d.ha||d.src;d.fa&&ur(d),d=S.call(M,v)}return d}function un(d){return d=d[ve],d instanceof Ae?d:null}var ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ao(d){return typeof d=="function"?d:(d[ws]||(d[ws]=function(v){return d.handleEvent(v)}),d[ws])}function Nt(){U.call(this),this.i=new Ae(this),this.M=this,this.F=null}x(Nt,U),Nt.prototype[ae]=!0,Nt.prototype.removeEventListener=function(d,v,S,M){xt(this,d,v,S,M)};function wt(d,v){var S,M=d.F;if(M)for(S=[];M;M=M.F)S.push(M);if(d=d.M,M=v.type||v,typeof v=="string")v=new le(v,d);else if(v instanceof le)v.target=v.target||d;else{var z=v;v=new le(M,d),P(v,z)}if(z=!0,S)for(var X=S.length-1;0<=X;X--){var Z=v.g=S[X];z=bs(Z,M,!0,v)&&z}if(Z=v.g=d,z=bs(Z,M,!0,v)&&z,z=bs(Z,M,!1,v)&&z,S)for(X=0;X<S.length;X++)Z=v.g=S[X],z=bs(Z,M,!1,v)&&z}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var S=d.g[v],M=0;M<S.length;M++)be(S[M]);delete d.g[v],d.h--}}this.F=null},Nt.prototype.K=function(d,v,S,M){return this.i.add(String(d),v,!1,S,M)},Nt.prototype.L=function(d,v,S,M){return this.i.add(String(d),v,!0,S,M)};function bs(d,v,S,M){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var z=!0,X=0;X<v.length;++X){var Z=v[X];if(Z&&!Z.da&&Z.capture==S){var nt=Z.listener,$t=Z.ha||Z.src;Z.fa&&Ce(d.i,Z),z=nt.call($t,M)!==!1&&z}}return z&&!M.defaultPrevented}function Tn(d,v,S){if(typeof d=="function")S&&(d=m(d,S));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(d,v||0)}function So(d){d.g=Tn(()=>{d.g=null,d.i&&(d.i=!1,So(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class ri extends U{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:So(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dn(d){U.call(this),this.h=d,this.g={}}x(dn,U);var An=[];function Sn(d){V(d.g,function(v,S){this.g.hasOwnProperty(S)&&ur(v)},d),d.g={}}dn.prototype.N=function(){dn.aa.N.call(this),Sn(this)},dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tr=l.JSON.stringify,Ar=l.JSON.parse,xc=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Se(){}Se.prototype.h=null;function Ge(d){return d.h||(d.h=d.i())}function Je(){}var Kt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){le.call(this,"d")}x(dr,le);function Nn(){le.call(this,"c")}x(Nn,le);var ft={},ni=null;function We(){return ni=ni||new Nt}ft.La="serverreachability";function Ld(d){le.call(this,ft.La,d)}x(Ld,le);function hr(d){const v=We();wt(v,new Ld(v))}ft.STAT_EVENT="statevent";function hn(d,v){le.call(this,ft.STAT_EVENT,d),this.stat=v}x(hn,le);function nr(d){const v=We();wt(v,new hn(v,d))}ft.Ma="timingevent";function Fd(d,v){le.call(this,ft.Ma,d),this.size=v}x(Fd,le);function Es(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},v)}function Cs(){this.g=!0}Cs.prototype.xa=function(){this.g=!1};function Vd(d,v,S,M,z,X){d.info(function(){if(d.g)if(X)for(var Z="",nt=X.split("&"),$t=0;$t<nt.length;$t++){var Qe=nt[$t].split("=");if(1<Qe.length){var Jt=Qe[0];Qe=Qe[1];var Xt=Jt.split("_");Z=2<=Xt.length&&Xt[1]=="type"?Z+(Jt+"="+Qe+"&"):Z+(Jt+"=redacted&")}}else Z=null;else Z=X;return"XMLHTTP REQ ("+M+") [attempt "+z+"]: "+v+`
`+S+`
`+Z})}function tg(d,v,S,M,z,X,Z){d.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+z+"]: "+v+`
`+S+`
`+X+" "+Z})}function _s(d,v,S,M){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+rg(d,S)+(M?" "+M:"")})}function No(d,v){d.info(function(){return"TIMEOUT: "+v})}Cs.prototype.info=function(){};function rg(d,v){if(!d.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(d=0;d<S.length;d++)if(Array.isArray(S[d])){var M=S[d];if(!(2>M.length)){var z=M[1];if(Array.isArray(z)&&!(1>z.length)){var X=z[0];if(X!="noop"&&X!="stop"&&X!="close")for(var Z=1;Z<z.length;Z++)z[Z]=""}}}}return Tr(S)}catch{return v}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Na;function Io(){}x(Io,Se),Io.prototype.g=function(){return new XMLHttpRequest},Io.prototype.i=function(){return{}},Na=new Io;function In(d,v,S,M){this.j=d,this.i=v,this.l=S,this.R=M||1,this.U=new dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bd}function Bd(){this.i=null,this.g="",this.h=!1}var Ud={},wc={};function bc(d,v,S){d.L=1,d.v=Da(Qr(v)),d.m=S,d.P=!0,Ia(d,null)}function Ia(d,v){d.F=Date.now(),Ra(d),d.A=Qr(d.v);var S=d.A,M=d.R;Array.isArray(M)||(M=[String(M)]),Jd(S.i,"t",M),d.C=0,S=d.j.J,d.h=new Bd,d.g=mh(d.j,S?v:null,!d.m),0<d.O&&(d.M=new ri(m(d.Y,d,d.g),d.O)),v=d.U,S=d.g,M=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(An[0]=z.toString()),z=An);for(var X=0;X<z.length;X++){var Z=lt(S,z[X],M||v.handleEvent,!1,v.h||v);if(!Z)break;v.g[Z.key]=Z}v=d.H?A(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),hr(),Vd(d.i,d.u,d.A,d.l,d.R,d.m)}In.prototype.ca=function(d){d=d.target;const v=this.M;v&&Pn(d)==3?v.j():this.Y(d)},In.prototype.Y=function(d){try{if(d==this.g)e:{const Xt=Pn(this.g);var v=this.g.Ba();const di=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||ih(this.g)))){this.J||Xt!=4||v==7||(v==8||0>=di?hr(3):hr(2)),Cc(this);var S=this.g.Z();this.X=S;t:if(qd(this)){var M=ih(this.g);d="";var z=M.length,X=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),Ro(this);var Z="";break t}this.h.i=new l.TextDecoder}for(v=0;v<z;v++)this.h.h=!0,d+=this.h.i.decode(M[v],{stream:!(X&&v==z-1)});M.length=0,this.h.g+=d,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=S==200,tg(this.i,this.u,this.A,this.l,this.R,Xt,S),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,$t=this.g;if((nt=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(nt)){var Qe=nt;break t}}Qe=null}if(S=Qe)_s(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,si(this,S);else{this.o=!1,this.s=3,nr(12),As(this),Ro(this);break e}}if(this.P){S=!0;let Hr;for(;!this.J&&this.C<Z.length;)if(Hr=ng(this,Z),Hr==wc){Xt==4&&(this.s=4,nr(14),S=!1),_s(this.i,this.l,null,"[Incomplete Response]");break}else if(Hr==Ud){this.s=4,nr(15),_s(this.i,this.l,Z,"[Invalid Chunk]"),S=!1;break}else _s(this.i,this.l,Hr,null),si(this,Hr);if(qd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||Z.length!=0||this.h.h||(this.s=1,nr(16),S=!1),this.o=this.o&&S,!S)_s(this.i,this.l,Z,"[Invalid Chunked Response]"),As(this),Ro(this);else if(0<Z.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Rc(Jt),Jt.M=!0,nr(11))}}else _s(this.i,this.l,Z,null),si(this,Z);Xt==4&&As(this),this.o&&!this.J&&(Xt==4?hh(this.j,this):(this.o=!1,Ra(this)))}else fg(this.g),S==400&&0<Z.indexOf("Unknown SID")?(this.s=3,nr(12)):(this.s=0,nr(13)),As(this),Ro(this)}}}catch{}finally{}};function qd(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function ng(d,v){var S=d.C,M=v.indexOf(`
`,S);return M==-1?wc:(S=Number(v.substring(S,M)),isNaN(S)?Ud:(M+=1,M+S>v.length?wc:(v=v.slice(M,M+S),d.C=M+S,v)))}In.prototype.cancel=function(){this.J=!0,As(this)};function Ra(d){d.S=Date.now()+d.I,Ec(d,d.I)}function Ec(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Es(m(d.ba,d),v)}function Cc(d){d.B&&(l.clearTimeout(d.B),d.B=null)}In.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(No(this.i,this.A),this.L!=2&&(hr(),nr(17)),As(this),this.s=2,Ro(this)):Ec(this,this.S-d)};function Ro(d){d.j.G==0||d.J||hh(d.j,d)}function As(d){Cc(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,Sn(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function si(d,v){try{var S=d.j;if(S.G!=0&&(S.g==d||Pa(S.h,d))){if(!d.K&&Pa(S.h,d)&&S.G==3){try{var M=S.Da.g.parse(v)}catch{M=null}if(Array.isArray(M)&&M.length==3){var z=M;if(z[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<d.F)Ba(S),Do(S);else break e;Ic(S),nr(18)}}else S.za=z[1],0<S.za-S.T&&37500>z[2]&&S.F&&S.v==0&&!S.C&&(S.C=Es(m(S.Za,S),6e3));if(1>=_c(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Is(S,11)}else if((d.K||S.g==d)&&Ba(S),!w(v))for(z=S.Da.g.parse(v),v=0;v<z.length;v++){let Qe=z[v];if(S.T=Qe[0],Qe=Qe[1],S.G==2)if(Qe[0]=="c"){S.K=Qe[1],S.ia=Qe[2];const Jt=Qe[3];Jt!=null&&(S.la=Jt,S.j.info("VER="+S.la));const Xt=Qe[4];Xt!=null&&(S.Aa=Xt,S.j.info("SVER="+S.Aa));const di=Qe[5];di!=null&&typeof di=="number"&&0<di&&(M=1.5*di,S.L=M,S.j.info("backChannelRequestTimeoutMs_="+M)),M=S;const Hr=d.g;if(Hr){const Ga=Hr.g?Hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ga){var X=M.h;X.g||Ga.indexOf("spdy")==-1&&Ga.indexOf("quic")==-1&&Ga.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ka(X,X.h),X.h=null))}if(M.D){const Pc=Hr.g?Hr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pc&&(M.ya=Pc,at(M.I,M.D,Pc))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-d.F,S.j.info("Handshake RTT: "+S.R+"ms")),M=S;var Z=d;if(M.qa=fh(M,M.J?M.ia:null,M.W),Z.K){Ve(M.h,Z);var nt=Z,$t=M.L;$t&&(nt.I=$t),nt.B&&(Cc(nt),Ra(nt)),M.g=Z}else uh(M);0<S.i.length&&Va(S)}else Qe[0]!="stop"&&Qe[0]!="close"||Is(S,7);else S.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Is(S,7):Nc(S):Qe[0]!="noop"&&S.l&&S.l.ta(Qe),S.v=0)}}hr(4)}catch{}}var sg=class{constructor(d,v){this.g=d,this.map=v}};function Gd(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Po(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function _c(d){return d.h?1:d.g?d.g.size:0}function Pa(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function ka(d,v){d.g?d.g.add(v):d.h=v}function Ve(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Gd.prototype.cancel=function(){if(this.i=$d(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function $d(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const S of d.g.values())v=v.concat(S.D);return v}return p(d.i)}function ig(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var v=[],S=d.length,M=0;M<S;M++)v.push(d[M]);return v}v=[],S=0;for(M in d)v[S++]=d[M];return v}function Wr(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var v=[];d=d.length;for(var S=0;S<d;S++)v.push(S);return v}v=[],S=0;for(const M in d)v[S++]=M;return v}}}function zd(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var S=Wr(d),M=ig(d),z=M.length,X=0;X<z;X++)v.call(void 0,M[X],S&&S[X],d)}var Tc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ja(d,v){if(d){d=d.split("&");for(var S=0;S<d.length;S++){var M=d[S].indexOf("="),z=null;if(0<=M){var X=d[S].substring(0,M);z=d[S].substring(M+1)}else X=d[S];v(X,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ss(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ss){this.h=d.h,Ma(this,d.j),this.o=d.o,this.g=d.g,ii(this,d.s),this.l=d.l;var v=d.i,S=new ko;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),Wd(this,S),this.m=d.m}else d&&(v=String(d).match(Tc))?(this.h=!1,Ma(this,v[1]||"",!0),this.o=Ns(v[2]||""),this.g=Ns(v[3]||"",!0),ii(this,v[4]),this.l=Ns(v[5]||"",!0),Wd(this,v[6]||"",!0),this.m=Ns(v[7]||"")):(this.h=!1,this.i=new ko(null,this.h))}Ss.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Sr(v,Qd,!0),":");var S=this.g;return(S||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Sr(v,Qd,!0),"@"),d.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&d.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(Sr(S,S.charAt(0)=="/"?Rn:og,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",Sr(S,ag)),d.join("")};function Qr(d){return new Ss(d)}function Ma(d,v,S){d.j=S?Ns(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function ii(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function Wd(d,v,S){v instanceof ko?(d.i=v,lg(d.i,d.h)):(S||(v=Sr(v,Hd)),d.i=new ko(v,d.h))}function at(d,v,S){d.i.set(v,S)}function Da(d){return at(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ns(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Sr(d,v,S){return typeof d=="string"?(d=encodeURI(d).replace(v,Ac),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Ac(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Qd=/[#\/\?@]/g,og=/[#\?:]/g,Rn=/[#\?]/g,Hd=/[#\?@]/g,ag=/#/g;function ko(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Kn(d){d.g||(d.g=new Map,d.h=0,d.i&&ja(d.i,function(v,S){d.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}t=ko.prototype,t.add=function(d,v){Kn(this),this.i=null,d=oi(this,d);var S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(v),this.h+=1,this};function Yd(d,v){Kn(d),v=oi(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Kd(d,v){return Kn(d),v=oi(d,v),d.g.has(v)}t.forEach=function(d,v){Kn(this),this.g.forEach(function(S,M){S.forEach(function(z){d.call(v,z,M,this)},this)},this)},t.na=function(){Kn(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let M=0;M<v.length;M++){const z=d[M];for(let X=0;X<z.length;X++)S.push(v[M])}return S},t.V=function(d){Kn(this);let v=[];if(typeof d=="string")Kd(this,d)&&(v=v.concat(this.g.get(oi(this,d))));else{d=Array.from(this.g.values());for(let S=0;S<d.length;S++)v=v.concat(d[S])}return v},t.set=function(d,v){return Kn(this),this.i=null,d=oi(this,d),Kd(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},t.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function Jd(d,v,S){Yd(d,v),0<S.length&&(d.i=null,d.g.set(oi(d,v),p(S)),d.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var M=v[S];const X=encodeURIComponent(String(M)),Z=this.V(M);for(M=0;M<Z.length;M++){var z=X;Z[M]!==""&&(z+="="+encodeURIComponent(String(Z[M]))),d.push(z)}}return this.i=d.join("&")};function oi(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function lg(d,v){v&&!d.j&&(Kn(d),d.i=null,d.g.forEach(function(S,M){var z=M.toLowerCase();M!=z&&(Yd(this,M),Jd(this,z,S))},d)),d.j=v}function cg(d,v){const S=new Cs;if(l.Image){const M=new Image;M.onload=g(Nr,S,"TestLoadImage: loaded",!0,v,M),M.onerror=g(Nr,S,"TestLoadImage: error",!1,v,M),M.onabort=g(Nr,S,"TestLoadImage: abort",!1,v,M),M.ontimeout=g(Nr,S,"TestLoadImage: timeout",!1,v,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=d}else v(!1)}function ug(d,v){const S=new Cs,M=new AbortController,z=setTimeout(()=>{M.abort(),Nr(S,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:M.signal}).then(X=>{clearTimeout(z),X.ok?Nr(S,"TestPingServer: ok",!0,v):Nr(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(z),Nr(S,"TestPingServer: error",!1,v)})}function Nr(d,v,S,M,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),M(S)}catch{}}function Xd(){this.g=new xc}function Zd(d,v,S){const M=S||"";try{zd(d,function(z,X){let Z=z;u(z)&&(Z=Tr(z)),v.push(M+X+"="+encodeURIComponent(Z))})}catch(z){throw v.push(M+"type="+encodeURIComponent("_badmap")),z}}function jo(d){this.l=d.Ub||null,this.j=d.eb||!1}x(jo,Se),jo.prototype.g=function(){return new Oa(this.l,this.j)},jo.prototype.i=function(d){return function(){return d}}({});function Oa(d,v){Nt.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Oa,Nt),t=Oa.prototype,t.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,Mo(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Mo(this)),this.g&&(this.readyState=3,Mo(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eh(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function eh(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?ai(this):Mo(this),this.readyState==3&&eh(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ai(this))},t.Qa=function(d){this.g&&(this.response=d,ai(this))},t.ga=function(){this.g&&ai(this)};function ai(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Mo(d)}t.setRequestHeader=function(d,v){this.u.append(d,v)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=v.next();return d.join(`\r
`)};function Mo(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function th(d){let v="";return V(d,function(S,M){v+=M,v+=":",v+=S,v+=`\r
`}),v}function Sc(d,v,S){e:{for(M in S){var M=!1;break e}M=!0}M||(S=th(S),typeof d=="string"?S!=null&&encodeURIComponent(String(S)):at(d,v,S))}function bt(d){Nt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(bt,Nt);var dg=/^https?$/i,hg=["POST","PUT"];t=bt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,v,S,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Na.g(),this.v=this.o?Ge(this.o):Ge(Na),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(X){rh(this,X);return}if(d=S||"",S=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var z in M)S.set(z,M[z]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const X of M.keys())S.set(X,M.get(X));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(S.keys()).find(X=>X.toLowerCase()=="content-type"),z=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(hg,v,void 0))||M||z||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,Z]of S)this.g.setRequestHeader(X,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fa(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){rh(this,X)}};function rh(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,nh(d),La(d)}function nh(d){d.A||(d.A=!0,wt(d,"complete"),wt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,wt(this,"complete"),wt(this,"abort"),La(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),La(this,!0)),bt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sh(this):this.bb())},t.bb=function(){sh(this)};function sh(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Pn(d)!=4||d.Z()!=2)){if(d.u&&Pn(d)==4)Tn(d.Ea,0,d);else if(wt(d,"readystatechange"),Pn(d)==4){d.h=!1;try{const Z=d.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var M;if(M=Z===0){var z=String(d.D).match(Tc)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),M=!dg.test(z?z.toLowerCase():"")}S=M}if(S)wt(d,"complete"),wt(d,"success");else{d.m=6;try{var X=2<Pn(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",nh(d)}}finally{La(d)}}}}function La(d,v){if(d.g){Fa(d);const S=d.g,M=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||wt(d,"ready");try{S.onreadystatechange=M}catch{}}}function Fa(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Pn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Ar(v)}};function ih(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function fg(d){const v={};d=(d.g&&2<=Pn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<d.length;M++){if(w(d[M]))continue;var S=D(d[M]);const z=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const X=v[z]||[];v[z]=X,X.push(S)}I(v,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function li(d,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||v}function oh(d){this.Aa=0,this.i=[],this.j=new Cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=li("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=li("baseRetryDelayMs",5e3,d),this.cb=li("retryDelaySeedMs",1e4,d),this.Wa=li("forwardChannelMaxRetries",2,d),this.wa=li("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Gd(d&&d.concurrentRequestLimit),this.Da=new Xd,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=oh.prototype,t.la=8,t.G=1,t.connect=function(d,v,S,M){nr(0),this.W=d,this.H=v||{},S&&M!==void 0&&(this.H.OSID=S,this.H.OAID=M),this.F=this.X,this.I=fh(this,null,this.W),Va(this)};function Nc(d){if(ah(d),d.G==3){var v=d.U++,S=Qr(d.I);if(at(S,"SID",d.K),at(S,"RID",v),at(S,"TYPE","terminate"),Oo(d,S),v=new In(d,d.j,v),v.L=2,v.v=Da(Qr(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&l.Image&&(new Image().src=v.v,S=!0),S||(v.g=mh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ra(v)}ci(d)}function Do(d){d.g&&(Rc(d),d.g.cancel(),d.g=null)}function ah(d){Do(d),d.u&&(l.clearTimeout(d.u),d.u=null),Ba(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Va(d){if(!Po(d.h)&&!d.s){d.s=!0;var v=d.Ga;se||ie(),G||(se(),G=!0),W.add(v,d),d.B=0}}function mg(d,v){return _c(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Es(m(d.Ga,d,v),Ua(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new In(this,this.j,d);let X=this.o;if(this.S&&(X?(X=A(X),P(X,this.S)):X=this.S),this.m!==null||this.O||(z.H=X,X=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var M=this.i[S];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(v+=M,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=ch(this,z,v),S=Qr(this.I),at(S,"RID",d),at(S,"CVER",22),this.D&&at(S,"X-HTTP-Session-Id",this.D),Oo(this,S),X&&(this.O?v="headers="+encodeURIComponent(String(th(X)))+"&"+v:this.m&&Sc(S,this.m,X)),ka(this.h,z),this.Ua&&at(S,"TYPE","init"),this.P?(at(S,"$req",v),at(S,"SID","null"),z.T=!0,bc(z,S,null)):bc(z,S,v),this.G=2}}else this.G==3&&(d?lh(this,d):this.i.length==0||Po(this.h)||lh(this))};function lh(d,v){var S;v?S=v.l:S=d.U++;const M=Qr(d.I);at(M,"SID",d.K),at(M,"RID",S),at(M,"AID",d.T),Oo(d,M),d.m&&d.o&&Sc(M,d.m,d.o),S=new In(d,d.j,S,d.B+1),d.m===null&&(S.H=d.o),v&&(d.i=v.D.concat(d.i)),v=ch(d,S,1e3),S.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ka(d.h,S),bc(S,M,v)}function Oo(d,v){d.H&&V(d.H,function(S,M){at(v,M,S)}),d.l&&zd({},function(S,M){at(v,M,S)})}function ch(d,v,S){S=Math.min(d.i.length,S);var M=d.l?m(d.l.Na,d.l,d):null;e:{var z=d.i;let X=-1;for(;;){const Z=["count="+S];X==-1?0<S?(X=z[0].g,Z.push("ofs="+X)):X=0:Z.push("ofs="+X);let nt=!0;for(let $t=0;$t<S;$t++){let Qe=z[$t].g;const Jt=z[$t].map;if(Qe-=X,0>Qe)X=Math.max(0,z[$t].g-100),nt=!1;else try{Zd(Jt,Z,"req"+Qe+"_")}catch{M&&M(Jt)}}if(nt){M=Z.join("&");break e}}}return d=d.i.splice(0,S),v.D=d,M}function uh(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;se||ie(),G||(se(),G=!0),W.add(v,d),d.v=0}}function Ic(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Es(m(d.Fa,d),Ua(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,dh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Es(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nr(10),Do(this),dh(this))};function Rc(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function dh(d){d.g=new In(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=Qr(d.qa);at(v,"RID","rpc"),at(v,"SID",d.K),at(v,"AID",d.T),at(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&at(v,"TO",d.ja),at(v,"TYPE","xmlhttp"),Oo(d,v),d.m&&d.o&&Sc(v,d.m,d.o),d.L&&(d.g.I=d.L);var S=d.g;d=d.ia,S.L=1,S.v=Da(Qr(v)),S.m=null,S.P=!0,Ia(S,d)}t.Za=function(){this.C!=null&&(this.C=null,Do(this),Ic(this),nr(19))};function Ba(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function hh(d,v){var S=null;if(d.g==v){Ba(d),Rc(d),d.g=null;var M=2}else if(Pa(d.h,v))S=v.D,Ve(d.h,v),M=1;else return;if(d.G!=0){if(v.o)if(M==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var z=d.B;M=We(),wt(M,new Fd(M,S)),Va(d)}else uh(d);else if(z=v.s,z==3||z==0&&0<v.X||!(M==1&&mg(d,v)||M==2&&Ic(d)))switch(S&&0<S.length&&(v=d.h,v.i=v.i.concat(S)),z){case 1:Is(d,5);break;case 4:Is(d,10);break;case 3:Is(d,6);break;default:Is(d,2)}}}function Ua(d,v){let S=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(S*=2),S*v}function Is(d,v){if(d.j.info("Error code "+v),v==2){var S=m(d.fb,d),M=d.Xa;const z=!M;M=new Ss(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ma(M,"https"),Da(M),z?cg(M.toString(),S):ug(M.toString(),S)}else nr(2);d.G=0,d.l&&d.l.sa(v),ci(d),ah(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),nr(2)):(this.j.info("Failed to ping google.com"),nr(1))};function ci(d){if(d.G=0,d.ka=[],d.l){const v=$d(d.h);(v.length!=0||d.i.length!=0)&&(b(d.ka,v),b(d.ka,d.i),d.h.i.length=0,p(d.i),d.i.length=0),d.l.ra()}}function fh(d,v,S){var M=S instanceof Ss?Qr(S):new Ss(S);if(M.g!="")v&&(M.g=v+"."+M.g),ii(M,M.s);else{var z=l.location;M=z.protocol,v=v?v+"."+z.hostname:z.hostname,z=+z.port;var X=new Ss(null);M&&Ma(X,M),v&&(X.g=v),z&&ii(X,z),S&&(X.l=S),M=X}return S=d.D,v=d.ya,S&&v&&at(M,S,v),at(M,"VER",d.la),Oo(d,M),M}function mh(d,v,S){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new bt(new jo({eb:S})):new bt(d.pa),v.Ha(d.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ph(){}t=ph.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qa(){}qa.prototype.g=function(d,v){return new Ir(d,v)};function Ir(d,v){Nt.call(this),this.g=new oh(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!w(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!w(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new ui(this)}x(Ir,Nt),Ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ir.prototype.close=function(){Nc(this.g)},Ir.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.u&&(S={},S.__data__=Tr(d),d=S);v.i.push(new sg(v.Ya++,d)),v.G==3&&Va(v)},Ir.prototype.N=function(){this.g.l=null,delete this.j,Nc(this.g),delete this.g,Ir.aa.N.call(this)};function gh(d){dr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const S in v){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}x(gh,dr);function yh(){Nn.call(this),this.status=1}x(yh,Nn);function ui(d){this.g=d}x(ui,ph),ui.prototype.ua=function(){wt(this.g,"a")},ui.prototype.ta=function(d){wt(this.g,new gh(d))},ui.prototype.sa=function(d){wt(this.g,new yh)},ui.prototype.ra=function(){wt(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,Ir.prototype.send=Ir.prototype.o,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,LS=function(){return new qa},OS=function(){return We()},DS=ft,_y={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,xf=Ts,Sa.COMPLETE="complete",MS=Sa,Je.EventType=Kt,Kt.OPEN="a",Kt.CLOSE="b",Kt.ERROR="c",Kt.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Yc=Je,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,jS=bt}).apply(typeof Gh<"u"?Gh:typeof self<"u"?self:typeof window<"u"?window:{});const z1="@firebase/firestore",W1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new jx("@firebase/firestore");function Ha(){return ca.logLevel}function pe(t,...e){if(ca.logLevel<=$e.DEBUG){const r=e.map(Lx);ca.debug(`Firestore (${ic}): ${t}`,...r)}}function Qs(t,...e){if(ca.logLevel<=$e.ERROR){const r=e.map(Lx);ca.error(`Firestore (${ic}): ${t}`,...r)}}function eo(t,...e){if(ca.logLevel<=$e.WARN){const r=e.map(Lx);ca.warn(`Firestore (${ic}): ${t}`,...r)}}function Lx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,FS(t,n,r)}function FS(t,e,r){let n=`FIRESTORE (${ic}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Qs(n),new Error(n)}function tt(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||FS(e,s,n)}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ei{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(vr.UNAUTHENTICATED))}shutdown(){}}class D5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class O5{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){tt(this.o===void 0,42304);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let i=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bs)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(tt(typeof n.accessToken=="string",31837,{l:n}),new VS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new vr(e)}}class L5{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class F5{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new L5(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Q1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V5{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){tt(this.o===void 0,3512);const n=i=>{i.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Q1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(tt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Q1(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=B5(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function Le(t,e){return t<e?-1:t>e?1:0}function Ty(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),s=e.codePointAt(r);if(n!==s){if(n<128&&s<128)return Le(n,s);{const i=BS(),o=U5(i.encode(H1(t,r)),i.encode(H1(e,r)));return o!==0?o:Le(n,s)}}r+=n>65535?2:1}return Le(t.length,e.length)}function H1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function U5(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return Le(t[r],e[r]);return Le(t.length,e.length)}function zl(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="__name__";class es{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ie(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Ie(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=es.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return Le(e.length,r.length)}static compareSegments(e,r){const n=es.isNumericId(e),s=es.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?es.extractNumericId(e).compare(es.extractNumericId(r)):Ty(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hi.fromString(e.substring(4,e.length-2))}}class ut extends es{construct(e,r,n){return new ut(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new fe(ee.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new ut(r)}static emptyPath(){return new ut([])}}const q5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends es{construct(e,r,n){return new or(e,r,n)}static isValidIdentifier(e){return q5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y1}static keyField(){return new or([Y1])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new fe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new fe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(i(),s++)}if(i(),o)throw new fe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(r)}static emptyPath(){return new or([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ut.fromString(e))}static fromName(e){return new Ee(ut.fromString(e).popFirst(5))}static empty(){return new Ee(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ut.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e,r){if(!r)throw new fe(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function G5(t,e,r,n){if(e===!0&&n===!0)throw new fe(ee.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function K1(t){if(!Ee.isDocumentKey(t))throw new fe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function J1(t){if(Ee.isDocumentKey(t))throw new fe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=cp(t);throw new fe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t,e){const r={typeString:t};return e&&(r.value=e),r}function bd(t,e){if(!qS(t))throw new fe(ee.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(s&&typeof o!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new fe(ee.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=-62135596800,Z1=1e6;class Fe{static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*Z1);return new Fe(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<X1)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z1}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bd(e,Fe._jsonSchema))return new Fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-X1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fe._jsonSchemaVersion="firestore/timestamp/1.0",Fe._jsonSchema={type:qt("string",Fe._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Fe(0,0))}static max(){return new Re(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=-1;function $5(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(n===1e9?new Fe(r+1,0):new Fe(r,n));return new to(s,Ee.empty(),e)}function z5(t){return new to(t.readTime,t.key,Gu)}class to{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new to(Re.min(),Ee.empty(),Gu)}static max(){return new to(Re.max(),Ee.empty(),Gu)}}function W5(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ee.comparator(t.documentKey,e.documentKey),r!==0?r:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==Q5)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new te((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof te?r:te.resolve(r)}catch(r){return te.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):te.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):te.reject(r)}static resolve(e){return new te((r,n)=>{r(e)})}static reject(e){return new te((r,n)=>{n(e)})}static waitFor(e){return new te((r,n)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&r()},c=>n(c))}),o=!0,i===s&&r()})}static or(e){let r=te.resolve(!1);for(const n of e)r=r.next(s=>s?te.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new te((n,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;r(e[u]).next(h=>{o[u]=h,++l,l===i&&n(o)},h=>s(h))}})}static doWhile(e,r){return new te((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function Y5(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ac(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this._e(n),this.ae=n=>r.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}up.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=-1;function dp(t){return t==null}function fm(t){return t===0&&1/t==-1/0}function K5(t){return typeof t=="number"&&Number.isInteger(t)&&!fm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="";function J5(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=eE(e)),e=X5(t.get(r),e);return eE(e)}function X5(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case GS:r+="";break;default:r+=i}}return r}function eE(t){return t+GS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function yo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function $S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,r){this.comparator=e,this.root=r||ir.EMPTY}insert(e,r){return new St(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ir.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ir.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $h(this.root,e,this.comparator,!1)}getReverseIterator(){return new $h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $h(this.root,e,this.comparator,!0)}}class $h{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ir{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ir.RED,this.left=s??ir.EMPTY,this.right=i??ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ir(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ir.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}ir.EMPTY=null,ir.RED=!0,ir.BLACK=!1;ir.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new ir(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new rE(this.data.getIterator())}getIteratorFrom(e){return new rE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ht(this.comparator);return r.data=e,r}}class rE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new rn([])}unionWith(e){let r=new Ht(or.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new rn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return zl(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zS("Invalid base64 string: "+i):i}}(e);return new cr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new cr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const Z5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(t){if(tt(!!t,39018),typeof t=="string"){let e=0;const r=Z5.exec(t);if(tt(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function no(t){return typeof t=="string"?cr.fromBase64String(t):cr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="server_timestamp",QS="__type__",HS="__previous_value__",YS="__local_write_time__";function Bx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[QS])===null||r===void 0?void 0:r.stringValue)===WS}function hp(t){const e=t.mapValue.fields[HS];return Bx(e)?hp(e):e}function $u(t){const e=ro(t.mapValue.fields[YS].timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,r,n,s,i,o,l,c,u,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const mm="(default)";class zu{constructor(e,r){this.projectId=e,this.database=r||mm}static empty(){return new zu("","")}get isDefaultDatabase(){return this.database===mm}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="__type__",JS="__max__",zh={mapValue:{fields:{__type__:{stringValue:JS}}}},XS="__vector__",pm="value";function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bx(t)?4:rL(t)?9007199254740991:tL(t)?10:11:Ie(28295,{value:t})}function ps(t,e){if(t===e)return!0;const r=so(t);if(r!==so(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $u(t).isEqual($u(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ro(s.timestampValue),l=ro(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return no(s.bytesValue).isEqual(no(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Mt(s.geoPointValue.latitude)===Mt(i.geoPointValue.latitude)&&Mt(s.geoPointValue.longitude)===Mt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Mt(s.integerValue)===Mt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Mt(s.doubleValue),l=Mt(i.doubleValue);return o===l?fm(o)===fm(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return zl(t.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(tE(o)!==tE(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ps(o[c],l[c])))return!1;return!0}(t,e);default:return Ie(52216,{left:t})}}function Wu(t,e){return(t.values||[]).find(r=>ps(r,e))!==void 0}function Wl(t,e){if(t===e)return 0;const r=so(t),n=so(e);if(r!==n)return Le(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Mt(i.integerValue||i.doubleValue),c=Mt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return nE(t.timestampValue,e.timestampValue);case 4:return nE($u(t),$u(e));case 5:return Ty(t.stringValue,e.stringValue);case 6:return function(i,o){const l=no(i),c=no(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Le(l[u],c[u]);if(h!==0)return h}return Le(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Le(Mt(i.latitude),Mt(o.latitude));return l!==0?l:Le(Mt(i.longitude),Mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sE(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,h;const f=i.fields||{},m=o.fields||{},g=(l=f[pm])===null||l===void 0?void 0:l.arrayValue,x=(c=m[pm])===null||c===void 0?void 0:c.arrayValue,p=Le(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return p!==0?p:sE(g,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===zh.mapValue&&o===zh.mapValue)return 0;if(i===zh.mapValue)return 1;if(o===zh.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Ty(c[f],h[f]);if(m!==0)return m;const g=Wl(l[c[f]],u[h[f]]);if(g!==0)return g}return Le(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Ie(23264,{le:r})}}function nE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const r=ro(t),n=ro(e),s=Le(r.seconds,n.seconds);return s!==0?s:Le(r.nanos,n.nanos)}function sE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Wl(r[s],n[s]);if(i)return i}return Le(r.length,n.length)}function Ql(t){return Ay(t)}function Ay(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ro(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return no(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ee.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Ay(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${Ay(r.fields[o])}`;return s+"}"}(t.mapValue):Ie(61005,{value:t})}function wf(t){switch(so(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hp(t);return e?16+wf(e):16;case 5:return 2*t.stringValue.length;case 6:return no(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+wf(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return yo(n.fields,(i,o)=>{s+=i.length+wf(o)}),s}(t.mapValue);default:throw Ie(13486,{value:t})}}function iE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sy(t){return!!t&&"integerValue"in t}function Ux(t){return!!t&&"arrayValue"in t}function oE(t){return!!t&&"nullValue"in t}function aE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bf(t){return!!t&&"mapValue"in t}function tL(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[KS])===null||r===void 0?void 0:r.stringValue)===XS}function pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return yo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=pu(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=pu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function rL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===JS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!bf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(r)}setAll(e){let r=or.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=pu(o):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());bf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];bf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){yo(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Ur(pu(this.value))}}function ZS(t){const e=[];return yo(t.fields,(r,n)=>{const s=new or([r]);if(bf(n)){const i=ZS(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,r,n,s,i,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wr(e,0,Re.min(),Re.min(),Re.min(),Ur.empty(),0)}static newFoundDocument(e,r,n,s){return new wr(e,1,r,Re.min(),n,s,0)}static newNoDocument(e,r){return new wr(e,2,r,Re.min(),Re.min(),Ur.empty(),0)}static newUnknownDocument(e,r){return new wr(e,3,r,Re.min(),Re.min(),Ur.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,r){this.position=e,this.inclusive=r}}function lE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=Ee.comparator(Ee.fromName(o.referenceValue),r.key):n=Wl(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function cE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ps(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,r="asc"){this.field=e,this.dir=r}}function nL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{}class Ut extends eN{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new iL(e,r,n):r==="array-contains"?new lL(e,n):r==="in"?new cL(e,n):r==="not-in"?new uL(e,n):r==="array-contains-any"?new dL(e,n):new Ut(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new oL(e,n):new aL(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Wl(r,this.value)):r!==null&&so(this.value)===so(r)&&this.matchesComparison(Wl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends eN{constructor(e,r){super(),this.filters=e,this.op=r,this.he=null}static create(e,r){return new zn(e,r)}matches(e){return tN(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function tN(t){return t.op==="and"}function rN(t){return sL(t)&&tN(t)}function sL(t){for(const e of t.filters)if(e instanceof zn)return!1;return!0}function Ny(t){if(t instanceof Ut)return t.field.canonicalString()+t.op.toString()+Ql(t.value);if(rN(t))return t.filters.map(e=>Ny(e)).join(",");{const e=t.filters.map(r=>Ny(r)).join(",");return`${t.op}(${e})`}}function nN(t,e){return t instanceof Ut?function(n,s){return s instanceof Ut&&n.op===s.op&&n.field.isEqual(s.field)&&ps(n.value,s.value)}(t,e):t instanceof zn?function(n,s){return s instanceof zn&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,l)=>i&&nN(o,s.filters[l]),!0):!1}(t,e):void Ie(19439)}function sN(t){return t instanceof Ut?function(r){return`${r.field.canonicalString()} ${r.op} ${Ql(r.value)}`}(t):t instanceof zn?function(r){return r.op.toString()+" {"+r.getFilters().map(sN).join(" ,")+"}"}(t):"Filter"}class iL extends Ut{constructor(e,r,n){super(e,r,n),this.key=Ee.fromName(n.referenceValue)}matches(e){const r=Ee.comparator(e.key,this.key);return this.matchesComparison(r)}}class oL extends Ut{constructor(e,r){super(e,"in",r),this.keys=iN("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class aL extends Ut{constructor(e,r){super(e,"not-in",r),this.keys=iN("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function iN(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ee.fromName(n.referenceValue))}class lL extends Ut{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Ux(r)&&Wu(r.arrayValue,this.value)}}class cL extends Ut{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Wu(this.value.arrayValue,r)}}class uL extends Ut{constructor(e,r){super(e,"not-in",r)}matches(e){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Wu(this.value.arrayValue,r)}}class dL extends Ut{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Ux(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Wu(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,r=null,n=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function uE(t,e=null,r=[],n=[],s=null,i=null,o=null){return new hL(t,e,r,n,s,i,o)}function qx(t){const e=ke(t);if(e.Pe===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Ny(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),dp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Ql(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Ql(n)).join(",")),e.Pe=r}return e.Pe}function Gx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!nL(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!nN(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cE(t.startAt,e.startAt)&&cE(t.endAt,e.endAt)}function Iy(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,r=null,n=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function fL(t,e,r,n,s,i,o,l){return new lc(t,e,r,n,s,i,o,l)}function fp(t){return new lc(t)}function dE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oN(t){return t.collectionGroup!==null}function gu(t){const e=ke(t);if(e.Te===null){e.Te=[];const r=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ht(or.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Qu(i,n))}),r.has(or.keyField().canonicalString())||e.Te.push(new Qu(or.keyField(),n))}return e.Te}function cs(t){const e=ke(t);return e.Ie||(e.Ie=mL(e,gu(t))),e.Ie}function mL(t,e){if(t.limitType==="F")return uE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Qu(s.field,i)});const r=t.endAt?new gm(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new gm(t.startAt.position,t.startAt.inclusive):null;return uE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Ry(t,e){const r=t.filters.concat([e]);return new lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Py(t,e,r){return new lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function mp(t,e){return Gx(cs(t),cs(e))&&t.limitType===e.limitType}function aN(t){return`${qx(cs(t))}|lt:${t.limitType}`}function Ya(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>sN(s)).join(", ")}]`),dp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Ql(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Ql(s)).join(",")),`Target(${n})`}(cs(t))}; limitType=${t.limitType})`}function pp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ee.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of gu(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,c){const u=lE(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,gu(n),s)||n.endAt&&!function(o,l,c){const u=lE(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,gu(n),s))}(t,e)}function pL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lN(t){return(e,r)=>{let n=!1;for(const s of gu(t)){const i=gL(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function gL(t,e,r){const n=t.field.isKeyField()?Ee.comparator(e.key,r.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Wl(c,u):Ie(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return $S(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new St(Ee.comparator);function Hs(){return yL}const cN=new St(Ee.comparator);function Kc(...t){let e=cN;for(const r of t)e=e.insert(r.key,r);return e}function uN(t){let e=cN;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Go(){return yu()}function dN(){return yu()}function yu(){return new wa(t=>t.toString(),(t,e)=>t.isEqual(e))}const vL=new St(Ee.comparator),xL=new Ht(Ee.comparator);function ze(...t){let e=xL;for(const r of t)e=e.add(r);return e}const wL=new Ht(Le);function bL(){return wL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fm(e)?"-0":e}}function hN(t){return{integerValue:""+t}}function fN(t,e){return K5(e)?hN(e):$x(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this._=void 0}}function EL(t,e,r){return t instanceof ym?function(s,i){const o={fields:{[QS]:{stringValue:WS},[YS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Bx(i)&&(i=hp(i)),i&&(o.fields[HS]=i),{mapValue:o}}(r,e):t instanceof Hu?pN(t,e):t instanceof Yu?gN(t,e):function(s,i){const o=mN(s,i),l=hE(o)+hE(s.Ee);return Sy(o)&&Sy(s.Ee)?hN(l):$x(s.serializer,l)}(t,e)}function CL(t,e,r){return t instanceof Hu?pN(t,e):t instanceof Yu?gN(t,e):r}function mN(t,e){return t instanceof Ku?function(n){return Sy(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class ym extends gp{}class Hu extends gp{constructor(e){super(),this.elements=e}}function pN(t,e){const r=yN(e);for(const n of t.elements)r.some(s=>ps(s,n))||r.push(n);return{arrayValue:{values:r}}}class Yu extends gp{constructor(e){super(),this.elements=e}}function gN(t,e){let r=yN(e);for(const n of t.elements)r=r.filter(s=>!ps(s,n));return{arrayValue:{values:r}}}class Ku extends gp{constructor(e,r){super(),this.serializer=e,this.Ee=r}}function hE(t){return Mt(t.integerValue||t.doubleValue)}function yN(t){return Ux(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,r){this.field=e,this.transform=r}}function TL(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Hu&&s instanceof Hu||n instanceof Yu&&s instanceof Yu?zl(n.elements,s.elements,ps):n instanceof Ku&&s instanceof Ku?ps(n.Ee,s.Ee):n instanceof ym&&s instanceof ym}(t.transform,e.transform)}class AL{constructor(e,r){this.version=e,this.transformResults=r}}class Gn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ef(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let yp=class{};function vN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zx(t.key,Gn.none()):new Ed(t.key,t.data,Gn.none());{const r=t.data,n=Ur.empty();let s=new Ht(or.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new vo(t.key,n,new rn(s.toArray()),Gn.none())}}function SL(t,e,r){t instanceof Ed?function(s,i,o){const l=s.value.clone(),c=mE(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof vo?function(s,i,o){if(!Ef(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=mE(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(xN(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function vu(t,e,r,n){return t instanceof Ed?function(i,o,l,c){if(!Ef(i.precondition,o))return l;const u=i.value.clone(),h=pE(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof vo?function(i,o,l,c){if(!Ef(i.precondition,o))return l;const u=pE(i.fieldTransforms,c,o),h=o.data;return h.setAll(xN(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,o,l){return Ef(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function NL(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=mN(n.transform,s||null);i!=null&&(r===null&&(r=Ur.empty()),r.set(n.field,i))}return r||null}function fE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&zl(n,s,(i,o)=>TL(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ed extends yp{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class vo extends yp{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xN(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function mE(t,e,r){const n=new Map;tt(t.length===r.length,32656,{Ae:r.length,Re:t.length});for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);n.set(i.field,CL(o,l,r[s]))}return n}function pE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,EL(i,o,e))}return n}class zx extends yp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IL extends yp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&SL(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=vu(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=vu(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=dN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=r.has(s.key)?null:l;const c=vN(o,l);c!==null&&n.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Re.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ze())}isEqual(e){return this.batchId===e.batchId&&zl(this.mutations,e.mutations,(r,n)=>fE(r,n))&&zl(this.baseMutations,e.baseMutations,(r,n)=>fE(r,n))}}class Wx{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){tt(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let s=function(){return vL}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new Wx(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,He;function jL(t){switch(t){case ee.OK:return Ie(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function wN(t){if(t===void 0)return Qs("GRPC error has no .code"),ee.UNKNOWN;switch(t){case Vt.OK:return ee.OK;case Vt.CANCELLED:return ee.CANCELLED;case Vt.UNKNOWN:return ee.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return ee.INTERNAL;case Vt.UNAVAILABLE:return ee.UNAVAILABLE;case Vt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Vt.NOT_FOUND:return ee.NOT_FOUND;case Vt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Vt.ABORTED:return ee.ABORTED;case Vt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Vt.DATA_LOSS:return ee.DATA_LOSS;default:return Ie(39323,{code:t})}}(He=Vt||(Vt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=new Hi([4294967295,4294967295],0);function gE(t){const e=BS().encode(t),r=new kS;return r.update(e),new Uint8Array(r.digest())}function yE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hi([r,n],0),new Hi([s,i],0)]}class Qx{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Jc(`Invalid padding: ${r}`);if(n<0)throw new Jc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Jc(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Jc(`Invalid padding when bitmap length is 0: ${r}`);this.fe=8*e.length-r,this.ge=Hi.fromNumber(this.fe)}pe(e,r,n){let s=e.add(r.multiply(Hi.fromNumber(n)));return s.compare(ML)===1&&(s=new Hi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const r=gE(e),[n,s]=yE(r);for(let i=0;i<this.hashCount;i++){const o=this.pe(n,s,i);if(!this.ye(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Qx(i,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const r=gE(e),[n,s]=yE(r);for(let i=0;i<this.hashCount;i++){const o=this.pe(n,s,i);this.we(o)}}we(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Cd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new vp(Re.min(),s,new St(Le),Hs(),ze())}}class Cd{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Cd(n,r,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,r,n,s){this.Se=e,this.removedTargetIds=r,this.key=n,this.be=s}}class bN{constructor(e,r){this.targetId=e,this.De=r}}class EN{constructor(e,r,n=cr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class vE{constructor(){this.ve=0,this.Ce=xE(),this.Fe=cr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ze(),r=ze(),n=ze();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Ie(38017,{changeType:i})}}),new Cd(this.Fe,this.Me,e,r,n)}ke(){this.xe=!1,this.Ce=xE()}qe(e,r){this.xe=!0,this.Ce=this.Ce.insert(e,r)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class DL{constructor(e){this.We=e,this.Ge=new Map,this.ze=Hs(),this.je=Wh(),this.Je=Wh(),this.He=new St(Le)}Ye(e){for(const r of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(r,e.be):this.Xe(r,e.key,e.be);for(const r of e.removedTargetIds)this.Xe(r,e.key,e.be)}et(e){this.forEachTarget(e,r=>{const n=this.tt(r);switch(e.state){case 0:this.nt(r)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(r);break;case 3:this.nt(r)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(r)&&(this.rt(r),n.Be(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Ge.forEach((n,s)=>{this.nt(s)&&r(s)})}it(e){const r=e.targetId,n=e.De.count,s=this.st(r);if(s){const i=s.target;if(Iy(i))if(n===0){const o=new Ee(i.path);this.Xe(r,o,wr.newNoDocument(o,Re.min()))}else tt(n===1,20013,{expectedCount:n});else{const o=this.ot(r);if(o!==n){const l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(r,u)}}}}}_t(e){const r=e.De.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,l;try{o=no(n).toUint8Array()}catch(c){if(c instanceof zS)return eo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Qx(o,s,i)}catch(c){return eo(c instanceof Jc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,r,n){return r.De.count===n-this.ht(e,r.targetId)?0:2}ht(e,r){const n=this.We.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(r,i,null),s++)}),s}Pt(e){const r=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&Iy(l.target)){const c=new Ee(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,wr.newNoDocument(c,e))}i.Ne&&(r.set(o,i.Le()),i.ke())}});let n=ze();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new vp(e,r,this.He,this.ze,n);return this.ze=Hs(),this.je=Wh(),this.Je=Wh(),this.He=new St(Le),s}Ze(e,r){if(!this.nt(e))return;const n=this.It(e,r.key)?2:0;this.tt(e).qe(r.key,n),this.ze=this.ze.insert(r.key,r),this.je=this.je.insert(r.key,this.Tt(r.key).add(e)),this.Je=this.Je.insert(r.key,this.dt(r.key).add(e))}Xe(e,r,n){if(!this.nt(e))return;const s=this.tt(e);this.It(e,r)?s.qe(r,1):s.Qe(r),this.Je=this.Je.insert(r,this.dt(r).delete(e)),this.Je=this.Je.insert(r,this.dt(r).add(e)),n&&(this.ze=this.ze.insert(r,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const r=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let r=this.Ge.get(e);return r||(r=new vE,this.Ge.set(e,r)),r}dt(e){let r=this.Je.get(e);return r||(r=new Ht(Le),this.Je=this.Je.insert(e,r)),r}Tt(e){let r=this.je.get(e);return r||(r=new Ht(Le),this.je=this.je.insert(e,r)),r}nt(e){const r=this.st(e)!==null;return r||pe("WatchChangeAggregator","Detected inactive target",e),r}st(e){const r=this.Ge.get(e);return r&&r.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new vE),this.We.getRemoteKeysForTarget(e).forEach(r=>{this.Xe(e,r,null)})}It(e,r){return this.We.getRemoteKeysForTarget(e).has(r)}}function Wh(){return new St(Ee.comparator)}function xE(){return new St(Ee.comparator)}const OL={asc:"ASCENDING",desc:"DESCENDING"},LL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FL={and:"AND",or:"OR"};class VL{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function ky(t,e){return t.useProto3Json||dp(e)?e:{value:e}}function vm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BL(t,e){return vm(t,e.toTimestamp())}function us(t){return tt(!!t,49232),Re.fromTimestamp(function(r){const n=ro(r);return new Fe(n.seconds,n.nanos)}(t))}function Hx(t,e){return jy(t,e).canonicalString()}function jy(t,e){const r=function(s){return new ut(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function _N(t){const e=ut.fromString(t);return tt(IN(e),10190,{key:e.toString()}),e}function My(t,e){return Hx(t.databaseId,e.path)}function Xg(t,e){const r=_N(e);if(r.get(1)!==t.databaseId.projectId)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ee(AN(r))}function TN(t,e){return Hx(t.databaseId,e)}function UL(t){const e=_N(t);return e.length===4?ut.emptyPath():AN(e)}function Dy(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AN(t){return tt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function wE(t,e,r){return{name:My(t,e),fields:r.value.mapValue.fields}}function qL(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ie(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(tt(h===void 0||typeof h=="string",58123),cr.fromBase64String(h||"")):(tt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),cr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?ee.UNKNOWN:wN(u.code);return new fe(h,u.message||"")}(o);r=new EN(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Xg(t,n.document.name),i=us(n.document.updateTime),o=n.document.createTime?us(n.document.createTime):Re.min(),l=new Ur({mapValue:{fields:n.document.fields}}),c=wr.newFoundDocument(s,i,o,l),u=n.targetIds||[],h=n.removedTargetIds||[];r=new Cf(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Xg(t,n.document),i=n.readTime?us(n.readTime):Re.min(),o=wr.newNoDocument(s,i),l=n.removedTargetIds||[];r=new Cf([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Xg(t,n.document),i=n.removedTargetIds||[];r=new Cf([],i,s,null)}else{if(!("filter"in e))return Ie(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new kL(s,i),l=n.targetId;r=new bN(l,o)}}return r}function GL(t,e){let r;if(e instanceof Ed)r={update:wE(t,e.key,e.value)};else if(e instanceof zx)r={delete:My(t,e.key)};else if(e instanceof vo)r={update:wE(t,e.key,e.data),updateMask:XL(e.fieldMask)};else{if(!(e instanceof IL))return Ie(16599,{Rt:e.type});r={verify:My(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const l=o.transform;if(l instanceof ym)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Hu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ku)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw Ie(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:BL(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ie(27497)}(t,e.precondition)),r}function $L(t,e){return t&&t.length>0?(tt(e!==void 0,14353),t.map(r=>function(s,i){let o=s.updateTime?us(s.updateTime):us(i);return o.isEqual(Re.min())&&(o=us(i)),new AL(o,s.transformResults||[])}(r,e))):[]}function zL(t,e){return{documents:[TN(t,e.path)]}}function WL(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=TN(t,s);const i=function(u){if(u.length!==0)return NN(zn.create(u,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Ka(m.field),direction:YL(m.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=ky(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:r,parent:s}}function QL(t){let e=UL(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){tt(n===1,65062);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];r.where&&(i=function(f){const m=SN(f);return m instanceof zn&&rN(m)?m.getFilters():[m]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(m=>function(x){return new Qu(Ja(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,dp(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new gm(g,m)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new gm(g,m)}(r.endAt)),fL(e,s,o,i,l,"F",c,u)}function HL(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function SN(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ja(r.unaryFilter.field);return Ut.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ja(r.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ja(r.unaryFilter.field);return Ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ja(r.unaryFilter.field);return Ut.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(t):t.fieldFilter!==void 0?function(r){return Ut.create(Ja(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return zn.create(r.compositeFilter.filters.map(n=>SN(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(r.compositeFilter.op))}(t):Ie(30097,{filter:t})}function YL(t){return OL[t]}function KL(t){return LL[t]}function JL(t){return FL[t]}function Ka(t){return{fieldPath:t.canonicalString()}}function Ja(t){return or.fromServerFormat(t.fieldPath)}function NN(t){return t instanceof Ut?function(r){if(r.op==="=="){if(aE(r.value))return{unaryFilter:{field:Ka(r.field),op:"IS_NAN"}};if(oE(r.value))return{unaryFilter:{field:Ka(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(aE(r.value))return{unaryFilter:{field:Ka(r.field),op:"IS_NOT_NAN"}};if(oE(r.value))return{unaryFilter:{field:Ka(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(r.field),op:KL(r.op),value:r.value}}}(t):t instanceof zn?function(r){const n=r.getFilters().map(s=>NN(s));return n.length===1?n[0]:{compositeFilter:{op:JL(r.op),filters:n}}}(t):Ie(54877,{filter:t})}function XL(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function IN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,r,n,s,i=Re.min(),o=Re.min(),l=cr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.gt=e}}function eF(t){const e=QL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Py(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(){this.Dn=new rF}addToCollectionParentIndex(e,r){return this.Dn.add(r),te.resolve()}getCollectionParents(e,r){return te.resolve(this.Dn.getEntries(r))}addFieldIndex(e,r){return te.resolve()}deleteFieldIndex(e,r){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,r){return te.resolve()}getDocumentsMatchingTarget(e,r){return te.resolve(null)}getIndexType(e,r){return te.resolve(0)}getFieldIndexes(e,r){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,r){return te.resolve(to.min())}getMinOffsetFromCollectionGroup(e,r){return te.resolve(to.min())}updateCollectionGroup(e,r,n){return te.resolve()}updateIndexEntries(e,r){return te.resolve()}}class rF{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ht(ut.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ht(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RN=41943040;class Vr{static withCacheSize(e){return new Vr(e,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(RN,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Hl(0)}static ur(){return new Hl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="LruGarbageCollector",nF=1048576;function CE([t,e],[r,n]){const s=Le(t,r);return s===0?Le(e,n):s}class sF{constructor(e){this.Tr=e,this.buffer=new Ht(CE),this.Ir=0}dr(){return++this.Ir}Er(e){const r=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();CE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class iF{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pe(EE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ac(r)?pe(EE,"Ignoring IndexedDB error during garbage collection: ",r):await oc(r)}await this.Rr(3e5)})}}class oF{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.mr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return te.resolve(up.ue);const n=new sF(r);return this.Vr.forEachTarget(e,s=>n.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>n.Er(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Vr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(bE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bE):this.pr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,r){let n,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),Ha()<=$e.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function aF(t,e){return new oF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.changes=new wa(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?te.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&vu(n.mutation,s,rn.empty(),Fe.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ze()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ze()){const s=Go();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=Kc();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Go();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ze()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let i=Hs();const o=yu(),l=function(){return yu()}();return r.forEach((c,u)=>{const h=n.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof vo)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),vu(h.mutation,u,h.mutation.getFieldMask(),Fe.now())):o.set(u.key,rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),r.forEach((u,h)=>{var f;return l.set(u,new cF(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=yu();let s=new St((o,l)=>o-l),i=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let h=n.get(c)||rn.empty();h=l.applyToLocalView(u,h),n.set(c,h);const f=(s.get(l.batchId)||ze()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=dN();h.forEach(m=>{if(!i.has(m)){const g=vN(r.get(m),n.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return te.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return Ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):oN(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):te.resolve(Go());let l=Gu,c=i;return o.next(u=>te.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?te.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ze())).next(h=>({batchId:l,changes:uN(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ee(r)).next(n=>{let s=Kc();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=Kc();return this.indexManager.getCollectionParents(e,i).next(l=>te.forEach(l,c=>{const u=function(f,m){return new lc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,wr.newInvalidDocument(h)))});let l=Kc();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&vu(h.mutation,u,rn.empty(),Fe.now()),pp(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,r){return te.resolve(this.Br.get(r))}saveBundleMetadata(e,r){return this.Br.set(r.id,function(s){return{id:s.id,version:s.version,createTime:us(s.createTime)}}(r)),te.resolve()}getNamedQuery(e,r){return te.resolve(this.Lr.get(r))}saveNamedQuery(e,r){return this.Lr.set(r.name,function(s){return{name:s.name,query:eF(s.bundledQuery),readTime:us(s.readTime)}}(r)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(){this.overlays=new St(Ee.comparator),this.kr=new Map}getOverlay(e,r){return te.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Go();return te.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.wt(e,r,i)}),te.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.kr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(n)),te.resolve()}getOverlaysForCollection(e,r,n){const s=Go(),i=r.length+1,o=new Ee(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>n&&s.set(c.getKey(),c)}return te.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new St((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let h=i.get(u.largestBatchId);h===null&&(h=Go(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Go(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return te.resolve(l)}wt(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(n.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new PL(r,n));let i=this.kr.get(r);i===void 0&&(i=ze(),this.kr.set(r,i)),this.kr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.sessionToken=cr.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.qr=new Ht(er.Qr),this.$r=new Ht(er.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,r){const n=new er(e,r);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Wr(new er(e,r))}Gr(e,r){e.forEach(n=>this.removeReference(n,r))}zr(e){const r=new Ee(new ut([])),n=new er(r,e),s=new er(r,e+1),i=[];return this.$r.forEachInRange([n,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const r=new Ee(new ut([])),n=new er(r,e),s=new er(r,e+1);let i=ze();return this.$r.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new er(e,0),n=this.qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class er{constructor(e,r){this.key=e,this.Hr=r}static Qr(e,r){return Ee.comparator(e.key,r.key)||Le(e.Hr,r.Hr)}static Ur(e,r){return Le(e.Hr,r.Hr)||Ee.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.er=1,this.Yr=new Ht(er.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RL(i,r,n,s);this.mutationQueue.push(o);for(const l of s)this.Yr=this.Yr.add(new er(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return te.resolve(o)}lookupMutationBatch(e,r){return te.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.Xr(n),i=s<0?0:s;return te.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Vx:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new er(r,0),s=new er(r,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),te.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ht(Le);return r.forEach(s=>{const i=new er(s,0),o=new er(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{n=n.add(l.Hr)})}),te.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Ee.isDocumentKey(i)||(i=i.child(""));const o=new er(new Ee(i),0);let l=new Ht(Le);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),te.resolve(this.ei(l))}ei(e){const r=[];return e.forEach(n=>{const s=this.Zr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){tt(this.ti(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return te.forEach(r.mutations,s=>{const i=new er(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,r){const n=new er(r,0),s=this.Yr.firstAfterOrEqual(n);return te.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.ni=e,this.docs=function(){return new St(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.ni(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return te.resolve(n?n.document.mutableCopy():wr.newInvalidDocument(r))}getEntries(e,r){let n=Hs();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():wr.newInvalidDocument(s))}),te.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Hs();const o=r.path,l=new Ee(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||W5(z5(h),n)<=0||(s.has(h.key)||pp(r,h))&&(i=i.insert(h.key,h.mutableCopy()))}return te.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Ie(9500)}ri(e,r){return te.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new gF(this)}getSize(e){return te.resolve(this.size)}}class gF extends lF{constructor(e){super(),this.Or=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Or.addEntry(e,s)):this.Or.removeEntry(n)}),te.waitFor(r)}getFromCache(e,r){return this.Or.getEntry(e,r)}getAllFromCache(e,r){return this.Or.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.persistence=e,this.ii=new wa(r=>qx(r),Gx),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.si=0,this.oi=new Yx,this.targetCount=0,this._i=Hl.ar()}forEachTarget(e,r){return this.ii.forEach((n,s)=>r(s)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.si&&(this.si=r),te.resolve()}hr(e){this.ii.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this._i=new Hl(r),this.highestTargetId=r),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,r){return this.hr(r),this.targetCount+=1,te.resolve()}updateTargetData(e,r){return this.hr(r),te.resolve()}removeTargetData(e,r){return this.ii.delete(r.target),this.oi.zr(r.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),te.waitFor(i).next(()=>s)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,r){const n=this.ii.get(r)||null;return te.resolve(n)}addMatchingKeys(e,r,n){return this.oi.Kr(r,n),te.resolve()}removeMatchingKeys(e,r,n){this.oi.Gr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),te.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.oi.zr(r),te.resolve()}getMatchingKeysForTargetId(e,r){const n=this.oi.Jr(r);return te.resolve(n)}containsKey(e,r){return te.resolve(this.oi.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,r){this.ai={},this.overlays={},this.ui=new up(0),this.ci=!1,this.ci=!0,this.li=new fF,this.referenceDelegate=e(this),this.hi=new yF(this),this.indexManager=new tF,this.remoteDocumentCache=function(s){return new pF(s)}(n=>this.referenceDelegate.Pi(n)),this.serializer=new ZL(r),this.Ti=new dF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new hF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ai[e.toKey()];return n||(n=new mF(r,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,r,n){pe("MemoryPersistence","Starting transaction:",e);const s=new vF(this.ui.next());return this.referenceDelegate.Ii(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,r){return te.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,r)))}}class vF extends H5{constructor(e){super(),this.currentSequenceNumber=e}}class Kx{constructor(e){this.persistence=e,this.Ai=new Yx,this.Ri=null}static Vi(e){return new Kx(e)}get mi(){if(this.Ri)return this.Ri;throw Ie(60996)}addReference(e,r,n){return this.Ai.addReference(n,r),this.mi.delete(n.toString()),te.resolve()}removeReference(e,r,n){return this.Ai.removeReference(n,r),this.mi.add(n.toString()),te.resolve()}markPotentiallyOrphaned(e,r){return this.mi.add(r.toString()),te.resolve()}removeTarget(e,r){this.Ai.zr(r.targetId).forEach(s=>this.mi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ii(){this.Ri=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,n=>{const s=Ee.fromPath(n);return this.fi(e,s).next(i=>{i||r.removeEntry(s,Re.min())})}).next(()=>(this.Ri=null,r.apply(e)))}updateLimboDocument(e,r){return this.fi(e,r).next(n=>{n?this.mi.delete(r.toString()):this.mi.add(r.toString())})}Pi(e){return 0}fi(e,r){return te.or([()=>te.resolve(this.Ai.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class xm{constructor(e,r){this.persistence=e,this.gi=new wa(n=>J5(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=aF(this,r)}static Vi(e,r){return new xm(e,r)}Ii(){}di(e){return te.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}mr(e){const r=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}yr(e){let r=0;return this.gr(e,n=>{r++}).next(()=>r)}gr(e,r){return te.forEach(this.gi,(n,s)=>this.Sr(e,n,s).next(i=>i?te.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,r).next(l=>{l||(n++,i.removeEntry(o,Re.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),te.resolve()}removeReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}Pi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=wf(e.data.value)),r}Sr(e,r,n){return te.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.gi.get(r);return te.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Is=n,this.ds=s}static Es(e,r){let n=ze(),s=ze();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Jx(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return f3()?8:Y5(_r())>0?6:4}()}initialize(e,r){this.gs=e,this.indexManager=r,this.As=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ps(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new xF;return this.ws(e,r,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,r,o,l.size)})}).next(()=>i.result)}Ss(e,r,n,s){return n.documentReadCount<this.Vs?(Ha()<=$e.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Ya(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(Ha()<=$e.DEBUG&&pe("QueryEngine","Query:",Ya(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.fs*s?(Ha()<=$e.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Ya(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cs(r))):te.resolve())}ps(e,r){if(dE(r))return te.resolve(null);let n=cs(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Py(r,null,"F"),n=cs(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=ze(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.bs(r,l);return this.Ds(r,u,o,c.readTime)?this.ps(e,Py(r,null,"F")):this.vs(e,u,r,c)}))})))}ys(e,r,n,s){return dE(r)||s.isEqual(Re.min())?te.resolve(null):this.gs.getDocuments(e,n).next(i=>{const o=this.bs(r,i);return this.Ds(r,o,n,s)?te.resolve(null):(Ha()<=$e.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ya(r)),this.vs(e,o,r,$5(s,Gu)).next(l=>l))})}bs(e,r){let n=new Ht(lN(e));return r.forEach((s,i)=>{pp(e,i)&&(n=n.add(i))}),n}Ds(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,r,n){return Ha()<=$e.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Ya(r)),this.gs.getDocumentsMatchingQuery(e,r,to.min(),n)}vs(e,r,n,s){return this.gs.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="LocalStore",bF=3e8;class EF{constructor(e,r,n,s){this.persistence=e,this.Cs=r,this.serializer=s,this.Fs=new St(Le),this.Ms=new wa(i=>qx(i),Gx),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Fs))}}function CF(t,e,r,n){return new EF(t,e,r,n)}async function kN(t,e){const r=ke(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Ns(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],l=[];let c=ze();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:l}))})})}function _F(t,e){const r=ke(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,m=f.keys();let g=te.resolve();return m.forEach(x=>{g=g.next(()=>h.getEntry(c,x)).next(p=>{const b=u.docVersions.get(x);tt(b!==null,48541),p.version.compareTo(b)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),h.addEntry(p)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=ze();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function jN(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.hi.getLastRemoteSnapshotVersion(r))}function TF(t,e){const r=ke(t),n=e.snapshotVersion;let s=r.Fs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.Os.newChangeBuffer({trackRemovals:!0});s=r.Fs;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(r.hi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>r.hi.addMatchingKeys(i,h.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(cr.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,n)),s=s.insert(f,g),function(p,b,_){return p.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=bF?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,g,h)&&l.push(r.hi.updateTargetData(i,g))});let c=Hs(),u=ze();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(AF(i,o,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!n.isEqual(Re.min())){const h=r.hi.getLastRemoteSnapshotVersion(i).next(f=>r.hi.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(h)}return te.waitFor(l).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(r.Fs=s,i))}function AF(t,e,r){let n=ze(),s=ze();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=Hs();return r.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Re.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):pe(Xx,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function SF(t,e){const r=ke(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Vx),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function NF(t,e){const r=ke(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.hi.getTargetData(n,e).next(i=>i?(s=i,te.resolve(s)):r.hi.allocateTargetId(n).next(o=>(s=new Di(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.hi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Fs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Fs=r.Fs.insert(n.targetId,n),r.Ms.set(e,n.targetId)),n})}async function Oy(t,e,r){const n=ke(t),s=n.Fs.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ac(o))throw o;pe(Xx,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(s.target)}function _E(t,e,r){const n=ke(t);let s=Re.min(),i=ze();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=ke(c),m=f.Ms.get(h);return m!==void 0?te.resolve(f.Fs.get(m)):f.hi.getTargetData(u,h)}(n,o,cs(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>n.Cs.getDocumentsMatchingQuery(o,e,r?s:Re.min(),r?i:ze())).next(l=>(IF(n,pL(e),l),{documents:l,qs:i})))}function IF(t,e,r){let n=t.xs.get(e)||Re.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.xs.set(e,n)}class TE{constructor(){this.activeTargetIds=bL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RF{constructor(){this.Fo=new TE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,r,n){this.Mo[e]=r}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new TE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="ConnectivityMonitor";class SE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pe(AE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pe(AE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function Ly(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="RestConnection",kF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jF{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=r+"://"+e.host,this.Uo=`projects/${n}/databases/${s}`,this.Ko=this.databaseId.database===mm?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(e,r,n,s,i){const o=Ly(),l=this.Go(e,r.toUriEncodedString());pe(Zg,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:u}=new URL(l),h=nc(u);return this.jo(e,l,c,n,h).then(f=>(pe(Zg,`Received RPC '${e}' ${o}: `,f),f),f=>{throw eo(Zg,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}Jo(e,r,n,s,i,o){return this.Wo(e,r,n,s,i)}zo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ic}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}Go(e,r){const n=kF[e];return`${this.$o}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="WebChannelConnection";class DF extends jF{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,r,n,s,i){const o=Ly();return new Promise((l,c)=>{const u=new jS;u.setWithCredentials(!0),u.listenOnce(MS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case xf.NO_ERROR:const f=u.getResponseJson();pe(gr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case xf.TIMEOUT:pe(gr,`RPC '${e}' ${o} timed out`),c(new fe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case xf.HTTP_ERROR:const m=u.getStatus();if(pe(gr,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const p=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(w)>=0?w:ee.UNKNOWN}(x.status);c(new fe(p,x.message))}else c(new fe(ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new fe(ee.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{pe(gr,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);pe(gr,`RPC '${e}' ${o} sending request:`,s),u.send(r,"POST",h,n,15)})}P_(e,r,n){const s=Ly(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LS(),l=OS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const h=i.join("");pe(gr,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.T_(f);let m=!1,g=!1;const x=new MF({Ho:b=>{g?pe(gr,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(pe(gr,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),pe(gr,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Yo:()=>f.close()}),p=(b,_,w)=>{b.listen(_,C=>{try{w(C)}catch(R){setTimeout(()=>{throw R},0)}})};return p(f,Yc.EventType.OPEN,()=>{g||(pe(gr,`RPC '${e}' stream ${s} transport opened.`),x.s_())}),p(f,Yc.EventType.CLOSE,()=>{g||(g=!0,pe(gr,`RPC '${e}' stream ${s} transport closed`),x.__(),this.I_(f))}),p(f,Yc.EventType.ERROR,b=>{g||(g=!0,eo(gr,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),x.__(new fe(ee.UNAVAILABLE,"The operation could not be completed")))}),p(f,Yc.EventType.MESSAGE,b=>{var _;if(!g){const w=b.data[0];tt(!!w,16349);const C=w,R=(C==null?void 0:C.error)||((_=C[0])===null||_===void 0?void 0:_.error);if(R){pe(gr,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let V=function(N){const P=Vt[N];if(P!==void 0)return wN(P)}(L),I=R.message;V===void 0&&(V=ee.INTERNAL,I="Unknown error status: "+L+" with message "+R.message),g=!0,x.__(new fe(V,I)),f.close()}else pe(gr,`RPC '${e}' stream ${s} received:`,w),x.a_(w)}}),p(l,DS.STAT_EVENT,b=>{b.stat===_y.PROXY?pe(gr,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===_y.NOPROXY&&pe(gr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(r=>r===e)}}function e0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t){return new VL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=r,this.d_=n,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const r=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),s=Math.max(0,r-n);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="PersistentStream";class DN{constructor(e,r,n,s,i,o,l,c){this.Fi=e,this.w_=n,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new MN(e,r)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():r&&r.code===ee.RESOURCE_EXHAUSTED?(Qs(r.toString()),Qs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):r&&r.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(r)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),r=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.b_===r&&this.W_(n,s)},n=>{e(()=>{const s=new fe(ee.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(s)})})}W_(e,r){const n=this.K_(this.b_);this.stream=this.z_(e,r),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{n(()=>this.G_(s))}),this.stream.onMessage(s=>{n(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return pe(NE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return r=>{this.Fi.enqueueAndForget(()=>this.b_===e?r():(pe(NE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OF extends DN{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}z_(e,r){return this.connection.P_("Listen",e,r)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const r=qL(this.serializer,e),n=function(i){if(!("targetChange"in i))return Re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?us(o.readTime):Re.min()}(e);return this.listener.J_(r,n)}H_(e){const r={};r.database=Dy(this.serializer),r.addTarget=function(i,o){let l;const c=o.target;if(l=Iy(c)?{documents:zL(i,c)}:{query:WL(i,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=CN(i,o.resumeToken);const u=ky(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Re.min())>0){l.readTime=vm(i,o.snapshotVersion.toTimestamp());const u=ky(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=HL(this.serializer,e);n&&(r.labels=n),this.k_(r)}Y_(e){const r={};r.database=Dy(this.serializer),r.removeTarget=e,this.k_(r)}}class LF extends DN{constructor(e,r,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,r){return this.connection.P_("Write",e,r)}j_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const r=$L(e.writeResults,e.commitTime),n=us(e.commitTime);return this.listener.ta(n,r)}na(){const e={};e.database=Dy(this.serializer),this.k_(e)}X_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>GL(this.serializer,n))};this.k_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{}class VF extends FF{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,n,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,jy(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new fe(ee.UNKNOWN,i.toString())})}Jo(e,r,n,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,jy(r,n),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(ee.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class BF{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Qs(r),this._a=!1):pe("OnlineStateTracker",r)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="RemoteStore";class UF{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{n.enqueueAndForget(async()=>{ba(this)&&(pe(ua,"Restarting streams for network reachability change."),await async function(c){const u=ke(c);u.Ia.add(4),await _d(u),u.Aa.set("Unknown"),u.Ia.delete(4),await wp(u)}(this))})}),this.Aa=new BF(n,s)}}async function wp(t){if(ba(t))for(const e of t.da)await e(!0)}async function _d(t){for(const e of t.da)await e(!1)}function ON(t,e){const r=ke(t);r.Ta.has(e.targetId)||(r.Ta.set(e.targetId,e),rw(r)?tw(r):cc(r).x_()&&ew(r,e))}function Zx(t,e){const r=ke(t),n=cc(r);r.Ta.delete(e),n.x_()&&LN(r,e),r.Ta.size===0&&(n.x_()?n.B_():ba(r)&&r.Aa.set("Unknown"))}function ew(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}cc(t).H_(e)}function LN(t,e){t.Ra.$e(e),cc(t).Y_(e)}function tw(t){t.Ra=new DL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),cc(t).start(),t.Aa.aa()}function rw(t){return ba(t)&&!cc(t).M_()&&t.Ta.size>0}function ba(t){return ke(t).Ia.size===0}function FN(t){t.Ra=void 0}async function qF(t){t.Aa.set("Online")}async function GF(t){t.Ta.forEach((e,r)=>{ew(t,e)})}async function $F(t,e){FN(t),rw(t)?(t.Aa.la(e),tw(t)):t.Aa.set("Unknown")}async function zF(t,e,r){if(t.Aa.set("Online"),e instanceof EN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(n){pe(ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await wm(t,n)}else if(e instanceof Cf?t.Ra.Ye(e):e instanceof bN?t.Ra.it(e):t.Ra.et(e),!r.isEqual(Re.min()))try{const n=await jN(t.localStore);r.compareTo(n)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ta.get(u);h&&i.Ta.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ta.get(c);if(!h)return;i.Ta.set(c,h.withResumeToken(cr.EMPTY_BYTE_STRING,h.snapshotVersion)),LN(i,c);const f=new Di(h.target,c,u,h.sequenceNumber);ew(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){pe(ua,"Failed to raise snapshot:",n),await wm(t,n)}}async function wm(t,e,r){if(!ac(e))throw e;t.Ia.add(1),await _d(t),t.Aa.set("Offline"),r||(r=()=>jN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe(ua,"Retrying IndexedDB access"),await r(),t.Ia.delete(1),await wp(t)})}function VN(t,e){return e().catch(r=>wm(t,r,e))}async function bp(t){const e=ke(t),r=io(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Vx;for(;WF(e);)try{const s=await SF(e.localStore,n);if(s===null){e.Pa.length===0&&r.B_();break}n=s.batchId,QF(e,s)}catch(s){await wm(e,s)}BN(e)&&UN(e)}function WF(t){return ba(t)&&t.Pa.length<10}function QF(t,e){t.Pa.push(e);const r=io(t);r.x_()&&r.Z_&&r.X_(e.mutations)}function BN(t){return ba(t)&&!io(t).M_()&&t.Pa.length>0}function UN(t){io(t).start()}async function HF(t){io(t).na()}async function YF(t){const e=io(t);for(const r of t.Pa)e.X_(r.mutations)}async function KF(t,e,r){const n=t.Pa.shift(),s=Wx.from(n,e,r);await VN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bp(t)}async function JF(t,e){e&&io(t).Z_&&await async function(n,s){if(function(o){return jL(o)&&o!==ee.ABORTED}(s.code)){const i=n.Pa.shift();io(n).N_(),await VN(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bp(n)}}(t,e),BN(t)&&UN(t)}async function IE(t,e){const r=ke(t);r.asyncQueue.verifyOperationInProgress(),pe(ua,"RemoteStore received new credentials");const n=ba(r);r.Ia.add(3),await _d(r),n&&r.Aa.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ia.delete(3),await wp(r)}async function XF(t,e){const r=ke(t);e?(r.Ia.delete(2),await wp(r)):e||(r.Ia.add(2),await _d(r),r.Aa.set("Unknown"))}function cc(t){return t.Va||(t.Va=function(r,n,s){const i=ke(r);return i.ia(),new OF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:qF.bind(null,t),e_:GF.bind(null,t),n_:$F.bind(null,t),J_:zF.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),rw(t)?tw(t):t.Aa.set("Unknown")):(await t.Va.stop(),FN(t))})),t.Va}function io(t){return t.ma||(t.ma=function(r,n,s){const i=ke(r);return i.ia(),new LF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:HF.bind(null,t),n_:JF.bind(null,t),ea:YF.bind(null,t),ta:KF.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await bp(t)):(await t.ma.stop(),t.Pa.length>0&&(pe(ua,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,l=new nw(e,r,o,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sw(t,e){if(Qs("AsyncQueue",`${e}: ${t}`),ac(t))return new fe(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{static emptySet(e){return new xl(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ee.comparator(r.key,n.key):(r,n)=>Ee.comparator(r.key,n.key),this.keyedMap=Kc(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof xl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new xl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.fa=new St(Ee.comparator)}track(e){const r=e.doc.key,n=this.fa.get(r);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(r,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(r):e.type===1&&n.type===2?this.fa=this.fa.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):Ie(63341,{At:e,ga:n}):this.fa=this.fa.insert(r,e)}pa(){const e=[];return this.fa.inorderTraversal((r,n)=>{e.push(n)}),e}}class Yl{constructor(e,r,n,s,i,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Yl(e,r,xl.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class eV{constructor(){this.queries=PE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(r,n){const s=ke(r),i=s.queries;s.queries=PE(),i.forEach((o,l)=>{for(const c of l.wa)c.onError(n)})})(this,new fe(ee.ABORTED,"Firestore shutting down"))}}function PE(){return new wa(t=>aN(t),mp)}async function iw(t,e){const r=ke(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.Sa()&&e.ba()&&(n=2):(i=new ZF,n=e.ba()?0:1);try{switch(n){case 0:i.ya=await r.onListen(s,!0);break;case 1:i.ya=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=sw(o,`Initialization of query '${Ya(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.wa.push(e),e.va(r.onlineState),i.ya&&e.Ca(i.ya)&&aw(r)}async function ow(t,e){const r=ke(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function tV(t,e){const r=ke(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const l of o.wa)l.Ca(s)&&(n=!0);o.ya=s}}n&&aw(r)}function rV(t,e,r){const n=ke(t),s=n.queries.get(e);if(s)for(const i of s.wa)i.onError(r);n.queries.delete(e)}function aw(t){t.Da.forEach(e=>{e.next()})}var Fy,kE;(kE=Fy||(Fy={})).Fa="default",kE.Cache="cache";class lw{constructor(e,r,n){this.query=e,this.Ma=r,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Yl(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),r=!0):this.Ba(e,this.onlineState)&&(this.La(e),r=!0),this.Oa=e,r}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let r=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),r=!0),r}Ba(e,r){if(!e.fromCache||!this.ba())return!0;const n=r!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const r=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}La(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Fy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.key=e}}class GN{constructor(e){this.key=e}}class nV{constructor(e,r){this.query=e,this.Ha=r,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ze(),this.mutatedKeys=ze(),this.Xa=lN(e),this.eu=new xl(this.Xa)}get tu(){return this.Ha}nu(e,r){const n=r?r.ru:new RE,s=r?r.eu:this.eu;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),g=pp(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),p=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;m&&g?m.data.isEqual(g.data)?x!==p&&(n.track({type:3,doc:g}),b=!0):this.iu(m,g)||(n.track({type:2,doc:g}),b=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(l=!0)):!m&&g?(n.track({type:0,doc:g}),b=!0):m&&!g&&(n.track({type:1,doc:m}),b=!0,(c||u)&&(l=!0)),b&&(g?(o=o.add(g),i=p?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),n.track({type:1,doc:h})}return{eu:o,ru:n,Ds:l,mutatedKeys:i}}iu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,f)=>function(g,x){const p=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{At:b})}};return p(g)-p(x)}(h.type,f.type)||this.Xa(h.doc,f.doc)),this.su(n),s=s!=null&&s;const l=r&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new Yl(this.query,e.eu,i,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new RE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(r=>this.Ha=this.Ha.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ha=this.Ha.delete(r)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ze(),this.eu.forEach(n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))});const r=[];return e.forEach(n=>{this.Za.has(n)||r.push(new GN(n))}),this.Za.forEach(n=>{e.has(n)||r.push(new qN(n))}),r}uu(e){this.Ha=e.qs,this.Za=ze();const r=this.nu(e.documents);return this.applyChanges(r,!0)}cu(){return Yl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const cw="SyncEngine";class sV{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class iV{constructor(e){this.key=e,this.lu=!1}}class oV{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new wa(l=>aN(l),mp),this.Tu=new Map,this.Iu=new Set,this.du=new St(Ee.comparator),this.Eu=new Map,this.Au=new Yx,this.Ru={},this.Vu=new Map,this.mu=Hl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function aV(t,e,r=!0){const n=YN(t);let s;const i=n.Pu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await $N(n,e,r,!0),s}async function lV(t,e){const r=YN(t);await $N(r,e,!0,!1)}async function $N(t,e,r,n){const s=await NF(t.localStore,cs(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await cV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&ON(t.remoteStore,s),l}async function cV(t,e,r,n,s){t.gu=(f,m,g)=>async function(p,b,_,w){let C=b.view.nu(_);C.Ds&&(C=await _E(p.localStore,b.query,!1).then(({documents:I})=>b.view.nu(I,C)));const R=w&&w.targetChanges.get(b.targetId),L=w&&w.targetMismatches.get(b.targetId)!=null,V=b.view.applyChanges(C,p.isPrimaryClient,R,L);return ME(p,b.targetId,V._u),V.snapshot}(t,f,m,g);const i=await _E(t.localStore,e,!0),o=new nV(e,i.qs),l=o.nu(i.documents),c=Cd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);ME(t,r,u._u);const h=new sV(e,r,o);return t.Pu.set(e,h),t.Tu.has(r)?t.Tu.get(r).push(e):t.Tu.set(r,[e]),u.snapshot}async function uV(t,e,r){const n=ke(t),s=n.Pu.get(e),i=n.Tu.get(s.targetId);if(i.length>1)return n.Tu.set(s.targetId,i.filter(o=>!mp(o,e))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Oy(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Zx(n.remoteStore,s.targetId),Vy(n,s.targetId)}).catch(oc)):(Vy(n,s.targetId),await Oy(n.localStore,s.targetId,!0))}async function dV(t,e){const r=ke(t),n=r.Pu.get(e),s=r.Tu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Zx(r.remoteStore,n.targetId))}async function hV(t,e,r){const n=xV(t);try{const s=await function(o,l){const c=ke(o),u=Fe.now(),h=l.reduce((g,x)=>g.add(x.key),ze());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=Hs(),p=ze();return c.Os.getEntries(g,h).next(b=>{x=b,x.forEach((_,w)=>{w.isValidDocument()||(p=p.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,x)).next(b=>{f=b;const _=[];for(const w of l){const C=NL(w,f.get(w.key).overlayedDocument);C!=null&&_.push(new vo(w.key,C,ZS(C.value.mapValue),Gn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,_,l)}).next(b=>{m=b;const _=b.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(g,b.batchId,_)})}).then(()=>({batchId:m.batchId,changes:uN(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new St(Le)),u=u.insert(l,c),o.Ru[o.currentUser.toKey()]=u}(n,s.batchId,r),await Td(n,s.changes),await bp(n.remoteStore)}catch(s){const i=sw(s,"Failed to persist write");r.reject(i)}}async function zN(t,e){const r=ke(t);try{const n=await TF(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Eu.get(i);o&&(tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?tt(o.lu,14607):s.removedDocuments.size>0&&(tt(o.lu,42227),o.lu=!1))}),await Td(r,n,e)}catch(n){await oc(n)}}function jE(t,e,r){const n=ke(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ke(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.wa)m.va(l)&&(u=!0)}),u&&aw(c)}(n.eventManager,e),s.length&&n.hu.J_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function fV(t,e,r){const n=ke(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Eu.get(e),i=s&&s.key;if(i){let o=new St(Ee.comparator);o=o.insert(i,wr.newNoDocument(i,Re.min()));const l=ze().add(i),c=new vp(Re.min(),new Map,new St(Le),o,l);await zN(n,c),n.du=n.du.remove(i),n.Eu.delete(e),uw(n)}else await Oy(n.localStore,e,!1).then(()=>Vy(n,e,r)).catch(oc)}async function mV(t,e){const r=ke(t),n=e.batch.batchId;try{const s=await _F(r.localStore,e);QN(r,n,null),WN(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Td(r,s)}catch(s){await oc(s)}}async function pV(t,e,r){const n=ke(t);try{const s=await function(o,l){const c=ke(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(tt(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(n.localStore,e);QN(n,e,r),WN(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Td(n,s)}catch(s){await oc(s)}}function WN(t,e){(t.Vu.get(e)||[]).forEach(r=>{r.resolve()}),t.Vu.delete(e)}function QN(t,e,r){const n=ke(t);let s=n.Ru[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ru[n.currentUser.toKey()]=s}}function Vy(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Tu.get(e))t.Pu.delete(n),r&&t.hu.pu(n,r);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(n=>{t.Au.containsKey(n)||HN(t,n)})}function HN(t,e){t.Iu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Zx(t.remoteStore,r),t.du=t.du.remove(e),t.Eu.delete(r),uw(t))}function ME(t,e,r){for(const n of r)n instanceof qN?(t.Au.addReference(n.key,e),gV(t,n)):n instanceof GN?(pe(cw,"Document no longer in limbo: "+n.key),t.Au.removeReference(n.key,e),t.Au.containsKey(n.key)||HN(t,n.key)):Ie(19791,{yu:n})}function gV(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Iu.has(n)||(pe(cw,"New document in limbo: "+r),t.Iu.add(n),uw(t))}function uw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const r=new Ee(ut.fromString(e)),n=t.mu.next();t.Eu.set(n,new iV(r)),t.du=t.du.insert(r,n),ON(t.remoteStore,new Di(cs(fp(r.path)),n,"TargetPurposeLimboResolution",up.ue))}}async function Td(t,e,r){const n=ke(t),s=[],i=[],o=[];n.Pu.isEmpty()||(n.Pu.forEach((l,c)=>{o.push(n.gu(c,e,r).then(u=>{var h;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(h=r==null?void 0:r.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Jx.Es(c.targetId,u);i.push(f)}}))}),await Promise.all(o),n.hu.J_(s),await async function(c,u){const h=ke(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>te.forEach(u,m=>te.forEach(m.Is,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>te.forEach(m.ds,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!ac(f))throw f;pe(Xx,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.Fs.get(m),x=g.snapshotVersion,p=g.withLastLimboFreeSnapshotVersion(x);h.Fs=h.Fs.insert(m,p)}}}(n.localStore,i))}async function yV(t,e){const r=ke(t);if(!r.currentUser.isEqual(e)){pe(cw,"User change. New user:",e.toKey());const n=await kN(r.localStore,e);r.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new fe(ee.CANCELLED,o))})}),i.Vu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Td(r,n.Bs)}}function vV(t,e){const r=ke(t),n=r.Eu.get(e);if(n&&n.lu)return ze().add(n.key);{let s=ze();const i=r.Tu.get(e);if(!i)return s;for(const o of i){const l=r.Pu.get(o);s=s.unionWith(l.view.tu)}return s}}function YN(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fV.bind(null,e),e.hu.J_=tV.bind(null,e.eventManager),e.hu.pu=rV.bind(null,e.eventManager),e}function xV(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pV.bind(null,e),e}class bm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,r){return null}Fu(e,r){return null}vu(e){return CF(this.persistence,new wF,e.initialUser,this.serializer)}Du(e){return new PN(Kx.Vi,this.serializer)}bu(e){return new RF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bm.provider={build:()=>new bm};class wV extends bm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,r){tt(this.persistence.referenceDelegate instanceof xm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new iF(n,e.asyncQueue,r)}Du(e){const r=this.cacheSizeBytes!==void 0?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new PN(n=>xm.Vi(n,r),this.serializer)}}class By{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>jE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=yV.bind(null,this.syncEngine),await XF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eV}()}createDatastore(e){const r=xp(e.databaseInfo.databaseId),n=function(i){return new DF(i)}(e.databaseInfo);return function(i,o,l,c){return new VF(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,l){return new UF(n,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>jE(this.syncEngine,r,0),function(){return SE.C()?new SE:new PF}())}createSyncEngine(e,r){return function(s,i,o,l,c,u,h){const f=new oV(s,i,o,l,c,u);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=ke(s);pe(ua,"RemoteStore shutting down."),i.Ia.add(5),await _d(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}By.provider={build:()=>new By};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Qs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="FirestoreClient";class bV{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=vr.UNAUTHENTICATED,this.clientId=Fx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{pe(oo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(pe(oo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=sw(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function t0(t,e){t.asyncQueue.verifyOperationInProgress(),pe(oo,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await kN(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>{eo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{pe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{eo("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function DE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await EV(t);pe(oo,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>IE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>IE(e.remoteStore,s)),t._onlineComponents=e}async function EV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(oo,"Using user provided OfflineComponentProvider");try{await t0(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;eo("Error using user provided cache. Falling back to memory cache: "+r),await t0(t,new bm)}}else pe(oo,"Using default OfflineComponentProvider"),await t0(t,new wV(void 0));return t._offlineComponents}async function KN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(oo,"Using user provided OnlineComponentProvider"),await DE(t,t._uninitializedComponentsProvider._online)):(pe(oo,"Using default OnlineComponentProvider"),await DE(t,new By))),t._onlineComponents}function CV(t){return KN(t).then(e=>e.syncEngine)}async function Em(t){const e=await KN(t),r=e.eventManager;return r.onListen=aV.bind(null,e.syncEngine),r.onUnlisten=uV.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=lV.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=dV.bind(null,e.syncEngine),r}function _V(t,e,r={}){const n=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new dw({next:m=>{h.Ou(),o.enqueueAndForget(()=>ow(i,f));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new fe(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new fe(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new lw(fp(l.path),h,{includeMetadataChanges:!0,ka:!0});return iw(i,f)}(await Em(t),t.asyncQueue,e,r,n)),n.promise}function TV(t,e,r={}){const n=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new dw({next:m=>{h.Ou(),o.enqueueAndForget(()=>ow(i,f)),m.fromCache&&c.source==="server"?u.reject(new fe(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new lw(l,h,{includeMetadataChanges:!0,ka:!0});return iw(i,f)}(await Em(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="firestore.googleapis.com",LE=!0;class FE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XN,this.ssl=LE}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:LE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nF)throw new fe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JN((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ep{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new M5;switch(n.type){case"firstParty":return new F5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new fe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=OE.get(r);n&&(pe("ComponentProvider","Removing Datastore"),OE.delete(r),n.terminate())}(this),Promise.resolve()}}function AV(t,e,r,n={}){var s;t=sn(t,Ep);const i=nc(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${r}`;i&&(TS(`https://${c}`),AS("Firestore",!0)),o.host!==XN&&o.host!==c&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:n});if(!aa(u,l)&&(t._setSettings(u),n.mockUserToken)){let h,f;if(typeof n.mockUserToken=="string")h=n.mockUserToken,f=vr.MOCK_USER;else{h=s3(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new fe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new vr(m)}t._authCredentials=new D5(new VS(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=class ZN{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ZN(this.firestore,e,this._query)}};class jt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(bd(r,jt._jsonSchema))return new jt(e,n||null,new Ee(ut.fromString(r.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:qt("string",jt._jsonSchemaVersion),referencePath:qt("string")};class Yi extends uc{constructor(e,r,n){super(e,r,fp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Ee(e))}withConverter(e){return new Yi(this.firestore,e,this._path)}}function Ea(t,e,...r){if(t=Gt(t),US("collection","path",e),t instanceof Ep){const n=ut.fromString(e,...r);return J1(n),new Yi(t,null,n)}{if(!(t instanceof jt||t instanceof Yi))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ut.fromString(e,...r));return J1(n),new Yi(t.firestore,null,n)}}function Yt(t,e,...r){if(t=Gt(t),arguments.length===1&&(e=Fx.newId()),US("doc","path",e),t instanceof Ep){const n=ut.fromString(e,...r);return K1(n),new jt(t,null,new Ee(n))}{if(!(t instanceof jt||t instanceof Yi))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ut.fromString(e,...r));return K1(n),new jt(t.firestore,t instanceof Yi?t.converter:null,new Ee(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="AsyncQueue";class BE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new MN(this,"async_queue_retry"),this.oc=()=>{const n=e0();n&&pe(VE,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const r=e0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const r=e0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const r=new Bs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ac(e))throw e;pe(VE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const r=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,Qs("INTERNAL UNHANDLED ERROR: ",UE(n)),n}).then(n=>(this.nc=!1,n))));return this._c=r,r}enqueueAfterDelay(e,r,n){this.ac(),this.sc.indexOf(e)>-1&&(r=0);const s=nw.createAndSchedule(this,e,r,n,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&Ie(47125,{hc:UE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const r of this.ec)if(r.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.ec)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const r=this.ec.indexOf(e);this.ec.splice(r,1)}}function UE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ao extends Ep{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new BE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BE(e),this._firestoreClient=void 0,await e}}}function SV(t,e){const r=typeof t=="object"?t:Ox(),n=typeof t=="string"?t:mm,s=Dx(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=r3("firestore");i&&AV(s,...i)}return s}function Cp(t){if(t._terminated)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NV(t),t._firestoreClient}function NV(t){var e,r,n;const s=t._freezeSettings(),i=function(l,c,u,h){return new eL(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new bV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vn(cr.fromBase64String(e))}catch(r){throw new fe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new vn(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bd(e,vn._jsonSchema))return vn.fromBase64String(e.bytes)}}vn._jsonSchemaVersion="firestore/bytes/1.0",vn._jsonSchema={type:qt("string",vn._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new fe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new fe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new fe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ds._jsonSchemaVersion}}static fromJSON(e){if(bd(e,ds._jsonSchema))return new ds(e.latitude,e.longitude)}}ds._jsonSchemaVersion="firestore/geoPoint/1.0",ds._jsonSchema={type:qt("string",ds._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bd(e,hs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new hs(e.vectorValues);throw new fe(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hs._jsonSchemaVersion="firestore/vectorValue/1.0",hs._jsonSchema={type:qt("string",hs._jsonSchemaVersion),vectorValues:qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=/^__.*__$/;class RV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new vo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ed(e,this.data,r,this.fieldTransforms)}}class eI{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new vo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function tI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ec:t})}}class hw{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new hw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.fc(e),s}gc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Cm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(tI(this.Ec)&&IV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class PV{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||xp(e)}Dc(e,r,n,s=!1){return new hw({Ec:e,methodName:r,bc:n,path:or.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fw(t){const e=t._freezeSettings(),r=xp(t._databaseId);return new PV(t._databaseId,!!e.ignoreUndefinedProperties,r)}function kV(t,e,r,n,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,r,s);pw("Data must be an object, but it was:",o,n);const l=rI(n,o);let c,u;if(i.merge)c=new rn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Uy(e,f,r);if(!o.contains(m))throw new fe(ee.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);sI(h,m)||h.push(m)}c=new rn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new RV(new Ur(l),c,u)}class Ap extends Tp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ap}}class mw extends Tp{constructor(e,r){super(e),this.Cc=r}_toFieldTransform(e){const r=new Ku(e.serializer,fN(e.serializer,this.Cc));return new _L(e.path,r)}isEqual(e){return e instanceof mw&&this.Cc===e.Cc}}function jV(t,e,r,n){const s=t.Dc(1,e,r);pw("Data must be an object, but it was:",s,n);const i=[],o=Ur.empty();yo(n,(c,u)=>{const h=gw(e,c,r);u=Gt(u);const f=s.gc(h);if(u instanceof Ap)i.push(h);else{const m=Ad(u,f);m!=null&&(i.push(h),o.set(h,m))}});const l=new rn(i);return new eI(o,l,s.fieldTransforms)}function MV(t,e,r,n,s,i){const o=t.Dc(1,e,r),l=[Uy(e,n,r)],c=[s];if(i.length%2!=0)throw new fe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Uy(e,i[m])),c.push(i[m+1]);const u=[],h=Ur.empty();for(let m=l.length-1;m>=0;--m)if(!sI(u,l[m])){const g=l[m];let x=c[m];x=Gt(x);const p=o.gc(g);if(x instanceof Ap)u.push(g);else{const b=Ad(x,p);b!=null&&(u.push(g),h.set(g,b))}}const f=new rn(u);return new eI(h,f,o.fieldTransforms)}function DV(t,e,r,n=!1){return Ad(r,t.Dc(n?4:3,e))}function Ad(t,e){if(nI(t=Gt(t)))return pw("Unsupported field value:",e,t),rI(t,e);if(t instanceof Tp)return function(n,s){if(!tI(s.Ec))throw s.wc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const l of n){let c=Ad(l,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=Gt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return fN(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Fe.fromDate(n);return{timestampValue:vm(s.serializer,i)}}if(n instanceof Fe){const i=new Fe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:vm(s.serializer,i)}}if(n instanceof ds)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof vn)return{bytesValue:CN(s.serializer,n._byteString)};if(n instanceof jt){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hx(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof hs)return function(o,l){return{mapValue:{fields:{[KS]:{stringValue:XS},[pm]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.wc("VectorValues must only contain numeric values.");return $x(l.serializer,u)})}}}}}}(n,s);throw s.wc(`Unsupported field value: ${cp(n)}`)}(t,e)}function rI(t,e){const r={};return $S(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(t,(n,s)=>{const i=Ad(s,e.Vc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function nI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof ds||t instanceof vn||t instanceof jt||t instanceof Tp||t instanceof hs)}function pw(t,e,r){if(!nI(r)||!qS(r)){const n=cp(r);throw n==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+n)}}function Uy(t,e,r){if((e=Gt(e))instanceof _p)return e._internalPath;if(typeof e=="string")return gw(t,e);throw Cm("Field path arguments must be of type string or ",t,!1,void 0,r)}const OV=new RegExp("[~\\*/\\[\\]]");function gw(t,e,r){if(e.search(OV)>=0)throw Cm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new _p(...e.split("."))._internalPath}catch{throw Cm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Cm(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${n}`),o&&(c+=` in document ${s}`),c+=")"),new fe(ee.INVALID_ARGUMENT,l+t+c)}function sI(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Sp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class LV extends iI{data(){return super.data()}}function Sp(t,e){return typeof e=="string"?gw(t,e):e instanceof _p?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yw{}class aI extends yw{}function Sd(t,e,...r){let n=[];e instanceof yw&&n.push(e),n=n.concat(r),function(i){const o=i.filter(c=>c instanceof vw).length,l=i.filter(c=>c instanceof Np).length;if(o>1||o>0&&l>0)throw new fe(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Np extends aI{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Np(e,r,n)}_apply(e){const r=this._parse(e);return lI(e._query,r),new uc(e.firestore,e.converter,Ry(e._query,r))}_parse(e){const r=fw(e.firestore);return function(i,o,l,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){$E(f,h);const x=[];for(const p of f)x.push(GE(c,i,p));m={arrayValue:{values:x}}}else m=GE(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||$E(f,h),m=DV(l,o,f,h==="in"||h==="not-in");return Ut.create(u,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function qy(t,e,r){const n=e,s=Sp("where",t);return Np._create(s,n,r)}class vw extends yw{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new vw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:zn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)lI(o,c),o=Ry(o,c)}(e._query,r),new uc(e.firestore,e.converter,Ry(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xw extends aI{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new xw(e,r)}_apply(e){const r=function(s,i,o){if(s.startAt!==null)throw new fe(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new fe(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qu(i,o)}(e._query,this._field,this._direction);return new uc(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new lc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function ww(t,e="asc"){const r=e,n=Sp("orderBy",t);return xw._create(n,r)}function GE(t,e,r){if(typeof(r=Gt(r))=="string"){if(r==="")throw new fe(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oN(e)&&r.indexOf("/")!==-1)throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ut.fromString(r));if(!Ee.isDocumentKey(n))throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return iE(t,new Ee(n))}if(r instanceof jt)return iE(t,r._key);throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(r)}.`)}function $E(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lI(t,e){const r=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class FV{convertValue(e,r="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return yo(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r[pm].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>Mt(o.doubleValue));return new hs(i)}convertGeoPoint(e){return new ds(Mt(e.latitude),Mt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=hp(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp($u(e));default:return null}}convertTimestamp(e){const r=ro(e);return new Fe(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ut.fromString(e);tt(IN(n),9688,{name:e});const s=new zu(n.get(1),n.get(3)),i=new Ee(n.popFirst(5));return s.isEqual(r)||Qs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Xc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jo extends iI{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new _f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Sp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Jo._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jo._jsonSchema={type:qt("string",Jo._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class _f extends Jo{data(e={}){return super.data(e)}}class Xo{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Xc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new _f(this._firestore,this._userDataWriter,n.key,n,new Xc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new fe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new _f(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new _f(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:BV(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){t=sn(t,jt);const e=sn(t.firestore,ao);return _V(Cp(e),t._key).then(r=>uI(e,t,r))}Xo._jsonSchemaVersion="firestore/querySnapshot/1.0",Xo._jsonSchema={type:qt("string",Xo._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class bw extends FV{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,r)}}function Ip(t){t=sn(t,uc);const e=sn(t.firestore,ao),r=Cp(e),n=new bw(e);return oI(t._query),TV(r,t._query).then(s=>new Xo(e,n,t,s))}function Rp(t,e,r){t=sn(t,jt);const n=sn(t.firestore,ao),s=VV(t.converter,e);return Ew(n,[kV(fw(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Gn.none())])}function dc(t,e,r,...n){t=sn(t,jt);const s=sn(t.firestore,ao),i=fw(s);let o;return o=typeof(e=Gt(e))=="string"||e instanceof _p?MV(i,"updateDoc",t._key,e,r,n):jV(i,"updateDoc",t._key,e),Ew(s,[o.toMutation(t._key,Gn.exists(!0))])}function cI(t){return Ew(sn(t.firestore,ao),[new zx(t._key,Gn.none())])}function Pp(t,...e){var r,n,s;t=Gt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||qE(e[o])||(i=e[o++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(qE(e[o])){const f=e[o];e[o]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[o+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof jt)u=sn(t.firestore,ao),h=fp(t._key.path),c={next:f=>{e[o]&&e[o](uI(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=sn(t,uc);u=sn(f.firestore,ao),h=f._query;const m=new bw(u);c={next:g=>{e[o]&&e[o](new Xo(u,m,f,g))},error:e[o+1],complete:e[o+2]},oI(t._query)}return function(m,g,x,p){const b=new dw(p),_=new lw(g,b,x);return m.asyncQueue.enqueueAndForget(async()=>iw(await Em(m),_)),()=>{b.Ou(),m.asyncQueue.enqueueAndForget(async()=>ow(await Em(m),_))}}(Cp(u),h,l,c)}function Ew(t,e){return function(n,s){const i=new Bs;return n.asyncQueue.enqueueAndForget(async()=>hV(await CV(n),s,i)),i.promise}(Cp(t),e)}function uI(t,e,r){const n=r.docs.get(e._key),s=new bw(t);return new Jo(t,s,e._key,n,new Xc(r.hasPendingWrites,r.fromCache),e.converter)}function UV(t){return new mw("increment",t)}(function(e,r=!0){(function(s){ic=s})(sc),$l(new la("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),l=new ao(new O5(n.getProvider("auth-internal")),new V5(o,n.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new fe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:r},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Qi(z1,W1,e),Qi(z1,W1,"esm2017")})();var is=function(){return is=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},is.apply(this,arguments)};function Nd(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function qV(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function dI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GV=dI,hI=new xd("auth","Firebase",dI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=new jx("@firebase/auth");function $V(t,...e){_m.logLevel<=$e.WARN&&_m.warn(`Auth (${sc}): ${t}`,...e)}function Tf(t,...e){_m.logLevel<=$e.ERROR&&_m.error(`Auth (${sc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,...e){throw Cw(t,...e)}function fs(t,...e){return Cw(t,...e)}function fI(t,e,r){const n=Object.assign(Object.assign({},GV()),{[e]:r});return new xd("auth","Firebase",n).create(e,{appName:t.name})}function Us(t){return fI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cw(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return hI.create(t,...e)}function Ne(t,e,...r){if(!t)throw Cw(e,...r)}function Ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tf(e),new Error(e)}function Ys(t,e){t||Ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zV(){return zE()==="http:"||zE()==="https:"}function zE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zV()||u3()||"connection"in navigator)?navigator.onLine:!0}function QV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ys(r>e,"Short delay should be less than long delay!"),this.isMobile=a3()||d3()}get(){return WV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t,e){Ys(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KV=new Id(3e4,6e4);function xo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wo(t,e,r,n,s={}){return pI(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const l=wd(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return c3()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&nc(t.emulatorConfig.host)&&(u.credentials="include"),mI.fetch()(await gI(t,t.config.apiHost,r,l),u)})}async function pI(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},HV),e);try{const s=new XV(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Hh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Hh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Hh(t,"user-disabled",o);const h=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw fI(t,h,u);Wn(t,h)}}catch(s){if(s instanceof ei)throw s;Wn(t,"network-request-failed",{message:String(s)})}}async function Rd(t,e,r,n,s={}){const i=await wo(t,e,r,n,s);return"mfaPendingCredential"in i&&Wn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function gI(t,e,r,n){const s=`${e}${r}?${n}`,i=t,o=i.config.emulator?_w(t.config,s):`${t.config.apiScheme}://${s}`;return YV.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function JV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(fs(this.auth,"network-request-failed")),KV.get())})}}function Hh(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=fs(t,e,n);return s.customData._tokenResponse=r,s}function WE(t){return t!==void 0&&t.enterprise!==void 0}class ZV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return JV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function e6(t,e){return wo(t,"GET","/v2/recaptchaConfig",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e){return wo(t,"POST","/v1/accounts:delete",e)}async function Tm(t,e){return wo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r6(t,e=!1){const r=Gt(t),n=await r.getIdToken(e),s=Tw(n);Ne(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:xu(r0(s.auth_time)),issuedAtTime:xu(r0(s.iat)),expirationTime:xu(r0(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function r0(t){return Number(t)*1e3}function Tw(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{const s=bS(r);return s?JSON.parse(s):(Tf("Failed to decode base64 JWT payload"),null)}catch(s){return Tf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function QE(t){const e=Tw(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ei&&n6(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function n6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Ju(t,Tm(r,{idToken:n}));Ne(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?yI(i.providerUserInfo):[],l=o6(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new $y(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function i6(t){const e=Gt(t);await Am(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o6(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function yI(t){return t.map(e=>{var{providerId:r}=e,n=Nd(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a6(t,e){const r=await pI(t,{},async()=>{const n=wd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await gI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&nc(t.emulatorConfig.host)&&(c.credentials="include"),mI.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function l6(t,e){return wo(t,"POST","/v2/accounts:revokeToken",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const r=QE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await a6(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new wl;return n&&(Ne(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wl,this.toJSON())}_performRefresh(){return Ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Nd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $y(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Ju(this,this.stsTokenManager.getToken(this.auth,e));return Ne(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return r6(this,e)}reload(){return i6(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Am(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Us(this.auth));const e=await this.getIdToken();return await Ju(this,t6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,o,l,c,u,h;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,g=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,b=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=r.createdAt)!==null&&u!==void 0?u:void 0,w=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:R,isAnonymous:L,providerData:V,stsTokenManager:I}=r;Ne(C&&I,e,"internal-error");const A=wl.fromJSON(this.name,I);Ne(typeof C=="string",e,"internal-error"),pi(f,e.name),pi(m,e.name),Ne(typeof R=="boolean",e,"internal-error"),Ne(typeof L=="boolean",e,"internal-error"),pi(g,e.name),pi(x,e.name),pi(p,e.name),pi(b,e.name),pi(_,e.name),pi(w,e.name);const N=new Vn({uid:C,auth:e,email:m,emailVerified:R,displayName:f,isAnonymous:L,photoURL:x,phoneNumber:g,tenantId:p,stsTokenManager:A,createdAt:_,lastLoginAt:w});return V&&Array.isArray(V)&&(N.providerData=V.map(P=>Object.assign({},P))),b&&(N._redirectEventId=b),N}static async _fromIdTokenResponse(e,r,n=!1){const s=new wl;s.updateFromServerResponse(r);const i=new Vn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Am(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?yI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new wl;l.updateFromIdToken(n);const c=new Vn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new $y(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=new Map;function Fs(t){Ys(t instanceof Function,"Expected a class definition");let e=HE.get(t);return e?(Ys(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,HE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}vI.type="NONE";const YE=vI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t,e,r){return`firebase:${t}:${e}:${r}`}class bl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Af(this.userKey,s.apiKey,i),this.fullPersistenceKey=Af("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Tm(this.auth,{idToken:e}).catch(()=>{});return r?Vn._fromGetAccountInfoResponse(this.auth,r,e):null}return Vn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new bl(Fs(YE),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Fs(YE);const o=Af(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Tm(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Vn._fromGetAccountInfoResponse(e,m,h)}else f=Vn._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new bl(i,e,n):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new bl(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_I(e))return"Blackberry";if(TI(e))return"Webos";if(wI(e))return"Safari";if((e.includes("chrome/")||bI(e))&&!e.includes("edge/"))return"Chrome";if(CI(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function xI(t=_r()){return/firefox\//i.test(t)}function wI(t=_r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bI(t=_r()){return/crios\//i.test(t)}function EI(t=_r()){return/iemobile/i.test(t)}function CI(t=_r()){return/android/i.test(t)}function _I(t=_r()){return/blackberry/i.test(t)}function TI(t=_r()){return/webos/i.test(t)}function Aw(t=_r()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function c6(t=_r()){var e;return Aw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function u6(){return h3()&&document.documentMode===10}function AI(t=_r()){return Aw(t)||CI(t)||TI(t)||_I(t)||/windows phone/i.test(t)||EI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t,e=[]){let r;switch(t){case"Browser":r=KE(_r());break;case"Worker":r=`${KE(_r())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${sc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(t,e={}){return wo(t,"GET","/v2/passwordPolicy",xo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=6;class m6{constructor(e){var r,n,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:f6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JE(this),this.idTokenSubscription=new JE(this),this.beforeStateQueue=new d6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Fs(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Tm(this,{idToken:e}),n=await Vn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Am(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(Us(this));const r=e?Gt(e):null;return r&&Ne(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(Us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await h6(this),r=new m6(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xd("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await l6(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Fs(e)||this._popupRedirectResolver;Ne(r,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[Fs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&$V(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ca(t){return Gt(t)}class JE{constructor(e){this.auth=e,this.observer=null,this.addObserver=w3(r=>this.observer=r)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g6(t){kp=t}function NI(t){return kp.loadJS(t)}function y6(){return kp.recaptchaEnterpriseScript}function v6(){return kp.gapiScript}function x6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class w6{constructor(){this.enterprise=new b6}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class b6{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const E6="recaptcha-enterprise",II="NO_RECAPTCHA";class C6{constructor(e){this.type=E6,this.auth=Ca(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{e6(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new ZV(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;WE(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(II)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new w6().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(l=>{if(!r&&WE(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=y6();c.length!==0&&(c+=l),NI(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function XE(t,e,r,n=!1,s=!1){const i=new C6(t);let o;if(s)o=II;else try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function zy(t,e,r,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await XE(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await XE(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(t,e){const r=Dx(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(aa(i,e??{}))return s;Wn(s,"already-initialized")}return r.initialize({options:e})}function T6(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Fs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function A6(t,e,r){const n=Ca(t);Ne(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=RI(e),{host:o,port:l}=S6(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Ne(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ne(aa(u,n.config.emulator)&&aa(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,nc(o)?(TS(`${i}//${o}${c}`),AS("Auth",!0)):N6()}function RI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function S6(t){const e=RI(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:ZE(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:ZE(o)}}}function ZE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function N6(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ls("not implemented")}_getIdTokenResponse(e){return Ls("not implemented")}_linkToIdToken(e,r){return Ls("not implemented")}_getReauthenticationResolver(e){return Ls("not implemented")}}async function I6(t,e){return wo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R6(t,e){return Rd(t,"POST","/v1/accounts:signInWithPassword",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6(t,e){return Rd(t,"POST","/v1/accounts:signInWithEmailLink",xo(t,e))}async function k6(t,e){return Rd(t,"POST","/v1/accounts:signInWithEmailLink",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends Sw{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Xu(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Xu(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,r,"signInWithPassword",R6);case"emailLink":return P6(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,n,"signUpPassword",I6);case"emailLink":return k6(e,{idToken:r,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e){return Rd(t,"POST","/v1/accounts:signInWithIdp",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6="http://localhost";class da extends Sw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Wn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Nd(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new da(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return El(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,El(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,El(e,r)}buildRequest(){const e={requestUri:j6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=wd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function D6(t){const e=Qc(Hc(t)).link,r=e?Qc(Hc(e)).deep_link_id:null,n=Qc(Hc(t)).deep_link_id;return(n?Qc(Hc(n)).link:null)||n||r||e||t}class Nw{constructor(e){var r,n,s,i,o,l;const c=Qc(Hc(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,h=(n=c.oobCode)!==null&&n!==void 0?n:null,f=M6((s=c.mode)!==null&&s!==void 0?s:null);Ne(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=D6(e);try{return new Nw(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.providerId=hc.PROVIDER_ID}static credential(e,r){return Xu._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Nw.parseLink(r);return Ne(n,"argument-error"),Xu._fromEmailAndCode(e,n.code,n.tenantId)}}hc.PROVIDER_ID="password";hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends PI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Pd{constructor(){super("facebook.com")}static credential(e){return da._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Pd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return da._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ti.credential(r,n)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Pd{constructor(){super("github.com")}static credential(e){return da._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Pd{constructor(){super("twitter.com")}static credential(e,r){return da._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Si.credential(r,n)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6(t,e){return Rd(t,"POST","/v1/accounts:signUp",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Vn._fromIdTokenResponse(e,n,s),o=eC(n);return new ha({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=eC(n);return new ha({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function eC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends ei{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Sm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Sm(e,r,n,s)}}function kI(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Sm._fromErrorAndOperation(t,i,e,n):i})}async function L6(t,e,r=!1){const n=await Ju(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ha._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(t,e,r=!1){const{auth:n}=t;if(yn(n.app))return Promise.reject(Us(n));const s="reauthenticate";try{const i=await Ju(t,kI(n,s,e,t),r);Ne(i.idToken,n,"internal-error");const o=Tw(i.idToken);Ne(o,n,"internal-error");const{sub:l}=o;return Ne(t.uid===l,n,"user-mismatch"),ha._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Wn(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(t,e,r=!1){if(yn(t.app))return Promise.reject(Us(t));const n="signIn",s=await kI(t,n,e),i=await ha._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function V6(t,e){return jI(Ca(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(t){const e=Ca(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function B6(t,e,r){if(yn(t.app))return Promise.reject(Us(t));const n=Ca(t),o=await zy(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",O6).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&MI(t),c}),l=await ha._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function U6(t,e,r){return yn(t.app)?Promise.reject(Us(t)):V6(Gt(t),hc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&MI(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t,e){return Gt(t).setPersistence(e)}function G6(t,e,r,n){return Gt(t).onIdTokenChanged(e,r,n)}function $6(t,e,r){return Gt(t).beforeAuthStateChanged(e,r)}function z6(t,e,r,n){return Gt(t).onAuthStateChanged(e,r,n)}function tC(t){return Gt(t).signOut()}const Nm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Nm,"1"),this.storage.removeItem(Nm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=1e3,Q6=10;class OI extends DI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);u6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Q6):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},W6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}OI.type="LOCAL";const LI=OI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends DI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}FI.type="SESSION";const VI=FI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new jp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async u=>u(r.origin,i)),c=await H6(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Iw("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return window}function K6(t){ms().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){return typeof ms().WorkerGlobalScope<"u"&&typeof ms().importScripts=="function"}async function J6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function X6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Z6(){return BI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="firebaseLocalStorageDb",eB=1,Im="firebaseLocalStorage",qI="fbase_key";class kd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Mp(t,e){return t.transaction([Im],e?"readwrite":"readonly").objectStore(Im)}function tB(){const t=indexedDB.deleteDatabase(UI);return new kd(t).toPromise()}function Wy(){const t=indexedDB.open(UI,eB);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Im,{keyPath:qI})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Im)?e(n):(n.close(),await tB(),e(await Wy()))})})}async function rC(t,e,r){const n=Mp(t,!0).put({[qI]:e,value:r});return new kd(n).toPromise()}async function rB(t,e){const r=Mp(t,!1).get(e),n=await new kd(r).toPromise();return n===void 0?null:n.value}function nC(t,e){const r=Mp(t,!0).delete(e);return new kd(r).toPromise()}const nB=800,sB=3;class GI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wy(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>sB)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jp._getInstance(Z6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await J6(),!this.activeServiceWorker)return;this.sender=new Y6(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||X6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wy();return await rC(e,Nm,"1"),await nC(e,Nm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>rC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>rB(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>nC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mp(s,!1).getAll();return new kd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GI.type="LOCAL";const iB=GI;new Id(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(t,e){return e?Fs(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Sw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,r){return El(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function aB(t){return jI(t.auth,new Rw(t),t.bypassAuthState)}function lB(t){const{auth:e,user:r}=t;return Ne(r,e,"internal-error"),F6(r,new Rw(t),t.bypassAuthState)}async function cB(t){const{auth:e,user:r}=t;return Ne(r,e,"internal-error"),L6(r,new Rw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aB;case"linkViaPopup":case"linkViaRedirect":return cB;case"reauthViaPopup":case"reauthViaRedirect":return lB;default:Wn(this.auth,"internal-error")}}resolve(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=new Id(2e3,1e4);class ul extends $I{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,ul.currentPopupAction&&ul.currentPopupAction.cancel(),ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Ys(this.filter.length===1,"Popup operations only handle one event");const e=Iw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uB.get())};e()}}ul.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB="pendingRedirect",Sf=new Map;class hB extends $I{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const n=await fB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fB(t,e){const r=gB(e),n=pB(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function mB(t,e){Sf.set(t._key(),e)}function pB(t){return Fs(t._redirectPersistence)}function gB(t){return Af(dB,t.config.apiKey,t.name)}async function yB(t,e,r=!1){if(yn(t.app))return Promise.reject(Us(t));const n=Ca(t),s=oB(n,e),o=await new hB(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=10*60*1e3;class xB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wB(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!zI(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(fs(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vB&&this.cachedEventUids.clear(),this.cachedEventUids.has(sC(e))}saveEventToCache(e){this.cachedEventUids.add(sC(e)),this.lastProcessedEventTime=Date.now()}}function sC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bB(t,e={}){return wo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CB=/^https?/;async function _B(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bB(t);for(const r of e)try{if(TB(r))return}catch{}Wn(t,"unauthorized-domain")}function TB(t){const e=Gy(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!CB.test(r))return!1;if(EB.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=new Id(3e4,6e4);function iC(){const t=ms().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function SB(t){return new Promise((e,r)=>{var n,s,i;function o(){iC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iC(),r(fs(t,"network-request-failed"))},timeout:AB.get()})}if(!((s=(n=ms().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ms().gapi)===null||i===void 0)&&i.load)o();else{const l=x6("iframefcb");return ms()[l]=()=>{gapi.load?o():r(fs(t,"network-request-failed"))},NI(`${v6()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Nf=null,e})}let Nf=null;function NB(t){return Nf=Nf||SB(t),Nf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB=new Id(5e3,15e3),RB="__/auth/iframe",PB="emulator/auth/iframe",kB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MB(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?_w(e,PB):`https://${t.config.authDomain}/${RB}`,n={apiKey:e.apiKey,appName:t.name,v:sc},s=jB.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${wd(n).slice(1)}`}async function DB(t){const e=await NB(t),r=ms().gapi;return Ne(r,t,"internal-error"),e.open({where:document.body,url:MB(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kB,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=fs(t,"network-request-failed"),l=ms().setTimeout(()=>{i(o)},IB.get());function c(){ms().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LB=500,FB=600,VB="_blank",BB="http://localhost";class oC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UB(t,e,r,n=LB,s=FB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},OB),{width:n.toString(),height:s.toString(),top:i,left:o}),u=_r().toLowerCase();r&&(l=bI(u)?VB:r),xI(u)&&(e=e||BB,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(c6(u)&&l!=="_self")return qB(e||"",l),new oC(null);const f=window.open(e||"",l,h);Ne(f,t,"popup-blocked");try{f.focus()}catch{}return new oC(f)}function qB(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB="__/auth/handler",$B="emulator/auth/handler",zB=encodeURIComponent("fac");async function aC(t,e,r,n,s,i){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:sc,eventId:s};if(e instanceof PI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",x3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Pd){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${zB}=${encodeURIComponent(c)}`:"";return`${WB(t)}?${wd(l).slice(1)}${u}`}function WB({config:t}){return t.emulator?_w(t,$B):`https://${t.authDomain}/${GB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="webStorageSupport";class QB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VI,this._completeRedirectFn=yB,this._overrideRedirectResult=mB}async _openPopup(e,r,n,s){var i;Ys((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await aC(e,r,n,Gy(),s);return UB(e,o,Iw())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await aC(e,r,n,Gy(),s);return K6(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Ys(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await DB(e),n=new xB(e);return r.register("authEvent",s=>(Ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(n0,{type:n0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[n0];o!==void 0&&r(!!o),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=_B(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return AI()||wI()||Aw()}}const HB=QB;var lC="@firebase/auth",cC="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JB(t){$l(new la("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SI(t)},u=new p6(n,s,i,c);return T6(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),$l(new la("auth-internal",e=>{const r=Ca(e.getProvider("auth").getImmediate());return(n=>new YB(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(lC,cC,KB(t)),Qi(lC,cC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB=5*60,ZB=_S("authIdTokenMaxAge")||XB;let uC=null;const e8=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>ZB)return;const s=r==null?void 0:r.token;uC!==s&&(uC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function t8(t=Ox()){const e=Dx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=_6(t,{popupRedirectResolver:HB,persistence:[iB,LI,VI]}),n=_S("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=e8(i.toString());$6(r,o,()=>o(r.currentUser)),G6(r,l=>o(l))}}const s=ES("auth");return s&&A6(r,`http://${s}`),r}function r8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}g6({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=fs("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",r8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JB("Browser");const n8={apiKey:"AIzaSyBUftmUEX4_zgW-7daz3Yq9Md7QJQWTDOM",authDomain:"vmaster-fcdff.firebaseapp.com",projectId:"vmaster-fcdff",storageBucket:"vmaster-fcdff.firebasestorage.app",messagingSenderId:"44584686885",appId:"1:44584686885:web:1aa7941cebb2ad30bf76cc",measurementId:"G-FH5MHDJ62K"},WI=b5().length?Ox():IS(n8),ht=SV(WI),Zo=t8(WI);q6(Zo,LI);function rt(...t){return QO(oS(t))}const s8=rO,QI=y.forwardRef(({className:t,...e},r)=>a.jsx(ZA,{ref:r,className:rt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));QI.displayName=ZA.displayName;const i8=Tx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),HI=y.forwardRef(({className:t,variant:e,...r},n)=>a.jsx(eS,{ref:n,className:rt(i8({variant:e}),t),...r}));HI.displayName=eS.displayName;const o8=y.forwardRef(({className:t,...e},r)=>a.jsx(nS,{ref:r,className:rt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));o8.displayName=nS.displayName;const YI=y.forwardRef(({className:t,...e},r)=>a.jsx(sS,{ref:r,className:rt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(Zi,{className:"h-4 w-4"})}));YI.displayName=sS.displayName;const KI=y.forwardRef(({className:t,...e},r)=>a.jsx(tS,{ref:r,className:rt("text-sm font-semibold",t),...e}));KI.displayName=tS.displayName;const JI=y.forwardRef(({className:t,...e},r)=>a.jsx(rS,{ref:r,className:rt("text-sm opacity-90",t),...e}));JI.displayName=rS.displayName;function a8(){const{toasts:t}=mD();return a.jsxs(s8,{children:[t.map(function({id:e,title:r,description:n,action:s,...i}){return a.jsxs(HI,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[r&&a.jsx(KI,{children:r}),n&&a.jsx(JI,{children:n})]}),s,a.jsx(YI,{})]},e)}),a.jsx(QI,{})]})}var dC=["light","dark"],l8="(prefers-color-scheme: dark)",c8=y.createContext(void 0),u8={setTheme:t=>{},themes:[]},d8=()=>{var t;return(t=y.useContext(c8))!=null?t:u8};y.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=s?dC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,p=!1,b=!0)=>{let _=o?o[x]:x,w=p?x+"|| ''":`'${_}'`,C="";return s&&b&&!p&&dC.includes(x)&&(C+=`d.style.colorScheme = '${x}';`),r==="class"?p||_?C+=`c.add(${w})`:C+="null":_&&(C+=`d[s](n,${w})`),C},g=t?`!function(){${h}${m(t)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${l8}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return y.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var h8=t=>{switch(t){case"success":return p8;case"info":return y8;case"warning":return g8;case"error":return v8;default:return null}},f8=Array(12).fill(0),m8=({visible:t})=>K.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},K.createElement("div",{className:"sonner-spinner"},f8.map((e,r)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),p8=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),g8=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),y8=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),v8=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),x8=()=>{let[t,e]=K.useState(document.hidden);return K.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},Qy=1,w8=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Qy++,i=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:r}),{...l,...t,id:s,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0;return n.then(async i=>{if(E8(i)&&!i.ok){s=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${i.status}`):e.error,l=typeof e.description=="function"?await e.description(`HTTP error! status: ${i.status}`):e.description;this.create({id:r,type:"error",message:o,description:l})}else if(e.success!==void 0){s=!1;let o=typeof e.success=="function"?await e.success(i):e.success,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"success",message:o,description:l})}}).catch(async i=>{if(e.error!==void 0){s=!1;let o=typeof e.error=="function"?await e.error(i):e.error,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"error",message:o,description:l})}}).finally(()=>{var i;s&&(this.dismiss(r),r=void 0),(i=e.finally)==null||i.call(e)}),r},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||Qy++;return this.create({jsx:t(r),id:r,...e}),r},this.subscribers=[],this.toasts=[]}},Jr=new w8,b8=(t,e)=>{let r=(e==null?void 0:e.id)||Qy++;return Jr.addToast({title:t,...e,id:r}),r},E8=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",C8=b8,_8=()=>Jr.toasts;Object.assign(C8,{success:Jr.success,info:Jr.info,warning:Jr.warning,error:Jr.error,custom:Jr.custom,message:Jr.message,promise:Jr.promise,dismiss:Jr.dismiss,loading:Jr.loading},{getHistory:_8});function T8(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}T8(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Yh(t){return t.label!==void 0}var A8=3,S8="32px",N8=4e3,I8=356,R8=14,P8=20,k8=200;function j8(...t){return t.filter(Boolean).join(" ")}var M8=t=>{var e,r,n,s,i,o,l,c,u,h;let{invert:f,toast:m,unstyled:g,interacting:x,setHeights:p,visibleToasts:b,heights:_,index:w,toasts:C,expanded:R,removeToast:L,defaultRichColors:V,closeButton:I,style:A,cancelButtonStyle:N,actionButtonStyle:P,className:D="",descriptionClassName:O="",duration:j,position:$,gap:Y,loadingIcon:J,expandByDefault:se,classNames:G,icons:W,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:ne,cn:U}=t,[le,_e]=K.useState(!1),[je,we]=K.useState(!1),[ae,ge]=K.useState(!1),[xe,be]=K.useState(!1),[Ae,Ce]=K.useState(0),[he,ve]=K.useState(0),vt=K.useRef(null),lt=K.useRef(null),Lt=w===0,Ze=w+1<=b,xt=m.type,ur=m.dismissible!==!1,_n=m.className||"",xs=m.descriptionClassName||"",un=K.useMemo(()=>_.findIndex(Se=>Se.toastId===m.id)||0,[_,m.id]),ws=K.useMemo(()=>{var Se;return(Se=m.closeButton)!=null?Se:I},[m.closeButton,I]),Ao=K.useMemo(()=>m.duration||j||N8,[m.duration,j]),Nt=K.useRef(0),wt=K.useRef(0),bs=K.useRef(0),Tn=K.useRef(null),[So,ri]=$.split("-"),dn=K.useMemo(()=>_.reduce((Se,Ge,Je)=>Je>=un?Se:Se+Ge.height,0),[_,un]),An=x8(),Sn=m.invert||f,Tr=xt==="loading";wt.current=K.useMemo(()=>un*Y+dn,[un,dn]),K.useEffect(()=>{_e(!0)},[]),K.useLayoutEffect(()=>{if(!le)return;let Se=lt.current,Ge=Se.style.height;Se.style.height="auto";let Je=Se.getBoundingClientRect().height;Se.style.height=Ge,ve(Je),p(Kt=>Kt.find(dr=>dr.toastId===m.id)?Kt.map(dr=>dr.toastId===m.id?{...dr,height:Je}:dr):[{toastId:m.id,height:Je,position:m.position},...Kt])},[le,m.title,m.description,p,m.id]);let Ar=K.useCallback(()=>{we(!0),Ce(wt.current),p(Se=>Se.filter(Ge=>Ge.toastId!==m.id)),setTimeout(()=>{L(m)},k8)},[m,L,p,wt]);K.useEffect(()=>{if(m.promise&&xt==="loading"||m.duration===1/0||m.type==="loading")return;let Se,Ge=Ao;return R||x||ne&&An?(()=>{if(bs.current<Nt.current){let Je=new Date().getTime()-Nt.current;Ge=Ge-Je}bs.current=new Date().getTime()})():Ge!==1/0&&(Nt.current=new Date().getTime(),Se=setTimeout(()=>{var Je;(Je=m.onAutoClose)==null||Je.call(m,m),Ar()},Ge)),()=>clearTimeout(Se)},[R,x,se,m,Ao,Ar,m.promise,xt,ne,An]),K.useEffect(()=>{let Se=lt.current;if(Se){let Ge=Se.getBoundingClientRect().height;return ve(Ge),p(Je=>[{toastId:m.id,height:Ge,position:m.position},...Je]),()=>p(Je=>Je.filter(Kt=>Kt.toastId!==m.id))}},[p,m.id]),K.useEffect(()=>{m.delete&&Ar()},[Ar,m.delete]);function xc(){return W!=null&&W.loading?K.createElement("div",{className:"sonner-loader","data-visible":xt==="loading"},W.loading):J?K.createElement("div",{className:"sonner-loader","data-visible":xt==="loading"},J):K.createElement(m8,{visible:xt==="loading"})}return K.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:lt,className:U(D,_n,G==null?void 0:G.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,G==null?void 0:G.default,G==null?void 0:G[xt],(r=m==null?void 0:m.classNames)==null?void 0:r[xt]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:V,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":le,"data-promise":!!m.promise,"data-removed":je,"data-visible":Ze,"data-y-position":So,"data-x-position":ri,"data-index":w,"data-front":Lt,"data-swiping":ae,"data-dismissible":ur,"data-type":xt,"data-invert":Sn,"data-swipe-out":xe,"data-expanded":!!(R||se&&le),style:{"--index":w,"--toasts-before":w,"--z-index":C.length-w,"--offset":`${je?Ae:wt.current}px`,"--initial-height":se?"auto":`${he}px`,...A,...m.style},onPointerDown:Se=>{Tr||!ur||(vt.current=new Date,Ce(wt.current),Se.target.setPointerCapture(Se.pointerId),Se.target.tagName!=="BUTTON"&&(ge(!0),Tn.current={x:Se.clientX,y:Se.clientY}))},onPointerUp:()=>{var Se,Ge,Je,Kt;if(xe||!ur)return;Tn.current=null;let dr=Number(((Se=lt.current)==null?void 0:Se.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Nn=new Date().getTime()-((Ge=vt.current)==null?void 0:Ge.getTime()),ft=Math.abs(dr)/Nn;if(Math.abs(dr)>=P8||ft>.11){Ce(wt.current),(Je=m.onDismiss)==null||Je.call(m,m),Ar(),be(!0);return}(Kt=lt.current)==null||Kt.style.setProperty("--swipe-amount","0px"),ge(!1)},onPointerMove:Se=>{var Ge;if(!Tn.current||!ur)return;let Je=Se.clientY-Tn.current.y,Kt=Se.clientX-Tn.current.x,dr=(So==="top"?Math.min:Math.max)(0,Je),Nn=Se.pointerType==="touch"?10:2;Math.abs(dr)>Nn?(Ge=lt.current)==null||Ge.style.setProperty("--swipe-amount",`${Je}px`):Math.abs(Kt)>Nn&&(Tn.current=null)}},ws&&!m.jsx?K.createElement("button",{"aria-label":ie,"data-disabled":Tr,"data-close-button":!0,onClick:Tr||!ur?()=>{}:()=>{var Se;Ar(),(Se=m.onDismiss)==null||Se.call(m,m)},className:U(G==null?void 0:G.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||K.isValidElement(m.title)?m.jsx||m.title:K.createElement(K.Fragment,null,xt||m.icon||m.promise?K.createElement("div",{"data-icon":"",className:U(G==null?void 0:G.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||xc():null,m.type!=="loading"?m.icon||(W==null?void 0:W[xt])||h8(xt):null):null,K.createElement("div",{"data-content":"",className:U(G==null?void 0:G.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},K.createElement("div",{"data-title":"",className:U(G==null?void 0:G.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?K.createElement("div",{"data-description":"",className:U(O,xs,G==null?void 0:G.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),K.isValidElement(m.cancel)?m.cancel:m.cancel&&Yh(m.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||N,onClick:Se=>{var Ge,Je;Yh(m.cancel)&&ur&&((Je=(Ge=m.cancel).onClick)==null||Je.call(Ge,Se),Ar())},className:U(G==null?void 0:G.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,K.isValidElement(m.action)?m.action:m.action&&Yh(m.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||P,onClick:Se=>{var Ge,Je;Yh(m.action)&&(Se.defaultPrevented||((Je=(Ge=m.action).onClick)==null||Je.call(Ge,Se),Ar()))},className:U(G==null?void 0:G.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function hC(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var D8=t=>{let{invert:e,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:l,theme:c="light",richColors:u,duration:h,style:f,visibleToasts:m=A8,toastOptions:g,dir:x=hC(),gap:p=R8,loadingIcon:b,icons:_,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:C,cn:R=j8}=t,[L,V]=K.useState([]),I=K.useMemo(()=>Array.from(new Set([r].concat(L.filter(ne=>ne.position).map(ne=>ne.position)))),[L,r]),[A,N]=K.useState([]),[P,D]=K.useState(!1),[O,j]=K.useState(!1),[$,Y]=K.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=K.useRef(null),se=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=K.useRef(null),W=K.useRef(!1),ie=K.useCallback(ne=>{var U;(U=L.find(le=>le.id===ne.id))!=null&&U.delete||Jr.dismiss(ne.id),V(le=>le.filter(({id:_e})=>_e!==ne.id))},[L]);return K.useEffect(()=>Jr.subscribe(ne=>{if(ne.dismiss){V(U=>U.map(le=>le.id===ne.id?{...le,delete:!0}:le));return}setTimeout(()=>{MA.flushSync(()=>{V(U=>{let le=U.findIndex(_e=>_e.id===ne.id);return le!==-1?[...U.slice(0,le),{...U[le],...ne},...U.slice(le+1)]:[ne,...U]})})})}),[]),K.useEffect(()=>{if(c!=="system"){Y(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:ne})=>{Y(ne?"dark":"light")})},[c]),K.useEffect(()=>{L.length<=1&&D(!1)},[L]),K.useEffect(()=>{let ne=U=>{var le,_e;n.every(je=>U[je]||U.code===je)&&(D(!0),(le=J.current)==null||le.focus()),U.code==="Escape"&&(document.activeElement===J.current||(_e=J.current)!=null&&_e.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[n]),K.useEffect(()=>{if(J.current)return()=>{G.current&&(G.current.focus({preventScroll:!0}),G.current=null,W.current=!1)}},[J.current]),L.length?K.createElement("section",{"aria-label":`${w} ${se}`,tabIndex:-1},I.map((ne,U)=>{var le;let[_e,je]=ne.split("-");return K.createElement("ol",{key:ne,dir:x==="auto"?hC():x,tabIndex:-1,ref:J,className:o,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":_e,"data-x-position":je,style:{"--front-toast-height":`${((le=A[0])==null?void 0:le.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||S8,"--width":`${I8}px`,"--gap":`${p}px`,...f},onBlur:we=>{W.current&&!we.currentTarget.contains(we.relatedTarget)&&(W.current=!1,G.current&&(G.current.focus({preventScroll:!0}),G.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||W.current||(W.current=!0,G.current=we.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{O||D(!1)},onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},L.filter(we=>!we.position&&U===0||we.position===ne).map((we,ae)=>{var ge,xe;return K.createElement(M8,{key:we.id,icons:_,index:ae,toast:we,defaultRichColors:u,duration:(ge=g==null?void 0:g.duration)!=null?ge:h,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:e,visibleToasts:m,closeButton:(xe=g==null?void 0:g.closeButton)!=null?xe:i,interacting:O,position:ne,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ie,toasts:L.filter(be=>be.position==we.position),heights:A.filter(be=>be.position==we.position),setHeights:N,expandByDefault:s,gap:p,loadingIcon:b,expanded:P,pauseWhenPageIsHidden:C,cn:R})}))})):null};const O8=({...t})=>{const{theme:e="system"}=d8();return a.jsx(D8,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var L8=P_.useId||(()=>{}),F8=0;function ea(t){const[e,r]=y.useState(L8());return Cr(()=>{r(n=>n??String(F8++))},[t]),e?`radix-${e}`:""}const V8=["top","right","bottom","left"],co=Math.min,Zr=Math.max,Rm=Math.round,Kh=Math.floor,uo=t=>({x:t,y:t}),B8={left:"right",right:"left",bottom:"top",top:"bottom"},U8={start:"end",end:"start"};function Hy(t,e,r){return Zr(t,co(e,r))}function Ks(t,e){return typeof t=="function"?t(e):t}function Js(t){return t.split("-")[0]}function fc(t){return t.split("-")[1]}function Pw(t){return t==="x"?"y":"x"}function kw(t){return t==="y"?"height":"width"}function ho(t){return["top","bottom"].includes(Js(t))?"y":"x"}function jw(t){return Pw(ho(t))}function q8(t,e,r){r===void 0&&(r=!1);const n=fc(t),s=jw(t),i=kw(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Pm(o)),[o,Pm(o)]}function G8(t){const e=Pm(t);return[Yy(t),e,Yy(e)]}function Yy(t){return t.replace(/start|end/g,e=>U8[e])}function $8(t,e,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?i:o;default:return[]}}function z8(t,e,r,n){const s=fc(t);let i=$8(Js(t),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Yy)))),i}function Pm(t){return t.replace(/left|right|bottom|top/g,e=>B8[e])}function W8(t){return{top:0,right:0,bottom:0,left:0,...t}}function XI(t){return typeof t!="number"?W8(t):{top:t,right:t,bottom:t,left:t}}function km(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function fC(t,e,r){let{reference:n,floating:s}=t;const i=ho(e),o=jw(e),l=kw(o),c=Js(e),u=i==="y",h=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:n.y-s.height};break;case"bottom":g={x:h,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:f};break;case"left":g={x:n.x-s.width,y:f};break;default:g={x:n.x,y:n.y}}switch(fc(e)){case"start":g[o]-=m*(r&&u?-1:1);break;case"end":g[o]+=m*(r&&u?-1:1);break}return g}const Q8=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=fC(u,n,c),m=n,g={},x=0;for(let p=0;p<l.length;p++){const{name:b,fn:_}=l[p],{x:w,y:C,data:R,reset:L}=await _({x:h,y:f,initialPlacement:n,placement:m,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=w??h,f=C??f,g={...g,[b]:{...g[b],...R}},L&&x<=50&&(x++,typeof L=="object"&&(L.placement&&(m=L.placement),L.rects&&(u=L.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:h,y:f}=fC(u,m,c)),p=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:g}};async function Zu(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Ks(e,t),x=XI(g),b=l[m?f==="floating"?"reference":"floating":f],_=km(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),w=f==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},L=km(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:C,strategy:c}):w);return{top:(_.top-L.top+x.top)/R.y,bottom:(L.bottom-_.bottom+x.bottom)/R.y,left:(_.left-L.left+x.left)/R.x,right:(L.right-_.right+x.right)/R.x}}const H8=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Ks(t,e)||{};if(u==null)return{};const f=XI(h),m={x:r,y:n},g=jw(s),x=kw(g),p=await o.getDimensions(u),b=g==="y",_=b?"top":"left",w=b?"bottom":"right",C=b?"clientHeight":"clientWidth",R=i.reference[x]+i.reference[g]-m[g]-i.floating[x],L=m[g]-i.reference[g],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let I=V?V[C]:0;(!I||!await(o.isElement==null?void 0:o.isElement(V)))&&(I=l.floating[C]||i.floating[x]);const A=R/2-L/2,N=I/2-p[x]/2-1,P=co(f[_],N),D=co(f[w],N),O=P,j=I-p[x]-D,$=I/2-p[x]/2+A,Y=Hy(O,$,j),J=!c.arrow&&fc(s)!=null&&$!==Y&&i.reference[x]/2-($<O?P:D)-p[x]/2<0,se=J?$<O?$-O:$-j:0;return{[g]:m[g]+se,data:{[g]:Y,centerOffset:$-Y-se,...J&&{alignmentOffset:se}},reset:J}}}),Y8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:p=!0,...b}=Ks(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const _=Js(s),w=ho(l),C=Js(l)===l,R=await(c.isRTL==null?void 0:c.isRTL(u.floating)),L=m||(C||!p?[Pm(l)]:G8(l)),V=x!=="none";!m&&V&&L.push(...z8(l,p,x,R));const I=[l,...L],A=await Zu(e,b),N=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&N.push(A[_]),f){const $=q8(s,o,R);N.push(A[$[0]],A[$[1]])}if(P=[...P,{placement:s,overflows:N}],!N.every($=>$<=0)){var D,O;const $=(((D=i.flip)==null?void 0:D.index)||0)+1,Y=I[$];if(Y)return{data:{index:$,overflows:P},reset:{placement:Y}};let J=(O=P.filter(se=>se.overflows[0]<=0).sort((se,G)=>se.overflows[1]-G.overflows[1])[0])==null?void 0:O.placement;if(!J)switch(g){case"bestFit":{var j;const se=(j=P.filter(G=>{if(V){const W=ho(G.placement);return W===w||W==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(W=>W>0).reduce((W,ie)=>W+ie,0)]).sort((G,W)=>G[1]-W[1])[0])==null?void 0:j[0];se&&(J=se);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function mC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function pC(t){return V8.some(e=>t[e]>=0)}const K8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Ks(t,e);switch(n){case"referenceHidden":{const i=await Zu(e,{...s,elementContext:"reference"}),o=mC(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:pC(o)}}}case"escaped":{const i=await Zu(e,{...s,altBoundary:!0}),o=mC(i,r.floating);return{data:{escapedOffsets:o,escaped:pC(o)}}}default:return{}}}}};async function J8(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Js(r),l=fc(r),c=ho(r)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=Ks(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*h,y:m*u}:{x:m*u,y:g*h}}const X8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await J8(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},Z8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:_,y:w}=b;return{x:_,y:w}}},...c}=Ks(t,e),u={x:r,y:n},h=await Zu(e,c),f=ho(Js(s)),m=Pw(f);let g=u[m],x=u[f];if(i){const b=m==="y"?"top":"left",_=m==="y"?"bottom":"right",w=g+h[b],C=g-h[_];g=Hy(w,g,C)}if(o){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",w=x+h[b],C=x-h[_];x=Hy(w,x,C)}const p=l.fn({...e,[m]:g,[f]:x});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[m]:i,[f]:o}}}}}},e9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ks(t,e),h={x:r,y:n},f=ho(s),m=Pw(f);let g=h[m],x=h[f];const p=Ks(l,e),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const C=m==="y"?"height":"width",R=i.reference[m]-i.floating[C]+b.mainAxis,L=i.reference[m]+i.reference[C]-b.mainAxis;g<R?g=R:g>L&&(g=L)}if(u){var _,w;const C=m==="y"?"width":"height",R=["top","left"].includes(Js(s)),L=i.reference[f]-i.floating[C]+(R&&((_=o.offset)==null?void 0:_[f])||0)+(R?0:b.crossAxis),V=i.reference[f]+i.reference[C]+(R?0:((w=o.offset)==null?void 0:w[f])||0)-(R?b.crossAxis:0);x<L?x=L:x>V&&(x=V)}return{[m]:g,[f]:x}}}},t9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Ks(t,e),h=await Zu(e,u),f=Js(s),m=fc(s),g=ho(s)==="y",{width:x,height:p}=i.floating;let b,_;f==="top"||f==="bottom"?(b=f,_=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,b=m==="end"?"top":"bottom");const w=p-h.top-h.bottom,C=x-h.left-h.right,R=co(p-h[b],w),L=co(x-h[_],C),V=!e.middlewareData.shift;let I=R,A=L;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=C),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(I=w),V&&!m){const P=Zr(h.left,0),D=Zr(h.right,0),O=Zr(h.top,0),j=Zr(h.bottom,0);g?A=x-2*(P!==0||D!==0?P+D:Zr(h.left,h.right)):I=p-2*(O!==0||j!==0?O+j:Zr(h.top,h.bottom))}await c({...e,availableWidth:A,availableHeight:I});const N=await o.getDimensions(l.floating);return x!==N.width||p!==N.height?{reset:{rects:!0}}:{}}}};function Dp(){return typeof window<"u"}function mc(t){return ZI(t)?(t.nodeName||"").toLowerCase():"#document"}function on(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ys(t){var e;return(e=(ZI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ZI(t){return Dp()?t instanceof Node||t instanceof on(t).Node:!1}function Qn(t){return Dp()?t instanceof Element||t instanceof on(t).Element:!1}function gs(t){return Dp()?t instanceof HTMLElement||t instanceof on(t).HTMLElement:!1}function gC(t){return!Dp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof on(t).ShadowRoot}function jd(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=Hn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function r9(t){return["table","td","th"].includes(mc(t))}function Op(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Mw(t){const e=Dw(),r=Qn(t)?Hn(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function n9(t){let e=fo(t);for(;gs(e)&&!Kl(e);){if(Mw(e))return e;if(Op(e))return null;e=fo(e)}return null}function Dw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Kl(t){return["html","body","#document"].includes(mc(t))}function Hn(t){return on(t).getComputedStyle(t)}function Lp(t){return Qn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function fo(t){if(mc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||gC(t)&&t.host||ys(t);return gC(e)?e.host:e}function eR(t){const e=fo(t);return Kl(e)?t.ownerDocument?t.ownerDocument.body:t.body:gs(e)&&jd(e)?e:eR(e)}function ed(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=eR(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),o=on(s);if(i){const l=Ky(o);return e.concat(o,o.visualViewport||[],jd(s)?s:[],l&&r?ed(l):[])}return e.concat(s,ed(s,[],r))}function Ky(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function tR(t){const e=Hn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=gs(t),i=s?t.offsetWidth:r,o=s?t.offsetHeight:n,l=Rm(r)!==i||Rm(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Ow(t){return Qn(t)?t:t.contextElement}function Cl(t){const e=Ow(t);if(!gs(e))return uo(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=tR(e);let o=(i?Rm(r.width):r.width)/n,l=(i?Rm(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const s9=uo(0);function rR(t){const e=on(t);return!Dw()||!e.visualViewport?s9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function i9(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==on(t)?!1:e}function fa(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=Ow(t);let o=uo(1);e&&(n?Qn(n)&&(o=Cl(n)):o=Cl(t));const l=i9(i,r,n)?rR(i):uo(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=on(i),g=n&&Qn(n)?on(n):n;let x=m,p=Ky(x);for(;p&&n&&g!==x;){const b=Cl(p),_=p.getBoundingClientRect(),w=Hn(p),C=_.left+(p.clientLeft+parseFloat(w.paddingLeft))*b.x,R=_.top+(p.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,h*=b.x,f*=b.y,c+=C,u+=R,x=on(p),p=Ky(x)}}return km({width:h,height:f,x:c,y:u})}function o9(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",o=ys(n),l=e?Op(e.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=uo(1);const h=uo(0),f=gs(n);if((f||!f&&!i)&&((mc(n)!=="body"||jd(o))&&(c=Lp(n)),gs(n))){const m=fa(n);u=Cl(n),h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+h.x,y:r.y*u.y-c.scrollTop*u.y+h.y}}function a9(t){return Array.from(t.getClientRects())}function Jy(t,e){const r=Lp(t).scrollLeft;return e?e.left+r:fa(ys(t)).left+r}function l9(t){const e=ys(t),r=Lp(t),n=t.ownerDocument.body,s=Zr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Zr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Jy(t);const l=-r.scrollTop;return Hn(n).direction==="rtl"&&(o+=Zr(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:l}}function c9(t,e){const r=on(t),n=ys(t),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=Dw();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function u9(t,e){const r=fa(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=gs(t)?Cl(t):uo(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function yC(t,e,r){let n;if(e==="viewport")n=c9(t,r);else if(e==="document")n=l9(ys(t));else if(Qn(e))n=u9(e,r);else{const s=rR(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return km(n)}function nR(t,e){const r=fo(t);return r===e||!Qn(r)||Kl(r)?!1:Hn(r).position==="fixed"||nR(r,e)}function d9(t,e){const r=e.get(t);if(r)return r;let n=ed(t,[],!1).filter(l=>Qn(l)&&mc(l)!=="body"),s=null;const i=Hn(t).position==="fixed";let o=i?fo(t):t;for(;Qn(o)&&!Kl(o);){const l=Hn(o),c=Mw(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||jd(o)&&!c&&nR(t,o))?n=n.filter(h=>h!==o):s=l,o=fo(o)}return e.set(t,n),n}function h9(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?Op(e)?[]:d9(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,h)=>{const f=yC(e,h,s);return u.top=Zr(f.top,u.top),u.right=co(f.right,u.right),u.bottom=co(f.bottom,u.bottom),u.left=Zr(f.left,u.left),u},yC(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function f9(t){const{width:e,height:r}=tR(t);return{width:e,height:r}}function m9(t,e,r){const n=gs(e),s=ys(e),i=r==="fixed",o=fa(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=uo(0);if(n||!n&&!i)if((mc(e)!=="body"||jd(s))&&(l=Lp(e)),n){const g=fa(e,!0,i,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&(c.x=Jy(s));let u=0,h=0;if(s&&!n&&!i){const g=s.getBoundingClientRect();h=g.top+l.scrollTop,u=g.left+l.scrollLeft-Jy(s,g)}const f=o.left+l.scrollLeft-c.x-u,m=o.top+l.scrollTop-c.y-h;return{x:f,y:m,width:o.width,height:o.height}}function s0(t){return Hn(t).position==="static"}function vC(t,e){if(!gs(t)||Hn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return ys(t)===r&&(r=r.ownerDocument.body),r}function sR(t,e){const r=on(t);if(Op(t))return r;if(!gs(t)){let s=fo(t);for(;s&&!Kl(s);){if(Qn(s)&&!s0(s))return s;s=fo(s)}return r}let n=vC(t,e);for(;n&&r9(n)&&s0(n);)n=vC(n,e);return n&&Kl(n)&&s0(n)&&!Mw(n)?r:n||n9(t)||r}const p9=async function(t){const e=this.getOffsetParent||sR,r=this.getDimensions,n=await r(t.floating);return{reference:m9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function g9(t){return Hn(t).direction==="rtl"}const y9={convertOffsetParentRelativeRectToViewportRelativeRect:o9,getDocumentElement:ys,getClippingRect:h9,getOffsetParent:sR,getElementRects:p9,getClientRects:a9,getDimensions:f9,getScale:Cl,isElement:Qn,isRTL:g9};function v9(t,e){let r=null,n;const s=ys(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:u,top:h,width:f,height:m}=t.getBoundingClientRect();if(l||e(),!f||!m)return;const g=Kh(h),x=Kh(s.clientWidth-(u+f)),p=Kh(s.clientHeight-(h+m)),b=Kh(u),w={rootMargin:-g+"px "+-x+"px "+-p+"px "+-b+"px",threshold:Zr(0,co(1,c))||1};let C=!0;function R(L){const V=L[0].intersectionRatio;if(V!==c){if(!C)return o();V?o(!1,V):n=setTimeout(()=>{o(!1,1e-7)},1e3)}C=!1}try{r=new IntersectionObserver(R,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(R,w)}r.observe(t)}return o(!0),i}function x9(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Ow(t),h=s||i?[...u?ed(u):[],...ed(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",r,{passive:!0}),i&&_.addEventListener("resize",r)});const f=u&&l?v9(u,r):null;let m=-1,g=null;o&&(g=new ResizeObserver(_=>{let[w]=_;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(e)})),r()}),u&&!c&&g.observe(u),g.observe(e));let x,p=c?fa(t):null;c&&b();function b(){const _=fa(t);p&&(_.x!==p.x||_.y!==p.y||_.width!==p.width||_.height!==p.height)&&r(),p=_,x=requestAnimationFrame(b)}return r(),()=>{var _;h.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const w9=X8,b9=Z8,E9=Y8,C9=t9,_9=K8,xC=H8,T9=e9,A9=(t,e,r)=>{const n=new Map,s={platform:y9,...r},i={...s.platform,_c:n};return Q8(t,e,{...s,platform:i})};var If=typeof document<"u"?y.useLayoutEffect:y.useEffect;function jm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!jm(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!jm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function iR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function wC(t,e){const r=iR(t);return Math.round(e*r)/r}function i0(t){const e=y.useRef(t);return If(()=>{e.current=t}),e}function S9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=y.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=y.useState(n);jm(m,n)||g(n);const[x,p]=y.useState(null),[b,_]=y.useState(null),w=y.useCallback(G=>{G!==V.current&&(V.current=G,p(G))},[]),C=y.useCallback(G=>{G!==I.current&&(I.current=G,_(G))},[]),R=i||x,L=o||b,V=y.useRef(null),I=y.useRef(null),A=y.useRef(h),N=c!=null,P=i0(c),D=i0(s),O=i0(u),j=y.useCallback(()=>{if(!V.current||!I.current)return;const G={placement:e,strategy:r,middleware:m};D.current&&(G.platform=D.current),A9(V.current,I.current,G).then(W=>{const ie={...W,isPositioned:O.current!==!1};$.current&&!jm(A.current,ie)&&(A.current=ie,va.flushSync(()=>{f(ie)}))})},[m,e,r,D,O]);If(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[u]);const $=y.useRef(!1);If(()=>($.current=!0,()=>{$.current=!1}),[]),If(()=>{if(R&&(V.current=R),L&&(I.current=L),R&&L){if(P.current)return P.current(R,L,j);j()}},[R,L,j,P,N]);const Y=y.useMemo(()=>({reference:V,floating:I,setReference:w,setFloating:C}),[w,C]),J=y.useMemo(()=>({reference:R,floating:L}),[R,L]),se=y.useMemo(()=>{const G={position:r,left:0,top:0};if(!J.floating)return G;const W=wC(J.floating,h.x),ie=wC(J.floating,h.y);return l?{...G,transform:"translate("+W+"px, "+ie+"px)",...iR(J.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:W,top:ie}},[r,l,J.floating,h.x,h.y]);return y.useMemo(()=>({...h,update:j,refs:Y,elements:J,floatingStyles:se}),[h,j,Y,J,se])}const N9=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?xC({element:n.current,padding:s}).fn(r):{}:n?xC({element:n,padding:s}).fn(r):{}}}},I9=(t,e)=>({...w9(t),options:[t,e]}),R9=(t,e)=>({...b9(t),options:[t,e]}),P9=(t,e)=>({...T9(t),options:[t,e]}),k9=(t,e)=>({...E9(t),options:[t,e]}),j9=(t,e)=>({...C9(t),options:[t,e]}),M9=(t,e)=>({..._9(t),options:[t,e]}),D9=(t,e)=>({...N9(t),options:[t,e]});var O9="Arrow",oR=y.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return a.jsx(qe.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});oR.displayName=O9;var L9=oR;function F9(t,e=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:m,children:g,...x}=f,p=(m==null?void 0:m[t][c])||l,b=y.useMemo(()=>x,Object.values(x));return a.jsx(p.Provider,{value:b,children:g})}function h(f,m){const g=(m==null?void 0:m[t][c])||l,x=y.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,h]}const s=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,V9(s,...e)]}function V9(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function B9(t){const[e,r]=y.useState(void 0);return Cr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Lw="Popper",[aR,pc]=F9(Lw),[U9,lR]=aR(Lw),cR=t=>{const{__scopePopper:e,children:r}=t,[n,s]=y.useState(null);return a.jsx(U9,{scope:e,anchor:n,onAnchorChange:s,children:r})};cR.displayName=Lw;var uR="PopperAnchor",dR=y.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=lR(uR,r),o=y.useRef(null),l=ot(e,o);return y.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx(qe.div,{...s,ref:l})});dR.displayName=uR;var Fw="PopperContent",[q9,G9]=aR(Fw),hR=y.forwardRef((t,e)=>{var ae,ge,xe,be,Ae,Ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:x,...p}=t,b=lR(Fw,r),[_,w]=y.useState(null),C=ot(e,he=>w(he)),[R,L]=y.useState(null),V=B9(R),I=(V==null?void 0:V.width)??0,A=(V==null?void 0:V.height)??0,N=n+(i!=="center"?"-"+i:""),P=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},D=Array.isArray(u)?u:[u],O=D.length>0,j={padding:P,boundary:D.filter(z9),altBoundary:O},{refs:$,floatingStyles:Y,placement:J,isPositioned:se,middlewareData:G}=S9({strategy:"fixed",placement:N,whileElementsMounted:(...he)=>x9(...he,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[I9({mainAxis:s+A,alignmentAxis:o}),c&&R9({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?P9():void 0,...j}),c&&k9({...j}),j9({...j,apply:({elements:he,rects:ve,availableWidth:vt,availableHeight:lt})=>{const{width:Lt,height:Ze}=ve.reference,xt=he.floating.style;xt.setProperty("--radix-popper-available-width",`${vt}px`),xt.setProperty("--radix-popper-available-height",`${lt}px`),xt.setProperty("--radix-popper-anchor-width",`${Lt}px`),xt.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),R&&D9({element:R,padding:l}),W9({arrowWidth:I,arrowHeight:A}),m&&M9({strategy:"referenceHidden",...j})]}),[W,ie]=pR(J),ne=Er(x);Cr(()=>{se&&(ne==null||ne())},[se,ne]);const U=(ae=G.arrow)==null?void 0:ae.x,le=(ge=G.arrow)==null?void 0:ge.y,_e=((xe=G.arrow)==null?void 0:xe.centerOffset)!==0,[je,we]=y.useState();return Cr(()=>{_&&we(window.getComputedStyle(_).zIndex)},[_]),a.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:se?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[(be=G.transformOrigin)==null?void 0:be.x,(Ae=G.transformOrigin)==null?void 0:Ae.y].join(" "),...((Ce=G.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(q9,{scope:r,placedSide:W,onArrowChange:L,arrowX:U,arrowY:le,shouldHideArrow:_e,children:a.jsx(qe.div,{"data-side":W,"data-align":ie,...p,ref:C,style:{...p.style,animation:se?void 0:"none"}})})})});hR.displayName=Fw;var fR="PopperArrow",$9={top:"bottom",right:"left",bottom:"top",left:"right"},mR=y.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=G9(fR,n),o=$9[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(L9,{...s,ref:r,style:{...s.style,display:"block"}})})});mR.displayName=fR;function z9(t){return t!==null}var W9=t=>({name:"transformOrigin",options:t,fn(e){var b,_,w;const{placement:r,rects:n,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=pR(r),f={start:"0%",center:"50%",end:"100%"}[h],m=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let x="",p="";return u==="bottom"?(x=o?f:`${m}px`,p=`${-c}px`):u==="top"?(x=o?f:`${m}px`,p=`${n.floating.height+c}px`):u==="right"?(x=`${-c}px`,p=o?f:`${g}px`):u==="left"&&(x=`${n.floating.width+c}px`,p=o?f:`${g}px`),{data:{x,y:p}}}});function pR(t){const[e,r="center"]=t.split("-");return[e,r]}var gR=cR,Vw=dR,Bw=hR,Uw=mR,[Fp,TQ]=gd("Tooltip",[pc]),qw=pc(),yR="TooltipProvider",Q9=700,bC="tooltip.open",[H9,vR]=Fp(yR),xR=t=>{const{__scopeTooltip:e,delayDuration:r=Q9,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,[o,l]=y.useState(!0),c=y.useRef(!1),u=y.useRef(0);return y.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),a.jsx(H9,{scope:e,isOpenDelayed:o,delayDuration:r,onOpen:y.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:y.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:y.useCallback(h=>{c.current=h},[]),disableHoverableContent:s,children:i})};xR.displayName=yR;var wR="Tooltip",[AQ,Vp]=Fp(wR),Xy="TooltipTrigger",Y9=y.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Vp(Xy,r),i=vR(Xy,r),o=qw(r),l=y.useRef(null),c=ot(e,l,s.onTriggerChange),u=y.useRef(!1),h=y.useRef(!1),f=y.useCallback(()=>u.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(Vw,{asChild:!0,...o,children:a.jsx(qe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:me(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:me(t.onBlur,s.onClose),onClick:me(t.onClick,s.onClose)})})});Y9.displayName=Xy;var K9="TooltipPortal",[SQ,J9]=Fp(K9,{forceMount:void 0}),Jl="TooltipContent",bR=y.forwardRef((t,e)=>{const r=J9(Jl,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,o=Vp(Jl,t.__scopeTooltip);return a.jsx(xa,{present:n||o.open,children:o.disableHoverableContent?a.jsx(ER,{side:s,...i,ref:e}):a.jsx(X9,{side:s,...i,ref:e})})}),X9=y.forwardRef((t,e)=>{const r=Vp(Jl,t.__scopeTooltip),n=vR(Jl,t.__scopeTooltip),s=y.useRef(null),i=ot(e,s),[o,l]=y.useState(null),{trigger:c,onClose:u}=r,h=s.current,{onPointerInTransitChange:f}=n,m=y.useCallback(()=>{l(null),f(!1)},[f]),g=y.useCallback((x,p)=>{const b=x.currentTarget,_={x:x.clientX,y:x.clientY},w=rU(_,b.getBoundingClientRect()),C=nU(_,w),R=sU(p.getBoundingClientRect()),L=oU([...C,...R]);l(L),f(!0)},[f]);return y.useEffect(()=>()=>m(),[m]),y.useEffect(()=>{if(c&&h){const x=b=>g(b,h),p=b=>g(b,c);return c.addEventListener("pointerleave",x),h.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",p)}}},[c,h,g,m]),y.useEffect(()=>{if(o){const x=p=>{const b=p.target,_={x:p.clientX,y:p.clientY},w=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),C=!iU(_,o);w?m():C&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,h,o,u,m]),a.jsx(ER,{...t,ref:i})}),[Z9,eU]=Fp(wR,{isInside:!1}),ER=y.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Vp(Jl,r),u=qw(r),{onClose:h}=c;return y.useEffect(()=>(document.addEventListener(bC,h),()=>document.removeEventListener(bC,h)),[h]),y.useEffect(()=>{if(c.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(yd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(Bw,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(OA,{children:n}),a.jsx(Z9,{scope:r,isInside:!0,children:a.jsx(FD,{id:c.contentId,role:"tooltip",children:s||n})})]})})});bR.displayName=Jl;var CR="TooltipArrow",tU=y.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=qw(r);return eU(CR,r).isInside?null:a.jsx(Uw,{...s,...n,ref:e})});tU.displayName=CR;function rU(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function nU(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function sU(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function iU(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>n!=h>n&&r<(u-l)*(n-c)/(h-c)+l&&(s=!s)}return s}function oU(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),aU(e)}function aU(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var lU=xR,_R=bR;const cU=lU,uU=y.forwardRef(({className:t,sideOffset:e=4,...r},n)=>a.jsx(_R,{ref:n,sideOffset:e,className:rt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));uU.displayName=_R.displayName;var Bp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Up=typeof window>"u"||"Deno"in globalThis;function Dn(){}function dU(t,e){return typeof t=="function"?t(e):t}function hU(t){return typeof t=="number"&&t>=0&&t!==1/0}function fU(t,e){return Math.max(t+(e||0)-Date.now(),0)}function EC(t,e){return typeof t=="function"?t(e):t}function mU(t,e){return typeof t=="function"?t(e):t}function CC(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(n){if(e.queryHash!==Gw(o,e.options))return!1}else if(!rd(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function _C(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(td(e.options.mutationKey)!==td(i))return!1}else if(!rd(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Gw(t,e){return((e==null?void 0:e.queryKeyHashFn)||td)(t)}function td(t){return JSON.stringify(t,(e,r)=>Zy(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function rd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!rd(t[r],e[r])):!1}function TR(t,e){if(t===e)return t;const r=TC(t)&&TC(e);if(r||Zy(t)&&Zy(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),o=i.length,l=r?[]:{};let c=0;for(let u=0;u<o;u++){const h=r?u:i[u];(!r&&n.includes(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=TR(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function TC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Zy(t){if(!AC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!AC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function AC(t){return Object.prototype.toString.call(t)==="[object Object]"}function pU(t){return new Promise(e=>{setTimeout(e,t)})}function gU(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?TR(t,e):e}function yU(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function vU(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var $w=Symbol();function AR(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===$w?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var $o,Ni,Al,h_,xU=(h_=class extends Bp{constructor(){super();et(this,$o);et(this,Ni);et(this,Al);Oe(this,Al,e=>{if(!Up&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){re(this,Ni)||this.setEventListener(re(this,Al))}onUnsubscribe(){var e;this.hasListeners()||((e=re(this,Ni))==null||e.call(this),Oe(this,Ni,void 0))}setEventListener(e){var r;Oe(this,Al,e),(r=re(this,Ni))==null||r.call(this),Oe(this,Ni,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){re(this,$o)!==e&&(Oe(this,$o,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof re(this,$o)=="boolean"?re(this,$o):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},$o=new WeakMap,Ni=new WeakMap,Al=new WeakMap,h_),SR=new xU,Sl,Ii,Nl,f_,wU=(f_=class extends Bp{constructor(){super();et(this,Sl,!0);et(this,Ii);et(this,Nl);Oe(this,Nl,e=>{if(!Up&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){re(this,Ii)||this.setEventListener(re(this,Nl))}onUnsubscribe(){var e;this.hasListeners()||((e=re(this,Ii))==null||e.call(this),Oe(this,Ii,void 0))}setEventListener(e){var r;Oe(this,Nl,e),(r=re(this,Ii))==null||r.call(this),Oe(this,Ii,e(this.setOnline.bind(this)))}setOnline(e){re(this,Sl)!==e&&(Oe(this,Sl,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return re(this,Sl)}},Sl=new WeakMap,Ii=new WeakMap,Nl=new WeakMap,f_),Mm=new wU;function bU(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function EU(t){return Math.min(1e3*2**t,3e4)}function NR(t){return(t??"online")==="online"?Mm.isOnline():!0}var IR=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function o0(t){return t instanceof IR}function RR(t){let e=!1,r=0,n=!1,s;const i=bU(),o=p=>{var b;n||(m(new IR(p)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>SR.isFocused()&&(t.networkMode==="always"||Mm.isOnline())&&t.canRun(),h=()=>NR(t.networkMode)&&t.canRun(),f=p=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,p),s==null||s(),i.resolve(p))},m=p=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,p),s==null||s(),i.reject(p))},g=()=>new Promise(p=>{var b;s=_=>{(n||u())&&p(_)},(b=t.onPause)==null||b.call(t)}).then(()=>{var p;s=void 0,n||(p=t.onContinue)==null||p.call(t)}),x=()=>{if(n)return;let p;const b=r===0?t.initialPromise:void 0;try{p=b??t.fn()}catch(_){p=Promise.reject(_)}Promise.resolve(p).then(f).catch(_=>{var V;if(n)return;const w=t.retry??(Up?0:3),C=t.retryDelay??EU,R=typeof C=="function"?C(r,_):C,L=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,_);if(e||!L){m(_);return}r++,(V=t.onFail)==null||V.call(t,r,_),pU(R).then(()=>u()?void 0:g()).then(()=>{e?m(_):x()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():g().then(x),i)}}function CU(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var kr=CU(),zo,m_,PR=(m_=class{constructor(){et(this,zo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hU(this.gcTime)&&Oe(this,zo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Up?1/0:5*60*1e3))}clearGcTimeout(){re(this,zo)&&(clearTimeout(re(this,zo)),Oe(this,zo,void 0))}},zo=new WeakMap,m_),Il,Rl,mn,yr,ld,Wo,On,ks,p_,_U=(p_=class extends PR{constructor(e){super();et(this,On);et(this,Il);et(this,Rl);et(this,mn);et(this,yr);et(this,ld);et(this,Wo);Oe(this,Wo,!1),Oe(this,ld,e.defaultOptions),this.setOptions(e.options),this.observers=[],Oe(this,mn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Oe(this,Il,AU(this.options)),this.state=e.state??re(this,Il),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=re(this,yr))==null?void 0:e.promise}setOptions(e){this.options={...re(this,ld),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&re(this,mn).remove(this)}setData(e,r){const n=gU(this.state.data,e,this.options);return fr(this,On,ks).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){fr(this,On,ks).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=re(this,yr))==null?void 0:n.promise;return(s=re(this,yr))==null||s.cancel(e),r?r.then(Dn).catch(Dn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(re(this,Il))}isActive(){return this.observers.some(e=>mU(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$w||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!fU(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=re(this,yr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=re(this,yr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),re(this,mn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(re(this,yr)&&(re(this,Wo)?re(this,yr).cancel({revert:!0}):re(this,yr).cancelRetry()),this.scheduleGc()),re(this,mn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fr(this,On,ks).call(this,{type:"invalidate"})}fetch(e,r){var c,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(re(this,yr))return re(this,yr).continueRetry(),re(this,yr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Oe(this,Wo,!0),n.signal)})},i=()=>{const f=AR(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return s(m),Oe(this,Wo,!1),this.options.persister?this.options.persister(f,m,this):f(m)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),Oe(this,Rl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&fr(this,On,ks).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const l=f=>{var m,g,x,p;o0(f)&&f.silent||fr(this,On,ks).call(this,{type:"error",error:f}),o0(f)||((g=(m=re(this,mn).config).onError)==null||g.call(m,f,this),(p=(x=re(this,mn).config).onSettled)==null||p.call(x,this.state.data,f,this)),this.scheduleGc()};return Oe(this,yr,RR({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,g,x,p;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(b){l(b);return}(g=(m=re(this,mn).config).onSuccess)==null||g.call(m,f,this),(p=(x=re(this,mn).config).onSettled)==null||p.call(x,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{fr(this,On,ks).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{fr(this,On,ks).call(this,{type:"pause"})},onContinue:()=>{fr(this,On,ks).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),re(this,yr).start()}},Il=new WeakMap,Rl=new WeakMap,mn=new WeakMap,yr=new WeakMap,ld=new WeakMap,Wo=new WeakMap,On=new WeakSet,ks=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...TU(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return o0(s)&&s.revert&&re(this,Rl)?{...re(this,Rl),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),kr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),re(this,mn).notify({query:this,type:"updated",action:e})})},p_);function TU(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:NR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function AU(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ts,g_,SU=(g_=class extends Bp{constructor(e={}){super();et(this,ts);this.config=e,Oe(this,ts,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??Gw(s,r);let o=this.get(i);return o||(o=new _U({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){re(this,ts).has(e.queryHash)||(re(this,ts).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=re(this,ts).get(e.queryHash);r&&(e.destroy(),r===e&&re(this,ts).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){kr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return re(this,ts).get(e)}getAll(){return[...re(this,ts).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>CC(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>CC(e,n)):r}notify(e){kr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){kr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){kr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ts=new WeakMap,g_),rs,Rr,Qo,ns,yi,y_,NU=(y_=class extends PR{constructor(e){super();et(this,ns);et(this,rs);et(this,Rr);et(this,Qo);this.mutationId=e.mutationId,Oe(this,Rr,e.mutationCache),Oe(this,rs,[]),this.state=e.state||IU(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){re(this,rs).includes(e)||(re(this,rs).push(e),this.clearGcTimeout(),re(this,Rr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Oe(this,rs,re(this,rs).filter(r=>r!==e)),this.scheduleGc(),re(this,Rr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){re(this,rs).length||(this.state.status==="pending"?this.scheduleGc():re(this,Rr).remove(this))}continue(){var e;return((e=re(this,Qo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,l,c,u,h,f,m,g,x,p,b,_,w,C,R,L,V,I;Oe(this,Qo,RR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,N)=>{fr(this,ns,yi).call(this,{type:"failed",failureCount:A,error:N})},onPause:()=>{fr(this,ns,yi).call(this,{type:"pause"})},onContinue:()=>{fr(this,ns,yi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>re(this,Rr).canRun(this)}));const r=this.state.status==="pending",n=!re(this,Qo).canStart();try{if(!r){fr(this,ns,yi).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(s=re(this,Rr).config).onMutate)==null?void 0:i.call(s,e,this));const N=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));N!==this.state.context&&fr(this,ns,yi).call(this,{type:"pending",context:N,variables:e,isPaused:n})}const A=await re(this,Qo).start();return await((u=(c=re(this,Rr).config).onSuccess)==null?void 0:u.call(c,A,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,A,e,this.state.context)),await((g=(m=re(this,Rr).config).onSettled)==null?void 0:g.call(m,A,null,this.state.variables,this.state.context,this)),await((p=(x=this.options).onSettled)==null?void 0:p.call(x,A,null,e,this.state.context)),fr(this,ns,yi).call(this,{type:"success",data:A}),A}catch(A){try{throw await((_=(b=re(this,Rr).config).onError)==null?void 0:_.call(b,A,e,this.state.context,this)),await((C=(w=this.options).onError)==null?void 0:C.call(w,A,e,this.state.context)),await((L=(R=re(this,Rr).config).onSettled)==null?void 0:L.call(R,void 0,A,this.state.variables,this.state.context,this)),await((I=(V=this.options).onSettled)==null?void 0:I.call(V,void 0,A,e,this.state.context)),A}finally{fr(this,ns,yi).call(this,{type:"error",error:A})}}finally{re(this,Rr).runNext(this)}}},rs=new WeakMap,Rr=new WeakMap,Qo=new WeakMap,ns=new WeakSet,yi=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),kr.batch(()=>{re(this,rs).forEach(n=>{n.onMutationUpdate(e)}),re(this,Rr).notify({mutation:this,type:"updated",action:e})})},y_);function IU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kr,cd,v_,RU=(v_=class extends Bp{constructor(e={}){super();et(this,Kr);et(this,cd);this.config=e,Oe(this,Kr,new Map),Oe(this,cd,Date.now())}build(e,r,n){const s=new NU({mutationCache:this,mutationId:++bh(this,cd)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){const r=Jh(e),n=re(this,Kr).get(r)??[];n.push(e),re(this,Kr).set(r,n),this.notify({type:"added",mutation:e})}remove(e){var n;const r=Jh(e);if(re(this,Kr).has(r)){const s=(n=re(this,Kr).get(r))==null?void 0:n.filter(i=>i!==e);s&&(s.length===0?re(this,Kr).delete(r):re(this,Kr).set(r,s))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const r=(n=re(this,Kr).get(Jh(e)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===e}runNext(e){var n;const r=(n=re(this,Kr).get(Jh(e)))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){kr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...re(this,Kr).values()].flat()}find(e){const r={exact:!0,...e};return this.getAll().find(n=>_C(r,n))}findAll(e={}){return this.getAll().filter(r=>_C(e,r))}notify(e){kr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return kr.batch(()=>Promise.all(e.map(r=>r.continue().catch(Dn))))}},Kr=new WeakMap,cd=new WeakMap,v_);function Jh(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function SC(t){return{onFetch:(e,r)=>{var h,f,m,g,x;const n=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const b=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},_=AR(e.options,e.fetchOptions),w=async(C,R,L)=>{if(p)return Promise.reject();if(R==null&&C.pages.length)return Promise.resolve(C);const V={queryKey:e.queryKey,pageParam:R,direction:L?"backward":"forward",meta:e.options.meta};b(V);const I=await _(V),{maxPages:A}=e.options,N=L?vU:yU;return{pages:N(C.pages,I,A),pageParams:N(C.pageParams,R,A)}};if(s&&i.length){const C=s==="backward",R=C?PU:NC,L={pages:i,pageParams:o},V=R(n,L);l=await w(L,V,C)}else{const C=t??i.length;do{const R=c===0?o[0]??n.initialPageParam:NC(n,l);if(c>0&&R==null)break;l=await w(l,R),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var p,b;return(b=(p=e.options).persister)==null?void 0:b.call(p,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function NC(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function PU(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Rt,Ri,Pi,Pl,kl,ki,jl,Ml,x_,kU=(x_=class{constructor(t={}){et(this,Rt);et(this,Ri);et(this,Pi);et(this,Pl);et(this,kl);et(this,ki);et(this,jl);et(this,Ml);Oe(this,Rt,t.queryCache||new SU),Oe(this,Ri,t.mutationCache||new RU),Oe(this,Pi,t.defaultOptions||{}),Oe(this,Pl,new Map),Oe(this,kl,new Map),Oe(this,ki,0)}mount(){bh(this,ki)._++,re(this,ki)===1&&(Oe(this,jl,SR.subscribe(async t=>{t&&(await this.resumePausedMutations(),re(this,Rt).onFocus())})),Oe(this,Ml,Mm.subscribe(async t=>{t&&(await this.resumePausedMutations(),re(this,Rt).onOnline())})))}unmount(){var t,e;bh(this,ki)._--,re(this,ki)===0&&((t=re(this,jl))==null||t.call(this),Oe(this,jl,void 0),(e=re(this,Ml))==null||e.call(this),Oe(this,Ml,void 0))}isFetching(t){return re(this,Rt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return re(this,Ri).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=re(this,Rt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=re(this,Rt).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(EC(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return re(this,Rt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=re(this,Rt).get(n.queryHash),i=s==null?void 0:s.state.data,o=dU(e,i);if(o!==void 0)return re(this,Rt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return kr.batch(()=>re(this,Rt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=re(this,Rt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=re(this,Rt);kr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=re(this,Rt),n={type:"active",...t};return kr.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=kr.batch(()=>re(this,Rt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Dn).catch(Dn)}invalidateQueries(t={},e={}){return kr.batch(()=>{if(re(this,Rt).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=kr.batch(()=>re(this,Rt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Dn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Dn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=re(this,Rt).build(this,e);return r.isStaleByTime(EC(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Dn).catch(Dn)}fetchInfiniteQuery(t){return t.behavior=SC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Dn).catch(Dn)}ensureInfiniteQueryData(t){return t.behavior=SC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Mm.isOnline()?re(this,Ri).resumePausedMutations():Promise.resolve()}getQueryCache(){return re(this,Rt)}getMutationCache(){return re(this,Ri)}getDefaultOptions(){return re(this,Pi)}setDefaultOptions(t){Oe(this,Pi,t)}setQueryDefaults(t,e){re(this,Pl).set(td(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...re(this,Pl).values()];let r={};return e.forEach(n=>{rd(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){re(this,kl).set(td(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...re(this,kl).values()];let r={};return e.forEach(n=>{rd(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...re(this,Pi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Gw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===$w&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...re(this,Pi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){re(this,Rt).clear(),re(this,Ri).clear()}},Rt=new WeakMap,Ri=new WeakMap,Pi=new WeakMap,Pl=new WeakMap,kl=new WeakMap,ki=new WeakMap,jl=new WeakMap,Ml=new WeakMap,x_),jU=y.createContext(void 0),MU=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(jU.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nd(){return nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nd.apply(this,arguments)}var Oi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Oi||(Oi={}));const IC="popstate";function DU(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:l}=n.location;return ev("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Dm(s)}return LU(e,r,null,t)}function Ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kR(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OU(){return Math.random().toString(36).substr(2,8)}function RC(t,e){return{usr:t.state,key:t.key,idx:e}}function ev(t,e,r,n){return r===void 0&&(r=null),nd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gc(e):e,{state:r,key:e&&e.key||n||OU()})}function Dm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function gc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function LU(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Oi.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(nd({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=Oi.Pop;let b=h(),_=b==null?null:b-u;u=b,c&&c({action:l,location:p.location,delta:_})}function m(b,_){l=Oi.Push;let w=ev(p.location,b,_);u=h()+1;let C=RC(w,u),R=p.createHref(w);try{o.pushState(C,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}i&&c&&c({action:l,location:p.location,delta:1})}function g(b,_){l=Oi.Replace;let w=ev(p.location,b,_);u=h();let C=RC(w,u),R=p.createHref(w);o.replaceState(C,"",R),i&&c&&c({action:l,location:p.location,delta:0})}function x(b){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:Dm(b);return w=w.replace(/ $/,"%20"),Ot(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let p={get action(){return l},get location(){return t(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(IC,f),c=b,()=>{s.removeEventListener(IC,f),c=null}},createHref(b){return e(s,b)},createURL:x,encodeLocation(b){let _=x(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:g,go(b){return o.go(b)}};return p}var PC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(PC||(PC={}));function FU(t,e,r){return r===void 0&&(r="/"),VU(t,e,r,!1)}function VU(t,e,r,n){let s=typeof e=="string"?gc(e):e,i=zw(s.pathname||"/",r);if(i==null)return null;let o=jR(t);BU(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=JU(i);l=YU(o[c],u,n)}return l}function jR(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ot(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Ki([n,c.relativePath]),h=r.concat(c);i.children&&i.children.length>0&&(Ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),jR(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:QU(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of MR(i.path))s(i,o,c)}),e}function MR(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=MR(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function BU(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:HU(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const UU=/^:[\w-]+$/,qU=3,GU=2,$U=1,zU=10,WU=-2,kC=t=>t==="*";function QU(t,e){let r=t.split("/"),n=r.length;return r.some(kC)&&(n+=WU),e&&(n+=GU),r.filter(s=>!kC(s)).reduce((s,i)=>s+(UU.test(i)?qU:i===""?$U:zU),n)}function HU(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function YU(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=jC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=jC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ki([i,f.pathname]),pathnameBase:t7(Ki([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ki([i,f.pathnameBase]))}return o}function jC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=KU(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,h,f)=>{let{paramName:m,isOptional:g}=h;if(m==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const x=l[f];return g&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function KU(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),kR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function JU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function XU(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?gc(t):t;return{pathname:r?r.startsWith("/")?r:ZU(r,e):e,search:r7(n),hash:n7(s)}}function ZU(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function a0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function e7(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Ww(t,e){let r=e7(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Qw(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=gc(t):(s=nd({},t),Ot(!s.pathname||!s.pathname.includes("?"),a0("?","pathname","search",s)),Ot(!s.pathname||!s.pathname.includes("#"),a0("#","pathname","hash",s)),Ot(!s.search||!s.search.includes("#"),a0("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=XU(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Ki=t=>t.join("/").replace(/\/\/+/g,"/"),t7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),r7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,n7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function s7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DR=["post","put","patch","delete"];new Set(DR);const i7=["get",...DR];new Set(i7);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sd(){return sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sd.apply(this,arguments)}const Hw=y.createContext(null),o7=y.createContext(null),bo=y.createContext(null),qp=y.createContext(null),Eo=y.createContext({outlet:null,matches:[],isDataRoute:!1}),OR=y.createContext(null);function a7(t,e){let{relative:r}=e===void 0?{}:e;yc()||Ot(!1);let{basename:n,navigator:s}=y.useContext(bo),{hash:i,pathname:o,search:l}=FR(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Ki([n,o])),s.createHref({pathname:c,search:l,hash:i})}function yc(){return y.useContext(qp)!=null}function ti(){return yc()||Ot(!1),y.useContext(qp).location}function LR(t){y.useContext(bo).static||y.useLayoutEffect(t)}function Yn(){let{isDataRoute:t}=y.useContext(Eo);return t?w7():l7()}function l7(){yc()||Ot(!1);let t=y.useContext(Hw),{basename:e,future:r,navigator:n}=y.useContext(bo),{matches:s}=y.useContext(Eo),{pathname:i}=ti(),o=JSON.stringify(Ww(s,r.v7_relativeSplatPath)),l=y.useRef(!1);return LR(()=>{l.current=!0}),y.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=Qw(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ki([e,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[e,n,o,i,t])}function FR(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=y.useContext(bo),{matches:s}=y.useContext(Eo),{pathname:i}=ti(),o=JSON.stringify(Ww(s,n.v7_relativeSplatPath));return y.useMemo(()=>Qw(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function c7(t,e){return u7(t,e)}function u7(t,e,r,n){yc()||Ot(!1);let{navigator:s}=y.useContext(bo),{matches:i}=y.useContext(Eo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ti(),h;if(e){var f;let b=typeof e=="string"?gc(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Ot(!1),h=b}else h=u;let m=h.pathname||"/",g=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=FU(t,{pathname:g}),p=p7(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ki([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Ki([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return e&&p?y.createElement(qp.Provider,{value:{location:sd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Oi.Pop}},p):p}function d7(){let t=x7(),e=s7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),r?y.createElement("pre",{style:s},r):null,null)}const h7=y.createElement(d7,null);class f7 extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?y.createElement(Eo.Provider,{value:this.props.routeContext},y.createElement(OR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function m7(t){let{routeContext:e,match:r,children:n}=t,s=y.useContext(Hw);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(Eo.Provider,{value:e},n)}function p7(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||Ot(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:g}=r,x=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let g,x=!1,p=null,b=null;r&&(g=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||h7,c&&(u<0&&m===0?(x=!0,b=null):u===m&&(x=!0,b=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),w=()=>{let C;return g?C=p:x?C=b:f.route.Component?C=y.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,y.createElement(m7,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:r!=null},children:C})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?y.createElement(f7,{location:r.location,revalidation:r.revalidation,component:p,error:g,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var VR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(VR||{}),Om=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Om||{});function g7(t){let e=y.useContext(Hw);return e||Ot(!1),e}function y7(t){let e=y.useContext(o7);return e||Ot(!1),e}function v7(t){let e=y.useContext(Eo);return e||Ot(!1),e}function BR(t){let e=v7(),r=e.matches[e.matches.length-1];return r.route.id||Ot(!1),r.route.id}function x7(){var t;let e=y.useContext(OR),r=y7(Om.UseRouteError),n=BR(Om.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function w7(){let{router:t}=g7(VR.UseNavigateStable),e=BR(Om.UseNavigateStable),r=y.useRef(!1);return LR(()=>{r.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,sd({fromRouteId:e},i)))},[t,e])}function Lm(t){let{to:e,replace:r,state:n,relative:s}=t;yc()||Ot(!1);let{future:i,static:o}=y.useContext(bo),{matches:l}=y.useContext(Eo),{pathname:c}=ti(),u=Yn(),h=Qw(e,Ww(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return y.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Xn(t){Ot(!1)}function b7(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Oi.Pop,navigator:i,static:o=!1,future:l}=t;yc()&&Ot(!1);let c=e.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:i,static:o,future:sd({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=gc(n));let{pathname:h="/",search:f="",hash:m="",state:g=null,key:x="default"}=n,p=y.useMemo(()=>{let b=zw(h,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:g,key:x},navigationType:s}},[c,h,f,m,g,x,s]);return p==null?null:y.createElement(bo.Provider,{value:u},y.createElement(qp.Provider,{children:r,value:p}))}function E7(t){let{children:e,location:r}=t;return c7(tv(e),r)}new Promise(()=>{});function tv(t,e){e===void 0&&(e=[]);let r=[];return y.Children.forEach(t,(n,s)=>{if(!y.isValidElement(n))return;let i=[...e,s];if(n.type===y.Fragment){r.push.apply(r,tv(n.props.children,i));return}n.type!==Xn&&Ot(!1),!n.props.index||!n.props.children||Ot(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=tv(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rv(){return rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rv.apply(this,arguments)}function C7(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function _7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function T7(t,e){return t.button===0&&(!e||e==="_self")&&!_7(t)}const A7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],S7="6";try{window.__reactRouterVersion=S7}catch{}const N7="startTransition",MC=P_[N7];function I7(t){let{basename:e,children:r,future:n,window:s}=t,i=y.useRef();i.current==null&&(i.current=DU({window:s,v5Compat:!0}));let o=i.current,[l,c]=y.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=y.useCallback(f=>{u&&MC?MC(()=>c(f)):c(f)},[c,u]);return y.useLayoutEffect(()=>o.listen(h),[o,h]),y.createElement(b7,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const R7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xs=y.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,m=C7(e,A7),{basename:g}=y.useContext(bo),x,p=!1;if(typeof u=="string"&&P7.test(u)&&(x=u,R7))try{let C=new URL(window.location.href),R=u.startsWith("//")?new URL(C.protocol+u):new URL(u),L=zw(R.pathname,g);R.origin===C.origin&&L!=null?u=L+R.search+R.hash:p=!0}catch{}let b=a7(u,{relative:s}),_=k7(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function w(C){n&&n(C),C.defaultPrevented||_(C)}return y.createElement("a",rv({},m,{href:x||b,onClick:p||i?n:w,ref:r,target:c}))});var DC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DC||(DC={}));var OC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(OC||(OC={}));function k7(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Yn(),u=ti(),h=FR(t,{relative:o});return y.useCallback(f=>{if(T7(f,r)){f.preventDefault();let m=n!==void 0?n:Dm(u)===Dm(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,n,s,r,t,i,o,l])}const UR=()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,j7=async(t,e)=>{try{console.log("loginUser: Starting login process for email:",t);const r=await U6(Zo,t,e);console.log("loginUser: Firebase Auth successful for UID:",r.user.uid);const n=await lo(Yt(ht,"users",r.user.uid));if(console.log("loginUser: User document exists:",n.exists()),n.exists()){const s=n.data();console.log("loginUser: User data retrieved, current session status:",s.isSessionValid);const i=UR(),o=Fe.now();console.log("loginUser: Updating user document with new session"),await dc(Yt(ht,"users",r.user.uid),{sessionToken:i,lastLoginAt:o,isSessionValid:!0}),console.log("loginUser: User document updated with new session");const l={...s,sessionToken:i,lastLoginAt:o,isSessionValid:!0};return console.log("loginUser: Returning updated user data with session:",l.isSessionValid),l}return console.log("loginUser: User document not found, returning null"),null}catch(r){throw console.error("loginUser error:",r),r}},M7=async(t,e,r,n,s)=>{try{const i=await B6(Zo,e,r),o=UR(),l=Fe.now(),c={id:i.user.uid,name:t,email:e,feedback:n,purchases:0,isRewardReady:!1,createdAt:l,rewards:[],role:"customer",currentOfferId:"default_offer",currentOfferProgress:0,sessionToken:o,lastLoginAt:l,isSessionValid:!0};try{await Rp(Yt(ht,"users",i.user.uid),c),(await lo(Yt(ht,"users",i.user.uid))).exists()?console.log(" User document verified in Firestore"):console.error(" User document not found after creation!")}catch(u){throw console.error("Firestore error during user creation:",u),u}return c}catch(i){throw console.error("registerUser error:",i),i}},D7=async()=>{try{const t=Zo.currentUser;t&&await dc(Yt(ht,"users",t.uid),{isSessionValid:!1,sessionToken:null}),await tC(Zo)}catch(t){console.error("Logout error:",t),await tC(Zo)}},O7=t=>z6(Zo,t),L7=(t,e)=>{const r=Ea(ht,"users"),n=Sd(r,ww("createdAt","desc"));return Pp(n,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({...l,id:o.id})}),t(i)},e)},F7=(t,e,r)=>{const n=Yt(ht,"users",t);return Pp(n,s=>{s.exists()?e(s.data()):e(null)},r)},V7=async(t,e,r)=>{if(!t||t.role!=="super_admin")throw new Error("Only super admins can update user roles");const n=Yt(ht,"users",e);await dc(n,{role:r})},B7=async(t,e,r,n)=>{var R,L;const s=e&&r;if(!t&&!s)return;const i=s?Yt(ht,"users",r):Yt(ht,"users",t.id),o=await lo(i);if(!o.exists())throw new Error("User not found");const l=o.data(),c=n||l.currentOfferId;if(!c)throw new Error("No offer specified and user has no active offer assigned");const u=Yt(ht,"offers",c),h=await lo(u);if(!h.exists())throw new Error("Specified offer not found");const f=h.data();if(!f.isActive)throw new Error("Specified offer is no longer active");const m=f.stampRequirement,g=(R=l.completedRewards)==null?void 0:R.find(V=>{var I,A,N;return((I=V.offerSnapshot)==null?void 0:I.offerId)===c&&((A=V.scanHistory)==null?void 0:A.length)<((N=V.offerSnapshot)==null?void 0:N.stampRequirement)&&!V.claimedAt});let x=0,p=g;if(g){if(x=((L=g.scanHistory)==null?void 0:L.length)||0,x>=m)throw new Error("User has already completed this offer")}else{if(!f.isActive)throw new Error("This offer is no longer active for new users. Only users who have already started collecting stamps can continue.");p={rewardId:`reward_${Date.now()}`,claimedAt:null,scanHistory:[],rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription,offerSnapshot:{offerId:f.offerId,offerName:f.name,description:f.description,stampRequirement:f.stampRequirement,rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription},createdAt:Fe.now()}}x+(f.stampsPerScan||1);const b={scannedBy:(t==null?void 0:t.email)||"unknown",timestamp:Fe.now(),stampsEarned:f.stampsPerScan||1},_={...p,scanHistory:[...p.scanHistory||[],b]};let w=l.completedRewards||[];g?w=w.map(V=>V.rewardId===g.rewardId?_:V):w=[...w,_];const C=f.stampsPerScan||1;await dc(i,{lastScanAt:Fe.now(),completedRewards:w,purchases:UV(C)})},U7=async(t,e,r,n)=>{const s=e&&r;if(!t&&!s)return;const i=s?Yt(ht,"users",r):Yt(ht,"users",t.id),o=await lo(i);if(!o.exists())throw new Error("User not found");const c=o.data().completedRewards||[],u=c.find(f=>f.rewardId===n);if(!u)throw new Error("Reward not found");if(u.claimedAt)throw new Error("Reward has already been redeemed");const h=c.map(f=>f.rewardId===n?{...f,claimedAt:Fe.now()}:f);await dc(i,{completedRewards:h})},q7=(t,e)=>{const r=Yt(ht,"settings","global");return Pp(r,n=>{if(n.exists())t(n.data());else{const s={purchaseLimit:5,descriptionMessage:"Complete purchases to unlock your reward!",rewardType:"percentage",rewardValue:"20",rewardDescription:"20% OFF",updatedAt:Fe.now(),updatedBy:"system"};Rp(r,s),t(s)}},e)},G7=5,$7="Welcome Offer",z7="Complete purchases to unlock your reward!",W7=5,Q7="percentage",H7="20",Y7="20% OFF",K7=async t=>{Ea(ht,"offers");const e={offerId:"default_offer",name:$7,description:z7,stampRequirement:W7,stampsPerScan:1,rewardType:Q7,rewardValue:H7,rewardDescription:Y7,isActive:!0,createdAt:Fe.now(),updatedAt:Fe.now(),createdBy:t.email||"system",expiresAt:null};await Rp(Yt(ht,"offers","default_offer"),e)},qR=async()=>{const t=Ea(ht,"offers"),e=await Ip(t);return e.empty?[]:e.docs.map(r=>r.data())},GR=async(t,e)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can create offers");if(!e.name||!e.description||!e.rewardValue||!e.rewardDescription)throw new Error("Missing required fields");if(e.stampRequirement<1||e.stampsPerScan<1)throw new Error("Stamp requirements must be at least 1");const r=`offer_${Date.now()}`,n={...e,offerId:r,createdAt:Fe.now(),updatedAt:Fe.now(),createdBy:t.email||"system",stampsPerScan:e.stampsPerScan||1,expiresAt:e.expiresAt||null};await Rp(Yt(ht,"offers",r),n)},LC=async(t,e,r)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can update offers");const n=Yt(ht,"offers",e);if(!(await lo(n)).exists())throw new Error("Offer not found");await dc(n,{...r,updatedAt:Fe.now()})},J7=async(t,e)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can delete offers");const r=Ea(ht,"users"),n=Sd(r,qy("completedRewards","array-contains",{"offerSnapshot.offerId":e})),s=await Ip(n);let i=!1;if(s.forEach(o=>{var u;((u=o.data().completedRewards)==null?void 0:u.find(h=>{var f,m,g;return((f=h.offerSnapshot)==null?void 0:f.offerId)===e&&((m=h.scanHistory)==null?void 0:m.length)<((g=h.offerSnapshot)==null?void 0:g.stampRequirement)&&!h.claimedAt}))&&(i=!0)}),i)throw new Error("Cannot delete offer - users are actively collecting stamps. Deactivate the offer instead to hide it from new users while allowing existing users to complete their rewards.");await cI(Yt(ht,"offers",e))};function Co(t,e){return async(...r)=>{try{return await t(...r)}catch(n){throw console.error(`${e} error:`,n),n}}}const X7=Co(j7,"loginUser"),Z7=Co(M7,"registerUser"),FC=Co(D7,"logoutUser"),eq=O7,tq=L7,rq=F7,nq=Co(V7,"updateUserRole"),sq=Co(B7,"addPurchase"),iq=Co(U7,"redeemReward"),oq=q7,wu=qR,aq=Co(GR,"createOffer"),VC=Co(K7,"createDefaultOffer"),$R=y.createContext(null),lq=({children:t})=>{const[e,r]=y.useState(null),[n,s]=y.useState(!0),[i,o]=y.useState(null),[l,c]=y.useState(!0),[u,h]=y.useState([]),[f,m]=y.useState(!1);y.useEffect(()=>{const w=oq(C=>{o(C),c(!1)},C=>{console.error("Error listening to settings:",C),c(!1)});return()=>w()},[]),y.useEffect(()=>{if(!e||e.role!=="admin"&&e.role!=="super_admin"){h([]);return}m(!0);const w=tq(C=>{h(C),m(!1)},C=>{console.error("Error listening to all users:",C),m(!1)});return()=>w()},[e==null?void 0:e.role]),y.useEffect(()=>{let w=null,C=!1;const R=eq(async V=>{C||(C=!0),V&&typeof V=="object"&&V!==null&&"uid"in V?(console.log("Firebase Auth user detected, setting up real-time listener for:",V.uid),setTimeout(()=>{w=rq(V.uid,I=>{console.log("Real-time user data received:",{uid:I.id,isSessionValid:I.isSessionValid,hasSessionToken:!!I.sessionToken}),I.isSessionValid===!1?(console.log("Session explicitly invalidated, signing out user"),r(null),s(!1),FC()):(console.log("Accepting user data during login, session status:",I.isSessionValid),r(I),s(!1))},I=>{console.error("Error listening to user data:",I),r(null),s(!1)})},500)):(r(null),s(!1),w&&(w(),w=null))}),L=setTimeout(()=>{C||s(!1)},1e4);return()=>{R&&R(),w&&w(),clearTimeout(L)}},[]);const g=async(w,C)=>{console.log("Login attempt started for:",w);try{const R=await X7(w,C);return console.log("Login successful, user data received:",!!R),R}catch(R){throw console.error("Login failed:",R),R}},x=(w,C,R,L)=>Z7(w,C,R,L,null),p=(w,C,R)=>sq(e,w,C,R),b=(w,C)=>nq(e,w,C),_=async()=>{console.log("Logout called from useAuth hook"),await FC(),r(null)};return a.jsx($R.Provider,{value:{user:e,loading:n,settings:i,settingsLoading:l,allUsers:u,allUsersLoading:f,login:g,register:x,addPurchase:p,logout:_,updateUserRole:b},children:t})},vs=()=>{const t=y.useContext($R);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},qc=({children:t,requiredRole:e})=>{const{user:r,loading:n}=vs(),s=ti();if(n)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Nx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!r)return a.jsx(Lm,{to:"/login",state:{from:s},replace:!0});if(e){const i=r.role,o={customer:1,admin:2,super_admin:3};if(o[i]<o[e])return a.jsx(Lm,{to:"/dashboard",replace:!0})}return a.jsx(a.Fragment,{children:t})},BC=({children:t})=>{const{user:e,loading:r}=vs();return r?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Nx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):e?a.jsx(Lm,{to:"/dashboard",replace:!0}):a.jsx(a.Fragment,{children:t})},cq=Tx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Pe=y.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const o=n?oa:"button";return a.jsx(o,{className:rt(cq({variant:e,size:r,className:t})),ref:i,...s})});Pe.displayName="Button";const uq=()=>{const[t,e]=y.useState(!1),[r,n]=y.useState(!1),s=()=>{const i=window.matchMedia("(display-mode: standalone)").matches,o=window.matchMedia("(display-mode: fullscreen)").matches,l=window.matchMedia("(display-mode: minimal-ui)").matches,c=navigator.standalone===!0;return i||o||l||c};return y.useEffect(()=>{s()&&n(!0);const o=window.matchMedia("(display-mode: standalone)"),l=c=>{c.matches&&n(!0)};return o.addEventListener("change",l),()=>{o.removeEventListener("change",l)}},[]),r?null:a.jsxs("div",{className:"fixed top-4 right-4 z-40",children:[a.jsxs(Pe,{onClick:()=>e(!t),size:"sm",variant:"outline",className:"bg-white/90 backdrop-blur-sm border-gray-200 hover:bg-white",children:[a.jsx(uO,{className:"w-4 h-4 mr-2"}),"Install Guide"]}),t&&a.jsxs("div",{className:"absolute top-12 right-0 w-80 bg-white rounded-lg shadow-lg border border-gray-200 p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"How to Install"}),a.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Chrome/Edge (Desktop):"}),a.jsx("p",{children:'Look for the install icon (plus sign) in your browser address bar, or use the menu (three dots) and select "Install app"'})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Chrome/Edge (Mobile):"}),a.jsx("p",{children:'Tap the menu (three dots) and select "Add to Home screen" or "Install app"'})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Safari (Mobile):"}),a.jsx("p",{children:'Tap the Share button (square with arrow) and select "Add to Home Screen"'})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Safari (Desktop):"}),a.jsx("p",{children:'Use the Share button in the toolbar and select "Add to Dock"'})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Firefox:"}),a.jsx("p",{children:'Use the menu (three lines) and select "Install App" or "Add to Home Screen"'})]})]}),a.jsx(Pe,{onClick:()=>e(!1),size:"sm",className:"mt-3 w-full",children:"Got it!"})]})]})},dq=()=>{const[t,e]=y.useState(!1),r=()=>{const n=window.matchMedia("(display-mode: standalone)").matches,s=window.matchMedia("(display-mode: fullscreen)").matches,i=window.matchMedia("(display-mode: minimal-ui)").matches,o=navigator.standalone===!0;return n||s||i||o};return y.useEffect(()=>{r()&&e(!0);const s=window.matchMedia("(display-mode: standalone)"),i=o=>{o.matches&&e(!0)};return s.addEventListener("change",i),()=>{s.removeEventListener("change",i)}},[]),a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/bgCover.jpeg)"}}),a.jsx("div",{className:"absolute inset-0 bg-black/60"}),a.jsxs("div",{className:"absolute inset-0 opacity-20",children:[a.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-red-700 rounded-full blur-3xl animate-pulse delay-500"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6 text-center",children:[a.jsx("div",{children:a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("img",{src:"/logo.png",alt:"Vape Master Logo",className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-48 lg:h-48 object-contain"})})}),a.jsxs("div",{className:"mb-12 max-w-md",children:[a.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-semibold text-white mb-4",children:"Loyalty Program"}),a.jsx("p",{className:"text-gray-300 text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed",children:"Join our loyalty program and get rewards! Earn points with every purchase and unlock exclusive benefits."})]}),a.jsxs("div",{className:"space-y-4 w-full max-w-sm",children:[a.jsx(Xs,{to:"/register",className:"block",children:a.jsx(Pe,{className:"w-full py-4 text-lg font-semibold bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"Join Now"})}),a.jsx(Xs,{to:"/login",className:"block",children:a.jsx(Pe,{variant:"outline",className:"w-full py-4 text-lg font-semibold bg-transparent border-2 border-red-500 text-red-400 hover:bg-red-500 hover:text-white transition-all duration-300 transform hover:scale-105",children:"Already a Member?"})})]}),!t&&a.jsx("div",{className:"mt-8",children:a.jsx(uq,{})}),a.jsx("div",{className:"absolute bottom-6 text-center text-gray-500",children:a.jsx("p",{className:"text-sm",children:"Smoke responsibly  21+ only"})})]})]})},hq=()=>{const{user:t,loading:e}=vs();return e?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Nx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):t?a.jsx(Lm,{to:"/dashboard",replace:!0}):a.jsx(dq,{})},st=y.forwardRef(({className:t,type:e,...r},n)=>a.jsx("input",{type:e,className:rt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));st.displayName="Input";var fq="Label",zR=y.forwardRef((t,e)=>a.jsx(qe.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));zR.displayName=fq;var WR=zR;const mq=Tx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),en=y.forwardRef(({className:t,...e},r)=>a.jsx(WR,{ref:r,className:rt(mq(),t),...e}));en.displayName=WR.displayName;const id=y.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:rt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));id.displayName="Textarea";function gt(t,e){const r=window;typeof window<"u"&&typeof r.gtag=="function"&&r.gtag("event",t,e||{})}const pq=()=>{const[t,e]=y.useState(""),[r,n]=y.useState(""),[s,i]=y.useState(""),[o,l]=y.useState(""),[c,u]=y.useState(!1),{register:h,user:f,loading:m}=vs(),g=Yn();y.useEffect(()=>{gt("page_view",{page:"Register"})},[]);const x=async p=>{if(p.preventDefault(),!t.trim()||!r.trim()||!o.trim()){ct({title:"Missing Information",description:"Please fill in your name, email, and password.",variant:"destructive"}),gt("register_missing_info");return}u(!0);try{gt("register_attempt",{email:r}),await h(t.trim(),r.trim(),o.trim(),s.trim()||null),ct({title:"Welcome to Vape Master!",description:"Your loyalty card is ready!"}),gt("register_success",{user_id:f.id,user_role:f.role}),g("/dashboard")}catch(b){let _="Please try again.";b&&typeof b=="object"&&"message"in b&&typeof b.message=="string"&&(_=b.message),ct({title:"Registration Failed",description:_,variant:"destructive"}),gt("register_failed",{email:r,error:_})}finally{u(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"p-6",children:a.jsx(Xs,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(tc,{className:"w-6 h-6"})})}),a.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:a.jsx("div",{className:"w-full max-w-md",children:a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Join the Club"}),a.jsx("p",{className:"text-gray-400",children:"Create your loyalty account"})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"name",className:"text-white",children:"Full Name"}),a.jsx(st,{id:"name",type:"text",value:t,onChange:p=>e(p.target.value),placeholder:"Enter your full name",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"email",className:"text-white",children:"Email"}),a.jsx(st,{id:"email",type:"email",value:r,onChange:p=>n(p.target.value),placeholder:"Enter your email",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"password",className:"text-white",children:"Password"}),a.jsx(st,{id:"password",type:"password",value:o,onChange:p=>l(p.target.value),placeholder:"Create a password",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"feedback",className:"text-white",children:"Feedback (Optional)"}),a.jsx(id,{id:"feedback",value:s,onChange:p=>i(p.target.value),placeholder:"Tell us about your experience...",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 min-h-[100px]"})]}),a.jsx(Pe,{type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold",disabled:c,children:c?"Creating Account...":"Create Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",a.jsx(Xs,{to:"/login",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign in"})]})})]})})})]})]})},gq=()=>{const[t,e]=y.useState(""),[r,n]=y.useState(""),[s,i]=y.useState(!1),{login:o,user:l,loading:c}=vs(),u=Yn(),h=ti();y.useEffect(()=>{gt("page_view",{page:"Login"})},[]);const f=async m=>{var g,x;if(m.preventDefault(),!t.trim()||!r.trim()){ct({title:"Missing Information",description:"Please enter your email and password.",variant:"destructive"}),gt("login_missing_info");return}i(!0);try{gt("login_attempt",{email:t});const p=await o(t.trim(),r.trim());if(p){ct({title:"Welcome back!",description:`Good to see you again, ${p.name}!`}),gt("login_success",{user_id:p.id,user_role:p.role});const b=((x=(g=h.state)==null?void 0:g.from)==null?void 0:x.pathname)||"/dashboard";u(b,{replace:!0})}else ct({title:"User Not Found",description:"No account found with this email. Please register first.",variant:"destructive"}),gt("login_user_not_found",{email:t})}catch(p){let b="Please try again.";p&&typeof p=="object"&&"message"in p&&typeof p.message=="string"&&(b=p.message),ct({title:"Login Failed",description:b,variant:"destructive"}),gt("login_failed",{email:t,error:b})}finally{i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"p-6",children:a.jsx(Xs,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(tc,{className:"w-6 h-6"})})}),a.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:a.jsx("div",{className:"w-full max-w-md",children:a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-400",children:"Sign in to your loyalty account"})]}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"email",className:"text-white",children:"Email"}),a.jsx(st,{id:"email",type:"email",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your email",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"password",className:"text-white",children:"Password"}),a.jsx(st,{id:"password",type:"password",value:r,onChange:m=>n(m.target.value),placeholder:"Enter your password",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsx(Pe,{type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold",disabled:s,children:s?"Signing In...":"Sign In"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",a.jsx(Xs,{to:"/register",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign up"})]})})]})})})]})]})};function yq(){const{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:o}=vs(),[l,c]=y.useState([]),u=Yn(),[h,f]=y.useState(!1),m=y.useRef(null),[g,x]=y.useState(!1),[p,b]=y.useState(0),[_,w]=y.useState(null),[C,R]=y.useState("progress"),L=(t==null?void 0:t.purchaseLimit)||(s==null?void 0:s.purchaseLimit)||G7;y.useEffect(()=>{!e&&!t&&u("/login")},[t,e,u]),y.useEffect(()=>{t&&(async()=>{try{const D=await wu();c(D)}catch(D){console.error("Error loading offers:",D)}})()},[t]),y.useEffect(()=>{t&&(w(new Date),m.current!==null&&m.current!==t.purchases&&t.purchases-m.current>0&&(ct({title:"Purchase Updated! ",description:`Your purchase count was updated via QR scan. New total: ${t.purchases}/${L}`}),x(!0),b(D=>D+1),setTimeout(()=>x(!1),2500),t.isRewardReady&&m.current<L&&setTimeout(()=>{ct({title:"Reward Unlocked! ",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)},1e3)),m.current===0&&t.purchases===1&&(f(!0),setTimeout(()=>f(!1),3e3)),m.current=t.purchases)},[t==null?void 0:t.purchases,t==null?void 0:t.isRewardReady,u,L]);const V=Math.max(0,L-((t==null?void 0:t.purchases)||0));return{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:o,offers:l,navigate:u,showFirstConfetti:h,showConfetti:g,confettiKey:p,lastUpdateTime:_,activeTab:C,setActiveTab:R,userPurchaseLimit:L,purchasesRemaining:V,handleAddPurchase:()=>{!t||t.purchases>=L||(r(),x(!0),b(P=>P+1),setTimeout(()=>x(!1),2500),t.purchases+1>=L?(ct({title:"Reward Unlocked! ",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)):ct({title:"Purchase Added!",description:`${L-1-t.purchases} more purchases until your next reward!`}))},handleLogout:()=>{n(),ct({title:"Logged Out",description:"Thanks for visiting Vape Master!"}),u("/")},handleOfferSelection:async P=>{try{console.log("Selecting offer:",P)}catch(D){console.error("Error selecting offer:",D)}}}}var Rf={linear:function(t,e,r,n){var s=r-e;return s*t/n+e},easeInQuad:function(t,e,r,n){var s=r-e;return s*(t/=n)*t+e},easeOutQuad:function(t,e,r,n){var s=r-e;return-s*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t+e},easeOutCubic:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,r,n){var s=r-e;return-s*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,r,n){var s=r-e;return-s*Math.cos(t/n*(Math.PI/2))+s+e},easeOutSine:function(t,e,r,n){var s=r-e;return s*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,r,n){var s=r-e;return-s/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,r,n){var s=r-e;return t==0?e:s*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,r,n){var s=r-e;return t==n?e+s:s*(-Math.pow(2,-10*t/n)+1)+e},easeInOutExpo:function(t,e,r,n){var s=r-e;return t===0?e:t===n?e+s:(t/=n/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,r,n){var s=r-e;return-s*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,r,n){var s=r-e;return s*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,r,n){var s=r-e,i,o,l;return l=1.70158,o=0,i=s,t===0?e:(t/=n)===1?e+s:(o||(o=n*.3),i<Math.abs(s)?(i=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,r,n){var s=r-e,i,o,l;return l=1.70158,o=0,i=s,t===0?e:(t/=n)===1?e+s:(o||(o=n*.3),i<Math.abs(s)?(i=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*n-l)*(2*Math.PI)/o)+s+e)},easeInOutElastic:function(t,e,r,n){var s=r-e,i,o,l;return l=1.70158,o=0,i=s,t===0?e:(t/=n/2)===2?e+s:(o||(o=n*(.3*1.5)),i<Math.abs(s)?(i=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/o)*.5+s+e)},easeInBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),(t/=n/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,r,n){var s=r-e,i;return i=Rf.easeOutBounce(n-t,0,s,n),s-i+e},easeOutBounce:function(t,e,r,n){var s=r-e;return(t/=n)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,r,n){var s=r-e,i;return t<n/2?(i=Rf.easeInBounce(t*2,0,s,n),i*.5+e):(i=Rf.easeOutBounce(t*2-n,0,s,n),i*.5+s*.5+e)}},vq=Rf;function xq(t){return t*Math.PI/180}function Yr(t,e){return t+Math.random()*(e-t)}function wq(t,e){return Math.floor(t+Math.random()*(e-t+1))}var bu;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(bu||(bu={}));var bi;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(bi||(bi={}));const bq=1e3/60;class Eq{constructor(e,r,n,s){this.getOptions=r;const{colors:i,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=e,this.x=n,this.y=s,this.w=Yr(5,20),this.h=Yr(5,20),this.radius=Yr(5,10),this.vx=typeof o=="number"?Yr(-o,o):Yr(o.min,o.max),this.vy=typeof l=="number"?Yr(-l,0):Yr(l.min,l.max),this.shape=wq(0,2),this.angle=xq(Yr(0,360)),this.angularSpin=Yr(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=Yr(0,1),this.rotationDirection=Yr(0,1)?bi.Positive:bi.Negative}update(e){const{gravity:r,wind:n,friction:s,opacity:i,drawShape:o}=this.getOptions(),l=e/bq;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=r*l,this.vx+=n*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===bi.Positive?this.rotationDirection=bi.Negative:this.rotateY<=-1&&this.rotationDirection===bi.Negative&&(this.rotationDirection=bi.Positive);const c=.1*this.rotationDirection*l;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case bu.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case bu.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case bu.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Cq{constructor(e,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Yr(this.x,this.w+this.x),i=Yr(this.y,this.h+this.y);return new Eq(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:l,lastNumberOfPieces:c}=this,{run:u,recycle:h,numberOfPieces:f,debug:m,tweenFunction:g,tweenDuration:x}=this.getOptions();if(!u)return!1;const p=this.particles.length,b=h?p:l;if(b<f){c!==f&&(this.tweenProgress=0,this.tweenFrom=b,this.lastNumberOfPieces=f),this.tweenProgress=Math.min(x,Math.max(0,this.tweenProgress+s));const _=g(this.tweenProgress,this.tweenFrom,f,x),w=Math.round(_-b);for(let C=0;C<w;C++)this.particles.push(this.getParticle());this.particlesGenerated+=w}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${p}`,i.width-10,i.height-20));for(let _=this.particles.length-1;_>=0;_--){const w=this.particles[_];w.update(s),(w.y>i.height||w.y<-100||w.x>i.width+100||w.x<-100)&&(h&&b<=f?this.particles[_]=this.getParticle():this.removeParticleAt(_))}return p>0||b<f},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=r}}const Yw={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:vq.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class _q{constructor(e,r){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...Yw,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:l},canvas:c,context:u}=this,h=Math.min(s-this.lastFrameTime,50);if(l&&h<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?h%l:0),i&&(u.fillStyle="white",u.clearRect(0,0,c.width,c.height)),this.generator.animate(h)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new Cq(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(e){var s,i;const r=(s=this._options)==null?void 0:s.run,n=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&n===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&r===!1&&this.update()}}const Tq=K.createRef();class Kw extends K.Component{constructor(e){super(e),this.canvas=K.createRef(),this.canvas=e.canvasRef||Tq}componentDidMount(){if(this.canvas.current){const e=l0(this.props)[0];this.confetti=new _q(this.canvas.current,e)}}componentDidUpdate(){const e=l0(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,r]=l0(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return a.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...r,style:n})}}Kw.defaultProps={...Yw};Kw.displayName="ReactConfetti";function l0(t){const e={},r={},n={},s=[...Object.keys(Yw),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const l=t[o];s.includes(o)?e[o]=l:i.includes(o)?i[o]=l:n[o]=l}return[e,n,r]}const QR=K.forwardRef((t,e)=>a.jsx(Kw,{canvasRef:e,...t})),Aq=({title:t,onBack:e,actions:r})=>a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:a.jsxs("div",{className:"p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[e&&a.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:t})]}),a.jsx("div",{className:"flex gap-2",children:r})]})}),Sq=({reward:t,isOpen:e,onClose:r})=>!e||!t?null:a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gray-900 border border-red-900/30 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-red-900/30",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Reward Details"}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[a.jsxs("p",{children:["Reward ID: ",t.rewardId]}),t.claimedAt&&a.jsxs("p",{className:"text-green-600",children:["Claimed:"," ",t.claimedAt.toDate?new Date(t.claimedAt.toDate()).toLocaleString():""]})]})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:t.scanHistory&&t.scanHistory.length>0?a.jsxs("div",{children:[a.jsxs("h4",{className:"text-lg font-semibold text-white mb-4",children:["Scan History (",t.scanHistory.length," scans)"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b justify-between border-gray-700 md:table-row flex flex-col md:flex-row",children:[a.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[a.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scan #"}),a.jsx("span",{className:"hidden md:block",children:"Scan #"})]}),a.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[a.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scanned By"}),a.jsx("span",{className:"hidden md:block",children:"Scanned By"})]}),a.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[a.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Date & Time"}),a.jsx("span",{className:"hidden md:block",children:"Date & Time"})]})]})}),a.jsx("tbody",{children:t.scanHistory.map((n,s)=>{var i,o;return a.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50 md:table-row flex flex-col md:flex-row justify-center text-center md:text-left",children:[a.jsxs("td",{className:"px-4 py-3 font-medium flex flex-col md:table-cell items-center md:items-start",children:[a.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scan #"}),s+1]}),a.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[a.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scanned By"}),n.scannedBy]}),a.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[a.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Date & Time"}),(i=n.timestamp)!=null&&i.toDate?new Date(n.timestamp.toDate()).toLocaleString():""]})]},((o=n.timestamp)==null?void 0:o.seconds)+n.scannedBy)})})]})})]}):a.jsx("div",{className:"text-center text-gray-400 py-8",children:a.jsx("p",{children:"No scan history available for this reward."})})}),a.jsx("div",{className:"p-6 border-t border-red-900/30",children:a.jsx("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Close"})})]})}),Nq=({rewards:t,onRewardClick:e})=>!t||t.length===0?a.jsx("div",{className:"text-gray-400 text-sm",children:"No rewards claimed."}):a.jsxs("div",{className:"space-y-4 mt-2 mb-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-white",children:"Claimed Rewards"}),t.slice().reverse().map((r,n)=>a.jsxs("div",{className:"border border-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-800/50 transition-colors",onClick:()=>e(r),children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[a.jsxs("h5",{className:"text-sm font-medium text-white",children:["Reward #",t.length-n," - ",r.rewardId]}),a.jsxs("span",{className:"text-xs text-green-500 text-gray-400",children:["Claimed:"," ",r.claimedAt&&r.claimedAt.toDate?new Date(r.claimedAt.toDate()).toLocaleString():""]})]}),r.scanHistory&&r.scanHistory.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsxs("h6",{className:"text-xs font-medium text-gray-300 mb-1",children:["Scans for this reward: ",r.scanHistory.length," scans"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Click to view detailed scan history"})]})]},r.rewardId))]}),Iq=({allUsers:t})=>{const[e,r]=y.useState(null),[n,s]=y.useState(!1);return a.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-none p-6 min-h-[460px] flex flex-col justify-start -mt-0 shadow-2xl",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Rewards History"}),a.jsx("div",{className:"space-y-2",children:t.filter(i=>i.role==="customer").map(i=>{var o,l;return a.jsxs("div",{className:"bg-gray-800/60 rounded-lg p-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[a.jsxs("span",{className:"font-semibold text-white",children:[i.name," (",i.email,")"]}),a.jsxs("span",{className:"text-xs text-gray-400",children:["Total Scans: ",((l=(o=i.currentReward)==null?void 0:o.scanHistory)==null?void 0:l.length)||0]})]}),a.jsx(Nq,{rewards:i.rewards,onRewardClick:c=>{r(c),s(!0)}})]},i.id)})}),a.jsx(Sq,{reward:e,isOpen:n,onClose:()=>{s(!1),r(null)}})]})},Rq=({users:t,loading:e})=>{const r=s=>{switch(s){case"super_admin":return a.jsx(py,{className:"w-4 h-4 text-yellow-500"});case"admin":return a.jsx(fS,{className:"w-4 h-4 text-blue-500"});default:return a.jsx(ls,{className:"w-4 h-4 text-gray-400"})}},n=s=>{switch(s){case"super_admin":return"text-yellow-400";case"admin":return"text-blue-400";default:return"text-gray-400"}};return e?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}),a.jsx("span",{className:"ml-3 text-gray-400",children:"Loading users..."})]}):t.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ls,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"No users found"})]}):a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map(s=>{var l;const i=s.purchaseLimit||5,o=Math.min(100,s.purchases/i*100);return a.jsxs("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-lg p-4 hover:bg-gray-800/80 transition-all duration-200",children:[a.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[r(s.role),a.jsx("span",{className:`text-sm font-medium ${n(s.role)}`,children:(s.role||"").replace("_"," ").toUpperCase()})]}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"text-sm text-gray-400",children:s.lastScanAt?new Date(s.lastScanAt.toDate()).toLocaleDateString():"Never"})})]}),a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-1",children:[a.jsx("span",{className:"font-semibold text-white",children:s.name}),a.jsx("span",{className:"text-sm text-gray-400",children:s.email})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Progress:"}),a.jsxs("span",{className:"text-white font-medium",children:[s.purchases,"/",i]})]}),a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${o>=100?"bg-green-500":"bg-red-500"}`,style:{width:`${o}%`}})}),a.jsxs("div",{className:"flex items-center flex-wrap justify-between text-xs text-gray-500",children:[a.jsxs("span",{children:[((l=s.rewards)==null?void 0:l.length)||0," rewards claimed"]}),a.jsx("span",{children:s.isRewardReady?" Ready!":`${i-s.purchases} to go`})]})]})]},s.id)})})},Pq=({activeTab:t,onTabChange:e,userRole:r})=>{const n=[{key:"progress",label:"Progress",icon:qn,description:"Track your stamps & rewards",color:"blue",activeColor:"from-blue-500 to-blue-600",inactiveColor:"from-blue-400/20 to-blue-500/20",borderColor:"border-blue-500/30",textColor:"text-blue-300",hoverColor:"hover:from-blue-400/30 hover:to-blue-500/30"},{key:"offers",label:"Offers",icon:kt,description:"Available loyalty offers",color:"green",activeColor:"from-green-500 to-green-600",inactiveColor:"from-green-400/20 to-green-500/20",borderColor:"border-green-500/30",textColor:"text-green-300",hoverColor:"hover:from-green-400/30 hover:to-green-500/30"},{key:"card",label:"Rewards",icon:Gl,description:"Your earned rewards",color:"purple",activeColor:"from-purple-500 to-purple-600",inactiveColor:"from-purple-400/20 to-purple-500/20",borderColor:"border-purple-500/30",textColor:"text-purple-300",hoverColor:"hover:from-purple-400/30 hover:to-purple-500/30"}];return a.jsx("div",{className:"bg-gradient-to-r from-gray-900/80 via-gray-800/80 to-gray-900/80 border border-gray-700/50 rounded-xl p-3 backdrop-blur-sm shadow-lg",children:a.jsx("div",{className:"flex space-x-2 h-24",children:n.map(s=>{const i=s.icon,o=t===s.key;return a.jsxs("button",{onClick:()=>e(s.key),className:`flex-1 flex flex-col items-center justify-center rounded-lg transition-all duration-300 ease-out group relative overflow-hidden min-h-[88px] ${o?`bg-gradient-to-b ${s.activeColor} border-2 ${s.borderColor} text-white shadow-lg shadow-${s.color}-500/25`:`bg-gradient-to-b ${s.inactiveColor} border-2 border-transparent text-gray-400 ${s.hoverColor} hover:border-${s.color}-500/30 hover:text-${s.color}-300`}`,children:[a.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?`bg-gradient-to-b from-${s.color}-500/10 to-${s.color}-400/10`:"bg-transparent"}`}),o&&a.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-${s.color}-400 to-${s.color}-500`}),a.jsx(i,{className:`w-6 h-6 mb-2 transition-all duration-300 ${o?"text-white scale-110 drop-shadow-sm relative z-10":`group-hover:scale-110 group-hover:text-${s.color}-300`}`}),a.jsx("span",{className:`text-sm font-bold transition-all duration-300 mb-1 ${o?"text-white font-extrabold drop-shadow-lg relative z-10":"text-gray-300 group-hover:text-white"}`,children:s.label}),a.jsx("span",{className:`text-xs text-center transition-all duration-300 leading-tight ${o?"text-white font-semibold drop-shadow-lg relative z-10":"text-gray-400 group-hover:text-gray-200"}`,children:s.description}),a.jsx("div",{className:`absolute inset-0 rounded-lg transition-all duration-300 ${o?`ring-2 ring-${s.color}-500/30`:`group-hover:ring-1 group-hover:ring-${s.color}-500/20`}`}),o&&a.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-b from-${s.color}-500/5 to-transparent`})]},s.key)})})})},kq=({user:t,userPurchaseLimit:e,settings:r,purchasesRemaining:n,onViewReward:s,currentOffer:i})=>{var C,R,L;const[o,l]=y.useState({inProgress:!0,completed:!1}),[c,u]=y.useState(!1),h=t.purchases||0,f=((C=t.completedRewards)==null?void 0:C.filter(V=>{var I,A;return((I=V.scanHistory)==null?void 0:I.length)>=((A=V.offerSnapshot)==null?void 0:A.stampRequirement)}))||[],m=((R=t.completedRewards)==null?void 0:R.filter(V=>{var I,A;return((I=V.scanHistory)==null?void 0:I.length)<((A=V.offerSnapshot)==null?void 0:A.stampRequirement)}))||[],g=f.filter(V=>!V.claimedAt),x=((L=t.completedRewards)==null?void 0:L.reduce((V,I)=>{var A;return V+(((A=I.scanHistory)==null?void 0:A.length)||0)},0))||0,p=Math.max(h,x),b=3,_=c?m:m.slice(0,b);c||f.slice(0,b);const w=V=>{l(I=>({...I,[V]:!I[V]}))};return a.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-xl p-6 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsxs("div",{className:"flex items-center justify-center mb-3",children:[a.jsx(yy,{className:"w-8 h-8 text-yellow-400 mr-3"}),a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Life Stamps"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-5xl font-black text-white drop-shadow-[0_2px_8px_#000a] mb-2",children:p}),a.jsx("div",{className:"text-lg text-gray-300 font-medium",children:"Total Stamps Collected Since Joining"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[a.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-blue-400",children:f.length}),a.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards Completed"})]}),a.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-400",children:m.length}),a.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards in Progress"})]}),a.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-yellow-400",children:g.length}),a.jsx("div",{className:"text-gray-300 text-xs",children:"Ready to Redeem"})]})]}),m.length>0&&a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>w("inProgress"),children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(qn,{className:"w-4 h-4 text-blue-400 mr-2"}),a.jsxs("span",{className:"text-blue-300 text-sm font-medium",children:["Current Active Rewards (",m.length,")"]})]}),o.inProgress?a.jsx(dm,{className:"w-4 h-4 text-blue-400"}):a.jsx(Bu,{className:"w-4 h-4 text-blue-400"})]}),o.inProgress&&a.jsxs("div",{className:"space-y-3",children:[_.map((V,I)=>{var O,j,$;const A=((O=V.scanHistory)==null?void 0:O.length)||0,N=((j=V.offerSnapshot)==null?void 0:j.stampRequirement)||0,P=N>0?Math.min(A/N*100,100):0,D=Math.max(0,N-A);return a.jsx("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-3",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h4",{className:"text-white font-medium text-sm mb-2",children:(($=V.offerSnapshot)==null?void 0:$.offerName)||"Loyalty Reward"}),a.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[a.jsx("span",{className:"text-gray-400",children:"Progress:"}),a.jsxs("span",{className:"text-white font-medium",children:[A," / ",N," stamps"]})]}),a.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${P}%`}})}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-300 text-xs mb-2",children:V.rewardDescription}),a.jsx("div",{className:"text-blue-300 text-xs",children:D>0?`${D} more stamps needed`:" Reward ready to redeem!"})]})]})},V.rewardId)}),m.length>b&&a.jsx("div",{className:"text-center pt-2",children:a.jsx(Pe,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${m.length} Rewards`})})]})]})}),m.length===0&&a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-gray-400 text-sm mb-2",children:f.length>0?"All rewards completed! ":"No active rewards yet"}),a.jsx("div",{className:"text-gray-500 text-xs",children:f.length>0?"Check the Offers tab to start a new reward":"Visit the Offers tab to start collecting stamps"})]})}),a.jsx("div",{className:"text-center mb-4",children:a.jsxs("div",{className:"flex items-center justify-center text-gray-400 text-xs",children:[a.jsx(Ax,{className:"w-3 h-3 mr-1"}),"Member since"," ",t.createdAt.toDate().toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"short",year:"numeric"})]})}),t.isRewardReady&&s&&a.jsx("div",{className:"text-center",children:a.jsxs(Pe,{onClick:s,className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-medium px-6 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[a.jsx(vf,{className:"w-4 h-4 mr-2"}),"View Reward"]})})]})};var jq=Object.defineProperty,Fm=Object.getOwnPropertySymbols,HR=Object.prototype.hasOwnProperty,YR=Object.prototype.propertyIsEnumerable,UC=(t,e,r)=>e in t?jq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nv=(t,e)=>{for(var r in e||(e={}))HR.call(e,r)&&UC(t,r,e[r]);if(Fm)for(var r of Fm(e))YR.call(e,r)&&UC(t,r,e[r]);return t},sv=(t,e)=>{var r={};for(var n in t)HR.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Fm)for(var n of Fm(t))e.indexOf(n)<0&&YR.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ma;(t=>{const e=class Be{constructor(c,u,h,f){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<Be.MIN_VERSION||c>Be.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(h);if(this.drawCodewords(g),f==-1){let x=1e9;for(let p=0;p<8;p++){this.applyMask(p),this.drawFormatBits(p);const b=this.getPenaltyScore();b<x&&(f=p,x=b),this.applyMask(p)}}s(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,u){const h=t.QrSegment.makeSegments(c);return Be.encodeSegments(h,u)}static encodeBinary(c,u){const h=t.QrSegment.makeBytes(c);return Be.encodeSegments([h],u)}static encodeSegments(c,u,h=1,f=40,m=-1,g=!0){if(!(Be.MIN_VERSION<=h&&h<=f&&f<=Be.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,p;for(x=h;;x++){const C=Be.getNumDataCodewords(x,u)*8,R=o.getTotalBits(c,x);if(R<=C){p=R;break}if(x>=f)throw new RangeError("Data too long")}for(const C of[Be.Ecc.MEDIUM,Be.Ecc.QUARTILE,Be.Ecc.HIGH])g&&p<=Be.getNumDataCodewords(x,C)*8&&(u=C);let b=[];for(const C of c){r(C.mode.modeBits,4,b),r(C.numChars,C.mode.numCharCountBits(x),b);for(const R of C.getData())b.push(R)}s(b.length==p);const _=Be.getNumDataCodewords(x,u)*8;s(b.length<=_),r(0,Math.min(4,_-b.length),b),r(0,(8-b.length%8)%8,b),s(b.length%8==0);for(let C=236;b.length<_;C^=253)r(C,8,b);let w=[];for(;w.length*8<b.length;)w.push(0);return b.forEach((C,R)=>w[R>>>3]|=C<<7-(R&7)),new Be(x,u,w,m)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let h=0;h<u;h++)for(let f=0;f<u;f++)h==0&&f==0||h==0&&f==u-1||h==u-1&&f==0||this.drawAlignmentPattern(c[h],c[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let h=u;for(let m=0;m<10;m++)h=h<<1^(h>>>9)*1335;const f=(u<<10|h)^21522;s(f>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,n(f,m));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,n(f,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,n(f,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,n(f,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let h=0;h<12;h++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;s(u>>>18==0);for(let h=0;h<18;h++){const f=n(u,h),m=this.size-11+h%3,g=Math.floor(h/3);this.setFunctionModule(m,g,f),this.setFunctionModule(g,m,f)}}drawFinderPattern(c,u){for(let h=-4;h<=4;h++)for(let f=-4;f<=4;f++){const m=Math.max(Math.abs(f),Math.abs(h)),g=c+f,x=u+h;0<=g&&g<this.size&&0<=x&&x<this.size&&this.setFunctionModule(g,x,m!=2&&m!=4)}}drawAlignmentPattern(c,u){for(let h=-2;h<=2;h++)for(let f=-2;f<=2;f++)this.setFunctionModule(c+f,u+h,Math.max(Math.abs(f),Math.abs(h))!=1)}setFunctionModule(c,u,h){this.modules[u][c]=h,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,h=this.errorCorrectionLevel;if(c.length!=Be.getNumDataCodewords(u,h))throw new RangeError("Invalid argument");const f=Be.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][u],m=Be.ECC_CODEWORDS_PER_BLOCK[h.ordinal][u],g=Math.floor(Be.getNumRawDataModules(u)/8),x=f-g%f,p=Math.floor(g/f);let b=[];const _=Be.reedSolomonComputeDivisor(m);for(let C=0,R=0;C<f;C++){let L=c.slice(R,R+p-m+(C<x?0:1));R+=L.length;const V=Be.reedSolomonComputeRemainder(L,_);C<x&&L.push(0),b.push(L.concat(V))}let w=[];for(let C=0;C<b[0].length;C++)b.forEach((R,L)=>{(C!=p-m||L>=x)&&w.push(R[C])});return s(w.length==g),w}drawCodewords(c){if(c.length!=Math.floor(Be.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let f=0;f<this.size;f++)for(let m=0;m<2;m++){const g=h-m,p=(h+1&2)==0?this.size-1-f:f;!this.isFunction[p][g]&&u<c.length*8&&(this.modules[p][g]=n(c[u>>>3],7-(u&7)),u++)}}s(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let h=0;h<this.size;h++){let f;switch(c){case 0:f=(h+u)%2==0;break;case 1:f=u%2==0;break;case 2:f=h%3==0;break;case 3:f=(h+u)%3==0;break;case 4:f=(Math.floor(h/3)+Math.floor(u/2))%2==0;break;case 5:f=h*u%2+h*u%3==0;break;case 6:f=(h*u%2+h*u%3)%2==0;break;case 7:f=((h+u)%2+h*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][h]&&f&&(this.modules[u][h]=!this.modules[u][h])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let g=!1,x=0,p=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[m][b]==g?(x++,x==5?c+=Be.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,p),g||(c+=this.finderPenaltyCountPatterns(p)*Be.PENALTY_N3),g=this.modules[m][b],x=1);c+=this.finderPenaltyTerminateAndCount(g,x,p)*Be.PENALTY_N3}for(let m=0;m<this.size;m++){let g=!1,x=0,p=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][m]==g?(x++,x==5?c+=Be.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,p),g||(c+=this.finderPenaltyCountPatterns(p)*Be.PENALTY_N3),g=this.modules[b][m],x=1);c+=this.finderPenaltyTerminateAndCount(g,x,p)*Be.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let g=0;g<this.size-1;g++){const x=this.modules[m][g];x==this.modules[m][g+1]&&x==this.modules[m+1][g]&&x==this.modules[m+1][g+1]&&(c+=Be.PENALTY_N2)}let u=0;for(const m of this.modules)u=m.reduce((g,x)=>g+(x?1:0),u);const h=this.size*this.size,f=Math.ceil(Math.abs(u*20-h*10)/h)-1;return s(0<=f&&f<=9),c+=f*Be.PENALTY_N4,s(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let h=[6];for(let f=this.size-7;h.length<c;f-=u)h.splice(1,0,f);return h}}static getNumRawDataModules(c){if(c<Be.MIN_VERSION||c>Be.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const h=Math.floor(c/7)+2;u-=(25*h-10)*h-55,c>=7&&(u-=36)}return s(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(Be.getNumRawDataModules(c)/8)-Be.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*Be.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let f=0;f<c-1;f++)u.push(0);u.push(1);let h=1;for(let f=0;f<c;f++){for(let m=0;m<u.length;m++)u[m]=Be.reedSolomonMultiply(u[m],h),m+1<u.length&&(u[m]^=u[m+1]);h=Be.reedSolomonMultiply(h,2)}return u}static reedSolomonComputeRemainder(c,u){let h=u.map(f=>0);for(const f of c){const m=f^h.shift();h.push(0),u.forEach((g,x)=>h[x]^=Be.reedSolomonMultiply(g,m))}return h}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let h=0;for(let f=7;f>=0;f--)h=h<<1^(h>>>7)*285,h^=(u>>>f&1)*c;return s(h>>>8==0),h}finderPenaltyCountPatterns(c){const u=c[1];s(u<=this.size*3);const h=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(h&&c[0]>=u*4&&c[6]>=u?1:0)+(h&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,h){return c&&(this.finderPenaltyAddHistory(u,h),u=0),u+=this.size,this.finderPenaltyAddHistory(u,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)u.push(l>>>h&1)}function n(l,c){return(l>>>c&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const i=class It{constructor(c,u,h){if(this.mode=c,this.numChars=u,this.bitData=h,u<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(c){let u=[];for(const h of c)r(h,8,u);return new It(It.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!It.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let h=0;h<c.length;){const f=Math.min(c.length-h,3);r(parseInt(c.substring(h,h+f),10),f*3+1,u),h+=f}return new It(It.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!It.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],h;for(h=0;h+2<=c.length;h+=2){let f=It.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h))*45;f+=It.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h+1)),r(f,11,u)}return h<c.length&&r(It.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h)),6,u),new It(It.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:It.isNumeric(c)?[It.makeNumeric(c)]:It.isAlphanumeric(c)?[It.makeAlphanumeric(c)]:[It.makeBytes(It.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,u);else if(c<16384)r(2,2,u),r(c,14,u);else if(c<1e6)r(6,3,u),r(c,21,u);else throw new RangeError("ECI assignment value out of range");return new It(It.Mode.ECI,0,u)}static isNumeric(c){return It.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return It.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let h=0;for(const f of c){const m=f.mode.numCharCountBits(u);if(f.numChars>=1<<m)return 1/0;h+=4+m+f.bitData.length}return h}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let h=0;h<c.length;h++)c.charAt(h)!="%"?u.push(c.charCodeAt(h)):(u.push(parseInt(c.substring(h+1,h+3),16)),h+=2);return u}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;t.QrSegment=i})(ma||(ma={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(ma||(ma={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(ma||(ma={}));var dl=ma;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Mq={L:dl.QrCode.Ecc.LOW,M:dl.QrCode.Ecc.MEDIUM,Q:dl.QrCode.Ecc.QUARTILE,H:dl.QrCode.Ecc.HIGH},KR=128,JR="L",XR="#FFFFFF",ZR="#000000",e2=!1,t2=1,Dq=4,Oq=0,Lq=.1;function r2(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(o,l){if(!o&&i!==null){r.push(`M${i+e} ${s+e}h${l-i}v1H${i+e}z`),i=null;return}if(l===n.length-1){if(!o)return;i===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${i+e},${s+e} h${l+1-i}v1H${i+e}z`);return}o&&i===null&&(i=l)})}),r.join("")}function n2(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function Fq(t,e,r,n){if(n==null)return null;const s=t.length+r*2,i=Math.floor(e*Lq),o=s/e,l=(n.width||i)*o,c=(n.height||i)*o,u=n.x==null?t.length/2-l/2:n.x*o,h=n.y==null?t.length/2-c/2:n.y*o,f=n.opacity==null?1:n.opacity;let m=null;if(n.excavate){let x=Math.floor(u),p=Math.floor(h),b=Math.ceil(l+u-x),_=Math.ceil(c+h-p);m={x,y:p,w:b,h:_}}const g=n.crossOrigin;return{x:u,y:h,h:c,w:l,excavation:m,opacity:f,crossOrigin:g}}function Vq(t,e){return e!=null?Math.max(Math.floor(e),0):t?Dq:Oq}function s2({value:t,level:e,minVersion:r,includeMargin:n,marginSize:s,imageSettings:i,size:o,boostLevel:l}){let c=K.useMemo(()=>{const x=(Array.isArray(t)?t:[t]).reduce((p,b)=>(p.push(...dl.QrSegment.makeSegments(b)),p),[]);return dl.QrCode.encodeSegments(x,Mq[e],r,void 0,void 0,l)},[t,e,r,l]);const{cells:u,margin:h,numCells:f,calculatedImageSettings:m}=K.useMemo(()=>{let g=c.getModules();const x=Vq(n,s),p=g.length+x*2,b=Fq(g,o,x,i);return{cells:g,margin:x,numCells:p,calculatedImageSettings:b}},[c,o,i,n,s]);return{qrcode:c,margin:h,cells:u,numCells:f,calculatedImageSettings:m}}var Bq=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Uq=K.forwardRef(function(e,r){const n=e,{value:s,size:i=KR,level:o=JR,bgColor:l=XR,fgColor:c=ZR,includeMargin:u=e2,minVersion:h=t2,boostLevel:f,marginSize:m,imageSettings:g}=n,p=sv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:b}=p,_=sv(p,["style"]),w=g==null?void 0:g.src,C=K.useRef(null),R=K.useRef(null),L=K.useCallback($=>{C.current=$,typeof r=="function"?r($):r&&(r.current=$)},[r]),[V,I]=K.useState(!1),{margin:A,cells:N,numCells:P,calculatedImageSettings:D}=s2({value:s,level:o,minVersion:h,boostLevel:f,includeMargin:u,marginSize:m,imageSettings:g,size:i});K.useEffect(()=>{if(C.current!=null){const $=C.current,Y=$.getContext("2d");if(!Y)return;let J=N;const se=R.current,G=D!=null&&se!==null&&se.complete&&se.naturalHeight!==0&&se.naturalWidth!==0;G&&D.excavation!=null&&(J=n2(N,D.excavation));const W=window.devicePixelRatio||1;$.height=$.width=i*W;const ie=i/P*W;Y.scale(ie,ie),Y.fillStyle=l,Y.fillRect(0,0,P,P),Y.fillStyle=c,Bq?Y.fill(new Path2D(r2(J,A))):N.forEach(function(ne,U){ne.forEach(function(le,_e){le&&Y.fillRect(_e+A,U+A,1,1)})}),D&&(Y.globalAlpha=D.opacity),G&&Y.drawImage(se,D.x+A,D.y+A,D.w,D.h)}}),K.useEffect(()=>{I(!1)},[w]);const O=nv({height:i,width:i},b);let j=null;return w!=null&&(j=K.createElement("img",{src:w,key:w,style:{display:"none"},onLoad:()=>{I(!0)},ref:R,crossOrigin:D==null?void 0:D.crossOrigin})),K.createElement(K.Fragment,null,K.createElement("canvas",nv({style:O,height:i,width:i,ref:L,role:"img"},_)),j)});Uq.displayName="QRCodeCanvas";var i2=K.forwardRef(function(e,r){const n=e,{value:s,size:i=KR,level:o=JR,bgColor:l=XR,fgColor:c=ZR,includeMargin:u=e2,minVersion:h=t2,boostLevel:f,title:m,marginSize:g,imageSettings:x}=n,p=sv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:b,cells:_,numCells:w,calculatedImageSettings:C}=s2({value:s,level:o,minVersion:h,boostLevel:f,includeMargin:u,marginSize:g,imageSettings:x,size:i});let R=_,L=null;x!=null&&C!=null&&(C.excavation!=null&&(R=n2(_,C.excavation)),L=K.createElement("image",{href:x.src,height:C.h,width:C.w,x:C.x+b,y:C.y+b,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const V=r2(R,b);return K.createElement("svg",nv({height:i,width:i,viewBox:`0 0 ${w} ${w}`,ref:r,role:"img"},p),!!m&&K.createElement("title",null,m),K.createElement("path",{fill:l,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),K.createElement("path",{fill:c,d:V,shapeRendering:"crispEdges"}),L)});i2.displayName="QRCodeSVG";const o2=({qrData:t,isOpen:e,onClose:r})=>{if(!e)return null;const n=JSON.stringify(t);return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-white flex-1 text-center truncate",children:t.offerName}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors ml-4",children:a.jsx(Zi,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6 flex justify-center",children:a.jsx("div",{className:"p-4 bg-white rounded-lg",children:a.jsx(i2,{value:n,size:200,level:"M",includeMargin:!0})})})]})})},qq=({user:t,offers:e})=>{var O,j;const[r,n]=y.useState(!1),[s,i]=y.useState(null),[o,l]=y.useState({inProgress:!0,completed:!0}),[c,u]=y.useState(!1),[h,f]=y.useState(!1),m=t.completedRewards||[],g=m.filter($=>{var Y,J;return((Y=$.scanHistory)==null?void 0:Y.length)<((J=$.offerSnapshot)==null?void 0:J.stampRequirement)}),x=m.filter($=>{var Y,J;return((Y=$.scanHistory)==null?void 0:Y.length)>=((J=$.offerSnapshot)==null?void 0:J.stampRequirement)}),p=x.filter($=>!$.claimedAt),b=x.filter($=>!!$.claimedAt),_=($,Y)=>{const J=$.createdAt.toDate().getTime();return Y.createdAt.toDate().getTime()-J},w=[...g].sort(_),C=[...p].sort(_),R=[...b].sort(_),L=3,V=c?w:w.slice(0,L),I=c?C:C.slice(0,L),A=h?R:R.slice(0,L),N=$=>{i($),n(!0)},P=()=>{n(!1),i(null)},D=$=>{l(Y=>({...Y,[$]:!Y[$]}))};return a.jsxs("div",{className:"space-y-6",children:[g.length>0&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 hover:bg-blue-900/30 transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>D("inProgress"),children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(qn,{className:"w-5 h-5 text-blue-400 mr-2 animate-pulse"}),a.jsxs("h3",{className:"text-lg font-semibold text-blue-300",children:["Rewards in Progress (",g.length,")"]})]}),o.inProgress?a.jsx(dm,{className:"w-5 h-5 text-blue-400"}):a.jsx(Bu,{className:"w-5 h-5 text-blue-400"})]}),o.inProgress&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:V.map($=>{var W,ie,ne,U;const Y=((W=$.scanHistory)==null?void 0:W.length)||0,J=((ie=$.offerSnapshot)==null?void 0:ie.stampRequirement)||0,se=Math.min(Y/J*100,100),G=Math.max(0,J-Y);return a.jsxs("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-4 hover:bg-blue-900/20 hover:border-blue-500/30 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-blue-200 transition-colors duration-200",children:((ne=$.offerSnapshot)==null?void 0:ne.offerName)||"Loyalty Reward"}),a.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((U=$.offerSnapshot)==null?void 0:U.description)||"Collect stamps to earn this reward"}),a.jsx("p",{className:"text-blue-300 text-xs font-medium",children:$.rewardDescription})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm text-white font-medium",children:[Y," / ",J]}),a.jsx("div",{className:"text-xs text-gray-400",children:"stamps collected"})]})]}),a.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3 overflow-hidden",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full transition-all duration-1000 ease-out shadow-sm",style:{width:`${se}%`}})}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400",children:G>0?`${G} more stamps needed`:" Ready to redeem!"}),a.jsxs("span",{className:"text-blue-300 font-medium",children:["Started"," ",$.createdAt.toDate().toLocaleDateString()]})]})]},$.rewardId)})}),g.length>L&&a.jsx("div",{className:"text-center pt-4",children:a.jsx(Pe,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${g.length} In-Progress Rewards`})})]})]}),(p.length>0||b.length>0)&&a.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 hover:bg-green-900/30 transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-green-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>D("completed"),children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(yy,{className:"w-5 h-5 text-green-400 mr-2 animate-pulse"}),a.jsxs("h3",{className:"text-lg font-semibold text-green-300",children:["Completed Rewards (",p.length+b.length,")"]})]}),o.completed?a.jsx(dm,{className:"w-5 h-5 text-green-400"}):a.jsx(Bu,{className:"w-5 h-5 text-green-400"})]}),o.completed&&a.jsxs(a.Fragment,{children:[p.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"text-md font-medium text-green-200 mb-3 flex items-center",children:[a.jsx(kt,{className:"w-4 h-4 mr-2 text-green-400"}),"Ready to Redeem (",p.length,")"]}),a.jsx("div",{className:"space-y-4",children:I.map($=>{var J,se,G;const Y=!!$.claimedAt;return a.jsxs("div",{className:`border rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group ${Y?"bg-gray-800/30 border-gray-600/30":"bg-green-900/10 border-green-600/20 hover:bg-green-900/20 hover:border-green-500/30"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-green-200 transition-colors duration-200",children:((J=$.offerSnapshot)==null?void 0:J.offerName)||"Loyalty Reward"}),a.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((se=$.offerSnapshot)==null?void 0:se.description)||"Reward description"}),a.jsx("p",{className:"text-green-300 text-xs font-medium",children:$.rewardDescription})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${Y?"bg-gray-700 text-gray-300":"bg-green-700 text-green-300 animate-pulse"}`,children:Y?"REDEEMED":"AVAILABLE"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-400",children:["Earned"," ",$.createdAt.toDate().toLocaleDateString()]}),Y&&a.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(G=$.claimedAt)==null?void 0:G.toDate().toLocaleDateString()]})]}),!Y&&a.jsx("div",{className:"mt-3",children:a.jsxs(Pe,{onClick:()=>N($),className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-medium py-2 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-green-500/25",children:[a.jsx(kt,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})})]},$.rewardId)})})]}),b.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-md font-medium text-gray-300 mb-3 flex items-center",children:[a.jsx(yy,{className:"w-4 h-4 mr-2 text-gray-400"}),"Previously Redeemed (",b.length,")"]}),a.jsx("div",{className:"space-y-4",children:A.map($=>{var Y,J,se;return a.jsxs("div",{className:"bg-gray-800/30 border border-gray-600/30 rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-gray-200 transition-colors duration-200",children:((Y=$.offerSnapshot)==null?void 0:Y.offerName)||"Loyalty Reward"}),a.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((J=$.offerSnapshot)==null?void 0:J.description)||"Reward description"}),a.jsx("p",{className:"text-gray-400 text-xs font-medium",children:$.rewardDescription})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"text-xs px-2 py-1 rounded-full font-medium bg-gray-700 text-gray-300",children:"REDEEMED"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-400",children:["Earned"," ",$.createdAt.toDate().toLocaleDateString()]}),a.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(se=$.claimedAt)==null?void 0:se.toDate().toLocaleDateString()]})]})]},$.rewardId)})})]}),(p.length>L||b.length>L)&&a.jsx("div",{className:"text-center pt-4",children:a.jsx(Pe,{onClick:()=>f(!h),variant:"outline",size:"sm",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-colors duration-200",children:h?"Show Less":`Show All ${p.length+b.length} Completed Rewards`})})]})]}),m.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-xl p-8 hover:bg-gray-800/40 transition-all duration-300",children:[a.jsx(kt,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No Rewards Yet"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Start collecting stamps from the Offers tab to earn your first reward!"})]})}),r&&s&&a.jsx(o2,{qrData:{userId:t.id,userEmail:t.email,userName:t.name,offerId:((O=s.offerSnapshot)==null?void 0:O.offerId)||"",offerName:((j=s.offerSnapshot)==null?void 0:j.offerName)||"Reward Redemption",timestamp:new Date().toISOString(),rewardId:s.rewardId,action:"redeem_reward"},isOpen:r,onClose:P})]})},qC=[{key:"profile",label:"Edit Profile",route:"profile",colorClass:"border-cyan-500 text-cyan-400 hover:bg-cyan-500 hover:text-white",roles:["customer","admin","super_admin"],icon:Gl},{key:"scan",label:"Scan",route:"/scan",colorClass:"border-green-500 text-green-400 hover:bg-green-500 hover:text-white",roles:["admin","super_admin"],icon:mO},{key:"settings",label:"Settings",route:"/settings",colorClass:"border-blue-500 text-blue-400 hover:bg-blue-500 hover:text-white",roles:["super_admin"],icon:Ix},{key:"users",label:"Users",route:"/users",colorClass:"border-purple-500 text-purple-400 hover:bg-purple-500 hover:text-white",roles:["super_admin"],icon:ls},{key:"logout",label:"Logout",route:"logout",colorClass:"border-red-500 text-red-400 hover:bg-red-500 hover:text-white",roles:["customer","admin","super_admin"],icon:dS}];var Gq=y.createContext(void 0);function Gp(t){const e=y.useContext(Gq);return t||e||"ltr"}var c0=0;function a2(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??GC()),document.body.insertAdjacentElement("beforeend",t[1]??GC()),c0++,()=>{c0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),c0--}},[])}function GC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var u0="focusScope.autoFocusOnMount",d0="focusScope.autoFocusOnUnmount",$C={bubbles:!1,cancelable:!0},$q="FocusScope",Jw=y.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=y.useState(null),u=Er(s),h=Er(i),f=y.useRef(null),m=ot(e,p=>c(p)),g=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(n){let p=function(C){if(g.paused||!l)return;const R=C.target;l.contains(R)?f.current=R:vi(f.current,{select:!0})},b=function(C){if(g.paused||!l)return;const R=C.relatedTarget;R!==null&&(l.contains(R)||vi(f.current,{select:!0}))},_=function(C){if(document.activeElement===document.body)for(const L of C)L.removedNodes.length>0&&vi(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",b);const w=new MutationObserver(_);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",b),w.disconnect()}}},[n,l,g.paused]),y.useEffect(()=>{if(l){WC.add(g);const p=document.activeElement;if(!l.contains(p)){const _=new CustomEvent(u0,$C);l.addEventListener(u0,u),l.dispatchEvent(_),_.defaultPrevented||(zq(Kq(l2(l)),{select:!0}),document.activeElement===p&&vi(l))}return()=>{l.removeEventListener(u0,u),setTimeout(()=>{const _=new CustomEvent(d0,$C);l.addEventListener(d0,h),l.dispatchEvent(_),_.defaultPrevented||vi(p??document.body,{select:!0}),l.removeEventListener(d0,h),WC.remove(g)},0)}}},[l,u,h,g]);const x=y.useCallback(p=>{if(!r&&!n||g.paused)return;const b=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,_=document.activeElement;if(b&&_){const w=p.currentTarget,[C,R]=Wq(w);C&&R?!p.shiftKey&&_===R?(p.preventDefault(),r&&vi(C,{select:!0})):p.shiftKey&&_===C&&(p.preventDefault(),r&&vi(R,{select:!0})):_===w&&p.preventDefault()}},[r,n,g.paused]);return a.jsx(qe.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});Jw.displayName=$q;function zq(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(vi(n,{select:e}),document.activeElement!==r)return}function Wq(t){const e=l2(t),r=zC(e,t),n=zC(e.reverse(),t);return[r,n]}function l2(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function zC(t,e){for(const r of t)if(!Qq(r,{upTo:e}))return r}function Qq(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Hq(t){return t instanceof HTMLInputElement&&"select"in t}function vi(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&Hq(t)&&e&&t.select()}}var WC=Yq();function Yq(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=QC(t,e),t.unshift(e)},remove(e){var r;t=QC(t,e),(r=t[0])==null||r.resume()}}}function QC(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function Kq(t){return t.filter(e=>e.tagName!=="A")}function Jq(t,e=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:m,children:g,...x}=f,p=(m==null?void 0:m[t][c])||l,b=y.useMemo(()=>x,Object.values(x));return a.jsx(p.Provider,{value:b,children:g})}function h(f,m){const g=(m==null?void 0:m[t][c])||l,x=y.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,h]}const s=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,Xq(s,...e)]}function Xq(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var h0="rovingFocusGroup.onEntryFocus",Zq={bubbles:!1,cancelable:!0},$p="RovingFocusGroup",[iv,c2,eG]=pd($p),[tG,zp]=Jq($p,[eG]),[rG,nG]=tG($p),u2=y.forwardRef((t,e)=>a.jsx(iv.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(iv.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(sG,{...t,ref:e})})}));u2.displayName=$p;var sG=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=y.useRef(null),g=ot(e,m),x=Gp(i),[p=null,b]=Vu({prop:o,defaultProp:l,onChange:c}),[_,w]=y.useState(!1),C=Er(u),R=c2(r),L=y.useRef(!1),[V,I]=y.useState(0);return y.useEffect(()=>{const A=m.current;if(A)return A.addEventListener(h0,C),()=>A.removeEventListener(h0,C)},[C]),a.jsx(rG,{scope:r,orientation:n,dir:x,loop:s,currentTabStopId:p,onItemFocus:y.useCallback(A=>b(A),[b]),onItemShiftTab:y.useCallback(()=>w(!0),[]),onFocusableItemAdd:y.useCallback(()=>I(A=>A+1),[]),onFocusableItemRemove:y.useCallback(()=>I(A=>A-1),[]),children:a.jsx(qe.div,{tabIndex:_||V===0?-1:0,"data-orientation":n,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{L.current=!0}),onFocus:me(t.onFocus,A=>{const N=!L.current;if(A.target===A.currentTarget&&N&&!_){const P=new CustomEvent(h0,Zq);if(A.currentTarget.dispatchEvent(P),!P.defaultPrevented){const D=R().filter(J=>J.focusable),O=D.find(J=>J.active),j=D.find(J=>J.id===p),Y=[O,j,...D].filter(Boolean).map(J=>J.ref.current);f2(Y,h)}}L.current=!1}),onBlur:me(t.onBlur,()=>w(!1))})})}),d2="RovingFocusGroupItem",h2=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...o}=t,l=ea(),c=i||l,u=nG(d2,r),h=u.currentTabStopId===c,f=c2(r),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return y.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),a.jsx(iv.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:a.jsx(qe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:me(t.onMouseDown,x=>{n?u.onItemFocus(c):x.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const p=aG(x,u.orientation,u.dir);if(p!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=f().filter(w=>w.focusable).map(w=>w.ref.current);if(p==="last")_.reverse();else if(p==="prev"||p==="next"){p==="prev"&&_.reverse();const w=_.indexOf(x.currentTarget);_=u.loop?lG(_,w+1):_.slice(w+1)}setTimeout(()=>f2(_))}})})})});h2.displayName=d2;var iG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function aG(t,e,r){const n=oG(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return iG[n]}function f2(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function lG(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var m2=u2,p2=h2,cG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},za=new WeakMap,Xh=new WeakMap,Zh={},f0=0,g2=function(t){return t&&(t.host||g2(t.parentNode))},uG=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=g2(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},dG=function(t,e,r,n){var s=uG(e,Array.isArray(t)?t:[t]);Zh[r]||(Zh[r]=new WeakMap);var i=Zh[r],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var g=m.getAttribute(n),x=g!==null&&g!=="false",p=(za.get(m)||0)+1,b=(i.get(m)||0)+1;za.set(m,p),i.set(m,b),o.push(m),p===1&&x&&Xh.set(m,!0),b===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return h(e),l.clear(),f0++,function(){o.forEach(function(f){var m=za.get(f)-1,g=i.get(f)-1;za.set(f,m),i.set(f,g),m||(Xh.has(f)||f.removeAttribute(n),Xh.delete(f)),g||f.removeAttribute(r)}),f0--,f0||(za=new WeakMap,za=new WeakMap,Xh=new WeakMap,Zh={})}},y2=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=cG(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),dG(n,s,r,"aria-hidden")):function(){return null}},Pf="right-scroll-bar-position",kf="width-before-scroll-bar",hG="with-scroll-bars-hidden",fG="--removed-body-scroll-bar-size";function m0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function mG(t,e){var r=y.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var pG=typeof window<"u"?y.useLayoutEffect:y.useEffect,HC=new WeakMap;function gG(t,e){var r=mG(null,function(n){return t.forEach(function(s){return m0(s,n)})});return pG(function(){var n=HC.get(r);if(n){var s=new Set(n),i=new Set(t),o=r.current;s.forEach(function(l){i.has(l)||m0(l,null)}),i.forEach(function(l){s.has(l)||m0(l,o)})}HC.set(r,t)},[t]),r}function yG(t){return t}function vG(t,e){e===void 0&&(e=yG);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),r}}}};return s}function xG(t){t===void 0&&(t={});var e=vG(null);return e.options=is({async:!0,ssr:!1},t),e}var v2=function(t){var e=t.sideCar,r=Nd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return y.createElement(n,is({},r))};v2.isSideCarExport=!0;function wG(t,e){return t.useMedium(e),v2}var x2=xG(),p0=function(){},Wp=y.forwardRef(function(t,e){var r=y.useRef(null),n=y.useState({onScrollCapture:p0,onWheelCapture:p0,onTouchMoveCapture:p0}),s=n[0],i=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,g=t.noIsolation,x=t.inert,p=t.allowPinchZoom,b=t.as,_=b===void 0?"div":b,w=t.gapMode,C=Nd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=m,L=gG([r,e]),V=is(is({},C),s);return y.createElement(y.Fragment,null,h&&y.createElement(R,{sideCar:x2,removeScrollBar:u,shards:f,noIsolation:g,inert:x,setCallbacks:i,allowPinchZoom:!!p,lockRef:r,gapMode:w}),o?y.cloneElement(y.Children.only(l),is(is({},V),{ref:L})):y.createElement(_,is({},V,{className:c,ref:L}),l))});Wp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Wp.classNames={fullWidth:kf,zeroRight:Pf};var bG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function EG(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=bG();return e&&t.setAttribute("nonce",e),t}function CG(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function _G(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var TG=function(){var t=0,e=null;return{add:function(r){t==0&&(e=EG())&&(CG(e,r),_G(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},AG=function(){var t=TG();return function(e,r){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},w2=function(){var t=AG(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},SG={left:0,top:0,right:0,gap:0},g0=function(t){return parseInt(t||"",10)||0},NG=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[g0(r),g0(n),g0(s)]},IG=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return SG;var e=NG(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},RG=w2(),_l="data-scroll-locked",PG=function(t,e,r,n){var s=t.left,i=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(hG,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(_l,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Pf,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(kf,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Pf," .").concat(Pf,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(kf," .").concat(kf,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(_l,`] {
    `).concat(fG,": ").concat(l,`px;
  }
`)},YC=function(){var t=parseInt(document.body.getAttribute(_l)||"0",10);return isFinite(t)?t:0},kG=function(){y.useEffect(function(){return document.body.setAttribute(_l,(YC()+1).toString()),function(){var t=YC()-1;t<=0?document.body.removeAttribute(_l):document.body.setAttribute(_l,t.toString())}},[])},jG=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;kG();var i=y.useMemo(function(){return IG(s)},[s]);return y.createElement(RG,{styles:PG(i,!e,s,r?"":"!important")})},ov=!1;if(typeof window<"u")try{var ef=Object.defineProperty({},"passive",{get:function(){return ov=!0,!0}});window.addEventListener("test",ef,ef),window.removeEventListener("test",ef,ef)}catch{ov=!1}var Wa=ov?{passive:!1}:!1,MG=function(t){return t.tagName==="TEXTAREA"},b2=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!MG(t)&&r[e]==="visible")},DG=function(t){return b2(t,"overflowY")},OG=function(t){return b2(t,"overflowX")},KC=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=E2(t,n);if(s){var i=C2(t,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},LG=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},FG=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},E2=function(t,e){return t==="v"?DG(e):OG(e)},C2=function(t,e){return t==="v"?LG(e):FG(e)},VG=function(t,e){return t==="h"&&e==="rtl"?-1:1},BG=function(t,e,r,n,s){var i=VG(t,window.getComputedStyle(e).direction),o=i*n,l=r.target,c=e.contains(l),u=!1,h=o>0,f=0,m=0;do{var g=C2(t,l),x=g[0],p=g[1],b=g[2],_=p-b-i*x;(x||_)&&E2(t,l)&&(f+=_,m+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},tf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},JC=function(t){return[t.deltaX,t.deltaY]},XC=function(t){return t&&"current"in t?t.current:t},UG=function(t,e){return t[0]===e[0]&&t[1]===e[1]},qG=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},GG=0,Qa=[];function $G(t){var e=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),s=y.useState(GG++)[0],i=y.useState(w2)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=qV([t.lockRef.current],(t.shards||[]).map(XC),!0).filter(Boolean);return p.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=y.useCallback(function(p,b){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var _=tf(p),w=r.current,C="deltaX"in p?p.deltaX:w[0]-_[0],R="deltaY"in p?p.deltaY:w[1]-_[1],L,V=p.target,I=Math.abs(C)>Math.abs(R)?"h":"v";if("touches"in p&&I==="h"&&V.type==="range")return!1;var A=KC(I,V);if(!A)return!0;if(A?L=I:(L=I==="v"?"h":"v",A=KC(I,V)),!A)return!1;if(!n.current&&"changedTouches"in p&&(C||R)&&(n.current=L),!L)return!0;var N=n.current||L;return BG(N,b,p,N==="h"?C:R,!0)},[]),c=y.useCallback(function(p){var b=p;if(!(!Qa.length||Qa[Qa.length-1]!==i)){var _="deltaY"in b?JC(b):tf(b),w=e.current.filter(function(L){return L.name===b.type&&(L.target===b.target||b.target===L.shadowParent)&&UG(L.delta,_)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var C=(o.current.shards||[]).map(XC).filter(Boolean).filter(function(L){return L.contains(b.target)}),R=C.length>0?l(b,C[0]):!o.current.noIsolation;R&&b.cancelable&&b.preventDefault()}}},[]),u=y.useCallback(function(p,b,_,w){var C={name:p,delta:b,target:_,should:w,shadowParent:zG(_)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(R){return R!==C})},1)},[]),h=y.useCallback(function(p){r.current=tf(p),n.current=void 0},[]),f=y.useCallback(function(p){u(p.type,JC(p),p.target,l(p,t.lockRef.current))},[]),m=y.useCallback(function(p){u(p.type,tf(p),p.target,l(p,t.lockRef.current))},[]);y.useEffect(function(){return Qa.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Wa),document.addEventListener("touchmove",c,Wa),document.addEventListener("touchstart",h,Wa),function(){Qa=Qa.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,Wa),document.removeEventListener("touchmove",c,Wa),document.removeEventListener("touchstart",h,Wa)}},[]);var g=t.removeScrollBar,x=t.inert;return y.createElement(y.Fragment,null,x?y.createElement(i,{styles:qG(s)}):null,g?y.createElement(jG,{gapMode:t.gapMode}):null)}function zG(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const WG=wG(x2,$G);var Xw=y.forwardRef(function(t,e){return y.createElement(Wp,is({},t,{ref:e,sideCar:WG}))});Xw.classNames=Wp.classNames;var av=["Enter"," "],QG=["ArrowDown","PageUp","Home"],_2=["ArrowUp","PageDown","End"],HG=[...QG,..._2],YG={ltr:[...av,"ArrowRight"],rtl:[...av,"ArrowLeft"]},KG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Md="Menu",[od,JG,XG]=pd(Md),[_a,ZG]=gd(Md,[XG,pc,zp]),Qp=pc(),T2=zp(),[e$,Ta]=_a(Md),[t$,Dd]=_a(Md),A2=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:o=!0}=t,l=Qp(e),[c,u]=y.useState(null),h=y.useRef(!1),f=Er(i),m=Gp(s);return y.useEffect(()=>{const g=()=>{h.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>h.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),a.jsx(gR,{...l,children:a.jsx(e$,{scope:e,open:r,onOpenChange:f,content:c,onContentChange:u,children:a.jsx(t$,{scope:e,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:o,children:n})})})};A2.displayName=Md;var r$="MenuAnchor",Zw=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Qp(r);return a.jsx(Vw,{...s,...n,ref:e})});Zw.displayName=r$;var eb="MenuPortal",[n$,S2]=_a(eb,{forceMount:void 0}),N2=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=Ta(eb,e);return a.jsx(n$,{scope:e,forceMount:r,children:a.jsx(xa,{present:r||i.open,children:a.jsx(ip,{asChild:!0,container:s,children:n})})})};N2.displayName=eb;var bn="MenuContent",[s$,tb]=_a(bn),I2=y.forwardRef((t,e)=>{const r=S2(bn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Ta(bn,t.__scopeMenu),o=Dd(bn,t.__scopeMenu);return a.jsx(od.Provider,{scope:t.__scopeMenu,children:a.jsx(xa,{present:n||i.open,children:a.jsx(od.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(i$,{...s,ref:e}):a.jsx(o$,{...s,ref:e})})})})}),i$=y.forwardRef((t,e)=>{const r=Ta(bn,t.__scopeMenu),n=y.useRef(null),s=ot(e,n);return y.useEffect(()=>{const i=n.current;if(i)return y2(i)},[]),a.jsx(rb,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:me(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),o$=y.forwardRef((t,e)=>{const r=Ta(bn,t.__scopeMenu);return a.jsx(rb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),rb=y.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:x,...p}=t,b=Ta(bn,r),_=Dd(bn,r),w=Qp(r),C=T2(r),R=JG(r),[L,V]=y.useState(null),I=y.useRef(null),A=ot(e,I,b.onContentChange),N=y.useRef(0),P=y.useRef(""),D=y.useRef(0),O=y.useRef(null),j=y.useRef("right"),$=y.useRef(0),Y=x?Xw:y.Fragment,J=x?{as:oa,allowPinchZoom:!0}:void 0,se=W=>{var ae,ge;const ie=P.current+W,ne=R().filter(xe=>!xe.disabled),U=document.activeElement,le=(ae=ne.find(xe=>xe.ref.current===U))==null?void 0:ae.textValue,_e=ne.map(xe=>xe.textValue),je=v$(_e,ie,le),we=(ge=ne.find(xe=>xe.textValue===je))==null?void 0:ge.ref.current;(function xe(be){P.current=be,window.clearTimeout(N.current),be!==""&&(N.current=window.setTimeout(()=>xe(""),1e3))})(ie),we&&setTimeout(()=>we.focus())};y.useEffect(()=>()=>window.clearTimeout(N.current),[]),a2();const G=y.useCallback(W=>{var ne,U;return j.current===((ne=O.current)==null?void 0:ne.side)&&w$(W,(U=O.current)==null?void 0:U.area)},[]);return a.jsx(s$,{scope:r,searchRef:P,onItemEnter:y.useCallback(W=>{G(W)&&W.preventDefault()},[G]),onItemLeave:y.useCallback(W=>{var ie;G(W)||((ie=I.current)==null||ie.focus(),V(null))},[G]),onTriggerLeave:y.useCallback(W=>{G(W)&&W.preventDefault()},[G]),pointerGraceTimerRef:D,onPointerGraceIntentChange:y.useCallback(W=>{O.current=W},[]),children:a.jsx(Y,{...J,children:a.jsx(Jw,{asChild:!0,trapped:s,onMountAutoFocus:me(i,W=>{var ie;W.preventDefault(),(ie=I.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(yd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:a.jsx(m2,{asChild:!0,...C,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:L,onCurrentTabStopIdChange:V,onEntryFocus:me(c,W=>{_.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(Bw,{role:"menu","aria-orientation":"vertical","data-state":z2(b.open),"data-radix-menu-content":"",dir:_.dir,...w,...p,ref:A,style:{outline:"none",...p.style},onKeyDown:me(p.onKeyDown,W=>{const ne=W.target.closest("[data-radix-menu-content]")===W.currentTarget,U=W.ctrlKey||W.altKey||W.metaKey,le=W.key.length===1;ne&&(W.key==="Tab"&&W.preventDefault(),!U&&le&&se(W.key));const _e=I.current;if(W.target!==_e||!HG.includes(W.key))return;W.preventDefault();const we=R().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);_2.includes(W.key)&&we.reverse(),g$(we)}),onBlur:me(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(N.current),P.current="")}),onPointerMove:me(t.onPointerMove,ad(W=>{const ie=W.target,ne=$.current!==W.clientX;if(W.currentTarget.contains(ie)&&ne){const U=W.clientX>$.current?"right":"left";j.current=U,$.current=W.clientX}}))})})})})})})});I2.displayName=bn;var a$="MenuGroup",nb=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(qe.div,{role:"group",...n,ref:e})});nb.displayName=a$;var l$="MenuLabel",R2=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(qe.div,{...n,ref:e})});R2.displayName=l$;var Vm="MenuItem",ZC="menu.itemSelect",Hp=y.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=y.useRef(null),o=Dd(Vm,t.__scopeMenu),l=tb(Vm,t.__scopeMenu),c=ot(e,i),u=y.useRef(!1),h=()=>{const f=i.current;if(!r&&f){const m=new CustomEvent(ZC,{bubbles:!0,cancelable:!0});f.addEventListener(ZC,g=>n==null?void 0:n(g),{once:!0}),bx(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(P2,{...s,ref:c,disabled:r,onClick:me(t.onClick,h),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:me(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:me(t.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||av.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Hp.displayName=Vm;var P2=y.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,o=tb(Vm,r),l=T2(r),c=y.useRef(null),u=ot(e,c),[h,f]=y.useState(!1),[m,g]=y.useState("");return y.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[i.children]),a.jsx(od.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:a.jsx(p2,{asChild:!0,...l,focusable:!n,children:a.jsx(qe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:me(t.onPointerMove,ad(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(t.onPointerLeave,ad(x=>o.onItemLeave(x))),onFocus:me(t.onFocus,()=>f(!0)),onBlur:me(t.onBlur,()=>f(!1))})})})}),c$="MenuCheckboxItem",k2=y.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return a.jsx(L2,{scope:t.__scopeMenu,checked:r,children:a.jsx(Hp,{role:"menuitemcheckbox","aria-checked":Bm(r)?"mixed":r,...s,ref:e,"data-state":ib(r),onSelect:me(s.onSelect,()=>n==null?void 0:n(Bm(r)?!0:!r),{checkForDefaultPrevented:!1})})})});k2.displayName=c$;var j2="MenuRadioGroup",[u$,d$]=_a(j2,{value:void 0,onValueChange:()=>{}}),M2=y.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=Er(n);return a.jsx(u$,{scope:t.__scopeMenu,value:r,onValueChange:i,children:a.jsx(nb,{...s,ref:e})})});M2.displayName=j2;var D2="MenuRadioItem",O2=y.forwardRef((t,e)=>{const{value:r,...n}=t,s=d$(D2,t.__scopeMenu),i=r===s.value;return a.jsx(L2,{scope:t.__scopeMenu,checked:i,children:a.jsx(Hp,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":ib(i),onSelect:me(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});O2.displayName=D2;var sb="MenuItemIndicator",[L2,h$]=_a(sb,{checked:!1}),F2=y.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=h$(sb,r);return a.jsx(xa,{present:n||Bm(i.checked)||i.checked===!0,children:a.jsx(qe.span,{...s,ref:e,"data-state":ib(i.checked)})})});F2.displayName=sb;var f$="MenuSeparator",V2=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(qe.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});V2.displayName=f$;var m$="MenuArrow",B2=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Qp(r);return a.jsx(Uw,{...s,...n,ref:e})});B2.displayName=m$;var p$="MenuSub",[RQ,U2]=_a(p$),Zc="MenuSubTrigger",q2=y.forwardRef((t,e)=>{const r=Ta(Zc,t.__scopeMenu),n=Dd(Zc,t.__scopeMenu),s=U2(Zc,t.__scopeMenu),i=tb(Zc,t.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},h=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>h,[h]),y.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),a.jsx(Zw,{asChild:!0,...u,children:a.jsx(P2,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":z2(r.open),...t,ref:wx(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:me(t.onPointerMove,ad(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:me(t.onPointerLeave,ad(f=>{var g,x;h();const m=(g=r.content)==null?void 0:g.getBoundingClientRect();if(m){const p=(x=r.content)==null?void 0:x.dataset.side,b=p==="right",_=b?-5:5,w=m[b?"left":"right"],C=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:w,y:m.top},{x:C,y:m.top},{x:C,y:m.bottom},{x:w,y:m.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:me(t.onKeyDown,f=>{var g;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||YG[n.dir].includes(f.key)&&(r.onOpenChange(!0),(g=r.content)==null||g.focus(),f.preventDefault())})})})});q2.displayName=Zc;var G2="MenuSubContent",$2=y.forwardRef((t,e)=>{const r=S2(bn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Ta(bn,t.__scopeMenu),o=Dd(bn,t.__scopeMenu),l=U2(G2,t.__scopeMenu),c=y.useRef(null),u=ot(e,c);return a.jsx(od.Provider,{scope:t.__scopeMenu,children:a.jsx(xa,{present:n||i.open,children:a.jsx(od.Slot,{scope:t.__scopeMenu,children:a.jsx(rb,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:me(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:me(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:me(t.onKeyDown,h=>{var g;const f=h.currentTarget.contains(h.target),m=KG[o.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(g=l.trigger)==null||g.focus(),h.preventDefault())})})})})})});$2.displayName=G2;function z2(t){return t?"open":"closed"}function Bm(t){return t==="indeterminate"}function ib(t){return Bm(t)?"indeterminate":t?"checked":"unchecked"}function g$(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function y$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function v$(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=y$(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function x$(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>n!=h>n&&r<(u-l)*(n-c)/(h-c)+l&&(s=!s)}return s}function w$(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return x$(r,e)}function ad(t){return e=>e.pointerType==="mouse"?t(e):void 0}var b$=A2,E$=Zw,C$=N2,_$=I2,T$=nb,A$=R2,S$=Hp,N$=k2,I$=M2,R$=O2,P$=F2,k$=V2,j$=B2,M$=q2,D$=$2,Yp="Menubar",[lv,O$,L$]=pd(Yp),[W2,PQ]=gd(Yp,[L$,zp]),Lr=ZG(),Q2=zp(),[F$,ob]=W2(Yp),H2=y.forwardRef((t,e)=>{const{__scopeMenubar:r,value:n,onValueChange:s,defaultValue:i,loop:o=!0,dir:l,...c}=t,u=Gp(l),h=Q2(r),[f="",m]=Vu({prop:n,onChange:s,defaultProp:i}),[g,x]=y.useState(null);return a.jsx(F$,{scope:r,value:f,onMenuOpen:y.useCallback(p=>{m(p),x(p)},[m]),onMenuClose:y.useCallback(()=>m(""),[m]),onMenuToggle:y.useCallback(p=>{m(b=>b?"":p),x(p)},[m]),dir:u,loop:o,children:a.jsx(lv.Provider,{scope:r,children:a.jsx(lv.Slot,{scope:r,children:a.jsx(m2,{asChild:!0,...h,orientation:"horizontal",loop:o,dir:u,currentTabStopId:g,onCurrentTabStopIdChange:x,children:a.jsx(qe.div,{role:"menubar",...c,ref:e})})})})})});H2.displayName=Yp;var ab="MenubarMenu",[V$,Y2]=W2(ab),K2=t=>{const{__scopeMenubar:e,value:r,...n}=t,s=ea(),i=r||s||"LEGACY_REACT_AUTO_VALUE",o=ob(ab,e),l=Lr(e),c=y.useRef(null),u=y.useRef(!1),h=o.value===i;return y.useEffect(()=>{h||(u.current=!1)},[h]),a.jsx(V$,{scope:e,value:i,triggerId:ea(),triggerRef:c,contentId:ea(),wasKeyboardTriggerOpenRef:u,children:a.jsx(b$,{...l,open:h,onOpenChange:f=>{f||o.onMenuClose()},modal:!1,dir:o.dir,...n})})};K2.displayName=ab;var cv="MenubarTrigger",J2=y.forwardRef((t,e)=>{const{__scopeMenubar:r,disabled:n=!1,...s}=t,i=Q2(r),o=Lr(r),l=ob(cv,r),c=Y2(cv,r),u=y.useRef(null),h=ot(e,u,c.triggerRef),[f,m]=y.useState(!1),g=l.value===c.value;return a.jsx(lv.ItemSlot,{scope:r,value:c.value,disabled:n,children:a.jsx(p2,{asChild:!0,...i,focusable:!n,tabStopId:c.value,children:a.jsx(E$,{asChild:!0,...o,children:a.jsx(qe.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":g,"aria-controls":g?c.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":g?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:h,onPointerDown:me(t.onPointerDown,x=>{!n&&x.button===0&&x.ctrlKey===!1&&(l.onMenuOpen(c.value),g||x.preventDefault())}),onPointerEnter:me(t.onPointerEnter,()=>{var p;!!l.value&&!g&&(l.onMenuOpen(c.value),(p=u.current)==null||p.focus())}),onKeyDown:me(t.onKeyDown,x=>{n||(["Enter"," "].includes(x.key)&&l.onMenuToggle(c.value),x.key==="ArrowDown"&&l.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(x.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,x.preventDefault()))}),onFocus:me(t.onFocus,()=>m(!0)),onBlur:me(t.onBlur,()=>m(!1))})})})})});J2.displayName=cv;var B$="MenubarPortal",X2=t=>{const{__scopeMenubar:e,...r}=t,n=Lr(e);return a.jsx(C$,{...n,...r})};X2.displayName=B$;var uv="MenubarContent",Z2=y.forwardRef((t,e)=>{const{__scopeMenubar:r,align:n="start",...s}=t,i=Lr(r),o=ob(uv,r),l=Y2(uv,r),c=O$(r),u=y.useRef(!1);return a.jsx(_$,{id:l.contentId,"aria-labelledby":l.triggerId,"data-radix-menubar-content":"",...i,...s,ref:e,align:n,onCloseAutoFocus:me(t.onCloseAutoFocus,h=>{var m;!!!o.value&&!u.current&&((m=l.triggerRef.current)==null||m.focus()),u.current=!1,h.preventDefault()}),onFocusOutside:me(t.onFocusOutside,h=>{const f=h.target;c().some(g=>{var x;return(x=g.ref.current)==null?void 0:x.contains(f)})&&h.preventDefault()}),onInteractOutside:me(t.onInteractOutside,()=>{u.current=!0}),onEntryFocus:h=>{l.wasKeyboardTriggerOpenRef.current||h.preventDefault()},onKeyDown:me(t.onKeyDown,h=>{if(["ArrowRight","ArrowLeft"].includes(h.key)){const f=h.target,m=f.hasAttribute("data-radix-menubar-subtrigger"),g=f.closest("[data-radix-menubar-content]")!==h.currentTarget,p=(o.dir==="rtl"?"ArrowRight":"ArrowLeft")===h.key;if(!p&&m||g&&p)return;let w=c().filter(L=>!L.disabled).map(L=>L.value);p&&w.reverse();const C=w.indexOf(l.value);w=o.loop?tz(w,C+1):w.slice(C+1);const[R]=w;R&&o.onMenuOpen(R)}},{checkForDefaultPrevented:!1}),style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Z2.displayName=uv;var U$="MenubarGroup",q$=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(T$,{...s,...n,ref:e})});q$.displayName=U$;var G$="MenubarLabel",eP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(A$,{...s,...n,ref:e})});eP.displayName=G$;var $$="MenubarItem",tP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(S$,{...s,...n,ref:e})});tP.displayName=$$;var z$="MenubarCheckboxItem",rP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(N$,{...s,...n,ref:e})});rP.displayName=z$;var W$="MenubarRadioGroup",Q$=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(I$,{...s,...n,ref:e})});Q$.displayName=W$;var H$="MenubarRadioItem",nP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(R$,{...s,...n,ref:e})});nP.displayName=H$;var Y$="MenubarItemIndicator",sP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(P$,{...s,...n,ref:e})});sP.displayName=Y$;var K$="MenubarSeparator",iP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(k$,{...s,...n,ref:e})});iP.displayName=K$;var J$="MenubarArrow",X$=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(j$,{...s,...n,ref:e})});X$.displayName=J$;var Z$="MenubarSubTrigger",oP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(M$,{"data-radix-menubar-subtrigger":"",...s,...n,ref:e})});oP.displayName=Z$;var ez="MenubarSubContent",aP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(D$,{...s,"data-radix-menubar-content":"",...n,ref:e,style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});aP.displayName=ez;function tz(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var lP=H2,rz=K2,cP=J2,nz=X2,uP=Z2,dP=eP,hP=tP,fP=rP,mP=nP,pP=sP,gP=iP,yP=oP,vP=aP;const sz=rz,xP=y.forwardRef(({className:t,...e},r)=>a.jsx(lP,{ref:r,className:rt("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",t),...e}));xP.displayName=lP.displayName;const wP=y.forwardRef(({className:t,...e},r)=>a.jsx(cP,{ref:r,className:rt("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t),...e}));wP.displayName=cP.displayName;const iz=y.forwardRef(({className:t,inset:e,children:r,...n},s)=>a.jsxs(yP,{ref:s,className:rt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",t),...n,children:[r,a.jsx(oO,{className:"ml-auto h-4 w-4"})]}));iz.displayName=yP.displayName;const oz=y.forwardRef(({className:t,...e},r)=>a.jsx(vP,{ref:r,className:rt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));oz.displayName=vP.displayName;const bP=y.forwardRef(({className:t,align:e="start",alignOffset:r=-4,sideOffset:n=8,...s},i)=>a.jsx(nz,{children:a.jsx(uP,{ref:i,align:e,alignOffset:r,sideOffset:n,className:rt("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));bP.displayName=uP.displayName;const EP=y.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(hP,{ref:n,className:rt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));EP.displayName=hP.displayName;const az=y.forwardRef(({className:t,children:e,checked:r,...n},s)=>a.jsxs(fP,{ref:s,className:rt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(pP,{children:a.jsx(cS,{className:"h-4 w-4"})})}),e]}));az.displayName=fP.displayName;const lz=y.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(mP,{ref:n,className:rt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(pP,{children:a.jsx(aO,{className:"h-2 w-2 fill-current"})})}),e]}));lz.displayName=mP.displayName;const cz=y.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(dP,{ref:n,className:rt("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));cz.displayName=dP.displayName;const uz=y.forwardRef(({className:t,...e},r)=>a.jsx(gP,{ref:r,className:rt("-mx-1 my-1 h-px bg-muted",t),...e}));uz.displayName=gP.displayName;const dz=({user:t,handleLogout:e,navigate:r})=>{const[n,s]=y.useState(!1),[i,o]=y.useState({name:t.name,mobileNumber:t.mobileNumber||""});y.useEffect(()=>{n&&o({name:t.name,mobileNumber:t.mobileNumber||""})},[n,t.name,t.mobileNumber]);const l=()=>{s(!0)},c=()=>{console.log("Saving profile:",i),s(!1)},u=()=>{o({name:t.name,mobileNumber:t.mobileNumber||""}),s(!1)},h=f=>{if(f==="logout")e();else if(f==="profile")l();else{const m=qC.find(g=>g.key===f);m&&r(m.route)}};return a.jsxs(a.Fragment,{children:[a.jsx(xP,{children:a.jsxs(sz,{children:[a.jsx(wP,{className:"bg-transparent text-black border border-white",children:"Menu"}),a.jsx(bP,{children:qC.filter(f=>f.roles.includes(t.role)).map(f=>{const m=f.icon;return a.jsxs(EP,{className:f.colorClass+" flex gap-2 items-center",onClick:()=>h(f.key),children:[a.jsx(m,{className:"w-4 h-4"}),f.label]},f.key)})})]})}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 grid place-items-center p-4",children:a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit Profile"}),a.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white transition-colors",children:a.jsx(Zi,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),a.jsx(st,{value:i.name,onChange:f=>o({...i,name:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter your name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),a.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-700/30 border border-gray-600 rounded-md",children:[a.jsx(gy,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-300 text-sm",children:t.email})]}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Email cannot be changed for security reasons"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),a.jsx(st,{value:i.mobileNumber,onChange:f=>o({...i,mobileNumber:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter mobile number",type:"tel"})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(Pe,{onClick:c,className:"flex-1 bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-700 hover:to-cyan-800",children:"Save Changes"}),a.jsx(Pe,{onClick:u,variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"})]})]})]})})]})};function jr({className:t,...e}){return a.jsx("div",{className:rt("animate-pulse rounded-md bg-muted",t),...e})}const hz=()=>a.jsxs("div",{className:"flex items-center justify-between px-4 py-4 mb-4",children:[a.jsx(jr,{className:"h-8 w-32 rounded"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(jr,{className:"h-8 w-20 rounded"}),a.jsx(jr,{className:"h-8 w-20 rounded"}),a.jsx(jr,{className:"h-8 w-20 rounded"})]})]}),fz=()=>a.jsxs("div",{className:"mb-6 bg-gray-900/80 backdrop-blur-sm border border-red-900/30 text-center relative overflow-hidden rounded-2xl",children:[a.jsxs("div",{className:"flex flex-col items-center p-6",children:[a.jsx(jr,{className:"h-16 w-16 rounded-full mb-2"}),a.jsx(jr,{className:"h-6 w-40 mb-2"}),a.jsx(jr,{className:"h-4 w-56 mb-2"})]}),a.jsx("div",{className:"px-6 pb-4",children:a.jsx(jr,{className:"h-4 w-32 mx-auto"})})]}),mz=()=>a.jsxs("div",{className:"flex gap-4 mb-6 justify-center",children:[a.jsx(jr,{className:"h-8 w-24 rounded"}),a.jsx(jr,{className:"h-8 w-24 rounded"}),a.jsx(jr,{className:"h-8 w-24 rounded"})]}),pz=()=>a.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-2xl p-6 min-h-[220px] shadow-2xl mb-6",children:[a.jsx(jr,{className:"h-6 w-40 mb-4"}),a.jsx(jr,{className:"h-4 w-56 mb-4"}),a.jsx(jr,{className:"h-4 w-full rounded mb-2"}),a.jsx(jr,{className:"h-8 w-32 mt-6 mx-auto"})]}),gz=({reward:t,onClose:e})=>{const r=Yn(),[n,s]=y.useState(!0),[i,o]=y.useState(!0);y.useEffect(()=>{const u=setTimeout(()=>s(!1),5e3),h=setTimeout(()=>o(!1),3e3);return()=>{clearTimeout(u),clearTimeout(h)}},[]);const l=u=>{switch(u){case"percentage":return"";case"fixed_amount":return"";case"free_item":return"";default:return""}},c=u=>{switch(u){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:[n&&a.jsx(QR,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:300,recycle:!1,colors:["#ef4444","#fff","#facc15","#ff9800","#a3e635","#8b5cf6"]}),i&&a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[a.jsx("div",{className:"w-96 h-96 border-4 border-red-500/30 rounded-full animate-ping"}),a.jsx("div",{className:"absolute w-80 h-80 border-4 border-yellow-500/30 rounded-full animate-ping",style:{animationDelay:"0.5s"}}),a.jsx("div",{className:"absolute w-64 h-64 border-4 border-green-500/30 rounded-full animate-ping",style:{animationDelay:"1s"}})]})}),a.jsxs("div",{className:"relative z-10 bg-gradient-to-br from-gray-900/95 to-red-900/95 border border-red-800/50 rounded-3xl p-8 max-w-md mx-4 text-center shadow-2xl",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:l(t.rewardType)}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:" Congratulations! "}),a.jsx("p",{className:"text-gray-300 text-lg",children:"You've earned your reward!"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-800/50 to-red-800/50 border border-red-700/50 rounded-2xl p-6 mb-6",children:[a.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:t.rewardDescription}),a.jsx("div",{className:"text-gray-300 mb-4",children:t.settingsSnapshot.descriptionMessage}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:t.rewardType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:t.rewardValue})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Goal:"}),a.jsxs("span",{className:"text-white",children:[t.settingsSnapshot.purchaseLimit," purchases"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Earned:"}),a.jsx("span",{className:"text-white",children:t.createdAt.toDate().toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(Pe,{onClick:()=>r("/rewards"),className:`w-full bg-gradient-to-r ${c(t.rewardType)} hover:opacity-90 text-white font-semibold py-3 text-lg`,children:[a.jsx(kt,{className:"w-5 h-5 mr-2"}),"View All Rewards"]}),a.jsx(Pe,{onClick:e,variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white",children:"Continue Shopping"})]}),a.jsx("div",{className:"mt-6 flex items-center justify-center",children:a.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-600 to-yellow-700 border border-yellow-500 rounded-full",children:[a.jsx(Rx,{className:"w-4 h-4 mr-2 text-yellow-200"}),a.jsx("span",{className:"text-yellow-100 text-sm font-medium",children:"ACHIEVEMENT UNLOCKED"})]})})]})]})},yz=({totalUsers:t,customers:e,activeUsers:r,totalRewards:n,totalOffers:s,activeOffers:i,recentUsers:o})=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"}),a.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"All registered users"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),a.jsx("div",{className:"text-green-300 text-lg",children:"Customers"}),a.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Loyalty program members"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r}),a.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),a.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-yellow-400 mb-2",children:n}),a.jsx("div",{className:"text-yellow-300 text-lg",children:"Total Rewards"}),a.jsx("div",{className:"text-yellow-400 text-sm mt-2",children:"Earned by customers"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(kt,{className:"w-5 h-5 mr-2 text-red-400"}),"Offers Status"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Total Offers:"}),a.jsx("span",{className:"text-white font-semibold",children:s})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Active Offers:"}),a.jsx("span",{className:"text-green-400 font-semibold",children:i})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Inactive Offers:"}),a.jsx("span",{className:"text-red-400 font-semibold",children:s-i})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-indigo-800/50 border border-indigo-700/50 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(um,{className:"w-5 h-5 mr-2 text-indigo-400"}),"User Activity"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Active Rate:"}),a.jsxs("span",{className:"text-white font-semibold",children:[e.length>0?Math.round(r/e.length*100):0,"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Avg. Rewards:"}),a.jsx("span",{className:"text-white font-semibold",children:e.length>0?(n/e.length).toFixed(1):0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Engagement:"}),a.jsx("span",{className:"text-green-400 font-semibold",children:r>0?"High":"Low"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(ql,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Business Insights"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:[t>0?Math.round(e.length/t*100):0,"%"]}),a.jsx("div",{className:"text-blue-300 text-sm",children:"Customer Conversion"}),a.jsx("div",{className:"text-blue-400 text-xs",children:"Users to Loyalty Members"})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-1",children:[e.length>0?Math.round(r/e.length*100):0,"%"]}),a.jsx("div",{className:"text-green-300 text-sm",children:"Customer Engagement"}),a.jsx("div",{className:"text-green-400 text-xs",children:"Active in Last 7 Days"})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:[s>0?Math.round(i/s*100):0,"%"]}),a.jsx("div",{className:"text-purple-300 text-sm",children:"Offer Utilization"}),a.jsx("div",{className:"text-purple-400 text-xs",children:"Active vs Total Offers"})]})]})]})]}),vz=({users:t,searchTerm:e,setSearchTerm:r,statusFilter:n,setStatusFilter:s,roleFilter:i,setRoleFilter:o})=>{var V,I,A;const[l,c]=y.useState(null),[u,h]=y.useState(!1),[f,m]=y.useState(!1),[g,x]=y.useState({name:"",email:"",feedback:""}),p=N=>{c(N),h(!0)},b=N=>{N.role==="customer"&&(x({name:N.name,email:N.email,feedback:N.feedback||""}),c(N),m(!0))},_=()=>{console.log("Saving user:",l==null?void 0:l.id,g),m(!1),c(null)},w=t.length,C=t.filter(N=>N.role==="customer"),R=t.filter(N=>N.role==="admin"||N.role==="super_admin"),L=t.filter(N=>N.lastScanAt&&new Date().getTime()-N.lastScanAt.toDate().getTime()<7*24*60*60*1e3);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(uS,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[a.jsx("div",{className:"text-sm font-bold text-blue-400",children:w}),a.jsx("div",{className:"text-blue-300 text-xs",children:"Users"})]}),a.jsxs("div",{className:"bg-green-900/20 border border-green-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[a.jsx("div",{className:"text-sm font-bold text-green-400",children:C.length}),a.jsx("div",{className:"text-green-300 text-xs",children:"Customers"})]}),a.jsxs("div",{className:"bg-purple-900/20 border border-purple-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[a.jsx("div",{className:"text-sm font-bold text-purple-400",children:R.length}),a.jsx("div",{className:"text-purple-300 text-xs",children:"Admins"})]}),a.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[a.jsx("div",{className:"text-sm font-bold text-yellow-400",children:L.length}),a.jsx("div",{className:"text-yellow-300 text-xs",children:"Active"})]})]})]}),a.jsx(Pe,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",onClick:()=>{r(""),s("all"),o("all")},children:"Clear Filters"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Users"}),a.jsxs("div",{className:"relative",children:[a.jsx(hS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(st,{placeholder:"Search by name or email...",value:e,onChange:N=>r(N.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),a.jsxs("select",{value:n,onChange:N=>s(N.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active (Last 7 days)"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role Filter"}),a.jsxs("select",{value:i,onChange:N=>o(N.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"customer",children:"Customers"}),a.jsx("option",{value:"admin",children:"Admins"}),a.jsx("option",{value:"super_admin",children:"Super Admins"})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50",children:a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(ls,{className:"w-5 h-5 mr-2 text-blue-400"}),"Users (",t.length,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-700/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"User"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Role"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Status"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Purchases"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Rewards"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Last Activity"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:t.map(N=>{var P;return a.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-colors duration-200",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"text-white text-sm font-bold",children:N.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:N.name}),a.jsxs("div",{className:"text-gray-400 text-sm flex items-center",children:[a.jsx(gy,{className:"w-3 h-3 mr-1"}),N.email]})]})]})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${N.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":N.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:N.role.replace("_"," ").toUpperCase()})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${N.lastScanAt&&new Date().getTime()-N.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50":"bg-gradient-to-r from-gray-900/50 to-gray-800/50 text-gray-300 border border-gray-700/50"}`,children:N.lastScanAt&&new Date().getTime()-N.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(qn,{className:"w-4 h-4 text-blue-400"}),a.jsx("span",{className:"text-white font-medium",children:N.purchases})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(vf,{className:"w-4 h-4 text-yellow-400"}),a.jsx("span",{className:"text-white font-medium",children:((P=N.completedRewards)==null?void 0:P.length)||0})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ql,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:N.lastScanAt?N.lastScanAt.toDate().toLocaleDateString():"Never"})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(Pe,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>p(N),title:"View user profile",children:a.jsx(Sx,{className:"w-4 h-4"})}),a.jsx(Pe,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200",onClick:()=>b(N),disabled:N.role!=="customer",title:N.role!=="customer"?"Only customers can be edited":"Edit customer",children:a.jsx(fu,{className:"w-4 h-4"})})]})})]},N.id)})})]})})]}),u&&l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(ls,{className:"w-5 h-5 mr-2 text-blue-400"}),"User Profile"]}),a.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:a.jsx(Zi,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"text-white text-2xl font-bold",children:l.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-2xl font-bold text-white",children:l.name}),a.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 mb-2",children:[a.jsx(gy,{className:"w-4 h-4"}),a.jsx("span",{children:l.email})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":l.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:l.role.replace("_"," ").toUpperCase()})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-800/30 border border-blue-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-400 mb-2 flex items-center justify-center",children:[a.jsx(qn,{className:"w-5 h-5 mr-2"}),(()=>{var P;const N=((P=l.completedRewards)==null?void 0:P.reduce((D,O)=>{var j;return D+(((j=O.scanHistory)==null?void 0:j.length)||0)},0))||0;return Math.max(l.purchases||0,N)})()]}),a.jsx("div",{className:"text-blue-300 text-sm",children:"Lifetime Stamps"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/30 border border-green-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-2 flex items-center justify-center",children:[a.jsx(vf,{className:"w-5 h-5 mr-2"}),((V=l.completedRewards)==null?void 0:V.filter(N=>{var P,D;return((P=N.scanHistory)==null?void 0:P.length)>=(((D=N.offerSnapshot)==null?void 0:D.stampRequirement)||0)}).length)||0]}),a.jsx("div",{className:"text-green-300 text-sm",children:"Completed Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/30 border border-purple-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-2 flex items-center justify-center",children:[a.jsx(um,{className:"w-5 h-5 mr-2"}),((I=l.completedRewards)==null?void 0:I.filter(N=>{var P,D;return((P=N.scanHistory)==null?void 0:P.length)<(((D=N.offerSnapshot)==null?void 0:D.stampRequirement)||0)}).length)||0]}),a.jsx("div",{className:"text-purple-300 text-sm",children:"In-Progress Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 to-yellow-800/30 border border-yellow-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-yellow-400 mb-2 flex items-center justify-center",children:[a.jsx(kt,{className:"w-5 h-5 mr-2"}),((A=l.completedRewards)==null?void 0:A.filter(N=>N.claimedAt).length)||0]}),a.jsx("div",{className:"text-yellow-300 text-sm",children:"Redeemed Rewards"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h5",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(um,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Activity Details"]}),a.jsx("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-1 flex items-center",children:[a.jsx(Ax,{className:"w-4 h-4 mr-1"}),"Member Since"]}),a.jsx("div",{className:"text-white font-medium",children:l.createdAt.toDate().toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-1 flex items-center",children:[a.jsx(ql,{className:"w-4 h-4 mr-1"}),"Last Activity"]}),a.jsx("div",{className:"text-white font-medium",children:l.lastScanAt?l.lastScanAt.toDate().toLocaleDateString():"Never"})]})]})}),l.feedback&&a.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center",children:[a.jsx(Rx,{className:"w-4 h-4 mr-1"}),"Feedback"]}),a.jsx("div",{className:"text-white",children:l.feedback})]}),l.role==="customer"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-700/30 to-blue-800/30 border border-blue-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-3 flex items-center",children:[a.jsx(qn,{className:"w-4 h-4 mr-1"}),"Current In-Progress Rewards"]}),l.completedRewards&&l.completedRewards.filter(N=>{var P,D;return((P=N.scanHistory)==null?void 0:P.length)<(((D=N.offerSnapshot)==null?void 0:D.stampRequirement)||0)}).length>0?a.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(N=>{var P,D;return((P=N.scanHistory)==null?void 0:P.length)<(((D=N.offerSnapshot)==null?void 0:D.stampRequirement)||0)}).map((N,P)=>{var $,Y,J;const D=(($=N.scanHistory)==null?void 0:$.length)||0,O=((Y=N.offerSnapshot)==null?void 0:Y.stampRequirement)||0,j=O>0?Math.min(D/O*100,100):0;return a.jsxs("div",{className:"bg-blue-800/20 rounded p-3 border border-blue-700/30",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-white font-medium text-sm",children:((J=N.offerSnapshot)==null?void 0:J.offerName)||"Loyalty Reward"}),a.jsxs("span",{className:"text-blue-300 text-xs",children:[D,"/",O," stamps"]})]}),a.jsx("div",{className:"w-full bg-blue-600/30 rounded-full h-2 mb-2",children:a.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})}),a.jsxs("div",{className:"text-blue-300 text-xs",children:["Started:"," ",N.createdAt.toDate().toLocaleDateString()]})]},P)})}):a.jsx("div",{className:"text-gray-400 text-sm italic",children:"No rewards in progress"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-700/30 to-green-800/30 border border-green-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-3 flex items-center",children:[a.jsx(kt,{className:"w-4 h-4 mr-1"}),"Available Rewards to Redeem"]}),(()=>{var D;const P=(((D=l.completedRewards)==null?void 0:D.filter(O=>{var j,$;return((j=O.scanHistory)==null?void 0:j.length)>=(($=O.offerSnapshot)==null?void 0:$.stampRequirement)}))||[]).filter(O=>!O.claimedAt);return console.log(P),P.length>0?a.jsx("div",{className:"space-y-3",children:P.map((O,j)=>{var $;return a.jsxs("div",{className:"bg-green-800/20 rounded p-3 border border-green-700/30",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-white font-medium text-sm",children:(($=O.offerSnapshot)==null?void 0:$.offerName)||"Loyalty Reward"}),a.jsx("span",{className:"text-green-300 text-xs",children:"Ready to Redeem"})]}),a.jsx("div",{className:"text-green-300 text-xs mb-2",children:O.rewardDescription||"No description"}),a.jsxs("div",{className:"text-green-300 text-xs",children:["Completed:"," ",O.createdAt.toDate().toLocaleDateString()]})]},j)})}):a.jsx("div",{className:"text-gray-400 text-sm italic",children:"No rewards ready to redeem"})})()]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-700/30 to-purple-800/30 border border-purple-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-3 flex items-center",children:[a.jsx(vf,{className:"w-4 h-4 mr-1"}),"Already Redeemed Rewards"]}),l.completedRewards&&l.completedRewards.filter(N=>N.claimedAt).length>0?a.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(N=>N.claimedAt).map((N,P)=>{var D,O;return a.jsxs("div",{className:"bg-purple-800/20 rounded p-3 border border-purple-700/30",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-white font-medium text-sm",children:((D=N.offerSnapshot)==null?void 0:D.offerName)||"Loyalty Reward"}),a.jsx("span",{className:"text-purple-300 text-xs",children:"Redeemed"})]}),a.jsx("div",{className:"text-purple-300 text-xs mb-2",children:((O=N.offerSnapshot)==null?void 0:O.rewardDescription)||"No description"}),a.jsxs("div",{className:"text-purple-300 text-xs",children:["Redeemed:"," ",N.claimedAt?N.claimedAt.toDate().toLocaleDateString():"Unknown"]})]},P)})}):a.jsx("div",{className:"text-gray-400 text-sm italic",children:"No rewards redeemed yet"})]})]}),l.role!=="customer"&&a.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center",children:[a.jsx(ls,{className:"w-4 h-4 mr-1"}),"Admin Information"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Role Level:"}),a.jsx("span",{className:"text-white font-medium",children:l.role==="super_admin"?"Super Administrator":"Administrator"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Permissions:"}),a.jsx("span",{className:"text-white font-medium",children:l.role==="super_admin"?"Full system access":"User and offer management"})]})]})]})]})]})]})}),f&&l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-md w-full shadow-2xl",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(fu,{className:"w-5 h-5 mr-2 text-green-400"}),"Edit Customer"]}),a.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:a.jsx(Zi,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),a.jsx(st,{value:g.name,onChange:N=>x({...g,name:N.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),a.jsx(st,{value:g.email,onChange:N=>x({...g,email:N.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Feedback"}),a.jsx("textarea",{value:g.feedback,onChange:N=>x({...g,feedback:N.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 h-20 resize-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"Customer feedback..."})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(Pe,{onClick:_,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200",children:"Save Changes"}),a.jsx(Pe,{onClick:()=>m(!1),variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200",children:"Cancel"})]})]})]})})]})},xz=({offers:t,userRole:e,onOfferCreated:r,currentUser:n})=>{const[s,i]=y.useState(""),[o,l]=y.useState("all"),[c,u]=y.useState(!1),[h,f]=y.useState(!1),[m,g]=y.useState(""),[x,p]=y.useState(""),[b,_]=y.useState(null),[w,C]=y.useState(!1),[R,L]=y.useState(!1),[V,I]=y.useState(null),[A,N]=y.useState({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),[P,D]=y.useState({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),O=U=>!U.isActive,j=t.filter(U=>{const le=U.name.toLowerCase().includes(s.toLowerCase())||U.description.toLowerCase().includes(s.toLowerCase()),_e=o==="all"||o==="active"&&U.isActive||o==="inactive"&&!U.isActive;return le&&_e});t.length,t.filter(U=>U.isActive).length,t.filter(U=>!U.isActive).length,t.reduce((U,le)=>U+le.stampRequirement,0),y.useEffect(()=>{const U=le=>{le.key==="Escape"&&c&&Y()};return c&&document.addEventListener("keydown",U),()=>{document.removeEventListener("keydown",U)}},[c]);const $=async()=>{try{if(f(!0),g(""),p(""),!A.name.trim()){g("Offer name is required");return}if(!A.description.trim()){g("Description is required");return}if(!A.rewardValue.trim()){g("Reward value is required");return}if(!A.rewardDescription.trim()){g("Reward description is required");return}const U={name:A.name.trim(),description:A.description.trim(),stampRequirement:A.stampRequirement,stampsPerScan:A.stampsPerScan,rewardType:A.rewardType,rewardValue:A.rewardValue.trim(),rewardDescription:A.rewardDescription.trim(),isActive:!1,expiresAt:A.expiryDate?Fe.fromDate(new Date(A.expiryDate)):null};if(!n)throw new Error("User context not available");await GR(n,U),p("Offer created successfully!"),r==null||r(),setTimeout(()=>{p("")},5e3),N({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),g("")}catch(U){g(U instanceof Error?U.message:"Failed to create offer. Please try again."),console.error("Error creating offer:",U)}finally{f(!1)}},Y=()=>{N({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),g(""),p(""),f(!1)},J=async U=>{try{if(!n){g("User context not available");return}const le=!U.isActive;await LC(n,U.offerId,{isActive:le}),p(`Offer ${le?"activated":"deactivated"} successfully!`),r==null||r(),setTimeout(()=>{p("")},5e3)}catch(le){g(le instanceof Error?le.message:`Failed to ${U.isActive?"deactivate":"activate"} offer. Please try again.`),console.error("Error toggling offer status:",le)}},se=U=>{_(U),D({name:U.name,description:U.description,stampRequirement:U.stampRequirement,stampsPerScan:U.stampsPerScan||1,rewardType:U.rewardType,rewardValue:U.rewardValue,rewardDescription:U.rewardDescription,expiryDate:U.expiresAt?U.expiresAt.toDate().toISOString().split("T")[0]:""}),C(!0)},G=async()=>{try{if(!n||!b){g("User context or offer not available");return}if(L(!0),g(""),!P.name.trim()){g("Offer name is required");return}if(!P.description.trim()){g("Description is required");return}if(!P.rewardValue.trim()){g("Reward value is required");return}if(!P.rewardDescription.trim()){g("Reward description is required");return}const U={name:P.name.trim(),description:P.description.trim(),stampRequirement:P.stampRequirement,stampsPerScan:P.stampsPerScan,rewardType:P.rewardType,rewardValue:P.rewardValue.trim(),rewardDescription:P.rewardDescription.trim(),expiresAt:P.expiryDate?Fe.fromDate(new Date(P.expiryDate)):null};await LC(n,b.offerId,U),p("Offer updated successfully!"),r==null||r(),setTimeout(()=>{p("")},5e3),C(!1),_(null),g("")}catch(U){g(U instanceof Error?U.message:"Failed to update offer. Please try again."),console.error("Error updating offer:",U)}finally{L(!1)}},W=()=>{C(!1),_(null),D({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),g("")},ie=async U=>{try{if(!n){g("User context not available");return}I(U),await J7(n,U),p("Offer deleted successfully!"),r==null||r(),setTimeout(()=>{p("")},5e3)}catch(le){g(le instanceof Error?le.message:"Failed to delete offer. Please try again."),console.error("Error deleting offer:",le)}finally{I(null)}},ne=()=>{const U=new Date;return U.setFullYear(U.getFullYear()+10),U.toISOString().split("T")[0]};return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900/20 to-blue-800/20 border border-blue-700/30 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"text-blue-400 mt-1",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-blue-300 mb-2",children:"Offer Lifecycle Management"}),a.jsxs("div",{className:"text-blue-200 text-sm space-y-2",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Active Offers:"})," Visible to all customers, new users can start collecting stamps"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Inactive Offers:"})," Hidden from new users, but existing users can continue collecting stamps"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"User Protection:"})," Users who started collecting stamps can complete their rewards even if the offer becomes inactive"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Admin Control:"})," Only inactive offers can be edited or deleted"]})]})]})]})}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(uS,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]})}),a.jsx(Pe,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",onClick:()=>{i(""),l("all")},children:"Clear Filters"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Offers"}),a.jsxs("div",{className:"relative",children:[a.jsx(hS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(st,{placeholder:"Search by name or description...",value:s,onChange:U=>i(U.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),a.jsxs("select",{value:o,onChange:U=>l(U.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active Offers"}),a.jsx("option",{value:"inactive",children:"Inactive Offers"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs(Pe,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 w-full",onClick:()=>u(!0),disabled:e!=="super_admin",title:e!=="super_admin"?"Only super admins can create offers":"Create new loyalty offer",children:[a.jsx(qh,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50",children:a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(kt,{className:"w-5 h-5 mr-2 text-green-400"}),"Loyalty Offers (",j.length,")"]})}),x&&a.jsx("div",{className:"mx-6 mt-4 bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ko,{className:"w-5 h-5 text-green-400"}),a.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),a.jsx("div",{className:"p-6",children:j.length>0?a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:j.map(U=>a.jsxs("div",{className:`bg-gradient-to-br ${U.isActive?"from-green-900/30 to-green-800/30 border-green-700/50":"from-gray-800/30 to-gray-700/30 border-gray-600/50"} border rounded-xl p-6 hover:shadow-lg transition-all duration-300`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white truncate",children:U.name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[!U.isActive&&O(U)&&a.jsx("div",{className:"text-xs text-yellow-400 bg-yellow-900/30 px-2 py-1 rounded-full border border-yellow-600/30",children:" Users collecting"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${U.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:U.isActive?"ACTIVE":"INACTIVE"})]})]}),a.jsx("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:U.description}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[a.jsx(qn,{className:"w-4 h-4 mr-2"}),"Stamps Required"]}),a.jsx("span",{className:"text-white font-medium",children:U.stampRequirement})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[a.jsx(kt,{className:"w-4 h-4 mr-2"}),"Reward"]}),a.jsx("span",{className:"text-white font-medium",children:U.rewardDescription})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[a.jsx(um,{className:"w-4 h-4 mr-2"}),"Type"]}),a.jsx("span",{className:"text-white font-medium capitalize",children:U.rewardType})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[a.jsx(Ax,{className:"w-4 h-4 mr-2"}),"Created"]}),a.jsx("span",{className:"text-white font-medium text-sm",children:U.createdAt.toDate().toLocaleDateString()})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(Pe,{size:"sm",variant:"outline",className:`border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200 flex-1 ${U.isActive?"border-green-600 text-green-400 hover:bg-green-600":""}`,title:U.isActive?"Deactivate offer":"Activate offer",onClick:()=>J(U),children:U.isActive?a.jsx(lO,{className:"w-4 h-4"}):a.jsx(Sx,{className:"w-4 h-4"})}),!U.isActive&&a.jsx(Pe,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200 flex-1",title:"Edit offer",onClick:()=>se(U),children:a.jsx(fu,{className:"w-4 h-4"})}),!U.isActive&&a.jsx(Pe,{size:"sm",variant:"outline",className:"border-red-600 text-red-400 hover:bg-red-600 hover:text-white transition-all duration-200 flex-1",title:"Delete offer",onClick:()=>ie(U.offerId),disabled:V===U.offerId,children:V===U.offerId?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-400"}):a.jsx(pO,{className:"w-4 h-4"})})]})]},U.offerId))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(kt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No offers found"}),a.jsx("p",{className:"text-gray-400 mb-6",children:s||o!=="all"?"Try adjusting your search or filters":"Create your first loyalty offer to get started"}),!s&&o==="all"&&a.jsxs(Pe,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",onClick:()=>u(!0),disabled:e!=="super_admin",children:[a.jsx(qh,{className:"w-4 h-4 mr-2"}),"Create First Offer"]})]})})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(qh,{className:"w-5 h-5 mr-2 text-green-400"}),"Create New Loyalty Offer"]}),a.jsx("button",{onClick:Y,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:a.jsx(Zi,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[m&&a.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(R1,{className:"w-5 h-5 text-red-400"}),a.jsx("span",{className:"text-red-300 font-medium",children:m})]})}),x&&a.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ko,{className:"w-5 h-5 text-green-400"}),a.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(kt,{className:"w-4 h-4 mr-2 text-green-400"}),"Basic Information"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Name *"}),a.jsx(st,{value:A.name,onChange:U=>N({...A,name:U.target.value}),placeholder:"Enter offer name...",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),a.jsx(id,{value:A.description,onChange:U=>N({...A,description:U.target.value}),placeholder:"Describe the offer...",rows:3,className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(qn,{className:"w-4 h-4 mr-2 text-blue-400"}),"Stamp Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Stamps Required *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(st,{type:"number",min:"1",value:A.stampRequirement,onChange:U=>N({...A,stampRequirement:parseInt(U.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stamps Per Scan *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(st,{type:"number",min:"1",value:A.stampsPerScan,onChange:U=>N({...A,stampsPerScan:parseInt(U.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 stamp per scan. Can be increased for special promotions."})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(kt,{className:"w-4 h-4 mr-2 text-purple-400"}),"Reward Details"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Type *"}),a.jsxs("select",{value:A.rewardType,onChange:U=>N({...A,rewardType:U.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"percentage",children:"Percentage Discount"}),a.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),a.jsx("option",{value:"free_item",children:"Free Item"}),a.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Value *"}),a.jsx(st,{value:A.rewardValue,onChange:U=>N({...A,rewardValue:U.target.value}),placeholder:A.rewardType==="percentage"?"20":A.rewardType==="fixed_amount"?"5.00":"Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Description *"}),a.jsx(st,{value:A.rewardDescription,onChange:U=>N({...A,rewardDescription:U.target.value}),placeholder:"e.g., 20% OFF, $5.00 OFF, Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(ql,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Expiry Settings"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),a.jsx(st,{type:"date",value:A.expiryDate||ne(),onChange:U=>N({...A,expiryDate:U.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 10 years from creation date"})]})]}),a.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(hO,{className:"w-4 h-4 text-blue-400"}),a.jsx("span",{className:"text-blue-300 text-sm font-medium",children:"Offer Status: Inactive by Default"})]}),a.jsx("p",{className:"text-blue-200 text-xs mt-1",children:"New offers are created as inactive. Use the eye button to activate them when ready. Only inactive offers can be edited or deleted."})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(Pe,{onClick:$,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 flex-1",disabled:!A.name||!A.description||!A.rewardValue||!A.rewardDescription||h,children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qh,{className:"w-4 h-4 mr-2"}),"Create Offer"]})}),a.jsx(Pe,{onClick:Y,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200 flex-1",disabled:h,children:"Cancel"})]})]})]})}),w&&b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(fu,{className:"w-5 h-5 mr-2 text-blue-400"}),"Edit Loyalty Offer"]}),a.jsx("button",{onClick:W,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:a.jsx(Zi,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[m&&a.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(R1,{className:"w-5 h-5 text-red-400"}),a.jsx("span",{className:"text-red-300 font-medium",children:m})]})}),x&&a.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ko,{className:"w-5 h-5 text-green-400"}),a.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(kt,{className:"w-4 h-4 mr-2 text-green-400"}),"Basic Information"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Name *"}),a.jsx(st,{value:P.name,onChange:U=>D({...P,name:U.target.value}),placeholder:"Enter offer name...",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),a.jsx(id,{value:P.description,onChange:U=>D({...P,description:U.target.value}),placeholder:"Describe the offer...",rows:3,className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(qn,{className:"w-4 h-4 mr-2 text-blue-400"}),"Stamp Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Stamps Required *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(st,{type:"number",min:"1",value:P.stampRequirement,onChange:U=>D({...P,stampRequirement:parseInt(U.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stamps Per Scan *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(st,{type:"number",min:"1",value:P.stampsPerScan,onChange:U=>D({...P,stampsPerScan:parseInt(U.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 stamp per scan. Can be increased for special promotions."})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(kt,{className:"w-4 h-4 mr-2 text-purple-400"}),"Reward Details"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Type *"}),a.jsxs("select",{value:P.rewardType,onChange:U=>D({...P,rewardType:U.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"percentage",children:"Percentage Discount"}),a.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),a.jsx("option",{value:"free_item",children:"Free Item"}),a.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Value *"}),a.jsx(st,{value:P.rewardValue,onChange:U=>D({...P,rewardValue:U.target.value}),placeholder:P.rewardType==="percentage"?"20":P.rewardType==="fixed_amount"?"5.00":"Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Description *"}),a.jsx(st,{value:P.rewardDescription,onChange:U=>D({...P,rewardDescription:U.target.value}),placeholder:"e.g., 20% OFF, $5.00 OFF, Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(ql,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Expiry Settings"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),a.jsx(st,{type:"date",value:P.expiryDate||ne(),onChange:U=>D({...P,expiryDate:U.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 year from creation date"})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(Pe,{onClick:G,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex-1",disabled:!P.name||!P.description||!P.rewardValue||!P.rewardDescription||R,children:R?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fu,{className:"w-4 h-4 mr-2"}),"Update Offer"]})}),a.jsx(Pe,{onClick:W,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200 flex-1",disabled:R,children:"Cancel"})]})]})]})})]})},wz=({allUsers:t})=>{const e=t.flatMap(s=>(s.completedRewards||[]).map(i=>({...i,userName:s.name,userEmail:s.email,userId:s.id}))),r=e.filter(s=>!s.claimedAt),n=e.filter(s=>s.claimedAt);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:e.length}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:r.length}),a.jsx("div",{className:"text-green-300 text-lg",children:"Active Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:n.length}),a.jsx("div",{className:"text-yellow-300 text-lg",children:"Claimed Rewards"})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:["Active Rewards (",r.length,")"]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(s=>a.jsxs("div",{className:"bg-gradient-to-br from-green-900/40 to-green-800/40 border border-green-700/50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold text-white",children:s.rewardDescription}),a.jsx("span",{className:"text-xs text-green-300 bg-green-900/50 px-2 py-1 rounded-full",children:"ACTIVE"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:s.userName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:s.rewardType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:s.rewardValue})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Earned:"}),a.jsx("span",{className:"text-white",children:s.createdAt.toDate().toLocaleDateString()})]})]})]},s.rewardId))})]}),n.length>0&&a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:["Claimed Rewards (",n.length,")"]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(s=>{var i;return a.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 border border-yellow-700/50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold text-white",children:s.rewardDescription}),a.jsx("span",{className:"text-xs text-yellow-300 bg-yellow-900/50 px-2 py-1 rounded-full",children:"CLAIMED"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:s.userName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:s.rewardType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:s.rewardValue})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Earned:"}),a.jsx("span",{className:"text-white",children:s.createdAt.toDate().toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Redeemed:"}),a.jsx("span",{className:"text-yellow-300 font-medium",children:(i=s.claimedAt)==null?void 0:i.toDate().toLocaleDateString()})]})]})]},s.rewardId)})})]})]})},bz=({allUsers:t,offers:e})=>{const r=t.filter(i=>i.role==="customer"),n=r.reduce((i,o)=>{var l;return i+(((l=o.completedRewards)==null?void 0:l.length)||0)},0),s=r.filter(i=>i.lastScanAt&&new Date().getTime()-i.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:r.length}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:n}),a.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:s}),a.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:e.length}),a.jsx("div",{className:"text-yellow-300 text-lg",children:"Total Offers"})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Performance Overview"}),a.jsx("div",{className:"h-64 bg-gray-700/30 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(Px,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Performance charts coming soon"})]})})]})]})},Ez=({user:t})=>a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"System Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"General Settings"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Offer"}),a.jsx("select",{className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2",children:a.jsx("option",{children:"Select default offer for new users"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Timeout"}),a.jsx(st,{type:"number",placeholder:"24",className:"bg-gray-700/50 border-gray-600 text-white"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Security Settings"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"multiDevice",className:"rounded"}),a.jsx("label",{htmlFor:"multiDevice",className:"text-gray-300",children:"Allow multi-device login"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"sessionValidation",className:"rounded"}),a.jsx("label",{htmlFor:"sessionValidation",className:"text-gray-300",children:"Enable session validation"})]})]})]})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx(Pe,{className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800",children:"Save Settings"})})]})}),Cz=({user:t,allUsers:e,offers:r,onLogout:n,onScan:s})=>{var O;const[i,o]=y.useState(()=>localStorage.getItem("adminActiveTab")||"overview"),[l,c]=y.useState(""),[u,h]=y.useState("all"),[f,m]=y.useState("all"),[g,x]=y.useState(!1),[p,b]=y.useState(r),_=Yn();y.useEffect(()=>{b(r)},[r]),y.useEffect(()=>{if((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="super_admin"){const j=Ea(ht,"offers"),$=Sd(j,ww("createdAt","desc")),Y=Pp($,J=>{const se=[];J.forEach(G=>{se.push({...G.data(),offerId:G.id})}),b(se)},J=>{console.error("Error listening to offers:",J)});return()=>Y()}},[t==null?void 0:t.role]);const w=async()=>{try{const j=await qR();b(j),console.log("Offers refreshed successfully. New offers count:",j.length)}catch(j){console.error("Failed to refresh offers:",j)}},C=e.filter(j=>{const $=j.name.toLowerCase().includes(l.toLowerCase())||j.email.toLowerCase().includes(l.toLowerCase()),Y=u==="all"||u==="active"&&j.lastScanAt&&new Date().getTime()-j.lastScanAt.toDate().getTime()<7*24*60*60*1e3||u==="inactive"&&(!j.lastScanAt||new Date().getTime()-j.lastScanAt.toDate().getTime()>=7*24*60*60*1e3),J=f==="all"||j.role===f;return $&&Y&&J}),R=e.length,L=e.filter(j=>j.role==="customer"),V=L.filter(j=>j.lastScanAt&&new Date().getTime()-j.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,I=L.reduce((j,$)=>{var Y;return j+(((Y=$.completedRewards)==null?void 0:Y.length)||0)},0),A=p.length,N=p.filter(j=>j.isActive).length;y.useEffect(()=>{gt("admin_dashboard_view",{tab:i,user_id:t.id})},[i,t.id]);const P=[{id:"overview",label:"Overview",icon:lS,color:"text-blue-400"},{id:"users",label:"Users",icon:ls,color:"text-green-400"},{id:"offers",label:"Offers",icon:kt,color:"text-purple-400"},{id:"rewards",label:"Rewards",icon:qn,color:"text-yellow-400"},{id:"analytics",label:"Analytics",icon:Px,color:"text-indigo-400"},{id:"settings",label:"Settings",icon:Ix,color:"text-red-400"}],D=j=>{o(j),localStorage.setItem("adminActiveTab",j),x(!1)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>x(!1)}),a.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 bg-gray-900/95 backdrop-blur-sm border-r border-red-800/50 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${g?"translate-x-0":"-translate-x-full"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-red-800/30",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"}),a.jsx("p",{className:"text-red-300 text-sm",children:"Vape Master"})]}),a.jsx("button",{onClick:()=>x(!1),className:"lg:hidden text-gray-400 hover:text-white",children:a.jsx(Zi,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"p-6 border-b border-red-800/30",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-lg font-bold",children:t.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:t.name}),a.jsx("div",{className:"text-gray-400 text-sm capitalize",children:t.role.replace("_"," ")})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-2",children:P.map(j=>{const $=j.icon;return a.jsxs("button",{onClick:()=>D(j.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ${i===j.id?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-800/50"}`,children:[a.jsx($,{className:`w-5 h-5 ${i===j.id?"text-white":j.color}`}),a.jsx("span",{className:"font-medium",children:j.label})]},j.id)})}),a.jsxs("div",{className:"p-4 space-y-3 border-t border-red-800/30",children:[a.jsxs(Pe,{onClick:s,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:[a.jsx(fO,{className:"w-4 h-4 mr-2"}),"Scan QR"]}),a.jsxs(Pe,{onClick:()=>_("/dashboard"),variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",children:[a.jsx(cO,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),a.jsxs(Pe,{onClick:n,variant:"outline",className:"w-full border-red-600 text-red-300 hover:bg-red-700/20",children:[a.jsx(dS,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),a.jsxs("div",{className:"lg:pl-80",children:[a.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50 sticky top-0 z-30",children:a.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>x(!0),className:"lg:hidden text-gray-400 hover:text-white",children:a.jsx(dO,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:(O=P.find(j=>j.id===i))==null?void 0:O.label}),a.jsxs("p",{className:"text-red-300 text-sm",children:[i==="overview"&&"System overview and key metrics",i==="users"&&"Manage users and permissions",i==="offers"&&"Create and manage loyalty offers",i==="rewards"&&"Track rewards and redemptions",i==="analytics"&&"Performance insights and reports",i==="settings"&&"System configuration and preferences"]})]})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-6 text-sm",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white font-semibold",children:R}),a.jsx("div",{className:"text-gray-400",children:"Users"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white font-semibold",children:A}),a.jsx("div",{className:"text-gray-400",children:"Offers"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white font-semibold",children:I}),a.jsx("div",{className:"text-gray-400",children:"Rewards"})]})]})]})}),a.jsxs("div",{className:"p-6",children:[i==="overview"&&a.jsx(yz,{totalUsers:R,customers:L,activeUsers:V,totalRewards:I,totalOffers:A,activeOffers:N,recentUsers:e.slice(0,5)}),i==="users"&&a.jsx(vz,{users:C,searchTerm:l,setSearchTerm:c,statusFilter:u,setStatusFilter:h,roleFilter:f,setRoleFilter:m}),i==="offers"&&a.jsx(xz,{offers:p,userRole:t.role,onOfferCreated:w,currentUser:t}),i==="rewards"&&a.jsx(wz,{allUsers:e}),i==="analytics"&&a.jsx(bz,{allUsers:e,offers:p}),i==="settings"&&a.jsx(Ez,{user:t})]})]})]})},_z=()=>{const{user:t,loading:e,settings:r,allUsers:n,allUsersLoading:s,offers:i,showConfetti:o,confettiKey:l,lastUpdateTime:c,activeTab:u,setActiveTab:h,userPurchaseLimit:f,purchasesRemaining:m,handleLogout:g,navigate:x,handleOfferSelection:p}=yq(),[b,_]=y.useState(!1),[w,C]=y.useState(null),[R,L]=y.useState(!1),[V,I]=y.useState(null);if(e)return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsx(hz,{}),a.jsx("div",{className:"flex-1 px-6 pb-6",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx(fz,{}),a.jsx(mz,{}),a.jsx(pz,{})]})})]});if(!t)return null;const A=u==="progress",N=u==="offers",P=t.role==="customer";return t.role==="admin"||t.role==="super_admin"?a.jsx(Cz,{user:t,allUsers:n,offers:i,onLogout:g,onScan:()=>x("/scan")}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o&&a.jsx(QR,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:200,recycle:!1},l),a.jsx(Aq,{title:"Dashboard",onBack:()=>x("/"),actions:a.jsx(dz,{user:t,handleLogout:g,navigate:x})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx(Pq,{activeTab:u,onTabChange:h,userRole:t.role}),N&&P&&a.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-green-300 mb-2 flex items-center",children:[a.jsx(kt,{className:"w-6 h-6 mr-2 text-green-400"}),"Available Offers"]}),a.jsx("p",{className:"text-green-200/80 text-sm",children:"Choose an offer and start collecting stamps to earn rewards"})]}),a.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:i&&i.length>0?a.jsx("div",{className:"grid gap-4",children:i.filter(O=>{var $;return O.isActive?!0:(($=t.completedRewards)==null?void 0:$.find(Y=>{var J,se,G;return((J=Y.offerSnapshot)==null?void 0:J.offerId)===O.offerId&&((se=Y.scanHistory)==null?void 0:se.length)<((G=Y.offerSnapshot)==null?void 0:G.stampRequirement)&&!Y.claimedAt}))!==void 0}).map(O=>{var Y,J;const j=(Y=t.completedRewards)==null?void 0:Y.find(se=>{var G,W,ie;return((G=se.offerSnapshot)==null?void 0:G.offerId)===O.offerId&&((W=se.scanHistory)==null?void 0:W.length)>=((ie=se.offerSnapshot)==null?void 0:ie.stampRequirement)&&!se.claimedAt}),$=(J=t.completedRewards)==null?void 0:J.find(se=>{var G,W,ie;return((G=se.offerSnapshot)==null?void 0:G.offerId)===O.offerId&&((W=se.scanHistory)==null?void 0:W.length)<((ie=se.offerSnapshot)==null?void 0:ie.stampRequirement)&&!se.claimedAt});return a.jsxs("div",{className:`bg-gradient-to-br ${$?"from-green-900/40 to-green-800/40 border-green-600/50 hover:from-green-900/50 hover:to-green-800/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50 hover:from-gray-800/50 hover:to-gray-700/50"} border rounded-xl p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-lg`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-1",children:O.name}),a.jsx("p",{className:"text-gray-300 text-sm",children:O.description}),!O.isActive&&a.jsx("div",{className:"mt-2 text-xs text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded-full inline-block",children:" Offer is inactive - you can continue collecting stamps"})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${$?O.isActive?"bg-green-600/80 text-white border border-green-500/50 shadow-lg":"bg-yellow-600/80 text-white border border-yellow-500/50 shadow-lg":"bg-gray-600/80 text-gray-200 border border-gray-500/50"}`,children:$?O.isActive?"ACTIVE":"CONTINUING":"AVAILABLE"})]}),a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Required Stamps:"}),a.jsx("span",{className:"text-white font-medium",children:O.stampRequirement})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Reward:"}),a.jsx("span",{className:"text-white font-medium",children:O.rewardDescription})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white font-medium capitalize",children:O.rewardType})]})]}),a.jsx("div",{className:"flex justify-center",children:$?a.jsx("button",{onClick:()=>{const se={userId:t.id,userEmail:t.email,userName:t.name,offerId:O.offerId,offerName:O.name,stampsPerScan:O.stampsPerScan||1,timestamp:new Date().toISOString()};I(se),L(!0)},className:`w-full px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg ${O.isActive?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white":"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white"}`,children:O.isActive?"Continue Collecting":"Continue Collecting (Inactive)"}):a.jsx("button",{onClick:()=>{const se={userId:t.id,userEmail:t.email,userName:t.name,offerId:O.offerId,offerName:O.name,stampsPerScan:O.stampsPerScan||1,timestamp:new Date().toISOString()};I(se),L(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg",children:j?"Start New Reward":"Start Collecting"})})]},O.offerId)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(kt,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),a.jsx("div",{className:"text-gray-300 text-lg font-medium mb-2",children:"No active offers available"}),a.jsx("div",{className:"text-gray-500 text-sm",children:"Check back later for new offers"})]})})]}),A&&a.jsx(a.Fragment,{children:P?a.jsx("div",{className:"h-[720px] overflow-hidden",children:a.jsx(kq,{user:t,userPurchaseLimit:f,settings:r,purchasesRemaining:m,onViewReward:()=>x("/scan"),currentOffer:i==null?void 0:i.find(O=>O.offerId===t.currentOfferId)})}):a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-blue-300 mb-2 flex items-center",children:[a.jsx(qn,{className:"w-6 h-6 mr-2 text-blue-400"}),"User Progress Tracking"]}),a.jsx("p",{className:"text-blue-200/80 text-sm",children:"Real-time updates of all user loyalty progress"})]}),a.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:a.jsx(Rq,{users:n.filter(O=>O.role==="customer"),loading:s})})]})}),u==="card"&&(t.role==="super_admin"?a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[a.jsx(Gl,{className:"w-6 h-6 mr-2 text-purple-400"}),"Rewards History"]}),a.jsx("p",{className:"text-purple-200/80 text-sm",children:"Complete overview of all user rewards and redemptions"})]}),a.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:a.jsx(Iq,{allUsers:n})})]}):a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[a.jsx(Gl,{className:"w-6 h-6 mr-2 text-purple-400"}),"Your Rewards"]}),a.jsx("p",{className:"text-purple-200/80 text-sm",children:"Track your progress and manage your earned rewards"})]}),a.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:a.jsx(qq,{user:t,offers:i})})]}))]})}),b&&w&&a.jsx(gz,{reward:w,onClose:()=>{_(!1),C(null)}}),R&&V&&a.jsx(o2,{qrData:V,isOpen:R,onClose:()=>{L(!1),I(null)}})]})},Tz=()=>{var m,g,x,p;const{user:t,loading:e,redeemReward:r}=vs(),n=Yn(),[s,i]=y.useState(null);if(y.useEffect(()=>{gt("page_view",{page:"Rewards"})},[]),y.useEffect(()=>{!e&&!t&&n("/login")},[t,e,n]),e)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t)return null;const o=async b=>{i(b);try{await r(b),ct({title:"Reward Redeemed!",description:"Your reward has been successfully redeemed."}),gt("reward_redeemed",{reward_id:b,user_id:t.id}),window.location.reload()}catch{ct({title:"Error",description:"Failed to redeem reward. Please try again.",variant:"destructive"})}finally{i(null)}},l=b=>{switch(b){case"percentage":return"";case"fixed_amount":return"";case"free_item":return"";default:return""}},c=b=>{switch(b){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}},u=((m=t.completedRewards)==null?void 0:m.filter(b=>!b.claimedAt))||[],h=((g=t.completedRewards)==null?void 0:g.filter(b=>b.claimedAt))||[],f=t.currentReward;return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[a.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50",children:a.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(Pe,{variant:"ghost",size:"sm",onClick:()=>n("/dashboard"),className:"text-red-300 hover:text-white hover:bg-red-900/30",children:[a.jsx(tc,{className:"w-5 h-5 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"My Rewards"}),a.jsx("p",{className:"text-red-300 text-sm",children:"Manage and redeem your earned rewards"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-white text-sm",children:"Total Rewards"}),a.jsx("div",{className:"text-2xl font-bold text-red-400",children:((x=t.completedRewards)==null?void 0:x.length)||0})]})]})})}),a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[f&&a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(ql,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Current Progress"]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:t.purchases}),a.jsxs("div",{className:"text-sm text-gray-400",children:["of ",f.settingsSnapshot.purchaseLimit," ","purchases"]})]})]}),a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 mb-4",children:a.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 h-3 rounded-full transition-all duration-500",style:{width:`${t.purchases/f.settingsSnapshot.purchaseLimit*100}%`}})}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-lg font-semibold text-white mb-2",children:[l(f.rewardType)," ",f.rewardDescription]}),a.jsx("p",{className:"text-gray-300 text-sm",children:f.settingsSnapshot.descriptionMessage})]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(kt,{className:"w-5 h-5 mr-2 text-green-400"}),"Available Rewards (",u.length,")"]}),u.length===0?a.jsxs("div",{className:"text-center py-12 bg-gradient-to-r from-gray-900/50 to-red-900/50 border border-gray-700/50 rounded-xl",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Available Rewards"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Complete your purchase goal to earn your first reward!"}),a.jsx(Pe,{onClick:()=>n("/dashboard"),className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800",children:"Go to Dashboard"})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(b=>a.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6 hover:border-red-600/70 transition-all duration-300 hover:shadow-lg hover:shadow-red-500/20",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"text-4xl mb-2",children:l(b.rewardType)}),a.jsx("div",{className:"text-xl font-bold text-white mb-1",children:b.rewardDescription}),a.jsxs("div",{className:"text-sm text-gray-400",children:["Earned on ",b.createdAt.toDate().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:b.rewardType})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:b.rewardValue})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Goal:"}),a.jsxs("span",{className:"text-white",children:[b.settingsSnapshot.purchaseLimit," purchases"]})]})]}),a.jsxs(Pe,{onClick:()=>o(b.rewardId),disabled:s===b.rewardId,className:`w-full bg-gradient-to-r ${c(b.rewardType)} hover:opacity-90 transition-all duration-300`,children:[s===b.rewardId?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(Ko,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})]},b.rewardId))})]}),h.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(Ko,{className:"w-5 h-5 mr-2 text-green-400"}),"Claimed Rewards (",h.length,")"]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.map(b=>{var _;return a.jsxs("div",{className:"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border border-gray-700/50 rounded-xl p-6 opacity-75",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"text-4xl mb-2",children:l(b.rewardType)}),a.jsx("div",{className:"text-xl font-bold text-gray-300 mb-1",children:b.rewardDescription}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Claimed on"," ",(_=b.claimedAt)==null?void 0:_.toDate().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Type:"}),a.jsx("span",{className:"text-gray-300 capitalize",children:b.rewardType})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Value:"}),a.jsx("span",{className:"text-gray-300",children:b.rewardValue})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Goal:"}),a.jsxs("span",{className:"text-gray-300",children:[b.settingsSnapshot.purchaseLimit," purchases"]})]})]}),a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-green-900/50 border border-green-600/50 rounded-full",children:[a.jsx(Ko,{className:"w-4 h-4 mr-2 text-green-400"}),a.jsx("span",{className:"text-green-300 text-sm font-medium",children:"REDEEMED"})]})})]},b.rewardId)})})]}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[a.jsx(Rx,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Reward Statistics"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:((p=t.completedRewards)==null?void 0:p.length)||0}),a.jsx("div",{className:"text-sm text-gray-400",children:"Total Earned"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:h.length}),a.jsx("div",{className:"text-sm text-gray-400",children:"Redeemed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:u.length}),a.jsx("div",{className:"text-sm text-gray-400",children:"Available"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.purchases}),a.jsx("div",{className:"text-sm text-gray-400",children:"Current Progress"})]})]})]})]})]})},Az=()=>{const{user:t,loading:e,allUsers:r}=vs(),n=Yn(),[s,i]=y.useState([]),[o,l]=y.useState(!0);y.useState(!1),y.useState(!1);const[c,u]=y.useState("offers");return y.useEffect(()=>{gt("page_view",{page:"Settings"})},[]),y.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),y.useEffect(()=>{t&&(async()=>{try{l(!0);const f=await wu();if(f.length===0){await VC(t);const m=await wu();i(m)}else i(f)}catch(f){console.error("Error loading offers:",f);try{await VC(t);const m=await wu();i(m)}catch(m){console.error("Error creating default offer:",m)}}finally{l(!1)}})()},[t]),e||o?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):!t||t.role!=="admin"&&t.role!=="super_admin"?null:a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:a.jsxs("div",{className:"p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xs,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(tc,{className:"w-6 h-6"})}),a.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Settings"})]}),a.jsxs("div",{className:"flex items-center text-gray-400",children:[a.jsx(Ix,{className:"w-6 h-6 mr-2"}),a.jsx("span",{className:"text-sm",children:"Admin Panel"})]})]})}),a.jsx("div",{className:"flex-1 px-6 py-8",children:a.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[a.jsxs("div",{className:"flex space-x-1 mb-8 bg-gray-800/50 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>u("offers"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="offers"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(kt,{className:"w-4 h-4 mr-2"}),"Manage Offers"]}),a.jsxs("button",{onClick:()=>u("rewards"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="rewards"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(kt,{className:"w-4 h-4 mr-2"}),"Rewards History"]}),a.jsxs("button",{onClick:()=>u("analytics"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="analytics"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(lS,{className:"w-4 h-4 mr-2"}),"Analytics"]}),a.jsxs("button",{onClick:()=>u("users"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="users"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(ls,{className:"w-4 h-4 mr-2"}),"User Management"]})]}),c==="offers"&&a.jsx(Sz,{offers:s,onOffersChange:i,user:t}),c==="rewards"&&a.jsx(Nz,{allUsers:r}),c==="analytics"&&a.jsx(Iz,{allUsers:r}),c==="users"&&a.jsx(Rz,{allUsers:r})]})})]})]})},Sz=({offers:t,onOffersChange:e,user:r})=>{const[n,s]=y.useState(!1),[i,o]=y.useState(!1),[l,c]=y.useState(""),[u,h]=y.useState(""),[f,m]=y.useState(5),[g,x]=y.useState("percentage"),[p,b]=y.useState("20"),[_,w]=y.useState("20% OFF"),C=async()=>{if(!l.trim()||!u.trim()||!p.trim()||!_.trim()){ct({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});return}s(!0);try{await aq(r,{name:l.trim(),description:u.trim(),stampRequirement:f,rewardType:g,rewardValue:p.trim(),rewardDescription:_.trim(),isActive:!0});const R=await wu();e(R),o(!1),c(""),h(""),m(5),x("percentage"),b("20"),w("20% OFF"),ct({title:"Offer Created",description:"New offer has been created successfully!"})}catch{ct({title:"Creation Failed",description:"Failed to create offer. Please try again.",variant:"destructive"})}finally{s(!1)}};return a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Offers"}),a.jsx("p",{className:"text-gray-400",children:"Create and manage loyalty program offers for customers"})]}),a.jsx("div",{className:"mb-8 text-center",children:a.jsxs(Pe,{onClick:()=>o(!0),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold px-6 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx(kt,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})}),i&&a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6 mb-8",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create New Offer"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(en,{htmlFor:"offerName",className:"text-white font-medium",children:"Offer Name"}),a.jsx(st,{id:"offerName",value:l,onChange:R=>c(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"e.g., Welcome Offer, Summer Special"})]}),a.jsxs("div",{children:[a.jsx(en,{htmlFor:"offerDescription",className:"text-white font-medium",children:"Description"}),a.jsx(id,{id:"offerDescription",value:u,onChange:R=>h(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Describe what customers need to do to earn this reward"})]}),a.jsxs("div",{children:[a.jsx(en,{htmlFor:"stampRequirement",className:"text-white font-medium",children:"Stamps Required"}),a.jsx(st,{id:"stampRequirement",type:"number",min:"1",max:"50",value:f,onChange:R=>m(parseInt(R.target.value)||1),className:"bg-gray-700/50 border-gray-600 text-white mt-1"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(en,{htmlFor:"rewardType",className:"text-white font-medium",children:"Reward Type"}),a.jsxs("select",{id:"rewardType",value:g,onChange:R=>x(R.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[a.jsx("option",{value:"percentage",children:"Percentage Discount"}),a.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),a.jsx("option",{value:"free_item",children:"Free Item"})]})]}),a.jsxs("div",{children:[a.jsx(en,{htmlFor:"rewardValue",className:"text-white font-medium",children:"Reward Value"}),a.jsx(st,{id:"rewardValue",value:p,onChange:R=>b(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:g==="percentage"?"20":g==="fixed_amount"?"5.00":"Free Coffee"})]}),a.jsxs("div",{children:[a.jsx(en,{htmlFor:"rewardDescription",className:"text-white font-medium",children:"Reward Description"}),a.jsx(st,{id:"rewardDescription",value:_,onChange:R=>w(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:g==="percentage"?"20% OFF":g==="fixed_amount"?"$5.00 OFF":"Free Coffee"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx(Pe,{variant:"outline",onClick:()=>o(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),a.jsx(Pe,{onClick:C,disabled:n,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Offer"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Current Offers"}),t.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h4",{className:"text-xl font-semibold text-white mb-2",children:"No Offers Yet"}),a.jsx("p",{className:"text-gray-400",children:"Create your first offer to get started!"})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(R=>a.jsxs("div",{className:`bg-gradient-to-br ${R.isActive?"from-green-900/40 to-green-800/40 border-green-700/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50"} border rounded-xl p-4`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"text-lg font-semibold text-white",children:R.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:R.isActive?"ACTIVE":"INACTIVE"})]}),a.jsx("p",{className:"text-gray-300 text-sm mb-3",children:R.description}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Stamps:"}),a.jsx("span",{className:"text-white",children:R.stampRequirement})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Reward:"}),a.jsx("span",{className:"text-white",children:R.rewardDescription})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:R.rewardType})]})]})]},R.offerId))})]})]})},Nz=({allUsers:t})=>{const e=o=>{var c,u;if((c=o.offerSnapshot)!=null&&c.stampRequirement)return o.offerSnapshot.stampRequirement;const l=o;return(u=l.settingsSnapshot)!=null&&u.purchaseLimit?l.settingsSnapshot.purchaseLimit:"Unknown"},r=t.flatMap(o=>(o.completedRewards||[]).map(l=>({...l,userName:o.name,userEmail:o.email,userId:o.id}))),n=r.filter(o=>!o.claimedAt),s=r.filter(o=>o.claimedAt),i=r.filter(o=>o.expiresAt?new Date>o.expiresAt.toDate():!1);return a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Rewards History & Status"}),a.jsx("p",{className:"text-gray-400",children:"Monitor all rewards across the system"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.length}),a.jsx("div",{className:"text-blue-300 text-sm",children:"Total Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:n.length}),a.jsx("div",{className:"text-green-300 text-sm",children:"Active Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:s.length}),a.jsx("div",{className:"text-yellow-300 text-sm",children:"Claimed Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-400",children:i.length}),a.jsx("div",{className:"text-red-300 text-sm",children:"Expired Rewards"})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(Sx,{className:"w-5 h-5 mr-2 text-green-400"}),"Active Rewards (",n.length,")"]}),n.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-800/30 rounded-xl",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("p",{className:"text-gray-400",children:"No active rewards at the moment"})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(o=>a.jsxs("div",{className:"bg-gradient-to-br from-green-900/40 to-green-800/40 border border-green-700/50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold text-white",children:o.rewardDescription}),a.jsx("div",{className:"text-xs text-green-300 bg-green-900/50 px-2 py-1 rounded-full",children:"ACTIVE"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:o.userName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:o.rewardType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:o.rewardValue})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Goal:"}),a.jsxs("span",{className:"text-white",children:[e(o)," purchases"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Earned:"}),a.jsx("span",{className:"text-white",children:o.createdAt.toDate().toLocaleDateString()})]})]})]},o.rewardId))})]}),s.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(Ko,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Claimed Rewards (",s.length,")"]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.slice(0,6).map(o=>{var l;return a.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 border border-yellow-700/50 rounded-xl p-4 opacity-75",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold text-white",children:o.rewardDescription}),a.jsx("div",{className:"text-xs text-yellow-300 bg-yellow-900/50 px-2 py-1 rounded-full",children:"CLAIMED"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:o.userName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Claimed:"}),a.jsx("span",{className:"text-white",children:(l=o.claimedAt)==null?void 0:l.toDate().toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:o.rewardType})]})]})]},o.rewardId)})}),s.length>6&&a.jsx("div",{className:"text-center mt-4",children:a.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 6 of ",s.length," claimed rewards"]})})]})]})},Iz=({allUsers:t})=>{const e=t.filter(s=>s.role==="customer"),r=e.reduce((s,i)=>{var o;return s+(((o=i.completedRewards)==null?void 0:o.length)||0)},0),n=e.filter(s=>s.lastScanAt&&new Date().getTime()-s.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length;return a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"System Analytics"}),a.jsx("p",{className:"text-gray-400",children:"Overview of loyalty program performance"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:e.length}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"}),a.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"Active loyalty members"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:r}),a.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"}),a.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Earned by customers"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:n}),a.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),a.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(Px,{className:"w-5 h-5 mr-2 text-green-400"}),"Recent Activity"]}),a.jsx("div",{className:"space-y-3",children:e.slice(0,5).map(s=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/30 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-bold",children:s.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:s.name}),a.jsx("div",{className:"text-gray-400 text-sm",children:s.email})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-white font-medium",children:[s.purchases," purchases"]}),a.jsx("div",{className:"text-gray-400 text-sm",children:s.lastScanAt?s.lastScanAt.toDate().toLocaleDateString():"Never"})]})]},s.id))})]})]})},Rz=({allUsers:t})=>{const e=t.filter(n=>n.role==="customer"),r=t.filter(n=>n.role==="admin"||n.role==="super_admin");return a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),a.jsx("p",{className:"text-gray-400",children:"Overview of all system users"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t.length}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),a.jsx("div",{className:"text-green-300 text-lg",children:"Customers"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r.length}),a.jsx("div",{className:"text-purple-300 text-lg",children:"Administrators"})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(ls,{className:"w-5 h-5 mr-2 text-blue-400"}),"Customer Overview"]}),a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Name"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Email"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Purchases"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Rewards"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Last Scan"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Status"})]})}),a.jsx("tbody",{children:e.slice(0,10).map(n=>{var s;return a.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[a.jsx("td",{className:"p-3 text-white",children:n.name}),a.jsx("td",{className:"p-3 text-gray-300",children:n.email}),a.jsx("td",{className:"p-3 text-white",children:n.purchases}),a.jsx("td",{className:"p-3 text-white",children:((s=n.completedRewards)==null?void 0:s.length)||0}),a.jsx("td",{className:"p-3 text-gray-300",children:n.lastScanAt?n.lastScanAt.toDate().toLocaleDateString():"Never"}),a.jsx("td",{className:"p-3",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-700/50"}`,children:n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})})]},n.id)})})]}),e.length>10&&a.jsx("div",{className:"text-center mt-4",children:a.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 10 of ",e.length," customers"]})})]})]})]})};function e_(t,[e,r]){return Math.min(r,Math.max(e,t))}function Pz(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var kz=[" ","Enter","ArrowUp","ArrowDown"],jz=[" ","Enter"],Od="Select",[Kp,Jp,Mz]=pd(Od),[vc,kQ]=gd(Od,[Mz,pc]),Xp=pc(),[Dz,_o]=vc(Od),[Oz,Lz]=vc(Od),CP=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:g,form:x}=t,p=Xp(e),[b,_]=y.useState(null),[w,C]=y.useState(null),[R,L]=y.useState(!1),V=Gp(u),[I=!1,A]=Vu({prop:n,defaultProp:s,onChange:i}),[N,P]=Vu({prop:o,defaultProp:l,onChange:c}),D=y.useRef(null),O=b?x||!!b.closest("form"):!0,[j,$]=y.useState(new Set),Y=Array.from(j).map(J=>J.props.value).join(";");return a.jsx(gR,{...p,children:a.jsxs(Dz,{required:g,scope:e,trigger:b,onTriggerChange:_,valueNode:w,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:L,contentId:ea(),value:N,onValueChange:P,open:I,onOpenChange:A,dir:V,triggerPointerDownPosRef:D,disabled:m,children:[a.jsx(Kp.Provider,{scope:e,children:a.jsx(Oz,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(J=>{$(se=>new Set(se).add(J))},[]),onNativeOptionRemove:y.useCallback(J=>{$(se=>{const G=new Set(se);return G.delete(J),G})},[]),children:r})}),O?a.jsxs(HP,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:N,onChange:J=>P(J.target.value),disabled:m,form:x,children:[N===void 0?a.jsx("option",{value:""}):null,Array.from(j)]},Y):null]})})};CP.displayName=Od;var _P="SelectTrigger",TP=y.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=Xp(r),o=_o(_P,r),l=o.disabled||n,c=ot(e,o.onTriggerChange),u=Jp(r),h=y.useRef("touch"),[f,m,g]=YP(p=>{const b=u().filter(C=>!C.disabled),_=b.find(C=>C.value===o.value),w=KP(b,p,_);w!==void 0&&o.onValueChange(w.value)}),x=p=>{l||(o.onOpenChange(!0),g()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return a.jsx(Vw,{asChild:!0,...i,children:a.jsx(qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":QP(o.value)?"":void 0,...s,ref:c,onClick:me(s.onClick,p=>{p.currentTarget.focus(),h.current!=="mouse"&&x(p)}),onPointerDown:me(s.onPointerDown,p=>{h.current=p.pointerType;const b=p.target;b.hasPointerCapture(p.pointerId)&&b.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(x(p),p.preventDefault())}),onKeyDown:me(s.onKeyDown,p=>{const b=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(b&&p.key===" ")&&kz.includes(p.key)&&(x(),p.preventDefault())})})})});TP.displayName=_P;var AP="SelectValue",SP=y.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o="",...l}=t,c=_o(AP,r),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=ot(e,c.onValueNodeChange);return Cr(()=>{u(h)},[u,h]),a.jsx(qe.span,{...l,ref:f,style:{pointerEvents:"none"},children:QP(c.value)?a.jsx(a.Fragment,{children:o}):i})});SP.displayName=AP;var Fz="SelectIcon",NP=y.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return a.jsx(qe.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});NP.displayName=Fz;var Vz="SelectPortal",IP=t=>a.jsx(ip,{asChild:!0,...t});IP.displayName=Vz;var pa="SelectContent",RP=y.forwardRef((t,e)=>{const r=_o(pa,t.__scopeSelect),[n,s]=y.useState();if(Cr(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?va.createPortal(a.jsx(PP,{scope:t.__scopeSelect,children:a.jsx(Kp.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(kP,{...t,ref:e})});RP.displayName=pa;var jn=10,[PP,To]=vc(pa),Bz="SelectContentImpl",kP=y.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:p,avoidCollisions:b,..._}=t,w=_o(pa,r),[C,R]=y.useState(null),[L,V]=y.useState(null),I=ot(e,ae=>R(ae)),[A,N]=y.useState(null),[P,D]=y.useState(null),O=Jp(r),[j,$]=y.useState(!1),Y=y.useRef(!1);y.useEffect(()=>{if(C)return y2(C)},[C]),a2();const J=y.useCallback(ae=>{const[ge,...xe]=O().map(Ce=>Ce.ref.current),[be]=xe.slice(-1),Ae=document.activeElement;for(const Ce of ae)if(Ce===Ae||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===ge&&L&&(L.scrollTop=0),Ce===be&&L&&(L.scrollTop=L.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==Ae))return},[O,L]),se=y.useCallback(()=>J([A,C]),[J,A,C]);y.useEffect(()=>{j&&se()},[j,se]);const{onOpenChange:G,triggerPointerDownPosRef:W}=w;y.useEffect(()=>{if(C){let ae={x:0,y:0};const ge=be=>{var Ae,Ce;ae={x:Math.abs(Math.round(be.pageX)-(((Ae=W.current)==null?void 0:Ae.x)??0)),y:Math.abs(Math.round(be.pageY)-(((Ce=W.current)==null?void 0:Ce.y)??0))}},xe=be=>{ae.x<=10&&ae.y<=10?be.preventDefault():C.contains(be.target)||G(!1),document.removeEventListener("pointermove",ge),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",xe,{capture:!0})}}},[C,G,W]),y.useEffect(()=>{const ae=()=>G(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[G]);const[ie,ne]=YP(ae=>{const ge=O().filter(Ae=>!Ae.disabled),xe=ge.find(Ae=>Ae.ref.current===document.activeElement),be=KP(ge,ae,xe);be&&setTimeout(()=>be.ref.current.focus())}),U=y.useCallback((ae,ge,xe)=>{const be=!Y.current&&!xe;(w.value!==void 0&&w.value===ge||be)&&(N(ae),be&&(Y.current=!0))},[w.value]),le=y.useCallback(()=>C==null?void 0:C.focus(),[C]),_e=y.useCallback((ae,ge,xe)=>{const be=!Y.current&&!xe;(w.value!==void 0&&w.value===ge||be)&&D(ae)},[w.value]),je=n==="popper"?dv:jP,we=je===dv?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:p,avoidCollisions:b}:{};return a.jsx(PP,{scope:r,content:C,viewport:L,onViewportChange:V,itemRefCallback:U,selectedItem:A,onItemLeave:le,itemTextRefCallback:_e,focusSelectedItem:se,selectedItemText:P,position:n,isPositioned:j,searchRef:ie,children:a.jsx(Xw,{as:oa,allowPinchZoom:!0,children:a.jsx(Jw,{asChild:!0,trapped:w.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:me(s,ae=>{var ge;(ge=w.trigger)==null||ge.focus({preventScroll:!0}),ae.preventDefault()}),children:a.jsx(yd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:a.jsx(je,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:ae=>ae.preventDefault(),..._,...we,onPlaced:()=>$(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:me(_.onKeyDown,ae=>{const ge=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!ge&&ae.key.length===1&&ne(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let be=O().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const Ae=ae.target,Ce=be.indexOf(Ae);be=be.slice(Ce+1)}setTimeout(()=>J(be)),ae.preventDefault()}})})})})})})});kP.displayName=Bz;var Uz="SelectItemAlignedPosition",jP=y.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=_o(pa,r),o=To(pa,r),[l,c]=y.useState(null),[u,h]=y.useState(null),f=ot(e,I=>h(I)),m=Jp(r),g=y.useRef(!1),x=y.useRef(!0),{viewport:p,selectedItem:b,selectedItemText:_,focusSelectedItem:w}=o,C=y.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&b&&_){const I=i.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),P=_.getBoundingClientRect();if(i.dir!=="rtl"){const Ae=P.left-A.left,Ce=N.left-Ae,he=I.left-Ce,ve=I.width+he,vt=Math.max(ve,A.width),lt=window.innerWidth-jn,Lt=e_(Ce,[jn,Math.max(jn,lt-vt)]);l.style.minWidth=ve+"px",l.style.left=Lt+"px"}else{const Ae=A.right-P.right,Ce=window.innerWidth-N.right-Ae,he=window.innerWidth-I.right-Ce,ve=I.width+he,vt=Math.max(ve,A.width),lt=window.innerWidth-jn,Lt=e_(Ce,[jn,Math.max(jn,lt-vt)]);l.style.minWidth=ve+"px",l.style.right=Lt+"px"}const D=m(),O=window.innerHeight-jn*2,j=p.scrollHeight,$=window.getComputedStyle(u),Y=parseInt($.borderTopWidth,10),J=parseInt($.paddingTop,10),se=parseInt($.borderBottomWidth,10),G=parseInt($.paddingBottom,10),W=Y+J+j+G+se,ie=Math.min(b.offsetHeight*5,W),ne=window.getComputedStyle(p),U=parseInt(ne.paddingTop,10),le=parseInt(ne.paddingBottom,10),_e=I.top+I.height/2-jn,je=O-_e,we=b.offsetHeight/2,ae=b.offsetTop+we,ge=Y+J+ae,xe=W-ge;if(ge<=_e){const Ae=D.length>0&&b===D[D.length-1].ref.current;l.style.bottom="0px";const Ce=u.clientHeight-p.offsetTop-p.offsetHeight,he=Math.max(je,we+(Ae?le:0)+Ce+se),ve=ge+he;l.style.height=ve+"px"}else{const Ae=D.length>0&&b===D[0].ref.current;l.style.top="0px";const he=Math.max(_e,Y+p.offsetTop+(Ae?U:0)+we)+xe;l.style.height=he+"px",p.scrollTop=ge-_e+p.offsetTop}l.style.margin=`${jn}px 0`,l.style.minHeight=ie+"px",l.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,l,u,p,b,_,i.dir,n]);Cr(()=>C(),[C]);const[R,L]=y.useState();Cr(()=>{u&&L(window.getComputedStyle(u).zIndex)},[u]);const V=y.useCallback(I=>{I&&x.current===!0&&(C(),w==null||w(),x.current=!1)},[C,w]);return a.jsx(Gz,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:V,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:a.jsx(qe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});jP.displayName=Uz;var qz="SelectPopperPosition",dv=y.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=jn,...i}=t,o=Xp(r);return a.jsx(Bw,{...o,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dv.displayName=qz;var[Gz,lb]=vc(pa,{}),hv="SelectViewport",MP=y.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=To(hv,r),o=lb(hv,r),l=ot(e,i.onViewportChange),c=y.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Kp.Slot,{scope:r,children:a.jsx(qe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const x=window.innerHeight-jn*2,p=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),_=Math.max(p,b);if(_<x){const w=_+g,C=Math.min(x,w),R=w-C;f.style.height=C+"px",f.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});MP.displayName=hv;var DP="SelectGroup",[$z,zz]=vc(DP),Wz=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ea();return a.jsx($z,{scope:r,id:s,children:a.jsx(qe.div,{role:"group","aria-labelledby":s,...n,ref:e})})});Wz.displayName=DP;var OP="SelectLabel",LP=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=zz(OP,r);return a.jsx(qe.div,{id:s.id,...n,ref:e})});LP.displayName=OP;var Um="SelectItem",[Qz,FP]=vc(Um),VP=y.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=t,l=_o(Um,r),c=To(Um,r),u=l.value===n,[h,f]=y.useState(i??""),[m,g]=y.useState(!1),x=ot(e,w=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,w,n,s)}),p=ea(),b=y.useRef("touch"),_=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(Qz,{scope:r,value:n,disabled:s,textId:p,isSelected:u,onItemTextChange:y.useCallback(w=>{f(C=>C||((w==null?void 0:w.textContent)??"").trim())},[]),children:a.jsx(Kp.ItemSlot,{scope:r,value:n,disabled:s,textValue:h,children:a.jsx(qe.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:x,onFocus:me(o.onFocus,()=>g(!0)),onBlur:me(o.onBlur,()=>g(!1)),onClick:me(o.onClick,()=>{b.current!=="mouse"&&_()}),onPointerUp:me(o.onPointerUp,()=>{b.current==="mouse"&&_()}),onPointerDown:me(o.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:me(o.onPointerMove,w=>{var C;b.current=w.pointerType,s?(C=c.onItemLeave)==null||C.call(c):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(o.onPointerLeave,w=>{var C;w.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:me(o.onKeyDown,w=>{var R;((R=c.searchRef)==null?void 0:R.current)!==""&&w.key===" "||(jz.includes(w.key)&&_(),w.key===" "&&w.preventDefault())})})})})});VP.displayName=Um;var eu="SelectItemText",BP=y.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,o=_o(eu,r),l=To(eu,r),c=FP(eu,r),u=Lz(eu,r),[h,f]=y.useState(null),m=ot(e,_=>f(_),c.onItemTextChange,_=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,_,c.value,c.disabled)}),g=h==null?void 0:h.textContent,x=y.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:p,onNativeOptionRemove:b}=u;return Cr(()=>(p(x),()=>b(x)),[p,b,x]),a.jsxs(a.Fragment,{children:[a.jsx(qe.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?va.createPortal(i.children,o.valueNode):null]})});BP.displayName=eu;var UP="SelectItemIndicator",qP=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return FP(UP,r).isSelected?a.jsx(qe.span,{"aria-hidden":!0,...n,ref:e}):null});qP.displayName=UP;var fv="SelectScrollUpButton",GP=y.forwardRef((t,e)=>{const r=To(fv,t.__scopeSelect),n=lb(fv,t.__scopeSelect),[s,i]=y.useState(!1),o=ot(e,n.onScrollButtonChange);return Cr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(zP,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});GP.displayName=fv;var mv="SelectScrollDownButton",$P=y.forwardRef((t,e)=>{const r=To(mv,t.__scopeSelect),n=lb(mv,t.__scopeSelect),[s,i]=y.useState(!1),o=ot(e,n.onScrollButtonChange);return Cr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(zP,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});$P.displayName=mv;var zP=y.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=To("SelectScrollButton",r),o=y.useRef(null),l=Jp(r),c=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),Cr(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(qe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:me(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:me(s.onPointerLeave,()=>{c()})})}),Hz="SelectSeparator",WP=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx(qe.div,{"aria-hidden":!0,...n,ref:e})});WP.displayName=Hz;var pv="SelectArrow",Yz=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Xp(r),i=_o(pv,r),o=To(pv,r);return i.open&&o.position==="popper"?a.jsx(Uw,{...s,...n,ref:e}):null});Yz.displayName=pv;function QP(t){return t===""||t===void 0}var HP=y.forwardRef((t,e)=>{const{value:r,...n}=t,s=y.useRef(null),i=ot(e,s),o=Pz(r);return y.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&h){const f=new Event("change",{bubbles:!0});h.call(l,r),l.dispatchEvent(f)}},[o,r]),a.jsx(vd,{asChild:!0,children:a.jsx("select",{...n,ref:i,defaultValue:r})})});HP.displayName="BubbleSelect";function YP(t){const e=Er(t),r=y.useRef(""),n=y.useRef(0),s=y.useCallback(o=>{const l=r.current+o;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=y.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function KP(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=Kz(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function Kz(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Jz=CP,JP=TP,Xz=SP,Zz=NP,eW=IP,XP=RP,tW=MP,ZP=LP,ek=VP,rW=BP,nW=qP,tk=GP,rk=$P,nk=WP;const sW=Jz,iW=Xz,sk=y.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(JP,{ref:n,className:rt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,a.jsx(Zz,{asChild:!0,children:a.jsx(Bu,{className:"h-4 w-4 opacity-50"})})]}));sk.displayName=JP.displayName;const ik=y.forwardRef(({className:t,...e},r)=>a.jsx(tk,{ref:r,className:rt("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(dm,{className:"h-4 w-4"})}));ik.displayName=tk.displayName;const ok=y.forwardRef(({className:t,...e},r)=>a.jsx(rk,{ref:r,className:rt("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(Bu,{className:"h-4 w-4"})}));ok.displayName=rk.displayName;const ak=y.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>a.jsx(eW,{children:a.jsxs(XP,{ref:s,className:rt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[a.jsx(ik,{}),a.jsx(tW,{className:rt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(ok,{})]})}));ak.displayName=XP.displayName;const oW=y.forwardRef(({className:t,...e},r)=>a.jsx(ZP,{ref:r,className:rt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));oW.displayName=ZP.displayName;const jf=y.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(ek,{ref:n,className:rt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(nW,{children:a.jsx(cS,{className:"h-4 w-4"})})}),a.jsx(rW,{children:e})]}));jf.displayName=ek.displayName;const aW=y.forwardRef(({className:t,...e},r)=>a.jsx(nk,{ref:r,className:rt("-mx-1 my-1 h-px bg-muted",t),...e}));aW.displayName=nk.displayName;const lW=()=>{const{user:t,loading:e,updateUserRole:r}=vs(),n=Yn(),[s,i]=y.useState([]),[o,l]=y.useState(!0),[c,u]=y.useState(null),[h,f]=y.useState(null),[m,g]=y.useState(null);if(y.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),y.useEffect(()=>{const w=async()=>{if(!(!t||t.role!=="super_admin"))try{const C=Ea(ht,"users"),R=Sd(C,ww("createdAt","desc")),L=await Ip(R),V=[];L.forEach(I=>{const A=I.data();V.push({id:I.id,name:A.name,email:A.email,role:A.role||"customer",purchases:A.purchases||0,createdAt:A.createdAt})}),i(V)}catch(C){console.error("Error loading users:",C),ct({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{l(!1)}};(t==null?void 0:t.role)==="super_admin"&&w()},[t]),e)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t||t.role!=="super_admin")return null;const x=async(w,C)=>{if(w===t.id){ct({title:"Cannot Update Own Role",description:"You cannot change your own role",variant:"destructive"});return}u(w);try{await r(w,C),ct({title:"Role Updated",description:"User role has been updated successfully!"}),i(R=>R.map(L=>L.id===w?{...L,role:C}:L))}catch(R){console.error("Error updating role:",R),ct({title:"Update Failed",description:"Failed to update user role. Please try again.",variant:"destructive"})}finally{u(null)}},p=async w=>{f(w);try{await cI(Yt(ht,"users",w)),i(C=>C.filter(R=>R.id!==w)),ct({title:"User Deleted",description:"The user has been deleted successfully."})}catch(C){console.error("Error deleting user:",C),ct({title:"Delete Failed",description:"Failed to delete user. Please try again.",variant:"destructive"})}finally{f(null),g(null)}},b=w=>{switch(w){case"super_admin":return a.jsx(py,{className:"w-4 h-4 text-yellow-500"});case"admin":return a.jsx(fS,{className:"w-4 h-4 text-blue-500"});case"customer":return a.jsx(Gl,{className:"w-4 h-4 text-gray-500"});default:return a.jsx(Gl,{className:"w-4 h-4 text-gray-500"})}},_=w=>{switch(w){case"super_admin":return"text-yellow-500 bg-yellow-500/10 border-yellow-500/20";case"admin":return"text-blue-500 bg-blue-500/10 border-blue-500/20";case"customer":return"text-gray-500 bg-gray-500/10 border-gray-500/20";default:return"text-gray-500 bg-gray-500/10 border-gray-500/20"}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:a.jsxs("div",{className:"p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xs,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(tc,{className:"w-6 h-6"})}),a.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"User Management"})]}),a.jsxs("div",{className:"flex items-center text-gray-400",children:[a.jsx(py,{className:"w-6 h-6 mr-2 text-yellow-500"}),a.jsx("span",{className:"text-sm",children:"Super Admin Panel"})]})]})}),a.jsx("div",{className:"flex-1 px-6 py-8",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Users"}),a.jsx("p",{className:"text-gray-400",children:"Update user roles and permissions"})]}),o?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white",children:"Loading users..."})]}):a.jsx("div",{className:"space-y-4",children:s.map(w=>a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[b(w.role),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-semibold",children:w.name}),a.jsx("p",{className:"text-gray-400 text-sm",children:w.email}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${_(w.role)}`,children:w.role.replace("_"," ").toUpperCase()}),a.jsxs("span",{className:"text-gray-500 text-xs",children:[w.purchases," purchases"]})]})]})]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[w.id!==t.id&&a.jsx(a.Fragment,{children:a.jsxs(sW,{value:w.role,onValueChange:C=>x(w.id,C),disabled:c===w.id,children:[a.jsx(sk,{className:"w-32 bg-gray-700 border-gray-600 text-white",children:a.jsx(iW,{})}),a.jsxs(ak,{className:"bg-gray-800 border-gray-700",children:[a.jsx(jf,{value:"customer",children:"Customer"}),a.jsx(jf,{value:"admin",children:"Admin"}),a.jsx(jf,{value:"super_admin",children:"Super Admin"})]})]})}),w.id===t.id&&a.jsx("span",{className:"text-gray-500 text-sm",children:"Current User"})]})]},w.id))}),s.length===0&&!o&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ls,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"No users found"})]})]})})})]}),m&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:a.jsxs("div",{className:"bg-gray-900 rounded-lg p-8 border border-red-700 shadow-xl w-full max-w-sm",children:[a.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Confirm Delete"}),a.jsxs("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold text-red-400",children:m.name}),"? This action cannot be undone."]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Pe,{variant:"ghost",onClick:()=>g(null),className:"text-gray-300 hover:text-white",children:"Cancel"}),a.jsx(Pe,{variant:"destructive",onClick:()=>p(m.id),disabled:h===m.id,children:h===m.id?"Deleting...":"Delete"})]})]})})]})},cW=()=>{const t=ti();return y.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};let lk=!0,ck=!0;function tu(t,e,r){const n=t.match(e);return n&&n.length>=r&&parseFloat(n[r],10)}function Aa(t,e,r){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype,s=n.addEventListener;n.addEventListener=function(o,l){if(o!==e)return s.apply(this,arguments);const c=u=>{const h=r(u);h&&(l.handleEvent?l.handleEvent(h):l(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,c),s.apply(this,[o,c])};const i=n.removeEventListener;n.removeEventListener=function(o,l){if(o!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(l))return i.apply(this,arguments);const c=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[o,c])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function uW(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(lk=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function dW(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(ck=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function uk(){if(typeof window=="object"){if(lk)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function cb(t,e){ck&&console.warn(t+" is deprecated, please use "+e+" instead.")}function hW(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=t;if(r.userAgentData&&r.userAgentData.brands){const n=r.userAgentData.brands.find(s=>s.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(r.mozGetUserMedia)e.browser="firefox",e.version=parseInt(tu(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(tu(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(tu(r.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=tu(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function t_(t){return Object.prototype.toString.call(t)==="[object Object]"}function dk(t){return t_(t)?Object.keys(t).reduce(function(e,r){const n=t_(t[r]),s=n?dk(t[r]):t[r],i=n&&!Object.keys(s).length;return s===void 0||i?e:Object.assign(e,{[r]:s})},{}):t}function gv(t,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?gv(t,t.get(e[n]),r):n.endsWith("Ids")&&e[n].forEach(s=>{gv(t,t.get(s),r)})}))}function r_(t,e,r){const n=r?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const i=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&i.push(o)}),i.forEach(o=>{t.forEach(l=>{l.type===n&&l.trackId===o.id&&gv(t,l,s)})}),s}const n_=uk;function hk(t,e){const r=t&&t.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const c={};return Object.keys(l).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const h=typeof l[u]=="object"?l[u]:{ideal:l[u]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const f=function(m,g){return m?m+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(h.ideal!==void 0){c.optional=c.optional||[];let m={};typeof h.ideal=="number"?(m[f("min",u)]=h.ideal,c.optional.push(m),m={},m[f("max",u)]=h.ideal,c.optional.push(m)):(m[f("",u)]=h.ideal,c.optional.push(m))}h.exact!==void 0&&typeof h.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[f("",u)]=h.exact):["min","max"].forEach(m=>{h[m]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[f(m,u)]=h[m])})}),l.advanced&&(c.optional=(c.optional||[]).concat(l.advanced)),c},s=function(l,c){if(e.version>=61)return c(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const u=function(h,f,m){f in h&&!(m in h)&&(h[m]=h[f],delete h[f])};l=JSON.parse(JSON.stringify(l)),u(l.audio,"autoGainControl","googAutoGainControl"),u(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let u=l.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const h=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete l.video.facingMode;let f;if(u.exact==="environment"||u.ideal==="environment"?f=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(f=["front"]),f)return r.mediaDevices.enumerateDevices().then(m=>{m=m.filter(x=>x.kind==="videoinput");let g=m.find(x=>f.some(p=>x.label.toLowerCase().includes(p)));return!g&&m.length&&f.includes("back")&&(g=m[m.length-1]),g&&(l.video.deviceId=u.exact?{exact:g.deviceId}:{ideal:g.deviceId}),l.video=n(l.video),n_("chrome: "+JSON.stringify(l)),c(l)})}l.video=n(l.video)}return n_("chrome: "+JSON.stringify(l)),c(l)},i=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,c,u){s(l,h=>{r.webkitGetUserMedia(h,c,f=>{u&&u(i(f))})})};if(r.getUserMedia=o.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(c){return s(c,u=>l(u).then(h=>{if(u.audio&&!h.getAudioTracks().length||u.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(i(h))))}}}function fk(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function mk(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.track.id):i={track:s.track};const o=new Event("track");o.track=s.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[n.stream],this.dispatchEvent(o)}),n.stream.getTracks().forEach(s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.id):i={track:s};const o=new Event("track");o.track=s,o.receiver=i,o.transceiver={receiver:i},o.streams=[n.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Aa(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function pk(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=s.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,c){let u=s.apply(this,arguments);return u||(u=e(this,l),this._senders.push(u)),u};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){i.apply(this,arguments);const c=this._senders.indexOf(l);c!==-1&&this._senders.splice(c,1)}}const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(o=>{const l=this._senders.find(c=>c.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function gk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>r_(o,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=r.apply(this,[]);return s.forEach(i=>i._pc=this),s}),Aa(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>r_(i,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const n=arguments[0];let s,i,o;return this.getSenders().forEach(l=>{l.track===n&&(s?o=!0:s=l)}),this.getReceivers().forEach(l=>(l.track===n&&(i?o=!0:i=l),l.track===n)),o||s&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function yk(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(c)===-1&&this._shimmedLocalStreams[l.id].push(c):this._shimmedLocalStreams[l.id]=[l,c],c};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(f=>f.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const c=this.getSenders().filter(u=>l.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],n.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const c=this._shimmedLocalStreams[l].indexOf(o);c!==-1&&this._shimmedLocalStreams[l].splice(c,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),s.apply(this,arguments)}}function vk(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return yk(t);const r=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const h=r.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(f=>this._reverseStreams[f.id])};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(f=>{if(this.getSenders().find(g=>g.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const f=new t.MediaStream(h.getTracks());this._streams[h.id]=f,this._reverseStreams[f.id]=h,h=f}n.apply(this,[h])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},t.RTCPeerConnection.prototype.addTrack=function(h,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const m=[].slice.call(arguments,1);if(m.length!==1||!m[0].getTracks().find(p=>p===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(p=>p.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[f.id];if(x)x.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const p=new t.MediaStream([h]);this._streams[f.id]=p,this._reverseStreams[p.id]=f,this.addStream(p)}return this.getSenders().find(p=>p.track===h)};function i(u,h){let f=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const g=u._reverseStreams[m],x=u._streams[g.id];f=f.replace(new RegExp(x.id,"g"),g.id)}),new RTCSessionDescription({type:h.type,sdp:f})}function o(u,h){let f=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const g=u._reverseStreams[m],x=u._streams[g.id];f=f.replace(new RegExp(g.id,"g"),x.id)}),new RTCSessionDescription({type:h.type,sdp:f})}["createOffer","createAnswer"].forEach(function(u){const h=t.RTCPeerConnection.prototype[u],f={[u](){const m=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[x=>{const p=i(this,x);m[0].apply(null,[p])},x=>{m[1]&&m[1].apply(null,x)},arguments[2]]):h.apply(this,arguments).then(x=>i(this,x))}};t.RTCPeerConnection.prototype[u]=f[u]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=c.get.apply(this);return u.type===""?u:i(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let m;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(p=>h.track===p)&&(m=this._streams[g])}),m&&(m.getTracks().length===1?this.removeStream(this._reverseStreams[m.id]):m.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function yv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=t.RTCPeerConnection.prototype[r],s={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=s[r]})}function xk(t,e){Aa(t,"negotiationneeded",r=>{const n=r.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const s_=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:xk,shimAddTrackRemoveTrack:vk,shimAddTrackRemoveTrackWithNative:yk,shimGetSendersWithDtmf:pk,shimGetUserMedia:hk,shimMediaStream:fk,shimOnTrack:mk,shimPeerConnection:yv,shimSenderReceiverGetStats:gk},Symbol.toStringTag,{value:"Module"}));function wk(t,e){const r=t&&t.navigator,n=t&&t.MediaStreamTrack;if(r.getUserMedia=function(s,i,o){cb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(s).then(i,o)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const s=function(o,l,c){l in o&&!(c in o)&&(o[c]=o[l],delete o[l])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o.audio,"autoGainControl","mozAutoGainControl"),s(o.audio,"noiseSuppression","mozNoiseSuppression")),i(o)},n&&n.prototype.getSettings){const o=n.prototype.getSettings;n.prototype.getSettings=function(){const l=o.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const o=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function fW(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}function bk(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function vv(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const i=t.RTCPeerConnection.prototype[s],o={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=o[s]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,o,l]=arguments;return n.apply(this,[i||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(u=>{u.type=r[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;c.forEach((h,f)=>{c.set(f,Object.assign({},h,{type:r[h.type]||h.type}))})}return c}).then(o,l)}}function Ek(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(i=>i._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Ck(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n}),Aa(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function _k(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){cb("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function Tk(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Ak(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const s=n.length>0;s&&n.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=e.apply(this,arguments);if(s){const{sender:o}=i,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n,o.sendEncodings=n,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function Sk(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function Nk(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Ik(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const i_=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Ak,shimCreateAnswer:Ik,shimCreateOffer:Nk,shimGetDisplayMedia:fW,shimGetParameters:Sk,shimGetUserMedia:wk,shimOnTrack:bk,shimPeerConnection:vv,shimRTCDataChannel:Tk,shimReceiverGetStats:Ck,shimRemoveStream:_k,shimSenderGetStats:Ek},Symbol.toStringTag,{value:"Module"}));function Rk(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(s=>e.call(this,s,n)),n.getVideoTracks().forEach(s=>e.call(this,s,n))},t.RTCPeerConnection.prototype.addTrack=function(n,...s){return s&&s.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const s=r.getTracks();this.getSenders().forEach(i=>{s.includes(i.track)&&this.removeTrack(i)})})}}function Pk(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,this.dispatchEvent(i)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(i=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(i)>=0)return;n._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,n.dispatchEvent(o)})}),e.apply(n,arguments)}}}function kk(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,r=e.createOffer,n=e.createAnswer,s=e.setLocalDescription,i=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,h){const f=arguments.length>=2?arguments[2]:arguments[0],m=r.apply(this,[f]);return h?(m.then(u,h),Promise.resolve()):m},e.createAnswer=function(u,h){const f=arguments.length>=2?arguments[2]:arguments[0],m=n.apply(this,[f]);return h?(m.then(u,h),Promise.resolve()):m};let l=function(c,u,h){const f=s.apply(this,[c]);return h?(f.then(u,h),Promise.resolve()):f};e.setLocalDescription=l,l=function(c,u,h){const f=i.apply(this,[c]);return h?(f.then(u,h),Promise.resolve()):f},e.setRemoteDescription=l,l=function(c,u,h){const f=o.apply(this,[c]);return h?(f.then(u,h),Promise.resolve()):f},e.addIceCandidate=l}function jk(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,n=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=s=>n(Mk(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(n,s,i){e.mediaDevices.getUserMedia(n).then(s,i)}).bind(e))}function Mk(t){return t&&t.video!==void 0?Object.assign({},t,{video:dk(t.video)}):t}function Dk(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,s){if(n&&n.iceServers){const i=[];for(let o=0;o<n.iceServers.length;o++){let l=n.iceServers[o];l.urls===void 0&&l.url?(cb("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,i.push(l)):i.push(n.iceServers[o])}n.iceServers=i}return new e(n,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Ok(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Lk(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Fk(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const o_=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Fk,shimCallbacksAPI:kk,shimConstraints:Mk,shimCreateOfferLegacy:Lk,shimGetUserMedia:jk,shimLocalStreamsAPI:Rk,shimRTCIceServerUrls:Dk,shimRemoteStreamsAPI:Pk,shimTrackEventTransceiver:Ok},Symbol.toStringTag,{value:"Module"}));var Vk={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(r){return r.split(`
m=`).map((s,i)=>(i>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(r){const n=e.splitSections(r);return n&&n[0]},e.getMediaSections=function(r){const n=e.splitSections(r);return n.shift(),n},e.matchPrefix=function(r,n){return e.splitLines(r).filter(s=>s.indexOf(n)===0)},e.parseCandidate=function(r){let n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");const s={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let i=8;i<n.length;i+=2)switch(n[i]){case"raddr":s.relatedAddress=n[i+1];break;case"rport":s.relatedPort=parseInt(n[i+1],10);break;case"tcptype":s.tcpType=n[i+1];break;case"ufrag":s.ufrag=n[i+1],s.usernameFragment=n[i+1];break;default:s[n[i]]===void 0&&(s[n[i]]=n[i+1]);break}return s},e.writeCandidate=function(r){const n=[];n.push(r.foundation);const s=r.component;s==="rtp"?n.push(1):s==="rtcp"?n.push(2):n.push(s),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);const i=r.type;return n.push("typ"),n.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let n=r.substring(9).split(" ");const s={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),s.name=n[0],s.clockRate=parseInt(n[1],10),s.channels=n.length===3?parseInt(n[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);const s=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(r){const n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const n={};let s;const i=r.substring(r.indexOf(" ")+1).split(";");for(let o=0;o<i.length;o++)s=i[o].trim().split("="),n[s[0].trim()]=s[1];return n},e.writeFmtp=function(r){let n="",s=r.payloadType;if(r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const i=[];Object.keys(r.parameters).forEach(o=>{r.parameters[o]!==void 0?i.push(o+"="+r.parameters[o]):i.push(o)}),n+="a=fmtp:"+s+" "+i.join(";")+`\r
`}return n},e.parseRtcpFb=function(r){const n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(r){let n="",s=r.payloadType;return r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(i=>{n+="a=rtcp-fb:"+s+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(r){const n=r.indexOf(" "),s={ssrc:parseInt(r.substring(7,n),10)},i=r.indexOf(":",n);return i>-1?(s.attribute=r.substring(n+1,i),s.value=r.substring(i+1)):s.attribute=r.substring(n+1),s},e.parseSsrcGroup=function(r){const n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(s=>parseInt(s,10))}},e.getMid=function(r){const n=e.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(r){const n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:e.matchPrefix(r+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,n){let s="a=setup:"+n+`\r
`;return r.fingerprints.forEach(i=>{s+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),s},e.parseCryptoLine=function(r){const n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,n){return e.matchPrefix(r+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,n){const s=e.matchPrefix(r+n,"a=ice-ufrag:")[0],i=e.matchPrefix(r+n,"a=ice-pwd:")[0];return s&&i?{usernameFragment:s.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(r){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(r)[0].split(" ");n.profile=i[2];for(let l=3;l<i.length;l++){const c=i[l],u=e.matchPrefix(r,"a=rtpmap:"+c+" ")[0];if(u){const h=e.parseRtpMap(u),f=e.matchPrefix(r,"a=fmtp:"+c+" ");switch(h.parameters=f.length?e.parseFmtp(f[0]):{},h.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),n.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(h.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(l=>{n.headerExtensions.push(e.parseExtmap(l))});const o=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(l=>{o.forEach(c=>{l.rtcpFeedback.find(h=>h.type===c.type&&h.parameter===c.parameter)||l.rtcpFeedback.push(c)})}),n},e.writeRtpDescription=function(r,n){let s="";s+="m="+r+" ",s+=n.codecs.length>0?"9":"0",s+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=n.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(o=>{s+=e.writeRtpMap(o),s+=e.writeFmtp(o),s+=e.writeRtcpFb(o)});let i=0;return n.codecs.forEach(o=>{o.maxptime>i&&(i=o.maxptime)}),i>0&&(s+="a=maxptime:"+i+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(o=>{s+=e.writeExtmap(o)}),s},e.parseRtpEncodingParameters=function(r){const n=[],s=e.parseRtpParameters(r),i=s.fecMechanisms.indexOf("RED")!==-1,o=s.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(r,"a=ssrc:").map(m=>e.parseSsrcMedia(m)).filter(m=>m.attribute==="cname"),c=l.length>0&&l[0].ssrc;let u;const h=e.matchPrefix(r,"a=ssrc-group:FID").map(m=>m.substring(17).split(" ").map(x=>parseInt(x,10)));h.length>0&&h[0].length>1&&h[0][0]===c&&(u=h[0][1]),s.codecs.forEach(m=>{if(m.name.toUpperCase()==="RTX"&&m.parameters.apt){let g={ssrc:c,codecPayloadType:parseInt(m.parameters.apt,10)};c&&u&&(g.rtx={ssrc:u}),n.push(g),i&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},n.push(g))}}),n.length===0&&c&&n.push({ssrc:c});let f=e.matchPrefix(r,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,n.forEach(m=>{m.maxBitrate=f})),n},e.parseRtcpParameters=function(r){const n={},s=e.matchPrefix(r,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];s&&(n.cname=s.value,n.ssrc=s.ssrc);const i=e.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=i.length===0;const o=e.matchPrefix(r,"a=rtcp-mux");return n.mux=o.length>0,n},e.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},e.parseMsid=function(r){let n;const s=e.matchPrefix(r,"a=msid:");if(s.length===1)return n=s[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=e.matchPrefix(r,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(i.length>0)return n=i[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(r){const n=e.parseMLine(r),s=e.matchPrefix(r,"a=max-message-size:");let i;s.length>0&&(i=parseInt(s[0].substring(19),10)),isNaN(i)&&(i=65536);const o=e.matchPrefix(r,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const l=e.matchPrefix(r,"a=sctpmap:");if(l.length>0){const c=l[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:i}}},e.writeSctpDescription=function(r,n){let s=[];return r.protocol!=="DTLS/SCTP"?s=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:s=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&s.push("a=max-message-size:"+n.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,n,s){let i;const o=n!==void 0?n:2;return r?i=r:i=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+i+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,n){const s=e.splitLines(r);for(let i=0;i<s.length;i++)switch(s[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[i].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const s=e.splitLines(r)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(r){const s=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const n=e.splitLines(r);for(let s=0;s<n.length;s++)if(n[s].length<2||n[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(Vk);var Bk=Vk.exports;const Tl=Tv(Bk),mW=w_({__proto__:null,default:Tl},[Bk]);function Mf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const s=new e(n),i=Tl.parseCandidate(n.candidate);for(const o in i)o in s||Object.defineProperty(s,o,{value:i[o]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(n)},t.RTCIceCandidate.prototype=e.prototype,Aa(t,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"}),r))}function xv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Aa(t,"icecandidate",e=>{if(e.candidate){const r=Tl.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function Df(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const c=Tl.splitSections(l.sdp);return c.shift(),c.some(u=>{const h=Tl.parseMLine(u);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},n=function(l){const c=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const u=parseInt(c[1],10);return u!==u?-1:u},s=function(l){let c=65536;return e.browser==="firefox"&&(e.version<57?l===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},i=function(l,c){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const h=Tl.matchPrefix(l.sdp,"a=max-message-size:");return h.length>0?u=parseInt(h[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(u=2147483637),u},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const c=n(arguments[0]),u=s(c),h=i(arguments[0],c);let f;u===0&&h===0?f=Number.POSITIVE_INFINITY:u===0||h===0?f=Math.max(u,h):f=Math.min(u,h);const m={};Object.defineProperty(m,"maxMessageSize",{get(){return f}}),this._sctp=m}return o.apply(this,arguments)}}function Of(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(n,s){const i=n.send;n.send=function(){const l=arguments[0],c=l.length||l.size||l.byteLength;if(n.readyState==="open"&&s.sctp&&c>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return i.apply(n,arguments)}}const r=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=r.apply(this,arguments);return e(s,this),s},Aa(t,"datachannel",n=>(e(n.channel,n.target),n))}function wv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const i=s.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const o=new Event("connectionstatechange",s);i.dispatchEvent(o)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function bv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=s.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:i}):s.sdp=i}return r.apply(this,arguments)}}function Lf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ff(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return r.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?r.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>r.apply(this,[o]))})}const pW=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:bv,shimAddIceCandidateNullOrEmpty:Lf,shimConnectionState:wv,shimMaxMessageSize:Df,shimParameterlessSetLocalDescription:Ff,shimRTCIceCandidate:Mf,shimRTCIceCandidateRelayProtocol:xv,shimSendThrowTypeError:Of},Symbol.toStringTag,{value:"Module"}));function gW({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=uk,n=hW(t),s={browserDetails:n,commonShim:pW,extractVersion:tu,disableLog:uW,disableWarnings:dW,sdp:mW};switch(n.browser){case"chrome":if(!s_||!yv||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),s;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),s;r("adapter.js shimming chrome."),s.browserShim=s_,Lf(t,n),Ff(t),hk(t,n),fk(t),yv(t,n),mk(t),vk(t,n),pk(t),gk(t),xk(t,n),Mf(t),xv(t),wv(t),Df(t,n),Of(t),bv(t,n);break;case"firefox":if(!i_||!vv||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),s;r("adapter.js shimming firefox."),s.browserShim=i_,Lf(t,n),Ff(t),wk(t,n),vv(t,n),bk(t),_k(t),Ek(t),Ck(t),Tk(t),Ak(t),Sk(t),Nk(t),Ik(t),Mf(t),wv(t),Df(t,n),Of(t);break;case"safari":if(!o_||!e.shimSafari)return r("Safari shim is not included in this adapter release."),s;r("adapter.js shimming safari."),s.browserShim=o_,Lf(t,n),Ff(t),Dk(t),Lk(t),kk(t),Rk(t),Pk(t),Ok(t),jk(t),Fk(t),Mf(t),xv(t),Df(t,n),Of(t),bv(t,n);break;default:r("Unsupported browser!");break}return s}gW({window:typeof window>"u"?void 0:window});var Uk=t=>{throw TypeError(t)},qk=(t,e,r)=>e.has(t)||Uk("Cannot "+r),yW=(t,e,r)=>(qk(t,e,"read from private field"),r?r.call(t):e.get(t)),vW=(t,e,r)=>e.has(t)?Uk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),xW=(t,e,r,n)=>(qk(t,e,"write to private field"),e.set(t,r),r);const Zp=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],eg=Zp.map(([t])=>t),wW=eg.filter((t,e)=>Zp[e][1]==="L"),bW=eg.filter((t,e)=>Zp[e][1]==="M");function Ev(t){switch(t){case"Linear-Codes":return wW.reduce((e,r)=>e|Ev(r),0);case"Matrix-Codes":return bW.reduce((e,r)=>e|Ev(r),0);case"Any":return(1<<Zp.length)-1;case"None":return 0;default:return 1<<eg.indexOf(t)}}function EW(t){if(t===0)return"None";const e=31-Math.clz32(t);return eg[e]}function CW(t){return t.reduce((e,r)=>e|Ev(r),0)}const _W=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function TW(t){return _W.indexOf(t)}const a_=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function AW(t){return t==="UnicodeBig"?a_.indexOf("UTF16BE"):a_.indexOf(t)}const SW=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function NW(t){return SW[t]}const IW=["Ignore","Read","Require"];function RW(t){return IW.indexOf(t)}const PW=["Plain","ECI","HRI","Hex","Escaped"];function kW(t){return PW.indexOf(t)}const qm={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function l_(t){return{...t,formats:CW(t.formats),binarizer:TW(t.binarizer),eanAddOnSymbol:RW(t.eanAddOnSymbol),textMode:kW(t.textMode),characterSet:AW(t.characterSet)}}function jW(t){return{...t,format:EW(t.format),contentType:NW(t.contentType),eccLevel:t.ecLevel}}const MW={locateFile:(t,e)=>{const r=t.match(/_(.+?)\.wasm$/);return r?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.1.2/dist/${r[1]}/${t}`:e+t}},y0=new WeakMap;function DW(t,e){return Object.is(t,e)||Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>Object.prototype.hasOwnProperty.call(e,r)&&t[r]===e[r])}function Gk(t,{overrides:e,equalityFn:r=DW,fireImmediately:n=!1}={}){var s;const[i,o]=(s=y0.get(t))!=null?s:[MW],l=e??i;let c;if(n){if(o&&(c=r(i,l)))return o;const u=t({...l});return y0.set(t,[l,u]),u}(c??r(i,l))||y0.set(t,[l])}async function OW(t,e,r=qm){const n={...qm,...r},s=await Gk(t,{fireImmediately:!0});let i,o;if("width"in e&&"height"in e&&"data"in e){const{data:c,data:{byteLength:u},width:h,height:f}=e;o=s._malloc(u),s.HEAPU8.set(c,o),i=s.readBarcodesFromPixmap(o,h,f,l_(n))}else{let c,u;if("buffer"in e)[c,u]=[e.byteLength,e];else if("byteLength"in e)[c,u]=[e.byteLength,new Uint8Array(e)];else if("size"in e)[c,u]=[e.size,new Uint8Array(await e.arrayBuffer())];else throw new TypeError("Invalid input type");o=s._malloc(c),s.HEAPU8.set(u,o),i=s.readBarcodesFromImage(o,c,l_(n))}s._free(o);const l=[];for(let c=0;c<i.size();++c)l.push(jW(i.get(c)));return l}({...qm,formats:[...qm.formats]});var $k=async function(t={}){var e,r=t,n,s,i=new Promise((T,E)=>{n=T,s=E}),o=typeof window=="object",l=typeof Bun<"u",c=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var u="./this.program",h="";function f(T){return r.locateFile?r.locateFile(T,h):h+T}var m,g;(o||c||l)&&(c?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),h.startsWith("blob:")?h="":h=h.slice(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1),c&&(g=T=>{var E=new XMLHttpRequest;return E.open("GET",T,!1),E.responseType="arraybuffer",E.send(null),new Uint8Array(E.response)}),m=async T=>{var E=await fetch(T,{credentials:"same-origin"});if(E.ok)return E.arrayBuffer();throw new Error(E.status+" : "+E.url)});var x=console.log.bind(console),p=console.error.bind(console),b,_,w=!1,C,R,L,V,I,A,N,P;function D(){var T=_.buffer;C=new Int8Array(T),L=new Int16Array(T),r.HEAPU8=R=new Uint8Array(T),V=new Uint16Array(T),I=new Int32Array(T),A=new Uint32Array(T),N=new Float32Array(T),P=new Float64Array(T)}function O(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Ce(r.preRun.shift());ge(Ae)}function j(){v.ya()}function $(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)be(r.postRun.shift());ge(xe)}var Y=0,J=null;function se(T){var E;Y++,(E=r.monitorRunDependencies)===null||E===void 0||E.call(r,Y)}function G(T){var E;if(Y--,(E=r.monitorRunDependencies)===null||E===void 0||E.call(r,Y),Y==0&&J){var k=J;J=null,k()}}function W(T){var E;(E=r.onAbort)===null||E===void 0||E.call(r,T),T="Aborted("+T+")",p(T),w=!0,T+=". Build with -sASSERTIONS for more info.";var k=new WebAssembly.RuntimeError(T);throw s(k),k}var ie;function ne(){return f("zxing_reader.wasm")}function U(T){if(T==ie&&b)return new Uint8Array(b);if(g)return g(T);throw"both async and sync fetching of the wasm failed"}async function le(T){if(!b)try{var E=await m(T);return new Uint8Array(E)}catch{}return U(T)}async function _e(T,E){try{var k=await le(T),F=await WebAssembly.instantiate(k,E);return F}catch(B){p(`failed to asynchronously prepare wasm: ${B}`),W(B)}}async function je(T,E,k){if(!T&&typeof WebAssembly.instantiateStreaming=="function")try{var F=fetch(E,{credentials:"same-origin"}),B=await WebAssembly.instantiateStreaming(F,k);return B}catch(q){p(`wasm streaming compile failed: ${q}`),p("falling back to ArrayBuffer instantiation")}return _e(E,k)}function we(){return{a:d}}async function ae(){function T(q,H){return v=q.exports,_=v.xa,D(),ka=v.Ba,G(),v}se();function E(q){return T(q.instance)}var k=we();if(r.instantiateWasm)return new Promise((q,H)=>{r.instantiateWasm(k,(Q,oe)=>{q(T(Q))})});ie!=null||(ie=ne());try{var F=await je(b,ie,k),B=E(F);return B}catch(q){return s(q),Promise.reject(q)}}var ge=T=>{for(;T.length>0;)T.shift()(r)},xe=[],be=T=>xe.push(T),Ae=[],Ce=T=>Ae.push(T),he=T=>$t(T),ve=()=>Qe(),vt=[],lt=0,Lt=T=>{var E=new ur(T);return E.get_caught()||(E.set_caught(!0),lt--),E.set_rethrown(!1),vt.push(E),Xt(T),X(T)},Ze=0,xt=()=>{Z(0,0);var T=vt.pop();Jt(T.excPtr),Ze=0};class ur{constructor(E){this.excPtr=E,this.ptr=E-24}set_type(E){A[this.ptr+4>>2]=E}get_type(){return A[this.ptr+4>>2]}set_destructor(E){A[this.ptr+8>>2]=E}get_destructor(){return A[this.ptr+8>>2]}set_caught(E){E=E?1:0,C[this.ptr+12]=E}get_caught(){return C[this.ptr+12]!=0}set_rethrown(E){E=E?1:0,C[this.ptr+13]=E}get_rethrown(){return C[this.ptr+13]!=0}init(E,k){this.set_adjusted_ptr(0),this.set_type(E),this.set_destructor(k)}set_adjusted_ptr(E){A[this.ptr+16>>2]=E}get_adjusted_ptr(){return A[this.ptr+16>>2]}}var _n=T=>nt(T),xs=T=>{var E=Ze;if(!E)return _n(0),0;var k=new ur(E);k.set_adjusted_ptr(E);var F=k.get_type();if(!F)return _n(0),E;for(var B of T){if(B===0||B===F)break;var q=k.ptr+16;if(di(B,F,q))return _n(B),E}return _n(F),E},un=()=>xs([]),ws=T=>xs([T]),Ao=(T,E)=>xs([T,E]),Nt=()=>{var T=vt.pop();T||W("no exception to throw");var E=T.excPtr;throw T.get_rethrown()||(vt.push(T),T.set_rethrown(!0),T.set_caught(!1),lt++),Ze=E,Ze},wt=(T,E,k)=>{var F=new ur(T);throw F.init(E,k),Ze=T,lt++,Ze},bs=()=>lt,Tn=T=>{throw Ze||(Ze=T),Ze},So=()=>W(""),ri={},dn=T=>{for(;T.length;){var E=T.pop(),k=T.pop();k(E)}};function An(T){return this.fromWireType(A[T>>2])}var Sn={},Tr={},Ar={},xc=r.InternalError=class extends Error{constructor(T){super(T),this.name="InternalError"}},Se=T=>{throw new xc(T)},Ge=(T,E,k)=>{T.forEach(Q=>Ar[Q]=E);function F(Q){var oe=k(Q);oe.length!==T.length&&Se("Mismatched type converter count");for(var ue=0;ue<T.length;++ue)hr(T[ue],oe[ue])}var B=new Array(E.length),q=[],H=0;E.forEach((Q,oe)=>{Tr.hasOwnProperty(Q)?B[oe]=Tr[Q]:(q.push(Q),Sn.hasOwnProperty(Q)||(Sn[Q]=[]),Sn[Q].push(()=>{B[oe]=Tr[Q],++H,H===q.length&&F(B)}))}),q.length===0&&F(B)},Je=T=>{var E=ri[T];delete ri[T];var k=E.rawConstructor,F=E.rawDestructor,B=E.fields,q=B.map(H=>H.getterReturnType).concat(B.map(H=>H.setterArgumentType));Ge([T],q,H=>{var Q={};return B.forEach((oe,ue)=>{var de=oe.fieldName,Te=H[ue],Ye=H[ue].optional,Xe=oe.getter,Et=oe.getterContext,zt=H[ue+B.length],Ft=oe.setter,Zt=oe.setterContext;Q[de]={read:Rs=>Te.fromWireType(Xe(Et,Rs)),write:(Rs,Fr)=>{var fn=[];Ft(Zt,Rs,zt.toWireType(fn,Fr)),dn(fn)},optional:Ye}}),[{name:E.name,fromWireType:oe=>{var ue={};for(var de in Q)ue[de]=Q[de].read(oe);return F(oe),ue},toWireType:(oe,ue)=>{for(var de in Q)if(!(de in ue)&&!Q[de].optional)throw new TypeError(`Missing field: "${de}"`);var Te=k();for(de in Q)Q[de].write(Te,ue[de]);return oe!==null&&oe.push(F,Te),Te},argPackAdvance:hn,readValueFromPointer:An,destructorFunction:F}]})},Kt=(T,E,k,F,B)=>{},dr=()=>{for(var T=new Array(256),E=0;E<256;++E)T[E]=String.fromCharCode(E);Nn=T},Nn,ft=T=>{for(var E="",k=T;R[k];)E+=Nn[R[k++]];return E},ni=r.BindingError=class extends Error{constructor(T){super(T),this.name="BindingError"}},We=T=>{throw new ni(T)};function Ld(T,E){let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var F=E.name;if(T||We(`type "${F}" must have a positive integer typeid pointer`),Tr.hasOwnProperty(T)){if(k.ignoreDuplicateRegistrations)return;We(`Cannot register type '${F}' twice`)}if(Tr[T]=E,delete Ar[T],Sn.hasOwnProperty(T)){var B=Sn[T];delete Sn[T],B.forEach(q=>q())}}function hr(T,E){let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Ld(T,E,k)}var hn=8,nr=(T,E,k,F)=>{E=ft(E),hr(T,{name:E,fromWireType:function(B){return!!B},toWireType:function(B,q){return q?k:F},argPackAdvance:hn,readValueFromPointer:function(B){return this.fromWireType(R[B])},destructorFunction:null})},Fd=T=>({count:T.count,deleteScheduled:T.deleteScheduled,preservePointerOnDelete:T.preservePointerOnDelete,ptr:T.ptr,ptrType:T.ptrType,smartPtr:T.smartPtr,smartPtrType:T.smartPtrType}),Es=T=>{function E(k){return k.$$.ptrType.registeredClass.name}We(E(T)+" instance already deleted")},Cs=!1,Vd=T=>{},tg=T=>{T.smartPtr?T.smartPtrType.rawDestructor(T.smartPtr):T.ptrType.registeredClass.rawDestructor(T.ptr)},_s=T=>{T.count.value-=1;var E=T.count.value===0;E&&tg(T)},No=T=>typeof FinalizationRegistry>"u"?(No=E=>E,T):(Cs=new FinalizationRegistry(E=>{_s(E.$$)}),No=E=>{var k=E.$$,F=!!k.smartPtr;if(F){var B={$$:k};Cs.register(E,B,E)}return E},Vd=E=>Cs.unregister(E),No(T)),rg=()=>{let T=Ts.prototype;Object.assign(T,{isAliasOf(k){if(!(this instanceof Ts)||!(k instanceof Ts))return!1;var F=this.$$.ptrType.registeredClass,B=this.$$.ptr;k.$$=k.$$;for(var q=k.$$.ptrType.registeredClass,H=k.$$.ptr;F.baseClass;)B=F.upcast(B),F=F.baseClass;for(;q.baseClass;)H=q.upcast(H),q=q.baseClass;return F===q&&B===H},clone(){if(this.$$.ptr||Es(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var k=No(Object.create(Object.getPrototypeOf(this),{$$:{value:Fd(this.$$)}}));return k.$$.count.value+=1,k.$$.deleteScheduled=!1,k},delete(){this.$$.ptr||Es(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&We("Object already scheduled for deletion"),Vd(this),_s(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Es(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&We("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const E=Symbol.dispose;E&&(T[E]=T.delete)};function Ts(){}var Sa=(T,E)=>Object.defineProperty(E,"name",{value:T}),Na={},Io=(T,E,k)=>{if(T[E].overloadTable===void 0){var F=T[E];T[E]=function(){for(var B=arguments.length,q=new Array(B),H=0;H<B;H++)q[H]=arguments[H];return T[E].overloadTable.hasOwnProperty(q.length)||We(`Function '${k}' called with an invalid number of arguments (${q.length}) - expects one of (${T[E].overloadTable})!`),T[E].overloadTable[q.length].apply(this,q)},T[E].overloadTable=[],T[E].overloadTable[F.argCount]=F}},In=(T,E,k)=>{r.hasOwnProperty(T)?((k===void 0||r[T].overloadTable!==void 0&&r[T].overloadTable[k]!==void 0)&&We(`Cannot register public name '${T}' twice`),Io(r,T,T),r[T].overloadTable.hasOwnProperty(k)&&We(`Cannot register multiple overloads of a function with the same number of arguments (${k})!`),r[T].overloadTable[k]=E):(r[T]=E,r[T].argCount=k)},Bd=48,Ud=57,wc=T=>{T=T.replace(/[^a-zA-Z0-9_]/g,"$");var E=T.charCodeAt(0);return E>=Bd&&E<=Ud?`_${T}`:T};function bc(T,E,k,F,B,q,H,Q){this.name=T,this.constructor=E,this.instancePrototype=k,this.rawDestructor=F,this.baseClass=B,this.getActualType=q,this.upcast=H,this.downcast=Q,this.pureVirtualFunctions=[]}var Ia=(T,E,k)=>{for(;E!==k;)E.upcast||We(`Expected null or instance of ${k.name}, got an instance of ${E.name}`),T=E.upcast(T),E=E.baseClass;return T};function qd(T,E){if(E===null)return this.isReference&&We(`null is not a valid ${this.name}`),0;E.$$||We(`Cannot pass "${embindRepr(E)}" as a ${this.name}`),E.$$.ptr||We(`Cannot pass deleted object as a pointer of type ${this.name}`);var k=E.$$.ptrType.registeredClass,F=Ia(E.$$.ptr,k,this.registeredClass);return F}function ng(T,E){var k;if(E===null)return this.isReference&&We(`null is not a valid ${this.name}`),this.isSmartPointer?(k=this.rawConstructor(),T!==null&&T.push(this.rawDestructor,k),k):0;(!E||!E.$$)&&We(`Cannot pass "${embindRepr(E)}" as a ${this.name}`),E.$$.ptr||We(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&E.$$.ptrType.isConst&&We(`Cannot convert argument of type ${E.$$.smartPtrType?E.$$.smartPtrType.name:E.$$.ptrType.name} to parameter type ${this.name}`);var F=E.$$.ptrType.registeredClass;if(k=Ia(E.$$.ptr,F,this.registeredClass),this.isSmartPointer)switch(E.$$.smartPtr===void 0&&We("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:E.$$.smartPtrType===this?k=E.$$.smartPtr:We(`Cannot convert argument of type ${E.$$.smartPtrType?E.$$.smartPtrType.name:E.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:k=E.$$.smartPtr;break;case 2:if(E.$$.smartPtrType===this)k=E.$$.smartPtr;else{var B=E.clone();k=this.rawShare(k,Rn.toHandle(()=>B.delete())),T!==null&&T.push(this.rawDestructor,k)}break;default:We("Unsupporting sharing policy")}return k}function Ra(T,E){if(E===null)return this.isReference&&We(`null is not a valid ${this.name}`),0;E.$$||We(`Cannot pass "${embindRepr(E)}" as a ${this.name}`),E.$$.ptr||We(`Cannot pass deleted object as a pointer of type ${this.name}`),E.$$.ptrType.isConst&&We(`Cannot convert argument of type ${E.$$.ptrType.name} to parameter type ${this.name}`);var k=E.$$.ptrType.registeredClass,F=Ia(E.$$.ptr,k,this.registeredClass);return F}var Ec=(T,E,k)=>{if(E===k)return T;if(k.baseClass===void 0)return null;var F=Ec(T,E,k.baseClass);return F===null?null:k.downcast(F)},Cc={},Ro=(T,E)=>{for(E===void 0&&We("ptr should not be undefined");T.baseClass;)E=T.upcast(E),T=T.baseClass;return E},As=(T,E)=>(E=Ro(T,E),Cc[E]),si=(T,E)=>{(!E.ptrType||!E.ptr)&&Se("makeClassHandle requires ptr and ptrType");var k=!!E.smartPtrType,F=!!E.smartPtr;return k!==F&&Se("Both smartPtrType and smartPtr must be specified"),E.count={value:1},No(Object.create(T,{$$:{value:E,writable:!0}}))};function sg(T){var E=this.getPointee(T);if(!E)return this.destructor(T),null;var k=As(this.registeredClass,E);if(k!==void 0){if(k.$$.count.value===0)return k.$$.ptr=E,k.$$.smartPtr=T,k.clone();var F=k.clone();return this.destructor(T),F}function B(){return this.isSmartPointer?si(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:E,smartPtrType:this,smartPtr:T}):si(this.registeredClass.instancePrototype,{ptrType:this,ptr:T})}var q=this.registeredClass.getActualType(E),H=Na[q];if(!H)return B.call(this);var Q;this.isConst?Q=H.constPointerType:Q=H.pointerType;var oe=Ec(E,this.registeredClass,Q.registeredClass);return oe===null?B.call(this):this.isSmartPointer?si(Q.registeredClass.instancePrototype,{ptrType:Q,ptr:oe,smartPtrType:this,smartPtr:T}):si(Q.registeredClass.instancePrototype,{ptrType:Q,ptr:oe})}var Gd=()=>{Object.assign(Po.prototype,{getPointee(T){return this.rawGetPointee&&(T=this.rawGetPointee(T)),T},destructor(T){var E;(E=this.rawDestructor)===null||E===void 0||E.call(this,T)},argPackAdvance:hn,readValueFromPointer:An,fromWireType:sg})};function Po(T,E,k,F,B,q,H,Q,oe,ue,de){this.name=T,this.registeredClass=E,this.isReference=k,this.isConst=F,this.isSmartPointer=B,this.pointeeType=q,this.sharingPolicy=H,this.rawGetPointee=Q,this.rawConstructor=oe,this.rawShare=ue,this.rawDestructor=de,!B&&E.baseClass===void 0?F?(this.toWireType=qd,this.destructorFunction=null):(this.toWireType=Ra,this.destructorFunction=null):this.toWireType=ng}var _c=(T,E,k)=>{r.hasOwnProperty(T)||Se("Replacing nonexistent public symbol"),r[T].overloadTable!==void 0&&k!==void 0?r[T].overloadTable[k]=E:(r[T]=E,r[T].argCount=k)},Pa=[],ka,Ve=T=>{var E=Pa[T];return E||(Pa[T]=E=ka.get(T)),E},$d=function(T,E){let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(T.includes("j"))return dynCallLegacy(T,E,k);var F=Ve(E),B=F(...k);return B},ig=function(T,E){let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var F=arguments.length,B=new Array(F),q=0;q<F;q++)B[q]=arguments[q];return $d(T,E,B,k)}},Wr=function(T,E){T=ft(T);function k(){if(T.includes("j"))return ig(T,E);var B=Ve(E);return B}var F=k();return typeof F!="function"&&We(`unknown function pointer with signature ${T}: ${E}`),F};class zd extends Error{}var Tc=T=>{var E=S(T),k=ft(E);return M(E),k},ja=(T,E)=>{var k=[],F={};function B(q){if(!F[q]&&!Tr[q]){if(Ar[q]){Ar[q].forEach(B);return}k.push(q),F[q]=!0}}throw E.forEach(B),new zd(`${T}: `+k.map(Tc).join([", "]))},Ss=(T,E,k,F,B,q,H,Q,oe,ue,de,Te,Ye)=>{de=ft(de),q=Wr(B,q),Q&&(Q=Wr(H,Q)),ue&&(ue=Wr(oe,ue)),Ye=Wr(Te,Ye);var Xe=wc(de);In(Xe,function(){ja(`Cannot construct ${de} due to unbound types`,[F])}),Ge([T,E,k],F?[F]:[],Et=>{Et=Et[0];var zt,Ft;F?(zt=Et.registeredClass,Ft=zt.instancePrototype):Ft=Ts.prototype;var Zt=Sa(de,function(){if(Object.getPrototypeOf(this)!==Rs)throw new ni(`Use 'new' to construct ${de}`);if(Fr.constructor_body===void 0)throw new ni(`${de} has no accessible constructor`);for(var hb=arguments.length,xh=new Array(hb),wh=0;wh<hb;wh++)xh[wh]=arguments[wh];var fb=Fr.constructor_body[xh.length];if(fb===void 0)throw new ni(`Tried to invoke ctor of ${de} with invalid number of parameters (${xh.length}) - expected (${Object.keys(Fr.constructor_body).toString()}) parameters instead!`);return fb.apply(this,xh)}),Rs=Object.create(Ft,{constructor:{value:Zt}});Zt.prototype=Rs;var Fr=new bc(de,Zt,Rs,Ye,zt,q,Q,ue);if(Fr.baseClass){var fn,vh;(vh=(fn=Fr.baseClass).__derivedClasses)!==null&&vh!==void 0||(fn.__derivedClasses=[]),Fr.baseClass.__derivedClasses.push(Fr)}var Fj=new Po(de,Fr,!0,!1,!1),ub=new Po(de+"*",Fr,!1,!1,!1),db=new Po(de+" const*",Fr,!1,!0,!1);return Na[T]={pointerType:ub,constPointerType:db},_c(Xe,Zt),[Fj,ub,db]})},Qr=(T,E)=>{for(var k=[],F=0;F<T;F++)k.push(A[E+F*4>>2]);return k};function Ma(T){for(var E=1;E<T.length;++E)if(T[E]!==null&&T[E].destructorFunction===void 0)return!0;return!1}function ii(T,E,k,F,B,q){var H=E.length;H<2&&We("argTypes array size mismatch! Must at least get return value and 'this' types!");var Q=E[1]!==null&&k!==null,oe=Ma(E),ue=E[0].name!=="void",de=H-2,Te=new Array(de),Ye=[],Xe=[],Et=function(){Xe.length=0;var zt;Ye.length=Q?2:1,Ye[0]=B,Q&&(zt=E[1].toWireType(Xe,this),Ye[1]=zt);for(var Ft=0;Ft<de;++Ft)Te[Ft]=E[Ft+2].toWireType(Xe,Ft<0||arguments.length<=Ft?void 0:arguments[Ft]),Ye.push(Te[Ft]);var Zt=F(...Ye);function Rs(Fr){if(oe)dn(Xe);else for(var fn=Q?1:2;fn<E.length;fn++){var vh=fn===1?zt:Te[fn-2];E[fn].destructorFunction!==null&&E[fn].destructorFunction(vh)}if(ue)return E[0].fromWireType(Fr)}return Rs(Zt)};return Sa(T,Et)}var Wd=(T,E,k,F,B,q)=>{var H=Qr(E,k);B=Wr(F,B),Ge([],[T],Q=>{Q=Q[0];var oe=`constructor ${Q.name}`;if(Q.registeredClass.constructor_body===void 0&&(Q.registeredClass.constructor_body=[]),Q.registeredClass.constructor_body[E-1]!==void 0)throw new ni(`Cannot register multiple constructors with identical number of parameters (${E-1}) for class '${Q.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Q.registeredClass.constructor_body[E-1]=()=>{ja(`Cannot construct ${Q.name} due to unbound types`,H)},Ge([],H,ue=>(ue.splice(1,0,null),Q.registeredClass.constructor_body[E-1]=ii(oe,ue,null,B,q),[])),[]})},at=T=>{T=T.trim();const E=T.indexOf("(");return E===-1?T:T.slice(0,E)},Da=(T,E,k,F,B,q,H,Q,oe,ue)=>{var de=Qr(k,F);E=ft(E),E=at(E),q=Wr(B,q),Ge([],[T],Te=>{Te=Te[0];var Ye=`${Te.name}.${E}`;E.startsWith("@@")&&(E=Symbol[E.substring(2)]),Q&&Te.registeredClass.pureVirtualFunctions.push(E);function Xe(){ja(`Cannot call ${Ye} due to unbound types`,de)}var Et=Te.registeredClass.instancePrototype,zt=Et[E];return zt===void 0||zt.overloadTable===void 0&&zt.className!==Te.name&&zt.argCount===k-2?(Xe.argCount=k-2,Xe.className=Te.name,Et[E]=Xe):(Io(Et,E,Ye),Et[E].overloadTable[k-2]=Xe),Ge([],de,Ft=>{var Zt=ii(Ye,Ft,Te,q,H);return Et[E].overloadTable===void 0?(Zt.argCount=k-2,Et[E]=Zt):Et[E].overloadTable[k-2]=Zt,[]}),[]})},Ns=[],Sr=[],Ac=T=>{T>9&&--Sr[T+1]===0&&(Sr[T]=void 0,Ns.push(T))},Qd=()=>Sr.length/2-5-Ns.length,og=()=>{Sr.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=Qd},Rn={toValue:T=>(T||We(`Cannot use deleted val. handle = ${T}`),Sr[T]),toHandle:T=>{switch(T){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const E=Ns.pop()||Sr.length;return Sr[E]=T,Sr[E+1]=1,E}}}},Hd={name:"emscripten::val",fromWireType:T=>{var E=Rn.toValue(T);return Ac(T),E},toWireType:(T,E)=>Rn.toHandle(E),argPackAdvance:hn,readValueFromPointer:An,destructorFunction:null},ag=T=>hr(T,Hd),ko=(T,E)=>{switch(E){case 4:return function(k){return this.fromWireType(N[k>>2])};case 8:return function(k){return this.fromWireType(P[k>>3])};default:throw new TypeError(`invalid float width (${E}): ${T}`)}},Kn=(T,E,k)=>{E=ft(E),hr(T,{name:E,fromWireType:F=>F,toWireType:(F,B)=>B,argPackAdvance:hn,readValueFromPointer:ko(E,k),destructorFunction:null})},Yd=(T,E,k,F,B,q,H,Q)=>{var oe=Qr(E,k);T=ft(T),T=at(T),B=Wr(F,B),In(T,function(){ja(`Cannot call ${T} due to unbound types`,oe)},E-1),Ge([],oe,ue=>{var de=[ue[0],null].concat(ue.slice(1));return _c(T,ii(T,de,null,B,q),E-1),[]})},Kd=(T,E,k)=>{switch(E){case 1:return k?F=>C[F]:F=>R[F];case 2:return k?F=>L[F>>1]:F=>V[F>>1];case 4:return k?F=>I[F>>2]:F=>A[F>>2];default:throw new TypeError(`invalid integer width (${E}): ${T}`)}},Jd=(T,E,k,F,B)=>{E=ft(E);var q=de=>de;if(F===0){var H=32-8*k;q=de=>de<<H>>>H}var Q=E.includes("unsigned"),oe=(de,Te)=>{},ue;Q?ue=function(de,Te){return oe(Te,this.name),Te>>>0}:ue=function(de,Te){return oe(Te,this.name),Te},hr(T,{name:E,fromWireType:q,toWireType:ue,argPackAdvance:hn,readValueFromPointer:Kd(E,k,F!==0),destructorFunction:null})},oi=(T,E,k)=>{var F=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],B=F[E];function q(H){var Q=A[H>>2],oe=A[H+4>>2];return new B(C.buffer,oe,Q)}k=ft(k),hr(T,{name:k,fromWireType:q,argPackAdvance:hn,readValueFromPointer:q},{ignoreDuplicateRegistrations:!0})},lg=Object.assign({optional:!0},Hd),cg=(T,E)=>{hr(T,lg)},ug=(T,E,k,F)=>{if(!(F>0))return 0;for(var B=k,q=k+F-1,H=0;H<T.length;++H){var Q=T.charCodeAt(H);if(Q>=55296&&Q<=57343){var oe=T.charCodeAt(++H);Q=65536+((Q&1023)<<10)|oe&1023}if(Q<=127){if(k>=q)break;E[k++]=Q}else if(Q<=2047){if(k+1>=q)break;E[k++]=192|Q>>6,E[k++]=128|Q&63}else if(Q<=65535){if(k+2>=q)break;E[k++]=224|Q>>12,E[k++]=128|Q>>6&63,E[k++]=128|Q&63}else{if(k+3>=q)break;E[k++]=240|Q>>18,E[k++]=128|Q>>12&63,E[k++]=128|Q>>6&63,E[k++]=128|Q&63}}return E[k]=0,k-B},Nr=(T,E,k)=>ug(T,R,E,k),Xd=T=>{for(var E=0,k=0;k<T.length;++k){var F=T.charCodeAt(k);F<=127?E++:F<=2047?E+=2:F>=55296&&F<=57343?(E+=4,++k):E+=3}return E},Zd=typeof TextDecoder<"u"?new TextDecoder:void 0,jo=function(T){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var F=E+k,B=E;T[B]&&!(B>=F);)++B;if(B-E>16&&T.buffer&&Zd)return Zd.decode(T.subarray(E,B));for(var q="";E<B;){var H=T[E++];if(!(H&128)){q+=String.fromCharCode(H);continue}var Q=T[E++]&63;if((H&224)==192){q+=String.fromCharCode((H&31)<<6|Q);continue}var oe=T[E++]&63;if((H&240)==224?H=(H&15)<<12|Q<<6|oe:H=(H&7)<<18|Q<<12|oe<<6|T[E++]&63,H<65536)q+=String.fromCharCode(H);else{var ue=H-65536;q+=String.fromCharCode(55296|ue>>10,56320|ue&1023)}}return q},Oa=(T,E)=>T?jo(R,T,E):"",eh=(T,E)=>{E=ft(E),hr(T,{name:E,fromWireType(k){for(var F=A[k>>2],B=k+4,q,Q,H=B,Q=0;Q<=F;++Q){var oe=B+Q;if(Q==F||R[oe]==0){var ue=oe-H,de=Oa(H,ue);q===void 0?q=de:(q+="\0",q+=de),H=oe+1}}return M(k),q},toWireType(k,F){F instanceof ArrayBuffer&&(F=new Uint8Array(F));var B,q=typeof F=="string";q||ArrayBuffer.isView(F)&&F.BYTES_PER_ELEMENT==1||We("Cannot pass non-string to std::string"),q?B=Xd(F):B=F.length;var H=z(4+B+1),Q=H+4;return A[H>>2]=B,q?Nr(F,Q,B+1):R.set(F,Q),k!==null&&k.push(M,H),H},argPackAdvance:hn,readValueFromPointer:An,destructorFunction(k){M(k)}})},ai=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Mo=(T,E)=>{for(var k=T,F=k>>1,B=F+E/2;!(F>=B)&&V[F];)++F;if(k=F<<1,k-T>32&&ai)return ai.decode(R.subarray(T,k));for(var q="",H=0;!(H>=E/2);++H){var Q=L[T+H*2>>1];if(Q==0)break;q+=String.fromCharCode(Q)}return q},th=(T,E,k)=>{if(k!=null||(k=2147483647),k<2)return 0;k-=2;for(var F=E,B=k<T.length*2?k/2:T.length,q=0;q<B;++q){var H=T.charCodeAt(q);L[E>>1]=H,E+=2}return L[E>>1]=0,E-F},Sc=T=>T.length*2,bt=(T,E)=>{for(var k=0,F="";!(k>=E/4);){var B=I[T+k*4>>2];if(B==0)break;if(++k,B>=65536){var q=B-65536;F+=String.fromCharCode(55296|q>>10,56320|q&1023)}else F+=String.fromCharCode(B)}return F},dg=(T,E,k)=>{if(k!=null||(k=2147483647),k<4)return 0;for(var F=E,B=F+k-4,q=0;q<T.length;++q){var H=T.charCodeAt(q);if(H>=55296&&H<=57343){var Q=T.charCodeAt(++q);H=65536+((H&1023)<<10)|Q&1023}if(I[E>>2]=H,E+=4,E+4>B)break}return I[E>>2]=0,E-F},hg=T=>{for(var E=0,k=0;k<T.length;++k){var F=T.charCodeAt(k);F>=55296&&F<=57343&&++k,E+=4}return E},rh=(T,E,k)=>{k=ft(k);var F,B,q,H;E===2?(F=Mo,B=th,H=Sc,q=Q=>V[Q>>1]):E===4&&(F=bt,B=dg,H=hg,q=Q=>A[Q>>2]),hr(T,{name:k,fromWireType:Q=>{for(var oe=A[Q>>2],ue,de=Q+4,Te=0;Te<=oe;++Te){var Ye=Q+4+Te*E;if(Te==oe||q(Ye)==0){var Xe=Ye-de,Et=F(de,Xe);ue===void 0?ue=Et:(ue+="\0",ue+=Et),de=Ye+E}}return M(Q),ue},toWireType:(Q,oe)=>{typeof oe!="string"&&We(`Cannot pass non-string to C++ string type ${k}`);var ue=H(oe),de=z(4+ue+E);return A[de>>2]=ue/E,B(oe,de+4,ue+E),Q!==null&&Q.push(M,de),de},argPackAdvance:hn,readValueFromPointer:An,destructorFunction(Q){M(Q)}})},nh=(T,E,k,F,B,q)=>{ri[T]={name:ft(E),rawConstructor:Wr(k,F),rawDestructor:Wr(B,q),fields:[]}},sh=(T,E,k,F,B,q,H,Q,oe,ue)=>{ri[T].fields.push({fieldName:ft(E),getterReturnType:k,getter:Wr(F,B),getterContext:q,setterArgumentType:H,setter:Wr(Q,oe),setterContext:ue})},La=(T,E)=>{E=ft(E),hr(T,{isVoid:!0,name:E,argPackAdvance:0,fromWireType:()=>{},toWireType:(k,F)=>{}})},Fa=[],Pn=(T,E,k,F)=>(T=Fa[T],E=Rn.toValue(E),T(null,E,k,F)),ih={},fg=T=>{var E=ih[T];return E===void 0?ft(T):E},li=()=>{if(typeof globalThis=="object")return globalThis;function T(E){E.$$$embind_global$$$=E;var k=typeof $$$embind_global$$$=="object"&&E.$$$embind_global$$$==E;return k||delete E.$$$embind_global$$$,k}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&T(global)?$$$embind_global$$$=global:typeof self=="object"&&T(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},oh=T=>T===0?Rn.toHandle(li()):(T=fg(T),Rn.toHandle(li()[T])),Nc=T=>{var E=Fa.length;return Fa.push(T),E},Do=(T,E)=>{var k=Tr[T];return k===void 0&&We(`${E} has unknown type ${Tc(T)}`),k},ah=(T,E)=>{for(var k=new Array(T),F=0;F<T;++F)k[F]=Do(A[E+F*4>>2],`parameter ${F}`);return k},Va=(T,E,k)=>{var F=[],B=T.toWireType(F,k);return F.length&&(A[E>>2]=Rn.toHandle(F)),B},mg=Reflect.construct,lh=(T,E,k)=>{var F=ah(T,E),B=F.shift();T--;var q=new Array(T),H=(oe,ue,de,Te)=>{for(var Ye=0,Xe=0;Xe<T;++Xe)q[Xe]=F[Xe].readValueFromPointer(Te+Ye),Ye+=F[Xe].argPackAdvance;var Et=k===1?mg(ue,q):ue.apply(oe,q);return Va(B,de,Et)},Q=`methodCaller<(${F.map(oe=>oe.name).join(", ")}) => ${B.name}>`;return Nc(Sa(Q,H))},Oo=T=>{T>9&&(Sr[T+1]+=1)},ch=T=>{var E=Rn.toValue(T);dn(E),Ac(T)},uh=(T,E)=>{T=Do(T,"_emval_take_value");var k=T.readValueFromPointer(E);return Rn.toHandle(k)},Ic=(T,E,k,F)=>{var B=new Date().getFullYear(),q=new Date(B,0,1),H=new Date(B,6,1),Q=q.getTimezoneOffset(),oe=H.getTimezoneOffset(),ue=Math.max(Q,oe);A[T>>2]=ue*60,I[E>>2]=+(Q!=oe);var de=Xe=>{var Et=Xe>=0?"-":"+",zt=Math.abs(Xe),Ft=String(Math.floor(zt/60)).padStart(2,"0"),Zt=String(zt%60).padStart(2,"0");return`UTC${Et}${Ft}${Zt}`},Te=de(Q),Ye=de(oe);oe<Q?(Nr(Te,k,17),Nr(Ye,F,17)):(Nr(Te,F,17),Nr(Ye,k,17))},Rc=()=>2147483648,dh=(T,E)=>Math.ceil(T/E)*E,Ba=T=>{var E=_.buffer,k=(T-E.byteLength+65535)/65536|0;try{return _.grow(k),D(),1}catch{}},hh=T=>{var E=R.length;T>>>=0;var k=Rc();if(T>k)return!1;for(var F=1;F<=4;F*=2){var B=E*(1+.2/F);B=Math.min(B,T+100663296);var q=Math.min(k,dh(Math.max(T,B),65536)),H=Ba(q);if(H)return!0}return!1},Ua={},Is=()=>u||"./this.program",ci=()=>{if(!ci.strings){var T=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",E={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:T,_:Is()};for(var k in Ua)Ua[k]===void 0?delete E[k]:E[k]=Ua[k];var F=[];for(var k in E)F.push(`${k}=${E[k]}`);ci.strings=F}return ci.strings},fh=(T,E)=>{var k=0,F=0;for(var B of ci()){var q=E+k;A[T+F>>2]=q,k+=Nr(B,q,1/0)+1,F+=4}return 0},mh=(T,E)=>{var k=ci();A[T>>2]=k.length;var F=0;for(var B of k)F+=Xd(B)+1;return A[E>>2]=F,0},ph=T=>52;function qa(T,E,k,F,B){return 70}var Ir=[null,[],[]],gh=(T,E)=>{var k=Ir[T];E===0||E===10?((T===1?x:p)(jo(k)),k.length=0):k.push(E)},yh=(T,E,k,F)=>{for(var B=0,q=0;q<k;q++){var H=A[E>>2],Q=A[E+4>>2];E+=8;for(var oe=0;oe<Q;oe++)gh(T,R[H+oe]);B+=Q}return A[F>>2]=B,0},ui=T=>T;dr(),rg(),Gd(),og(),r.noExitRuntime&&r.noExitRuntime,r.print&&(x=r.print),r.printErr&&(p=r.printErr),r.wasmBinary&&(b=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&(u=r.thisProgram);var d={s:Lt,w:xt,a:un,j:ws,m:Ao,N:Nt,p:wt,da:bs,d:Tn,_:So,sa:Je,Z:Kt,na:nr,qa:Ss,pa:Wd,F:Da,la:ag,R:Kn,S:Yd,y:Jd,t:oi,ra:cg,ma:eh,O:rh,K:nh,ta:sh,oa:La,V:Pn,ua:Ac,wa:oh,$:lh,T:Oo,va:ch,ka:uh,aa:Ic,ea:hh,ba:fh,ca:mh,fa:ph,X:qa,Q:yh,I:Cj,C:Tj,U:aj,P:kj,q:xj,b:nj,D:Ej,ia:Sj,c:ij,ha:Nj,h:oj,i:hj,r:mj,M:bj,v:gj,E:vj,J:wj,A:Aj,H:jj,W:Oj,k:cj,f:lj,e:sj,g:Pc,L:Pj,l:dj,ja:_j,o:pj,x:fj,u:yj,ga:Rj,B:Ij,n:uj,G:Mj,Y:Dj,z:ui},v=await ae();v.ya;var S=v.za,M=r._free=v.Aa,z=r._malloc=v.Ca,X=v.Da,Z=v.Ea,nt=v.Fa,$t=v.Ga,Qe=v.Ha,Jt=v.Ia,Xt=v.Ja,di=v.Ka;r.dynCall_viijii=v.La;var Hr=r.dynCall_vij=v.Ma;r.dynCall_jiji=v.Na;var Ga=r.dynCall_jiiii=v.Oa;r.dynCall_iiiiij=v.Pa,r.dynCall_iiiiijj=v.Qa,r.dynCall_iiiiiijj=v.Ra;function Pc(T,E,k,F){var B=ve();try{Ve(T)(E,k,F)}catch(q){if(he(B),q!==q+0)throw q;Z(1,0)}}function nj(T,E){var k=ve();try{return Ve(T)(E)}catch(F){if(he(k),F!==F+0)throw F;Z(1,0)}}function sj(T,E,k){var F=ve();try{Ve(T)(E,k)}catch(B){if(he(F),B!==B+0)throw B;Z(1,0)}}function ij(T,E,k){var F=ve();try{return Ve(T)(E,k)}catch(B){if(he(F),B!==B+0)throw B;Z(1,0)}}function oj(T,E,k,F){var B=ve();try{return Ve(T)(E,k,F)}catch(q){if(he(B),q!==q+0)throw q;Z(1,0)}}function aj(T,E,k,F,B){var q=ve();try{return Ve(T)(E,k,F,B)}catch(H){if(he(q),H!==H+0)throw H;Z(1,0)}}function lj(T,E){var k=ve();try{Ve(T)(E)}catch(F){if(he(k),F!==F+0)throw F;Z(1,0)}}function cj(T){var E=ve();try{Ve(T)()}catch(k){if(he(E),k!==k+0)throw k;Z(1,0)}}function uj(T,E,k,F,B,q,H,Q,oe,ue,de){var Te=ve();try{Ve(T)(E,k,F,B,q,H,Q,oe,ue,de)}catch(Ye){if(he(Te),Ye!==Ye+0)throw Ye;Z(1,0)}}function dj(T,E,k,F,B){var q=ve();try{Ve(T)(E,k,F,B)}catch(H){if(he(q),H!==H+0)throw H;Z(1,0)}}function hj(T,E,k,F,B){var q=ve();try{return Ve(T)(E,k,F,B)}catch(H){if(he(q),H!==H+0)throw H;Z(1,0)}}function fj(T,E,k,F,B,q,H){var Q=ve();try{Ve(T)(E,k,F,B,q,H)}catch(oe){if(he(Q),oe!==oe+0)throw oe;Z(1,0)}}function mj(T,E,k,F,B,q){var H=ve();try{return Ve(T)(E,k,F,B,q)}catch(Q){if(he(H),Q!==Q+0)throw Q;Z(1,0)}}function pj(T,E,k,F,B,q){var H=ve();try{Ve(T)(E,k,F,B,q)}catch(Q){if(he(H),Q!==Q+0)throw Q;Z(1,0)}}function gj(T,E,k,F,B,q,H){var Q=ve();try{return Ve(T)(E,k,F,B,q,H)}catch(oe){if(he(Q),oe!==oe+0)throw oe;Z(1,0)}}function yj(T,E,k,F,B,q,H,Q){var oe=ve();try{Ve(T)(E,k,F,B,q,H,Q)}catch(ue){if(he(oe),ue!==ue+0)throw ue;Z(1,0)}}function vj(T,E,k,F,B,q,H,Q){var oe=ve();try{return Ve(T)(E,k,F,B,q,H,Q)}catch(ue){if(he(oe),ue!==ue+0)throw ue;Z(1,0)}}function xj(T){var E=ve();try{return Ve(T)()}catch(k){if(he(E),k!==k+0)throw k;Z(1,0)}}function wj(T,E,k,F,B,q,H,Q,oe){var ue=ve();try{return Ve(T)(E,k,F,B,q,H,Q,oe)}catch(de){if(he(ue),de!==de+0)throw de;Z(1,0)}}function bj(T,E,k,F,B,q,H){var Q=ve();try{return Ve(T)(E,k,F,B,q,H)}catch(oe){if(he(Q),oe!==oe+0)throw oe;Z(1,0)}}function Ej(T,E,k,F){var B=ve();try{return Ve(T)(E,k,F)}catch(q){if(he(B),q!==q+0)throw q;Z(1,0)}}function Cj(T,E,k,F){var B=ve();try{return Ve(T)(E,k,F)}catch(q){if(he(B),q!==q+0)throw q;Z(1,0)}}function _j(T,E,k,F,B,q,H,Q){var oe=ve();try{Ve(T)(E,k,F,B,q,H,Q)}catch(ue){if(he(oe),ue!==ue+0)throw ue;Z(1,0)}}function Tj(T,E,k,F,B,q){var H=ve();try{return Ve(T)(E,k,F,B,q)}catch(Q){if(he(H),Q!==Q+0)throw Q;Z(1,0)}}function Aj(T,E,k,F,B,q,H,Q,oe,ue){var de=ve();try{return Ve(T)(E,k,F,B,q,H,Q,oe,ue)}catch(Te){if(he(de),Te!==Te+0)throw Te;Z(1,0)}}function Sj(T,E,k){var F=ve();try{return Ve(T)(E,k)}catch(B){if(he(F),B!==B+0)throw B;Z(1,0)}}function Nj(T,E,k,F,B){var q=ve();try{return Ve(T)(E,k,F,B)}catch(H){if(he(q),H!==H+0)throw H;Z(1,0)}}function Ij(T,E,k,F,B,q,H,Q,oe,ue){var de=ve();try{Ve(T)(E,k,F,B,q,H,Q,oe,ue)}catch(Te){if(he(de),Te!==Te+0)throw Te;Z(1,0)}}function Rj(T,E,k,F,B,q,H,Q,oe){var ue=ve();try{Ve(T)(E,k,F,B,q,H,Q,oe)}catch(de){if(he(ue),de!==de+0)throw de;Z(1,0)}}function Pj(T,E,k,F,B,q,H){var Q=ve();try{Ve(T)(E,k,F,B,q,H)}catch(oe){if(he(Q),oe!==oe+0)throw oe;Z(1,0)}}function kj(T,E,k,F){var B=ve();try{return Ve(T)(E,k,F)}catch(q){if(he(B),q!==q+0)throw q;Z(1,0)}}function jj(T,E,k,F,B,q,H,Q,oe,ue,de,Te){var Ye=ve();try{return Ve(T)(E,k,F,B,q,H,Q,oe,ue,de,Te)}catch(Xe){if(he(Ye),Xe!==Xe+0)throw Xe;Z(1,0)}}function Mj(T,E,k,F,B,q,H,Q,oe,ue,de,Te,Ye,Xe,Et,zt){var Ft=ve();try{Ve(T)(E,k,F,B,q,H,Q,oe,ue,de,Te,Ye,Xe,Et,zt)}catch(Zt){if(he(Ft),Zt!==Zt+0)throw Zt;Z(1,0)}}function Dj(T,E,k,F){var B=ve();try{Hr(T,E,k,F)}catch(q){if(he(B),q!==q+0)throw q;Z(1,0)}}function Oj(T,E,k,F,B){var q=ve();try{return Ga(T,E,k,F,B)}catch(H){if(he(q),H!==H+0)throw H;Z(1,0)}}function pg(){if(Y>0){J=pg;return}if(O(),Y>0){J=pg;return}function T(){var E;r.calledRun=!0,!w&&(j(),n(r),(E=r.onRuntimeInitialized)===null||E===void 0||E.call(r),$())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),T()},1)):T()}function Lj(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return Lj(),pg(),e=i,e};function LW(t){return Gk($k,t)}async function FW(t,e){return OW($k,t,e)}const zk=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],VW=[...zk,["unknown"]].map(t=>t[0]),Cv=new Map(zk);function BW(t){for(const[e,r]of Cv)if(t===r)return e;return"unknown"}function UW(t){if(Wk(t))return{width:t.naturalWidth,height:t.naturalHeight};if(Qk(t))return{width:t.width.baseVal.value,height:t.height.baseVal.value};if(Hk(t))return{width:t.videoWidth,height:t.videoHeight};if(Kk(t))return{width:t.width,height:t.height};if(Xk(t))return{width:t.displayWidth,height:t.displayHeight};if(Yk(t))return{width:t.width,height:t.height};if(Jk(t))return{width:t.width,height:t.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Wk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLImageElement)}catch{return!1}}function Qk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.SVGImageElement)}catch{return!1}}function Hk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLVideoElement)}catch{return!1}}function Yk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLCanvasElement)}catch{return!1}}function Kk(t){try{return t instanceof ImageBitmap||Object.prototype.toString.call(t)==="[object ImageBitmap]"}catch{return!1}}function Jk(t){try{return t instanceof OffscreenCanvas||Object.prototype.toString.call(t)==="[object OffscreenCanvas]"}catch{return!1}}function Xk(t){try{return t instanceof VideoFrame||Object.prototype.toString.call(t)==="[object VideoFrame]"}catch{return!1}}function qW(t){try{return t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"}catch{return!1}}function GW(t){try{return t instanceof ImageData||Object.prototype.toString.call(t)==="[object ImageData]"}catch{return!1}}function $W(t,e){try{const r=new OffscreenCanvas(t,e);if(r.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return r;throw void 0}catch{const r=document.createElement("canvas");return r.width=t,r.height=e,r}}async function Zk(t){if(Wk(t)&&!await HW(t))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Qk(t)&&!await YW(t))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Xk(t)&&KW(t))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Hk(t)&&(t.readyState===0||t.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Kk(t)&&XW(t))throw new DOMException("The image source is detached.","InvalidStateError");const{width:e,height:r}=UW(t);if(e===0||r===0)return null;const n=$W(e,r).getContext("2d");n.drawImage(t,0,0);try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function zW(t){let e;try{e=await createImageBitmap(t)}catch{try{if(globalThis.Image){e=new Image;let r="";try{r=URL.createObjectURL(t),e.src=r,await e.decode()}finally{URL.revokeObjectURL(r)}}else return t}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await Zk(e)}function WW(t){const{width:e,height:r}=t;if(e===0||r===0)return null;const n=t.getContext("2d");try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function QW(t){if(qW(t))return await zW(t);if(GW(t)){if(JW(t))throw new DOMException("The image data has been detached.","InvalidStateError");return t}return Yk(t)||Jk(t)?WW(t):await Zk(t)}async function HW(t){try{return await t.decode(),!0}catch{return!1}}async function YW(t){var e;try{return await((e=t.decode)==null?void 0:e.call(t)),!0}catch{return!1}}function KW(t){return t.format===null}function JW(t){return t.data.buffer.byteLength===0}function XW(t){return t.width===0&&t.height===0}function c_(t,e){return ZW(t)?new DOMException(`${e}: ${t.message}`,t.name):eQ(t)?new t.constructor(`${e}: ${t.message}`):new Error(`${e}: ${t}`)}function ZW(t){return t instanceof DOMException||Object.prototype.toString.call(t)==="[object DOMException]"}function eQ(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}var Vf;class _v{constructor(e={}){vW(this,Vf);var r;try{const n=(r=e==null?void 0:e.formats)==null?void 0:r.filter(s=>s!=="unknown");if((n==null?void 0:n.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const s of n??[])if(!Cv.has(s))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${s}' is not a valid enum value of type BarcodeFormat.`);xW(this,Vf,n??[]),LW({fireImmediately:!0}).catch(()=>{})}catch(n){throw c_(n,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return VW.filter(e=>e!=="unknown")}async detect(e){try{const r=await QW(e);if(r===null)return[];let n;const s={tryCode39ExtendedMode:!1,textMode:"Plain",formats:yW(this,Vf).map(i=>Cv.get(i))};try{n=await FW(r,s)}catch(i){throw console.error(i),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return n.map(i=>{const{topLeft:{x:o,y:l},topRight:{x:c,y:u},bottomLeft:{x:h,y:f},bottomRight:{x:m,y:g}}=i.position,x=Math.min(o,c,h,m),p=Math.min(l,u,f,g),b=Math.max(o,c,h,m),_=Math.max(l,u,f,g);return{boundingBox:new DOMRectReadOnly(x,p,b-x,_-p),rawValue:i.text,format:BW(i.format),cornerPoints:[{x:o,y:l},{x:c,y:u},{x:m,y:g},{x:h,y:f}]}})}catch(r){throw c_(r,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Vf=new WeakMap;globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=_v);function tQ(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return K.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K.createElement("path",{d:"M3 3L6.00007 6.00007M21 21L19.8455 19.8221M9.74194 4.06811C9.83646 4.04279 9.93334 4.02428 10.0319 4.01299C10.1453 4 10.2683 4 10.5141 4H13.5327C13.7786 4 13.9015 4 14.015 4.01299C14.6068 4.08078 15.1375 4.40882 15.4628 4.90782C15.5252 5.00345 15.5802 5.11345 15.6901 5.33333C15.7451 5.44329 15.7726 5.49827 15.8037 5.54609C15.9664 5.79559 16.2318 5.95961 16.5277 5.9935C16.5844 6 16.6459 6 16.7688 6H17.8234C18.9435 6 19.5036 6 19.9314 6.21799C20.3077 6.40973 20.6137 6.71569 20.8055 7.09202C21.0234 7.51984 21.0234 8.0799 21.0234 9.2V15.3496M19.8455 19.8221C19.4278 20 18.8702 20 17.8234 20H6.22344C5.10333 20 4.54328 20 4.11546 19.782C3.73913 19.5903 3.43317 19.2843 3.24142 18.908C3.02344 18.4802 3.02344 17.9201 3.02344 16.8V9.2C3.02344 8.0799 3.02344 7.51984 3.24142 7.09202C3.43317 6.71569 3.73913 6.40973 4.11546 6.21799C4.51385 6.015 5.0269 6.00103 6.00007 6.00007M19.8455 19.8221L14.5619 14.5619M14.5619 14.5619C14.0349 15.4243 13.0847 16 12 16C10.3431 16 9 14.6569 9 13C9 11.9153 9.57566 10.9651 10.4381 10.4381M14.5619 14.5619L10.4381 10.4381M10.4381 10.4381L6.00007 6.00007"}))}function rQ(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return K.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K.createElement("path",{d:"M12 16C13.6569 16 15 14.6569 15 13C15 11.3431 13.6569 10 12 10C10.3431 10 9 11.3431 9 13C9 14.6569 10.3431 16 12 16Z"}),K.createElement("path",{d:"M3 16.8V9.2C3 8.0799 3 7.51984 3.21799 7.09202C3.40973 6.71569 3.71569 6.40973 4.09202 6.21799C4.51984 6 5.0799 6 6.2 6H7.25464C7.37758 6 7.43905 6 7.49576 5.9935C7.79166 5.95961 8.05705 5.79559 8.21969 5.54609C8.25086 5.49827 8.27836 5.44328 8.33333 5.33333C8.44329 5.11342 8.49827 5.00346 8.56062 4.90782C8.8859 4.40882 9.41668 4.08078 10.0085 4.01299C10.1219 4 10.2448 4 10.4907 4H13.5093C13.7552 4 13.8781 4 13.9915 4.01299C14.5833 4.08078 15.1141 4.40882 15.4394 4.90782C15.5017 5.00345 15.5567 5.11345 15.6667 5.33333C15.7216 5.44329 15.7491 5.49827 15.7803 5.54609C15.943 5.79559 16.2083 5.95961 16.5042 5.9935C16.561 6 16.6224 6 16.7454 6H17.8C18.9201 6 19.4802 6 19.908 6.21799C20.2843 6.40973 20.5903 6.71569 20.782 7.09202C21 7.51984 21 8.0799 21 9.2V16.8C21 17.9201 21 18.4802 20.782 18.908C20.5903 19.2843 20.2843 19.5903 19.908 19.782C19.4802 20 18.9201 20 17.8 20H6.2C5.0799 20 4.51984 20 4.09202 19.782C3.71569 19.5903 3.40973 19.2843 3.21799 18.908C3 18.4802 3 17.9201 3 16.8Z"}))}function nQ(t){const{scanning:e,startScanning:r,stopScanning:n}=t,[s,i]=y.useState(!1);function o(){i(!0),e?n():r(),setTimeout(()=>i(!1),1e3)}return K.createElement("div",{style:{bottom:85,right:8,position:"absolute",zIndex:2,cursor:s?"default":"pointer"}},e?K.createElement(tQ,{disabled:s,onClick:o}):K.createElement(rQ,{disabled:s,onClick:o}))}function sQ(t){const{onClick:e,className:r,style:n}=t;return K.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},K.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M13.225 9l5.025-7h-7.972l-3.3 11h5.359l-2.452 8.648.75.364L20.374 9zm.438 3H8.322l2.7-9H16.3l-5.025 7h7.101l-6.7 8.953z"}))}function iQ(t){const{onClick:e,className:r,style:n}=t;return K.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},K.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M14.516 15.158l.714.714-4.595 6.14-.75-.364L12.337 13H6.978L8.22 8.861l.803.803L8.322 12h3.036l1.793 1.792-1.475 5.16zm5.984 4.05L4.793 3.5l.707-.707 3.492 3.492L10.278 2h7.972l-5.025 7h7.149l-3.71 4.957 4.543 4.543zM12.707 10l3.243 3.243L18.376 10zM9.795 7.088l2.079 2.079L16.3 3h-5.278z"}))}function oQ(t){const{status:e,scanning:r,torchToggle:n}=t;function s(i){n(i)}return r&&n?K.createElement("div",{style:{bottom:35,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},e?K.createElement(iQ,{onClick:()=>s(!1)}):K.createElement(sQ,{onClick:()=>s(!0)})):null}function aQ(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return K.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},K.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-7.46,0.5l-1.5,0c-0.645,0 -0.643,-1 -0,-1l1.5,0l-0,-1.5c-0,-0.645 1,-0.643 1,0l-0,1.5l1.5,0c0.645,0 0.643,1 -0,1l-1.5,0l-0,1.5c-0,0.645 -1,0.643 -1,0l-0,-1.5Z"}))}function lQ(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return K.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},K.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-4.96,-0.5c0.645,0 0.643,1 -0,1l-4,0c-0.645,0 -0.643,-1 -0,-1l4,0Z"}))}function cQ(t){const{scanning:e,capabilities:r,onZoom:n,value:s}=t;if(!e||!n)return null;const i=(r.max-r.min)/3;return K.createElement(y.Fragment,null,K.createElement("div",{style:{bottom:130,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},K.createElement(lQ,{disabled:s<=r.min,onClick:function(){n(Math.max(s-i,r.min))}})),K.createElement("div",{style:{bottom:180,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},K.createElement(aQ,{disabled:s>=r.max,onClick:function(){n(Math.min(s+i,r.max))}})))}const gi={fullContainer:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},innerContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},borderBox:{position:"relative",width:"70%",aspectRatio:"1 / 1",border:"2px dashed rgba(239, 68, 68, 0.4)",borderRadius:"0.5rem"},cornerTopLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,left:0,borderBottomColor:"transparent",borderRightColor:"transparent",borderTopLeftRadius:"0.5rem"},cornerTopRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,right:0,borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopRightRadius:"0.5rem"},cornerBottomLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,left:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomLeftRadius:"0.5rem"},cornerBottomRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,right:0,borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomRightRadius:"0.5rem"}};function uQ(t){const{scanning:e,capabilities:r,onOff:n,torch:s,zoom:i,startScanning:o,stopScanning:l}=t;return K.createElement("div",{style:gi.fullContainer},K.createElement("div",{style:gi.innerContainer},K.createElement("div",{style:gi.overlay},K.createElement("div",{style:gi.borderBox},K.createElement("div",{style:gi.cornerTopLeft}),K.createElement("div",{style:gi.cornerTopRight}),K.createElement("div",{style:gi.cornerBottomLeft}),K.createElement("div",{style:gi.cornerBottomRight}))),n&&K.createElement(nQ,{scanning:e,startScanning:o,stopScanning:l}),s&&r.torch&&K.createElement(oQ,{scanning:e,status:s.status,torchToggle:s.toggle}),i&&r.zoom&&K.createElement(cQ,{scanning:e,capabilities:r.zoom,value:i.value,onZoom:i.onChange})))}const dQ="data:audio/mp3;base64,//PkZAAhghE0AKToAJra/n0FQygAAAGIkYJgmCYXBMAAGCTJz3zhCEM//z//1hz//8MMMMN08ssV6e5DDWIQreAgCvFKy8bXgIKMkUDDBgzJwIBtkRMQAocxIFdxghQGKDoEziAzQxOBOdH92i/iGi+zDCAEIX46a73HrSybZw1x3JZjXp7dSNy/P68rjcbt7p7fakMP5LVMyzCaj1pjvejYYAIDgDGzECjEAk1Jl3559HIon8hzlfPVTCvGJZzfcKSxXfyMWM88//9VKSxXdtnb9vomOuuRyiWVYbf+X8zp6fKGHIdycuWMMMMMMKSnp+6wsYc/9f/7z7rPPWHN556p6fP8MMMP///PPP/7+GHK9PT6p7f/unldP2np7YeHjweiYA4GLNAgAiI7u57n5//oc5/yfk6znOcPhwOBwggHCMpA4HA4KEyHOc5znO+hPIc5//+fqJh8XQPh90JU5xQinOf//87/zvP+ggAYuhCKHxdA+Hxd0EA4KKHA4ciB3kOXfXB/gmf8p/B96lAMKAgAADU+BujARHgwdisgHMfAUHAiceBg4ASBgZBiBIBH4ZaHOJsLhf8R+HYEciIgYSwj/+Bi7EqBh+AcBn5P6Bh4TuBmrAMBiZH7gaLEWgew//PkZFMlyek60MpYAShzqqZhm6gCUWeEUWAewEWYGN4X4GDEPwGE8S4GDoOIGAYKgIQOkz//gGARAUB+CwGxTwMAACAEgyAwdAlAxKhzAxXiZ///AxcEwAwJjDAziCAAwQgdAwRgdAsJQDAmAcGzYDwAhZIAKAcIQB4GT9TQMJ9/4Gi1Fv/AcAYUqKBAwGgNAwVBAAwGhwAwdBlAxFg1AwlgzAwNBuAkJQDBgEEDEqGECgChFgBgL//CIswYYH//+HKCpk4K0C9AaKKCAOBeMcR4X9C44BwABCgGAsGYCgTwHAcAwXAiAwSAQV///CJP9lwMBQAwAAAWGo5lVLCcaeneVhJAVGai3//ioaUEf//gaTAYGCj8BnEwfrIqDcsIQb/vmhU/8fAs0G8YGGwKST8Igj4GCATipksVzY8p//90FWJwh45AkX//4fCF9wMEgkL3uQc+gbGJ8t4MBAMBP/hEXf9FRuWBcAfIFjYzQdoLCBwh7IWVlxaX/w8oMCP/+EQT5poGB1Ir90DhiV6af/jFYBpT2BgoQyyt2M0ToBdEaZyzt8nTo3xdNDCTSd//o6F06CjooxRr4jVF/0bOKD6OMUNDRxiMUVFR0FFQPhGXRjDpr4MAEA4wIQUhYOIw//PkZE4nrg08sOx4ACQ0CopD2aAAlwTTBxQeMcwd8w8gZTAgABXwGABOkzpI0wAQAExnWfP4x8ZjKunWdZ1o1Qe6lFGKCNULORQCELAAPnRUf/GIx/0FHGfo3SdZ0qP2cukXKLlRtBKFgAQwCkwJgFRYBEEATmDsLSY2QiQYCEnEra+UZo6F1aKMRr6GhoaP/+j//ov+i+hjLqBgMkYoqChoo1GqCjoY06TpRqjjLOYzRRmMuizmgdKhdF8kjTAAAPMCwGswzglgwAJfzqxmioKH/////////////+ijLOAwFmN0f/////////Q///8ZjP/9DGYyFwIDBeB3MA4AlBWidKM5spykAUAQOCakK+udGqN8VDYjTRuN//0bVX//6Kio4xQFv//nf//kKOoAEIB6SY6hcxenp85///4/DEPf/84Xvl4vF4dwtxfEJgCYQHMSgKCROp4+fn////L4tQf0unz89OecLxeL0ul09y6enzp4dIhKAQFA5hKfLu1nU7/Wr71rRKJUBQSUVt////l08GUPVWgAAYAeNKsxbQNAAhQx3/oKGMM6dZ1Yy6sajMbfKio7lNcv0sScZ47lNcw32ekVFMP9fp/f+mklI6at6u/dBMQuW6y+C5BcgwAA//PkZEomGg1HYGe0riWsCqbEwiY0BJFJMxrCcxGgQ2VK8xxCF1wsABgQBBgQBAYAFCkYCgALkK4fJ00E5ctJN1Uxy5au3XoGcM4dSN0EYZwzhW0WCh1PZwzhnFFQxtnbO2d0Kt6CdXbruggkTEX5Rs4TEQUVsdVXaCcuWXIBQUGmwmgoAGcJiM4dSioHQdBnEY+hjcbov//jcb/43G43G/jCRibfxugdBnDqULO2duvQumztncbo4xGKKNxugooxGIxQULoOgFgUMTA/jbrxiMDmETL+eLhcPThzOeeOZfL5fIcBYuXD/OHv8t//LJFxjxQYHHKDGFkZMtlmKM0RgQfbVtxFIHbQBDRuzRguEI1c9XZ/rWmrZfVU3Oc/9utNNygRQkCoHlAYstNN6DJ1IINpoINppv+WG/+g2mmnUmmmpBAoJIJhnwB5xkymn606Df/t000xhU03UXC5Ol8uFyXy+Xy/l8v5w4cLk4XAvwAYUvl/QL5fTdlKZkEEEEGumaKaX00zIOemf6CH///ywI3LKpiQ2Ef4xYWMSDyI0XwzikpL0ajVHZ3j9DGIjeuXcNfjn96/S/TUz/X/vX////5K/r+v7Jn+LlAoGZOIQIwMKBQM/yppKYURmhGZkR2b//PkZE0mHg1HEG8wyiD7mlwAyDU8nJHi5htakZmZGNiRcpkJhBmUmZYQcM1VDEEBggNDV/ASEZRYKFZIhkXKLlKmk7IVTKmZNJ5KhiqVUqpX+k7+qlVKyV/ZIqZDFDWTJlFyi5TJpKhiXKBQyZzIS5JhBoayV/AQWVpGWkcYTV5O/rIVSv8/0nkr+v6/vyR/X9f1/ZN8kf5/n99/n+f5/lTKmf9/mRP8yFUqpWSv4yJUqpX9kj/MmZNJ5K/z/P9J5P/v6yFUz/CEoywgUMqZkz/FssECIsVq0aPRrRRatFFFykQZJ2Ukl///5KjmksOaA7ALROJLDnEsLbq3GTMVrwb/0dGzmM0DlfBlHQOmrdR0MYi92TX6b/cmDHLclyUVYO/4O8sFTKFTKFf8yhUyhUyhXzKlDKlCsr/+ZUoVlSsr/+ZQqZUoZUoceMfcoZUoZUoVlfOPGcmDHKcpynKg9yXJcr3JclyXJclyYO+DXJclyfgxFZVb3KcqD/g2MxzsY72L9LubPR0dCyf5K5NNd+Tv9GXRdV0XJclyfcl/n+k8kf6SX/iVynvXf///4Mg/1OkxguYzmM5jMcLHMxwwGhgNCwXMLAcwMXTLi1MD7w7tmTdBvMmE0xQFzCwHMDAd//PkZGMpigkmAGOUvCfTgcgAuC+ITswMFzC4oMLhYMByn0xvU+p9Tr0xUxf/0xv///1PBYDhgNTFTFTGTGTGTGTGTGTGTGC4GTFMDAcLAdMVMVMULAcMBpgYDhcDGFwsYXFBikLGFwMGA4MBxgcDKfTEMUoAx2BisD+mKp5Tv1OkxkxkxkxkxkxkxkxlO0xVPJi/6nv////U7CwHTFTFTGTGTGTGU+p71PpjJipihYDpipi/6n1Ov//C4GC4GTGTGTGTFU8WBSZdLhWB//yKlotyLZFiLf8tyyRUipFSKkVGRBZQMiWC3yx//wxUGKsSvDFQGHUAL3QMsHDFIYpCYy2Bmagy6BjLgy6Bh3od58DCLAizBgRb+EQiyEQiwGBFuDAi3/////20QqSBJf/qcumv/////wMZdGXAYMu1gYy6MuBEZdBgy4BjLgy6BjLgy6BjLgy6BjLQy6DBlz2cJDLgRGXAMZdGXAYMuhMZcCIy6sJGaoGMuppwNRl3WBjLgy63wiEWAwIt/+EQi0IhFsDCLAi0GBFkGBFgMJCqaqYAgAYIhBBvwf7kwcqRq7V3IctacvlN6NxqgooxRRuNRiijEZjMGRuMvz9FGozQ+1X2qe1T1S//+VhaWAtKwtML//PkZEIkbgcaAHc1xCJrjeAAtfuUAtLAWf///mWePH95ZFgsyssvM88+jzO6K+z7OM48sH+WDiweZx5YOK+zxWLGJWsa6xadAv02fTZLSpsFpvLSga0tMgWgUgWmwgUmyWl8tMgWWmLSoFJsoFlpSwsmyBg4HhEdgwHAYPBwGDgeBg8HwMHg4DB4PBgOAwcOwMHLwDn5lAwcDgiDgYDwMHA/4MB3//+EQeDAdwiDwYLPhEWQYLODBYERZBgt8Ii34GLBaB5pfAZ0FvEAQ/UfwxULlx+IXx+8f5CELH8fxKhAIDFoHBEDRc3////gwHgaRXgMHYMB2EU/gwZ/gYbw3gY3QbgYNgbgYiAbgwN3/+EQbBEG4MBuDAbAwG4RBtAwbg2////+B9B6F//////////hEdD//////////8DRahEQGCInMNg3LBElgNjDciCwG/lgNiwGxWG///mG4bf/+WA3Kw3KyIMNw2Kw3MNg3MNg3MNiIMiQ2OK0xMiA3KyJLAEZgRARmBEDEYFwBBgEgEeomowol5YAJKwCDAIAJ8sAE+gGBgCJYAQUZ/13LubMu5dyiYOAhKwEFGf9AOoz/g4CFAIol/lgAjysAgsAElYBP////lgJksBM//lgRUxF//PkZGApggsIAHt2wiNLoggAqCz8RFSwIqYioipkjEjHCCSN/+WJg5iYOYmPK5krmTmZk5mZ8sTJYmf8yJiNiIisi/ywRmRkZkZGZGRmRERkREZERGRERkREZERGxEf///hETIMEyBiZEyBiZEzwiJgDEwU4DV2gQGFOBgmP8GAiAwRAiBgIgYCIGAi/4MBHAwRgjAwRgjwMEQIgMcgY8DBGCMDBGCMDEyJn///+BiYQIBlObj4eYLIwsjAOBGFkYBoEQ84eULIw88LIA88PKHnw8sPKFkeHlANAiAaFUDAiMYPIHmDzBZBhZB///8GBOA1sH/Awni7AwnhPCITwYE/CKzBgt8Ig8GA4Ig6EQdww4Yb+F1sIgtwYCwGAsAwWAsBgLAYCwDBYCwDBaHUDF+VEDKgC2BgtBaDAWgYLQW////gYLAWQMFgLAMFoLcGAt////4RMABmBSj4NgwMOGHBsHhdcLrwbB4XXC6+F14YcLrww4Ng8MOGHBsHww4Ng8AUC4AoMQMC4fgw3wutV4QIsAgFYIBWCCVgHeVgHeWABCwAIVgH+YBwB5aRAstKgV6Ba1oMg9avtUVN/qdLWciD/cqD3Jg6DFPuTB/////lYAn//mC8C+YLwL5gvgvGC//PkZFEpLgMKYXt2xB5LogAArbdc+C8VgvlYL/mC8C+YLwL5YBfMNgNkwXixDWoHPMc4VUxVA2TBeDZPYXzXl815fK14sLxYXvK1//NeXzXl815fMtdDLSw3UsMtLCstMtLDLSwsFhWWlgt//8sFhW6f/////+WF7zXl8sL5ry+Vrxry+WF/wMLwX4MC+EQv/AwvBfAxsjYAyqpKA0lpLAwvBfBgXv///4RA2DANAYGgNgYGgNgYGwN+EQvf/BgXwYF//8DC+F4Dd6NgGBf4AgFwbB0MMF1wuuDYMBsGwusDYOBsHA2Dvg2DQuuDYOhdcMMF14YYDGYDEGwfhhgbB0MN///4RBaEQWgZByoYRWYMFvwiDsGwaF1gbB34GDwdC64XW/w1aKxDVgatir4YcLrQbBwNg7////////////+ESfgZPyff/////////4MFmBvvMAERZ8CC5adNj02E2S0qbCBSBZaYtN///oFlpU2QMXIFAYuQK9AtAo7IxLTpsIFJs/5aZRxQawaxGfIg9CsrI+PUqkWdOHp7ODsOl6cOHZ4dsulfLI9/8BAAgMBACsBLACVgBjoAWAE5OTM6WDAR0zodMdHCsJLASWAjzCQgsBJhASWAjysI8wkJMICU//PkZFkeqgcaYDd1th6DogAAqCuIxQwtDA5MdMULgyY6YqnXqdep5TpMdMVRNRL/UT9AN6jCiSjKAZRNRhAMomgFQDfCIJwYCQiCAiCMGAkGAgDBJUA3eVAMEgj////8SrDFIYqh5g8kPMHkDzB5OFkYeYPJ+HlDzB5+AYVQDibCyIPLLEZIsjIliWS0WywWyyWuWCyWJaLZbLJYDHgLAItFvy3///4eYPKBlQTh5QYEODBb//hhoNg7/C62DYPFUKwKsVgNWBq8VkVcVkVUVYrH//hGff/8Iz8GT7//////wiX4ML3gwvgwvf4ML3gZeqoHVGyBl4vgZfL2F1oNg4Lrg2DcLrg2DQw0Lrhh8Lr4YcMNBsGhdcGBcMOGGAFGAGMQsF1guuGG4XXV/4uQXOLmF1kL/8lCXkuSk4O8/FzHzuP0hIucf/CIFAMCgFPgYFAKAwCgGBQCgGHYO4GBVM4GgQI4RCMEQKQOtQjUI1CNcI14MqDKwDIAGQDzh5wsjDyw8uHmDzYeUPN+DEYRRhFEIowYgDQgIhWDApgwKAwKQYFAYFQMKkYDOxHAzsRgMKBUGBX/h5v+Hm4ecPNh5A8wBwjhZHhZAHlDzBZAFkAeQPKHnCyILIAsih5QsgDz//PkZLQgIgsMAFp1xCGLogAAA2rkB5w8oeYLIQ8kPMHkCyGHnAMKoGmAgFkUPMHmDYAtfHPHNkr/JYl8c8lCWHPHMkqSo5onMAkBDnfJX//8IgDBgBhEdAaxSQMHUGAEIgAV4risCcipBOMVRVBO////hEvAxsAwvf////8MPDDww4XWC64XXDDww4YcMPC6wYb/wYGgiGwMplMDYhTCIaCIaBga/////8GA+EQdgYPB4MB4GDwdhEH8Ig8Ig8GA6EQcEQf8DBxlBjoAweDuFwgCQXiL//iLiKCKCL4XCiKRFwEgoRT4iqpMQU1FMy4xMDCqqqqqqqr////xuDd8fv/DVwrArEIg6EQdhEHAYPBwMB+ERYBi0WAwWAZ0FoGLYOB+JfgZ0FoGdBaDBYbn+WHm9xW7/Nzzc83PLDzc8reWlA7S0oHamx//6BflpU2C0qbBaf/8yk/ysn+VkMhTKQrKVk8yE8rIVkKyYsAn/5WC+YICmCApWCGTkxtKMcVWlgFMEBTBAX////0C0C0C/////////LTFpvTZLTlpv/0Ci0xaYtOgWmymyWkAxcWmTZTYTY8tMmygUWmLTIFpsFpv9NnywLmLCx2RgWmQKTZ98UjnzZ1/++D4M6/////3//PkZOgjIg8IAFcbxCaTogAAoCuIzfJ8vfJ8Wcs5fBnD5//++L5f////////6nCKv//+o0o0FUYwqDNGCwgUMKC0VVGkVv//4Yf8LrxVCriqDVoasDVuKsNWw1bisBqwVkVkVX//gy/4YYMMGGhhgwwNg4LrhdcLrAYWGAA0zBsH4Ng3C6/////4MAoGBQIDAKBgUCAwCgYEAsDAoEAwKBAYBYMAoGBQIBgUCYGBQIBgUCwiBAYBYMAoRAgRAoGBBMBooCAYFAkIgTEUxFv/EWxFxFhFoi0LhQuFiLCL/EWqTEFNRTMuMTAwqqqq//////8TWJriV/hERAwRgYiEYGIhGBmIRgYiEYMEQMEcDMSiA1GYwMR+UDMTkA7KIgMRGIGGM0SIrRGjRlhEV4jxov8rR/5YRFhEdQSViCsR5iRJWIKxPlgQYgSViSsR5WJMQJLC78IiKERF4REeERGEREERHwMRGOBmIRhERhERAwRAYiEQGIhGBmIRAajkgG5TEEREDBHwYIwYI4REXCIV/4MCmDArgwKAYUO/gYVCkGBUGBTgYUCsGBUIhUDCoUCIVBgVBgVBgUhEKQMKhUDCoUBgVAwoFAYFcGBQDI6oA5+qQiFAMjBUGBXCyEPIFkOH//PkZPMj6gr6AFdVwifkBdwAoC2Ilh5/8PPh5Qsih5IeUA0TAZrE8PP////wMRiIIqID8piAxEIwMxCMDEQjCIj//BiIDRo8Iogii/4MKwYVhEoESkDEiIGJEgYlfBgmDBIMEAYgSBiBIREAwSERH/8I7wPfuCO4I7v/8GBvAw3Bv/////gwN34RBuBg2BuBg2BuBg2BuEQbhEG+EQbAwG4MBtwiDaDAbhEGwMBuDAbAwG4GDYG8DBsDcDBuNwDRWDcIg2AwbA34RBv///CINvCINgMRIN/////wiG4DDeG+TEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq/zB4OLAP8rBxWDisHlYOKxb5WLTFgsMWiw18LDOnjPxZoxadDOgsLAtLAbKymVhsrDZWG/LAb8w2GywGysNlgNFgNGFwuBQuWnTZLToFFpisLJsFp0Cy0voFAQLFZkMCAQwIBCsC/5WBCwBCwBCwBCsCeVgUwIBCwBDEwEMCAQrAhgUClgCFgTlgCGJgJ5gQTGJwKWAKYFApgQTGBQL5kY0HMjQYnAhWJvKwIWAIVgQrApYAhWBPBgECIEBgE/8IgXhECQiBAMCkcDEwEwMCAQGAQIhoIhsGBsIhvgwN//PkZN4irgr2AAOVqiUThegAnCtMgwNwiG/8IhuDA1hENhENgYbKYHb2IBhoNhENAwN////8IhsDKZS////8IhuBhspgc0KQRDWEQ3///CNf4GAIMDAwgAwAAwhAwAwYAIgwiHBgAMAYGAAGHv///CIBqBqESDEIgRYGoGHBiDEIgGoGgMAYgxgwgxCIETwYFYMCoMCuDApBgU8DCoU//gY3G//wYFOBhUKBEKQYFfBgV8IhSEQoBkYK8IhT/wMKhXBgUCIU4RCoRCvgYVCsDCp3A1SqAYFAiFP////gY3G1TEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVgwCAwCBEC///////8IgUIgWEQIBgUCAwTQMCAQDAoEhECAYFIwGaRMBotWAasdwH/KqBmhFgaKI4GRgKVpjCBTCBPMJHNMFMIFKwnlgJ5hUxhUwGWlpAMuMuWLTFpvQKQLQKLTIFJsoFIFFZb/8woQwoT///MIF8rC+WAphAphAppgpYClgsmwBC6bHoFFpUCi0wGXFguWCwFLgUsgX6BZaVNj0Ci03//+EQKEQKEQLCIFAxMBcDAgFAwIBQYBODAKBgUCAYEAuDAKBgUCAYFAgRAngwCgwCwiBIRAmE//PkZN4iogj2AFdVxiUrhewAhOkwQIBgQ0gbOI4GRhOBiYCgYEAv////CIFAyMBQYBf///CIF8IgUDAgFBgEAwIRwMCCcDEwFAwIBf///CIEQGMDGEXCKBpCIDCEQDCAsYInDFQMMAuYSoTQMVfBlf//+DKfBgAiGDAQMIMIgCIQYADAEGAgwP////8ItgNu2/8DAAAiABgHhECBgQGEQARA8GAeEQIMABECEQIMAwYBBgCDAARA4GAAgYACDAARAwiAgwDhED4RABEBCIGBgDoH2dgZwCBgAP//BhX/+DCiTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqF1ww////////hdeGGDDBhwjeF102E2fTYAowMLjE0zTDfyyMYjEDJTwMLSwFi0/gQLoFIFpsegWmyBQsWlQL9ApNgtIWn8tMgX6BaBX+WmQL9Nn02f9NktIgUgWmwWl9Avy06bCBSbJaUtImyWkQKLTIFgYWoFFpAKFwMLzZgwAwvLTIFlpU2fQLQK///4Yf4YaF1sLrg2DAuuDYNDDQw4NgwLrhh4XXC64Ng3C60MNwbB4XWC64YcMODYPCJYDlMQBlwRLg2DOF1v/////PkZM0eKgz0AE+UuCnLFfAAk3Fsg2DAYX/ww//4YaGGDDhdbDDACFwMuXA2DADlygusDYOBsGhhv//wNU/CKQusF1oXX+F1wuuGGC6wXWDDBdbC6wXXhHv//4AHIFgC0BZAA4Ba4FkADwFsC3AtQAOcC0BYAtgAcAA9+BYAsgW4FvgWOABwC1oq+it4RT0VVG0VFGkVywo1/RWU4U59TlFb1GvRX////QK9Nj/9AtNn02fTY9NhNlAr/QK//TYTZLSJsIFemx///oF/5aZNj02U2C0yBaBfoFAS6bKBfoFVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQiA8GAO/4RAf//////wYA4GAO+EQHAwB4GDoB4GA4HQRB0BhlDIBpEAcBgPDIBgPAeDAHIFAYuLTpspsJsFpi0haRApAtAstIYKClgF/ysF/ysE/ysF//LAJ6plTlYC1ZUypmqtWVK1VqyplSFgBaqqcwAAVIqcrEBAAKmMBERCQhwD5iICIQEyABMAABBVGXF4gIA4DLAAWAEQgLVSsBaq1ZUv+YKClgELAJ////5YBP//LAL5WC+Vgn+WAX/LT+gW//PkZMIhLgrsAFt1yiD7FiB6A9qwmwViybCbCbCBSBabCBSBabPpsegWmwWn9ApApApNgCGBmEwWlLSpsf////hEHgYOB3////4GDkiBxMHhEdgYOB4GDwcBg4HW23gooFYHd/+BnAz8O8Vv//FaBm4rBWh38es2zbAtD1m2PVBqBrBqBrAF7AF3/5el84MkuHTgyy+dL0dRnEajMIyOn8RsZ5HGG/kbIpHIkYUiD0y2WctlZaWSwrKx6FZbxnL54ul04eLhw9Ol84dl86cOHT3Ipb5Z8qKpVx6/j0EkLctVTEFNRTMuMTAwgWQLQAHgLf/////4Fn+EQESEcIgInCIRW9TkrCzH0YIjjWtI+YeCD0woLCBQwsKRWUaRVCBZFZRtRtFRTlTlThRtAr0C0C//02E2fTZQK/0Ck2f9TlFRTlTlFT/9TlFVFRFb/9ThThynIQbWkAREue5S11rKdlkDEVABh61ExYPU+tOD4MQgcn4iwigivxFRFoXDcRQLhoiwioXCeAkFBcNiL8RURQBIKEVEWiLBcKIqIpEXC4QReIoIpCIKAQMxFAFAsIuIr/4YYLr//ww4XWBgwC64XX/hhgw3hhwuv8MNhhguvhdcAUYgaYTAAoWDDg2DQbBg//PkZPYe6gzuADd1uDKsBhBAe89cYYdGjtDT2hDmlD2leaOv9oX0OX/0NNLplNf8ewakNWGrTfTRpphNJtfaeh7T1/tStdtTpqN532lpX/1/kmQ5eaf2hoaV9paGleJAvd0rer2pWu1ar2vk56vVrV5Hj1Nop+/lfv5Zpkem5kX/2vtata2rq783nbvtbW6VjW6a2rq13+rO6VysV58K7tbp0ru6Vrtqa1a67tr6sau1ulYrnfa2v927Vrt21NSuN5X927/D4diAQANh4gEIfxB+IQG/D/4gDw/iGIRD+HRATEFNRTMuMTAwqqqqqqqqqqqqqqqqqiIEK/ititFX///8VcVuK38VsVhXBOQTpq/qm8QCAcBmIxgdfFZCHECpxFBFAuFEUC4cLhsRTEVEUDVoDQD+KrFYirFX+KwKoVgVUVUVeKwGrhWRWBViqFYDV4rMViKyGroauBg/A0YThVgNAEVQqw1fisis4quKxxWYrAatxWIqoqg1dFYxVxWIrAavAaAArIrAqoqhWYrIqvxWMVYrARCADhcKoVYavDVgqhV4qorIrHFWKuKxFViscVUVYasAaAfFY/4YcMNhdfwuuGGC64YfDDA2DwusANygbBwAxhAECwNg8MOF1hD4//PkZOkc4g7yBjd1sDNkDhgqYwtcYoUyiQ0NCkxQ0NCQkSIbGKIyRGEo5mUaNEhGKEHMmaGhI0UokORvMmZmZSZSiMZQkRnKKZkzRoSNCQpQ0NEZoaNFJkhh3KOUJEhIcoSJCQkIzlDlEjMDMyMpQ0JCQzNCRGaNCRISEZoZihoaIwlEHKNGiMzFEjRmSIwlHMyZmcyiGyMxRyhIkIxRSZokSEYGBkiRojAPESNGjQxvKHMmMoSKTJCQkIwlFKLDYWGhoZhYWAAUGBsAwsMDYUAcK4XDPhQVwwLAH/DfgHC6TEFNRaqqBgjwYI//wYI/8GCL///+DBFhERgwRcIiPAzGYgMRKIDcskBgjAxEIwYI4GiRwNEjhFH4MRwYjA0aOEUf8Io/BiLgxGEUYRRQij/BiKDEYMR+DBGBiMRQiIgYIwiIwYIgiIgMRGIDUSjhEReEREBiIRAwR/wYI/8IiP4MEcGCIIiOERH8GCIIiMIiIIiODBHBgjBgjwiIoREcIiOEREDBFCKiAxHJcIiMGCMGCLwYI8IiPhERgwRAwRAYjEUIiIGCP/AxGIgiIsGCL//4REYMEXhERBERhExhExAzyAZiEWDBGERGeKsVsVRVFcVwTnFcVxVgnYqipFUV//PkZPkcfgzeAFaVxDgUBgAgatvIYrgnYqgnQJyK4riqK4rwTsVor4rQAjABAgnQritFSKoqQTsE5C1haxfF7F4XQtULSFqC1i4LwWkXIWkXRdF+LwqAnME4iqCdwToVuK+HAERWAkAlgJB0OB3Doc8OYc8VCsVgIB3DuHAERUAkAkHMOBwOAIisO4dwEAEAEg6AkAl4CeHA4AkKhXioBIOiv8OB3F+LgWkXxeF8XouxcF0XBeF8XBdF8XhdAdouC8AEsXYWsXOKsVBU/FaKmK/FTxXFbFUVPiv/8VfxXitVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVAXX/8MN/wwwYf//DDBh4Yf/+DYODDfCIFAwKBQiaANFgUDAgFAwIBcADwFuBY/At8C1wLfgAdAtwLGBawLcC3AsgWeBYwLX4XW8LrBhgiFgMlhYLrhh4XWhdb8MOGGhdcMP4YaF1gw8LrwuvhhoYYLrYXWDDBdcGwfC60MN/ww8GwZ4XXC64GZQsF1wbBnDD4XXg2DcLrBdaDYPhhgusF1uGGC64YfhhoNg0LrQwwYcMNC62F1/g2DYXW4XXC6+GH8DTIW4YeB/wR/wjwR+DP/y06bJaRAtAtAtAs//PkZNwY2grqBFW1xDhTRegABLBstL6BRaVAstN5aYtN/psIFf5aQtIgWgUWk8tImyWkQL9Avy0qbKbKbJaf02f/0CkCy05adAsC3K7+mx5aVAv0C/TZ8tOmymwB2pspsFpPLSlpy0qbCBSBXlpk2E2E2C0paUtP6Bfpslp0CkCy0ibJaZAosWQLLTJsemwgUmz6BZaYtOgUWmLTpsJsoFJslpPLT+mwmz//6Bfpsf6BSBSbCBXoFeWk9NhNhAr0Cy0/+WnTZ8tJ/oFf6bP+myWn//8tMmz/lpf//////8sPTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBgJwiCYMBP//gwE//////wiCAMEgkIggIqIDKpUCIIgwE8IzA4j+EYhGAZMIyDJA5gGRhGcIyDIhEQiIGAgwIRDwiAGAAwYMHBghGAZMGRCMhGYRgGRA5gIyDIwZPBk/wZIRmEY/gyOBxIMgIzCMgcTgwRBgjwYJBgngwTwYJhEQBiBGERMIrwOouAxAgGCQYIhERhEQDBGDBAREgwTCIgGCQYJgwSDBHwiI4MEAwSBiRHCIkGCYGJEQiI/Bgn4REYREeBiBIH6XhERhETwogoy04mpZibFmJuWYmx8n//PkZN4ZrgrkAFZUyDcjofgAA9qc0HafZ8HwNrjaG3xtjaDtJwTo+D55Ow7fxNRNSyLPlqJsAr/lmA/FmWYm5acTQVgTkVQTnBOQTgVxVBOBVFWK4J3FUE7gBABOwToVQTsVhUFcVRXBOhUBORWiuKkVYrCqK+KoqgnQrAnEV+K8E7FQE5xWBOQToVQTsVRW8V4qRUFYVgTsVhXioKgrCqKwqAnYqCtBOhUioK+CcisK8VRUFSKnirFQVBVFcE6FcVoJwKoqCrFXFUE7gnAqiuCcQTsE7xU8VP8VYrgnYrCuTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqn3/l/J/8vHL5f/BhwCETgGpIDOATgEIOFoDcHzgEIDgC+pG7eve1S/6tat7rXupDXSStWoIpGS4TSMQNIySMwpIyAaRkkZ8GJGdBtbwYkZ63tCKRkoIpGWDEjLCKRmEkjOvsEUjJOsIpGa6bOrgxIzsEkjIGJGYUkZVKCKRmqoDkgEjMJJGSYMSMAikZJ3qhp0dq9ru3X1I36FujPbXuxwKbr//waABfg0AC6DUDUDXBqBoAmQawJiGrhqDUGoN//PkZL8USgKcAAblrroTgfQAbhtQAag1QawaYNIAuQa12Lv9si7F2NnXa2Vsi7i/DZl2tlL9l+vL8tlUTUTUTUYQDIBlGUAyifqJKJqJ+p5Mf/U7TETEU7CxkxVO1PKdqeU8u4vq2ddnrsbM2Zs/tl9s67V2NlbIu5sgaA1Q14ExAmAaA0BrDVDXhpgTPDQGuBMA0gTKGgCYgTHDQGrDUGgNcNQaw1hoAmcNIaRIAtALVEgC1gteI8FpBaBIAtcRwkAWgFpBaILVBaIkAWgRwjhIiPEeDXwa/4NUGr+DRwaKBgX/8IhP//wiF8GBMGBP/wYEhEKEQmEQuDAoGFTAwLgwLhG/4MvCM8GSDJCNwZQOXg2DwbB8MPDDhhuGGBsHhh8Lrf4MCQYFCIUGJgiE8GBQMIFhELDDhdaGHhdYGwaGGDDhhuDYMBsHg2D8MMGHBsH8GwYDYMhEKEQgMCeDAsIhAiFBgQIhAYFhEKDAkGBMIhYGEC4GFCBELgYUKDAuEQsGBQMKEwiEBgUGBcIhQYFwYFAwgWDAoRC8GBAYE4RCgwKEQvhEJgYUIBhQkIhAiECIUGBIMC4RCgwJCIUGBAiFgaYLwiEA5cGXCNhGBGwZAw4Ng0MPBkqNqcoqorlh//PkZP8cygrkAFI0wjo7lfAAjhq4SnPor//psoFemygWmwWm/0C0Ci05adApNn/TZQLU5RU9FRFVFdTn1OFG1Gywv/UbUa9Ff0VoFgCwBbAtQLUCzAtgAchHAN8ImAbgBvwDd4RwjQDeAN8I0ImEQEQAbwRgiQjBHhHAN0A3vgG6Ab/CIhEgG5AN6EQESAbmEYI4RABvYRoRABuYRgDehEQiAiIRABvcA3QiQDfwjwDfCICPCJCJCJ4RwiYRwjBEwDehEYRgDfCNCOEQEQEcI+BagAd4FrAscCxAswLfwLAFgC1wLNVMQU1FMy4xMDBVVVVVVVVVBlBkwO3wZAZMIz//////+DJwO0IwI0DsA7cGUI34Rn4RgMuEZgywZQjAZP/hGAcmDKEYDIB28GQGQGXhGgcgRoMgRoHYBywZAZYMmBygyQYFCIUDChQYE4MCgaYJ/gwKEQsGBAiEBgXAwgQLrhdcGwcGHBsGA2Dgw4YYGwZC6/hdYMMF14YcLrYYcMPDDhdYGweF1oYb4MCwYEwYEgwJBgTCIQGBIRC/BgQDCBcIhAMKFhEKDAsGBQYFAwgTgwKDAoMCQiEgwIBhAnCIUGBQiFwiEBicIhAiFhEIgIoBooGieDPA+4GeDPCP//PkZOobXgrkAEY0jjazieQgBKKIBGgyBGhGhGgyAdoMmEaDIB2gyhGwZYMsI0GSDIEaDKB2QOWEaDKB2hGgygcoHYBygdkDtgygcngyAyhG4MgMgRgRmDJCNBkA7QjAZIRoRoMuByhGgyAyAyhGwZYHKByAcgMgRoHIEbCNCNA7fCNA7AZAO0GSEYEaDLA7cDthGgyAyAyQjAOwGUIyDKEYEaEYEYEaEbA5AZQZAZAZIMgRkGXBlBkCMgyAyQZYMngcmEb8GUGQIyDIBywZAZOEZhGBGwO2EbwjcI3hGYMqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqquDqz8GMDQIvBj///+DGDEGAMAifBj8IuEThFCIEQGPCLwiQYBFCKESDCETBhhGAZGEZ4MjgcSEY4GoRQigxCIEQGPCKBiBrgxwiBEwMIRAY4MQNMIkImDEGIRYMIRYRAYhFBjwYwNQYgwBgBh4GAMQiwYgxA0gahFBgBjgYBFhFhFCKEWBgEWEUGEIgMQYQMYRAMQigxhFBh4GkIgRIRYRAY4RIMQYgYhFA18IoMQYQihFhEgwhFCIDEGIRQieBiEUIoRQYhEwYDAFwGrBog0waAaQawacGsGiDQp9MZMVT3piJjJjK//PkZOYZBgjoaUJQ0DprofQgbhq0dep71PqeU69TpMdMVT6n1OlPKdJjpiKdFZkxlPKdJiJj+mKp/0xFPBoAmYaw0BpwJhDSBMQ1BqAmIEzDSGgNXDRDRhp+GsNMNAEyAmYagJkBMA1BpDXAmECZhoDXhqAmYawJjgTICZBrDSGsNAExDVDQGqGgNHDWBMIaQ0BrAmcCYgTHAmIEzDWGgNYaOBMw0BqDSBMYaA04aA1hqwJhw0ATKGqBM8NYEz4aQJkGoNMNIag1+GsCY+BMQJlDVw0cCYfDXw1ho4aQ0gTCTEFNRTMuMTAwqqoD37wjuhHf/////hGf////hHf/gycEZwRn4MnYMncIzsGTwOdOA507A507hGeEZ8GTuDJ4Rn4HPn4Mn4RnhGcDJwM3YM3gzdBm6DNwR3QjvA927Bm//Bm7Bm/Bm8GbgZvBm4GboR3gzeEd+DN8GbvBm6EZ+Bzp4Mn4HOnBGfA588IzsDnTgZPCM8Iz+EZ/CM4DnTgOdPBk8Iz4RJwGTidBi7AycTgiT4RJ8GE6ESdhEngZPJwGTieDCcESfwYToMJ3AycTwiTsDJ5OhEnwibwYb+ETdwibwibvCJuwYb/4RN/Btf/jYGyNv8bHLUtSzE0/LQBW//PkZPQcHgjQAFKVrjfDmgAge1eMLITcshNy1LX8si0LUTQtCyLQTUteWQmvLItSz4mgmnTJops0umEymDSPsnR9HwfB8k7Pvn0fAvwtcLXF/F+L4vQtQWuFoC0BaReF7AeBfwtcXBdF4XheFwXAtAui9C1haRdi6LwvirgnUE6FcVBVisKgrCvioK+KoqiqAhh3AQFXhwVYrFYCWHMOioVAI4dFWHPDgCAdDgdDmHcBIBEO+HRWAiKsBMO4dFQCAdATw6HBWHBWAgHBUHMOf/gICsOCoV4qw7+KxWHA6KhVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVC11Fz1+NP+/Xkqpr9OfuhQ6lZNWf+XsZc/si+KNoOj/Ntai9j7IISgZAklTqQhjToNTeQoreRdaSDODWvYAVFaWWkQmVuZPP8bRUzq896vc+XS6mm5gnnW7JLnV4z9N5XnW4k86x+uyHyxnWkmdborzraff2SvOtvljOtjd/5XRW8MivOsry/K3gUzrFPS1eFTOttTsul1+lLGdbV3c53h51mdbK7xPOr1SpnWlM63kedZnV4XPK86onnW7myrnWTmRTOqascoabXd/L+yuzS95dv1efjhl92ntYyTuIb6wuWRZFmWRa//PkZOcb/gqMACDf1LTLofggA9qc/gKRZiblqWYm3E24moSQnR9BJj6JwfBaFqWZZFoWvLUshNPxNuWn6bTZHgozRTSaNAY5oGjFQVgTkE6FUVorioK8VBXBO8VRUioAhxVioK4qAnIrYrCqKsVRVBORXBORVFcVcVwTgVBUBORUisK4rCoKwrxXFYE4FYVATjFcVhX4rcVBVFQV4rxVFSKwqCpFcV+K8VhXFYV4qivFUE4FaCdivBORUBOfBOgToE6FUVYqisKgqCtxWFbFQVxXisKgqRU4qioKuKwqCvxVBkH/4Mgf4Rg4RgfgxZBizhFYEVuDFvhFbBi3CKyEVsGLf/4MgAxaDFoGsWYMWgaxYBrFngxaDFnCKwIrAYswNas+DFgRWYGtWYMWBFZgxbgaxbgxZCKwGLIRWgxZCK2EVmDFmDFgMW4GtW8IrAYtBi3Bi0GLAYsCK0IrQit4MWeEVgRW+DFsI9cDW9AYtgxZhFaBrVgMWgxaDFvCKwIrIGtWhFaBrFuEVvBi3hFZA1i0IrYMWYMWAxaEVkGLAisCKzBizCK0DWrIRg+EYIRgQjABkHwODABkDhGDwODBgyAEYIRoRvww4YcKILYKILfhRg5htjY4OQbQ2hNAH8su//PkZP8cRgjWAFAUYjwDofQAi9pcJry1E1LUsuWvE2E0LQTcB+E2LMTctQFEEcWnFYVwTkAI4rRWFYE6BOhWwToBBAQgnIrisETANwIiAb/COEQEbgG+EcA38A3wjhGCMEeEaEeKoJwK4J2KoARBVBOIJ1FWKoJ0CcCuCdRWFcV4rioK4rAnYJ2K0V8VYr8E4xWFUVBVFQE6FXBORWFSKorxVFcVwToE5wTvBOoqwToVIJziuKwJxAQgnUVBUgnAqQCaCdxWirFaKwrRWFcE7FfFeK4rgnIrAnYrCoKoqgnAqCrip4qgnCr/////8Iu8BjvP4Ry5/8Izggc4Zw4RnD/hGcP8GThBk4eDJwgycIMnDwjOD4MnBA3eu9hF3kGO8gx3vBjvAN3jvMGO8CLvAY72DHeAbvXe+DHehF3kGO8gbvHeBF3oG713gG713vgx3oMd5BjvAi7wGO9A3eu8BjvMDd470Iu9wN3jvQY7wGO9wN3jvIRd4Bu9d6Bu9d6DHeAbvHewi7yEXecGO9BjvQN3rvIG7zykGO9A3eO9CLvYMd6EXegx3gG7x3kDd470Dd472DHewY7yDHeAKomwmhZFkAof8tCy4m5aCbcTUswFYsy0/LQTX9NBqBgJgYaY//PkZPcaTdCuAFgWlkI0DfQAe9r8Jxz6CShr8++JsArgjxNBNC0LQsyyLMsgRxallyyLIsi0LUTUtS0AVwFPia8si0LMTXiacsxNizLMTYTcsi1LMsy0E2LUsuJqJvxNyy/E1LMteWgm4mpZlkJuWRZFmWnLQTfgncVATkVcVQTsVIqQToVxWFeK4rwTmATCsCcAnQJyKoriqKwrxWiqKoqwToVRWBORWBOBVFSKgq4qAnAqAnArRVgnIJ3FYVQAgCriqK4qYqivBOsVoJwKgJ3FYVBWFfBOIqCoCcivipxUFSCd4qRV4rCvFaCc/BOhW8VxWFUVhX4r1eX/+DHgaYMOEX/CJgwwYQY8GODH/wYf4RAiQiAxCKBj4GAMYRQiwYcGEGMIoMfhECIBgEXAwCJhEA1BjhF+BhCIDEGARYGoRAYgxCLwYeESEUGMDEIoGAMAiAwBiBrCJ8GMGGEWEUGIRYMAYAxCKBiBgBqDDA1wiBEBiDAIsGIMANANMIoMAYhEBh4GMGMGARfAxBj8GAMANYRAYBFAwCIBhgYhEwNQMYGIRAMAiwNYRQi4RQYwYgahEBiBqBgESEUIqa6Z6bTBpGkmUwmkwaZpJlNCkifmkaaaBymgm0wmRPxSDTTa//PkZOYYTgboZUAQIkCEFgAAe898YTZpJtMJhNilphNdMJhMGgmemDSNJNmkaX6aNJN9MJhMc0E2mzSNJMpg0umU2mDS5oJlNJtNJnpg0DSTBoml0wmzTE8TRpGgm00mkzzRNNMJg0jQTSb/NFNdNGl02KTzRTfTPTSbTKZNLphNJpNmgmUymkwaaaTKZ/TSYTBoJr/ifptMpr9MJlNptMpg0kymumEwmf+mEwmOmkymTT5ppv80eaHTCYTHTSaNBNJtN80/0yaBoJo0k2aPTPNA0OaSaTJoplMJv9MgBAB4MBUGwbwVwUBkFAYDAU4NBoMBqhAELk//h/y1/vz6/6zMnEglwqnIsVSHBzAMMIqXiLgxS8ucoLCKl7VwipeupwYpeAxS8Z22hSl4U+qE1L2goKUva1GUJqXqwkpeAxS81IQpS8smBqXql6E1LyEVLxdEJqXoSUvAmpeJhFS8rpH3CKl6EVLxPWFKXgDUvVL1LCal4kuDFL2EVLxFlPClLyEVL2FKXhdwYpeswGpeqXkGKXqLAxS8wYpeqWk8KUvATUvQYpehJS9Bil6yoUpegipeZT2x1vN5NR2X3KrRuXjFmaS0AUCyE1BHflmWZacTYsvy05ZgAIs+WQCqJoWZ//PkZOwZ+gaYBgbm6EQMAfQAe9r8ZCbiaFkWv5ZibialoArlryyDtCSnyfR8hrE7PpNmiaIxDTGKafTJalqJoJoWQm4mnLUtSzE1LUsxNyy4mpZlqJpy14mgD8WpagKvLIEcJuWnLItBNhNhNxNgH8tSyLMTflmA/iaCaFqJqWf4mxZFmCdCvFWKwqivgnQJzFfwToAIwqgnOKgqCoK4J2KwqisKwJwKwqCqKgJwK4rYqirgnIJ2K8VhVwTmKorYrioK4JwKwrRWFQE5FUE6BOwTgV4qYqiuCdAnYqAnMVBVFUVATkVBVirioKoqCviuK8VwTjxWFfivFUVxXBOcVuKvFaKoqiuCdeEW3Bjb/gxvhFvCLYGN8GNwi3CLf8DbtuEW//CM7+DG+EW+DG8DbNgi3CLfA2zYItwY3gbZuDG8GT/Bk+DJ+DJ/hGdCM+EZwMnQZP8GT8GToRngc6dBk4IzwZOBk8GTvhGdBk+DG8Dbt8DbtgY2CLbBjYGNwi2A2zYDbN4RbhFtA2zcDbNwNu3CLaEW4RbeEW2DG8DbNwY3BjYDbNgY3A2zYItwi3CLbgbdvA27YGN/CLaDG4RbgxsDG4Rb8ItsI7oR3cGb00m0wmTT6aTZoJgUpMc0kwaa//PkZNcYqeLUAAAUHjw8DgQAe88cYTXTXNBpXiQdfLVpLJoaCSJs0TQNAbRpJpDWleaGlDmlfQ9fQ7tBZoa0IeOw3Ccq44TcHgrufDVzQNA0Om0wmDTNE0EymkymumU2mU0aSY6ZE8NFMmiaaYNDptMGn+aJpdNptNps0OmU0J50wNtMGmmEz/zQTJpppNplMJlM9M8FAYCoKAAApgqDIMACwAQbBsAMGQAQaCkGg0GgyCkGeCgNABwAAUgrwA+CoAQNAeHCAOAeAyIQHBwgDg4QYDAGgMEEOEAeA0Q4DxAHh0PEMGYMBsFQYDPgoDMGQV4NBqryAZfhGfwjMDl4Rv/wjcGT/4R/CPBH//hH4H3gzv4M7A+/gzoR4GdBnAf+DPBnwj4M7BnwivA1QIpCKcIpgaqDFgaqBogMWBqgGqgxQinA0XBi8IqEUCKBFcD7/CPwj0I+DPA/8GfBnQZ8I+EeCPwZ4R6EfhGcI0GSDIDJCNCMBkgdsIwGQDkBk4HIEZgy4RoHZwZQjcDtCMgcoRgRoRgHKDJBl4RgHIDKDIEYEaEZgyYMoRsIwGQGQIwGUGUI3A5AZMI2EaDLBlwjQZQjAjAZQoqIqqN+pypx/qNIqoqqNKNKcqchwGrCAPqN//PkZOsaCgjiBUZRnkhEBfAgw9tw+iu1RUqp2qNUNalOVG1GkV/U58sLU48sLLCiwFU4hAYA+qQQgasVhVIYQNWKwmAKpvasNoHIDm4OQHIDlGwNgbH4D+JuWQm4mhZFoJsWgm4I4TcbA2xtA5ODnGyNoHJ+NgHKDl/LMBXLUtS04mvLQteAqCaCbFoWQmha8bQ2Acg2ht8bI2RsjaGyNrjYGwNvjbByja/GxFYE4ipBOIrwTiK4J2KuK8BAK4rAnAJwKkE4FYE7FUVgEIqgIRVBO4qRXFQVBVBOMVwCcE5itBOoqAnQqCpBOIrxVBOoJ0KwJxgnQrCuKsVBXioCcCqCdAnYJyKsVYqipBOgjwiAj/8InhH4RMIkIioAC4RiJCMRP////CNk//Blkv4M6F8I9C/8GWT/8I2SwjZOEbJQZZIGWShGyYMsnwj0P///CPQ/hGyQRsn8I2SCNkgOyVkoMsnhGyQMslCNkoMsl4MsnhGyXCNk4MsmEbJ/wZZP8I2SA7JWTgyyQMiKDIieEYiAcRIihGIkIxFwZEUIxEA4iREgcRYihGIoHESIkDiJEUIxFwjEQIxEwZEWDIihGIoRiKEYiHcYJRIr9kzDmO5cIaApXE/NA0TTTKZGym/0//PkZMQWjdCsAwAWCsQ8Cfwoe89cyaXTKZACgKxsmybQFQCyPQPUbRtA9x6QAoegHKmRtClpk0RSkwaCYE/GyaaZ6ZFJTaaTCbTabTBomgmk2mxS0x0waSaTI2gcgOcT0T5MiedM9M9NCfCeGgNhMJlNJoT1MdNJhMjaNPptNGkmhtpnmgmv+KQmRSE0aaY6ZTKZTRoJg0U0aBopg0emU1/xPzTTaa5o80DRTZoJs0TRNEUhMikJs0P0x0wmkwmUymkwaKb5pppNJg0OaInhpGgmeaSbTBp9N/ptNJo0DTNAbOCkGAwGABgA4NgwAAAMAPBgAQKAyDAZgoCkFINAABWAEDAUBTAABgMBTgqACDcGAAQYDAUqLUlVt///+Bj4MIRcGH/hE//hEwY/wi8GPBj8GH8IgRcIv4RYMQi+DAIsIsIn8GHCLCJCJ/BhBgBpgwwifhFhEhF/gwCIDAGIMIMAMQYBFhFBgDH4GAMQiQNAYAwwYBECIAMIAMAAiHBgAMIAiAIg4MABgABhADAhEAGAARCBhCEQhEIMABh6EQAwIMABgCEQwMAQYD4MDCIcGACIQiHwYGDAhEOEQ4MAENB8hJD7PsnXJ0fZ98+D6LItQR3PgnZHmgPYYRopk0xj//PkZMkU/gLsKkITrkL0CfzIetvgJtNdNGkmkwCPLITf8s+WpaFmApAjgFUsyz49jSTCaGMmkyaRZlkJsWpaiagKBZlmWomh8c+CdcnROj4Pk+Akh9E6DsJ0fJ8c+OTs+idk4J2Tg+j7Pr8nB9nwfAa59k7598+D74Sk+eEkFQdDmKsOhwBEVYCeAiAmAiHcBEV4CYCIWmCHF6FqC0haRcF4XYvxfF2LwvC+FqC0xcC0C/FwLSFoF0XBfi7C0xei8LwvcLQLoWoXheC0BaIWoXBdiNiMY6cZ8RkZxnjqOojAz4zx0HUdBGozjoMw6iMjpxdi+L4uC5F/xd/haIui/bZ/+DGBp4RYMQYgw8Ivgw/CJ4RfBh/hECKBgEUGODH8InhFwY4GoMcIgRIMcInCIBrBhCIESESBp+DEGARfhEA1gxBjBj4RAYQYgxgYwiYRcIgMAiAwBjCJgYAawYYRQMQMAYhFgagYhEA0AxA1A1CJBhBgEXwMQNAihFhFAxwYAwgaYMPCJA1hEBiBrwYQiwYwiBFwYhFgxgawihFCLA0gYAwCKESBoBpCJ4MIRcGOEVB9ALR8BJj7/PonB9HyEoJwfZ9E4Dt5OeTnlqJtxNAH7nwfHPonJ8E759E6PoJI//PkZOAWKgjoZUAQYka0Ffgge9VcfZOCdE7J0To+Cc8JWTo+D7J0EqPoO0+T5PsJSfJ9n0TkJUfJOeTknPPo+z6J2Ts+ycE759/k7Pg+z5J2TonBOeTkJUTg+T5DtJ0Tvk5Pjk5DXPg+idH2HYfR9E6PgnR9k5JyfZ9cnR9cNYJSfROidE6Ps+Cdn0fB8E6DtPs+CdHwfH5OAlR8nyfB98+SdE4J0ff5OidH2TknfPkJMfYSg+Cd8+D6PsnP/JwTk++fYSQO0+D5J0fZ8HwTjn2AWDgdAL8ApALQCkO8GACwMgyAVBiAVhzwY4BeDIMgFMOh0ArDgc4BeAV4cgFsOhz/wP225HGw7wCsO4M8AqHP/+DEGQ7/8OgzgFoM4Bf4MhwO4BT4cDmHcGfDnw78GcVhUFTFXFeKoqYJ3isKuKkVgTsVoqCsKwrCoKsVQTqKorYWoXhfxeF/xdi58XOL4WmLnFYVQToE4FXiuK0VwTnFQVRVFcVhU4JzFfDgdhzBnDuHfALgyDAMQZBgGQCgBUAoDAMh3BkAsDMGcGAYgxBn+HAC0ArwCwMAS5adAry0yBSBfoFBVaKqKwVUVrRXUa9FUOEqVUjV3ySPLkvkzlNlNn02E2S06pvVKWACECpW//PkZN8VDgj+zymq5krb1ewAxJvkqe1XysDVFSqlVIo2o0ispyFVoqKNIrKcqNKcKcFhSjaKiKyKhYWiv6nCnCKijajSnPorKNKcKcqcIrqNoqKNqcKNoqKNKNqNKcIqKN//orf6BSbKbKBSBXlp0CvQKTYTZ/0C/LTxFxFoigioigCLC4cRYRWItEXC4cRcI0IoFwwXCiKwjQXC8LhRFcRcRQRSFwoikRcLhxFRFguHiKRF8E7FYVhVBOgCYVRUACKKgqgE0E6ACJFYVoJ0CcgnQrAnMVwTgE6ioKoRwDdhHhG4RARgDcCMEaEYIiAbwRIRuESEcIwRwiYRwjQjBEgWoFuBa4FngWkIQQigwhEwigx/CL/4RfCKEQGP/wYiEUwYHwYGDAwYAGA4RCEQBEGB0rCNcGU4RrBlcIsGGDCESBiEWDCBhCIEWBiDAGHCKEUGEGEGMIgMAiwigxCIDADQGIRfCIEQDXgYYRfBgBoESEXwY/CJCKEQIsGIRODEGIRQYgw8IgRYMMGAGGDEDGDAIoMcDQIkGMGGBrgwCKDAIsIkDUDWDGDDA1hE4RQMQYgwBhhFBhBh4MAMYRMIoRAiAxBjhF4mhZFpxNBNy0LQTUTXhKglR9FqWpaAP5Zi//PkZNYXkgTkGEJwlkXcDfQAe9r8bCa/k5JwTriacsizBHE6CSH1w7efHLPgjuJqWnLITYTX8tRNAH/ialqJuJuWZaFkCO4m5aE7J2TonB8E559nyEnJyfB8FmJrxNxNhNS1E3LT8sxNC0E0LTlqJuWQm3E15ZiaFqWRZiaCagP5aCblkKoqCsCdioKoqwToE6FcVwAhRWBOIrCpFbgnEVRVFUVIJ2K4rAnIqioKgrcV4riuK0E4FcVQTsVxUBOoJ3FUE7itFYE7FYVRXFUVwTkVoqAnYJxBO4rReF4XYWsLWLoui4LwuC9AdsLQL0LQA9C8Lgvi6LguBahfFwXAtIvQQ4vCqKwrxX/8E5xXit4JwKzBnwj+DF+F1guvBiQYkDRIR8I/gz8Gd4R/wYsGLBi8I8DPBneDPBnwZ/8I8DP8I8B/0Gd+DPA+8I/+Ef+DOgzvwj4R/hHoM+Ee4M4D74M+Ef/A/7gfcDPBn4R7BnfCPgz4M7Bngf8DPwjwR6B/3CPwj0Gfgz+EfBnhH8GfwioRQGIBqgRUDVAYoGiBFcIoBqoMWEUA1UDRYRUIqEUA1WBooGiAaqBogRUGJwigM8I/gz+DOCPwj/Bnwj3BnBHgZ4M4I+DOhHhNCz5aiaCb//PkZM0YugrgAAASBEUEBfQAe9rclmWompZ8shNyzLMsy1LMBUAfhNxNicBJCcE5J0JpyyLMTcBVLXloCO5aCagKACiAqflqWYmvE3E3BHlmArFnxNRNC1LUBS5aFoWhZFmWR8k5CTnxz4PonZ8E5Pg+j4LUshNQH4TYtSzLMshNBNhNSyAViyE0FQE4FYVoJ0CcRUgnYqisKoJxFWAhiuKgrCtFUE7FQE5iqKgqRVFWKorwTsVxVFYE7FTFTBOxVgnAqRXBOPisK4BOK0VoriuK0E5BOxUivFcE5FYE5FQVBXFQE6FQVBVFYVxWioCcCoLovi4LoWiL0LSL+LouBaIvBahdi6LoWgEMFoC1hacXxdC14uipiqKn8VPFbiqKsVb//Bm/+EXgx4RdhFb///hE1/8GLP//CKwIrQjoGa/wPewZqEdYM1wZqDNAetgzWEd8GagzYM2DN4M1wjoI7Bm+DNhHcD3rA9awZuEdwZvCOwjsGaA964M1A978I7hHQR0DNge98I6hHYR1wZrBmwPWgPWwZsI7wjqB63COvgzQR3BmwZsGaget8D3rCOgZoGa4R1gzYM0EdwZsI6CO+DN4R1wZsD3oGaBmwjqEdAzXCO/4R0DNAzYR0WgI8TQT//PkZL4XFgTcAE6Tekf8EfQAe9t8YTXiagKwCsJuWXLMTUtC1LMTT8TYTUJP+fAdomomoD8JuWoCgWoI7iaFkJqJqfZ8hrk4CSE5Pk+Cdk5PgnBOT7JwTg+uWZaiaCbcsgFAsy0LPlmJsWYmom5ZFmWpaibiaAjy15ZFkWQm5Zll+JsJqJvy1E0CThJz65OQlJ8H2TknZOT759k6J3z4PgTQTcsy0LITflmWfLUsiyLITYTcTT8syzLQsi0LMEcWZa8tSyE1LTibibFqWYI/8shNCyE1LQsy1LUTUBTLLloWXLUsiyLUtBN+JqJvy1E05Z8TcsxNeWn/LTnxydHwfZ9n1ydk4PsnHJyfR9E4JwTgnB8k4588nB9cnR8c+D7PjxV4q4r8VsVgTgE4/itFShX/xV4rirxVFWKoq4qfxX8E6xVxUBOYrCtwTvwTj/xV8E5/irBOsVuKwqRXFTFQVorCrFf/xWioKwrCtioCcxUFUVAToE4FUVxWFQVhUBO4rgnUVIJyKkVgToE4ipFUVoq4qisKsE64qCoCdxUFUVxXFUE78VxWFQV4qiuKgqiuK4CCK2KoqirBOATsE4FWK4qxVFUVhVFYE4gnIriuCcQTiK4rCoCdCtirBORUiqK2//PkZLAWsgzuADQNNkZj/fjIe9r8K/FXFUVwSE5aiaAKgmhaFpxNQkp8n3z5PsJOGsffLQsyyE1LItS1E1Af+CPLMTUTfibFmJoWQmxanzydHwTsnASknBaCalqWom5ZcsxNyc8nASsnHDt59BrhJgkpOicBKg7D7JyfZ8E5Pk+Cd8EeWXE0LQsiyLQtSyLIsi0LUTYsy0E3LITQshNiyLUsiy4I78shNy0LMVcE6ipgnArRVgncE4wTsVIrCqCcCtBOYrwTgE7iuKwqCoKwrcE7BOQTqKgqiqFpBEC1gPYD3F0X4WoLTF0Xxei6FqC0BaAtQWgXxdwtWFqC0haBW/FQVRUBOBUFcE6ioCcAnEVRX4rYrxWFUVBViuLsXgtAuC6FoBDBaYvi7F8XxexdF8XhcFyI//gx//CJBhgxhEwY/+EXwYgx8ImDH8GPhE8GPhEwigwhFwNQNQNfhE+DGDAGHCIBrhEhEBh4RQMAY/gYBFBhhEAxCIDCEUDEDHBiEUIoRQY+DCBp4McGEIgGgMcGIGMGIGIGgRQYgxCKBiBjBgDGESDADWBgEUDEIuDADWBpBiEUDEDDgYgwBgDEDQDUGIGgRAYQYAxCKBhCKEThEBgBiEUGIRQMQiQiwNAY//PkZKwWNgjoZUAQREakFfQAe9t8YMfwi4GBaFoJsWpaFlyyBHctCzE25ZiaFoAocsy1E24Sk+idk6LMTYTYTQsyyLUtCyLQTUswFYJMGuTg+CdHwErPotAFAsuJtxNCz4m4mvBHiafloWZZ8YppBqzTNI0jTNBMpg0jTTZZFqWfE3Af/xNf+WomhZ8suWZZCb8tC1LQtS14m/LQtBNhNOfR8hKCc8nHJ2EqCUE5CSHxydk6Pg+D7Ps+Sdk6LUTQTcTcTctSz4mwmha8TXlmJvyy5ZiaFl+WpZFoWZa8TQshNCz4mhalmJsWfLQsuWRactBNRNC1E1LLlly0E2PgJWfR8h2H2fJOSdnx+fXPs+T5PgNbnzz6Po+T7JwTk+z4PonROglJ84qCvxXxUirFX4q4qeCd1f8InCI/4R/CP//4RMI/CMEYI4RAR8I8IjCJ4REI/gG8ESEfCOERCP4R/+EaERCPCNCNCI4BvQjYRMHINobIOfjZBzDZG3xtja42gcw2PwcvG2Nng5+NgbY2wcn42htDYGwNrjYGwNsbX42vxscbI2gc3Bzg5Qcg2uNvjaGwNgbI2+Dl4OUbI2Qc42RsjbBy//g5eAboR4RwjQDeCP+EcI8IwBuwjwjBEBEA//PkZKoZMgrqADXt9EV8FfQAe9scG+EThEBGCMESESEbhEQjwjwjwjBHCIwiQDcCNCI/hHE0/LQBSLITf/lqWoSvk7LT8BWLMtRNAk58E7Po+CyLQTcsyyLUsi0Afi1LUTUTUtBNS05aFkWpZHzwkoSgnB9HwfQSsTYsizLQtRNRNgFf/8NcJWEmAWCdn0To+T4CUHyGtxNiyLT/lmJqJqJqWgmpZFqJsWgmwmwmwmv5ZiaibiactBNv/yyLTiaFkWZagKgCmJqWQmgmom3E0LTibAKfE0LLiuKgrYqipBO4JzFUE5BORXBOhVioKwqRWBOYJyKkE6BOIrYqCqCcxVxVFUV8E4FSCdcVgAgCuKkLTBDC6CHi+LwuRfha4uC+FpF8XQtAWgB2wtAWoXBchaBfwtQWnFSCdxVxXFUVhUFYV4rgnOK3wTiKir//1eDCsf//7/+wOYd///ei/f6lmiqGXpyOlCSRm+yP3UtDhFIzqBhwCFHAGFHABYGcAnAAMOAAYcAAw4BYKOAIROANgicAQYcABE4AAzgE4B+1wmcAwYcAK+sDOADgFLCJwAlWBnABwABnABwDWraETgEDOADgDBiRkgoJpGaP+64RSMoRSMGBiRkkwMSMlq7AxIy4//PkZJUYEgieBFw3fkL8FgAied8AROAAicA8DOATgAGHAAROAFwM4BOAGBhwADDgAGHANQUcAgicAYROAfgw4AIkbPNNNpo0TSNBNJgUs0l7lomEwmRSOaRp80zQFK4nvTInnTEGgwGwAwYmOmkyaInppJpMJg0k1+KUaaaTCb42U0mBsGiaSaNNNpo0OaKZNE0jTTSY5oGmaZpJrphM9MGkmDQTCZBzpg0OKR+mBtdMJobfTSbTfG2KSaBpGgaZomiaBomn02mOmkwmjSNPpjmmaKZNA0zSNFNCeClJkT40DTTCY5oJk0kyaJpdMppMdMdN80TR6ZTXTfNJNmimumem+aKZTKaTaaTRops0kwaZppk0+aSa6ZTKYTfTfTPTHTKa5omgmEyaJo9NmkaRp/pnmmaf6aNNMplMplMdMpv8TxMJlNplNJn9MdM1OM6hWa/EjiRiRiO/xIcSP+GgCZQ1+GvDRDV//4aP///4I8EwTwTBLwS/4AHgnBHBHgiwR4JgAgS4IwAYPA8ADg+AAAAFwfB4L4WADC2AGAGFwsFwuD2FgAcAPC+F/B8L4X/B7B4L4WwuD+AGDwXACAAC2D2AEFgfCwAAAAXB8LhcLeDwXCwPYPA+ACACD+AH4XwA//PkZJMVIgb2ejVLxkBMEgTIe898vwv4X/ACB/C4WwtgBg/gA4PA9gBeFhLRTXTRomkmP0yJ6J+mPy0NA0OvibNDQmfzTNNMjaFKNATxMiemiaRoGkmE2mkwmTRTHNBMGiaCZTSZTZomh0PaV9fX2hoX14kzSmOaCY5pJr80U0aPTfNFMps0jSNJMmiaSaTKb6aTKYNLphMpg0eaJoGkJ8aBoppMppMJg00xzTTabNFNJpNJpNpnpg0DT6bTRoppoJMWrSh/690NQ5paV5D2le/LND2hoQxDF/rzR1/r/aWhfaWleQxfXmheaevNDS0tLQ0ryGoch/X15D+vLy+0oc0ry/19DUOXuvIc0oav9oXkNX1/r3X18QCGHQGQHB8PiAPAaHgPDsBgcH+Hqv//+DJ0GNuEW4MbQY2wZO4Rn///4R34R3Qjv//8Gbv//8GbgZuwZvCO4GbsD37+Ed3A586DJ4Rn8DnToRn8GTsGT8GToRn4HOngyf4HOnBGeDJ0IzgjOCM8DnTwjOgydwOdP4RnYMncDbtwY2A27cItgNs3CLeDGwMbwY3CLaEWwRbQi3A27eDG0GN4G2bBFvA2zcItgY3A27YGN4G2bAxtA58/gc6eDJwHOnAyfCM7A588//PkZLMYngTSAFAUhEYcDfggw9V8DnzwOdOBk8IzuEZ4MnAyfgychsy7F3oE13Nl9sy7myrsL6qqOU5anCqkHqNDI3KVUTEU8GNU7U6gxyHKchyVV/Xa2Zspfds3rubK2VsjZmztk9djZi/TZV2NnXYu0vsm0yaBoDZNEbA2k0aKZNjmwbH/Nvm2bRtGyBVArD1G0bQPUevg9h6/+PRzZNkCrzZNgesegesermyPQPXzbHpNvm0PQPUPSbJs82TaHqAtj082h6DaNn8eo2DbHrHpNjj1m1zYHqNo2jYNnmwbPNgek2ja5sj0D1m0bJs80xtJlMdMCeps0U0meaaa6b5p/mmmU3zRTfNFN/pgHPzQNPmkaaaTXTKbTRoJk0zS6b/NBNdNJlNGj02aH6Z4IgAEEYJ4I+CMEQJcEUEXBOpHDX/w1Q0Q1Q1cNWGvw0Q0/hp/AmIaA0cCYhow0w1/w0hoDRhpw1w1BrgTLDXw1BrhrDQGgNQEzAmOGuGiGgNfgTHDQGoCZw1w0BrDWBMIEzDVDTDUGgNfAFwGjBrg1A1YNcGsAXAaQaABcBqg1g1QagaINYaoEyw1Bow1YaA1hoDSBMw1gTICYQJkGrDQGoNGGmGsNcNQawJkGuBM4aIa//PkZKAYngTsATQNQkKMFgDifh7AYagJkGsCZ+GkNWGiGsNAaYaOGgCYgTENQaw0Yaw1Q1Q0/hqw1BkAfmkaCb6ZTCY6bNBNLwmqGA5fzSTCb/lgwXOmMmMmTQ5pmkmUwmkymfzRTaZFJ6aNM002NrppMpg0kwKQmE2m0yKUaKaE95o9MJj9N9NJk0UymOaSaE/TabNNNmmmk2mU2aHTKZTCaNDjaTJoGimkyNvpk0TRTHTf6bTRopg001+mU0aXNBMjYNA0k2mjR5pfps0U100mUz0ym02mDRTHTaaTRpplMc0kz0ySA000mDSTKbNI002mzQTHTaYTf//NA0zQTBodNJk0UyKSaaZNJMprmkaP5oGmKUmEymUyaCbTHNBMJlN80DRNBMmkm/00mUwaZpprplNpvmiaJo80+aSa//TaY/6ZaH//wY4ReEX4RIMfwiAxBh/BhCJ/+ESDDwYcIn+EQIoMAiQYAw8IsGIGGETBj4MP4MQiAxhEAwAxAxBjBiEUIgMIMcDCDAGIMcGMDEGGBgEUDTwNfAx4MAiwiQYgwBgEUIgMIRAiQYhFwYAwBhA1CKDEIoGoGgMQi4MeDADGEQIkIgGMDCDAIoMAiQiAYwYYMQNQigwCJBiDEGAR//PkZJwV+gzoZUAQRkZsCfQAe9tcQYgx8GEGIMQiwMAY4MANAMcIoMSyE1E1/LMTUtCz5OD5PkJJz5Pk+uA/FqWRaib8TUTUTQtC05alqWYm4momgI8TYsxNCzE3LUtQFEsgFM+z6J0fB8nz+TsNcnB9BK+Tk+g7CdhJT6LTiaFqWYI7lqWoCvy05ZlnxNy0/LUshNBNvwR4moCj+Wv5ZlkJqWpalkCOE1E1LQsiyLITUBULLlqWZZlmJsWhZcsi1/4CiWpalkJqJuWvLXlkJsJpyy4mwm5ZlmJuWXLUTQteWgmgmwCsJoWfE3LMsiyLP8TTlkJuAolqJryzE1LTibCbloJuWhZFoWYmxZ8TcXIvxeC0i+FrF0B2i4L8LSL4uBaIDyCHF8XRfF6FqgiwtIuYWoXIrYqAncVvxVip8VIqCvUxPqtFbFf/4q/8V/8V/iririr8VATjxXipxWgnYq+KwqfFTFQVoq+KsVBW8VhUisKuK0VRXivFYE4FTBOhVFcVRV4riuCdCuCdCtwTiCcCqCcgnYqxWFcVIJwKsVxWisK8VxVgnArYqRWFeK0V4qgnQrgnYrfBOoqAnAq4J0CciqKviuK3BOoJyKsE4FUVoqisK2KwrAnArgBAFSK4//PkZJ0VagjyJgGtbkOkFfwAbh4AqRViuK4J0KgrCrFUVxVjOEeDQgjlcT4T40xtjaNI0uaI2QciGNJIl4kJZtCGIaSckIm6GL3TQ2zRTY2UwmjSNE0fxS02aY2BsJs0/+mzSE8TQpHTKZTaaG0aQpApZp/mmm+aHTfTCZGwNgUk0E0aRp/ilJlNJgT5MmkJ9zQNA0TQTH6ZG2mk0mk0mk3zQTKY/G3zQTHTabTBpGgmU0aKaTJpJpNJtMphNjYTfNE0emkymE2mEyaCbNBNfmkaJpdNJnpg0k0mDTTCbTaZTBp80k2aCbTfNE00yaCb6bTZoplMmmaKZTKaTJpmiaHTXNJNdMDbTab6Y6Z6ZNNMJhMJhN9NJrmim02m0ymU300aPTSa6Y//5pJpNdN/9NppxWxU4Jx/xWxU/xU4qcV/ipiuKwqxWFbioK/8VIqivFTwTkVgTkVor4JxFXxX8VcVxUFQE4FaCcwTvBOIqwToVuKwqCtFUVYqxXxWFeK0E7FQVYrwTnwTsV4rCqCcfFaCcRVFQE5gnAr4JyK4r4Jz4J0Koqip4rCvisKoJ3xWBOME7iuKgriuKgrAnAqgnArxXiqCcgnYJzFQVQTmAEIVYrwToAIYrwTiKkVQTkE5//PkZK4XGgzsADQNAkIcCfwAe898FXFTFYVxXxUFQVkzzS5oilg5TTTY2kyaJpJtNGgJ8aKaTQ2k2aCaNI0eaSYNJM/tKHEiQxfJG09MmgaSYTRppg0TRNNMJlMptMCfppNprmiaA2jQNLmmaRppk0jRFLNP9NJhMGmaQpZpJhNCkGkmE0J+mxSk0m0x02mjRTKbTCZ42EwaQpJpptNprmgaRpmim00J4mzSNM0kymkyKWmE0muaKYGwNjmgafTPNE0U0mUwJ7+mem01+J8mhSk2mjRTSb6aTCbNBM9MpjpjppMpk0E2mE2mE2mjSTfTaZ6YNFMcT1MpnprptNmim0wmE100aSaTRo9MGjzTTHTaaTfTSaNLpoFMAAFYNBQGwAvwAYM4NgqqkjaAN3d3d3etERNK5CZ/3Ctf8AaiAc/u7vaIn/+8XPv//+GDKv8W1/+AC8K4Yw+94xe940jgceOBwOcRaxGwH4EuNIjBfxazB8HhkwVjIAII/vDkjG/wAcJPeF5e98hNgSYLWMFvhZ73pX06aoehpmh01hMJtM9K3TKY9E10x+memvlIpZM9MUTCbShbUrtM+n5ophNZuXK+0wmemumMCemkmvc0Uwm/lJJlLe5oJZI0SyW6R0mE//PkZLcXlgrzECFvrEmMEfgAfh7k2aORpbTYUo9SBNsekGYNVKgqg6hrUXK4Q42DOwPWbILEzBSumEgkWJPU8S72G5wUuGDwguEKa1Q0UykS3Bn7FJNgg5qoEgpsGabBtGabZt7NrKCNgLYes1idmabBtm2bZsBRm0PQbF9mwPSPUBbMwzB6QojYM42ePTzbMwzR6TaNs1eBVNv81yDUJ2QYhJtD0m0PVe+x6T2M8HsbFwsh6B6D7HpugT2uZhO6HqZhmE7ISZhhkFNcghtmybBnnsD1Ho49ZtG2bZs5PVBc2EEepCaEHNjj1EJHq5smabZtmwbNEEPR+bJse9z2PY2T1SN0rdNJq6yXI06COvNJj9MGmkkGmUj7pI0TToNGlEsNEnCW10ymi5FtNFKpvps0kz0uW3aaTF00mTSzdNJu0KFYz1KjaGAhyoQCFGM//zFARgIUZ/oZpdCttay6M5drW1joSj6Ekk1b7J7R7aoQNlPrWBKLTTzOsGT5yYxLrtHTy2iUxEkES0HIBVD066VjGj31odPkkSjJtbWs6OIjKmlXHR9K5MTv5pdZolE10kk2lly74TFx5KTXeTGLrS6ExiucvJSSDUdXZm3NLn1rtYBCUEoRj77WOhCPc+g5//PkZJ8XPgzoAABMTrz8BfQyY9ONGxJULutaa1TE5LHxWEo+XecmMa3p0kqBCR6qOFaFUGpNJIIjqVi0ylBqJIkiSJIkmJj605EkSRJPetWAyVacmodBUVhGfrAZPF0AUrgRLNiqDU4VHo8h6HRObJJNdqlRBMFT0qdNE0WZhmay2tCuOY6oieWieianCnVSbzjd7SGhrLi6eUSeLcZTWqdML5PM50uOGJms9VqtYU6hrgrm4V0frUzTvYsiegR2FOkqUxSKdVCpmRCSkIAUZ4VPhqEKgFDU2VhUiIhUaIg0RAkTBYEjYBUbBMuCJgLAkCUBUinABgBE3/9EQqFRM0s0qzktk9ZFqqFC6RULE11JVDkd8Y1vVFOx9oUIpZ8Vnq5klkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";var ru=t=>t instanceof Date,ej=t=>t==null;const tj=t=>typeof t=="object";var u_=t=>!ej(t)&&!Array.isArray(t)&&tj(t)&&!ru(t),d_=t=>ej(t)||!tj(t);function rj(t,e){if(d_(t)||d_(e))return t===e;if(ru(t)&&ru(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const i=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=e[s];if(ru(i)&&ru(o)||u_(i)&&u_(o)||Array.isArray(i)&&Array.isArray(o)?!rj(i,o):i!==o)return!1}}return!0}const hQ={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},fQ={finder:!0,torch:!0,tracker:void 0,onOff:!1,zoom:!1},mQ={width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",aspectRatio:"1/1"},pQ={width:"100%",height:"100%",objectFit:"cover",overflow:"hidden"};function rf(t){if(t===null)throw new Error("Canvas should always be defined when component is mounted.");const e=t.getContext("2d");if(e===null)throw new Error("Canvas 2D context should be non-null");e.clearRect(0,0,t.width,t.height)}function gQ(t){var e;const{onScan:r,constraints:n,formats:s=["qr_code"],paused:i=!1,components:o,children:l,styles:c,classNames:u,allowMultiple:h,scanDelay:f,onError:m,sound:g}=t,x=y.useRef(null),p=y.useRef(null),b=y.useRef(null),_=y.useMemo(()=>({...hQ,...n}),[n]),w=y.useMemo(()=>({...fQ,...o}),[o]),[C,R]=y.useState(!1),[L,V]=y.useState(!0),[I,A]=y.useState(_),N=function(){const Y=y.useRef(Promise.resolve({type:"stop",data:{}})),J=y.useRef(null),se=y.useRef(null),[G,W]=y.useState({}),[ie,ne]=y.useState({}),U=y.useCallback(async(ae,ge)=>{var xe,be,Ae;if(!window.isSecureContext)throw new Error("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.");if(((xe=navigator==null?void 0:navigator.mediaDevices)===null||xe===void 0?void 0:xe.getUserMedia)===void 0)throw new Error("this browser has no Stream API support");const Ce=await navigator.mediaDevices.getUserMedia({audio:!1,video:ge});ae.srcObject!==void 0?ae.srcObject=Ce:ae.mozSrcObject!==void 0?ae.mozSrcObject=Ce:window.URL.createObjectURL?ae.src=window.URL.createObjectURL(Ce):window.webkitURL?ae.src=window.webkitURL.createObjectURL(Ce):ae.src=Ce.id,await Promise.race([ae.play(),new Promise(ve=>setTimeout(ve,3e3)).then(()=>{throw new Error("Loading camera stream timed out after 3 seconds.")})]),await new Promise(ve=>setTimeout(ve,500));const[he]=Ce.getVideoTracks();return ne(he.getSettings()),W((Ae=(be=he==null?void 0:he.getCapabilities)===null||be===void 0?void 0:be.call(he))!==null&&Ae!==void 0?Ae:{}),J.current=Ce,se.current=he,{type:"start",data:{videoEl:ae,stream:Ce,constraints:ge}}},[]),le=y.useCallback(async(ae,ge)=>{ae.src="",ae.srcObject=null,ae.load();for(const xe of ge.getTracks())ge.removeTrack(xe),xe.stop();return J.current=null,se.current=null,ne({}),{type:"stop",data:{}}},[]),_e=y.useCallback(async(ae,{constraints:ge,restart:xe=!1})=>{if(Y.current=Y.current.then(be=>{if(be.type==="start"){const{data:{videoEl:Ae,stream:Ce,constraints:he}}=be;return xe||ae!==Ae||ge!==he?le(Ae,Ce).then(()=>U(ae,ge)):be}return U(ae,ge)}),(await Y.current).type==="stop")throw new Error("Something went wrong with the camera task queue (start task).")},[U,le]),je=y.useCallback(async()=>{if(Y.current=Y.current.then(ae=>{if(ae.type==="stop")return ae;const{data:{videoEl:ge,stream:xe}}=ae;return le(ge,xe)}),(await Y.current).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")},[le]),we=y.useCallback(async ae=>{const ge=se.current;if(!ge)throw new Error("No active video track found.");{ae.advanced&&ae.advanced[0].zoom&&ge.getCapabilities().torch&&await ge.applyConstraints({advanced:[{torch:!1}]}),await ge.applyConstraints(ae);const xe=ge.getCapabilities(),be=ge.getSettings();W(xe),ne(be)}},[]);return y.useEffect(()=>()=>{(async()=>await je())()},[je]),{capabilities:G,settings:ie,startCamera:_e,stopCamera:je,updateConstraints:we}}(),{startScanning:P,stopScanning:D}=function(Y){const{videoElementRef:J,onScan:se,onFound:G,retryDelay:W=100,scanDelay:ie=0,formats:ne=[],allowMultiple:U=!1,sound:le=!0}=Y,_e=y.useRef(new _v({formats:ne})),je=y.useRef(null),we=y.useRef(null);y.useEffect(()=>{_e.current=new _v({formats:ne})},[ne]),y.useEffect(()=>{typeof window<"u"&&le&&(je.current=new Audio(typeof le=="string"?le:dQ))},[le]);const ae=y.useCallback(ge=>async xe=>{if(J.current!==null&&J.current.readyState>1){const{lastScan:be,contentBefore:Ae,lastScanHadContent:Ce}=ge;if(xe-be<W)we.current=window.requestAnimationFrame(ae(ge));else{const he=await _e.current.detect(J.current),ve=he.some(Ze=>!Ae.includes(Ze.rawValue)),vt=he.length>0;let lt=ge.lastOnScan;(ve||U&&vt&&xe-lt>=ie)&&(le&&je.current&&je.current.paused&&je.current.play().catch(Ze=>console.error("Error playing the sound",Ze)),lt=xe,se(he)),vt&&G(he),!vt&&Ce&&G(he);const Lt={lastScan:xe,lastOnScan:lt,lastScanHadContent:vt,contentBefore:ve?he.map(Ze=>Ze.rawValue):Ae};we.current=window.requestAnimationFrame(ae(Lt))}}},[J.current,se,G,W]);return{startScanning:y.useCallback(()=>{const ge=performance.now(),xe={lastScan:ge,lastOnScan:ge,contentBefore:[],lastScanHadContent:!1};we.current=window.requestAnimationFrame(ae(xe))},[ae]),stopScanning:y.useCallback(()=>{we.current!==null&&(window.cancelAnimationFrame(we.current),we.current=null)},[])}}({videoElementRef:x,onScan:r,onFound:Y=>function(J,se,G,W){const ie=G;if(ie==null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas is always defined.");const ne=se;if(ne==null)throw new Error("onFound handler should only be called when component is mounted. Thus video element is always defined.");if(J.length===0||W===void 0)rf(ie);else{const U=ne.offsetWidth,le=ne.offsetHeight,_e=ne.videoWidth,je=ne.videoHeight,we=Math.max(U/_e,le/je),ae=_e*we,ge=je*we,xe=ae/_e,be=ge/je,Ae=(U-ae)/2,Ce=(le-ge)/2,he=({x:Lt,y:Ze})=>({x:Math.floor(Lt*xe),y:Math.floor(Ze*be)}),ve=({x:Lt,y:Ze})=>({x:Math.floor(Lt+Ae),y:Math.floor(Ze+Ce)}),vt=J.map(Lt=>{const{boundingBox:Ze,cornerPoints:xt}=Lt,{x:ur,y:_n}=ve(he({x:Ze.x,y:Ze.y})),{x:xs,y:un}=he({x:Ze.width,y:Ze.height});return{...Lt,cornerPoints:xt.map(ws=>ve(he(ws))),boundingBox:DOMRectReadOnly.fromRect({x:ur,y:_n,width:xs,height:un})}});ie.width=ne.offsetWidth,ie.height=ne.offsetHeight;const lt=ie.getContext("2d");if(lt===null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas 2D context is always defined.");W(vt,lt)}}(Y,x.current,b.current,w.tracker),formats:s,retryDelay:w.tracker===void 0?500:10,scanDelay:f,allowMultiple:h,sound:g});y.useEffect(()=>(R(!0),()=>{R(!1)}),[]),y.useEffect(()=>{C&&(D(),P())},[o==null?void 0:o.tracker]),y.useEffect(()=>{if(!rj(_,I)){const Y=_;n!=null&&n.deviceId&&delete Y.facingMode,A(Y)}},[n]);const O=y.useMemo(()=>({constraints:I,shouldStream:C&&!i}),[I,C,i]),j=async()=>{const Y=x.current;if(Y==null)throw new Error("Video should be defined when component is mounted.");const J=p.current;if(J==null)throw new Error("Canvas should be defined when component is mounted.");const se=J.getContext("2d");if(se==null)throw new Error("Canvas should be defined when component is mounted.");if(O.shouldStream){await N.stopCamera(),V(!1);try{await N.startCamera(Y,O),Y?V(!0):await N.stopCamera()}catch(G){m==null||m(G),console.error("error",G)}}else J.width=Y.videoWidth,J.height=Y.videoHeight,se.drawImage(Y,0,0,Y.videoWidth,Y.videoHeight),await N.stopCamera(),V(!1)};y.useEffect(()=>{(async()=>await j())()},[O]);const $=y.useMemo(()=>O.shouldStream&&L,[O.shouldStream,L]);return y.useEffect(()=>{if($){if(p.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus pause frame canvas is defined");if(rf(p.current),b.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus tracking canvas is defined");if(rf(b.current),x.current==null)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus video element is defined");P()}},[$]),K.createElement("div",{style:{...mQ,...c==null?void 0:c.container},className:u==null?void 0:u.container},K.createElement("video",{ref:x,style:{...pQ,...c==null?void 0:c.video,visibility:i?"hidden":"visible"},className:u==null?void 0:u.video,autoPlay:!0,muted:!0,playsInline:!0}),K.createElement("canvas",{ref:p,style:{display:i?"block":"none",position:"absolute",width:"100%",height:"100%"}}),K.createElement("canvas",{ref:b,style:{position:"absolute",width:"100%",height:"100%"}}),K.createElement("div",{style:{position:"absolute",width:"100%",height:"100%"}},w.finder&&K.createElement(uQ,{scanning:L,capabilities:N.capabilities,onOff:w.onOff,zoom:w.zoom&&N.settings.zoom?{value:N.settings.zoom,onChange:async Y=>{const J={...I,advanced:[{zoom:Y}]};await N.updateConstraints(J)}}:void 0,torch:w.torch?{status:(e=N.settings.torch)!==null&&e!==void 0&&e,toggle:async Y=>{const J={...I,advanced:[{torch:Y}]};await N.updateConstraints(J)}}:void 0,startScanning:async()=>await j(),stopScanning:async()=>{await N.stopCamera(),rf(b.current),V(!1)}}),l))}const yQ=()=>{const[t,e]=y.useState(null),[r,n]=y.useState(null),[s,i]=y.useState(!1),[o,l]=y.useState(null),c=Yn();ti();const{addPurchase:u}=vs();y.useEffect(()=>{gt("page_view",{page:"Scan"})},[]);const h=async g=>{if(!s){i(!0),e(null),n(null);try{if(!Array.isArray(g)||!g[0]||typeof g[0].rawValue!="string")throw new Error("Invalid QR scan result format");const x=g[0].rawValue;gt("scan_qr_attempt",{rawValue:x});let p;try{p=JSON.parse(x)}catch{const L=x.split(":");if(L.length<3||L[0]!=="LOYALTY")throw gt("scan_qr_invalid",{rawValue:x}),new Error("Invalid QR code format");p={userEmail:L[1],userId:L[2],offerId:"default_offer"}}if(!p.userEmail||!p.userId)throw new Error("Invalid QR code data - missing user information");const b=Yt(ht,"users",p.userId),_=await Ip(Sd(Ea(ht,"users"),qy("email","==",p.userEmail),qy("id","==",p.userId)));if(_.empty)throw gt("scan_qr_no_user",{email:p.userEmail,uid:p.userId}),new Error("No user found for this QR code");const C=_.docs[0].data();gt("scan_qr_success",{scanned_user:p.userEmail,scanned_uid:p.userId,offer_id:p.offerId}),p.action==="redeem_reward"&&p.rewardId?await iq(null,p.userEmail,p.userId,p.rewardId):await u(p.userEmail,p.userId,p.offerId),n(p.userEmail),e(!0),l(p);const R=await lo(b);if(R.exists()){const L=R.data(),V=L.purchases||0;let I="";if(p.action==="redeem_reward")I=`Reward redeemed for ${p.userName}! `,gt("reward_redeemed",{scanned_user:p.userEmail,reward_id:p.rewardId});else{const A=p.stampsPerScan||1;I=`${A} ${A===1?"stamp":"stamps"} added for ${p.offerName||"loyalty program"}!`;const P=await lo(b);if(P.exists()){const O=P.data().purchases||0;I+=` Total stamps: ${O}`}if(p.offerId&&p.offerId!=="default_offer"){const D=L.currentOfferProgress||0,O=5,j=Math.max(0,O-D);D>=O?(I+=" - Offer completed! ",gt("offer_completed",{scanned_user:p.userEmail,offer_id:p.offerId})):I+=` - ${j} more stamps needed for reward`}else{const D=L.purchaseLimit||5;if(V>=D)I+=" - Reward ready! ",gt("reward_ready",{scanned_user:p.userEmail,scanned_uid:p.userId});else{const O=D-V;I+=` - ${O} more to earn reward`}}}ct({title:"Success",description:I})}setTimeout(()=>{c("/dashboard")},1500)}catch(x){console.error("Error processing QR scan:",x);let p="Failed to process loyalty point";x instanceof Error&&(p=x.message),e(!1),ct({title:"Error",description:p,variant:"destructive"}),gt("scan_qr_error",{error:x.message})}finally{i(!1)}}},f=g=>{console.error("Scanner error:",g),e(!1),ct({title:"Scanner Error",description:"Camera error - please check permissions",variant:"destructive"}),gt("scan_qr_scanner_error",{error:String(g)})},m=()=>{e(null),n(null),i(!1),l(null)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:a.jsx("div",{className:"p-6 flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xs,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(tc,{className:"w-6 h-6"})}),a.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Scan Loyalty QR"})]})})}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6",children:a.jsxs("div",{className:"w-full max-w-md bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl flex flex-col items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Scan a User's QR Code"}),!t&&a.jsxs("div",{className:"relative w-full flex flex-col items-center",children:[a.jsx("div",{style:{width:300,height:300,margin:"20px auto"},children:a.jsx(gQ,{onScan:h,onError:f})}),s&&a.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"Processing..."})]}),t===!0&&a.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-green-900/50 to-emerald-900/50 border border-green-700 rounded-xl text-center shadow-2xl animate-pulse",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:"Stamp Added Successfully!"}),a.jsxs("div",{className:"text-lg text-green-300 mb-3",children:[r&&a.jsxs("div",{className:"mb-3",children:[a.jsx("span",{className:"text-green-400 font-semibold",children:r}),a.jsxs("span",{className:"text-green-300",children:[" ","has earned ",(o==null?void 0:o.stampsPerScan)||1," ",(o==null?void 0:o.stampsPerScan)===1?"stamp":"stamps","!"]})]}),(o==null?void 0:o.offerName)&&a.jsxs("div",{className:"text-sm text-green-400 bg-green-900/30 px-3 py-1 rounded-full inline-block mb-2",children:["Offer: ",o.offerName]})]}),a.jsx("div",{className:"mt-4 text-xs text-green-500",children:"Redirecting to dashboard..."})]}),t===!1&&a.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700 rounded-xl text-center shadow-2xl",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("div",{className:"text-2xl font-bold text-red-400 mb-2",children:"Scan Failed"}),a.jsx("div",{className:"text-lg text-red-300 mb-3",children:"There was an error processing the QR code"}),a.jsx("div",{className:"text-sm text-red-400 bg-red-900/30 px-3 py-1 rounded-full inline-block",children:"Please try scanning again"})]}),!t&&a.jsx("div",{className:"mt-6 flex gap-3",children:a.jsx(Pe,{onClick:m,disabled:!t,variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500/20",children:"Reset Scanner"})})]})})]})]})},vQ=new kU,xQ=()=>a.jsx(MU,{client:vQ,children:a.jsx(cU,{children:a.jsxs(lq,{children:[a.jsx(a8,{}),a.jsx(O8,{}),a.jsx(I7,{children:a.jsxs(E7,{children:[a.jsx(Xn,{path:"/",element:a.jsx(hq,{})}),a.jsx(Xn,{path:"/register",element:a.jsx(BC,{children:a.jsx(pq,{})})}),a.jsx(Xn,{path:"/login",element:a.jsx(BC,{children:a.jsx(gq,{})})}),a.jsx(Xn,{path:"/dashboard",element:a.jsx(qc,{children:a.jsx(_z,{})})}),a.jsx(Xn,{path:"/rewards",element:a.jsx(qc,{children:a.jsx(Tz,{})})}),a.jsx(Xn,{path:"/settings",element:a.jsx(qc,{children:a.jsx(Az,{})})}),a.jsx(Xn,{path:"/scan",element:a.jsx(qc,{children:a.jsx(yQ,{})})}),a.jsx(Xn,{path:"/users",element:a.jsx(qc,{requiredRole:"admin",children:a.jsx(lW,{})})}),a.jsx(Xn,{path:"*",element:a.jsx(cW,{})})]})})]})})});DA(document.getElementById("root")).render(a.jsx(xQ,{}));
