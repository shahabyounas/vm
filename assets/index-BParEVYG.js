var hb=t=>{throw TypeError(t)};var fg=(t,e,r)=>e.has(t)||hb("Cannot "+r);var te=(t,e,r)=>(fg(t,e,"read from private field"),r?r.call(t):e.get(t)),et=(t,e,r)=>e.has(t)?hb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),De=(t,e,r,n)=>(fg(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),fr=(t,e,r)=>(fg(t,e,"access private method"),r);var vh=(t,e,r,n)=>({set _(s){De(t,e,s,r)},get _(){return te(t,e,n)}});function v_(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Ev(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var x_={exports:{}},Vm={},w_={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad=Symbol.for("react.element"),Oj=Symbol.for("react.portal"),Lj=Symbol.for("react.fragment"),Fj=Symbol.for("react.strict_mode"),Vj=Symbol.for("react.profiler"),Bj=Symbol.for("react.provider"),Uj=Symbol.for("react.context"),qj=Symbol.for("react.forward_ref"),Gj=Symbol.for("react.suspense"),$j=Symbol.for("react.memo"),zj=Symbol.for("react.lazy"),fb=Symbol.iterator;function Wj(t){return t===null||typeof t!="object"?null:(t=fb&&t[fb]||t["@@iterator"],typeof t=="function"?t:null)}var b_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E_=Object.assign,C_={};function Kl(t,e,r){this.props=t,this.context=e,this.refs=C_,this.updater=r||b_}Kl.prototype.isReactComponent={};Kl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Kl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function __(){}__.prototype=Kl.prototype;function Cv(t,e,r){this.props=t,this.context=e,this.refs=C_,this.updater=r||b_}var _v=Cv.prototype=new __;_v.constructor=Cv;E_(_v,Kl.prototype);_v.isPureReactComponent=!0;var mb=Array.isArray,T_=Object.prototype.hasOwnProperty,Tv={current:null},A_={key:!0,ref:!0,__self:!0,__source:!0};function S_(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)T_.call(e,n)&&!A_.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ad,type:t,key:i,ref:o,props:s,_owner:Tv.current}}function Qj(t,e){return{$$typeof:ad,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Av(t){return typeof t=="object"&&t!==null&&t.$$typeof===ad}function Yj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var pb=/\/+/g;function mg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yj(""+t.key):e.toString(36)}function Zh(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ad:case Oj:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+mg(o,0):n,mb(s)?(r="",t!=null&&(r=t.replace(pb,"$&/")+"/"),Zh(s,e,r,"",function(u){return u})):s!=null&&(Av(s)&&(s=Qj(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(pb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",mb(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+mg(i,l);o+=Zh(i,e,r,c,s)}else if(c=Wj(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+mg(i,l++),o+=Zh(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xh(t,e,r){if(t==null)return t;var n=[],s=0;return Zh(t,n,"","",function(i){return e.call(r,i,s++)}),n}function Hj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dr={current:null},ef={transition:null},Kj={ReactCurrentDispatcher:Dr,ReactCurrentBatchConfig:ef,ReactCurrentOwner:Tv};function N_(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:xh,forEach:function(t,e,r){xh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return xh(t,function(){e++}),e},toArray:function(t){return xh(t,function(e){return e})||[]},only:function(t){if(!Av(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=Kl;Ue.Fragment=Lj;Ue.Profiler=Vj;Ue.PureComponent=Cv;Ue.StrictMode=Fj;Ue.Suspense=Gj;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kj;Ue.act=N_;Ue.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=E_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Tv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)T_.call(e,c)&&!A_.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ad,type:t.type,key:s,ref:i,props:n,_owner:o}};Ue.createContext=function(t){return t={$$typeof:Uj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bj,_context:t},t.Consumer=t};Ue.createElement=S_;Ue.createFactory=function(t){var e=S_.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:qj,render:t}};Ue.isValidElement=Av;Ue.lazy=function(t){return{$$typeof:zj,_payload:{_status:-1,_result:t},_init:Hj}};Ue.memo=function(t,e){return{$$typeof:$j,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=ef.transition;ef.transition={};try{t()}finally{ef.transition=e}};Ue.unstable_act=N_;Ue.useCallback=function(t,e){return Dr.current.useCallback(t,e)};Ue.useContext=function(t){return Dr.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return Dr.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return Dr.current.useEffect(t,e)};Ue.useId=function(){return Dr.current.useId()};Ue.useImperativeHandle=function(t,e,r){return Dr.current.useImperativeHandle(t,e,r)};Ue.useInsertionEffect=function(t,e){return Dr.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return Dr.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return Dr.current.useMemo(t,e)};Ue.useReducer=function(t,e,r){return Dr.current.useReducer(t,e,r)};Ue.useRef=function(t){return Dr.current.useRef(t)};Ue.useState=function(t){return Dr.current.useState(t)};Ue.useSyncExternalStore=function(t,e,r){return Dr.current.useSyncExternalStore(t,e,r)};Ue.useTransition=function(){return Dr.current.useTransition()};Ue.version="18.3.1";w_.exports=Ue;var y=w_.exports;const Y=Ev(y),I_=v_({__proto__:null,default:Y},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jj=y,Xj=Symbol.for("react.element"),Zj=Symbol.for("react.fragment"),e4=Object.prototype.hasOwnProperty,t4=Jj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r4={key:!0,ref:!0,__self:!0,__source:!0};function R_(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)e4.call(e,n)&&!r4.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Xj,type:t,key:i,ref:o,props:s,_owner:t4.current}}Vm.Fragment=Zj;Vm.jsx=R_;Vm.jsxs=R_;x_.exports=Vm;var a=x_.exports,P_={exports:{}},ln={},k_={exports:{}},j_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,W){var se=q.length;q.push(W);e:for(;0<se;){var re=se-1>>>1,le=q[re];if(0<s(le,W))q[re]=W,q[se]=le,se=re;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var W=q[0],se=q.pop();if(se!==W){q[0]=se;e:for(var re=0,le=q.length,ue=le>>>1;re<ue;){var Se=2*(re+1)-1,ke=q[Se],we=Se+1,oe=q[we];if(0>s(ke,se))we<le&&0>s(oe,ke)?(q[re]=oe,q[we]=se,re=we):(q[re]=ke,q[Se]=se,re=Se);else if(we<le&&0>s(oe,se))q[re]=oe,q[we]=se,re=we;else break e}}return W}function s(q,W){var se=q.sortIndex-W.sortIndex;return se!==0?se:q.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,m=3,v=!1,x=!1,p=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=q)n(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=r(u)}}function R(q){if(p=!1,C(q),!x)if(r(c)!==null)x=!0,J(L);else{var W=r(u);W!==null&&ie(R,W.startTime-q)}}function L(q,W){x=!1,p&&(p=!1,_(S),S=-1),v=!0;var se=m;try{for(C(W),f=r(c);f!==null&&(!(f.expirationTime>W)||q&&!D());){var re=f.callback;if(typeof re=="function"){f.callback=null,m=f.priorityLevel;var le=re(f.expirationTime<=W);W=t.unstable_now(),typeof le=="function"?f.callback=le:f===r(c)&&n(c),C(W)}else n(c);f=r(c)}if(f!==null)var ue=!0;else{var Se=r(u);Se!==null&&ie(R,Se.startTime-W),ue=!1}return ue}finally{f=null,m=se,v=!1}}var F=!1,I=null,S=-1,N=5,j=-1;function D(){return!(t.unstable_now()-j<N)}function O(){if(I!==null){var q=t.unstable_now();j=q;var W=!0;try{W=I(!0,q)}finally{W?k():(F=!1,I=null)}}else F=!1}var k;if(typeof b=="function")k=function(){b(O)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,H=G.port2;G.port1.onmessage=O,k=function(){H.postMessage(null)}}else k=function(){w(O,0)};function J(q){I=q,F||(F=!0,k())}function ie(q,W){S=w(function(){q(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,J(L))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var se=m;m=W;try{return q()}finally{m=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=m;m=q;try{return W()}finally{m=se}},t.unstable_scheduleCallback=function(q,W,se){var re=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?re+se:re):se=re,q){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=se+le,q={id:h++,callback:W,priorityLevel:q,startTime:se,expirationTime:le,sortIndex:-1},se>re?(q.sortIndex=se,e(u,q),r(c)===null&&q===r(u)&&(p?(_(S),S=-1):p=!0,ie(R,se-re))):(q.sortIndex=le,e(c,q),x||v||(x=!0,J(L))),q},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(q){var W=m;return function(){var se=m;m=W;try{return q.apply(this,arguments)}finally{m=se}}}})(j_);k_.exports=j_;var n4=k_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s4=y,an=n4;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M_=new Set,xu={};function pa(t,e){Ml(t,e),Ml(t+"Capture",e)}function Ml(t,e){for(xu[t]=e,t=0;t<e.length;t++)M_.add(e[t])}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p0=Object.prototype.hasOwnProperty,i4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gb={},yb={};function o4(t){return p0.call(yb,t)?!0:p0.call(gb,t)?!1:i4.test(t)?yb[t]=!0:(gb[t]=!0,!1)}function a4(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function l4(t,e,r,n){if(e===null||typeof e>"u"||a4(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Or(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lr[t]=new Or(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lr[e]=new Or(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lr[t]=new Or(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lr[t]=new Or(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lr[t]=new Or(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lr[t]=new Or(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lr[t]=new Or(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lr[t]=new Or(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lr[t]=new Or(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sv=/[\-:]([a-z])/g;function Nv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sv,Nv);lr[e]=new Or(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sv,Nv);lr[e]=new Or(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sv,Nv);lr[e]=new Or(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lr[t]=new Or(t,1,!1,t.toLowerCase(),null,!1,!1)});lr.xlinkHref=new Or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lr[t]=new Or(t,1,!1,t.toLowerCase(),null,!0,!0)});function Iv(t,e,r,n){var s=lr.hasOwnProperty(e)?lr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(l4(e,r,s,n)&&(r=null),n||s===null?o4(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Zs=s4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wh=Symbol.for("react.element"),Ka=Symbol.for("react.portal"),Ja=Symbol.for("react.fragment"),Rv=Symbol.for("react.strict_mode"),g0=Symbol.for("react.profiler"),D_=Symbol.for("react.provider"),O_=Symbol.for("react.context"),Pv=Symbol.for("react.forward_ref"),y0=Symbol.for("react.suspense"),v0=Symbol.for("react.suspense_list"),kv=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),L_=Symbol.for("react.offscreen"),vb=Symbol.iterator;function Rc(t){return t===null||typeof t!="object"?null:(t=vb&&t[vb]||t["@@iterator"],typeof t=="function"?t:null)}var At=Object.assign,pg;function Uc(t){if(pg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);pg=e&&e[1]||""}return`
`+pg+t}var gg=!1;function yg(t,e){if(!t||gg)return"";gg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{gg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Uc(t):""}function c4(t){switch(t.tag){case 5:return Uc(t.type);case 16:return Uc("Lazy");case 13:return Uc("Suspense");case 19:return Uc("SuspenseList");case 0:case 2:case 15:return t=yg(t.type,!1),t;case 11:return t=yg(t.type.render,!1),t;case 1:return t=yg(t.type,!0),t;default:return""}}function x0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ja:return"Fragment";case Ka:return"Portal";case g0:return"Profiler";case Rv:return"StrictMode";case y0:return"Suspense";case v0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case O_:return(t.displayName||"Context")+".Consumer";case D_:return(t._context.displayName||"Context")+".Provider";case Pv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kv:return e=t.displayName||null,e!==null?e:x0(t.type)||"Memo";case xi:e=t._payload,t=t._init;try{return x0(t(e))}catch{}}return null}function u4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return x0(e);case 8:return e===Rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function d4(t){var e=F_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bh(t){t._valueTracker||(t._valueTracker=d4(t))}function V_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=F_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Of(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function w0(t,e){var r=e.checked;return At({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function xb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ji(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function B_(t,e){e=e.checked,e!=null&&Iv(t,"checked",e,!1)}function b0(t,e){B_(t,e);var r=Ji(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?E0(t,e.type,r):e.hasOwnProperty("defaultValue")&&E0(t,e.type,Ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function E0(t,e,r){(e!=="number"||Of(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var qc=Array.isArray;function ul(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ji(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function C0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return At({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ae(92));if(qc(r)){if(1<r.length)throw Error(ae(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ji(r)}}function U_(t,e){var r=Ji(e.value),n=Ji(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Eb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Eh,G_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Eh=Eh||document.createElement("div"),Eh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Eh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var tu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h4=["Webkit","ms","Moz","O"];Object.keys(tu).forEach(function(t){h4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tu[e]=tu[t]})});function $_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||tu.hasOwnProperty(t)&&tu[t]?(""+e).trim():e+"px"}function z_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=$_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var f4=At({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T0(t,e){if(e){if(f4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function A0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S0=null;function jv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var N0=null,dl=null,hl=null;function Cb(t){if(t=ud(t)){if(typeof N0!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=$m(e),N0(t.stateNode,t.type,e))}}function W_(t){dl?hl?hl.push(t):hl=[t]:dl=t}function Q_(){if(dl){var t=dl,e=hl;if(hl=dl=null,Cb(t),e)for(t=0;t<e.length;t++)Cb(e[t])}}function Y_(t,e){return t(e)}function H_(){}var vg=!1;function K_(t,e,r){if(vg)return t(e,r);vg=!0;try{return Y_(t,e,r)}finally{vg=!1,(dl!==null||hl!==null)&&(H_(),Q_())}}function bu(t,e){var r=t.stateNode;if(r===null)return null;var n=$m(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ae(231,e,typeof r));return r}var I0=!1;if(qs)try{var Pc={};Object.defineProperty(Pc,"passive",{get:function(){I0=!0}}),window.addEventListener("test",Pc,Pc),window.removeEventListener("test",Pc,Pc)}catch{I0=!1}function m4(t,e,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var ru=!1,Lf=null,Ff=!1,R0=null,p4={onError:function(t){ru=!0,Lf=t}};function g4(t,e,r,n,s,i,o,l,c){ru=!1,Lf=null,m4.apply(p4,arguments)}function y4(t,e,r,n,s,i,o,l,c){if(g4.apply(this,arguments),ru){if(ru){var u=Lf;ru=!1,Lf=null}else throw Error(ae(198));Ff||(Ff=!0,R0=u)}}function ga(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function J_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _b(t){if(ga(t)!==t)throw Error(ae(188))}function v4(t){var e=t.alternate;if(!e){if(e=ga(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return _b(s),t;if(i===n)return _b(s),e;i=i.sibling}throw Error(ae(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(ae(189))}}if(r.alternate!==n)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?t:e}function X_(t){return t=v4(t),t!==null?Z_(t):null}function Z_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Z_(t);if(e!==null)return e;t=t.sibling}return null}var eT=an.unstable_scheduleCallback,Tb=an.unstable_cancelCallback,x4=an.unstable_shouldYield,w4=an.unstable_requestPaint,Mt=an.unstable_now,b4=an.unstable_getCurrentPriorityLevel,Mv=an.unstable_ImmediatePriority,tT=an.unstable_UserBlockingPriority,Vf=an.unstable_NormalPriority,E4=an.unstable_LowPriority,rT=an.unstable_IdlePriority,Bm=null,is=null;function C4(t){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(Bm,t,void 0,(t.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:A4,_4=Math.log,T4=Math.LN2;function A4(t){return t>>>=0,t===0?32:31-(_4(t)/T4|0)|0}var Ch=64,_h=4194304;function Gc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bf(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Gc(l):(i&=o,i!==0&&(n=Gc(i)))}else o=r&~s,o!==0?n=Gc(o):i!==0&&(n=Gc(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Bn(e),s=1<<r,n|=t[r],e&=~s;return n}function S4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N4(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Bn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=S4(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function P0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nT(){var t=Ch;return Ch<<=1,!(Ch&4194240)&&(Ch=64),t}function xg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ld(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bn(e),t[e]=r}function I4(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Bn(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Dv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Bn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var st=0;function sT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var iT,Ov,oT,aT,lT,k0=!1,Th=[],Li=null,Fi=null,Vi=null,Eu=new Map,Cu=new Map,Ei=[],R4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ab(t,e){switch(t){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":Eu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(e.pointerId)}}function kc(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ud(e),e!==null&&Ov(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function P4(t,e,r,n,s){switch(e){case"focusin":return Li=kc(Li,t,e,r,n,s),!0;case"dragenter":return Fi=kc(Fi,t,e,r,n,s),!0;case"mouseover":return Vi=kc(Vi,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Eu.set(i,kc(Eu.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Cu.set(i,kc(Cu.get(i)||null,t,e,r,n,s)),!0}return!1}function cT(t){var e=Fo(t.target);if(e!==null){var r=ga(e);if(r!==null){if(e=r.tag,e===13){if(e=J_(r),e!==null){t.blockedOn=e,lT(t.priority,function(){oT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=j0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);S0=n,r.target.dispatchEvent(n),S0=null}else return e=ud(r),e!==null&&Ov(e),t.blockedOn=r,!1;e.shift()}return!0}function Sb(t,e,r){tf(t)&&r.delete(e)}function k4(){k0=!1,Li!==null&&tf(Li)&&(Li=null),Fi!==null&&tf(Fi)&&(Fi=null),Vi!==null&&tf(Vi)&&(Vi=null),Eu.forEach(Sb),Cu.forEach(Sb)}function jc(t,e){t.blockedOn===e&&(t.blockedOn=null,k0||(k0=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,k4)))}function _u(t){function e(s){return jc(s,t)}if(0<Th.length){jc(Th[0],t);for(var r=1;r<Th.length;r++){var n=Th[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Li!==null&&jc(Li,t),Fi!==null&&jc(Fi,t),Vi!==null&&jc(Vi,t),Eu.forEach(e),Cu.forEach(e),r=0;r<Ei.length;r++)n=Ei[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ei.length&&(r=Ei[0],r.blockedOn===null);)cT(r),r.blockedOn===null&&Ei.shift()}var fl=Zs.ReactCurrentBatchConfig,Uf=!0;function j4(t,e,r,n){var s=st,i=fl.transition;fl.transition=null;try{st=1,Lv(t,e,r,n)}finally{st=s,fl.transition=i}}function M4(t,e,r,n){var s=st,i=fl.transition;fl.transition=null;try{st=4,Lv(t,e,r,n)}finally{st=s,fl.transition=i}}function Lv(t,e,r,n){if(Uf){var s=j0(t,e,r,n);if(s===null)Ig(t,e,n,qf,r),Ab(t,n);else if(P4(s,t,e,r,n))n.stopPropagation();else if(Ab(t,n),e&4&&-1<R4.indexOf(t)){for(;s!==null;){var i=ud(s);if(i!==null&&iT(i),i=j0(t,e,r,n),i===null&&Ig(t,e,n,qf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ig(t,e,n,null,r)}}var qf=null;function j0(t,e,r,n){if(qf=null,t=jv(n),t=Fo(t),t!==null)if(e=ga(t),e===null)t=null;else if(r=e.tag,r===13){if(t=J_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qf=t,null}function uT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(b4()){case Mv:return 1;case tT:return 4;case Vf:case E4:return 16;case rT:return 536870912;default:return 16}default:return 16}}var ji=null,Fv=null,rf=null;function dT(){if(rf)return rf;var t,e=Fv,r=e.length,n,s="value"in ji?ji.value:ji.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return rf=s.slice(t,1<n?1-n:void 0)}function nf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ah(){return!0}function Nb(){return!1}function cn(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ah:Nb,this.isPropagationStopped=Nb,this}return At(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ah)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ah)},persist:function(){},isPersistent:Ah}),e}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vv=cn(Jl),cd=At({},Jl,{view:0,detail:0}),D4=cn(cd),wg,bg,Mc,Um=At({},cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mc&&(Mc&&t.type==="mousemove"?(wg=t.screenX-Mc.screenX,bg=t.screenY-Mc.screenY):bg=wg=0,Mc=t),wg)},movementY:function(t){return"movementY"in t?t.movementY:bg}}),Ib=cn(Um),O4=At({},Um,{dataTransfer:0}),L4=cn(O4),F4=At({},cd,{relatedTarget:0}),Eg=cn(F4),V4=At({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),B4=cn(V4),U4=At({},Jl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),q4=cn(U4),G4=At({},Jl,{data:0}),Rb=cn(G4),$4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=W4[t])?!!e[t]:!1}function Bv(){return Q4}var Y4=At({},cd,{key:function(t){if(t.key){var e=$4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?z4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bv,charCode:function(t){return t.type==="keypress"?nf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H4=cn(Y4),K4=At({},Um,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pb=cn(K4),J4=At({},cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bv}),X4=cn(J4),Z4=At({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),eM=cn(Z4),tM=At({},Um,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rM=cn(tM),nM=[9,13,27,32],Uv=qs&&"CompositionEvent"in window,nu=null;qs&&"documentMode"in document&&(nu=document.documentMode);var sM=qs&&"TextEvent"in window&&!nu,hT=qs&&(!Uv||nu&&8<nu&&11>=nu),kb=" ",jb=!1;function fT(t,e){switch(t){case"keyup":return nM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xa=!1;function iM(t,e){switch(t){case"compositionend":return mT(e);case"keypress":return e.which!==32?null:(jb=!0,kb);case"textInput":return t=e.data,t===kb&&jb?null:t;default:return null}}function oM(t,e){if(Xa)return t==="compositionend"||!Uv&&fT(t,e)?(t=dT(),rf=Fv=ji=null,Xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hT&&e.locale!=="ko"?null:e.data;default:return null}}var aM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aM[t.type]:e==="textarea"}function pT(t,e,r,n){W_(n),e=Gf(e,"onChange"),0<e.length&&(r=new Vv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var su=null,Tu=null;function lM(t){AT(t,0)}function qm(t){var e=tl(t);if(V_(e))return t}function cM(t,e){if(t==="change")return e}var gT=!1;if(qs){var Cg;if(qs){var _g="oninput"in document;if(!_g){var Db=document.createElement("div");Db.setAttribute("oninput","return;"),_g=typeof Db.oninput=="function"}Cg=_g}else Cg=!1;gT=Cg&&(!document.documentMode||9<document.documentMode)}function Ob(){su&&(su.detachEvent("onpropertychange",yT),Tu=su=null)}function yT(t){if(t.propertyName==="value"&&qm(Tu)){var e=[];pT(e,Tu,t,jv(t)),K_(lM,e)}}function uM(t,e,r){t==="focusin"?(Ob(),su=e,Tu=r,su.attachEvent("onpropertychange",yT)):t==="focusout"&&Ob()}function dM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qm(Tu)}function hM(t,e){if(t==="click")return qm(e)}function fM(t,e){if(t==="input"||t==="change")return qm(e)}function mM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:mM;function Au(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!p0.call(e,s)||!Gn(t[s],e[s]))return!1}return!0}function Lb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fb(t,e){var r=Lb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Lb(r)}}function vT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xT(){for(var t=window,e=Of();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Of(t.document)}return e}function qv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pM(t){var e=xT(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&vT(r.ownerDocument.documentElement,r)){if(n!==null&&qv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Fb(r,i);var o=Fb(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gM=qs&&"documentMode"in document&&11>=document.documentMode,Za=null,M0=null,iu=null,D0=!1;function Vb(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;D0||Za==null||Za!==Of(n)||(n=Za,"selectionStart"in n&&qv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),iu&&Au(iu,n)||(iu=n,n=Gf(M0,"onSelect"),0<n.length&&(e=new Vv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Za)))}function Sh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var el={animationend:Sh("Animation","AnimationEnd"),animationiteration:Sh("Animation","AnimationIteration"),animationstart:Sh("Animation","AnimationStart"),transitionend:Sh("Transition","TransitionEnd")},Tg={},wT={};qs&&(wT=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function Gm(t){if(Tg[t])return Tg[t];if(!el[t])return t;var e=el[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in wT)return Tg[t]=e[r];return t}var bT=Gm("animationend"),ET=Gm("animationiteration"),CT=Gm("animationstart"),_T=Gm("transitionend"),TT=new Map,Bb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(t,e){TT.set(t,e),pa(e,[t])}for(var Ag=0;Ag<Bb.length;Ag++){var Sg=Bb[Ag],yM=Sg.toLowerCase(),vM=Sg[0].toUpperCase()+Sg.slice(1);ho(yM,"on"+vM)}ho(bT,"onAnimationEnd");ho(ET,"onAnimationIteration");ho(CT,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho(_T,"onTransitionEnd");Ml("onMouseEnter",["mouseout","mouseover"]);Ml("onMouseLeave",["mouseout","mouseover"]);Ml("onPointerEnter",["pointerout","pointerover"]);Ml("onPointerLeave",["pointerout","pointerover"]);pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xM=new Set("cancel close invalid load scroll toggle".split(" ").concat($c));function Ub(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,y4(n,e,void 0,t),t.currentTarget=null}function AT(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ub(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ub(s,l,u),i=c}}}if(Ff)throw t=R0,Ff=!1,R0=null,t}function ft(t,e){var r=e[B0];r===void 0&&(r=e[B0]=new Set);var n=t+"__bubble";r.has(n)||(ST(e,t,2,!1),r.add(n))}function Ng(t,e,r){var n=0;e&&(n|=4),ST(r,t,n,e)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function Su(t){if(!t[Nh]){t[Nh]=!0,M_.forEach(function(r){r!=="selectionchange"&&(xM.has(r)||Ng(r,!1,t),Ng(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nh]||(e[Nh]=!0,Ng("selectionchange",!1,e))}}function ST(t,e,r,n){switch(uT(e)){case 1:var s=j4;break;case 4:s=M4;break;default:s=Lv}r=s.bind(null,e,r,t),s=void 0,!I0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Ig(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Fo(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}K_(function(){var u=i,h=jv(r),f=[];e:{var m=TT.get(t);if(m!==void 0){var v=Vv,x=t;switch(t){case"keypress":if(nf(r)===0)break e;case"keydown":case"keyup":v=H4;break;case"focusin":x="focus",v=Eg;break;case"focusout":x="blur",v=Eg;break;case"beforeblur":case"afterblur":v=Eg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Ib;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=L4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=X4;break;case bT:case ET:case CT:v=B4;break;case _T:v=eM;break;case"scroll":v=D4;break;case"wheel":v=rM;break;case"copy":case"cut":case"paste":v=q4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Pb}var p=(e&4)!==0,w=!p&&t==="scroll",_=p?m!==null?m+"Capture":null:m;p=[];for(var b=u,C;b!==null;){C=b;var R=C.stateNode;if(C.tag===5&&R!==null&&(C=R,_!==null&&(R=bu(b,_),R!=null&&p.push(Nu(b,R,C)))),w)break;b=b.return}0<p.length&&(m=new v(m,x,null,r,h),f.push({event:m,listeners:p}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&r!==S0&&(x=r.relatedTarget||r.fromElement)&&(Fo(x)||x[Gs]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(x=r.relatedTarget||r.toElement,v=u,x=x?Fo(x):null,x!==null&&(w=ga(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=u),v!==x)){if(p=Ib,R="onMouseLeave",_="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(p=Pb,R="onPointerLeave",_="onPointerEnter",b="pointer"),w=v==null?m:tl(v),C=x==null?m:tl(x),m=new p(R,b+"leave",v,r,h),m.target=w,m.relatedTarget=C,R=null,Fo(h)===u&&(p=new p(_,b+"enter",x,r,h),p.target=C,p.relatedTarget=w,R=p),w=R,v&&x)t:{for(p=v,_=x,b=0,C=p;C;C=qa(C))b++;for(C=0,R=_;R;R=qa(R))C++;for(;0<b-C;)p=qa(p),b--;for(;0<C-b;)_=qa(_),C--;for(;b--;){if(p===_||_!==null&&p===_.alternate)break t;p=qa(p),_=qa(_)}p=null}else p=null;v!==null&&qb(f,m,v,p,!1),x!==null&&w!==null&&qb(f,w,x,p,!0)}}e:{if(m=u?tl(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var L=cM;else if(Mb(m))if(gT)L=fM;else{L=dM;var F=uM}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=hM);if(L&&(L=L(t,u))){pT(f,L,r,h);break e}F&&F(t,m,u),t==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&E0(m,"number",m.value)}switch(F=u?tl(u):window,t){case"focusin":(Mb(F)||F.contentEditable==="true")&&(Za=F,M0=u,iu=null);break;case"focusout":iu=M0=Za=null;break;case"mousedown":D0=!0;break;case"contextmenu":case"mouseup":case"dragend":D0=!1,Vb(f,r,h);break;case"selectionchange":if(gM)break;case"keydown":case"keyup":Vb(f,r,h)}var I;if(Uv)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Xa?fT(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(hT&&r.locale!=="ko"&&(Xa||S!=="onCompositionStart"?S==="onCompositionEnd"&&Xa&&(I=dT()):(ji=h,Fv="value"in ji?ji.value:ji.textContent,Xa=!0)),F=Gf(u,S),0<F.length&&(S=new Rb(S,t,null,r,h),f.push({event:S,listeners:F}),I?S.data=I:(I=mT(r),I!==null&&(S.data=I)))),(I=sM?iM(t,r):oM(t,r))&&(u=Gf(u,"onBeforeInput"),0<u.length&&(h=new Rb("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:u}),h.data=I))}AT(f,e)})}function Nu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Gf(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=bu(t,r),i!=null&&n.unshift(Nu(t,i,s)),i=bu(t,e),i!=null&&n.push(Nu(t,i,s))),t=t.return}return n}function qa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qb(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=bu(r,i),c!=null&&o.unshift(Nu(r,c,l))):s||(c=bu(r,i),c!=null&&o.push(Nu(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var wM=/\r\n?/g,bM=/\u0000|\uFFFD/g;function Gb(t){return(typeof t=="string"?t:""+t).replace(wM,`
`).replace(bM,"")}function Ih(t,e,r){if(e=Gb(e),Gb(t)!==e&&r)throw Error(ae(425))}function $f(){}var O0=null,L0=null;function F0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var V0=typeof setTimeout=="function"?setTimeout:void 0,EM=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,CM=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(t){return $b.resolve(null).then(t).catch(_M)}:V0;function _M(t){setTimeout(function(){throw t})}function Rg(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),_u(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);_u(e)}function Bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xl=Math.random().toString(36).slice(2),ns="__reactFiber$"+Xl,Iu="__reactProps$"+Xl,Gs="__reactContainer$"+Xl,B0="__reactEvents$"+Xl,TM="__reactListeners$"+Xl,AM="__reactHandles$"+Xl;function Fo(t){var e=t[ns];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Gs]||r[ns]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=zb(t);t!==null;){if(r=t[ns])return r;t=zb(t)}return e}t=r,r=t.parentNode}return null}function ud(t){return t=t[ns]||t[Gs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function tl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function $m(t){return t[Iu]||null}var U0=[],rl=-1;function fo(t){return{current:t}}function pt(t){0>rl||(t.current=U0[rl],U0[rl]=null,rl--)}function ut(t,e){rl++,U0[rl]=t.current,t.current=e}var Xi={},br=fo(Xi),Gr=fo(!1),Xo=Xi;function Dl(t,e){var r=t.type.contextTypes;if(!r)return Xi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $r(t){return t=t.childContextTypes,t!=null}function zf(){pt(Gr),pt(br)}function Wb(t,e,r){if(br.current!==Xi)throw Error(ae(168));ut(br,e),ut(Gr,r)}function NT(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ae(108,u4(t)||"Unknown",s));return At({},r,n)}function Wf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xi,Xo=br.current,ut(br,t),ut(Gr,Gr.current),!0}function Qb(t,e,r){var n=t.stateNode;if(!n)throw Error(ae(169));r?(t=NT(t,e,Xo),n.__reactInternalMemoizedMergedChildContext=t,pt(Gr),pt(br),ut(br,t)):pt(Gr),ut(Gr,r)}var Ms=null,zm=!1,Pg=!1;function IT(t){Ms===null?Ms=[t]:Ms.push(t)}function SM(t){zm=!0,IT(t)}function mo(){if(!Pg&&Ms!==null){Pg=!0;var t=0,e=st;try{var r=Ms;for(st=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ms=null,zm=!1}catch(s){throw Ms!==null&&(Ms=Ms.slice(t+1)),eT(Mv,mo),s}finally{st=e,Pg=!1}}return null}var nl=[],sl=0,Qf=null,Yf=0,pn=[],gn=0,Zo=null,Ds=1,Os="";function Do(t,e){nl[sl++]=Yf,nl[sl++]=Qf,Qf=t,Yf=e}function RT(t,e,r){pn[gn++]=Ds,pn[gn++]=Os,pn[gn++]=Zo,Zo=t;var n=Ds;t=Os;var s=32-Bn(n)-1;n&=~(1<<s),r+=1;var i=32-Bn(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ds=1<<32-Bn(e)+s|r<<s|n,Os=i+t}else Ds=1<<i|r<<s|n,Os=t}function Gv(t){t.return!==null&&(Do(t,1),RT(t,1,0))}function $v(t){for(;t===Qf;)Qf=nl[--sl],nl[sl]=null,Yf=nl[--sl],nl[sl]=null;for(;t===Zo;)Zo=pn[--gn],pn[gn]=null,Os=pn[--gn],pn[gn]=null,Ds=pn[--gn],pn[gn]=null}var nn=null,tn=null,bt=!1,Fn=null;function PT(t,e){var r=xn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Yb(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,tn=Bi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Zo!==null?{id:Ds,overflow:Os}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=xn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,nn=t,tn=null,!0):!1;default:return!1}}function q0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function G0(t){if(bt){var e=tn;if(e){var r=e;if(!Yb(t,e)){if(q0(t))throw Error(ae(418));e=Bi(r.nextSibling);var n=nn;e&&Yb(t,e)?PT(n,r):(t.flags=t.flags&-4097|2,bt=!1,nn=t)}}else{if(q0(t))throw Error(ae(418));t.flags=t.flags&-4097|2,bt=!1,nn=t}}}function Hb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function Rh(t){if(t!==nn)return!1;if(!bt)return Hb(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!F0(t.type,t.memoizedProps)),e&&(e=tn)){if(q0(t))throw kT(),Error(ae(418));for(;e;)PT(t,e),e=Bi(e.nextSibling)}if(Hb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){tn=Bi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}tn=null}}else tn=nn?Bi(t.stateNode.nextSibling):null;return!0}function kT(){for(var t=tn;t;)t=Bi(t.nextSibling)}function Ol(){tn=nn=null,bt=!1}function zv(t){Fn===null?Fn=[t]:Fn.push(t)}var NM=Zs.ReactCurrentBatchConfig;function Dc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var n=r.stateNode}if(!n)throw Error(ae(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,t))}return t}function Ph(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kb(t){var e=t._init;return e(t._payload)}function jT(t){function e(_,b){if(t){var C=_.deletions;C===null?(_.deletions=[b],_.flags|=16):C.push(b)}}function r(_,b){if(!t)return null;for(;b!==null;)e(_,b),b=b.sibling;return null}function n(_,b){for(_=new Map;b!==null;)b.key!==null?_.set(b.key,b):_.set(b.index,b),b=b.sibling;return _}function s(_,b){return _=$i(_,b),_.index=0,_.sibling=null,_}function i(_,b,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<b?(_.flags|=2,b):C):(_.flags|=2,b)):(_.flags|=1048576,b)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,b,C,R){return b===null||b.tag!==6?(b=Fg(C,_.mode,R),b.return=_,b):(b=s(b,C),b.return=_,b)}function c(_,b,C,R){var L=C.type;return L===Ja?h(_,b,C.props.children,R,C.key):b!==null&&(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xi&&Kb(L)===b.type)?(R=s(b,C.props),R.ref=Dc(_,b,C),R.return=_,R):(R=df(C.type,C.key,C.props,null,_.mode,R),R.ref=Dc(_,b,C),R.return=_,R)}function u(_,b,C,R){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=Vg(C,_.mode,R),b.return=_,b):(b=s(b,C.children||[]),b.return=_,b)}function h(_,b,C,R,L){return b===null||b.tag!==7?(b=Qo(C,_.mode,R,L),b.return=_,b):(b=s(b,C),b.return=_,b)}function f(_,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Fg(""+b,_.mode,C),b.return=_,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wh:return C=df(b.type,b.key,b.props,null,_.mode,C),C.ref=Dc(_,null,b),C.return=_,C;case Ka:return b=Vg(b,_.mode,C),b.return=_,b;case xi:var R=b._init;return f(_,R(b._payload),C)}if(qc(b)||Rc(b))return b=Qo(b,_.mode,C,null),b.return=_,b;Ph(_,b)}return null}function m(_,b,C,R){var L=b!==null?b.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:l(_,b,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case wh:return C.key===L?c(_,b,C,R):null;case Ka:return C.key===L?u(_,b,C,R):null;case xi:return L=C._init,m(_,b,L(C._payload),R)}if(qc(C)||Rc(C))return L!==null?null:h(_,b,C,R,null);Ph(_,C)}return null}function v(_,b,C,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(C)||null,l(b,_,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case wh:return _=_.get(R.key===null?C:R.key)||null,c(b,_,R,L);case Ka:return _=_.get(R.key===null?C:R.key)||null,u(b,_,R,L);case xi:var F=R._init;return v(_,b,C,F(R._payload),L)}if(qc(R)||Rc(R))return _=_.get(C)||null,h(b,_,R,L,null);Ph(b,R)}return null}function x(_,b,C,R){for(var L=null,F=null,I=b,S=b=0,N=null;I!==null&&S<C.length;S++){I.index>S?(N=I,I=null):N=I.sibling;var j=m(_,I,C[S],R);if(j===null){I===null&&(I=N);break}t&&I&&j.alternate===null&&e(_,I),b=i(j,b,S),F===null?L=j:F.sibling=j,F=j,I=N}if(S===C.length)return r(_,I),bt&&Do(_,S),L;if(I===null){for(;S<C.length;S++)I=f(_,C[S],R),I!==null&&(b=i(I,b,S),F===null?L=I:F.sibling=I,F=I);return bt&&Do(_,S),L}for(I=n(_,I);S<C.length;S++)N=v(I,_,S,C[S],R),N!==null&&(t&&N.alternate!==null&&I.delete(N.key===null?S:N.key),b=i(N,b,S),F===null?L=N:F.sibling=N,F=N);return t&&I.forEach(function(D){return e(_,D)}),bt&&Do(_,S),L}function p(_,b,C,R){var L=Rc(C);if(typeof L!="function")throw Error(ae(150));if(C=L.call(C),C==null)throw Error(ae(151));for(var F=L=null,I=b,S=b=0,N=null,j=C.next();I!==null&&!j.done;S++,j=C.next()){I.index>S?(N=I,I=null):N=I.sibling;var D=m(_,I,j.value,R);if(D===null){I===null&&(I=N);break}t&&I&&D.alternate===null&&e(_,I),b=i(D,b,S),F===null?L=D:F.sibling=D,F=D,I=N}if(j.done)return r(_,I),bt&&Do(_,S),L;if(I===null){for(;!j.done;S++,j=C.next())j=f(_,j.value,R),j!==null&&(b=i(j,b,S),F===null?L=j:F.sibling=j,F=j);return bt&&Do(_,S),L}for(I=n(_,I);!j.done;S++,j=C.next())j=v(I,_,S,j.value,R),j!==null&&(t&&j.alternate!==null&&I.delete(j.key===null?S:j.key),b=i(j,b,S),F===null?L=j:F.sibling=j,F=j);return t&&I.forEach(function(O){return e(_,O)}),bt&&Do(_,S),L}function w(_,b,C,R){if(typeof C=="object"&&C!==null&&C.type===Ja&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case wh:e:{for(var L=C.key,F=b;F!==null;){if(F.key===L){if(L=C.type,L===Ja){if(F.tag===7){r(_,F.sibling),b=s(F,C.props.children),b.return=_,_=b;break e}}else if(F.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xi&&Kb(L)===F.type){r(_,F.sibling),b=s(F,C.props),b.ref=Dc(_,F,C),b.return=_,_=b;break e}r(_,F);break}else e(_,F);F=F.sibling}C.type===Ja?(b=Qo(C.props.children,_.mode,R,C.key),b.return=_,_=b):(R=df(C.type,C.key,C.props,null,_.mode,R),R.ref=Dc(_,b,C),R.return=_,_=R)}return o(_);case Ka:e:{for(F=C.key;b!==null;){if(b.key===F)if(b.tag===4&&b.stateNode.containerInfo===C.containerInfo&&b.stateNode.implementation===C.implementation){r(_,b.sibling),b=s(b,C.children||[]),b.return=_,_=b;break e}else{r(_,b);break}else e(_,b);b=b.sibling}b=Vg(C,_.mode,R),b.return=_,_=b}return o(_);case xi:return F=C._init,w(_,b,F(C._payload),R)}if(qc(C))return x(_,b,C,R);if(Rc(C))return p(_,b,C,R);Ph(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,b!==null&&b.tag===6?(r(_,b.sibling),b=s(b,C),b.return=_,_=b):(r(_,b),b=Fg(C,_.mode,R),b.return=_,_=b),o(_)):r(_,b)}return w}var Ll=jT(!0),MT=jT(!1),Hf=fo(null),Kf=null,il=null,Wv=null;function Qv(){Wv=il=Kf=null}function Yv(t){var e=Hf.current;pt(Hf),t._currentValue=e}function $0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ml(t,e){Kf=t,Wv=il=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qr=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(Wv!==t)if(t={context:t,memoizedValue:e,next:null},il===null){if(Kf===null)throw Error(ae(308));il=t,Kf.dependencies={lanes:0,firstContext:t}}else il=il.next=t;return e}var Vo=null;function Hv(t){Vo===null?Vo=[t]:Vo.push(t)}function DT(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Hv(e)):(r.next=s.next,s.next=r),e.interleaved=r,$s(t,n)}function $s(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var wi=!1;function Kv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ke&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,$s(t,r)}return s=n.interleaved,s===null?(e.next=e,Hv(n)):(e.next=s.next,s.next=e),n.interleaved=e,$s(t,r)}function sf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dv(t,r)}}function Jb(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Jf(t,e,r,n){var s=t.updateQueue;wi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var m=l.lane,v=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,p=l;switch(m=e,v=r,p.tag){case 1:if(x=p.payload,typeof x=="function"){f=x.call(v,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,m=typeof x=="function"?x.call(v,f,m):x,m==null)break e;f=At({},f,m);break e;case 2:wi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=v,c=f):h=h.next=v,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ta|=o,t.lanes=o,t.memoizedState=f}}function Xb(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ae(191,s));s.call(n)}}}var dd={},os=fo(dd),Ru=fo(dd),Pu=fo(dd);function Bo(t){if(t===dd)throw Error(ae(174));return t}function Jv(t,e){switch(ut(Pu,e),ut(Ru,t),ut(os,dd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_0(e,t)}pt(os),ut(os,e)}function Fl(){pt(os),pt(Ru),pt(Pu)}function LT(t){Bo(Pu.current);var e=Bo(os.current),r=_0(e,t.type);e!==r&&(ut(Ru,t),ut(os,r))}function Xv(t){Ru.current===t&&(pt(os),pt(Ru))}var Et=fo(0);function Xf(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kg=[];function Zv(){for(var t=0;t<kg.length;t++)kg[t]._workInProgressVersionPrimary=null;kg.length=0}var of=Zs.ReactCurrentDispatcher,jg=Zs.ReactCurrentBatchConfig,ea=0,_t=null,Wt=null,er=null,Zf=!1,ou=!1,ku=0,IM=0;function mr(){throw Error(ae(321))}function ex(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Gn(t[r],e[r]))return!1;return!0}function tx(t,e,r,n,s,i){if(ea=i,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,of.current=t===null||t.memoizedState===null?jM:MM,t=r(n,s),ou){i=0;do{if(ou=!1,ku=0,25<=i)throw Error(ae(301));i+=1,er=Wt=null,e.updateQueue=null,of.current=DM,t=r(n,s)}while(ou)}if(of.current=em,e=Wt!==null&&Wt.next!==null,ea=0,er=Wt=_t=null,Zf=!1,e)throw Error(ae(300));return t}function rx(){var t=ku!==0;return ku=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?_t.memoizedState=er=t:er=er.next=t,er}function Cn(){if(Wt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Wt.next;var e=er===null?_t.memoizedState:er.next;if(e!==null)er=e,Wt=t;else{if(t===null)throw Error(ae(310));Wt=t,t={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},er===null?_t.memoizedState=er=t:er=er.next=t}return er}function ju(t,e){return typeof e=="function"?e(t):e}function Mg(t){var e=Cn(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var n=Wt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((ea&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,_t.lanes|=h,ta|=h}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Gn(n,e.memoizedState)||(qr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,_t.lanes|=i,ta|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Dg(t){var e=Cn(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Gn(i,e.memoizedState)||(qr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function FT(){}function VT(t,e){var r=_t,n=Cn(),s=e(),i=!Gn(n.memoizedState,s);if(i&&(n.memoizedState=s,qr=!0),n=n.queue,nx(qT.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||er!==null&&er.memoizedState.tag&1){if(r.flags|=2048,Mu(9,UT.bind(null,r,n,s,e),void 0,null),tr===null)throw Error(ae(349));ea&30||BT(r,e,s)}return s}function BT(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function UT(t,e,r,n){e.value=r,e.getSnapshot=n,GT(e)&&$T(t)}function qT(t,e,r){return r(function(){GT(e)&&$T(t)})}function GT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Gn(t,r)}catch{return!0}}function $T(t){var e=$s(t,1);e!==null&&Un(e,t,1,-1)}function Zb(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ju,lastRenderedState:t},e.queue=t,t=t.dispatch=kM.bind(null,_t,t),[e.memoizedState,t]}function Mu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function zT(){return Cn().memoizedState}function af(t,e,r,n){var s=Xn();_t.flags|=t,s.memoizedState=Mu(1|e,r,void 0,n===void 0?null:n)}function Wm(t,e,r,n){var s=Cn();n=n===void 0?null:n;var i=void 0;if(Wt!==null){var o=Wt.memoizedState;if(i=o.destroy,n!==null&&ex(n,o.deps)){s.memoizedState=Mu(e,r,i,n);return}}_t.flags|=t,s.memoizedState=Mu(1|e,r,i,n)}function e1(t,e){return af(8390656,8,t,e)}function nx(t,e){return Wm(2048,8,t,e)}function WT(t,e){return Wm(4,2,t,e)}function QT(t,e){return Wm(4,4,t,e)}function YT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function HT(t,e,r){return r=r!=null?r.concat([t]):null,Wm(4,4,YT.bind(null,e,t),r)}function sx(){}function KT(t,e){var r=Cn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ex(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function JT(t,e){var r=Cn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ex(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function XT(t,e,r){return ea&21?(Gn(r,e)||(r=nT(),_t.lanes|=r,ta|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qr=!0),t.memoizedState=r)}function RM(t,e){var r=st;st=r!==0&&4>r?r:4,t(!0);var n=jg.transition;jg.transition={};try{t(!1),e()}finally{st=r,jg.transition=n}}function ZT(){return Cn().memoizedState}function PM(t,e,r){var n=Gi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},eA(t))tA(e,r);else if(r=DT(t,e,r,n),r!==null){var s=Mr();Un(r,t,n,s),rA(r,e,n)}}function kM(t,e,r){var n=Gi(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(eA(t))tA(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Gn(l,o)){var c=e.interleaved;c===null?(s.next=s,Hv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=DT(t,e,s,n),r!==null&&(s=Mr(),Un(r,t,n,s),rA(r,e,n))}}function eA(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function tA(t,e){ou=Zf=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function rA(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dv(t,r)}}var em={readContext:En,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},jM={readContext:En,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:e1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,af(4194308,4,YT.bind(null,e,t),r)},useLayoutEffect:function(t,e){return af(4194308,4,t,e)},useInsertionEffect:function(t,e){return af(4,2,t,e)},useMemo:function(t,e){var r=Xn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Xn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=PM.bind(null,_t,t),[n.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:Zb,useDebugValue:sx,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=Zb(!1),e=t[0];return t=RM.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=_t,s=Xn();if(bt){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=e(),tr===null)throw Error(ae(349));ea&30||BT(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,e1(qT.bind(null,n,i,t),[t]),n.flags|=2048,Mu(9,UT.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Xn(),e=tr.identifierPrefix;if(bt){var r=Os,n=Ds;r=(n&~(1<<32-Bn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ku++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=IM++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MM={readContext:En,useCallback:KT,useContext:En,useEffect:nx,useImperativeHandle:HT,useInsertionEffect:WT,useLayoutEffect:QT,useMemo:JT,useReducer:Mg,useRef:zT,useState:function(){return Mg(ju)},useDebugValue:sx,useDeferredValue:function(t){var e=Cn();return XT(e,Wt.memoizedState,t)},useTransition:function(){var t=Mg(ju)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:FT,useSyncExternalStore:VT,useId:ZT,unstable_isNewReconciler:!1},DM={readContext:En,useCallback:KT,useContext:En,useEffect:nx,useImperativeHandle:HT,useInsertionEffect:WT,useLayoutEffect:QT,useMemo:JT,useReducer:Dg,useRef:zT,useState:function(){return Dg(ju)},useDebugValue:sx,useDeferredValue:function(t){var e=Cn();return Wt===null?e.memoizedState=t:XT(e,Wt.memoizedState,t)},useTransition:function(){var t=Dg(ju)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:FT,useSyncExternalStore:VT,useId:ZT,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=At({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function z0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:At({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Qm={isMounted:function(t){return(t=t._reactInternals)?ga(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Mr(),s=Gi(t),i=Vs(n,s);i.payload=e,r!=null&&(i.callback=r),e=Ui(t,i,s),e!==null&&(Un(e,t,s,n),sf(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Mr(),s=Gi(t),i=Vs(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Ui(t,i,s),e!==null&&(Un(e,t,s,n),sf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Mr(),n=Gi(t),s=Vs(r,n);s.tag=2,e!=null&&(s.callback=e),e=Ui(t,s,n),e!==null&&(Un(e,t,n,r),sf(e,t,n))}};function t1(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Au(r,n)||!Au(s,i):!0}function nA(t,e,r){var n=!1,s=Xi,i=e.contextType;return typeof i=="object"&&i!==null?i=En(i):(s=$r(e)?Xo:br.current,n=e.contextTypes,i=(n=n!=null)?Dl(t,s):Xi),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function r1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Qm.enqueueReplaceState(e,e.state,null)}function W0(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Kv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=En(i):(i=$r(e)?Xo:br.current,s.context=Dl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(z0(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qm.enqueueReplaceState(s,s.state,null),Jf(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vl(t,e){try{var r="",n=e;do r+=c4(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Og(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Q0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var OM=typeof WeakMap=="function"?WeakMap:Map;function sA(t,e,r){r=Vs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){rm||(rm=!0,ny=n),Q0(t,e)},r}function iA(t,e,r){r=Vs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Q0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Q0(t,e),typeof n!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function n1(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new OM;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=KM.bind(null,t,e,r),e.then(t,t))}function s1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function i1(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Vs(-1,1),e.tag=2,Ui(r,e,1))),r.lanes|=1),t)}var LM=Zs.ReactCurrentOwner,qr=!1;function Pr(t,e,r,n){e.child=t===null?MT(e,null,r,n):Ll(e,t.child,r,n)}function o1(t,e,r,n,s){r=r.render;var i=e.ref;return ml(e,s),n=tx(t,e,r,n,i,s),r=rx(),t!==null&&!qr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zs(t,e,s)):(bt&&r&&Gv(e),e.flags|=1,Pr(t,e,n,s),e.child)}function a1(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!hx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,oA(t,e,i,n,s)):(t=df(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Au,r(o,n)&&t.ref===e.ref)return zs(t,e,s)}return e.flags|=1,t=$i(i,n),t.ref=e.ref,t.return=e,e.child=t}function oA(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Au(i,n)&&t.ref===e.ref)if(qr=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(qr=!0);else return e.lanes=t.lanes,zs(t,e,s)}return Y0(t,e,r,n,s)}function aA(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(al,Xr),Xr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(al,Xr),Xr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ut(al,Xr),Xr|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,ut(al,Xr),Xr|=n;return Pr(t,e,s,r),e.child}function lA(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Y0(t,e,r,n,s){var i=$r(r)?Xo:br.current;return i=Dl(e,i),ml(e,s),r=tx(t,e,r,n,i,s),n=rx(),t!==null&&!qr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zs(t,e,s)):(bt&&n&&Gv(e),e.flags|=1,Pr(t,e,r,s),e.child)}function l1(t,e,r,n,s){if($r(r)){var i=!0;Wf(e)}else i=!1;if(ml(e,s),e.stateNode===null)lf(t,e),nA(e,r,n),W0(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=En(u):(u=$r(r)?Xo:br.current,u=Dl(e,u));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&r1(e,o,n,u),wi=!1;var m=e.memoizedState;o.state=m,Jf(e,n,o,s),c=e.memoizedState,l!==n||m!==c||Gr.current||wi?(typeof h=="function"&&(z0(e,r,h,n),c=e.memoizedState),(l=wi||t1(e,r,l,n,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,OT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Mn(e.type,l),o.props=u,f=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=En(c):(c=$r(r)?Xo:br.current,c=Dl(e,c));var v=r.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&r1(e,o,n,c),wi=!1,m=e.memoizedState,o.state=m,Jf(e,n,o,s);var x=e.memoizedState;l!==f||m!==x||Gr.current||wi?(typeof v=="function"&&(z0(e,r,v,n),x=e.memoizedState),(u=wi||t1(e,r,u,n,m,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return H0(t,e,r,n,i,s)}function H0(t,e,r,n,s,i){lA(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Qb(e,r,!1),zs(t,e,i);n=e.stateNode,LM.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ll(e,t.child,null,i),e.child=Ll(e,null,l,i)):Pr(t,e,l,i),e.memoizedState=n.state,s&&Qb(e,r,!0),e.child}function cA(t){var e=t.stateNode;e.pendingContext?Wb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wb(t,e.context,!1),Jv(t,e.containerInfo)}function c1(t,e,r,n,s){return Ol(),zv(s),e.flags|=256,Pr(t,e,r,n),e.child}var K0={dehydrated:null,treeContext:null,retryLane:0};function J0(t){return{baseLanes:t,cachePool:null,transitions:null}}function uA(t,e,r){var n=e.pendingProps,s=Et.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ut(Et,s&1),t===null)return G0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Km(o,n,0,null),t=Qo(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=J0(r),e.memoizedState=K0,t):ix(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return FM(t,e,o,n,l,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=$i(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$i(l,i):(i=Qo(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?J0(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=K0,n}return i=t.child,t=i.sibling,n=$i(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function ix(t,e){return e=Km({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kh(t,e,r,n){return n!==null&&zv(n),Ll(e,t.child,null,r),t=ix(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FM(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Og(Error(ae(422))),kh(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Km({mode:"visible",children:n.children},s,0,null),i=Qo(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Ll(e,t.child,null,o),e.child.memoizedState=J0(o),e.memoizedState=K0,i);if(!(e.mode&1))return kh(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ae(419)),n=Og(i,n,void 0),kh(t,e,o,n)}if(l=(o&t.childLanes)!==0,qr||l){if(n=tr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$s(t,s),Un(n,t,s,-1))}return dx(),n=Og(Error(ae(421))),kh(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=JM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,tn=Bi(s.nextSibling),nn=e,bt=!0,Fn=null,t!==null&&(pn[gn++]=Ds,pn[gn++]=Os,pn[gn++]=Zo,Ds=t.id,Os=t.overflow,Zo=e),e=ix(e,n.children),e.flags|=4096,e)}function u1(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),$0(t.return,e,r)}function Lg(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function dA(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Pr(t,e,n.children,r),n=Et.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&u1(t,r,e);else if(t.tag===19)u1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ut(Et,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Xf(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Lg(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Xf(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Lg(e,!0,r,null,i);break;case"together":Lg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ta|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,r=$i(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=$i(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function VM(t,e,r){switch(e.tag){case 3:cA(e),Ol();break;case 5:LT(e);break;case 1:$r(e.type)&&Wf(e);break;case 4:Jv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ut(Hf,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ut(Et,Et.current&1),e.flags|=128,null):r&e.child.childLanes?uA(t,e,r):(ut(Et,Et.current&1),t=zs(t,e,r),t!==null?t.sibling:null);ut(Et,Et.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return dA(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ut(Et,Et.current),n)break;return null;case 22:case 23:return e.lanes=0,aA(t,e,r)}return zs(t,e,r)}var hA,X0,fA,mA;hA=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};X0=function(){};fA=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Bo(os.current);var i=null;switch(r){case"input":s=w0(t,s),n=w0(t,n),i=[];break;case"select":s=At({},s,{value:void 0}),n=At({},n,{value:void 0}),i=[];break;case"textarea":s=C0(t,s),n=C0(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=$f)}T0(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ft("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};mA=function(t,e,r,n){r!==n&&(e.flags|=4)};function Oc(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function pr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function BM(t,e,r){var n=e.pendingProps;switch($v(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(e),null;case 1:return $r(e.type)&&zf(),pr(e),null;case 3:return n=e.stateNode,Fl(),pt(Gr),pt(br),Zv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Rh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(oy(Fn),Fn=null))),X0(t,e),pr(e),null;case 5:Xv(e);var s=Bo(Pu.current);if(r=e.type,t!==null&&e.stateNode!=null)fA(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ae(166));return pr(e),null}if(t=Bo(os.current),Rh(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[ns]=e,n[Iu]=i,t=(e.mode&1)!==0,r){case"dialog":ft("cancel",n),ft("close",n);break;case"iframe":case"object":case"embed":ft("load",n);break;case"video":case"audio":for(s=0;s<$c.length;s++)ft($c[s],n);break;case"source":ft("error",n);break;case"img":case"image":case"link":ft("error",n),ft("load",n);break;case"details":ft("toggle",n);break;case"input":xb(n,i),ft("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ft("invalid",n);break;case"textarea":bb(n,i),ft("invalid",n)}T0(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ih(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ih(n.textContent,l,t),s=["children",""+l]):xu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ft("scroll",n)}switch(r){case"input":bh(n),wb(n,i,!0);break;case"textarea":bh(n),Eb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=$f)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[ns]=e,t[Iu]=n,hA(t,e,!1,!1),e.stateNode=t;e:{switch(o=A0(r,n),r){case"dialog":ft("cancel",t),ft("close",t),s=n;break;case"iframe":case"object":case"embed":ft("load",t),s=n;break;case"video":case"audio":for(s=0;s<$c.length;s++)ft($c[s],t);s=n;break;case"source":ft("error",t),s=n;break;case"img":case"image":case"link":ft("error",t),ft("load",t),s=n;break;case"details":ft("toggle",t),s=n;break;case"input":xb(t,n),s=w0(t,n),ft("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=At({},n,{value:void 0}),ft("invalid",t);break;case"textarea":bb(t,n),s=C0(t,n),ft("invalid",t);break;default:s=n}T0(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?z_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&G_(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&wu(t,c):typeof c=="number"&&wu(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ft("scroll",t):c!=null&&Iv(t,i,c,o))}switch(r){case"input":bh(t),wb(t,n,!1);break;case"textarea":bh(t),Eb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ji(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ul(t,!!n.multiple,i,!1):n.defaultValue!=null&&ul(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$f)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pr(e),null;case 6:if(t&&e.stateNode!=null)mA(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ae(166));if(r=Bo(Pu.current),Bo(os.current),Rh(e)){if(n=e.stateNode,r=e.memoizedProps,n[ns]=e,(i=n.nodeValue!==r)&&(t=nn,t!==null))switch(t.tag){case 3:Ih(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ih(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ns]=e,e.stateNode=n}return pr(e),null;case 13:if(pt(Et),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&tn!==null&&e.mode&1&&!(e.flags&128))kT(),Ol(),e.flags|=98560,i=!1;else if(i=Rh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[ns]=e}else Ol(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pr(e),i=!1}else Fn!==null&&(oy(Fn),Fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Et.current&1?Qt===0&&(Qt=3):dx())),e.updateQueue!==null&&(e.flags|=4),pr(e),null);case 4:return Fl(),X0(t,e),t===null&&Su(e.stateNode.containerInfo),pr(e),null;case 10:return Yv(e.type._context),pr(e),null;case 17:return $r(e.type)&&zf(),pr(e),null;case 19:if(pt(Et),i=e.memoizedState,i===null)return pr(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Oc(i,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xf(t),o!==null){for(e.flags|=128,Oc(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ut(Et,Et.current&1|2),e.child}t=t.sibling}i.tail!==null&&Mt()>Bl&&(e.flags|=128,n=!0,Oc(i,!1),e.lanes=4194304)}else{if(!n)if(t=Xf(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Oc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!bt)return pr(e),null}else 2*Mt()-i.renderingStartTime>Bl&&r!==1073741824&&(e.flags|=128,n=!0,Oc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Mt(),e.sibling=null,r=Et.current,ut(Et,n?r&1|2:r&1),e):(pr(e),null);case 22:case 23:return ux(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Xr&1073741824&&(pr(e),e.subtreeFlags&6&&(e.flags|=8192)):pr(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function UM(t,e){switch($v(e),e.tag){case 1:return $r(e.type)&&zf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fl(),pt(Gr),pt(br),Zv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xv(e),null;case 13:if(pt(Et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Ol()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(Et),null;case 4:return Fl(),null;case 10:return Yv(e.type._context),null;case 22:case 23:return ux(),null;case 24:return null;default:return null}}var jh=!1,xr=!1,qM=typeof WeakSet=="function"?WeakSet:Set,ye=null;function ol(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Pt(t,e,n)}else r.current=null}function Z0(t,e,r){try{r()}catch(n){Pt(t,e,n)}}var d1=!1;function GM(t,e){if(O0=Uf,t=xT(),qv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var v;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===t)break t;if(m===r&&++u===s&&(l=o),m===i&&++h===n&&(c=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(L0={focusedElem:t,selectionRange:r},Uf=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,w=x.memoizedState,_=e.stateNode,b=_.getSnapshotBeforeUpdate(e.elementType===e.type?p:Mn(e.type,p),w);_.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(R){Pt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return x=d1,d1=!1,x}function au(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Z0(e,r,i)}s=s.next}while(s!==n)}}function Ym(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function ey(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function pA(t){var e=t.alternate;e!==null&&(t.alternate=null,pA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ns],delete e[Iu],delete e[B0],delete e[TM],delete e[AM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gA(t){return t.tag===5||t.tag===3||t.tag===4}function h1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ty(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=$f));else if(n!==4&&(t=t.child,t!==null))for(ty(t,e,r),t=t.sibling;t!==null;)ty(t,e,r),t=t.sibling}function ry(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ry(t,e,r),t=t.sibling;t!==null;)ry(t,e,r),t=t.sibling}var nr=null,Ln=!1;function hi(t,e,r){for(r=r.child;r!==null;)yA(t,e,r),r=r.sibling}function yA(t,e,r){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(Bm,r)}catch{}switch(r.tag){case 5:xr||ol(r,e);case 6:var n=nr,s=Ln;nr=null,hi(t,e,r),nr=n,Ln=s,nr!==null&&(Ln?(t=nr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):nr.removeChild(r.stateNode));break;case 18:nr!==null&&(Ln?(t=nr,r=r.stateNode,t.nodeType===8?Rg(t.parentNode,r):t.nodeType===1&&Rg(t,r),_u(t)):Rg(nr,r.stateNode));break;case 4:n=nr,s=Ln,nr=r.stateNode.containerInfo,Ln=!0,hi(t,e,r),nr=n,Ln=s;break;case 0:case 11:case 14:case 15:if(!xr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Z0(r,e,o),s=s.next}while(s!==n)}hi(t,e,r);break;case 1:if(!xr&&(ol(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Pt(r,e,l)}hi(t,e,r);break;case 21:hi(t,e,r);break;case 22:r.mode&1?(xr=(n=xr)||r.memoizedState!==null,hi(t,e,r),xr=n):hi(t,e,r);break;default:hi(t,e,r)}}function f1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new qM),e.forEach(function(n){var s=XM.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function kn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:nr=l.stateNode,Ln=!1;break e;case 3:nr=l.stateNode.containerInfo,Ln=!0;break e;case 4:nr=l.stateNode.containerInfo,Ln=!0;break e}l=l.return}if(nr===null)throw Error(ae(160));yA(i,o,s),nr=null,Ln=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Pt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vA(e,t),e=e.sibling}function vA(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),Kn(t),n&4){try{au(3,t,t.return),Ym(3,t)}catch(p){Pt(t,t.return,p)}try{au(5,t,t.return)}catch(p){Pt(t,t.return,p)}}break;case 1:kn(e,t),Kn(t),n&512&&r!==null&&ol(r,r.return);break;case 5:if(kn(e,t),Kn(t),n&512&&r!==null&&ol(r,r.return),t.flags&32){var s=t.stateNode;try{wu(s,"")}catch(p){Pt(t,t.return,p)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&B_(s,i),A0(l,o);var u=A0(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?z_(s,f):h==="dangerouslySetInnerHTML"?G_(s,f):h==="children"?wu(s,f):Iv(s,h,f,u)}switch(l){case"input":b0(s,i);break;case"textarea":U_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?ul(s,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?ul(s,!!i.multiple,i.defaultValue,!0):ul(s,!!i.multiple,i.multiple?[]:"",!1))}s[Iu]=i}catch(p){Pt(t,t.return,p)}}break;case 6:if(kn(e,t),Kn(t),n&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){Pt(t,t.return,p)}}break;case 3:if(kn(e,t),Kn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{_u(e.containerInfo)}catch(p){Pt(t,t.return,p)}break;case 4:kn(e,t),Kn(t);break;case 13:kn(e,t),Kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(lx=Mt())),n&4&&f1(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(xr=(u=xr)||h,kn(e,t),xr=u):kn(e,t),Kn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ye=t,h=t.child;h!==null;){for(f=ye=h;ye!==null;){switch(m=ye,v=m.child,m.tag){case 0:case 11:case 14:case 15:au(4,m,m.return);break;case 1:ol(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(p){Pt(n,r,p)}}break;case 5:ol(m,m.return);break;case 22:if(m.memoizedState!==null){p1(f);continue}}v!==null?(v.return=m,ye=v):p1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$_("display",o))}catch(p){Pt(t,t.return,p)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Pt(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kn(e,t),Kn(t),n&4&&f1(t);break;case 21:break;default:kn(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(gA(r)){var n=r;break e}r=r.return}throw Error(ae(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(wu(s,""),n.flags&=-33);var i=h1(t);ry(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=h1(t);ty(t,l,o);break;default:throw Error(ae(161))}}catch(c){Pt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $M(t,e,r){ye=t,xA(t)}function xA(t,e,r){for(var n=(t.mode&1)!==0;ye!==null;){var s=ye,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||jh;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||xr;l=jh;var u=xr;if(jh=o,(xr=c)&&!u)for(ye=s;ye!==null;)o=ye,c=o.child,o.tag===22&&o.memoizedState!==null?g1(s):c!==null?(c.return=o,ye=c):g1(s);for(;i!==null;)ye=i,xA(i),i=i.sibling;ye=s,jh=l,xr=u}m1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ye=i):m1(t)}}function m1(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xr||Ym(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!xr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Mn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Xb(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Xb(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&_u(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}xr||e.flags&512&&ey(e)}catch(m){Pt(e,e.return,m)}}if(e===t){ye=null;break}if(r=e.sibling,r!==null){r.return=e.return,ye=r;break}ye=e.return}}function p1(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ye=r;break}ye=e.return}}function g1(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ym(4,e)}catch(c){Pt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){Pt(e,s,c)}}var i=e.return;try{ey(e)}catch(c){Pt(e,i,c)}break;case 5:var o=e.return;try{ey(e)}catch(c){Pt(e,o,c)}}}catch(c){Pt(e,e.return,c)}if(e===t){ye=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ye=l;break}ye=e.return}}var zM=Math.ceil,tm=Zs.ReactCurrentDispatcher,ox=Zs.ReactCurrentOwner,wn=Zs.ReactCurrentBatchConfig,Ke=0,tr=null,Vt=null,or=0,Xr=0,al=fo(0),Qt=0,Du=null,ta=0,Hm=0,ax=0,lu=null,Br=null,lx=0,Bl=1/0,js=null,rm=!1,ny=null,qi=null,Mh=!1,Mi=null,nm=0,cu=0,sy=null,cf=-1,uf=0;function Mr(){return Ke&6?Mt():cf!==-1?cf:cf=Mt()}function Gi(t){return t.mode&1?Ke&2&&or!==0?or&-or:NM.transition!==null?(uf===0&&(uf=nT()),uf):(t=st,t!==0||(t=window.event,t=t===void 0?16:uT(t.type)),t):1}function Un(t,e,r,n){if(50<cu)throw cu=0,sy=null,Error(ae(185));ld(t,r,n),(!(Ke&2)||t!==tr)&&(t===tr&&(!(Ke&2)&&(Hm|=r),Qt===4&&Ci(t,or)),zr(t,n),r===1&&Ke===0&&!(e.mode&1)&&(Bl=Mt()+500,zm&&mo()))}function zr(t,e){var r=t.callbackNode;N4(t,e);var n=Bf(t,t===tr?or:0);if(n===0)r!==null&&Tb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Tb(r),e===1)t.tag===0?SM(y1.bind(null,t)):IT(y1.bind(null,t)),CM(function(){!(Ke&6)&&mo()}),r=null;else{switch(sT(n)){case 1:r=Mv;break;case 4:r=tT;break;case 16:r=Vf;break;case 536870912:r=rT;break;default:r=Vf}r=SA(r,wA.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function wA(t,e){if(cf=-1,uf=0,Ke&6)throw Error(ae(327));var r=t.callbackNode;if(pl()&&t.callbackNode!==r)return null;var n=Bf(t,t===tr?or:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=sm(t,n);else{e=n;var s=Ke;Ke|=2;var i=EA();(tr!==t||or!==e)&&(js=null,Bl=Mt()+500,Wo(t,e));do try{YM();break}catch(l){bA(t,l)}while(!0);Qv(),tm.current=i,Ke=s,Vt!==null?e=0:(tr=null,or=0,e=Qt)}if(e!==0){if(e===2&&(s=P0(t),s!==0&&(n=s,e=iy(t,s))),e===1)throw r=Du,Wo(t,0),Ci(t,n),zr(t,Mt()),r;if(e===6)Ci(t,n);else{if(s=t.current.alternate,!(n&30)&&!WM(s)&&(e=sm(t,n),e===2&&(i=P0(t),i!==0&&(n=i,e=iy(t,i))),e===1))throw r=Du,Wo(t,0),Ci(t,n),zr(t,Mt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ae(345));case 2:Oo(t,Br,js);break;case 3:if(Ci(t,n),(n&130023424)===n&&(e=lx+500-Mt(),10<e)){if(Bf(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Mr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=V0(Oo.bind(null,t,Br,js),e);break}Oo(t,Br,js);break;case 4:if(Ci(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Bn(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=Mt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zM(n/1960))-n,10<n){t.timeoutHandle=V0(Oo.bind(null,t,Br,js),n);break}Oo(t,Br,js);break;case 5:Oo(t,Br,js);break;default:throw Error(ae(329))}}}return zr(t,Mt()),t.callbackNode===r?wA.bind(null,t):null}function iy(t,e){var r=lu;return t.current.memoizedState.isDehydrated&&(Wo(t,e).flags|=256),t=sm(t,e),t!==2&&(e=Br,Br=r,e!==null&&oy(e)),t}function oy(t){Br===null?Br=t:Br.push.apply(Br,t)}function WM(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Gn(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ci(t,e){for(e&=~ax,e&=~Hm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Bn(e),n=1<<r;t[r]=-1,e&=~n}}function y1(t){if(Ke&6)throw Error(ae(327));pl();var e=Bf(t,0);if(!(e&1))return zr(t,Mt()),null;var r=sm(t,e);if(t.tag!==0&&r===2){var n=P0(t);n!==0&&(e=n,r=iy(t,n))}if(r===1)throw r=Du,Wo(t,0),Ci(t,e),zr(t,Mt()),r;if(r===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oo(t,Br,js),zr(t,Mt()),null}function cx(t,e){var r=Ke;Ke|=1;try{return t(e)}finally{Ke=r,Ke===0&&(Bl=Mt()+500,zm&&mo())}}function ra(t){Mi!==null&&Mi.tag===0&&!(Ke&6)&&pl();var e=Ke;Ke|=1;var r=wn.transition,n=st;try{if(wn.transition=null,st=1,t)return t()}finally{st=n,wn.transition=r,Ke=e,!(Ke&6)&&mo()}}function ux(){Xr=al.current,pt(al)}function Wo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,EM(r)),Vt!==null)for(r=Vt.return;r!==null;){var n=r;switch($v(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&zf();break;case 3:Fl(),pt(Gr),pt(br),Zv();break;case 5:Xv(n);break;case 4:Fl();break;case 13:pt(Et);break;case 19:pt(Et);break;case 10:Yv(n.type._context);break;case 22:case 23:ux()}r=r.return}if(tr=t,Vt=t=$i(t.current,null),or=Xr=e,Qt=0,Du=null,ax=Hm=ta=0,Br=lu=null,Vo!==null){for(e=0;e<Vo.length;e++)if(r=Vo[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Vo=null}return t}function bA(t,e){do{var r=Vt;try{if(Qv(),of.current=em,Zf){for(var n=_t.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Zf=!1}if(ea=0,er=Wt=_t=null,ou=!1,ku=0,ox.current=null,r===null||r.return===null){Qt=1,Du=e,Vt=null;break}e:{var i=t,o=r.return,l=r,c=e;if(e=or,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=s1(o);if(v!==null){v.flags&=-257,i1(v,o,l,i,e),v.mode&1&&n1(i,u,e),e=v,c=u;var x=e.updateQueue;if(x===null){var p=new Set;p.add(c),e.updateQueue=p}else x.add(c);break e}else{if(!(e&1)){n1(i,u,e),dx();break e}c=Error(ae(426))}}else if(bt&&l.mode&1){var w=s1(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),i1(w,o,l,i,e),zv(Vl(c,l));break e}}i=c=Vl(c,l),Qt!==4&&(Qt=2),lu===null?lu=[i]:lu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=sA(i,c,e);Jb(i,_);break e;case 1:l=c;var b=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(qi===null||!qi.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=iA(i,l,e);Jb(i,R);break e}}i=i.return}while(i!==null)}_A(r)}catch(L){e=L,Vt===r&&r!==null&&(Vt=r=r.return);continue}break}while(!0)}function EA(){var t=tm.current;return tm.current=em,t===null?em:t}function dx(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),tr===null||!(ta&268435455)&&!(Hm&268435455)||Ci(tr,or)}function sm(t,e){var r=Ke;Ke|=2;var n=EA();(tr!==t||or!==e)&&(js=null,Wo(t,e));do try{QM();break}catch(s){bA(t,s)}while(!0);if(Qv(),Ke=r,tm.current=n,Vt!==null)throw Error(ae(261));return tr=null,or=0,Qt}function QM(){for(;Vt!==null;)CA(Vt)}function YM(){for(;Vt!==null&&!x4();)CA(Vt)}function CA(t){var e=AA(t.alternate,t,Xr);t.memoizedProps=t.pendingProps,e===null?_A(t):Vt=e,ox.current=null}function _A(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=UM(r,e),r!==null){r.flags&=32767,Vt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,Vt=null;return}}else if(r=BM(r,e,Xr),r!==null){Vt=r;return}if(e=e.sibling,e!==null){Vt=e;return}Vt=e=t}while(e!==null);Qt===0&&(Qt=5)}function Oo(t,e,r){var n=st,s=wn.transition;try{wn.transition=null,st=1,HM(t,e,r,n)}finally{wn.transition=s,st=n}return null}function HM(t,e,r,n){do pl();while(Mi!==null);if(Ke&6)throw Error(ae(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(I4(t,i),t===tr&&(Vt=tr=null,or=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Mh||(Mh=!0,SA(Vf,function(){return pl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=wn.transition,wn.transition=null;var o=st;st=1;var l=Ke;Ke|=4,ox.current=null,GM(t,r),vA(r,t),pM(L0),Uf=!!O0,L0=O0=null,t.current=r,$M(r),w4(),Ke=l,st=o,wn.transition=i}else t.current=r;if(Mh&&(Mh=!1,Mi=t,nm=s),i=t.pendingLanes,i===0&&(qi=null),C4(r.stateNode),zr(t,Mt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(rm)throw rm=!1,t=ny,ny=null,t;return nm&1&&t.tag!==0&&pl(),i=t.pendingLanes,i&1?t===sy?cu++:(cu=0,sy=t):cu=0,mo(),null}function pl(){if(Mi!==null){var t=sT(nm),e=wn.transition,r=st;try{if(wn.transition=null,st=16>t?16:t,Mi===null)var n=!1;else{if(t=Mi,Mi=null,nm=0,Ke&6)throw Error(ae(331));var s=Ke;for(Ke|=4,ye=t.current;ye!==null;){var i=ye,o=i.child;if(ye.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ye=u;ye!==null;){var h=ye;switch(h.tag){case 0:case 11:case 15:au(8,h,i)}var f=h.child;if(f!==null)f.return=h,ye=f;else for(;ye!==null;){h=ye;var m=h.sibling,v=h.return;if(pA(h),h===u){ye=null;break}if(m!==null){m.return=v,ye=m;break}ye=v}}}var x=i.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var w=p.sibling;p.sibling=null,p=w}while(p!==null)}}ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ye=o;else e:for(;ye!==null;){if(i=ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:au(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ye=_;break e}ye=i.return}}var b=t.current;for(ye=b;ye!==null;){o=ye;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ye=C;else e:for(o=b;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ym(9,l)}}catch(L){Pt(l,l.return,L)}if(l===o){ye=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ye=R;break e}ye=l.return}}if(Ke=s,mo(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(Bm,t)}catch{}n=!0}return n}finally{st=r,wn.transition=e}}return!1}function v1(t,e,r){e=Vl(r,e),e=sA(t,e,1),t=Ui(t,e,1),e=Mr(),t!==null&&(ld(t,1,e),zr(t,e))}function Pt(t,e,r){if(t.tag===3)v1(t,t,r);else for(;e!==null;){if(e.tag===3){v1(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qi===null||!qi.has(n))){t=Vl(r,t),t=iA(e,t,1),e=Ui(e,t,1),t=Mr(),e!==null&&(ld(e,1,t),zr(e,t));break}}e=e.return}}function KM(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Mr(),t.pingedLanes|=t.suspendedLanes&r,tr===t&&(or&r)===r&&(Qt===4||Qt===3&&(or&130023424)===or&&500>Mt()-lx?Wo(t,0):ax|=r),zr(t,e)}function TA(t,e){e===0&&(t.mode&1?(e=_h,_h<<=1,!(_h&130023424)&&(_h=4194304)):e=1);var r=Mr();t=$s(t,e),t!==null&&(ld(t,e,r),zr(t,r))}function JM(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),TA(t,r)}function XM(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(e),TA(t,r)}var AA;AA=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gr.current)qr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return qr=!1,VM(t,e,r);qr=!!(t.flags&131072)}else qr=!1,bt&&e.flags&1048576&&RT(e,Yf,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;lf(t,e),t=e.pendingProps;var s=Dl(e,br.current);ml(e,r),s=tx(null,e,n,t,s,r);var i=rx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$r(n)?(i=!0,Wf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kv(e),s.updater=Qm,e.stateNode=s,s._reactInternals=e,W0(e,n,t,r),e=H0(null,e,n,!0,i,r)):(e.tag=0,bt&&i&&Gv(e),Pr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(lf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=eD(n),t=Mn(n,t),s){case 0:e=Y0(null,e,n,t,r);break e;case 1:e=l1(null,e,n,t,r);break e;case 11:e=o1(null,e,n,t,r);break e;case 14:e=a1(null,e,n,Mn(n.type,t),r);break e}throw Error(ae(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),Y0(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),l1(t,e,n,s,r);case 3:e:{if(cA(e),t===null)throw Error(ae(387));n=e.pendingProps,i=e.memoizedState,s=i.element,OT(t,e),Jf(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vl(Error(ae(423)),e),e=c1(t,e,n,r,s);break e}else if(n!==s){s=Vl(Error(ae(424)),e),e=c1(t,e,n,r,s);break e}else for(tn=Bi(e.stateNode.containerInfo.firstChild),nn=e,bt=!0,Fn=null,r=MT(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ol(),n===s){e=zs(t,e,r);break e}Pr(t,e,n,r)}e=e.child}return e;case 5:return LT(e),t===null&&G0(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,F0(n,s)?o=null:i!==null&&F0(n,i)&&(e.flags|=32),lA(t,e),Pr(t,e,o,r),e.child;case 6:return t===null&&G0(e),null;case 13:return uA(t,e,r);case 4:return Jv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ll(e,null,n,r):Pr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),o1(t,e,n,s,r);case 7:return Pr(t,e,e.pendingProps,r),e.child;case 8:return Pr(t,e,e.pendingProps.children,r),e.child;case 12:return Pr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ut(Hf,n._currentValue),n._currentValue=o,i!==null)if(Gn(i.value,o)){if(i.children===s.children&&!Gr.current){e=zs(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Vs(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),$0(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ae(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),$0(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ml(e,r),s=En(s),n=n(s),e.flags|=1,Pr(t,e,n,r),e.child;case 14:return n=e.type,s=Mn(n,e.pendingProps),s=Mn(n.type,s),a1(t,e,n,s,r);case 15:return oA(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),lf(t,e),e.tag=1,$r(n)?(t=!0,Wf(e)):t=!1,ml(e,r),nA(e,n,s),W0(e,n,s,r),H0(null,e,n,!0,t,r);case 19:return dA(t,e,r);case 22:return aA(t,e,r)}throw Error(ae(156,e.tag))};function SA(t,e){return eT(t,e)}function ZM(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,r,n){return new ZM(t,e,r,n)}function hx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eD(t){if(typeof t=="function")return hx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pv)return 11;if(t===kv)return 14}return 2}function $i(t,e){var r=t.alternate;return r===null?(r=xn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function df(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")hx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ja:return Qo(r.children,s,i,e);case Rv:o=8,s|=8;break;case g0:return t=xn(12,r,e,s|2),t.elementType=g0,t.lanes=i,t;case y0:return t=xn(13,r,e,s),t.elementType=y0,t.lanes=i,t;case v0:return t=xn(19,r,e,s),t.elementType=v0,t.lanes=i,t;case L_:return Km(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D_:o=10;break e;case O_:o=9;break e;case Pv:o=11;break e;case kv:o=14;break e;case xi:o=16,n=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=xn(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Qo(t,e,r,n){return t=xn(7,t,n,e),t.lanes=r,t}function Km(t,e,r,n){return t=xn(22,t,n,e),t.elementType=L_,t.lanes=r,t.stateNode={isHidden:!1},t}function Fg(t,e,r){return t=xn(6,t,null,e),t.lanes=r,t}function Vg(t,e,r){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tD(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xg(0),this.expirationTimes=xg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fx(t,e,r,n,s,i,o,l,c){return t=new tD(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=xn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kv(i),t}function rD(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ka,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function NA(t){if(!t)return Xi;t=t._reactInternals;e:{if(ga(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var r=t.type;if($r(r))return NT(t,r,e)}return e}function IA(t,e,r,n,s,i,o,l,c){return t=fx(r,n,!0,t,s,i,o,l,c),t.context=NA(null),r=t.current,n=Mr(),s=Gi(r),i=Vs(n,s),i.callback=e??null,Ui(r,i,s),t.current.lanes=s,ld(t,s,n),zr(t,n),t}function Jm(t,e,r,n){var s=e.current,i=Mr(),o=Gi(s);return r=NA(r),e.context===null?e.context=r:e.pendingContext=r,e=Vs(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ui(s,e,o),t!==null&&(Un(t,s,o,i),sf(t,s,o)),o}function im(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function mx(t,e){x1(t,e),(t=t.alternate)&&x1(t,e)}function nD(){return null}var RA=typeof reportError=="function"?reportError:function(t){console.error(t)};function px(t){this._internalRoot=t}Xm.prototype.render=px.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Jm(t,e,null,null)};Xm.prototype.unmount=px.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ra(function(){Jm(null,t,null,null)}),e[Gs]=null}};function Xm(t){this._internalRoot=t}Xm.prototype.unstable_scheduleHydration=function(t){if(t){var e=aT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ei.length&&e!==0&&e<Ei[r].priority;r++);Ei.splice(r,0,t),r===0&&cT(t)}};function gx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function w1(){}function sD(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=im(o);i.call(u)}}var o=IA(e,n,t,0,null,!1,!1,"",w1);return t._reactRootContainer=o,t[Gs]=o.current,Su(t.nodeType===8?t.parentNode:t),ra(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=im(c);l.call(u)}}var c=fx(t,0,!1,null,null,!1,!1,"",w1);return t._reactRootContainer=c,t[Gs]=c.current,Su(t.nodeType===8?t.parentNode:t),ra(function(){Jm(e,c,r,n)}),c}function ep(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=im(o);l.call(c)}}Jm(e,o,t,s)}else o=sD(r,e,t,s,n);return im(o)}iT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Gc(e.pendingLanes);r!==0&&(Dv(e,r|1),zr(e,Mt()),!(Ke&6)&&(Bl=Mt()+500,mo()))}break;case 13:ra(function(){var n=$s(t,1);if(n!==null){var s=Mr();Un(n,t,1,s)}}),mx(t,1)}};Ov=function(t){if(t.tag===13){var e=$s(t,134217728);if(e!==null){var r=Mr();Un(e,t,134217728,r)}mx(t,134217728)}};oT=function(t){if(t.tag===13){var e=Gi(t),r=$s(t,e);if(r!==null){var n=Mr();Un(r,t,e,n)}mx(t,e)}};aT=function(){return st};lT=function(t,e){var r=st;try{return st=t,e()}finally{st=r}};N0=function(t,e,r){switch(e){case"input":if(b0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=$m(n);if(!s)throw Error(ae(90));V_(n),b0(n,s)}}}break;case"textarea":U_(t,r);break;case"select":e=r.value,e!=null&&ul(t,!!r.multiple,e,!1)}};Y_=cx;H_=ra;var iD={usingClientEntryPoint:!1,Events:[ud,tl,$m,W_,Q_,cx]},Lc={findFiberByHostInstance:Fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oD={bundleType:Lc.bundleType,version:Lc.version,rendererPackageName:Lc.rendererPackageName,rendererConfig:Lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=X_(t),t===null?null:t.stateNode},findFiberByHostInstance:Lc.findFiberByHostInstance||nD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Bm=Dh.inject(oD),is=Dh}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iD;ln.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gx(e))throw Error(ae(200));return rD(t,e,null,r)};ln.createRoot=function(t,e){if(!gx(t))throw Error(ae(299));var r=!1,n="",s=RA;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=fx(t,1,!1,null,null,r,!1,n,s),t[Gs]=e.current,Su(t.nodeType===8?t.parentNode:t),new px(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=X_(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return ra(t)};ln.hydrate=function(t,e,r){if(!Zm(e))throw Error(ae(200));return ep(null,t,e,!0,r)};ln.hydrateRoot=function(t,e,r){if(!gx(t))throw Error(ae(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=RA;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=IA(e,null,t,1,r??null,s,!1,i,o),t[Gs]=e.current,Su(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Xm(e)};ln.render=function(t,e,r){if(!Zm(e))throw Error(ae(200));return ep(null,t,e,!1,r)};ln.unmountComponentAtNode=function(t){if(!Zm(t))throw Error(ae(40));return t._reactRootContainer?(ra(function(){ep(null,null,t,!1,function(){t._reactRootContainer=null,t[Gs]=null})}),!0):!1};ln.unstable_batchedUpdates=cx;ln.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Zm(r))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return ep(t,e,r,!1,n)};ln.version="18.3.1-next-f1338f8080-20240426";function PA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PA)}catch(t){console.error(t)}}PA(),P_.exports=ln;var ya=P_.exports;const kA=Ev(ya);var jA,b1=ya;jA=b1.createRoot,b1.hydrateRoot;const aD=1,lD=1e6;let Bg=0;function cD(){return Bg=(Bg+1)%Number.MAX_SAFE_INTEGER,Bg.toString()}const Ug=new Map,E1=t=>{if(Ug.has(t))return;const e=setTimeout(()=>{Ug.delete(t),uu({type:"REMOVE_TOAST",toastId:t})},lD);Ug.set(t,e)},uD=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,aD)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?E1(r):t.toasts.forEach(n=>{E1(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},hf=[];let ff={toasts:[]};function uu(t){ff=uD(ff,t),hf.forEach(e=>{e(ff)})}function lt({...t}){const e=cD(),r=s=>uu({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>uu({type:"DISMISS_TOAST",toastId:e});return uu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function dD(){const[t,e]=y.useState(ff);return y.useEffect(()=>(hf.push(e),()=>{const r=hf.indexOf(e);r>-1&&hf.splice(r,1)}),[t]),{...t,toast:lt,dismiss:r=>uu({type:"DISMISS_TOAST",toastId:r})}}function me(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function hD(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function yx(...t){return e=>t.forEach(r=>hD(r,e))}function it(...t){return y.useCallback(yx(...t),t)}function fD(t,e=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:m,children:v,...x}=f,p=(m==null?void 0:m[t][c])||l,w=y.useMemo(()=>x,Object.values(x));return a.jsx(p.Provider,{value:w,children:v})}function h(f,m){const v=(m==null?void 0:m[t][c])||l,x=y.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,h]}const s=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,mD(s,...e)]}function mD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var na=y.forwardRef((t,e)=>{const{children:r,...n}=t,s=y.Children.toArray(r),i=s.find(pD);if(i){const o=i.props.children,l=s.map(c=>c===i?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:c);return a.jsx(ay,{...n,ref:e,children:y.isValidElement(o)?y.cloneElement(o,void 0,l):null})}return a.jsx(ay,{...n,ref:e,children:r})});na.displayName="Slot";var ay=y.forwardRef((t,e)=>{const{children:r,...n}=t;if(y.isValidElement(r)){const s=yD(r);return y.cloneElement(r,{...gD(n,r.props),ref:e?yx(e,s):s})}return y.Children.count(r)>1?y.Children.only(null):null});ay.displayName="SlotClone";var MA=({children:t})=>a.jsx(a.Fragment,{children:t});function pD(t){return y.isValidElement(t)&&t.type===MA}function gD(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{i(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function yD(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function hd(t){const e=t+"CollectionProvider",[r,n]=fD(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:p}=v,w=Y.useRef(null),_=Y.useRef(new Map).current;return a.jsx(s,{scope:x,itemMap:_,collectionRef:w,children:p})};o.displayName=e;const l=t+"CollectionSlot",c=Y.forwardRef((v,x)=>{const{scope:p,children:w}=v,_=i(l,p),b=it(x,_.collectionRef);return a.jsx(na,{ref:b,children:w})});c.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=Y.forwardRef((v,x)=>{const{scope:p,children:w,..._}=v,b=Y.useRef(null),C=it(x,b),R=i(u,p);return Y.useEffect(()=>(R.itemMap.set(b,{ref:b,..._}),()=>void R.itemMap.delete(b))),a.jsx(na,{[h]:"",ref:C,children:w})});f.displayName=u;function m(v){const x=i(t+"CollectionConsumer",v);return Y.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const _=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((R,L)=>_.indexOf(R.ref.current)-_.indexOf(L.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},m,n]}function fd(t,e=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];const u=f=>{var _;const{scope:m,children:v,...x}=f,p=((_=m==null?void 0:m[t])==null?void 0:_[c])||l,w=y.useMemo(()=>x,Object.values(x));return a.jsx(p.Provider,{value:w,children:v})};u.displayName=i+"Provider";function h(f,m){var p;const v=((p=m==null?void 0:m[t])==null?void 0:p[c])||l,x=y.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,vD(s,...e)]}function vD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var xD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],qe=xD.reduce((t,e)=>{const r=y.forwardRef((n,s)=>{const{asChild:i,...o}=n,l=i?na:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function vx(t,e){t&&ya.flushSync(()=>t.dispatchEvent(e))}function Er(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function wD(t,e=globalThis==null?void 0:globalThis.document){const r=Er(t);y.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var bD="DismissableLayer",ly="dismissableLayer.update",ED="dismissableLayer.pointerDownOutside",CD="dismissableLayer.focusOutside",C1,DA=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),md=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=y.useContext(DA),[h,f]=y.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=y.useState({}),x=it(e,I=>f(I)),p=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=p.indexOf(w),b=h?p.indexOf(h):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,R=b>=_,L=TD(I=>{const S=I.target,N=[...u.branches].some(j=>j.contains(S));!R||N||(s==null||s(I),o==null||o(I),I.defaultPrevented||l==null||l())},m),F=AD(I=>{const S=I.target;[...u.branches].some(j=>j.contains(S))||(i==null||i(I),o==null||o(I),I.defaultPrevented||l==null||l())},m);return wD(I=>{b===u.layers.size-1&&(n==null||n(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},m),y.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(C1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),_1(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=C1)}},[h,m,r,u]),y.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),_1())},[h,u]),y.useEffect(()=>{const I=()=>v({});return document.addEventListener(ly,I),()=>document.removeEventListener(ly,I)},[]),a.jsx(qe.div,{...c,ref:x,style:{pointerEvents:C?R?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,F.onFocusCapture),onBlurCapture:me(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,L.onPointerDownCapture)})});md.displayName=bD;var _D="DismissableLayerBranch",OA=y.forwardRef((t,e)=>{const r=y.useContext(DA),n=y.useRef(null),s=it(e,n);return y.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(qe.div,{...t,ref:s})});OA.displayName=_D;function TD(t,e=globalThis==null?void 0:globalThis.document){const r=Er(t),n=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){LA(ED,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function AD(t,e=globalThis==null?void 0:globalThis.document){const r=Er(t),n=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!n.current&&LA(CD,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function _1(){const t=new CustomEvent(ly);document.dispatchEvent(t)}function LA(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?vx(s,i):s.dispatchEvent(i)}var SD=md,ND=OA,Cr=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},ID="Portal",tp=y.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,i]=y.useState(!1);Cr(()=>i(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?kA.createPortal(a.jsx(qe.div,{...n,ref:e}),o):null});tp.displayName=ID;function RD(t,e){return y.useReducer((r,n)=>e[r][n]??r,t)}var va=t=>{const{present:e,children:r}=t,n=PD(e),s=typeof r=="function"?r({present:n.isPresent}):y.Children.only(r),i=it(n.ref,kD(s));return typeof r=="function"||n.isPresent?y.cloneElement(s,{ref:i}):null};va.displayName="Presence";function PD(t){const[e,r]=y.useState(),n=y.useRef({}),s=y.useRef(t),i=y.useRef("none"),o=t?"mounted":"unmounted",[l,c]=RD(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Oh(n.current);i.current=l==="mounted"?u:"none"},[l]),Cr(()=>{const u=n.current,h=s.current;if(h!==t){const m=i.current,v=Oh(u);t?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Cr(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=v=>{const p=Oh(n.current).includes(v.animationName);if(v.target===e&&p&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},m=v=>{v.target===e&&(i.current=Oh(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Oh(t){return(t==null?void 0:t.animationName)||"none"}function kD(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Ou({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,s]=jD({defaultProp:e,onChange:r}),i=t!==void 0,o=i?t:n,l=Er(r),c=y.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function jD({defaultProp:t,onChange:e}){const r=y.useState(t),[n]=r,s=y.useRef(n),i=Er(e);return y.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var MD="VisuallyHidden",pd=y.forwardRef((t,e)=>a.jsx(qe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));pd.displayName=MD;var DD=pd,xx="ToastProvider",[wx,OD,LD]=hd("Toast"),[FA,yQ]=fd("Toast",[LD]),[FD,rp]=FA(xx),VA=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=y.useState(null),[u,h]=y.useState(0),f=y.useRef(!1),m=y.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${xx}\`. Expected non-empty \`string\`.`),a.jsx(wx.Provider,{scope:e,children:a.jsx(FD,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:y.useCallback(()=>h(v=>v+1),[]),onToastRemove:y.useCallback(()=>h(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};VA.displayName=xx;var BA="ToastViewport",VD=["F8"],cy="toast.viewportPause",uy="toast.viewportResume",UA=y.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=VD,label:s="Notifications ({hotkey})",...i}=t,o=rp(BA,r),l=OD(r),c=y.useRef(null),u=y.useRef(null),h=y.useRef(null),f=y.useRef(null),m=it(e,f,o.onViewportChange),v=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;y.useEffect(()=>{const w=_=>{var C;n.length!==0&&n.every(R=>_[R]||_.code===R)&&((C=f.current)==null||C.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),y.useEffect(()=>{const w=c.current,_=f.current;if(x&&w&&_){const b=()=>{if(!o.isClosePausedRef.current){const F=new CustomEvent(cy);_.dispatchEvent(F),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const F=new CustomEvent(uy);_.dispatchEvent(F),o.isClosePausedRef.current=!1}},R=F=>{!w.contains(F.relatedTarget)&&C()},L=()=>{w.contains(document.activeElement)||C()};return w.addEventListener("focusin",b),w.addEventListener("focusout",R),w.addEventListener("pointermove",b),w.addEventListener("pointerleave",L),window.addEventListener("blur",b),window.addEventListener("focus",C),()=>{w.removeEventListener("focusin",b),w.removeEventListener("focusout",R),w.removeEventListener("pointermove",b),w.removeEventListener("pointerleave",L),window.removeEventListener("blur",b),window.removeEventListener("focus",C)}}},[x,o.isClosePausedRef]);const p=y.useCallback(({tabbingDirection:w})=>{const b=l().map(C=>{const R=C.ref.current,L=[R,...XD(R)];return w==="forwards"?L:L.reverse()});return(w==="forwards"?b.reverse():b).flat()},[l]);return y.useEffect(()=>{const w=f.current;if(w){const _=b=>{var L,F,I;const C=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!C){const S=document.activeElement,N=b.shiftKey;if(b.target===w&&N){(L=u.current)==null||L.focus();return}const O=p({tabbingDirection:N?"backwards":"forwards"}),k=O.findIndex(G=>G===S);qg(O.slice(k+1))?b.preventDefault():N?(F=u.current)==null||F.focus():(I=h.current)==null||I.focus()}};return w.addEventListener("keydown",_),()=>w.removeEventListener("keydown",_)}},[l,p]),a.jsxs(ND,{ref:c,role:"region","aria-label":s.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&a.jsx(dy,{ref:u,onFocusFromOutsideViewport:()=>{const w=p({tabbingDirection:"forwards"});qg(w)}}),a.jsx(wx.Slot,{scope:r,children:a.jsx(qe.ol,{tabIndex:-1,...i,ref:m})}),x&&a.jsx(dy,{ref:h,onFocusFromOutsideViewport:()=>{const w=p({tabbingDirection:"backwards"});qg(w)}})]})});UA.displayName=BA;var qA="ToastFocusProxy",dy=y.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,i=rp(qA,r);return a.jsx(pd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});dy.displayName=qA;var np="Toast",BD="toast.swipeStart",UD="toast.swipeMove",qD="toast.swipeCancel",GD="toast.swipeEnd",GA=y.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=Ou({prop:n,defaultProp:s,onChange:i});return a.jsx(va,{present:r||l,children:a.jsx(WD,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Er(t.onPause),onResume:Er(t.onResume),onSwipeStart:me(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});GA.displayName=np;var[$D,zD]=FA(np,{onClose(){}}),WD=y.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:v,...x}=t,p=rp(np,r),[w,_]=y.useState(null),b=it(e,G=>_(G)),C=y.useRef(null),R=y.useRef(null),L=s||p.duration,F=y.useRef(0),I=y.useRef(L),S=y.useRef(0),{onToastAdd:N,onToastRemove:j}=p,D=Er(()=>{var H;(w==null?void 0:w.contains(document.activeElement))&&((H=p.viewport)==null||H.focus()),o()}),O=y.useCallback(G=>{!G||G===1/0||(window.clearTimeout(S.current),F.current=new Date().getTime(),S.current=window.setTimeout(D,G))},[D]);y.useEffect(()=>{const G=p.viewport;if(G){const H=()=>{O(I.current),u==null||u()},J=()=>{const ie=new Date().getTime()-F.current;I.current=I.current-ie,window.clearTimeout(S.current),c==null||c()};return G.addEventListener(cy,J),G.addEventListener(uy,H),()=>{G.removeEventListener(cy,J),G.removeEventListener(uy,H)}}},[p.viewport,L,c,u,O]),y.useEffect(()=>{i&&!p.isClosePausedRef.current&&O(L)},[i,L,p.isClosePausedRef,O]),y.useEffect(()=>(N(),()=>j()),[N,j]);const k=y.useMemo(()=>w?KA(w):null,[w]);return p.viewport?a.jsxs(a.Fragment,{children:[k&&a.jsx(QD,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),a.jsx($D,{scope:r,onClose:D,children:ya.createPortal(a.jsx(wx.ItemSlot,{scope:r,children:a.jsx(SD,{asChild:!0,onEscapeKeyDown:me(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||D(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...x,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,G=>{G.key==="Escape"&&(l==null||l(G.nativeEvent),G.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:me(t.onPointerDown,G=>{G.button===0&&(C.current={x:G.clientX,y:G.clientY})}),onPointerMove:me(t.onPointerMove,G=>{if(!C.current)return;const H=G.clientX-C.current.x,J=G.clientY-C.current.y,ie=!!R.current,q=["left","right"].includes(p.swipeDirection),W=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,se=q?W(0,H):0,re=q?0:W(0,J),le=G.pointerType==="touch"?10:2,ue={x:se,y:re},Se={originalEvent:G,delta:ue};ie?(R.current=ue,Lh(UD,f,Se,{discrete:!1})):T1(ue,p.swipeDirection,le)?(R.current=ue,Lh(BD,h,Se,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(H)>le||Math.abs(J)>le)&&(C.current=null)}),onPointerUp:me(t.onPointerUp,G=>{const H=R.current,J=G.target;if(J.hasPointerCapture(G.pointerId)&&J.releasePointerCapture(G.pointerId),R.current=null,C.current=null,H){const ie=G.currentTarget,q={originalEvent:G,delta:H};T1(H,p.swipeDirection,p.swipeThreshold)?Lh(GD,v,q,{discrete:!0}):Lh(qD,m,q,{discrete:!0}),ie.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),QD=t=>{const{__scopeToast:e,children:r,...n}=t,s=rp(np,e),[i,o]=y.useState(!1),[l,c]=y.useState(!1);return KD(()=>o(!0)),y.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(tp,{asChild:!0,children:a.jsx(pd,{...n,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",r]})})})},YD="ToastTitle",$A=y.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return a.jsx(qe.div,{...n,ref:e})});$A.displayName=YD;var HD="ToastDescription",zA=y.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return a.jsx(qe.div,{...n,ref:e})});zA.displayName=HD;var WA="ToastAction",QA=y.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?a.jsx(HA,{altText:r,asChild:!0,children:a.jsx(bx,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${WA}\`. Expected non-empty \`string\`.`),null)});QA.displayName=WA;var YA="ToastClose",bx=y.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=zD(YA,r);return a.jsx(HA,{asChild:!0,children:a.jsx(qe.button,{type:"button",...n,ref:e,onClick:me(t.onClick,s.onClose)})})});bx.displayName=YA;var HA=y.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return a.jsx(qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function KA(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),JD(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...KA(n))}}),e}function Lh(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?vx(s,i):s.dispatchEvent(i)}var T1=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),i=n>s;return e==="left"||e==="right"?i&&n>r:!i&&s>r};function KD(t=()=>{}){const e=Er(t);Cr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function JD(t){return t.nodeType===t.ELEMENT_NODE}function XD(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function qg(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var ZD=VA,JA=UA,XA=GA,ZA=$A,eS=zA,tS=QA,rS=bx;function nS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=nS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function sS(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=nS(t))&&(n&&(n+=" "),n+=e);return n}const A1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,S1=sS,Ex=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return S1(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=r==null?void 0:r[u],f=i==null?void 0:i[u];if(h===null)return null;const m=A1(h)||A1(f);return s[u][m]}),l=r&&Object.entries(r).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,h)=>{let{class:f,className:m,...v}=h;return Object.entries(v).every(x=>{let[p,w]=x;return Array.isArray(w)?w.includes({...i,...l}[p]):{...i,...l}[p]===w})?[...u,f,m]:u},[]);return S1(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iS=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>y.createElement("svg",{ref:c,...tO,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:iS("lucide",s),...l},[...o.map(([u,h])=>y.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(t,e)=>{const r=y.forwardRef(({className:n,...s},i)=>y.createElement(rO,{ref:i,iconNode:e,className:iS(`lucide-${eO(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=Le("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=Le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=Le("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=Le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=Le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=Le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=Le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=Le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=Le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=Le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=Le("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=Le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=Le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Le("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=Le("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=Le("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=Le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=Le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=Le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=Le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=Le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=Le("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=Le("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=Le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=Le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=Le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=Le("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=Le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=Le("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=Le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ix="-",hO=t=>{const e=mO(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(Ix);return l[0]===""&&l.length!==1&&l.shift(),hS(l,e)||fO(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},hS=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?hS(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Ix);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},I1=/^\[(.+)\]$/,fO=t=>{if(I1.test(t)){const e=I1.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},mO=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return gO(Object.entries(t.classGroups),r).forEach(([i,o])=>{gy(o,n,i,e)}),n},gy=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:R1(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(pO(s)){gy(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{gy(o,R1(e,i),r,n)})})},R1=(t,e)=>{let r=t;return e.split(Ix).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},pO=t=>t.isThemeGetter,gO=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[r,s]}):t,yO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},fS="!",vO=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let w=0;w<l.length;w++){let _=l[w];if(u===0){if(_===s&&(n||l.slice(w,w+i)===e)){c.push(l.slice(h,w)),h=w+i;continue}if(_==="/"){f=w;continue}}_==="["?u++:_==="]"&&u--}const m=c.length===0?l:l.substring(h),v=m.startsWith(fS),x=v?m.substring(1):m,p=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:x,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:o}):o},xO=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},wO=t=>({cache:yO(t.cacheSize),parseClassName:vO(t),...hO(t)}),bO=/\s+/,EO=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(bO);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:v}=r(u);let x=!!v,p=n(x?m.substring(0,v):m);if(!p){if(!x){l=u+(l.length>0?" "+l:l);continue}if(p=n(m),!p){l=u+(l.length>0?" "+l:l);continue}x=!1}const w=xO(h).join(":"),_=f?w+fS:w,b=_+p;if(i.includes(b))continue;i.push(b);const C=s(p,x);for(let R=0;R<C.length;++R){const L=C[R];i.push(_+L)}l=u+(l.length>0?" "+l:l)}return l};function CO(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=mS(e))&&(n&&(n+=" "),n+=r);return n}const mS=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=mS(t[n]))&&(r&&(r+=" "),r+=e);return r};function _O(t,...e){let r,n,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return r=wO(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const h=EO(c,r);return s(c,h),h}return function(){return i(CO.apply(null,arguments))}}const ht=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},pS=/^\[(?:([a-z-]+):)?(.+)\]$/i,TO=/^\d+\/\d+$/,AO=new Set(["px","full","screen"]),SO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,IO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,RO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,PO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ps=t=>yl(t)||AO.has(t)||TO.test(t),fi=t=>ec(t,"length",VO),yl=t=>!!t&&!Number.isNaN(Number(t)),Gg=t=>ec(t,"number",yl),Fc=t=>!!t&&Number.isInteger(Number(t)),kO=t=>t.endsWith("%")&&yl(t.slice(0,-1)),Me=t=>pS.test(t),mi=t=>SO.test(t),jO=new Set(["length","size","percentage"]),MO=t=>ec(t,jO,gS),DO=t=>ec(t,"position",gS),OO=new Set(["image","url"]),LO=t=>ec(t,OO,UO),FO=t=>ec(t,"",BO),Vc=()=>!0,ec=(t,e,r)=>{const n=pS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},VO=t=>NO.test(t)&&!IO.test(t),gS=()=>!1,BO=t=>RO.test(t),UO=t=>PO.test(t),qO=()=>{const t=ht("colors"),e=ht("spacing"),r=ht("blur"),n=ht("brightness"),s=ht("borderColor"),i=ht("borderRadius"),o=ht("borderSpacing"),l=ht("borderWidth"),c=ht("contrast"),u=ht("grayscale"),h=ht("hueRotate"),f=ht("invert"),m=ht("gap"),v=ht("gradientColorStops"),x=ht("gradientColorStopPositions"),p=ht("inset"),w=ht("margin"),_=ht("opacity"),b=ht("padding"),C=ht("saturate"),R=ht("scale"),L=ht("sepia"),F=ht("skew"),I=ht("space"),S=ht("translate"),N=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Me,e],O=()=>[Me,e],k=()=>["",Ps,fi],G=()=>["auto",yl,Me],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Me],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[yl,Me];return{cacheSize:500,separator:":",theme:{colors:[Vc],spacing:[Ps,fi],blur:["none","",mi,Me],brightness:re(),borderColor:[t],borderRadius:["none","","full",mi,Me],borderSpacing:O(),borderWidth:k(),contrast:re(),grayscale:W(),hueRotate:re(),invert:W(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[kO,fi],inset:D(),margin:D(),opacity:re(),padding:O(),saturate:re(),scale:re(),sepia:W(),skew:re(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[mi]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Me]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fc,Me]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Fc,Me]}],"grid-cols":[{"grid-cols":[Vc]}],"col-start-end":[{col:["auto",{span:["full",Fc,Me]},Me]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[Vc]}],"row-start-end":[{row:["auto",{span:[Fc,Me]},Me]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Me,e]}],"min-w":[{"min-w":[Me,e,"min","max","fit"]}],"max-w":[{"max-w":[Me,e,"none","full","min","max","fit","prose",{screen:[mi]},mi]}],h:[{h:[Me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",mi,fi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gg]}],"font-family":[{font:[Vc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",yl,Gg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ps,Me]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ps,fi]}],"underline-offset":[{"underline-offset":["auto",Ps,Me]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),DO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",MO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},LO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Ps,Me]}],"outline-w":[{outline:[Ps,fi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Ps,fi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",mi,FO]}],"shadow-color":[{shadow:[Vc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...ie(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",mi,Me]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Fc,Me]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ps,fi,Gg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},GO=_O(qO),$O=()=>{};var P1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},zO=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],l=t[r++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},vS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,v=u&63;c||(v=64,o||(m=64)),n.push(r[h],r[f],r[m],r[v])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new WO;const m=i<<2|l>>4;if(n.push(m),u!==64){const v=l<<4&240|u>>2;if(n.push(v),f!==64){const x=u<<6&192|f;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QO=function(t){const e=yS(t);return vS.encodeByteArray(e,!0)},lm=function(t){return QO(t).replace(/\./g,"")},xS=function(t){try{return vS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=()=>YO().__FIREBASE_DEFAULTS__,KO=()=>{if(typeof process>"u"||typeof P1>"u")return;const t=P1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xS(t[1]);return e&&JSON.parse(e)},sp=()=>{try{return $O()||HO()||KO()||JO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wS=t=>{var e,r;return(r=(e=sp())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},XO=t=>{const e=wS(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},bS=()=>{var t;return(t=sp())===null||t===void 0?void 0:t.config},ES=t=>{var e;return(e=sp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lm(JSON.stringify(r)),lm(JSON.stringify(o)),""].join(".")}const du={};function t3(){const t={prod:[],emulator:[]};for(const e of Object.keys(du))du[e]?t.emulator.push(e):t.prod.push(e);return t}function r3(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let k1=!1;function _S(t,e){if(typeof window>"u"||typeof document>"u"||!tc(window.location.host)||du[t]===e||du[t]||k1)return;du[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",i=t3().prod.length>0;function o(){const m=document.getElementById(n);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{k1=!0,o()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=r3(n),v=r("text"),x=document.getElementById(v)||document.createElement("span"),p=r("learnmore"),w=document.getElementById(p)||document.createElement("a"),_=r("preprendIcon"),b=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),h(w,p);const R=u();c(b,_),C.append(b,x,w,R),document.body.appendChild(C)}i?(x.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function s3(){var t;const e=(t=sp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function i3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function a3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l3(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function c3(){return!s3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u3(){try{return typeof indexedDB=="object"}catch{return!1}}function d3(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="FirebaseError";class ei extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=h3,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gd.prototype.create)}}class gd{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?f3(i,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ei(s,l,n)}}function f3(t,e){return t.replace(m3,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const m3=/\{\$([^}]+)}/g;function p3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ia(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(j1(i)&&j1(o)){if(!ia(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function j1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function zc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Wc(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function g3(t,e){const r=new y3(t,e);return r.subscribe.bind(r)}class y3{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");v3(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=$g),s.error===void 0&&(s.error=$g),s.complete===void 0&&(s.complete=$g);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function v3(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function $g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class oa{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x3=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new ZO;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b3(e))try{this.getOrInitializeService({instanceIdentifier:Lo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lo){return this.instances.has(e)}getOptions(e=Lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:w3(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Lo){return this.component?this.component.multipleInstances?e:Lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function w3(t){return t===Lo?void 0:t}function b3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new x3(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const C3={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},_3=$e.INFO,T3={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},A3=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=T3[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rx{constructor(e){this.name=e,this._logLevel=_3,this._logHandler=A3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const S3=(t,e)=>e.some(r=>t instanceof r);let M1,D1;function N3(){return M1||(M1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I3(){return D1||(D1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TS=new WeakMap,yy=new WeakMap,AS=new WeakMap,zg=new WeakMap,Px=new WeakMap;function R3(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(zi(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&TS.set(r,t)}).catch(()=>{}),Px.set(e,t),e}function P3(t){if(yy.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});yy.set(t,e)}let vy={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return yy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AS.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return zi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function k3(t){vy=t(vy)}function j3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Wg(this),e,...r);return AS.set(n,e.sort?e.sort():[e]),zi(n)}:I3().includes(t)?function(...e){return t.apply(Wg(this),e),zi(TS.get(this))}:function(...e){return zi(t.apply(Wg(this),e))}}function M3(t){return typeof t=="function"?j3(t):(t instanceof IDBTransaction&&P3(t),S3(t,N3())?new Proxy(t,vy):t)}function zi(t){if(t instanceof IDBRequest)return R3(t);if(zg.has(t))return zg.get(t);const e=M3(t);return e!==t&&(zg.set(t,e),Px.set(e,t)),e}const Wg=t=>Px.get(t);function D3(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=zi(o);return n&&o.addEventListener("upgradeneeded",c=>{n(zi(o.result),c.oldVersion,c.newVersion,zi(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const O3=["get","getKey","getAll","getAllKeys","count"],L3=["put","add","delete","clear"],Qg=new Map;function O1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qg.get(e))return Qg.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=L3.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||O3.includes(r)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return Qg.set(e,i),i}k3(t=>({...t,get:(e,r,n)=>O1(e,r)||t.get(e,r,n),has:(e,r)=>!!O1(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(V3(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function V3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xy="@firebase/app",L1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Rx("@firebase/app"),B3="@firebase/app-compat",U3="@firebase/analytics-compat",q3="@firebase/analytics",G3="@firebase/app-check-compat",$3="@firebase/app-check",z3="@firebase/auth",W3="@firebase/auth-compat",Q3="@firebase/database",Y3="@firebase/data-connect",H3="@firebase/database-compat",K3="@firebase/functions",J3="@firebase/functions-compat",X3="@firebase/installations",Z3="@firebase/installations-compat",eL="@firebase/messaging",tL="@firebase/messaging-compat",rL="@firebase/performance",nL="@firebase/performance-compat",sL="@firebase/remote-config",iL="@firebase/remote-config-compat",oL="@firebase/storage",aL="@firebase/storage-compat",lL="@firebase/firestore",cL="@firebase/ai",uL="@firebase/firestore-compat",dL="firebase",hL="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="[DEFAULT]",fL={[xy]:"fire-core",[B3]:"fire-core-compat",[q3]:"fire-analytics",[U3]:"fire-analytics-compat",[$3]:"fire-app-check",[G3]:"fire-app-check-compat",[z3]:"fire-auth",[W3]:"fire-auth-compat",[Q3]:"fire-rtdb",[Y3]:"fire-data-connect",[H3]:"fire-rtdb-compat",[K3]:"fire-fn",[J3]:"fire-fn-compat",[X3]:"fire-iid",[Z3]:"fire-iid-compat",[eL]:"fire-fcm",[tL]:"fire-fcm-compat",[rL]:"fire-perf",[nL]:"fire-perf-compat",[sL]:"fire-rc",[iL]:"fire-rc-compat",[oL]:"fire-gcs",[aL]:"fire-gcs-compat",[lL]:"fire-fst",[uL]:"fire-fst-compat",[cL]:"fire-vertex","fire-js":"fire-js",[dL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=new Map,mL=new Map,by=new Map;function F1(t,e){try{t.container.addComponent(e)}catch(r){Ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ql(t){const e=t.name;if(by.has(e))return Ws.debug(`There were multiple attempts to register component ${e}.`),!1;by.set(e,t);for(const r of Vu.values())F1(r,t);for(const r of mL.values())F1(r,t);return!0}function kx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wi=new gd("app","Firebase",pL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=hL;function SS(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:wy,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw Wi.create("bad-app-name",{appName:String(s)});if(r||(r=bS()),!r)throw Wi.create("no-options");const i=Vu.get(s);if(i){if(ia(r,i.options)&&ia(n,i.config))return i;throw Wi.create("duplicate-app",{appName:s})}const o=new E3(s);for(const c of by.values())o.addComponent(c);const l=new gL(r,n,o);return Vu.set(s,l),l}function jx(t=wy){const e=Vu.get(t);if(!e&&t===wy&&bS())return SS();if(!e)throw Wi.create("no-app",{appName:t});return e}function yL(){return Array.from(Vu.values())}function Qi(t,e,r){var n;let s=(n=fL[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ws.warn(l.join(" "));return}ql(new oa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="firebase-heartbeat-database",xL=1,Bu="firebase-heartbeat-store";let Yg=null;function NS(){return Yg||(Yg=D3(vL,xL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bu)}catch(r){console.warn(r)}}}}).catch(t=>{throw Wi.create("idb-open",{originalErrorMessage:t.message})})),Yg}async function wL(t){try{const r=(await NS()).transaction(Bu),n=await r.objectStore(Bu).get(IS(t));return await r.done,n}catch(e){if(e instanceof ei)Ws.warn(e.message);else{const r=Wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ws.warn(r.message)}}}async function V1(t,e){try{const n=(await NS()).transaction(Bu,"readwrite");await n.objectStore(Bu).put(e,IS(t)),await n.done}catch(r){if(r instanceof ei)Ws.warn(r.message);else{const n=Wi.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ws.warn(n.message)}}}function IS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=1024,EL=30;class CL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new TL(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=B1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>EL){const o=AL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ws.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=B1(),{heartbeatsToSend:n,unsentEntries:s}=_L(this._heartbeatsCache.heartbeats),i=lm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Ws.warn(r),""}}}function B1(){return new Date().toISOString().substring(0,10)}function _L(t,e=bL){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),U1(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),U1(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class TL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u3()?d3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await wL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return V1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return V1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function U1(t){return lm(JSON.stringify({version:2,heartbeats:t})).length}function AL(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t){ql(new oa("platform-logger",e=>new F3(e),"PRIVATE")),ql(new oa("heartbeat",e=>new CL(e),"PRIVATE")),Qi(xy,L1,t),Qi(xy,L1,"esm2017"),Qi("fire-js","")}SL("");var NL="firebase",IL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(NL,IL,"app");var q1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yi,RS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function N(){}N.prototype=S.prototype,I.D=S.prototype,I.prototype=new N,I.prototype.constructor=I,I.C=function(j,D,O){for(var k=Array(arguments.length-2),G=2;G<arguments.length;G++)k[G-2]=arguments[G];return S.prototype[D].apply(j,k)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,S,N){N||(N=0);var j=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)j[D]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(D=0;16>D;++D)j[D]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=I.g[0],N=I.g[1],D=I.g[2];var O=I.g[3],k=S+(O^N&(D^O))+j[0]+3614090360&4294967295;S=N+(k<<7&4294967295|k>>>25),k=O+(D^S&(N^D))+j[1]+3905402710&4294967295,O=S+(k<<12&4294967295|k>>>20),k=D+(N^O&(S^N))+j[2]+606105819&4294967295,D=O+(k<<17&4294967295|k>>>15),k=N+(S^D&(O^S))+j[3]+3250441966&4294967295,N=D+(k<<22&4294967295|k>>>10),k=S+(O^N&(D^O))+j[4]+4118548399&4294967295,S=N+(k<<7&4294967295|k>>>25),k=O+(D^S&(N^D))+j[5]+1200080426&4294967295,O=S+(k<<12&4294967295|k>>>20),k=D+(N^O&(S^N))+j[6]+2821735955&4294967295,D=O+(k<<17&4294967295|k>>>15),k=N+(S^D&(O^S))+j[7]+4249261313&4294967295,N=D+(k<<22&4294967295|k>>>10),k=S+(O^N&(D^O))+j[8]+1770035416&4294967295,S=N+(k<<7&4294967295|k>>>25),k=O+(D^S&(N^D))+j[9]+2336552879&4294967295,O=S+(k<<12&4294967295|k>>>20),k=D+(N^O&(S^N))+j[10]+4294925233&4294967295,D=O+(k<<17&4294967295|k>>>15),k=N+(S^D&(O^S))+j[11]+2304563134&4294967295,N=D+(k<<22&4294967295|k>>>10),k=S+(O^N&(D^O))+j[12]+1804603682&4294967295,S=N+(k<<7&4294967295|k>>>25),k=O+(D^S&(N^D))+j[13]+4254626195&4294967295,O=S+(k<<12&4294967295|k>>>20),k=D+(N^O&(S^N))+j[14]+2792965006&4294967295,D=O+(k<<17&4294967295|k>>>15),k=N+(S^D&(O^S))+j[15]+1236535329&4294967295,N=D+(k<<22&4294967295|k>>>10),k=S+(D^O&(N^D))+j[1]+4129170786&4294967295,S=N+(k<<5&4294967295|k>>>27),k=O+(N^D&(S^N))+j[6]+3225465664&4294967295,O=S+(k<<9&4294967295|k>>>23),k=D+(S^N&(O^S))+j[11]+643717713&4294967295,D=O+(k<<14&4294967295|k>>>18),k=N+(O^S&(D^O))+j[0]+3921069994&4294967295,N=D+(k<<20&4294967295|k>>>12),k=S+(D^O&(N^D))+j[5]+3593408605&4294967295,S=N+(k<<5&4294967295|k>>>27),k=O+(N^D&(S^N))+j[10]+38016083&4294967295,O=S+(k<<9&4294967295|k>>>23),k=D+(S^N&(O^S))+j[15]+3634488961&4294967295,D=O+(k<<14&4294967295|k>>>18),k=N+(O^S&(D^O))+j[4]+3889429448&4294967295,N=D+(k<<20&4294967295|k>>>12),k=S+(D^O&(N^D))+j[9]+568446438&4294967295,S=N+(k<<5&4294967295|k>>>27),k=O+(N^D&(S^N))+j[14]+3275163606&4294967295,O=S+(k<<9&4294967295|k>>>23),k=D+(S^N&(O^S))+j[3]+4107603335&4294967295,D=O+(k<<14&4294967295|k>>>18),k=N+(O^S&(D^O))+j[8]+1163531501&4294967295,N=D+(k<<20&4294967295|k>>>12),k=S+(D^O&(N^D))+j[13]+2850285829&4294967295,S=N+(k<<5&4294967295|k>>>27),k=O+(N^D&(S^N))+j[2]+4243563512&4294967295,O=S+(k<<9&4294967295|k>>>23),k=D+(S^N&(O^S))+j[7]+1735328473&4294967295,D=O+(k<<14&4294967295|k>>>18),k=N+(O^S&(D^O))+j[12]+2368359562&4294967295,N=D+(k<<20&4294967295|k>>>12),k=S+(N^D^O)+j[5]+4294588738&4294967295,S=N+(k<<4&4294967295|k>>>28),k=O+(S^N^D)+j[8]+2272392833&4294967295,O=S+(k<<11&4294967295|k>>>21),k=D+(O^S^N)+j[11]+1839030562&4294967295,D=O+(k<<16&4294967295|k>>>16),k=N+(D^O^S)+j[14]+4259657740&4294967295,N=D+(k<<23&4294967295|k>>>9),k=S+(N^D^O)+j[1]+2763975236&4294967295,S=N+(k<<4&4294967295|k>>>28),k=O+(S^N^D)+j[4]+1272893353&4294967295,O=S+(k<<11&4294967295|k>>>21),k=D+(O^S^N)+j[7]+4139469664&4294967295,D=O+(k<<16&4294967295|k>>>16),k=N+(D^O^S)+j[10]+3200236656&4294967295,N=D+(k<<23&4294967295|k>>>9),k=S+(N^D^O)+j[13]+681279174&4294967295,S=N+(k<<4&4294967295|k>>>28),k=O+(S^N^D)+j[0]+3936430074&4294967295,O=S+(k<<11&4294967295|k>>>21),k=D+(O^S^N)+j[3]+3572445317&4294967295,D=O+(k<<16&4294967295|k>>>16),k=N+(D^O^S)+j[6]+76029189&4294967295,N=D+(k<<23&4294967295|k>>>9),k=S+(N^D^O)+j[9]+3654602809&4294967295,S=N+(k<<4&4294967295|k>>>28),k=O+(S^N^D)+j[12]+3873151461&4294967295,O=S+(k<<11&4294967295|k>>>21),k=D+(O^S^N)+j[15]+530742520&4294967295,D=O+(k<<16&4294967295|k>>>16),k=N+(D^O^S)+j[2]+3299628645&4294967295,N=D+(k<<23&4294967295|k>>>9),k=S+(D^(N|~O))+j[0]+4096336452&4294967295,S=N+(k<<6&4294967295|k>>>26),k=O+(N^(S|~D))+j[7]+1126891415&4294967295,O=S+(k<<10&4294967295|k>>>22),k=D+(S^(O|~N))+j[14]+2878612391&4294967295,D=O+(k<<15&4294967295|k>>>17),k=N+(O^(D|~S))+j[5]+4237533241&4294967295,N=D+(k<<21&4294967295|k>>>11),k=S+(D^(N|~O))+j[12]+1700485571&4294967295,S=N+(k<<6&4294967295|k>>>26),k=O+(N^(S|~D))+j[3]+2399980690&4294967295,O=S+(k<<10&4294967295|k>>>22),k=D+(S^(O|~N))+j[10]+4293915773&4294967295,D=O+(k<<15&4294967295|k>>>17),k=N+(O^(D|~S))+j[1]+2240044497&4294967295,N=D+(k<<21&4294967295|k>>>11),k=S+(D^(N|~O))+j[8]+1873313359&4294967295,S=N+(k<<6&4294967295|k>>>26),k=O+(N^(S|~D))+j[15]+4264355552&4294967295,O=S+(k<<10&4294967295|k>>>22),k=D+(S^(O|~N))+j[6]+2734768916&4294967295,D=O+(k<<15&4294967295|k>>>17),k=N+(O^(D|~S))+j[13]+1309151649&4294967295,N=D+(k<<21&4294967295|k>>>11),k=S+(D^(N|~O))+j[4]+4149444226&4294967295,S=N+(k<<6&4294967295|k>>>26),k=O+(N^(S|~D))+j[11]+3174756917&4294967295,O=S+(k<<10&4294967295|k>>>22),k=D+(S^(O|~N))+j[2]+718787259&4294967295,D=O+(k<<15&4294967295|k>>>17),k=N+(O^(D|~S))+j[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+O&4294967295}n.prototype.u=function(I,S){S===void 0&&(S=I.length);for(var N=S-this.blockSize,j=this.B,D=this.h,O=0;O<S;){if(D==0)for(;O<=N;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<S;)if(j[D++]=I.charCodeAt(O++),D==this.blockSize){s(this,j),D=0;break}}else for(;O<S;)if(j[D++]=I[O++],D==this.blockSize){s(this,j),D=0;break}}this.h=D,this.o+=S},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;var N=8*this.o;for(S=I.length-8;S<I.length;++S)I[S]=N&255,N/=256;for(this.u(I),I=Array(16),S=N=0;4>S;++S)for(var j=0;32>j;j+=8)I[N++]=this.g[S]>>>j&255;return I};function i(I,S){var N=l;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=S(I)}function o(I,S){this.h=S;for(var N=[],j=!0,D=I.length-1;0<=D;D--){var O=I[D]|0;j&&O==S||(N[D]=O,j=!1)}this.g=N}var l={};function c(I){return-128<=I&&128>I?i(I,function(S){return new o([S|0],0>S?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return w(u(-I));for(var S=[],N=1,j=0;I>=N;j++)S[j]=I/N|0,N*=4294967296;return new o(S,0)}function h(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return w(h(I.substring(1),S));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(S,8)),j=f,D=0;D<I.length;D+=8){var O=Math.min(8,I.length-D),k=parseInt(I.substring(D,D+O),S);8>O?(O=u(Math.pow(S,O)),j=j.j(O).add(u(k))):(j=j.j(N),j=j.add(u(k)))}return j}var f=c(0),m=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-w(this).m();for(var I=0,S=1,N=0;N<this.g.length;N++){var j=this.i(N);I+=(0<=j?j:4294967296+j)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(p(this))return"-"+w(this).toString(I);for(var S=u(Math.pow(I,6)),N=this,j="";;){var D=R(N,S).g;N=_(N,D.j(S));var O=((0<N.g.length?N.g[0]:N.h)>>>0).toString(I);if(N=D,x(N))return O+j;for(;6>O.length;)O="0"+O;j=O+j}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(var S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function p(I){return I.h==-1}t.l=function(I){return I=_(this,I),p(I)?-1:x(I)?0:1};function w(I){for(var S=I.g.length,N=[],j=0;j<S;j++)N[j]=~I.g[j];return new o(N,~I.h).add(m)}t.abs=function(){return p(this)?w(this):this},t.add=function(I){for(var S=Math.max(this.g.length,I.g.length),N=[],j=0,D=0;D<=S;D++){var O=j+(this.i(D)&65535)+(I.i(D)&65535),k=(O>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);j=k>>>16,O&=65535,k&=65535,N[D]=k<<16|O}return new o(N,N[N.length-1]&-2147483648?-1:0)};function _(I,S){return I.add(w(S))}t.j=function(I){if(x(this)||x(I))return f;if(p(this))return p(I)?w(this).j(w(I)):w(w(this).j(I));if(p(I))return w(this.j(w(I)));if(0>this.l(v)&&0>I.l(v))return u(this.m()*I.m());for(var S=this.g.length+I.g.length,N=[],j=0;j<2*S;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var D=0;D<I.g.length;D++){var O=this.i(j)>>>16,k=this.i(j)&65535,G=I.i(D)>>>16,H=I.i(D)&65535;N[2*j+2*D]+=k*H,b(N,2*j+2*D),N[2*j+2*D+1]+=O*H,b(N,2*j+2*D+1),N[2*j+2*D+1]+=k*G,b(N,2*j+2*D+1),N[2*j+2*D+2]+=O*G,b(N,2*j+2*D+2)}for(j=0;j<S;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=S;j<2*S;j++)N[j]=0;return new o(N,0)};function b(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function C(I,S){this.g=I,this.h=S}function R(I,S){if(x(S))throw Error("division by zero");if(x(I))return new C(f,f);if(p(I))return S=R(w(I),S),new C(w(S.g),w(S.h));if(p(S))return S=R(I,w(S)),new C(w(S.g),S.h);if(30<I.g.length){if(p(I)||p(S))throw Error("slowDivide_ only works with positive integers.");for(var N=m,j=S;0>=j.l(I);)N=L(N),j=L(j);var D=F(N,1),O=F(j,1);for(j=F(j,2),N=F(N,2);!x(j);){var k=O.add(j);0>=k.l(I)&&(D=D.add(N),O=k),j=F(j,1),N=F(N,1)}return S=_(I,D.j(S)),new C(D,S)}for(D=f;0<=I.l(S);){for(N=Math.max(1,Math.floor(I.m()/S.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),O=u(N),k=O.j(S);p(k)||0<k.l(I);)N-=j,O=u(N),k=O.j(S);x(O)&&(O=m),D=D.add(O),I=_(I,k)}return new C(D,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var S=Math.max(this.g.length,I.g.length),N=[],j=0;j<S;j++)N[j]=this.i(j)&I.i(j);return new o(N,this.h&I.h)},t.or=function(I){for(var S=Math.max(this.g.length,I.g.length),N=[],j=0;j<S;j++)N[j]=this.i(j)|I.i(j);return new o(N,this.h|I.h)},t.xor=function(I){for(var S=Math.max(this.g.length,I.g.length),N=[],j=0;j<S;j++)N[j]=this.i(j)^I.i(j);return new o(N,this.h^I.h)};function L(I){for(var S=I.g.length+1,N=[],j=0;j<S;j++)N[j]=I.i(j)<<1|I.i(j-1)>>>31;return new o(N,I.h)}function F(I,S){var N=S>>5;S%=32;for(var j=I.g.length-N,D=[],O=0;O<j;O++)D[O]=0<S?I.i(O+N)>>>S|I.i(O+N+1)<<32-S:I.i(O+N);return new o(D,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,RS=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Yi=o}).apply(typeof q1<"u"?q1:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PS,Qc,kS,pf,Ey,jS,MS,DS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,A){return d==Array.prototype||d==Object.prototype||(d[g]=A.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var g=0;g<d.length;++g){var A=d[g];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var n=r(this);function s(d,g){if(g)e:{var A=n;d=d.split(".");for(var M=0;M<d.length-1;M++){var $=d[M];if(!($ in A))break e;A=A[$]}d=d[d.length-1],M=A[d],g=g(M),g!=M&&g!=null&&e(A,d,{configurable:!0,writable:!0,value:g})}}function i(d,g){d instanceof String&&(d+="");var A=0,M=!1,$={next:function(){if(!M&&A<d.length){var K=A++;return{value:g(K,d[K]),done:!1}}return M=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(d){return d||function(){return i(this,function(g,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function h(d,g,A){return d.call.apply(d.bind,arguments)}function f(d,g,A){if(!d)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,M),d.apply(g,$)}}return function(){return d.apply(g,arguments)}}function m(d,g,A){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function v(d,g){var A=Array.prototype.slice.call(arguments,1);return function(){var M=A.slice();return M.push.apply(M,arguments),d.apply(this,M)}}function x(d,g){function A(){}A.prototype=g.prototype,d.aa=g.prototype,d.prototype=new A,d.prototype.constructor=d,d.Qb=function(M,$,K){for(var X=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)X[nt-2]=arguments[nt];return g.prototype[$].apply(M,X)}}function p(d){const g=d.length;if(0<g){const A=Array(g);for(let M=0;M<g;M++)A[M]=d[M];return A}return[]}function w(d,g){for(let A=1;A<arguments.length;A++){const M=arguments[A];if(c(M)){const $=d.length||0,K=M.length||0;d.length=$+K;for(let X=0;X<K;X++)d[$+X]=M[X]}else d.push(M)}}class _{constructor(g,A){this.i=g,this.j=A,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(d){return/^[\s\xa0]*$/.test(d)}function C(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var L=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function F(d,g,A){for(const M in d)g.call(A,d[M],M,d)}function I(d,g){for(const A in d)g.call(void 0,d[A],A,d)}function S(d){const g={};for(const A in d)g[A]=d[A];return g}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(d,g){let A,M;for(let $=1;$<arguments.length;$++){M=arguments[$];for(A in M)d[A]=M[A];for(let K=0;K<N.length;K++)A=N[K],Object.prototype.hasOwnProperty.call(M,A)&&(d[A]=M[A])}}function D(d){var g=1;d=d.split(":");const A=[];for(;0<g&&d.length;)A.push(d.shift()),g--;return d.length&&A.push(d.join(":")),A}function O(d){l.setTimeout(()=>{throw d},0)}function k(){var d=W;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class G{constructor(){this.h=this.g=null}add(g,A){const M=H.get();M.set(g,A),this.h?this.h.next=M:this.g=M,this.h=M}}var H=new _(()=>new J,d=>d.reset());class J{constructor(){this.next=this.g=this.h=null}set(g,A){this.h=g,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,q=!1,W=new G,se=()=>{const d=l.Promise.resolve(void 0);ie=()=>{d.then(re)}};var re=()=>{for(var d;d=k();){try{d.h.call(d.g)}catch(A){O(A)}var g=H;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}q=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const A=()=>{};l.addEventListener("test",A,g),l.removeEventListener("test",A,g)}catch{}return d}();function ke(d,g){if(ue.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var A=this.type=d.type,M=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(L){e:{try{R(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else A=="mouseover"?g=d.fromElement:A=="mouseout"&&(g=d.toElement);this.relatedTarget=g,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:we[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ke.aa.h.call(this)}}x(ke,ue);var we={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),ge=0;function xe(d,g,A,M,$){this.listener=d,this.proxy=null,this.src=g,this.type=A,this.capture=!!M,this.ha=$,this.key=++ge,this.da=this.fa=!1}function be(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Te(d){this.src=d,this.g={},this.h=0}Te.prototype.add=function(d,g,A,M,$){var K=d.toString();d=this.g[K],d||(d=this.g[K]=[],this.h++);var X=he(d,g,M,$);return-1<X?(g=d[X],A||(g.fa=!1)):(g=new xe(g,this.src,K,!!M,$),g.fa=A,d.push(g)),g};function Ce(d,g){var A=g.type;if(A in d.g){var M=d.g[A],$=Array.prototype.indexOf.call(M,g,void 0),K;(K=0<=$)&&Array.prototype.splice.call(M,$,1),K&&(be(g),d.g[A].length==0&&(delete d.g[A],d.h--))}}function he(d,g,A,M){for(var $=0;$<d.length;++$){var K=d[$];if(!K.da&&K.listener==g&&K.capture==!!A&&K.ha==M)return $}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),gt={};function at(d,g,A,M,$){if(Array.isArray(g)){for(var K=0;K<g.length;K++)at(d,g[K],A,M,$);return null}return A=_o(A),d&&d[oe]?d.K(g,A,u(M)?!!M.capture:!!M,$):Ot(d,g,A,!1,M,$)}function Ot(d,g,A,M,$,K){if(!g)throw Error("Invalid event type");var X=u($)?!!$.capture:!!$,nt=un(d);if(nt||(d[ve]=nt=new Te(d)),A=nt.add(g,A,M,X,K),A.proxy)return A;if(M=Ze(),A.proxy=M,M.src=d,M.listener=A,d.addEventListener)Se||($=X),$===void 0&&($=!1),d.addEventListener(g.toString(),M,$);else if(d.attachEvent)d.attachEvent(_n(g.toString()),M);else if(d.addListener&&d.removeListener)d.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Ze(){function d(A){return g.call(d.src,d.listener,A)}const g=xs;return d}function yt(d,g,A,M,$){if(Array.isArray(g))for(var K=0;K<g.length;K++)yt(d,g[K],A,M,$);else M=u(M)?!!M.capture:!!M,A=_o(A),d&&d[oe]?(d=d.i,g=String(g).toString(),g in d.g&&(K=d.g[g],A=he(K,A,M,$),-1<A&&(be(K[A]),Array.prototype.splice.call(K,A,1),K.length==0&&(delete d.g[g],d.h--)))):d&&(d=un(d))&&(g=d.g[g.toString()],d=-1,g&&(d=he(g,A,M,$)),(A=-1<d?g[d]:null)&&ur(A))}function ur(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[oe])Ce(g.i,d);else{var A=d.type,M=d.proxy;g.removeEventListener?g.removeEventListener(A,M,d.capture):g.detachEvent?g.detachEvent(_n(A),M):g.addListener&&g.removeListener&&g.removeListener(M),(A=un(g))?(Ce(A,d),A.h==0&&(A.src=null,g[ve]=null)):be(d)}}}function _n(d){return d in gt?gt[d]:gt[d]="on"+d}function xs(d,g){if(d.da)d=!0;else{g=new ke(g,this);var A=d.listener,M=d.ha||d.src;d.fa&&ur(d),d=A.call(M,g)}return d}function un(d){return d=d[ve],d instanceof Te?d:null}var ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function _o(d){return typeof d=="function"?d:(d[ws]||(d[ws]=function(g){return d.handleEvent(g)}),d[ws])}function Nt(){le.call(this),this.i=new Te(this),this.M=this,this.F=null}x(Nt,le),Nt.prototype[oe]=!0,Nt.prototype.removeEventListener=function(d,g,A,M){yt(this,d,g,A,M)};function vt(d,g){var A,M=d.F;if(M)for(A=[];M;M=M.F)A.push(M);if(d=d.M,M=g.type||g,typeof g=="string")g=new ue(g,d);else if(g instanceof ue)g.target=g.target||d;else{var $=g;g=new ue(M,d),j(g,$)}if($=!0,A)for(var K=A.length-1;0<=K;K--){var X=g.g=A[K];$=bs(X,M,!0,g)&&$}if(X=g.g=d,$=bs(X,M,!0,g)&&$,$=bs(X,M,!1,g)&&$,A)for(K=0;K<A.length;K++)X=g.g=A[K],$=bs(X,M,!1,g)&&$}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var A=d.g[g],M=0;M<A.length;M++)be(A[M]);delete d.g[g],d.h--}}this.F=null},Nt.prototype.K=function(d,g,A,M){return this.i.add(String(d),g,!1,A,M)},Nt.prototype.L=function(d,g,A,M){return this.i.add(String(d),g,!0,A,M)};function bs(d,g,A,M){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,K=0;K<g.length;++K){var X=g[K];if(X&&!X.da&&X.capture==A){var nt=X.listener,$t=X.ha||X.src;X.fa&&Ce(d.i,X),$=nt.call($t,M)!==!1&&$}}return $&&!M.defaultPrevented}function Tn(d,g,A){if(typeof d=="function")A&&(d=m(d,A));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function To(d){d.g=Tn(()=>{d.g=null,d.i&&(d.i=!1,To(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class ri extends le{constructor(g,A){super(),this.m=g,this.l=A,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:To(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dn(d){le.call(this),this.h=d,this.g={}}x(dn,le);var An=[];function Sn(d){F(d.g,function(g,A){this.g.hasOwnProperty(A)&&ur(g)},d),d.g={}}dn.prototype.N=function(){dn.aa.N.call(this),Sn(this)},dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tr=l.JSON.stringify,Ar=l.JSON.parse,yc=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Ae(){}Ae.prototype.h=null;function Ge(d){return d.h||(d.h=d.i())}function Je(){}var Ht={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){ue.call(this,"d")}x(dr,ue);function Nn(){ue.call(this,"c")}x(Nn,ue);var dt={},ni=null;function We(){return ni=ni||new Nt}dt.La="serverreachability";function Md(d){ue.call(this,dt.La,d)}x(Md,ue);function hr(d){const g=We();vt(g,new Md(g))}dt.STAT_EVENT="statevent";function hn(d,g){ue.call(this,dt.STAT_EVENT,d),this.stat=g}x(hn,ue);function rr(d){const g=We();vt(g,new hn(g,d))}dt.Ma="timingevent";function Dd(d,g){ue.call(this,dt.Ma,d),this.size=g}x(Dd,ue);function Es(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function Cs(){this.g=!0}Cs.prototype.xa=function(){this.g=!1};function Od(d,g,A,M,$,K){d.info(function(){if(d.g)if(K)for(var X="",nt=K.split("&"),$t=0;$t<nt.length;$t++){var Qe=nt[$t].split("=");if(1<Qe.length){var Kt=Qe[0];Qe=Qe[1];var Jt=Kt.split("_");X=2<=Jt.length&&Jt[1]=="type"?X+(Kt+"="+Qe+"&"):X+(Kt+"=redacted&")}}else X=null;else X=K;return"XMLHTTP REQ ("+M+") [attempt "+$+"]: "+g+`
`+A+`
`+X})}function Xp(d,g,A,M,$,K,X){d.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+$+"]: "+g+`
`+A+`
`+K+" "+X})}function _s(d,g,A,M){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Zp(d,A)+(M?" "+M:"")})}function Ao(d,g){d.info(function(){return"TIMEOUT: "+g})}Cs.prototype.info=function(){};function Zp(d,g){if(!d.g)return g;if(!g)return null;try{var A=JSON.parse(g);if(A){for(d=0;d<A.length;d++)if(Array.isArray(A[d])){var M=A[d];if(!(2>M.length)){var $=M[1];if(Array.isArray($)&&!(1>$.length)){var K=$[0];if(K!="noop"&&K!="stop"&&K!="close")for(var X=1;X<$.length;X++)$[X]=""}}}}return Tr(A)}catch{return g}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ta={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Aa;function So(){}x(So,Ae),So.prototype.g=function(){return new XMLHttpRequest},So.prototype.i=function(){return{}},Aa=new So;function In(d,g,A,M){this.j=d,this.i=g,this.l=A,this.R=M||1,this.U=new dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ld}function Ld(){this.i=null,this.g="",this.h=!1}var Fd={},vc={};function xc(d,g,A){d.L=1,d.v=ja(Qr(g)),d.m=A,d.P=!0,Sa(d,null)}function Sa(d,g){d.F=Date.now(),Na(d),d.A=Qr(d.v);var A=d.A,M=d.R;Array.isArray(M)||(M=[String(M)]),Yd(A.i,"t",M),d.C=0,A=d.j.J,d.h=new Ld,d.g=dh(d.j,A?g:null,!d.m),0<d.O&&(d.M=new ri(m(d.Y,d,d.g),d.O)),g=d.U,A=d.g,M=d.ca;var $="readystatechange";Array.isArray($)||($&&(An[0]=$.toString()),$=An);for(var K=0;K<$.length;K++){var X=at(A,$[K],M||g.handleEvent,!1,g.h||g);if(!X)break;g.g[X.key]=X}g=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),hr(),Od(d.i,d.u,d.A,d.l,d.R,d.m)}In.prototype.ca=function(d){d=d.target;const g=this.M;g&&Pn(d)==3?g.j():this.Y(d)},In.prototype.Y=function(d){try{if(d==this.g)e:{const Jt=Pn(this.g);var g=this.g.Ba();const di=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||rh(this.g)))){this.J||Jt!=4||g==7||(g==8||0>=di?hr(3):hr(2)),bc(this);var A=this.g.Z();this.X=A;t:if(Vd(this)){var M=rh(this.g);d="";var $=M.length,K=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),No(this);var X="";break t}this.h.i=new l.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,d+=this.h.i.decode(M[g],{stream:!(K&&g==$-1)});M.length=0,this.h.g+=d,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=A==200,Xp(this.i,this.u,this.A,this.l,this.R,Jt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,$t=this.g;if((nt=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(nt)){var Qe=nt;break t}}Qe=null}if(A=Qe)_s(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,si(this,A);else{this.o=!1,this.s=3,rr(12),As(this),No(this);break e}}if(this.P){A=!0;let Yr;for(;!this.J&&this.C<X.length;)if(Yr=eg(this,X),Yr==vc){Jt==4&&(this.s=4,rr(14),A=!1),_s(this.i,this.l,null,"[Incomplete Response]");break}else if(Yr==Fd){this.s=4,rr(15),_s(this.i,this.l,X,"[Invalid Chunk]"),A=!1;break}else _s(this.i,this.l,Yr,null),si(this,Yr);if(Vd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||X.length!=0||this.h.h||(this.s=1,rr(16),A=!1),this.o=this.o&&A,!A)_s(this.i,this.l,X,"[Invalid Chunked Response]"),As(this),No(this);else if(0<X.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Nc(Kt),Kt.M=!0,rr(11))}}else _s(this.i,this.l,X,null),si(this,X);Jt==4&&As(this),this.o&&!this.J&&(Jt==4?ch(this.j,this):(this.o=!1,Na(this)))}else ug(this.g),A==400&&0<X.indexOf("Unknown SID")?(this.s=3,rr(12)):(this.s=0,rr(13)),As(this),No(this)}}}catch{}finally{}};function Vd(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function eg(d,g){var A=d.C,M=g.indexOf(`
`,A);return M==-1?vc:(A=Number(g.substring(A,M)),isNaN(A)?Fd:(M+=1,M+A>g.length?vc:(g=g.slice(M,M+A),d.C=M+A,g)))}In.prototype.cancel=function(){this.J=!0,As(this)};function Na(d){d.S=Date.now()+d.I,wc(d,d.I)}function wc(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Es(m(d.ba,d),g)}function bc(d){d.B&&(l.clearTimeout(d.B),d.B=null)}In.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ao(this.i,this.A),this.L!=2&&(hr(),rr(17)),As(this),this.s=2,No(this)):wc(this,this.S-d)};function No(d){d.j.G==0||d.J||ch(d.j,d)}function As(d){bc(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Sn(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function si(d,g){try{var A=d.j;if(A.G!=0&&(A.g==d||Ia(A.h,d))){if(!d.K&&Ia(A.h,d)&&A.G==3){try{var M=A.Da.g.parse(g)}catch{M=null}if(Array.isArray(M)&&M.length==3){var $=M;if($[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<d.F)Fa(A),jo(A);else break e;Sc(A),rr(18)}}else A.za=$[1],0<A.za-A.T&&37500>$[2]&&A.F&&A.v==0&&!A.C&&(A.C=Es(m(A.Za,A),6e3));if(1>=Ec(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Is(A,11)}else if((d.K||A.g==d)&&Fa(A),!b(g))for($=A.Da.g.parse(g),g=0;g<$.length;g++){let Qe=$[g];if(A.T=Qe[0],Qe=Qe[1],A.G==2)if(Qe[0]=="c"){A.K=Qe[1],A.ia=Qe[2];const Kt=Qe[3];Kt!=null&&(A.la=Kt,A.j.info("VER="+A.la));const Jt=Qe[4];Jt!=null&&(A.Aa=Jt,A.j.info("SVER="+A.Aa));const di=Qe[5];di!=null&&typeof di=="number"&&0<di&&(M=1.5*di,A.L=M,A.j.info("backChannelRequestTimeoutMs_="+M)),M=A;const Yr=d.g;if(Yr){const Ua=Yr.g?Yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var K=M.h;K.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ra(K,K.h),K.h=null))}if(M.D){const Ic=Yr.g?Yr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ic&&(M.ya=Ic,ot(M.I,M.D,Ic))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-d.F,A.j.info("Handshake RTT: "+A.R+"ms")),M=A;var X=d;if(M.qa=uh(M,M.J?M.ia:null,M.W),X.K){Fe(M.h,X);var nt=X,$t=M.L;$t&&(nt.I=$t),nt.B&&(bc(nt),Na(nt)),M.g=X}else ah(M);0<A.i.length&&La(A)}else Qe[0]!="stop"&&Qe[0]!="close"||Is(A,7);else A.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Is(A,7):Ac(A):Qe[0]!="noop"&&A.l&&A.l.ta(Qe),A.v=0)}}hr(4)}catch{}}var tg=class{constructor(d,g){this.g=d,this.map=g}};function Bd(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Io(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ec(d){return d.h?1:d.g?d.g.size:0}function Ia(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Ra(d,g){d.g?d.g.add(g):d.h=g}function Fe(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Bd.prototype.cancel=function(){if(this.i=Ud(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ud(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const A of d.g.values())g=g.concat(A.D);return g}return p(d.i)}function rg(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],A=d.length,M=0;M<A;M++)g.push(d[M]);return g}g=[],A=0;for(M in d)g[A++]=d[M];return g}function Wr(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var A=0;A<d;A++)g.push(A);return g}g=[],A=0;for(const M in d)g[A++]=M;return g}}}function qd(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var A=Wr(d),M=rg(d),$=M.length,K=0;K<$;K++)g.call(void 0,M[K],A&&A[K],d)}var Cc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(d,g){if(d){d=d.split("&");for(var A=0;A<d.length;A++){var M=d[A].indexOf("="),$=null;if(0<=M){var K=d[A].substring(0,M);$=d[A].substring(M+1)}else K=d[A];g(K,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ss(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ss){this.h=d.h,ka(this,d.j),this.o=d.o,this.g=d.g,ii(this,d.s),this.l=d.l;var g=d.i,A=new Ro;A.i=g.i,g.g&&(A.g=new Map(g.g),A.h=g.h),Gd(this,A),this.m=d.m}else d&&(g=String(d).match(Cc))?(this.h=!1,ka(this,g[1]||"",!0),this.o=Ns(g[2]||""),this.g=Ns(g[3]||"",!0),ii(this,g[4]),this.l=Ns(g[5]||"",!0),Gd(this,g[6]||"",!0),this.m=Ns(g[7]||"")):(this.h=!1,this.i=new Ro(null,this.h))}Ss.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Sr(g,$d,!0),":");var A=this.g;return(A||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Sr(g,$d,!0),"@"),d.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&d.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&d.push("/"),d.push(Sr(A,A.charAt(0)=="/"?Rn:ng,!0))),(A=this.i.toString())&&d.push("?",A),(A=this.m)&&d.push("#",Sr(A,sg)),d.join("")};function Qr(d){return new Ss(d)}function ka(d,g,A){d.j=A?Ns(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function ii(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Gd(d,g,A){g instanceof Ro?(d.i=g,ig(d.i,d.h)):(A||(g=Sr(g,zd)),d.i=new Ro(g,d.h))}function ot(d,g,A){d.i.set(g,A)}function ja(d){return ot(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ns(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Sr(d,g,A){return typeof d=="string"?(d=encodeURI(d).replace(g,_c),A&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function _c(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var $d=/[#\/\?@]/g,ng=/[#\?:]/g,Rn=/[#\?]/g,zd=/[#\?@]/g,sg=/#/g;function Ro(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Hn(d){d.g||(d.g=new Map,d.h=0,d.i&&Pa(d.i,function(g,A){d.add(decodeURIComponent(g.replace(/\+/g," ")),A)}))}t=Ro.prototype,t.add=function(d,g){Hn(this),this.i=null,d=oi(this,d);var A=this.g.get(d);return A||this.g.set(d,A=[]),A.push(g),this.h+=1,this};function Wd(d,g){Hn(d),g=oi(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Qd(d,g){return Hn(d),g=oi(d,g),d.g.has(g)}t.forEach=function(d,g){Hn(this),this.g.forEach(function(A,M){A.forEach(function($){d.call(g,$,M,this)},this)},this)},t.na=function(){Hn(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),A=[];for(let M=0;M<g.length;M++){const $=d[M];for(let K=0;K<$.length;K++)A.push(g[M])}return A},t.V=function(d){Hn(this);let g=[];if(typeof d=="string")Qd(this,d)&&(g=g.concat(this.g.get(oi(this,d))));else{d=Array.from(this.g.values());for(let A=0;A<d.length;A++)g=g.concat(d[A])}return g},t.set=function(d,g){return Hn(this),this.i=null,d=oi(this,d),Qd(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function Yd(d,g,A){Wd(d,g),0<A.length&&(d.i=null,d.g.set(oi(d,g),p(A)),d.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var A=0;A<g.length;A++){var M=g[A];const K=encodeURIComponent(String(M)),X=this.V(M);for(M=0;M<X.length;M++){var $=K;X[M]!==""&&($+="="+encodeURIComponent(String(X[M]))),d.push($)}}return this.i=d.join("&")};function oi(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function ig(d,g){g&&!d.j&&(Hn(d),d.i=null,d.g.forEach(function(A,M){var $=M.toLowerCase();M!=$&&(Wd(this,M),Yd(this,$,A))},d)),d.j=g}function og(d,g){const A=new Cs;if(l.Image){const M=new Image;M.onload=v(Nr,A,"TestLoadImage: loaded",!0,g,M),M.onerror=v(Nr,A,"TestLoadImage: error",!1,g,M),M.onabort=v(Nr,A,"TestLoadImage: abort",!1,g,M),M.ontimeout=v(Nr,A,"TestLoadImage: timeout",!1,g,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=d}else g(!1)}function ag(d,g){const A=new Cs,M=new AbortController,$=setTimeout(()=>{M.abort(),Nr(A,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:M.signal}).then(K=>{clearTimeout($),K.ok?Nr(A,"TestPingServer: ok",!0,g):Nr(A,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),Nr(A,"TestPingServer: error",!1,g)})}function Nr(d,g,A,M,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),M(A)}catch{}}function Hd(){this.g=new yc}function Kd(d,g,A){const M=A||"";try{qd(d,function($,K){let X=$;u($)&&(X=Tr($)),g.push(M+K+"="+encodeURIComponent(X))})}catch($){throw g.push(M+"type="+encodeURIComponent("_badmap")),$}}function Po(d){this.l=d.Ub||null,this.j=d.eb||!1}x(Po,Ae),Po.prototype.g=function(){return new Ma(this.l,this.j)},Po.prototype.i=function(d){return function(){return d}}({});function Ma(d,g){Nt.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ma,Nt),t=Ma.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ko(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jd(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jd(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?ai(this):ko(this),this.readyState==3&&Jd(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ai(this))},t.Qa=function(d){this.g&&(this.response=d,ai(this))},t.ga=function(){this.g&&ai(this)};function ai(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ko(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var A=g.next();!A.done;)A=A.value,d.push(A[0]+": "+A[1]),A=g.next();return d.join(`\r
`)};function ko(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Xd(d){let g="";return F(d,function(A,M){g+=M,g+=":",g+=A,g+=`\r
`}),g}function Tc(d,g,A){e:{for(M in A){var M=!1;break e}M=!0}M||(A=Xd(A),typeof d=="string"?A!=null&&encodeURIComponent(String(A)):ot(d,g,A))}function xt(d){Nt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(xt,Nt);var lg=/^https?$/i,cg=["POST","PUT"];t=xt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,A,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Aa.g(),this.v=this.o?Ge(this.o):Ge(Aa),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(K){Zd(this,K);return}if(d=A||"",A=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var $ in M)A.set($,M[$]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const K of M.keys())A.set(K,M.get(K));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(A.keys()).find(K=>K.toLowerCase()=="content-type"),$=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(cg,g,void 0))||M||$||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,X]of A)this.g.setRequestHeader(K,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oa(this),this.u=!0,this.g.send(d),this.u=!1}catch(K){Zd(this,K)}};function Zd(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,eh(d),Da(d)}function eh(d){d.A||(d.A=!0,vt(d,"complete"),vt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,vt(this,"complete"),vt(this,"abort"),Da(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Da(this,!0)),xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?th(this):this.bb())},t.bb=function(){th(this)};function th(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Pn(d)!=4||d.Z()!=2)){if(d.u&&Pn(d)==4)Tn(d.Ea,0,d);else if(vt(d,"readystatechange"),Pn(d)==4){d.h=!1;try{const X=d.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var A;if(!(A=g)){var M;if(M=X===0){var $=String(d.D).match(Cc)[1]||null;!$&&l.self&&l.self.location&&($=l.self.location.protocol.slice(0,-1)),M=!lg.test($?$.toLowerCase():"")}A=M}if(A)vt(d,"complete"),vt(d,"success");else{d.m=6;try{var K=2<Pn(d)?d.g.statusText:""}catch{K=""}d.l=K+" ["+d.Z()+"]",eh(d)}}finally{Da(d)}}}}function Da(d,g){if(d.g){Oa(d);const A=d.g,M=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||vt(d,"ready");try{A.onreadystatechange=M}catch{}}}function Oa(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Pn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Ar(g)}};function rh(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ug(d){const g={};d=(d.g&&2<=Pn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<d.length;M++){if(b(d[M]))continue;var A=D(d[M]);const $=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const K=g[$]||[];g[$]=K,K.push(A)}I(g,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function li(d,g,A){return A&&A.internalChannelParams&&A.internalChannelParams[d]||g}function nh(d){this.Aa=0,this.i=[],this.j=new Cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=li("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=li("baseRetryDelayMs",5e3,d),this.cb=li("retryDelaySeedMs",1e4,d),this.Wa=li("forwardChannelMaxRetries",2,d),this.wa=li("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Bd(d&&d.concurrentRequestLimit),this.Da=new Hd,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nh.prototype,t.la=8,t.G=1,t.connect=function(d,g,A,M){rr(0),this.W=d,this.H=g||{},A&&M!==void 0&&(this.H.OSID=A,this.H.OAID=M),this.F=this.X,this.I=uh(this,null,this.W),La(this)};function Ac(d){if(sh(d),d.G==3){var g=d.U++,A=Qr(d.I);if(ot(A,"SID",d.K),ot(A,"RID",g),ot(A,"TYPE","terminate"),Mo(d,A),g=new In(d,d.j,g),g.L=2,g.v=ja(Qr(A)),A=!1,l.navigator&&l.navigator.sendBeacon)try{A=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!A&&l.Image&&(new Image().src=g.v,A=!0),A||(g.g=dh(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Na(g)}ci(d)}function jo(d){d.g&&(Nc(d),d.g.cancel(),d.g=null)}function sh(d){jo(d),d.u&&(l.clearTimeout(d.u),d.u=null),Fa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function La(d){if(!Io(d.h)&&!d.s){d.s=!0;var g=d.Ga;ie||se(),q||(ie(),q=!0),W.add(g,d),d.B=0}}function dg(d,g){return Ec(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Es(m(d.Ga,d,g),Va(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const $=new In(this,this.j,d);let K=this.o;if(this.S&&(K?(K=S(K),j(K,this.S)):K=this.S),this.m!==null||this.O||($.H=K,K=null),this.P)e:{for(var g=0,A=0;A<this.i.length;A++){t:{var M=this.i[A];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(g+=M,4096<g){g=A;break e}if(g===4096||A===this.i.length-1){g=A+1;break e}}g=1e3}else g=1e3;g=oh(this,$,g),A=Qr(this.I),ot(A,"RID",d),ot(A,"CVER",22),this.D&&ot(A,"X-HTTP-Session-Id",this.D),Mo(this,A),K&&(this.O?g="headers="+encodeURIComponent(String(Xd(K)))+"&"+g:this.m&&Tc(A,this.m,K)),Ra(this.h,$),this.Ua&&ot(A,"TYPE","init"),this.P?(ot(A,"$req",g),ot(A,"SID","null"),$.T=!0,xc($,A,null)):xc($,A,g),this.G=2}}else this.G==3&&(d?ih(this,d):this.i.length==0||Io(this.h)||ih(this))};function ih(d,g){var A;g?A=g.l:A=d.U++;const M=Qr(d.I);ot(M,"SID",d.K),ot(M,"RID",A),ot(M,"AID",d.T),Mo(d,M),d.m&&d.o&&Tc(M,d.m,d.o),A=new In(d,d.j,A,d.B+1),d.m===null&&(A.H=d.o),g&&(d.i=g.D.concat(d.i)),g=oh(d,A,1e3),A.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ra(d.h,A),xc(A,M,g)}function Mo(d,g){d.H&&F(d.H,function(A,M){ot(g,M,A)}),d.l&&qd({},function(A,M){ot(g,M,A)})}function oh(d,g,A){A=Math.min(d.i.length,A);var M=d.l?m(d.l.Na,d.l,d):null;e:{var $=d.i;let K=-1;for(;;){const X=["count="+A];K==-1?0<A?(K=$[0].g,X.push("ofs="+K)):K=0:X.push("ofs="+K);let nt=!0;for(let $t=0;$t<A;$t++){let Qe=$[$t].g;const Kt=$[$t].map;if(Qe-=K,0>Qe)K=Math.max(0,$[$t].g-100),nt=!1;else try{Kd(Kt,X,"req"+Qe+"_")}catch{M&&M(Kt)}}if(nt){M=X.join("&");break e}}}return d=d.i.splice(0,A),g.D=d,M}function ah(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;ie||se(),q||(ie(),q=!0),W.add(g,d),d.v=0}}function Sc(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Es(m(d.Fa,d),Va(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,lh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Es(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rr(10),jo(this),lh(this))};function Nc(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function lh(d){d.g=new In(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Qr(d.qa);ot(g,"RID","rpc"),ot(g,"SID",d.K),ot(g,"AID",d.T),ot(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&ot(g,"TO",d.ja),ot(g,"TYPE","xmlhttp"),Mo(d,g),d.m&&d.o&&Tc(g,d.m,d.o),d.L&&(d.g.I=d.L);var A=d.g;d=d.ia,A.L=1,A.v=ja(Qr(g)),A.m=null,A.P=!0,Sa(A,d)}t.Za=function(){this.C!=null&&(this.C=null,jo(this),Sc(this),rr(19))};function Fa(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function ch(d,g){var A=null;if(d.g==g){Fa(d),Nc(d),d.g=null;var M=2}else if(Ia(d.h,g))A=g.D,Fe(d.h,g),M=1;else return;if(d.G!=0){if(g.o)if(M==1){A=g.m?g.m.length:0,g=Date.now()-g.F;var $=d.B;M=We(),vt(M,new Dd(M,A)),La(d)}else ah(d);else if($=g.s,$==3||$==0&&0<g.X||!(M==1&&dg(d,g)||M==2&&Sc(d)))switch(A&&0<A.length&&(g=d.h,g.i=g.i.concat(A)),$){case 1:Is(d,5);break;case 4:Is(d,10);break;case 3:Is(d,6);break;default:Is(d,2)}}}function Va(d,g){let A=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(A*=2),A*g}function Is(d,g){if(d.j.info("Error code "+g),g==2){var A=m(d.fb,d),M=d.Xa;const $=!M;M=new Ss(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ka(M,"https"),ja(M),$?og(M.toString(),A):ag(M.toString(),A)}else rr(2);d.G=0,d.l&&d.l.sa(g),ci(d),sh(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),rr(2)):(this.j.info("Failed to ping google.com"),rr(1))};function ci(d){if(d.G=0,d.ka=[],d.l){const g=Ud(d.h);(g.length!=0||d.i.length!=0)&&(w(d.ka,g),w(d.ka,d.i),d.h.i.length=0,p(d.i),d.i.length=0),d.l.ra()}}function uh(d,g,A){var M=A instanceof Ss?Qr(A):new Ss(A);if(M.g!="")g&&(M.g=g+"."+M.g),ii(M,M.s);else{var $=l.location;M=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var K=new Ss(null);M&&ka(K,M),g&&(K.g=g),$&&ii(K,$),A&&(K.l=A),M=K}return A=d.D,g=d.ya,A&&g&&ot(M,A,g),ot(M,"VER",d.la),Mo(d,M),M}function dh(d,g,A){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new xt(new Po({eb:A})):new xt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hh(){}t=hh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ba(){}Ba.prototype.g=function(d,g){return new Ir(d,g)};function Ir(d,g){Nt.call(this),this.g=new nh(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!b(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new ui(this)}x(Ir,Nt),Ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ir.prototype.close=function(){Ac(this.g)},Ir.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var A={};A.__data__=d,d=A}else this.u&&(A={},A.__data__=Tr(d),d=A);g.i.push(new tg(g.Ya++,d)),g.G==3&&La(g)},Ir.prototype.N=function(){this.g.l=null,delete this.j,Ac(this.g),delete this.g,Ir.aa.N.call(this)};function fh(d){dr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const A in g){d=A;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}x(fh,dr);function mh(){Nn.call(this),this.status=1}x(mh,Nn);function ui(d){this.g=d}x(ui,hh),ui.prototype.ua=function(){vt(this.g,"a")},ui.prototype.ta=function(d){vt(this.g,new fh(d))},ui.prototype.sa=function(d){vt(this.g,new mh)},ui.prototype.ra=function(){vt(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,Ir.prototype.send=Ir.prototype.o,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,DS=function(){return new Ba},MS=function(){return We()},jS=dt,Ey={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,pf=Ts,Ta.COMPLETE="complete",kS=Ta,Je.EventType=Ht,Ht.OPEN="a",Ht.CLOSE="b",Ht.ERROR="c",Ht.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Qc=Je,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,PS=xt}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});const G1="@firebase/firestore",$1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new Rx("@firebase/firestore");function Wa(){return aa.logLevel}function pe(t,...e){if(aa.logLevel<=$e.DEBUG){const r=e.map(Mx);aa.debug(`Firestore (${nc}): ${t}`,...r)}}function Qs(t,...e){if(aa.logLevel<=$e.ERROR){const r=e.map(Mx);aa.error(`Firestore (${nc}): ${t}`,...r)}}function Zi(t,...e){if(aa.logLevel<=$e.WARN){const r=e.map(Mx);aa.warn(`Firestore (${nc}): ${t}`,...r)}}function Mx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,OS(t,n,r)}function OS(t,e,r){let n=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Qs(n),new Error(n)}function tt(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||OS(e,s,n)}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ei{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(vr.UNAUTHENTICATED))}shutdown(){}}class PL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class kL{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){tt(this.o===void 0,42304);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let i=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bs)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(tt(typeof n.accessToken=="string",31837,{l:n}),new LS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new vr(e)}}class jL{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ML{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new jL(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class z1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DL{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){tt(this.o===void 0,3512);const n=i=>{i.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new z1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(tt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new z1(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=OL(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function Oe(t,e){return t<e?-1:t>e?1:0}function Cy(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),s=e.codePointAt(r);if(n!==s){if(n<128&&s<128)return Oe(n,s);{const i=FS(),o=LL(i.encode(W1(t,r)),i.encode(W1(e,r)));return o!==0?o:Oe(n,s)}}r+=n>65535?2:1}return Oe(t.length,e.length)}function W1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function LL(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return Oe(t[r],e[r]);return Oe(t.length,e.length)}function Gl(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="__name__";class Zn{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ie(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Ie(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Zn.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Zn?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=Zn.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return Oe(e.length,r.length)}static compareSegments(e,r){const n=Zn.isNumericId(e),s=Zn.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?Zn.extractNumericId(e).compare(Zn.extractNumericId(r)):Cy(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yi.fromString(e.substring(4,e.length-2))}}class ct extends Zn{construct(e,r,n){return new ct(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new ct(r)}static emptyPath(){return new ct([])}}const FL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends Zn{construct(e,r,n){return new ir(e,r,n)}static isValidIdentifier(e){return FL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Q1}static keyField(){return new ir([Q1])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(i(),s++)}if(i(),o)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(r)}static emptyPath(){return new ir([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ct.fromString(e))}static fromName(e){return new Ee(ct.fromString(e).popFirst(5))}static empty(){return new Ee(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ct.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e,r){if(!r)throw new fe(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VL(t,e,r,n){if(e===!0&&n===!0)throw new fe(Z.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Y1(t){if(!Ee.isDocumentKey(t))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function H1(t){if(Ee.isDocumentKey(t))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function BS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ip(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ip(t);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t,e){const r={typeString:t};return e&&(r.value=e),r}function vd(t,e){if(!BS(t))throw new fe(Z.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(s&&typeof o!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new fe(Z.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=-62135596800,J1=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*J1);return new Be(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<K1)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J1}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vd(e,Be._jsonSchema))return new Be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-K1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:qt("string",Be._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Be(0,0))}static max(){return new Re(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=-1;function BL(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(n===1e9?new Be(r+1,0):new Be(r,n));return new eo(s,Ee.empty(),e)}function UL(t){return new eo(t.readTime,t.key,Uu)}class eo{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new eo(Re.min(),Ee.empty(),Uu)}static max(){return new eo(Re.max(),Ee.empty(),Uu)}}function qL(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ee.comparator(t.documentKey,e.documentKey),r!==0?r:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $L{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==GL)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ee((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ee?r:ee.resolve(r)}catch(r){return ee.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ee.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ee.reject(r)}static resolve(e){return new ee((r,n)=>{r(e)})}static reject(e){return new ee((r,n)=>{n(e)})}static waitFor(e){return new ee((r,n)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&r()},c=>n(c))}),o=!0,i===s&&r()})}static or(e){let r=ee.resolve(!1);for(const n of e)r=r.next(s=>s?ee.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new ee((n,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;r(e[u]).next(h=>{o[u]=h,++l,l===i&&n(o)},h=>s(h))}})}static doWhile(e,r){return new ee((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function zL(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ic(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this._e(n),this.ae=n=>r.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}op.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=-1;function ap(t){return t==null}function cm(t){return t===0&&1/t==-1/0}function WL(t){return typeof t=="number"&&Number.isInteger(t)&&!cm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="";function QL(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=X1(e)),e=YL(t.get(r),e);return X1(e)}function YL(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case US:r+="";break;default:r+=i}}return r}function X1(t){return t+US+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function po(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function qS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,r){this.comparator=e,this.root=r||sr.EMPTY}insert(e,r){return new St(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sr{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??sr.RED,this.left=s??sr.EMPTY,this.right=i??sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new sr(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return sr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new sr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new eE(this.data.getIterator())}getIteratorFrom(e){return new eE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Yt(this.comparator);return r.data=e,r}}class eE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new rn([])}unionWith(e){let r=new Yt(ir.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new rn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Gl(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new GS("Invalid base64 string: "+i):i}}(e);return new cr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new cr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const HL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(t){if(tt(!!t,39018),typeof t=="string"){let e=0;const r=HL.exec(t);if(tt(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:jt(t.seconds),nanos:jt(t.nanos)}}function jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ro(t){return typeof t=="string"?cr.fromBase64String(t):cr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="server_timestamp",zS="__type__",WS="__previous_value__",QS="__local_write_time__";function Lx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zS])===null||r===void 0?void 0:r.stringValue)===$S}function lp(t){const e=t.mapValue.fields[WS];return Lx(e)?lp(e):e}function qu(t){const e=to(t.mapValue.fields[QS].timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,r,n,s,i,o,l,c,u,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const um="(default)";class Gu{constructor(e,r){this.projectId=e,this.database=r||um}static empty(){return new Gu("","")}get isDefaultDatabase(){return this.database===um}isEqual(e){return e instanceof Gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="__type__",HS="__max__",Uh={mapValue:{fields:{__type__:{stringValue:HS}}}},KS="__vector__",dm="value";function no(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lx(t)?4:XL(t)?9007199254740991:JL(t)?10:11:Ie(28295,{value:t})}function ps(t,e){if(t===e)return!0;const r=no(t);if(r!==no(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qu(t).isEqual(qu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=to(s.timestampValue),l=to(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ro(s.bytesValue).isEqual(ro(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return jt(s.geoPointValue.latitude)===jt(i.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return jt(s.integerValue)===jt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=jt(s.doubleValue),l=jt(i.doubleValue);return o===l?cm(o)===cm(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Gl(t.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Z1(o)!==Z1(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ps(o[c],l[c])))return!1;return!0}(t,e);default:return Ie(52216,{left:t})}}function $u(t,e){return(t.values||[]).find(r=>ps(r,e))!==void 0}function $l(t,e){if(t===e)return 0;const r=no(t),n=no(e);if(r!==n)return Oe(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=jt(i.integerValue||i.doubleValue),c=jt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return tE(t.timestampValue,e.timestampValue);case 4:return tE(qu(t),qu(e));case 5:return Cy(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ro(i),c=ro(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Oe(l[u],c[u]);if(h!==0)return h}return Oe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Oe(jt(i.latitude),jt(o.latitude));return l!==0?l:Oe(jt(i.longitude),jt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rE(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,h;const f=i.fields||{},m=o.fields||{},v=(l=f[dm])===null||l===void 0?void 0:l.arrayValue,x=(c=m[dm])===null||c===void 0?void 0:c.arrayValue,p=Oe(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return p!==0?p:rE(v,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Uh.mapValue&&o===Uh.mapValue)return 0;if(i===Uh.mapValue)return 1;if(o===Uh.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Cy(c[f],h[f]);if(m!==0)return m;const v=$l(l[c[f]],u[h[f]]);if(v!==0)return v}return Oe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Ie(23264,{le:r})}}function tE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const r=to(t),n=to(e),s=Oe(r.seconds,n.seconds);return s!==0?s:Oe(r.nanos,n.nanos)}function rE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=$l(r[s],n[s]);if(i)return i}return Oe(r.length,n.length)}function zl(t){return _y(t)}function _y(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=to(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ro(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ee.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=_y(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${_y(r.fields[o])}`;return s+"}"}(t.mapValue):Ie(61005,{value:t})}function gf(t){switch(no(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lp(t);return e?16+gf(e):16;case 5:return 2*t.stringValue.length;case 6:return ro(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+gf(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return po(n.fields,(i,o)=>{s+=i.length+gf(o)}),s}(t.mapValue);default:throw Ie(13486,{value:t})}}function nE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ty(t){return!!t&&"integerValue"in t}function Fx(t){return!!t&&"arrayValue"in t}function sE(t){return!!t&&"nullValue"in t}function iE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yf(t){return!!t&&"mapValue"in t}function JL(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[YS])===null||r===void 0?void 0:r.stringValue)===KS}function hu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return po(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=hu(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=hu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function XL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!yf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(r)}setAll(e){let r=ir.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=hu(o):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());yf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];yf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){po(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Ur(hu(this.value))}}function JS(t){const e=[];return po(t.fields,(r,n)=>{const s=new ir([r]);if(yf(n)){const i=JS(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,r,n,s,i,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wr(e,0,Re.min(),Re.min(),Re.min(),Ur.empty(),0)}static newFoundDocument(e,r,n,s){return new wr(e,1,r,Re.min(),n,s,0)}static newNoDocument(e,r){return new wr(e,2,r,Re.min(),Re.min(),Ur.empty(),0)}static newUnknownDocument(e,r){return new wr(e,3,r,Re.min(),Re.min(),Ur.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,r){this.position=e,this.inclusive=r}}function oE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=Ee.comparator(Ee.fromName(o.referenceValue),r.key):n=$l(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function aE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ps(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,r="asc"){this.field=e,this.dir=r}}function ZL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{}class Ut extends XS{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new t5(e,r,n):r==="array-contains"?new s5(e,n):r==="in"?new i5(e,n):r==="not-in"?new o5(e,n):r==="array-contains-any"?new a5(e,n):new Ut(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new r5(e,n):new n5(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison($l(r,this.value)):r!==null&&no(this.value)===no(r)&&this.matchesComparison($l(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends XS{constructor(e,r){super(),this.filters=e,this.op=r,this.he=null}static create(e,r){return new $n(e,r)}matches(e){return ZS(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ZS(t){return t.op==="and"}function eN(t){return e5(t)&&ZS(t)}function e5(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function Ay(t){if(t instanceof Ut)return t.field.canonicalString()+t.op.toString()+zl(t.value);if(eN(t))return t.filters.map(e=>Ay(e)).join(",");{const e=t.filters.map(r=>Ay(r)).join(",");return`${t.op}(${e})`}}function tN(t,e){return t instanceof Ut?function(n,s){return s instanceof Ut&&n.op===s.op&&n.field.isEqual(s.field)&&ps(n.value,s.value)}(t,e):t instanceof $n?function(n,s){return s instanceof $n&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,l)=>i&&tN(o,s.filters[l]),!0):!1}(t,e):void Ie(19439)}function rN(t){return t instanceof Ut?function(r){return`${r.field.canonicalString()} ${r.op} ${zl(r.value)}`}(t):t instanceof $n?function(r){return r.op.toString()+" {"+r.getFilters().map(rN).join(" ,")+"}"}(t):"Filter"}class t5 extends Ut{constructor(e,r,n){super(e,r,n),this.key=Ee.fromName(n.referenceValue)}matches(e){const r=Ee.comparator(e.key,this.key);return this.matchesComparison(r)}}class r5 extends Ut{constructor(e,r){super(e,"in",r),this.keys=nN("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class n5 extends Ut{constructor(e,r){super(e,"not-in",r),this.keys=nN("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function nN(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ee.fromName(n.referenceValue))}class s5 extends Ut{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Fx(r)&&$u(r.arrayValue,this.value)}}class i5 extends Ut{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&$u(this.value.arrayValue,r)}}class o5 extends Ut{constructor(e,r){super(e,"not-in",r)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!$u(this.value.arrayValue,r)}}class a5 extends Ut{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Fx(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>$u(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,r=null,n=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function lE(t,e=null,r=[],n=[],s=null,i=null,o=null){return new l5(t,e,r,n,s,i,o)}function Vx(t){const e=Pe(t);if(e.Pe===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Ay(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),ap(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>zl(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>zl(n)).join(",")),e.Pe=r}return e.Pe}function Bx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!ZL(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!tN(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aE(t.startAt,e.startAt)&&aE(t.endAt,e.endAt)}function Sy(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,r=null,n=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function c5(t,e,r,n,s,i,o,l){return new oc(t,e,r,n,s,i,o,l)}function cp(t){return new oc(t)}function cE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sN(t){return t.collectionGroup!==null}function fu(t){const e=Pe(t);if(e.Te===null){e.Te=[];const r=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Yt(ir.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Te.push(new zu(i,n))}),r.has(ir.keyField().canonicalString())||e.Te.push(new zu(ir.keyField(),n))}return e.Te}function cs(t){const e=Pe(t);return e.Ie||(e.Ie=u5(e,fu(t))),e.Ie}function u5(t,e){if(t.limitType==="F")return lE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new zu(s.field,i)});const r=t.endAt?new hm(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new hm(t.startAt.position,t.startAt.inclusive):null;return lE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Ny(t,e){const r=t.filters.concat([e]);return new oc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Iy(t,e,r){return new oc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function up(t,e){return Bx(cs(t),cs(e))&&t.limitType===e.limitType}function iN(t){return`${Vx(cs(t))}|lt:${t.limitType}`}function Qa(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>rN(s)).join(", ")}]`),ap(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>zl(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>zl(s)).join(",")),`Target(${n})`}(cs(t))}; limitType=${t.limitType})`}function dp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ee.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of fu(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,c){const u=oE(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,fu(n),s)||n.endAt&&!function(o,l,c){const u=oE(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,fu(n),s))}(t,e)}function d5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oN(t){return(e,r)=>{let n=!1;for(const s of fu(t)){const i=h5(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function h5(t,e,r){const n=t.field.isKeyField()?Ee.comparator(e.key,r.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?$l(c,u):Ie(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){po(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return qS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=new St(Ee.comparator);function Ys(){return f5}const aN=new St(Ee.comparator);function Yc(...t){let e=aN;for(const r of t)e=e.insert(r.key,r);return e}function lN(t){let e=aN;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Uo(){return mu()}function cN(){return mu()}function mu(){return new xa(t=>t.toString(),(t,e)=>t.isEqual(e))}const m5=new St(Ee.comparator),p5=new Yt(Ee.comparator);function ze(...t){let e=p5;for(const r of t)e=e.add(r);return e}const g5=new Yt(Oe);function y5(){return g5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cm(e)?"-0":e}}function uN(t){return{integerValue:""+t}}function dN(t,e){return WL(e)?uN(e):Ux(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this._=void 0}}function v5(t,e,r){return t instanceof fm?function(s,i){const o={fields:{[zS]:{stringValue:$S},[QS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lx(i)&&(i=lp(i)),i&&(o.fields[WS]=i),{mapValue:o}}(r,e):t instanceof Wu?fN(t,e):t instanceof Qu?mN(t,e):function(s,i){const o=hN(s,i),l=uE(o)+uE(s.Ee);return Ty(o)&&Ty(s.Ee)?uN(l):Ux(s.serializer,l)}(t,e)}function x5(t,e,r){return t instanceof Wu?fN(t,e):t instanceof Qu?mN(t,e):r}function hN(t,e){return t instanceof Yu?function(n){return Ty(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class fm extends hp{}class Wu extends hp{constructor(e){super(),this.elements=e}}function fN(t,e){const r=pN(e);for(const n of t.elements)r.some(s=>ps(s,n))||r.push(n);return{arrayValue:{values:r}}}class Qu extends hp{constructor(e){super(),this.elements=e}}function mN(t,e){let r=pN(e);for(const n of t.elements)r=r.filter(s=>!ps(s,n));return{arrayValue:{values:r}}}class Yu extends hp{constructor(e,r){super(),this.serializer=e,this.Ee=r}}function uE(t){return jt(t.integerValue||t.doubleValue)}function pN(t){return Fx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,r){this.field=e,this.transform=r}}function b5(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Wu&&s instanceof Wu||n instanceof Qu&&s instanceof Qu?Gl(n.elements,s.elements,ps):n instanceof Yu&&s instanceof Yu?ps(n.Ee,s.Ee):n instanceof fm&&s instanceof fm}(t.transform,e.transform)}class E5{constructor(e,r){this.version=e,this.transformResults=r}}class qn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let fp=class{};function gN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qx(t.key,qn.none()):new xd(t.key,t.data,qn.none());{const r=t.data,n=Ur.empty();let s=new Yt(ir.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new go(t.key,n,new rn(s.toArray()),qn.none())}}function C5(t,e,r){t instanceof xd?function(s,i,o){const l=s.value.clone(),c=hE(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof go?function(s,i,o){if(!vf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=hE(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(yN(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function pu(t,e,r,n){return t instanceof xd?function(i,o,l,c){if(!vf(i.precondition,o))return l;const u=i.value.clone(),h=fE(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof go?function(i,o,l,c){if(!vf(i.precondition,o))return l;const u=fE(i.fieldTransforms,c,o),h=o.data;return h.setAll(yN(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,o,l){return vf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function _5(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=hN(n.transform,s||null);i!=null&&(r===null&&(r=Ur.empty()),r.set(n.field,i))}return r||null}function dE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Gl(n,s,(i,o)=>b5(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xd extends fp{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class go extends fp{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yN(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function hE(t,e,r){const n=new Map;tt(t.length===r.length,32656,{Ae:r.length,Re:t.length});for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);n.set(i.field,x5(o,l,r[s]))}return n}function fE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,v5(i,o,e))}return n}class qx extends fp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T5 extends fp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&C5(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=pu(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=pu(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=cN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=r.has(s.key)?null:l;const c=gN(o,l);c!==null&&n.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Re.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ze())}isEqual(e){return this.batchId===e.batchId&&Gl(this.mutations,e.mutations,(r,n)=>dE(r,n))&&Gl(this.baseMutations,e.baseMutations,(r,n)=>dE(r,n))}}class Gx{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){tt(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let s=function(){return m5}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new Gx(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Ye;function I5(t){switch(t){case Z.OK:return Ie(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function vN(t){if(t===void 0)return Qs("GRPC error has no .code"),Z.UNKNOWN;switch(t){case Ft.OK:return Z.OK;case Ft.CANCELLED:return Z.CANCELLED;case Ft.UNKNOWN:return Z.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return Z.INTERNAL;case Ft.UNAVAILABLE:return Z.UNAVAILABLE;case Ft.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ft.NOT_FOUND:return Z.NOT_FOUND;case Ft.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ft.ABORTED:return Z.ABORTED;case Ft.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ft.DATA_LOSS:return Z.DATA_LOSS;default:return Ie(39323,{code:t})}}(Ye=Ft||(Ft={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=new Yi([4294967295,4294967295],0);function mE(t){const e=FS().encode(t),r=new RS;return r.update(e),new Uint8Array(r.digest())}function pE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Yi([r,n],0),new Yi([s,i],0)]}class $x{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Hc(`Invalid padding: ${r}`);if(n<0)throw new Hc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Hc(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Hc(`Invalid padding when bitmap length is 0: ${r}`);this.fe=8*e.length-r,this.ge=Yi.fromNumber(this.fe)}pe(e,r,n){let s=e.add(r.multiply(Yi.fromNumber(n)));return s.compare(R5)===1&&(s=new Yi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const r=mE(e),[n,s]=pE(r);for(let i=0;i<this.hashCount;i++){const o=this.pe(n,s,i);if(!this.ye(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new $x(i,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const r=mE(e),[n,s]=pE(r);for(let i=0;i<this.hashCount;i++){const o=this.pe(n,s,i);this.we(o)}}we(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,wd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new mp(Re.min(),s,new St(Oe),Ys(),ze())}}class wd{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new wd(n,r,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,r,n,s){this.Se=e,this.removedTargetIds=r,this.key=n,this.be=s}}class xN{constructor(e,r){this.targetId=e,this.De=r}}class wN{constructor(e,r,n=cr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class gE{constructor(){this.ve=0,this.Ce=yE(),this.Fe=cr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ze(),r=ze(),n=ze();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Ie(38017,{changeType:i})}}),new wd(this.Fe,this.Me,e,r,n)}ke(){this.xe=!1,this.Ce=yE()}qe(e,r){this.xe=!0,this.Ce=this.Ce.insert(e,r)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class P5{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ys(),this.je=qh(),this.Je=qh(),this.He=new St(Oe)}Ye(e){for(const r of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(r,e.be):this.Xe(r,e.key,e.be);for(const r of e.removedTargetIds)this.Xe(r,e.key,e.be)}et(e){this.forEachTarget(e,r=>{const n=this.tt(r);switch(e.state){case 0:this.nt(r)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(r);break;case 3:this.nt(r)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(r)&&(this.rt(r),n.Be(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Ge.forEach((n,s)=>{this.nt(s)&&r(s)})}it(e){const r=e.targetId,n=e.De.count,s=this.st(r);if(s){const i=s.target;if(Sy(i))if(n===0){const o=new Ee(i.path);this.Xe(r,o,wr.newNoDocument(o,Re.min()))}else tt(n===1,20013,{expectedCount:n});else{const o=this.ot(r);if(o!==n){const l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(r,u)}}}}}_t(e){const r=e.De.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,l;try{o=ro(n).toUint8Array()}catch(c){if(c instanceof GS)return Zi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new $x(o,s,i)}catch(c){return Zi(c instanceof Hc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,r,n){return r.De.count===n-this.ht(e,r.targetId)?0:2}ht(e,r){const n=this.We.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(r,i,null),s++)}),s}Pt(e){const r=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&Sy(l.target)){const c=new Ee(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,wr.newNoDocument(c,e))}i.Ne&&(r.set(o,i.Le()),i.ke())}});let n=ze();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new mp(e,r,this.He,this.ze,n);return this.ze=Ys(),this.je=qh(),this.Je=qh(),this.He=new St(Oe),s}Ze(e,r){if(!this.nt(e))return;const n=this.It(e,r.key)?2:0;this.tt(e).qe(r.key,n),this.ze=this.ze.insert(r.key,r),this.je=this.je.insert(r.key,this.Tt(r.key).add(e)),this.Je=this.Je.insert(r.key,this.dt(r.key).add(e))}Xe(e,r,n){if(!this.nt(e))return;const s=this.tt(e);this.It(e,r)?s.qe(r,1):s.Qe(r),this.Je=this.Je.insert(r,this.dt(r).delete(e)),this.Je=this.Je.insert(r,this.dt(r).add(e)),n&&(this.ze=this.ze.insert(r,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const r=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let r=this.Ge.get(e);return r||(r=new gE,this.Ge.set(e,r)),r}dt(e){let r=this.Je.get(e);return r||(r=new Yt(Oe),this.Je=this.Je.insert(e,r)),r}Tt(e){let r=this.je.get(e);return r||(r=new Yt(Oe),this.je=this.je.insert(e,r)),r}nt(e){const r=this.st(e)!==null;return r||pe("WatchChangeAggregator","Detected inactive target",e),r}st(e){const r=this.Ge.get(e);return r&&r.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new gE),this.We.getRemoteKeysForTarget(e).forEach(r=>{this.Xe(e,r,null)})}It(e,r){return this.We.getRemoteKeysForTarget(e).has(r)}}function qh(){return new St(Ee.comparator)}function yE(){return new St(Ee.comparator)}const k5={asc:"ASCENDING",desc:"DESCENDING"},j5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M5={and:"AND",or:"OR"};class D5{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Ry(t,e){return t.useProto3Json||ap(e)?e:{value:e}}function mm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O5(t,e){return mm(t,e.toTimestamp())}function us(t){return tt(!!t,49232),Re.fromTimestamp(function(r){const n=to(r);return new Be(n.seconds,n.nanos)}(t))}function zx(t,e){return Py(t,e).canonicalString()}function Py(t,e){const r=function(s){return new ct(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function EN(t){const e=ct.fromString(t);return tt(SN(e),10190,{key:e.toString()}),e}function ky(t,e){return zx(t.databaseId,e.path)}function Hg(t,e){const r=EN(e);if(r.get(1)!==t.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ee(_N(r))}function CN(t,e){return zx(t.databaseId,e)}function L5(t){const e=EN(t);return e.length===4?ct.emptyPath():_N(e)}function jy(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _N(t){return tt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function vE(t,e,r){return{name:ky(t,e),fields:r.value.mapValue.fields}}function F5(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ie(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(tt(h===void 0||typeof h=="string",58123),cr.fromBase64String(h||"")):(tt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),cr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?Z.UNKNOWN:vN(u.code);return new fe(h,u.message||"")}(o);r=new wN(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Hg(t,n.document.name),i=us(n.document.updateTime),o=n.document.createTime?us(n.document.createTime):Re.min(),l=new Ur({mapValue:{fields:n.document.fields}}),c=wr.newFoundDocument(s,i,o,l),u=n.targetIds||[],h=n.removedTargetIds||[];r=new xf(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Hg(t,n.document),i=n.readTime?us(n.readTime):Re.min(),o=wr.newNoDocument(s,i),l=n.removedTargetIds||[];r=new xf([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Hg(t,n.document),i=n.removedTargetIds||[];r=new xf([],i,s,null)}else{if(!("filter"in e))return Ie(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new N5(s,i),l=n.targetId;r=new xN(l,o)}}return r}function V5(t,e){let r;if(e instanceof xd)r={update:vE(t,e.key,e.value)};else if(e instanceof qx)r={delete:ky(t,e.key)};else if(e instanceof go)r={update:vE(t,e.key,e.data),updateMask:Y5(e.fieldMask)};else{if(!(e instanceof T5))return Ie(16599,{Rt:e.type});r={verify:ky(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const l=o.transform;if(l instanceof fm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yu)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw Ie(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:O5(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ie(27497)}(t,e.precondition)),r}function B5(t,e){return t&&t.length>0?(tt(e!==void 0,14353),t.map(r=>function(s,i){let o=s.updateTime?us(s.updateTime):us(i);return o.isEqual(Re.min())&&(o=us(i)),new E5(o,s.transformResults||[])}(r,e))):[]}function U5(t,e){return{documents:[CN(t,e.path)]}}function q5(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=CN(t,s);const i=function(u){if(u.length!==0)return AN($n.create(u,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Ya(m.field),direction:z5(m.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Ry(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:r,parent:s}}function G5(t){let e=L5(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){tt(n===1,65062);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];r.where&&(i=function(f){const m=TN(f);return m instanceof $n&&eN(m)?m.getFilters():[m]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(m=>function(x){return new zu(Ha(x.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,ap(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(f){const m=!!f.before,v=f.values||[];return new hm(v,m)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const m=!f.before,v=f.values||[];return new hm(v,m)}(r.endAt)),c5(e,s,o,i,l,"F",c,u)}function $5(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function TN(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ha(r.unaryFilter.field);return Ut.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ha(r.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ha(r.unaryFilter.field);return Ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ha(r.unaryFilter.field);return Ut.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(t):t.fieldFilter!==void 0?function(r){return Ut.create(Ha(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return $n.create(r.compositeFilter.filters.map(n=>TN(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(r.compositeFilter.op))}(t):Ie(30097,{filter:t})}function z5(t){return k5[t]}function W5(t){return j5[t]}function Q5(t){return M5[t]}function Ya(t){return{fieldPath:t.canonicalString()}}function Ha(t){return ir.fromServerFormat(t.fieldPath)}function AN(t){return t instanceof Ut?function(r){if(r.op==="=="){if(iE(r.value))return{unaryFilter:{field:Ya(r.field),op:"IS_NAN"}};if(sE(r.value))return{unaryFilter:{field:Ya(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(iE(r.value))return{unaryFilter:{field:Ya(r.field),op:"IS_NOT_NAN"}};if(sE(r.value))return{unaryFilter:{field:Ya(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(r.field),op:W5(r.op),value:r.value}}}(t):t instanceof $n?function(r){const n=r.getFilters().map(s=>AN(s));return n.length===1?n[0]:{compositeFilter:{op:Q5(r.op),filters:n}}}(t):Ie(54877,{filter:t})}function Y5(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function SN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,r,n,s,i=Re.min(),o=Re.min(),l=cr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.gt=e}}function K5(t){const e=G5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Iy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this.Dn=new X5}addToCollectionParentIndex(e,r){return this.Dn.add(r),ee.resolve()}getCollectionParents(e,r){return ee.resolve(this.Dn.getEntries(r))}addFieldIndex(e,r){return ee.resolve()}deleteFieldIndex(e,r){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,r){return ee.resolve()}getDocumentsMatchingTarget(e,r){return ee.resolve(null)}getIndexType(e,r){return ee.resolve(0)}getFieldIndexes(e,r){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,r){return ee.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,r){return ee.resolve(eo.min())}updateCollectionGroup(e,r,n){return ee.resolve()}updateIndexEntries(e,r){return ee.resolve()}}class X5{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Yt(ct.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Yt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NN=41943040;class Vr{static withCacheSize(e){return new Vr(e,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(NN,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Wl(0)}static ur(){return new Wl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="LruGarbageCollector",Z5=1048576;function bE([t,e],[r,n]){const s=Oe(t,r);return s===0?Oe(e,n):s}class eF{constructor(e){this.Tr=e,this.buffer=new Yt(bE),this.Ir=0}dr(){return++this.Ir}Er(e){const r=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();bE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class tF{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pe(wE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ic(r)?pe(wE,"Ignoring IndexedDB error during garbage collection: ",r):await sc(r)}await this.Rr(3e5)})}}class rF{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.mr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return ee.resolve(op.ue);const n=new eF(r);return this.Vr.forEachTarget(e,s=>n.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>n.Er(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Vr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(xE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xE):this.pr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,r){let n,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),Wa()<=$e.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function nF(t,e){return new rF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.changes=new xa(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ee.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&pu(n.mutation,s,rn.empty(),Be.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ze()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ze()){const s=Uo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=Yc();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Uo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ze()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let i=Ys();const o=mu(),l=function(){return mu()}();return r.forEach((c,u)=>{const h=n.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof go)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),pu(h.mutation,u,h.mutation.getFieldMask(),Be.now())):o.set(u.key,rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),r.forEach((u,h)=>{var f;return l.set(u,new iF(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=mu();let s=new St((o,l)=>o-l),i=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let h=n.get(c)||rn.empty();h=l.applyToLocalView(u,h),n.set(c,h);const f=(s.get(l.batchId)||ze()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=cN();h.forEach(m=>{if(!i.has(m)){const v=gN(r.get(m),n.get(m));v!==null&&f.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ee.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return Ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):sN(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):ee.resolve(Uo());let l=Uu,c=i;return o.next(u=>ee.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?ee.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ze())).next(h=>({batchId:l,changes:lN(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ee(r)).next(n=>{let s=Yc();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=Yc();return this.indexManager.getCollectionParents(e,i).next(l=>ee.forEach(l,c=>{const u=function(f,m){return new oc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,wr.newInvalidDocument(h)))});let l=Yc();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&pu(h.mutation,u,rn.empty(),Be.now()),dp(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,r){return ee.resolve(this.Br.get(r))}saveBundleMetadata(e,r){return this.Br.set(r.id,function(s){return{id:s.id,version:s.version,createTime:us(s.createTime)}}(r)),ee.resolve()}getNamedQuery(e,r){return ee.resolve(this.Lr.get(r))}saveNamedQuery(e,r){return this.Lr.set(r.name,function(s){return{name:s.name,query:K5(s.bundledQuery),readTime:us(s.readTime)}}(r)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.overlays=new St(Ee.comparator),this.kr=new Map}getOverlay(e,r){return ee.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Uo();return ee.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.wt(e,r,i)}),ee.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.kr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(n)),ee.resolve()}getOverlaysForCollection(e,r,n){const s=Uo(),i=r.length+1,o=new Ee(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>n&&s.set(c.getKey(),c)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new St((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let h=i.get(u.largestBatchId);h===null&&(h=Uo(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Uo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return ee.resolve(l)}wt(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(n.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new S5(r,n));let i=this.kr.get(r);i===void 0&&(i=ze(),this.kr.set(r,i)),this.kr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this.sessionToken=cr.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.qr=new Yt(Zt.Qr),this.$r=new Yt(Zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,r){const n=new Zt(e,r);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Wr(new Zt(e,r))}Gr(e,r){e.forEach(n=>this.removeReference(n,r))}zr(e){const r=new Ee(new ct([])),n=new Zt(r,e),s=new Zt(r,e+1),i=[];return this.$r.forEachInRange([n,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const r=new Ee(new ct([])),n=new Zt(r,e),s=new Zt(r,e+1);let i=ze();return this.$r.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new Zt(e,0),n=this.qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Zt{constructor(e,r){this.key=e,this.Hr=r}static Qr(e,r){return Ee.comparator(e.key,r.key)||Oe(e.Hr,r.Hr)}static Ur(e,r){return Oe(e.Hr,r.Hr)||Ee.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.er=1,this.Yr=new Yt(Zt.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new A5(i,r,n,s);this.mutationQueue.push(o);for(const l of s)this.Yr=this.Yr.add(new Zt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ee.resolve(o)}lookupMutationBatch(e,r){return ee.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.Xr(n),i=s<0?0:s;return ee.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Ox:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Zt(r,0),s=new Zt(r,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),ee.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yt(Oe);return r.forEach(s=>{const i=new Zt(s,0),o=new Zt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{n=n.add(l.Hr)})}),ee.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Ee.isDocumentKey(i)||(i=i.child(""));const o=new Zt(new Ee(i),0);let l=new Yt(Oe);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),ee.resolve(this.ei(l))}ei(e){const r=[];return e.forEach(n=>{const s=this.Zr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){tt(this.ti(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return ee.forEach(r.mutations,s=>{const i=new Zt(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,r){const n=new Zt(r,0),s=this.Yr.firstAfterOrEqual(n);return ee.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.ni=e,this.docs=function(){return new St(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.ni(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ee.resolve(n?n.document.mutableCopy():wr.newInvalidDocument(r))}getEntries(e,r){let n=Ys();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():wr.newInvalidDocument(s))}),ee.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Ys();const o=r.path,l=new Ee(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||qL(UL(h),n)<=0||(s.has(h.key)||dp(r,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ee.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Ie(9500)}ri(e,r){return ee.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new hF(this)}getSize(e){return ee.resolve(this.size)}}class hF extends sF{constructor(e){super(),this.Or=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Or.addEntry(e,s)):this.Or.removeEntry(n)}),ee.waitFor(r)}getFromCache(e,r){return this.Or.getEntry(e,r)}getAllFromCache(e,r){return this.Or.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.persistence=e,this.ii=new xa(r=>Vx(r),Bx),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.si=0,this.oi=new Wx,this.targetCount=0,this._i=Wl.ar()}forEachTarget(e,r){return this.ii.forEach((n,s)=>r(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.si&&(this.si=r),ee.resolve()}hr(e){this.ii.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this._i=new Wl(r),this.highestTargetId=r),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,r){return this.hr(r),this.targetCount+=1,ee.resolve()}updateTargetData(e,r){return this.hr(r),ee.resolve()}removeTargetData(e,r){return this.ii.delete(r.target),this.oi.zr(r.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ee.waitFor(i).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,r){const n=this.ii.get(r)||null;return ee.resolve(n)}addMatchingKeys(e,r,n){return this.oi.Kr(r,n),ee.resolve()}removeMatchingKeys(e,r,n){this.oi.Gr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ee.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.oi.zr(r),ee.resolve()}getMatchingKeysForTargetId(e,r){const n=this.oi.Jr(r);return ee.resolve(n)}containsKey(e,r){return ee.resolve(this.oi.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,r){this.ai={},this.overlays={},this.ui=new op(0),this.ci=!1,this.ci=!0,this.li=new cF,this.referenceDelegate=e(this),this.hi=new fF(this),this.indexManager=new J5,this.remoteDocumentCache=function(s){return new dF(s)}(n=>this.referenceDelegate.Pi(n)),this.serializer=new H5(r),this.Ti=new aF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new lF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ai[e.toKey()];return n||(n=new uF(r,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,r,n){pe("MemoryPersistence","Starting transaction:",e);const s=new mF(this.ui.next());return this.referenceDelegate.Ii(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,r){return ee.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,r)))}}class mF extends $L{constructor(e){super(),this.currentSequenceNumber=e}}class Qx{constructor(e){this.persistence=e,this.Ai=new Wx,this.Ri=null}static Vi(e){return new Qx(e)}get mi(){if(this.Ri)return this.Ri;throw Ie(60996)}addReference(e,r,n){return this.Ai.addReference(n,r),this.mi.delete(n.toString()),ee.resolve()}removeReference(e,r,n){return this.Ai.removeReference(n,r),this.mi.add(n.toString()),ee.resolve()}markPotentiallyOrphaned(e,r){return this.mi.add(r.toString()),ee.resolve()}removeTarget(e,r){this.Ai.zr(r.targetId).forEach(s=>this.mi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ii(){this.Ri=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,n=>{const s=Ee.fromPath(n);return this.fi(e,s).next(i=>{i||r.removeEntry(s,Re.min())})}).next(()=>(this.Ri=null,r.apply(e)))}updateLimboDocument(e,r){return this.fi(e,r).next(n=>{n?this.mi.delete(r.toString()):this.mi.add(r.toString())})}Pi(e){return 0}fi(e,r){return ee.or([()=>ee.resolve(this.Ai.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class pm{constructor(e,r){this.persistence=e,this.gi=new xa(n=>QL(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=nF(this,r)}static Vi(e,r){return new pm(e,r)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}mr(e){const r=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}yr(e){let r=0;return this.gr(e,n=>{r++}).next(()=>r)}gr(e,r){return ee.forEach(this.gi,(n,s)=>this.Sr(e,n,s).next(i=>i?ee.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,r).next(l=>{l||(n++,i.removeEntry(o,Re.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),ee.resolve()}removeReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}Pi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=gf(e.data.value)),r}Sr(e,r,n){return ee.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.gi.get(r);return ee.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Is=n,this.ds=s}static Es(e,r){let n=ze(),s=ze();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Yx(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return c3()?8:zL(_r())>0?6:4}()}initialize(e,r){this.gs=e,this.indexManager=r,this.As=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ps(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new pF;return this.ws(e,r,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,r,o,l.size)})}).next(()=>i.result)}Ss(e,r,n,s){return n.documentReadCount<this.Vs?(Wa()<=$e.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Qa(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Wa()<=$e.DEBUG&&pe("QueryEngine","Query:",Qa(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.fs*s?(Wa()<=$e.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Qa(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cs(r))):ee.resolve())}ps(e,r){if(cE(r))return ee.resolve(null);let n=cs(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Iy(r,null,"F"),n=cs(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=ze(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.bs(r,l);return this.Ds(r,u,o,c.readTime)?this.ps(e,Iy(r,null,"F")):this.vs(e,u,r,c)}))})))}ys(e,r,n,s){return cE(r)||s.isEqual(Re.min())?ee.resolve(null):this.gs.getDocuments(e,n).next(i=>{const o=this.bs(r,i);return this.Ds(r,o,n,s)?ee.resolve(null):(Wa()<=$e.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qa(r)),this.vs(e,o,r,BL(s,Uu)).next(l=>l))})}bs(e,r){let n=new Yt(oN(e));return r.forEach((s,i)=>{dp(e,i)&&(n=n.add(i))}),n}Ds(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,r,n){return Wa()<=$e.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Qa(r)),this.gs.getDocumentsMatchingQuery(e,r,eo.min(),n)}vs(e,r,n,s){return this.gs.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="LocalStore",yF=3e8;class vF{constructor(e,r,n,s){this.persistence=e,this.Cs=r,this.serializer=s,this.Fs=new St(Oe),this.Ms=new xa(i=>Vx(i),Bx),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Fs))}}function xF(t,e,r,n){return new vF(t,e,r,n)}async function RN(t,e){const r=Pe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Ns(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],l=[];let c=ze();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:l}))})})}function wF(t,e){const r=Pe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,m=f.keys();let v=ee.resolve();return m.forEach(x=>{v=v.next(()=>h.getEntry(c,x)).next(p=>{const w=u.docVersions.get(x);tt(w!==null,48541),p.version.compareTo(w)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),h.addEntry(p)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=ze();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function PN(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.hi.getLastRemoteSnapshotVersion(r))}function bF(t,e){const r=Pe(t),n=e.snapshotVersion;let s=r.Fs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.Os.newChangeBuffer({trackRemovals:!0});s=r.Fs;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(r.hi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>r.hi.addMatchingKeys(i,h.addedDocuments,f)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(cr.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,n)),s=s.insert(f,v),function(p,w,_){return p.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=yF?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,v,h)&&l.push(r.hi.updateTargetData(i,v))});let c=Ys(),u=ze();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(EF(i,o,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!n.isEqual(Re.min())){const h=r.hi.getLastRemoteSnapshotVersion(i).next(f=>r.hi.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(h)}return ee.waitFor(l).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(r.Fs=s,i))}function EF(t,e,r){let n=ze(),s=ze();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=Ys();return r.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Re.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):pe(Hx,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function CF(t,e){const r=Pe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Ox),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function _F(t,e){const r=Pe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.hi.getTargetData(n,e).next(i=>i?(s=i,ee.resolve(s)):r.hi.allocateTargetId(n).next(o=>(s=new Di(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.hi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Fs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Fs=r.Fs.insert(n.targetId,n),r.Ms.set(e,n.targetId)),n})}async function My(t,e,r){const n=Pe(t),s=n.Fs.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ic(o))throw o;pe(Hx,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(s.target)}function EE(t,e,r){const n=Pe(t);let s=Re.min(),i=ze();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Pe(c),m=f.Ms.get(h);return m!==void 0?ee.resolve(f.Fs.get(m)):f.hi.getTargetData(u,h)}(n,o,cs(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>n.Cs.getDocumentsMatchingQuery(o,e,r?s:Re.min(),r?i:ze())).next(l=>(TF(n,d5(e),l),{documents:l,qs:i})))}function TF(t,e,r){let n=t.xs.get(e)||Re.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.xs.set(e,n)}class CE{constructor(){this.activeTargetIds=y5()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AF{constructor(){this.Fo=new CE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,r,n){this.Mo[e]=r}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new CE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="ConnectivityMonitor";class TE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pe(_E,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pe(_E,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh=null;function Dy(){return Gh===null?Gh=function(){return 268435456+Math.round(2147483648*Math.random())}():Gh++,"0x"+Gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="RestConnection",NF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IF{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=r+"://"+e.host,this.Uo=`projects/${n}/databases/${s}`,this.Ko=this.databaseId.database===um?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(e,r,n,s,i){const o=Dy(),l=this.Go(e,r.toUriEncodedString());pe(Kg,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:u}=new URL(l),h=tc(u);return this.jo(e,l,c,n,h).then(f=>(pe(Kg,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Zi(Kg,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}Jo(e,r,n,s,i,o){return this.Wo(e,r,n,s,i)}zo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}Go(e,r){const n=NF[e];return`${this.$o}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="WebChannelConnection";class PF extends IF{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,r,n,s,i){const o=Dy();return new Promise((l,c)=>{const u=new PS;u.setWithCredentials(!0),u.listenOnce(kS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case pf.NO_ERROR:const f=u.getResponseJson();pe(gr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case pf.TIMEOUT:pe(gr,`RPC '${e}' ${o} timed out`),c(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case pf.HTTP_ERROR:const m=u.getStatus();if(pe(gr,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const x=v==null?void 0:v.error;if(x&&x.status&&x.message){const p=function(_){const b=_.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(b)>=0?b:Z.UNKNOWN}(x.status);c(new fe(p,x.message))}else c(new fe(Z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{pe(gr,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);pe(gr,`RPC '${e}' ${o} sending request:`,s),u.send(r,"POST",h,n,15)})}P_(e,r,n){const s=Dy(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DS(),l=MS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const h=i.join("");pe(gr,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.T_(f);let m=!1,v=!1;const x=new RF({Ho:w=>{v?pe(gr,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(m||(pe(gr,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),pe(gr,`RPC '${e}' stream ${s} sending:`,w),f.send(w))},Yo:()=>f.close()}),p=(w,_,b)=>{w.listen(_,C=>{try{b(C)}catch(R){setTimeout(()=>{throw R},0)}})};return p(f,Qc.EventType.OPEN,()=>{v||(pe(gr,`RPC '${e}' stream ${s} transport opened.`),x.s_())}),p(f,Qc.EventType.CLOSE,()=>{v||(v=!0,pe(gr,`RPC '${e}' stream ${s} transport closed`),x.__(),this.I_(f))}),p(f,Qc.EventType.ERROR,w=>{v||(v=!0,Zi(gr,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),x.__(new fe(Z.UNAVAILABLE,"The operation could not be completed")))}),p(f,Qc.EventType.MESSAGE,w=>{var _;if(!v){const b=w.data[0];tt(!!b,16349);const C=b,R=(C==null?void 0:C.error)||((_=C[0])===null||_===void 0?void 0:_.error);if(R){pe(gr,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let F=function(N){const j=Ft[N];if(j!==void 0)return vN(j)}(L),I=R.message;F===void 0&&(F=Z.INTERNAL,I="Unknown error status: "+L+" with message "+R.message),v=!0,x.__(new fe(F,I)),f.close()}else pe(gr,`RPC '${e}' stream ${s} received:`,b),x.a_(b)}}),p(l,jS.STAT_EVENT,w=>{w.stat===Ey.PROXY?pe(gr,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===Ey.NOPROXY&&pe(gr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(r=>r===e)}}function Jg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){return new D5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=r,this.d_=n,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const r=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),s=Math.max(0,r-n);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="PersistentStream";class jN{constructor(e,r,n,s,i,o,l,c){this.Fi=e,this.w_=n,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new kN(e,r)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():r&&r.code===Z.RESOURCE_EXHAUSTED?(Qs(r.toString()),Qs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):r&&r.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(r)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),r=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.b_===r&&this.W_(n,s)},n=>{e(()=>{const s=new fe(Z.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(s)})})}W_(e,r){const n=this.K_(this.b_);this.stream=this.z_(e,r),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{n(()=>this.G_(s))}),this.stream.onMessage(s=>{n(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return pe(AE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return r=>{this.Fi.enqueueAndForget(()=>this.b_===e?r():(pe(AE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kF extends jN{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}z_(e,r){return this.connection.P_("Listen",e,r)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const r=F5(this.serializer,e),n=function(i){if(!("targetChange"in i))return Re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?us(o.readTime):Re.min()}(e);return this.listener.J_(r,n)}H_(e){const r={};r.database=jy(this.serializer),r.addTarget=function(i,o){let l;const c=o.target;if(l=Sy(c)?{documents:U5(i,c)}:{query:q5(i,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=bN(i,o.resumeToken);const u=Ry(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Re.min())>0){l.readTime=mm(i,o.snapshotVersion.toTimestamp());const u=Ry(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=$5(this.serializer,e);n&&(r.labels=n),this.k_(r)}Y_(e){const r={};r.database=jy(this.serializer),r.removeTarget=e,this.k_(r)}}class jF extends jN{constructor(e,r,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,r){return this.connection.P_("Write",e,r)}j_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const r=B5(e.writeResults,e.commitTime),n=us(e.commitTime);return this.listener.ta(n,r)}na(){const e={};e.database=jy(this.serializer),this.k_(e)}X_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>V5(this.serializer,n))};this.k_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{}class DF extends MF{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,n,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Py(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new fe(Z.UNKNOWN,i.toString())})}Jo(e,r,n,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,Py(r,n),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(Z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class OF{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Qs(r),this._a=!1):pe("OnlineStateTracker",r)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RemoteStore";class LF{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{n.enqueueAndForget(async()=>{wa(this)&&(pe(la,"Restarting streams for network reachability change."),await async function(c){const u=Pe(c);u.Ia.add(4),await bd(u),u.Aa.set("Unknown"),u.Ia.delete(4),await gp(u)}(this))})}),this.Aa=new OF(n,s)}}async function gp(t){if(wa(t))for(const e of t.da)await e(!0)}async function bd(t){for(const e of t.da)await e(!1)}function MN(t,e){const r=Pe(t);r.Ta.has(e.targetId)||(r.Ta.set(e.targetId,e),Zx(r)?Xx(r):ac(r).x_()&&Jx(r,e))}function Kx(t,e){const r=Pe(t),n=ac(r);r.Ta.delete(e),n.x_()&&DN(r,e),r.Ta.size===0&&(n.x_()?n.B_():wa(r)&&r.Aa.set("Unknown"))}function Jx(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ac(t).H_(e)}function DN(t,e){t.Ra.$e(e),ac(t).Y_(e)}function Xx(t){t.Ra=new P5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ac(t).start(),t.Aa.aa()}function Zx(t){return wa(t)&&!ac(t).M_()&&t.Ta.size>0}function wa(t){return Pe(t).Ia.size===0}function ON(t){t.Ra=void 0}async function FF(t){t.Aa.set("Online")}async function VF(t){t.Ta.forEach((e,r)=>{Jx(t,e)})}async function BF(t,e){ON(t),Zx(t)?(t.Aa.la(e),Xx(t)):t.Aa.set("Unknown")}async function UF(t,e,r){if(t.Aa.set("Online"),e instanceof wN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(n){pe(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await gm(t,n)}else if(e instanceof xf?t.Ra.Ye(e):e instanceof xN?t.Ra.it(e):t.Ra.et(e),!r.isEqual(Re.min()))try{const n=await PN(t.localStore);r.compareTo(n)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ta.get(u);h&&i.Ta.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ta.get(c);if(!h)return;i.Ta.set(c,h.withResumeToken(cr.EMPTY_BYTE_STRING,h.snapshotVersion)),DN(i,c);const f=new Di(h.target,c,u,h.sequenceNumber);Jx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){pe(la,"Failed to raise snapshot:",n),await gm(t,n)}}async function gm(t,e,r){if(!ic(e))throw e;t.Ia.add(1),await bd(t),t.Aa.set("Offline"),r||(r=()=>PN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe(la,"Retrying IndexedDB access"),await r(),t.Ia.delete(1),await gp(t)})}function LN(t,e){return e().catch(r=>gm(t,r,e))}async function yp(t){const e=Pe(t),r=so(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ox;for(;qF(e);)try{const s=await CF(e.localStore,n);if(s===null){e.Pa.length===0&&r.B_();break}n=s.batchId,GF(e,s)}catch(s){await gm(e,s)}FN(e)&&VN(e)}function qF(t){return wa(t)&&t.Pa.length<10}function GF(t,e){t.Pa.push(e);const r=so(t);r.x_()&&r.Z_&&r.X_(e.mutations)}function FN(t){return wa(t)&&!so(t).M_()&&t.Pa.length>0}function VN(t){so(t).start()}async function $F(t){so(t).na()}async function zF(t){const e=so(t);for(const r of t.Pa)e.X_(r.mutations)}async function WF(t,e,r){const n=t.Pa.shift(),s=Gx.from(n,e,r);await LN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await yp(t)}async function QF(t,e){e&&so(t).Z_&&await async function(n,s){if(function(o){return I5(o)&&o!==Z.ABORTED}(s.code)){const i=n.Pa.shift();so(n).N_(),await LN(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await yp(n)}}(t,e),FN(t)&&VN(t)}async function SE(t,e){const r=Pe(t);r.asyncQueue.verifyOperationInProgress(),pe(la,"RemoteStore received new credentials");const n=wa(r);r.Ia.add(3),await bd(r),n&&r.Aa.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ia.delete(3),await gp(r)}async function YF(t,e){const r=Pe(t);e?(r.Ia.delete(2),await gp(r)):e||(r.Ia.add(2),await bd(r),r.Aa.set("Unknown"))}function ac(t){return t.Va||(t.Va=function(r,n,s){const i=Pe(r);return i.ia(),new kF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:FF.bind(null,t),e_:VF.bind(null,t),n_:BF.bind(null,t),J_:UF.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Zx(t)?Xx(t):t.Aa.set("Unknown")):(await t.Va.stop(),ON(t))})),t.Va}function so(t){return t.ma||(t.ma=function(r,n,s){const i=Pe(r);return i.ia(),new jF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:$F.bind(null,t),n_:QF.bind(null,t),ea:zF.bind(null,t),ta:WF.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await yp(t)):(await t.ma.stop(),t.Pa.length>0&&(pe(la,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,l=new ew(e,r,o,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tw(t,e){if(Qs("AsyncQueue",`${e}: ${t}`),ic(t))return new fe(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{static emptySet(e){return new vl(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ee.comparator(r.key,n.key):(r,n)=>Ee.comparator(r.key,n.key),this.keyedMap=Yc(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof vl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new vl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.fa=new St(Ee.comparator)}track(e){const r=e.doc.key,n=this.fa.get(r);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(r,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(r):e.type===1&&n.type===2?this.fa=this.fa.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):Ie(63341,{At:e,ga:n}):this.fa=this.fa.insert(r,e)}pa(){const e=[];return this.fa.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ql{constructor(e,r,n,s,i,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Ql(e,r,vl.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class KF{constructor(){this.queries=IE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(r,n){const s=Pe(r),i=s.queries;s.queries=IE(),i.forEach((o,l)=>{for(const c of l.wa)c.onError(n)})})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function IE(){return new xa(t=>iN(t),up)}async function rw(t,e){const r=Pe(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.Sa()&&e.ba()&&(n=2):(i=new HF,n=e.ba()?0:1);try{switch(n){case 0:i.ya=await r.onListen(s,!0);break;case 1:i.ya=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=tw(o,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.wa.push(e),e.va(r.onlineState),i.ya&&e.Ca(i.ya)&&sw(r)}async function nw(t,e){const r=Pe(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function JF(t,e){const r=Pe(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const l of o.wa)l.Ca(s)&&(n=!0);o.ya=s}}n&&sw(r)}function XF(t,e,r){const n=Pe(t),s=n.queries.get(e);if(s)for(const i of s.wa)i.onError(r);n.queries.delete(e)}function sw(t){t.Da.forEach(e=>{e.next()})}var Oy,RE;(RE=Oy||(Oy={})).Fa="default",RE.Cache="cache";class iw{constructor(e,r,n){this.query=e,this.Ma=r,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ql(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),r=!0):this.Ba(e,this.onlineState)&&(this.La(e),r=!0),this.Oa=e,r}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let r=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),r=!0),r}Ba(e,r){if(!e.fromCache||!this.ba())return!0;const n=r!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const r=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}La(e){e=Ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Oy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.key=e}}class UN{constructor(e){this.key=e}}class ZF{constructor(e,r){this.query=e,this.Ha=r,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ze(),this.mutatedKeys=ze(),this.Xa=oN(e),this.eu=new vl(this.Xa)}get tu(){return this.Ha}nu(e,r){const n=r?r.ru:new NE,s=r?r.eu:this.eu;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),v=dp(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),p=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;m&&v?m.data.isEqual(v.data)?x!==p&&(n.track({type:3,doc:v}),w=!0):this.iu(m,v)||(n.track({type:2,doc:v}),w=!0,(c&&this.Xa(v,c)>0||u&&this.Xa(v,u)<0)&&(l=!0)):!m&&v?(n.track({type:0,doc:v}),w=!0):m&&!v&&(n.track({type:1,doc:m}),w=!0,(c||u)&&(l=!0)),w&&(v?(o=o.add(v),i=p?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),n.track({type:1,doc:h})}return{eu:o,ru:n,Ds:l,mutatedKeys:i}}iu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,f)=>function(v,x){const p=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{At:w})}};return p(v)-p(x)}(h.type,f.type)||this.Xa(h.doc,f.doc)),this.su(n),s=s!=null&&s;const l=r&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new Ql(this.query,e.eu,i,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new NE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(r=>this.Ha=this.Ha.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ha=this.Ha.delete(r)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ze(),this.eu.forEach(n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))});const r=[];return e.forEach(n=>{this.Za.has(n)||r.push(new UN(n))}),this.Za.forEach(n=>{e.has(n)||r.push(new BN(n))}),r}uu(e){this.Ha=e.qs,this.Za=ze();const r=this.nu(e.documents);return this.applyChanges(r,!0)}cu(){return Ql.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ow="SyncEngine";class eV{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class tV{constructor(e){this.key=e,this.lu=!1}}class rV{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new xa(l=>iN(l),up),this.Tu=new Map,this.Iu=new Set,this.du=new St(Ee.comparator),this.Eu=new Map,this.Au=new Wx,this.Ru={},this.Vu=new Map,this.mu=Wl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function nV(t,e,r=!0){const n=QN(t);let s;const i=n.Pu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await qN(n,e,r,!0),s}async function sV(t,e){const r=QN(t);await qN(r,e,!0,!1)}async function qN(t,e,r,n){const s=await _F(t.localStore,cs(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await iV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&MN(t.remoteStore,s),l}async function iV(t,e,r,n,s){t.gu=(f,m,v)=>async function(p,w,_,b){let C=w.view.nu(_);C.Ds&&(C=await EE(p.localStore,w.query,!1).then(({documents:I})=>w.view.nu(I,C)));const R=b&&b.targetChanges.get(w.targetId),L=b&&b.targetMismatches.get(w.targetId)!=null,F=w.view.applyChanges(C,p.isPrimaryClient,R,L);return kE(p,w.targetId,F._u),F.snapshot}(t,f,m,v);const i=await EE(t.localStore,e,!0),o=new ZF(e,i.qs),l=o.nu(i.documents),c=wd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);kE(t,r,u._u);const h=new eV(e,r,o);return t.Pu.set(e,h),t.Tu.has(r)?t.Tu.get(r).push(e):t.Tu.set(r,[e]),u.snapshot}async function oV(t,e,r){const n=Pe(t),s=n.Pu.get(e),i=n.Tu.get(s.targetId);if(i.length>1)return n.Tu.set(s.targetId,i.filter(o=>!up(o,e))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await My(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Kx(n.remoteStore,s.targetId),Ly(n,s.targetId)}).catch(sc)):(Ly(n,s.targetId),await My(n.localStore,s.targetId,!0))}async function aV(t,e){const r=Pe(t),n=r.Pu.get(e),s=r.Tu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Kx(r.remoteStore,n.targetId))}async function lV(t,e,r){const n=pV(t);try{const s=await function(o,l){const c=Pe(o),u=Be.now(),h=l.reduce((v,x)=>v.add(x.key),ze());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=Ys(),p=ze();return c.Os.getEntries(v,h).next(w=>{x=w,x.forEach((_,b)=>{b.isValidDocument()||(p=p.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,x)).next(w=>{f=w;const _=[];for(const b of l){const C=_5(b,f.get(b.key).overlayedDocument);C!=null&&_.push(new go(b.key,C,JS(C.value.mapValue),qn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,_,l)}).next(w=>{m=w;const _=w.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(v,w.batchId,_)})}).then(()=>({batchId:m.batchId,changes:lN(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new St(Oe)),u=u.insert(l,c),o.Ru[o.currentUser.toKey()]=u}(n,s.batchId,r),await Ed(n,s.changes),await yp(n.remoteStore)}catch(s){const i=tw(s,"Failed to persist write");r.reject(i)}}async function GN(t,e){const r=Pe(t);try{const n=await bF(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Eu.get(i);o&&(tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?tt(o.lu,14607):s.removedDocuments.size>0&&(tt(o.lu,42227),o.lu=!1))}),await Ed(r,n,e)}catch(n){await sc(n)}}function PE(t,e,r){const n=Pe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Pe(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.wa)m.va(l)&&(u=!0)}),u&&sw(c)}(n.eventManager,e),s.length&&n.hu.J_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function cV(t,e,r){const n=Pe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Eu.get(e),i=s&&s.key;if(i){let o=new St(Ee.comparator);o=o.insert(i,wr.newNoDocument(i,Re.min()));const l=ze().add(i),c=new mp(Re.min(),new Map,new St(Oe),o,l);await GN(n,c),n.du=n.du.remove(i),n.Eu.delete(e),aw(n)}else await My(n.localStore,e,!1).then(()=>Ly(n,e,r)).catch(sc)}async function uV(t,e){const r=Pe(t),n=e.batch.batchId;try{const s=await wF(r.localStore,e);zN(r,n,null),$N(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ed(r,s)}catch(s){await sc(s)}}async function dV(t,e,r){const n=Pe(t);try{const s=await function(o,l){const c=Pe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(tt(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(n.localStore,e);zN(n,e,r),$N(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ed(n,s)}catch(s){await sc(s)}}function $N(t,e){(t.Vu.get(e)||[]).forEach(r=>{r.resolve()}),t.Vu.delete(e)}function zN(t,e,r){const n=Pe(t);let s=n.Ru[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ru[n.currentUser.toKey()]=s}}function Ly(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Tu.get(e))t.Pu.delete(n),r&&t.hu.pu(n,r);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(n=>{t.Au.containsKey(n)||WN(t,n)})}function WN(t,e){t.Iu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Kx(t.remoteStore,r),t.du=t.du.remove(e),t.Eu.delete(r),aw(t))}function kE(t,e,r){for(const n of r)n instanceof BN?(t.Au.addReference(n.key,e),hV(t,n)):n instanceof UN?(pe(ow,"Document no longer in limbo: "+n.key),t.Au.removeReference(n.key,e),t.Au.containsKey(n.key)||WN(t,n.key)):Ie(19791,{yu:n})}function hV(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Iu.has(n)||(pe(ow,"New document in limbo: "+r),t.Iu.add(n),aw(t))}function aw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const r=new Ee(ct.fromString(e)),n=t.mu.next();t.Eu.set(n,new tV(r)),t.du=t.du.insert(r,n),MN(t.remoteStore,new Di(cs(cp(r.path)),n,"TargetPurposeLimboResolution",op.ue))}}async function Ed(t,e,r){const n=Pe(t),s=[],i=[],o=[];n.Pu.isEmpty()||(n.Pu.forEach((l,c)=>{o.push(n.gu(c,e,r).then(u=>{var h;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(h=r==null?void 0:r.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Yx.Es(c.targetId,u);i.push(f)}}))}),await Promise.all(o),n.hu.J_(s),await async function(c,u){const h=Pe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ee.forEach(u,m=>ee.forEach(m.Is,v=>h.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>ee.forEach(m.ds,v=>h.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!ic(f))throw f;pe(Hx,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const v=h.Fs.get(m),x=v.snapshotVersion,p=v.withLastLimboFreeSnapshotVersion(x);h.Fs=h.Fs.insert(m,p)}}}(n.localStore,i))}async function fV(t,e){const r=Pe(t);if(!r.currentUser.isEqual(e)){pe(ow,"User change. New user:",e.toKey());const n=await RN(r.localStore,e);r.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new fe(Z.CANCELLED,o))})}),i.Vu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ed(r,n.Bs)}}function mV(t,e){const r=Pe(t),n=r.Eu.get(e);if(n&&n.lu)return ze().add(n.key);{let s=ze();const i=r.Tu.get(e);if(!i)return s;for(const o of i){const l=r.Pu.get(o);s=s.unionWith(l.view.tu)}return s}}function QN(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cV.bind(null,e),e.hu.J_=JF.bind(null,e.eventManager),e.hu.pu=XF.bind(null,e.eventManager),e}function pV(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dV.bind(null,e),e}class ym{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,r){return null}Fu(e,r){return null}vu(e){return xF(this.persistence,new gF,e.initialUser,this.serializer)}Du(e){return new IN(Qx.Vi,this.serializer)}bu(e){return new AF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ym.provider={build:()=>new ym};class gV extends ym{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,r){tt(this.persistence.referenceDelegate instanceof pm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new tF(n,e.asyncQueue,r)}Du(e){const r=this.cacheSizeBytes!==void 0?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new IN(n=>pm.Vi(n,r),this.serializer)}}class Fy{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>PE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=fV.bind(null,this.syncEngine),await YF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KF}()}createDatastore(e){const r=pp(e.databaseInfo.databaseId),n=function(i){return new PF(i)}(e.databaseInfo);return function(i,o,l,c){return new DF(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,l){return new LF(n,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>PE(this.syncEngine,r,0),function(){return TE.C()?new TE:new SF}())}createSyncEngine(e,r){return function(s,i,o,l,c,u,h){const f=new rV(s,i,o,l,c,u);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Pe(s);pe(la,"RemoteStore shutting down."),i.Ia.add(5),await bd(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Fy.provider={build:()=>new Fy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Qs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="FirestoreClient";class yV{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=vr.UNAUTHENTICATED,this.clientId=Dx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{pe(io,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(pe(io,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=tw(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Xg(t,e){t.asyncQueue.verifyOperationInProgress(),pe(io,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await RN(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>{Zi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{pe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Zi("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function jE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await vV(t);pe(io,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>SE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>SE(e.remoteStore,s)),t._onlineComponents=e}async function vV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(io,"Using user provided OfflineComponentProvider");try{await Xg(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Zi("Error using user provided cache. Falling back to memory cache: "+r),await Xg(t,new ym)}}else pe(io,"Using default OfflineComponentProvider"),await Xg(t,new gV(void 0));return t._offlineComponents}async function YN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(io,"Using user provided OnlineComponentProvider"),await jE(t,t._uninitializedComponentsProvider._online)):(pe(io,"Using default OnlineComponentProvider"),await jE(t,new Fy))),t._onlineComponents}function xV(t){return YN(t).then(e=>e.syncEngine)}async function vm(t){const e=await YN(t),r=e.eventManager;return r.onListen=nV.bind(null,e.syncEngine),r.onUnlisten=oV.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=sV.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=aV.bind(null,e.syncEngine),r}function wV(t,e,r={}){const n=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new lw({next:m=>{h.Ou(),o.enqueueAndForget(()=>nw(i,f));const v=m.docs.has(l);!v&&m.fromCache?u.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?u.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new iw(cp(l.path),h,{includeMetadataChanges:!0,ka:!0});return rw(i,f)}(await vm(t),t.asyncQueue,e,r,n)),n.promise}function bV(t,e,r={}){const n=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new lw({next:m=>{h.Ou(),o.enqueueAndForget(()=>nw(i,f)),m.fromCache&&c.source==="server"?u.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new iw(l,h,{includeMetadataChanges:!0,ka:!0});return rw(i,f)}(await vm(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="firestore.googleapis.com",DE=!0;class OE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KN,this.ssl=DE}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:DE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z5)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HN((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new RL;switch(n.type){case"firstParty":return new ML(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=ME.get(r);n&&(pe("ComponentProvider","Removing Datastore"),ME.delete(r),n.terminate())}(this),Promise.resolve()}}function EV(t,e,r,n={}){var s;t=sn(t,vp);const i=tc(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${r}`;i&&(CS(`https://${c}`),_S("Firestore",!0)),o.host!==KN&&o.host!==c&&Zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:n});if(!ia(u,l)&&(t._setSettings(u),n.mockUserToken)){let h,f;if(typeof n.mockUserToken=="string")h=n.mockUserToken,f=vr.MOCK_USER;else{h=e3(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new vr(m)}t._authCredentials=new PL(new LS(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=class JN{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new JN(this.firestore,e,this._query)}};class kt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(vd(r,kt._jsonSchema))return new kt(e,n||null,new Ee(ct.fromString(r.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:qt("string",kt._jsonSchemaVersion),referencePath:qt("string")};class Hi extends lc{constructor(e,r,n){super(e,r,cp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Ee(e))}withConverter(e){return new Hi(this.firestore,e,this._path)}}function cc(t,e,...r){if(t=Gt(t),VS("collection","path",e),t instanceof vp){const n=ct.fromString(e,...r);return H1(n),new Hi(t,null,n)}{if(!(t instanceof kt||t instanceof Hi))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ct.fromString(e,...r));return H1(n),new Hi(t.firestore,null,n)}}function ar(t,e,...r){if(t=Gt(t),arguments.length===1&&(e=Dx.newId()),VS("doc","path",e),t instanceof vp){const n=ct.fromString(e,...r);return Y1(n),new kt(t,null,new Ee(n))}{if(!(t instanceof kt||t instanceof Hi))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ct.fromString(e,...r));return Y1(n),new kt(t.firestore,t instanceof Hi?t.converter:null,new Ee(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="AsyncQueue";class FE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new kN(this,"async_queue_retry"),this.oc=()=>{const n=Jg();n&&pe(LE,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const r=Jg();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const r=Jg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const r=new Bs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ic(e))throw e;pe(LE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const r=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,Qs("INTERNAL UNHANDLED ERROR: ",VE(n)),n}).then(n=>(this.nc=!1,n))));return this._c=r,r}enqueueAfterDelay(e,r,n){this.ac(),this.sc.indexOf(e)>-1&&(r=0);const s=ew.createAndSchedule(this,e,r,n,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&Ie(47125,{hc:VE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const r of this.ec)if(r.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.ec)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const r=this.ec.indexOf(e);this.ec.splice(r,1)}}function VE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class oo extends vp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new FE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FE(e),this._firestoreClient=void 0,await e}}}function CV(t,e){const r=typeof t=="object"?t:jx(),n=typeof t=="string"?t:um,s=kx(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=XO("firestore");i&&EV(s,...i)}return s}function xp(t){if(t._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_V(t),t._firestoreClient}function _V(t){var e,r,n;const s=t._freezeSettings(),i=function(l,c,u,h){return new KL(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,HN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new yV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vn(cr.fromBase64String(e))}catch(r){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new vn(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vd(e,vn._jsonSchema))return vn.fromBase64String(e.bytes)}}vn._jsonSchemaVersion="firestore/bytes/1.0",vn._jsonSchema={type:qt("string",vn._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ds._jsonSchemaVersion}}static fromJSON(e){if(vd(e,ds._jsonSchema))return new ds(e.latitude,e.longitude)}}ds._jsonSchemaVersion="firestore/geoPoint/1.0",ds._jsonSchema={type:qt("string",ds._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vd(e,hs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new hs(e.vectorValues);throw new fe(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hs._jsonSchemaVersion="firestore/vectorValue/1.0",hs._jsonSchema={type:qt("string",hs._jsonSchemaVersion),vectorValues:qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=/^__.*__$/;class AV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new go(e,this.data,this.fieldMask,r,this.fieldTransforms):new xd(e,this.data,r,this.fieldTransforms)}}class XN{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new go(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ZN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ec:t})}}class cw{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new cw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.fc(e),s}gc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return xm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ZN(this.Ec)&&TV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class SV{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||pp(e)}Dc(e,r,n,s=!1){return new cw({Ec:e,methodName:r,bc:n,path:ir.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uw(t){const e=t._freezeSettings(),r=pp(t._databaseId);return new SV(t._databaseId,!!e.ignoreUndefinedProperties,r)}function NV(t,e,r,n,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,r,s);hw("Data must be an object, but it was:",o,n);const l=eI(n,o);let c,u;if(i.merge)c=new rn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Vy(e,f,r);if(!o.contains(m))throw new fe(Z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);rI(h,m)||h.push(m)}c=new rn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new AV(new Ur(l),c,u)}class Ep extends bp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ep}}class dw extends bp{constructor(e,r){super(e),this.Cc=r}_toFieldTransform(e){const r=new Yu(e.serializer,dN(e.serializer,this.Cc));return new w5(e.path,r)}isEqual(e){return e instanceof dw&&this.Cc===e.Cc}}function IV(t,e,r,n){const s=t.Dc(1,e,r);hw("Data must be an object, but it was:",s,n);const i=[],o=Ur.empty();po(n,(c,u)=>{const h=fw(e,c,r);u=Gt(u);const f=s.gc(h);if(u instanceof Ep)i.push(h);else{const m=Cd(u,f);m!=null&&(i.push(h),o.set(h,m))}});const l=new rn(i);return new XN(o,l,s.fieldTransforms)}function RV(t,e,r,n,s,i){const o=t.Dc(1,e,r),l=[Vy(e,n,r)],c=[s];if(i.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Vy(e,i[m])),c.push(i[m+1]);const u=[],h=Ur.empty();for(let m=l.length-1;m>=0;--m)if(!rI(u,l[m])){const v=l[m];let x=c[m];x=Gt(x);const p=o.gc(v);if(x instanceof Ep)u.push(v);else{const w=Cd(x,p);w!=null&&(u.push(v),h.set(v,w))}}const f=new rn(u);return new XN(h,f,o.fieldTransforms)}function PV(t,e,r,n=!1){return Cd(r,t.Dc(n?4:3,e))}function Cd(t,e){if(tI(t=Gt(t)))return hw("Unsupported field value:",e,t),eI(t,e);if(t instanceof bp)return function(n,s){if(!ZN(s.Ec))throw s.wc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const l of n){let c=Cd(l,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=Gt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dN(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Be.fromDate(n);return{timestampValue:mm(s.serializer,i)}}if(n instanceof Be){const i=new Be(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:mm(s.serializer,i)}}if(n instanceof ds)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof vn)return{bytesValue:bN(s.serializer,n._byteString)};if(n instanceof kt){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zx(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof hs)return function(o,l){return{mapValue:{fields:{[YS]:{stringValue:KS},[dm]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.wc("VectorValues must only contain numeric values.");return Ux(l.serializer,u)})}}}}}}(n,s);throw s.wc(`Unsupported field value: ${ip(n)}`)}(t,e)}function eI(t,e){const r={};return qS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):po(t,(n,s)=>{const i=Cd(s,e.Vc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function tI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof ds||t instanceof vn||t instanceof kt||t instanceof bp||t instanceof hs)}function hw(t,e,r){if(!tI(r)||!BS(r)){const n=ip(r);throw n==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+n)}}function Vy(t,e,r){if((e=Gt(e))instanceof wp)return e._internalPath;if(typeof e=="string")return fw(t,e);throw xm("Field path arguments must be of type string or ",t,!1,void 0,r)}const kV=new RegExp("[~\\*/\\[\\]]");function fw(t,e,r){if(e.search(kV)>=0)throw xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new wp(...e.split("."))._internalPath}catch{throw xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function xm(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${n}`),o&&(c+=` in document ${s}`),c+=")"),new fe(Z.INVALID_ARGUMENT,l+t+c)}function rI(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Cp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class jV extends nI{data(){return super.data()}}function Cp(t,e){return typeof e=="string"?fw(t,e):e instanceof wp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mw{}class iI extends mw{}function _p(t,e,...r){let n=[];e instanceof mw&&n.push(e),n=n.concat(r),function(i){const o=i.filter(c=>c instanceof pw).length,l=i.filter(c=>c instanceof Tp).length;if(o>1||o>0&&l>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Tp extends iI{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Tp(e,r,n)}_apply(e){const r=this._parse(e);return oI(e._query,r),new lc(e.firestore,e.converter,Ny(e._query,r))}_parse(e){const r=uw(e.firestore);return function(i,o,l,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){GE(f,h);const x=[];for(const p of f)x.push(qE(c,i,p));m={arrayValue:{values:x}}}else m=qE(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||GE(f,h),m=PV(l,o,f,h==="in"||h==="not-in");return Ut.create(u,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function UE(t,e,r){const n=e,s=Cp("where",t);return Tp._create(s,n,r)}class pw extends mw{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new pw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:$n.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)oI(o,c),o=Ny(o,c)}(e._query,r),new lc(e.firestore,e.converter,Ny(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gw extends iI{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new gw(e,r)}_apply(e){const r=function(s,i,o){if(s.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(i,o)}(e._query,this._field,this._direction);return new lc(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new oc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function yw(t,e="asc"){const r=e,n=Cp("orderBy",t);return gw._create(n,r)}function qE(t,e,r){if(typeof(r=Gt(r))=="string"){if(r==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sN(e)&&r.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ct.fromString(r));if(!Ee.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return nE(t,new Ee(n))}if(r instanceof kt)return nE(t,r._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ip(r)}.`)}function GE(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oI(t,e){const r=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class MV{convertValue(e,r="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return po(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r[dm].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>jt(o.doubleValue));return new hs(i)}convertGeoPoint(e){return new ds(jt(e.latitude),jt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=lp(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){const r=to(e);return new Be(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ct.fromString(e);tt(SN(n),9688,{name:e});const s=new Gu(n.get(1),n.get(3)),i=new Ee(n.popFirst(5));return s.isEqual(r)||Qs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Kc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yo extends nI{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Cp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Yo._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yo._jsonSchema={type:qt("string",Yo._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class wf extends Yo{data(e={}){return super.data(e)}}class Ho{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Kc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new wf(this._firestore,this._userDataWriter,n.key,n,new Kc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new wf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Kc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new wf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Kc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:OV(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ho._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t){t=sn(t,kt);const e=sn(t.firestore,oo);return wV(xp(e),t._key).then(r=>aI(e,t,r))}Ho._jsonSchemaVersion="firestore/querySnapshot/1.0",Ho._jsonSchema={type:qt("string",Ho._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class vw extends MV{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,r)}}function xw(t){t=sn(t,lc);const e=sn(t.firestore,oo),r=xp(e),n=new vw(e);return sI(t._query),bV(r,t._query).then(s=>new Ho(e,n,t,s))}function Ap(t,e,r){t=sn(t,kt);const n=sn(t.firestore,oo),s=DV(t.converter,e);return ww(n,[NV(uw(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,qn.none())])}function _d(t,e,r,...n){t=sn(t,kt);const s=sn(t.firestore,oo),i=uw(s);let o;return o=typeof(e=Gt(e))=="string"||e instanceof wp?RV(i,"updateDoc",t._key,e,r,n):IV(i,"updateDoc",t._key,e),ww(s,[o.toMutation(t._key,qn.exists(!0))])}function LV(t){return ww(sn(t.firestore,oo),[new qx(t._key,qn.none())])}function Sp(t,...e){var r,n,s;t=Gt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||BE(e[o])||(i=e[o++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(BE(e[o])){const f=e[o];e[o]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[o+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof kt)u=sn(t.firestore,oo),h=cp(t._key.path),c={next:f=>{e[o]&&e[o](aI(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=sn(t,lc);u=sn(f.firestore,oo),h=f._query;const m=new vw(u);c={next:v=>{e[o]&&e[o](new Ho(u,m,f,v))},error:e[o+1],complete:e[o+2]},sI(t._query)}return function(m,v,x,p){const w=new lw(p),_=new iw(v,w,x);return m.asyncQueue.enqueueAndForget(async()=>rw(await vm(m),_)),()=>{w.Ou(),m.asyncQueue.enqueueAndForget(async()=>nw(await vm(m),_))}}(xp(u),h,l,c)}function ww(t,e){return function(n,s){const i=new Bs;return n.asyncQueue.enqueueAndForget(async()=>lV(await xV(n),s,i)),i.promise}(xp(t),e)}function aI(t,e,r){const n=r.docs.get(e._key),s=new vw(t);return new Yo(t,s,e._key,n,new Kc(r.hasPendingWrites,r.fromCache),e.converter)}function FV(t){return new dw("increment",t)}(function(e,r=!0){(function(s){nc=s})(rc),ql(new oa("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),l=new oo(new kL(n.getProvider("auth-internal")),new DL(o,n.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gu(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:r},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Qi(G1,$1,e),Qi(G1,$1,"esm2017")})();var ss=function(){return ss=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ss.apply(this,arguments)};function Td(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function VV(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function lI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BV=lI,cI=new gd("auth","Firebase",lI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=new Rx("@firebase/auth");function UV(t,...e){wm.logLevel<=$e.WARN&&wm.warn(`Auth (${rc}): ${t}`,...e)}function bf(t,...e){wm.logLevel<=$e.ERROR&&wm.error(`Auth (${rc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,...e){throw bw(t,...e)}function fs(t,...e){return bw(t,...e)}function uI(t,e,r){const n=Object.assign(Object.assign({},BV()),{[e]:r});return new gd("auth","Firebase",n).create(e,{appName:t.name})}function Us(t){return uI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bw(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return cI.create(t,...e)}function Ne(t,e,...r){if(!t)throw bw(e,...r)}function Ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bf(e),new Error(e)}function Hs(t,e){t||Ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function qV(){return $E()==="http:"||$E()==="https:"}function $E(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qV()||o3()||"connection"in navigator)?navigator.onLine:!0}function $V(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,r){this.shortDelay=e,this.longDelay=r,Hs(r>e,"Short delay should be less than long delay!"),this.isMobile=n3()||a3()}get(){return GV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e){Hs(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QV=new Ad(3e4,6e4);function yo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vo(t,e,r,n,s={}){return hI(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const l=yd(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return i3()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&tc(t.emulatorConfig.host)&&(u.credentials="include"),dI.fetch()(await fI(t,t.config.apiHost,r,l),u)})}async function hI(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},zV),e);try{const s=new HV(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $h(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $h(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $h(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw $h(t,"user-disabled",o);const h=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw uI(t,h,u);zn(t,h)}}catch(s){if(s instanceof ei)throw s;zn(t,"network-request-failed",{message:String(s)})}}async function Sd(t,e,r,n,s={}){const i=await vo(t,e,r,n,s);return"mfaPendingCredential"in i&&zn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function fI(t,e,r,n){const s=`${e}${r}?${n}`,i=t,o=i.config.emulator?Ew(t.config,s):`${t.config.apiScheme}://${s}`;return WV.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function YV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(fs(this.auth,"network-request-failed")),QV.get())})}}function $h(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=fs(t,e,n);return s.customData._tokenResponse=r,s}function zE(t){return t!==void 0&&t.enterprise!==void 0}class KV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return YV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JV(t,e){return vo(t,"GET","/v2/recaptchaConfig",yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(t,e){return vo(t,"POST","/v1/accounts:delete",e)}async function bm(t,e){return vo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZV(t,e=!1){const r=Gt(t),n=await r.getIdToken(e),s=Cw(n);Ne(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:gu(Zg(s.auth_time)),issuedAtTime:gu(Zg(s.iat)),expirationTime:gu(Zg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Zg(t){return Number(t)*1e3}function Cw(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return bf("JWT malformed, contained fewer than 3 sections"),null;try{const s=xS(r);return s?JSON.parse(s):(bf("Failed to decode base64 JWT payload"),null)}catch(s){return bf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function WE(t){const e=Cw(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ei&&e6(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function e6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=gu(this.lastLoginAt),this.creationTime=gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Em(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Hu(t,bm(r,{idToken:n}));Ne(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?mI(i.providerUserInfo):[],l=n6(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Uy(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function r6(t){const e=Gt(t);await Em(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function n6(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function mI(t){return t.map(e=>{var{providerId:r}=e,n=Td(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s6(t,e){const r=await hI(t,{},async()=>{const n=yd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await fI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&tc(t.emulatorConfig.host)&&(c.credentials="include"),dI.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function i6(t,e){return vo(t,"POST","/v2/accounts:revokeToken",yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const r=WE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await s6(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new xl;return n&&(Ne(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return Ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Td(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new t6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Uy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Hu(this,this.stsTokenManager.getToken(this.auth,e));return Ne(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ZV(this,e)}reload(){return r6(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Em(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Us(this.auth));const e=await this.getIdToken();return await Hu(this,XV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,o,l,c,u,h;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,v=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,w=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=r.createdAt)!==null&&u!==void 0?u:void 0,b=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:R,isAnonymous:L,providerData:F,stsTokenManager:I}=r;Ne(C&&I,e,"internal-error");const S=xl.fromJSON(this.name,I);Ne(typeof C=="string",e,"internal-error"),pi(f,e.name),pi(m,e.name),Ne(typeof R=="boolean",e,"internal-error"),Ne(typeof L=="boolean",e,"internal-error"),pi(v,e.name),pi(x,e.name),pi(p,e.name),pi(w,e.name),pi(_,e.name),pi(b,e.name);const N=new Vn({uid:C,auth:e,email:m,emailVerified:R,displayName:f,isAnonymous:L,photoURL:x,phoneNumber:v,tenantId:p,stsTokenManager:S,createdAt:_,lastLoginAt:b});return F&&Array.isArray(F)&&(N.providerData=F.map(j=>Object.assign({},j))),w&&(N._redirectEventId=w),N}static async _fromIdTokenResponse(e,r,n=!1){const s=new xl;s.updateFromServerResponse(r);const i=new Vn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Em(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?mI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new xl;l.updateFromIdToken(n);const c=new Vn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Uy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=new Map;function Fs(t){Hs(t instanceof Function,"Expected a class definition");let e=QE.get(t);return e?(Hs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}pI.type="NONE";const YE=pI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e,r){return`firebase:${t}:${e}:${r}`}class wl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Ef(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ef("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await bm(this.auth,{idToken:e}).catch(()=>{});return r?Vn._fromGetAccountInfoResponse(this.auth,r,e):null}return Vn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new wl(Fs(YE),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Fs(YE);const o=Ef(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await bm(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Vn._fromGetAccountInfoResponse(e,m,h)}else f=Vn._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new wl(i,e,n):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new wl(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bI(e))return"Blackberry";if(EI(e))return"Webos";if(yI(e))return"Safari";if((e.includes("chrome/")||vI(e))&&!e.includes("edge/"))return"Chrome";if(wI(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function gI(t=_r()){return/firefox\//i.test(t)}function yI(t=_r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vI(t=_r()){return/crios\//i.test(t)}function xI(t=_r()){return/iemobile/i.test(t)}function wI(t=_r()){return/android/i.test(t)}function bI(t=_r()){return/blackberry/i.test(t)}function EI(t=_r()){return/webos/i.test(t)}function _w(t=_r()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function o6(t=_r()){var e;return _w(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function a6(){return l3()&&document.documentMode===10}function CI(t=_r()){return _w(t)||wI(t)||EI(t)||bI(t)||/windows phone/i.test(t)||xI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t,e=[]){let r;switch(t){case"Browser":r=HE(_r());break;case"Worker":r=`${HE(_r())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${rc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c6(t,e={}){return vo(t,"GET","/v2/passwordPolicy",yo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=6;class d6{constructor(e){var r,n,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:u6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KE(this),this.idTokenSubscription=new KE(this),this.beforeStateQueue=new l6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Fs(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await wl.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await bm(this,{idToken:e}),n=await Vn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Em(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$V()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(Us(this));const r=e?Gt(e):null;return r&&Ne(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(Us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await c6(this),r=new d6(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gd("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await i6(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Fs(e)||this._popupRedirectResolver;Ne(r,this,"argument-error"),this.redirectPersistenceManager=await wl.create(this,[Fs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_I(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&UV(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function ba(t){return Gt(t)}class KE{constructor(e){this.auth=e,this.observer=null,this.addObserver=g3(r=>this.observer=r)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Np={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function f6(t){Np=t}function TI(t){return Np.loadJS(t)}function m6(){return Np.recaptchaEnterpriseScript}function p6(){return Np.gapiScript}function g6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class y6{constructor(){this.enterprise=new v6}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class v6{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const x6="recaptcha-enterprise",AI="NO_RECAPTCHA";class w6{constructor(e){this.type=x6,this.auth=ba(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{JV(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new KV(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;zE(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(AI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new y6().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(l=>{if(!r&&zE(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=m6();c.length!==0&&(c+=l),TI(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function JE(t,e,r,n=!1,s=!1){const i=new w6(t);let o;if(s)o=AI;else try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function qy(t,e,r,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await JE(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await JE(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t,e){const r=kx(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(ia(i,e??{}))return s;zn(s,"already-initialized")}return r.initialize({options:e})}function E6(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Fs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function C6(t,e,r){const n=ba(t);Ne(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=SI(e),{host:o,port:l}=_6(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Ne(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ne(ia(u,n.config.emulator)&&ia(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,tc(o)?(CS(`${i}//${o}${c}`),_S("Auth",!0)):T6()}function SI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _6(t){const e=SI(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:XE(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:XE(o)}}}function XE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function T6(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ls("not implemented")}_getIdTokenResponse(e){return Ls("not implemented")}_linkToIdToken(e,r){return Ls("not implemented")}_getReauthenticationResolver(e){return Ls("not implemented")}}async function A6(t,e){return vo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(t,e){return Sd(t,"POST","/v1/accounts:signInWithPassword",yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6(t,e){return Sd(t,"POST","/v1/accounts:signInWithEmailLink",yo(t,e))}async function I6(t,e){return Sd(t,"POST","/v1/accounts:signInWithEmailLink",yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends Tw{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Ku(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Ku(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qy(e,r,"signInWithPassword",S6);case"emailLink":return N6(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qy(e,n,"signUpPassword",A6);case"emailLink":return I6(e,{idToken:r,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return Sd(t,"POST","/v1/accounts:signInWithIdp",yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="http://localhost";class ua extends Tw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):zn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Td(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new ua(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return bl(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,bl(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,bl(e,r)}buildRequest(){const e={requestUri:R6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=yd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function k6(t){const e=zc(Wc(t)).link,r=e?zc(Wc(e)).deep_link_id:null,n=zc(Wc(t)).deep_link_id;return(n?zc(Wc(n)).link:null)||n||r||e||t}class Aw{constructor(e){var r,n,s,i,o,l;const c=zc(Wc(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,h=(n=c.oobCode)!==null&&n!==void 0?n:null,f=P6((s=c.mode)!==null&&s!==void 0?s:null);Ne(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=k6(e);try{return new Aw(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.providerId=uc.PROVIDER_ID}static credential(e,r){return Ku._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Aw.parseLink(r);return Ne(n,"argument-error"),Ku._fromEmailAndCode(e,n.code,n.tenantId)}}uc.PROVIDER_ID="password";uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends NI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Nd{constructor(){super("facebook.com")}static credential(e){return ua._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Nd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ua._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ti.credential(r,n)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Nd{constructor(){super("github.com")}static credential(e){return ua._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Nd{constructor(){super("twitter.com")}static credential(e,r){return ua._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Si.credential(r,n)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j6(t,e){return Sd(t,"POST","/v1/accounts:signUp",yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Vn._fromIdTokenResponse(e,n,s),o=ZE(n);return new da({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=ZE(n);return new da({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function ZE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends ei{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Cm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Cm(e,r,n,s)}}function II(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Cm._fromErrorAndOperation(t,i,e,n):i})}async function M6(t,e,r=!1){const n=await Hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return da._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D6(t,e,r=!1){const{auth:n}=t;if(yn(n.app))return Promise.reject(Us(n));const s="reauthenticate";try{const i=await Hu(t,II(n,s,e,t),r);Ne(i.idToken,n,"internal-error");const o=Cw(i.idToken);Ne(o,n,"internal-error");const{sub:l}=o;return Ne(t.uid===l,n,"user-mismatch"),da._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&zn(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(t,e,r=!1){if(yn(t.app))return Promise.reject(Us(t));const n="signIn",s=await II(t,n,e),i=await da._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function O6(t,e){return RI(ba(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(t){const e=ba(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function L6(t,e,r){if(yn(t.app))return Promise.reject(Us(t));const n=ba(t),o=await qy(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",j6).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&PI(t),c}),l=await da._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function F6(t,e,r){return yn(t.app)?Promise.reject(Us(t)):O6(Gt(t),uc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&PI(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t,e){return Gt(t).setPersistence(e)}function B6(t,e,r,n){return Gt(t).onIdTokenChanged(e,r,n)}function U6(t,e,r){return Gt(t).beforeAuthStateChanged(e,r)}function q6(t,e,r,n){return Gt(t).onAuthStateChanged(e,r,n)}function eC(t){return Gt(t).signOut()}const _m="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(_m,"1"),this.storage.removeItem(_m),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=1e3,$6=10;class jI extends kI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);a6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$6):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},G6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}jI.type="LOCAL";const MI=jI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI extends kI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}DI.type="SESSION";const OI=DI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Ip(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async u=>u(r.origin,i)),c=await z6(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Sw("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return window}function Q6(t){ms().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){return typeof ms().WorkerGlobalScope<"u"&&typeof ms().importScripts=="function"}async function Y6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function H6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function K6(){return LI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="firebaseLocalStorageDb",J6=1,Tm="firebaseLocalStorage",VI="fbase_key";class Id{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Rp(t,e){return t.transaction([Tm],e?"readwrite":"readonly").objectStore(Tm)}function X6(){const t=indexedDB.deleteDatabase(FI);return new Id(t).toPromise()}function Gy(){const t=indexedDB.open(FI,J6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Tm,{keyPath:VI})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Tm)?e(n):(n.close(),await X6(),e(await Gy()))})})}async function tC(t,e,r){const n=Rp(t,!0).put({[VI]:e,value:r});return new Id(n).toPromise()}async function Z6(t,e){const r=Rp(t,!1).get(e),n=await new Id(r).toPromise();return n===void 0?null:n.value}function rC(t,e){const r=Rp(t,!0).delete(e);return new Id(r).toPromise()}const eB=800,tB=3;class BI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gy(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>tB)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ip._getInstance(K6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Y6(),!this.activeServiceWorker)return;this.sender=new W6(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||H6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gy();return await tC(e,_m,"1"),await rC(e,_m),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>tC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Z6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>rC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Rp(s,!1).getAll();return new Id(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BI.type="LOCAL";const rB=BI;new Ad(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(t,e){return e?Fs(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw extends Tw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return bl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function sB(t){return RI(t.auth,new Nw(t),t.bypassAuthState)}function iB(t){const{auth:e,user:r}=t;return Ne(r,e,"internal-error"),D6(r,new Nw(t),t.bypassAuthState)}async function oB(t){const{auth:e,user:r}=t;return Ne(r,e,"internal-error"),M6(r,new Nw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sB;case"linkViaPopup":case"linkViaRedirect":return oB;case"reauthViaPopup":case"reauthViaRedirect":return iB;default:zn(this.auth,"internal-error")}}resolve(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=new Ad(2e3,1e4);class ll extends UI{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,ll.currentPopupAction&&ll.currentPopupAction.cancel(),ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Hs(this.filter.length===1,"Popup operations only handle one event");const e=Sw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aB.get())};e()}}ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB="pendingRedirect",Cf=new Map;class cB extends UI{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Cf.get(this.auth._key());if(!e){try{const n=await uB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Cf.set(this.auth._key(),e)}return this.bypassAuthState||Cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uB(t,e){const r=fB(e),n=hB(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function dB(t,e){Cf.set(t._key(),e)}function hB(t){return Fs(t._redirectPersistence)}function fB(t){return Ef(lB,t.config.apiKey,t.name)}async function mB(t,e,r=!1){if(yn(t.app))return Promise.reject(Us(t));const n=ba(t),s=nB(n,e),o=await new cB(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=10*60*1e3;class gB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yB(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!qI(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(fs(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pB&&this.cachedEventUids.clear(),this.cachedEventUids.has(nC(e))}saveEventToCache(e){this.cachedEventUids.add(nC(e)),this.lastProcessedEventTime=Date.now()}}function nC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(t,e={}){return vo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wB=/^https?/;async function bB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vB(t);for(const r of e)try{if(EB(r))return}catch{}zn(t,"unauthorized-domain")}function EB(t){const e=By(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!wB.test(r))return!1;if(xB.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=new Ad(3e4,6e4);function sC(){const t=ms().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function _B(t){return new Promise((e,r)=>{var n,s,i;function o(){sC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sC(),r(fs(t,"network-request-failed"))},timeout:CB.get()})}if(!((s=(n=ms().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ms().gapi)===null||i===void 0)&&i.load)o();else{const l=g6("iframefcb");return ms()[l]=()=>{gapi.load?o():r(fs(t,"network-request-failed"))},TI(`${p6()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw _f=null,e})}let _f=null;function TB(t){return _f=_f||_B(t),_f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=new Ad(5e3,15e3),SB="__/auth/iframe",NB="emulator/auth/iframe",IB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PB(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Ew(e,NB):`https://${t.config.authDomain}/${SB}`,n={apiKey:e.apiKey,appName:t.name,v:rc},s=RB.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${yd(n).slice(1)}`}async function kB(t){const e=await TB(t),r=ms().gapi;return Ne(r,t,"internal-error"),e.open({where:document.body,url:PB(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IB,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=fs(t,"network-request-failed"),l=ms().setTimeout(()=>{i(o)},AB.get());function c(){ms().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MB=500,DB=600,OB="_blank",LB="http://localhost";class iC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FB(t,e,r,n=MB,s=DB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},jB),{width:n.toString(),height:s.toString(),top:i,left:o}),u=_r().toLowerCase();r&&(l=vI(u)?OB:r),gI(u)&&(e=e||LB,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[v,x])=>`${m}${v}=${x},`,"");if(o6(u)&&l!=="_self")return VB(e||"",l),new iC(null);const f=window.open(e||"",l,h);Ne(f,t,"popup-blocked");try{f.focus()}catch{}return new iC(f)}function VB(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB="__/auth/handler",UB="emulator/auth/handler",qB=encodeURIComponent("fac");async function oC(t,e,r,n,s,i){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:rc,eventId:s};if(e instanceof NI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",p3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Nd){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${qB}=${encodeURIComponent(c)}`:"";return`${GB(t)}?${yd(l).slice(1)}${u}`}function GB({config:t}){return t.emulator?Ew(t,UB):`https://${t.authDomain}/${BB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="webStorageSupport";class $B{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OI,this._completeRedirectFn=mB,this._overrideRedirectResult=dB}async _openPopup(e,r,n,s){var i;Hs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await oC(e,r,n,By(),s);return FB(e,o,Sw())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await oC(e,r,n,By(),s);return Q6(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Hs(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await kB(e),n=new gB(e);return r.register("authEvent",s=>(Ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(e0,{type:e0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[e0];o!==void 0&&r(!!o),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=bB(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return CI()||yI()||_w()}}const zB=$B;var aC="@firebase/auth",lC="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YB(t){ql(new oa("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_I(t)},u=new h6(n,s,i,c);return E6(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ql(new oa("auth-internal",e=>{const r=ba(e.getProvider("auth").getImmediate());return(n=>new WB(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(aC,lC,QB(t)),Qi(aC,lC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=5*60,KB=ES("authIdTokenMaxAge")||HB;let cC=null;const JB=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>KB)return;const s=r==null?void 0:r.token;cC!==s&&(cC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XB(t=jx()){const e=kx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=b6(t,{popupRedirectResolver:zB,persistence:[rB,MI,OI]}),n=ES("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=JB(i.toString());U6(r,o,()=>o(r.currentUser)),B6(r,l=>o(l))}}const s=wS("auth");return s&&C6(r,`http://${s}`),r}function ZB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}f6({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=fs("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",ZB().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YB("Browser");const e8={apiKey:"AIzaSyBUftmUEX4_zgW-7daz3Yq9Md7QJQWTDOM",authDomain:"vmaster-fcdff.firebaseapp.com",projectId:"vmaster-fcdff",storageBucket:"vmaster-fcdff.firebasestorage.app",messagingSenderId:"44584686885",appId:"1:44584686885:web:1aa7941cebb2ad30bf76cc",measurementId:"G-FH5MHDJ62K"},GI=yL().length?jx():SS(e8),Tt=CV(GI),Ko=XB(GI);V6(Ko,MI);function rt(...t){return GO(sS(t))}const t8=ZD,$I=y.forwardRef(({className:t,...e},r)=>a.jsx(JA,{ref:r,className:rt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));$I.displayName=JA.displayName;const r8=Ex("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),zI=y.forwardRef(({className:t,variant:e,...r},n)=>a.jsx(XA,{ref:n,className:rt(r8({variant:e}),t),...r}));zI.displayName=XA.displayName;const n8=y.forwardRef(({className:t,...e},r)=>a.jsx(tS,{ref:r,className:rt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));n8.displayName=tS.displayName;const WI=y.forwardRef(({className:t,...e},r)=>a.jsx(rS,{ref:r,className:rt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(sa,{className:"h-4 w-4"})}));WI.displayName=rS.displayName;const QI=y.forwardRef(({className:t,...e},r)=>a.jsx(ZA,{ref:r,className:rt("text-sm font-semibold",t),...e}));QI.displayName=ZA.displayName;const YI=y.forwardRef(({className:t,...e},r)=>a.jsx(eS,{ref:r,className:rt("text-sm opacity-90",t),...e}));YI.displayName=eS.displayName;function s8(){const{toasts:t}=dD();return a.jsxs(t8,{children:[t.map(function({id:e,title:r,description:n,action:s,...i}){return a.jsxs(zI,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[r&&a.jsx(QI,{children:r}),n&&a.jsx(YI,{children:n})]}),s,a.jsx(WI,{})]},e)}),a.jsx($I,{})]})}var uC=["light","dark"],i8="(prefers-color-scheme: dark)",o8=y.createContext(void 0),a8={setTheme:t=>{},themes:[]},l8=()=>{var t;return(t=y.useContext(o8))!=null?t:a8};y.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=s?uC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,p=!1,w=!0)=>{let _=o?o[x]:x,b=p?x+"|| ''":`'${_}'`,C="";return s&&w&&!p&&uC.includes(x)&&(C+=`d.style.colorScheme = '${x}';`),r==="class"?p||_?C+=`c.add(${b})`:C+="null":_&&(C+=`d[s](n,${b})`),C},v=t?`!function(){${h}${m(t)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${i8}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return y.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:v}})});var c8=t=>{switch(t){case"success":return h8;case"info":return m8;case"warning":return f8;case"error":return p8;default:return null}},u8=Array(12).fill(0),d8=({visible:t})=>Y.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},Y.createElement("div",{className:"sonner-spinner"},u8.map((e,r)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),h8=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),f8=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),m8=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),p8=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),g8=()=>{let[t,e]=Y.useState(document.hidden);return Y.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},$y=1,y8=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:$y++,i=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:r}),{...l,...t,id:s,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0;return n.then(async i=>{if(x8(i)&&!i.ok){s=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${i.status}`):e.error,l=typeof e.description=="function"?await e.description(`HTTP error! status: ${i.status}`):e.description;this.create({id:r,type:"error",message:o,description:l})}else if(e.success!==void 0){s=!1;let o=typeof e.success=="function"?await e.success(i):e.success,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"success",message:o,description:l})}}).catch(async i=>{if(e.error!==void 0){s=!1;let o=typeof e.error=="function"?await e.error(i):e.error,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"error",message:o,description:l})}}).finally(()=>{var i;s&&(this.dismiss(r),r=void 0),(i=e.finally)==null||i.call(e)}),r},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||$y++;return this.create({jsx:t(r),id:r,...e}),r},this.subscribers=[],this.toasts=[]}},Jr=new y8,v8=(t,e)=>{let r=(e==null?void 0:e.id)||$y++;return Jr.addToast({title:t,...e,id:r}),r},x8=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",w8=v8,b8=()=>Jr.toasts;Object.assign(w8,{success:Jr.success,info:Jr.info,warning:Jr.warning,error:Jr.error,custom:Jr.custom,message:Jr.message,promise:Jr.promise,dismiss:Jr.dismiss,loading:Jr.loading},{getHistory:b8});function E8(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}E8(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zh(t){return t.label!==void 0}var C8=3,_8="32px",T8=4e3,A8=356,S8=14,N8=20,I8=200;function R8(...t){return t.filter(Boolean).join(" ")}var P8=t=>{var e,r,n,s,i,o,l,c,u,h;let{invert:f,toast:m,unstyled:v,interacting:x,setHeights:p,visibleToasts:w,heights:_,index:b,toasts:C,expanded:R,removeToast:L,defaultRichColors:F,closeButton:I,style:S,cancelButtonStyle:N,actionButtonStyle:j,className:D="",descriptionClassName:O="",duration:k,position:G,gap:H,loadingIcon:J,expandByDefault:ie,classNames:q,icons:W,closeButtonAriaLabel:se="Close toast",pauseWhenPageIsHidden:re,cn:le}=t,[ue,Se]=Y.useState(!1),[ke,we]=Y.useState(!1),[oe,ge]=Y.useState(!1),[xe,be]=Y.useState(!1),[Te,Ce]=Y.useState(0),[he,ve]=Y.useState(0),gt=Y.useRef(null),at=Y.useRef(null),Ot=b===0,Ze=b+1<=w,yt=m.type,ur=m.dismissible!==!1,_n=m.className||"",xs=m.descriptionClassName||"",un=Y.useMemo(()=>_.findIndex(Ae=>Ae.toastId===m.id)||0,[_,m.id]),ws=Y.useMemo(()=>{var Ae;return(Ae=m.closeButton)!=null?Ae:I},[m.closeButton,I]),_o=Y.useMemo(()=>m.duration||k||T8,[m.duration,k]),Nt=Y.useRef(0),vt=Y.useRef(0),bs=Y.useRef(0),Tn=Y.useRef(null),[To,ri]=G.split("-"),dn=Y.useMemo(()=>_.reduce((Ae,Ge,Je)=>Je>=un?Ae:Ae+Ge.height,0),[_,un]),An=g8(),Sn=m.invert||f,Tr=yt==="loading";vt.current=Y.useMemo(()=>un*H+dn,[un,dn]),Y.useEffect(()=>{Se(!0)},[]),Y.useLayoutEffect(()=>{if(!ue)return;let Ae=at.current,Ge=Ae.style.height;Ae.style.height="auto";let Je=Ae.getBoundingClientRect().height;Ae.style.height=Ge,ve(Je),p(Ht=>Ht.find(dr=>dr.toastId===m.id)?Ht.map(dr=>dr.toastId===m.id?{...dr,height:Je}:dr):[{toastId:m.id,height:Je,position:m.position},...Ht])},[ue,m.title,m.description,p,m.id]);let Ar=Y.useCallback(()=>{we(!0),Ce(vt.current),p(Ae=>Ae.filter(Ge=>Ge.toastId!==m.id)),setTimeout(()=>{L(m)},I8)},[m,L,p,vt]);Y.useEffect(()=>{if(m.promise&&yt==="loading"||m.duration===1/0||m.type==="loading")return;let Ae,Ge=_o;return R||x||re&&An?(()=>{if(bs.current<Nt.current){let Je=new Date().getTime()-Nt.current;Ge=Ge-Je}bs.current=new Date().getTime()})():Ge!==1/0&&(Nt.current=new Date().getTime(),Ae=setTimeout(()=>{var Je;(Je=m.onAutoClose)==null||Je.call(m,m),Ar()},Ge)),()=>clearTimeout(Ae)},[R,x,ie,m,_o,Ar,m.promise,yt,re,An]),Y.useEffect(()=>{let Ae=at.current;if(Ae){let Ge=Ae.getBoundingClientRect().height;return ve(Ge),p(Je=>[{toastId:m.id,height:Ge,position:m.position},...Je]),()=>p(Je=>Je.filter(Ht=>Ht.toastId!==m.id))}},[p,m.id]),Y.useEffect(()=>{m.delete&&Ar()},[Ar,m.delete]);function yc(){return W!=null&&W.loading?Y.createElement("div",{className:"sonner-loader","data-visible":yt==="loading"},W.loading):J?Y.createElement("div",{className:"sonner-loader","data-visible":yt==="loading"},J):Y.createElement(d8,{visible:yt==="loading"})}return Y.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:at,className:le(D,_n,q==null?void 0:q.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,q==null?void 0:q.default,q==null?void 0:q[yt],(r=m==null?void 0:m.classNames)==null?void 0:r[yt]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:F,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":ue,"data-promise":!!m.promise,"data-removed":ke,"data-visible":Ze,"data-y-position":To,"data-x-position":ri,"data-index":b,"data-front":Ot,"data-swiping":oe,"data-dismissible":ur,"data-type":yt,"data-invert":Sn,"data-swipe-out":xe,"data-expanded":!!(R||ie&&ue),style:{"--index":b,"--toasts-before":b,"--z-index":C.length-b,"--offset":`${ke?Te:vt.current}px`,"--initial-height":ie?"auto":`${he}px`,...S,...m.style},onPointerDown:Ae=>{Tr||!ur||(gt.current=new Date,Ce(vt.current),Ae.target.setPointerCapture(Ae.pointerId),Ae.target.tagName!=="BUTTON"&&(ge(!0),Tn.current={x:Ae.clientX,y:Ae.clientY}))},onPointerUp:()=>{var Ae,Ge,Je,Ht;if(xe||!ur)return;Tn.current=null;let dr=Number(((Ae=at.current)==null?void 0:Ae.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Nn=new Date().getTime()-((Ge=gt.current)==null?void 0:Ge.getTime()),dt=Math.abs(dr)/Nn;if(Math.abs(dr)>=N8||dt>.11){Ce(vt.current),(Je=m.onDismiss)==null||Je.call(m,m),Ar(),be(!0);return}(Ht=at.current)==null||Ht.style.setProperty("--swipe-amount","0px"),ge(!1)},onPointerMove:Ae=>{var Ge;if(!Tn.current||!ur)return;let Je=Ae.clientY-Tn.current.y,Ht=Ae.clientX-Tn.current.x,dr=(To==="top"?Math.min:Math.max)(0,Je),Nn=Ae.pointerType==="touch"?10:2;Math.abs(dr)>Nn?(Ge=at.current)==null||Ge.style.setProperty("--swipe-amount",`${Je}px`):Math.abs(Ht)>Nn&&(Tn.current=null)}},ws&&!m.jsx?Y.createElement("button",{"aria-label":se,"data-disabled":Tr,"data-close-button":!0,onClick:Tr||!ur?()=>{}:()=>{var Ae;Ar(),(Ae=m.onDismiss)==null||Ae.call(m,m)},className:le(q==null?void 0:q.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||Y.isValidElement(m.title)?m.jsx||m.title:Y.createElement(Y.Fragment,null,yt||m.icon||m.promise?Y.createElement("div",{"data-icon":"",className:le(q==null?void 0:q.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||yc():null,m.type!=="loading"?m.icon||(W==null?void 0:W[yt])||c8(yt):null):null,Y.createElement("div",{"data-content":"",className:le(q==null?void 0:q.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},Y.createElement("div",{"data-title":"",className:le(q==null?void 0:q.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?Y.createElement("div",{"data-description":"",className:le(O,xs,q==null?void 0:q.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),Y.isValidElement(m.cancel)?m.cancel:m.cancel&&zh(m.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||N,onClick:Ae=>{var Ge,Je;zh(m.cancel)&&ur&&((Je=(Ge=m.cancel).onClick)==null||Je.call(Ge,Ae),Ar())},className:le(q==null?void 0:q.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,Y.isValidElement(m.action)?m.action:m.action&&zh(m.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||j,onClick:Ae=>{var Ge,Je;zh(m.action)&&(Ae.defaultPrevented||((Je=(Ge=m.action).onClick)==null||Je.call(Ge,Ae),Ar()))},className:le(q==null?void 0:q.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function dC(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var k8=t=>{let{invert:e,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:l,theme:c="light",richColors:u,duration:h,style:f,visibleToasts:m=C8,toastOptions:v,dir:x=dC(),gap:p=S8,loadingIcon:w,icons:_,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:C,cn:R=R8}=t,[L,F]=Y.useState([]),I=Y.useMemo(()=>Array.from(new Set([r].concat(L.filter(re=>re.position).map(re=>re.position)))),[L,r]),[S,N]=Y.useState([]),[j,D]=Y.useState(!1),[O,k]=Y.useState(!1),[G,H]=Y.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=Y.useRef(null),ie=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=Y.useRef(null),W=Y.useRef(!1),se=Y.useCallback(re=>{var le;(le=L.find(ue=>ue.id===re.id))!=null&&le.delete||Jr.dismiss(re.id),F(ue=>ue.filter(({id:Se})=>Se!==re.id))},[L]);return Y.useEffect(()=>Jr.subscribe(re=>{if(re.dismiss){F(le=>le.map(ue=>ue.id===re.id?{...ue,delete:!0}:ue));return}setTimeout(()=>{kA.flushSync(()=>{F(le=>{let ue=le.findIndex(Se=>Se.id===re.id);return ue!==-1?[...le.slice(0,ue),{...le[ue],...re},...le.slice(ue+1)]:[re,...le]})})})}),[]),Y.useEffect(()=>{if(c!=="system"){H(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:re})=>{H(re?"dark":"light")})},[c]),Y.useEffect(()=>{L.length<=1&&D(!1)},[L]),Y.useEffect(()=>{let re=le=>{var ue,Se;n.every(ke=>le[ke]||le.code===ke)&&(D(!0),(ue=J.current)==null||ue.focus()),le.code==="Escape"&&(document.activeElement===J.current||(Se=J.current)!=null&&Se.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[n]),Y.useEffect(()=>{if(J.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,W.current=!1)}},[J.current]),L.length?Y.createElement("section",{"aria-label":`${b} ${ie}`,tabIndex:-1},I.map((re,le)=>{var ue;let[Se,ke]=re.split("-");return Y.createElement("ol",{key:re,dir:x==="auto"?dC():x,tabIndex:-1,ref:J,className:o,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":Se,"data-x-position":ke,style:{"--front-toast-height":`${((ue=S[0])==null?void 0:ue.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||_8,"--width":`${A8}px`,"--gap":`${p}px`,...f},onBlur:we=>{W.current&&!we.currentTarget.contains(we.relatedTarget)&&(W.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||W.current||(W.current=!0,q.current=we.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{O||D(!1)},onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||k(!0)},onPointerUp:()=>k(!1)},L.filter(we=>!we.position&&le===0||we.position===re).map((we,oe)=>{var ge,xe;return Y.createElement(P8,{key:we.id,icons:_,index:oe,toast:we,defaultRichColors:u,duration:(ge=v==null?void 0:v.duration)!=null?ge:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:e,visibleToasts:m,closeButton:(xe=v==null?void 0:v.closeButton)!=null?xe:i,interacting:O,position:re,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:se,toasts:L.filter(be=>be.position==we.position),heights:S.filter(be=>be.position==we.position),setHeights:N,expandByDefault:s,gap:p,loadingIcon:w,expanded:j,pauseWhenPageIsHidden:C,cn:R})}))})):null};const j8=({...t})=>{const{theme:e="system"}=l8();return a.jsx(k8,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var M8=I_.useId||(()=>{}),D8=0;function Jo(t){const[e,r]=y.useState(M8());return Cr(()=>{r(n=>n??String(D8++))},[t]),e?`radix-${e}`:""}const O8=["top","right","bottom","left"],ao=Math.min,Zr=Math.max,Am=Math.round,Wh=Math.floor,lo=t=>({x:t,y:t}),L8={left:"right",right:"left",bottom:"top",top:"bottom"},F8={start:"end",end:"start"};function zy(t,e,r){return Zr(t,ao(e,r))}function Ks(t,e){return typeof t=="function"?t(e):t}function Js(t){return t.split("-")[0]}function dc(t){return t.split("-")[1]}function Iw(t){return t==="x"?"y":"x"}function Rw(t){return t==="y"?"height":"width"}function co(t){return["top","bottom"].includes(Js(t))?"y":"x"}function Pw(t){return Iw(co(t))}function V8(t,e,r){r===void 0&&(r=!1);const n=dc(t),s=Pw(t),i=Rw(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Sm(o)),[o,Sm(o)]}function B8(t){const e=Sm(t);return[Wy(t),e,Wy(e)]}function Wy(t){return t.replace(/start|end/g,e=>F8[e])}function U8(t,e,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?i:o;default:return[]}}function q8(t,e,r,n){const s=dc(t);let i=U8(Js(t),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Wy)))),i}function Sm(t){return t.replace(/left|right|bottom|top/g,e=>L8[e])}function G8(t){return{top:0,right:0,bottom:0,left:0,...t}}function HI(t){return typeof t!="number"?G8(t):{top:t,right:t,bottom:t,left:t}}function Nm(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function hC(t,e,r){let{reference:n,floating:s}=t;const i=co(e),o=Pw(e),l=Rw(o),c=Js(e),u=i==="y",h=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let v;switch(c){case"top":v={x:h,y:n.y-s.height};break;case"bottom":v={x:h,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:f};break;case"left":v={x:n.x-s.width,y:f};break;default:v={x:n.x,y:n.y}}switch(dc(e)){case"start":v[o]-=m*(r&&u?-1:1);break;case"end":v[o]+=m*(r&&u?-1:1);break}return v}const $8=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=hC(u,n,c),m=n,v={},x=0;for(let p=0;p<l.length;p++){const{name:w,fn:_}=l[p],{x:b,y:C,data:R,reset:L}=await _({x:h,y:f,initialPlacement:n,placement:m,strategy:s,middlewareData:v,rects:u,platform:o,elements:{reference:t,floating:e}});h=b??h,f=C??f,v={...v,[w]:{...v[w],...R}},L&&x<=50&&(x++,typeof L=="object"&&(L.placement&&(m=L.placement),L.rects&&(u=L.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:h,y:f}=hC(u,m,c)),p=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:v}};async function Ju(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=Ks(e,t),x=HI(v),w=l[m?f==="floating"?"reference":"floating":f],_=Nm(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(w)))==null||r?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),b=f==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},L=Nm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:C,strategy:c}):b);return{top:(_.top-L.top+x.top)/R.y,bottom:(L.bottom-_.bottom+x.bottom)/R.y,left:(_.left-L.left+x.left)/R.x,right:(L.right-_.right+x.right)/R.x}}const z8=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Ks(t,e)||{};if(u==null)return{};const f=HI(h),m={x:r,y:n},v=Pw(s),x=Rw(v),p=await o.getDimensions(u),w=v==="y",_=w?"top":"left",b=w?"bottom":"right",C=w?"clientHeight":"clientWidth",R=i.reference[x]+i.reference[v]-m[v]-i.floating[x],L=m[v]-i.reference[v],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let I=F?F[C]:0;(!I||!await(o.isElement==null?void 0:o.isElement(F)))&&(I=l.floating[C]||i.floating[x]);const S=R/2-L/2,N=I/2-p[x]/2-1,j=ao(f[_],N),D=ao(f[b],N),O=j,k=I-p[x]-D,G=I/2-p[x]/2+S,H=zy(O,G,k),J=!c.arrow&&dc(s)!=null&&G!==H&&i.reference[x]/2-(G<O?j:D)-p[x]/2<0,ie=J?G<O?G-O:G-k:0;return{[v]:m[v]+ie,data:{[v]:H,centerOffset:G-H-ie,...J&&{alignmentOffset:ie}},reset:J}}}),W8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:p=!0,...w}=Ks(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const _=Js(s),b=co(l),C=Js(l)===l,R=await(c.isRTL==null?void 0:c.isRTL(u.floating)),L=m||(C||!p?[Sm(l)]:B8(l)),F=x!=="none";!m&&F&&L.push(...q8(l,p,x,R));const I=[l,...L],S=await Ju(e,w),N=[];let j=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&N.push(S[_]),f){const G=V8(s,o,R);N.push(S[G[0]],S[G[1]])}if(j=[...j,{placement:s,overflows:N}],!N.every(G=>G<=0)){var D,O;const G=(((D=i.flip)==null?void 0:D.index)||0)+1,H=I[G];if(H)return{data:{index:G,overflows:j},reset:{placement:H}};let J=(O=j.filter(ie=>ie.overflows[0]<=0).sort((ie,q)=>ie.overflows[1]-q.overflows[1])[0])==null?void 0:O.placement;if(!J)switch(v){case"bestFit":{var k;const ie=(k=j.filter(q=>{if(F){const W=co(q.placement);return W===b||W==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(W=>W>0).reduce((W,se)=>W+se,0)]).sort((q,W)=>q[1]-W[1])[0])==null?void 0:k[0];ie&&(J=ie);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function fC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function mC(t){return O8.some(e=>t[e]>=0)}const Q8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Ks(t,e);switch(n){case"referenceHidden":{const i=await Ju(e,{...s,elementContext:"reference"}),o=fC(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:mC(o)}}}case"escaped":{const i=await Ju(e,{...s,altBoundary:!0}),o=fC(i,r.floating);return{data:{escapedOffsets:o,escaped:mC(o)}}}default:return{}}}}};async function Y8(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Js(r),l=dc(r),c=co(r)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=Ks(e,t);let{mainAxis:m,crossAxis:v,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(v=l==="end"?x*-1:x),c?{x:v*h,y:m*u}:{x:m*u,y:v*h}}const H8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await Y8(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},K8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:_,y:b}=w;return{x:_,y:b}}},...c}=Ks(t,e),u={x:r,y:n},h=await Ju(e,c),f=co(Js(s)),m=Iw(f);let v=u[m],x=u[f];if(i){const w=m==="y"?"top":"left",_=m==="y"?"bottom":"right",b=v+h[w],C=v-h[_];v=zy(b,v,C)}if(o){const w=f==="y"?"top":"left",_=f==="y"?"bottom":"right",b=x+h[w],C=x-h[_];x=zy(b,x,C)}const p=l.fn({...e,[m]:v,[f]:x});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[m]:i,[f]:o}}}}}},J8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ks(t,e),h={x:r,y:n},f=co(s),m=Iw(f);let v=h[m],x=h[f];const p=Ks(l,e),w=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const C=m==="y"?"height":"width",R=i.reference[m]-i.floating[C]+w.mainAxis,L=i.reference[m]+i.reference[C]-w.mainAxis;v<R?v=R:v>L&&(v=L)}if(u){var _,b;const C=m==="y"?"width":"height",R=["top","left"].includes(Js(s)),L=i.reference[f]-i.floating[C]+(R&&((_=o.offset)==null?void 0:_[f])||0)+(R?0:w.crossAxis),F=i.reference[f]+i.reference[C]+(R?0:((b=o.offset)==null?void 0:b[f])||0)-(R?w.crossAxis:0);x<L?x=L:x>F&&(x=F)}return{[m]:v,[f]:x}}}},X8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Ks(t,e),h=await Ju(e,u),f=Js(s),m=dc(s),v=co(s)==="y",{width:x,height:p}=i.floating;let w,_;f==="top"||f==="bottom"?(w=f,_=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,w=m==="end"?"top":"bottom");const b=p-h.top-h.bottom,C=x-h.left-h.right,R=ao(p-h[w],b),L=ao(x-h[_],C),F=!e.middlewareData.shift;let I=R,S=L;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(S=C),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(I=b),F&&!m){const j=Zr(h.left,0),D=Zr(h.right,0),O=Zr(h.top,0),k=Zr(h.bottom,0);v?S=x-2*(j!==0||D!==0?j+D:Zr(h.left,h.right)):I=p-2*(O!==0||k!==0?O+k:Zr(h.top,h.bottom))}await c({...e,availableWidth:S,availableHeight:I});const N=await o.getDimensions(l.floating);return x!==N.width||p!==N.height?{reset:{rects:!0}}:{}}}};function Pp(){return typeof window<"u"}function hc(t){return KI(t)?(t.nodeName||"").toLowerCase():"#document"}function on(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ys(t){var e;return(e=(KI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function KI(t){return Pp()?t instanceof Node||t instanceof on(t).Node:!1}function Wn(t){return Pp()?t instanceof Element||t instanceof on(t).Element:!1}function gs(t){return Pp()?t instanceof HTMLElement||t instanceof on(t).HTMLElement:!1}function pC(t){return!Pp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof on(t).ShadowRoot}function Rd(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=Qn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function Z8(t){return["table","td","th"].includes(hc(t))}function kp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function kw(t){const e=jw(),r=Wn(t)?Qn(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function eU(t){let e=uo(t);for(;gs(e)&&!Yl(e);){if(kw(e))return e;if(kp(e))return null;e=uo(e)}return null}function jw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yl(t){return["html","body","#document"].includes(hc(t))}function Qn(t){return on(t).getComputedStyle(t)}function jp(t){return Wn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function uo(t){if(hc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||pC(t)&&t.host||ys(t);return pC(e)?e.host:e}function JI(t){const e=uo(t);return Yl(e)?t.ownerDocument?t.ownerDocument.body:t.body:gs(e)&&Rd(e)?e:JI(e)}function Xu(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=JI(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),o=on(s);if(i){const l=Qy(o);return e.concat(o,o.visualViewport||[],Rd(s)?s:[],l&&r?Xu(l):[])}return e.concat(s,Xu(s,[],r))}function Qy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function XI(t){const e=Qn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=gs(t),i=s?t.offsetWidth:r,o=s?t.offsetHeight:n,l=Am(r)!==i||Am(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Mw(t){return Wn(t)?t:t.contextElement}function El(t){const e=Mw(t);if(!gs(e))return lo(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=XI(e);let o=(i?Am(r.width):r.width)/n,l=(i?Am(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const tU=lo(0);function ZI(t){const e=on(t);return!jw()||!e.visualViewport?tU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function rU(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==on(t)?!1:e}function ha(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=Mw(t);let o=lo(1);e&&(n?Wn(n)&&(o=El(n)):o=El(t));const l=rU(i,r,n)?ZI(i):lo(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=on(i),v=n&&Wn(n)?on(n):n;let x=m,p=Qy(x);for(;p&&n&&v!==x;){const w=El(p),_=p.getBoundingClientRect(),b=Qn(p),C=_.left+(p.clientLeft+parseFloat(b.paddingLeft))*w.x,R=_.top+(p.clientTop+parseFloat(b.paddingTop))*w.y;c*=w.x,u*=w.y,h*=w.x,f*=w.y,c+=C,u+=R,x=on(p),p=Qy(x)}}return Nm({width:h,height:f,x:c,y:u})}function nU(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",o=ys(n),l=e?kp(e.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=lo(1);const h=lo(0),f=gs(n);if((f||!f&&!i)&&((hc(n)!=="body"||Rd(o))&&(c=jp(n)),gs(n))){const m=ha(n);u=El(n),h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+h.x,y:r.y*u.y-c.scrollTop*u.y+h.y}}function sU(t){return Array.from(t.getClientRects())}function Yy(t,e){const r=jp(t).scrollLeft;return e?e.left+r:ha(ys(t)).left+r}function iU(t){const e=ys(t),r=jp(t),n=t.ownerDocument.body,s=Zr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Zr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Yy(t);const l=-r.scrollTop;return Qn(n).direction==="rtl"&&(o+=Zr(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:l}}function oU(t,e){const r=on(t),n=ys(t),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=jw();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function aU(t,e){const r=ha(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=gs(t)?El(t):lo(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function gC(t,e,r){let n;if(e==="viewport")n=oU(t,r);else if(e==="document")n=iU(ys(t));else if(Wn(e))n=aU(e,r);else{const s=ZI(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return Nm(n)}function eR(t,e){const r=uo(t);return r===e||!Wn(r)||Yl(r)?!1:Qn(r).position==="fixed"||eR(r,e)}function lU(t,e){const r=e.get(t);if(r)return r;let n=Xu(t,[],!1).filter(l=>Wn(l)&&hc(l)!=="body"),s=null;const i=Qn(t).position==="fixed";let o=i?uo(t):t;for(;Wn(o)&&!Yl(o);){const l=Qn(o),c=kw(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Rd(o)&&!c&&eR(t,o))?n=n.filter(h=>h!==o):s=l,o=uo(o)}return e.set(t,n),n}function cU(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?kp(e)?[]:lU(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,h)=>{const f=gC(e,h,s);return u.top=Zr(f.top,u.top),u.right=ao(f.right,u.right),u.bottom=ao(f.bottom,u.bottom),u.left=Zr(f.left,u.left),u},gC(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function uU(t){const{width:e,height:r}=XI(t);return{width:e,height:r}}function dU(t,e,r){const n=gs(e),s=ys(e),i=r==="fixed",o=ha(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=lo(0);if(n||!n&&!i)if((hc(e)!=="body"||Rd(s))&&(l=jp(e)),n){const v=ha(e,!0,i,e);c.x=v.x+e.clientLeft,c.y=v.y+e.clientTop}else s&&(c.x=Yy(s));let u=0,h=0;if(s&&!n&&!i){const v=s.getBoundingClientRect();h=v.top+l.scrollTop,u=v.left+l.scrollLeft-Yy(s,v)}const f=o.left+l.scrollLeft-c.x-u,m=o.top+l.scrollTop-c.y-h;return{x:f,y:m,width:o.width,height:o.height}}function t0(t){return Qn(t).position==="static"}function yC(t,e){if(!gs(t)||Qn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return ys(t)===r&&(r=r.ownerDocument.body),r}function tR(t,e){const r=on(t);if(kp(t))return r;if(!gs(t)){let s=uo(t);for(;s&&!Yl(s);){if(Wn(s)&&!t0(s))return s;s=uo(s)}return r}let n=yC(t,e);for(;n&&Z8(n)&&t0(n);)n=yC(n,e);return n&&Yl(n)&&t0(n)&&!kw(n)?r:n||eU(t)||r}const hU=async function(t){const e=this.getOffsetParent||tR,r=this.getDimensions,n=await r(t.floating);return{reference:dU(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function fU(t){return Qn(t).direction==="rtl"}const mU={convertOffsetParentRelativeRectToViewportRelativeRect:nU,getDocumentElement:ys,getClippingRect:cU,getOffsetParent:tR,getElementRects:hU,getClientRects:sU,getDimensions:uU,getScale:El,isElement:Wn,isRTL:fU};function pU(t,e){let r=null,n;const s=ys(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:u,top:h,width:f,height:m}=t.getBoundingClientRect();if(l||e(),!f||!m)return;const v=Wh(h),x=Wh(s.clientWidth-(u+f)),p=Wh(s.clientHeight-(h+m)),w=Wh(u),b={rootMargin:-v+"px "+-x+"px "+-p+"px "+-w+"px",threshold:Zr(0,ao(1,c))||1};let C=!0;function R(L){const F=L[0].intersectionRatio;if(F!==c){if(!C)return o();F?o(!1,F):n=setTimeout(()=>{o(!1,1e-7)},1e3)}C=!1}try{r=new IntersectionObserver(R,{...b,root:s.ownerDocument})}catch{r=new IntersectionObserver(R,b)}r.observe(t)}return o(!0),i}function gU(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Mw(t),h=s||i?[...u?Xu(u):[],...Xu(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",r,{passive:!0}),i&&_.addEventListener("resize",r)});const f=u&&l?pU(u,r):null;let m=-1,v=null;o&&(v=new ResizeObserver(_=>{let[b]=_;b&&b.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=v)==null||C.observe(e)})),r()}),u&&!c&&v.observe(u),v.observe(e));let x,p=c?ha(t):null;c&&w();function w(){const _=ha(t);p&&(_.x!==p.x||_.y!==p.y||_.width!==p.width||_.height!==p.height)&&r(),p=_,x=requestAnimationFrame(w)}return r(),()=>{var _;h.forEach(b=>{s&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),f==null||f(),(_=v)==null||_.disconnect(),v=null,c&&cancelAnimationFrame(x)}}const yU=H8,vU=K8,xU=W8,wU=X8,bU=Q8,vC=z8,EU=J8,CU=(t,e,r)=>{const n=new Map,s={platform:mU,...r},i={...s.platform,_c:n};return $8(t,e,{...s,platform:i})};var Tf=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Im(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Im(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!Im(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function rR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function xC(t,e){const r=rR(t);return Math.round(e*r)/r}function r0(t){const e=y.useRef(t);return Tf(()=>{e.current=t}),e}function _U(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=y.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,v]=y.useState(n);Im(m,n)||v(n);const[x,p]=y.useState(null),[w,_]=y.useState(null),b=y.useCallback(q=>{q!==F.current&&(F.current=q,p(q))},[]),C=y.useCallback(q=>{q!==I.current&&(I.current=q,_(q))},[]),R=i||x,L=o||w,F=y.useRef(null),I=y.useRef(null),S=y.useRef(h),N=c!=null,j=r0(c),D=r0(s),O=r0(u),k=y.useCallback(()=>{if(!F.current||!I.current)return;const q={placement:e,strategy:r,middleware:m};D.current&&(q.platform=D.current),CU(F.current,I.current,q).then(W=>{const se={...W,isPositioned:O.current!==!1};G.current&&!Im(S.current,se)&&(S.current=se,ya.flushSync(()=>{f(se)}))})},[m,e,r,D,O]);Tf(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(q=>({...q,isPositioned:!1})))},[u]);const G=y.useRef(!1);Tf(()=>(G.current=!0,()=>{G.current=!1}),[]),Tf(()=>{if(R&&(F.current=R),L&&(I.current=L),R&&L){if(j.current)return j.current(R,L,k);k()}},[R,L,k,j,N]);const H=y.useMemo(()=>({reference:F,floating:I,setReference:b,setFloating:C}),[b,C]),J=y.useMemo(()=>({reference:R,floating:L}),[R,L]),ie=y.useMemo(()=>{const q={position:r,left:0,top:0};if(!J.floating)return q;const W=xC(J.floating,h.x),se=xC(J.floating,h.y);return l?{...q,transform:"translate("+W+"px, "+se+"px)",...rR(J.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:W,top:se}},[r,l,J.floating,h.x,h.y]);return y.useMemo(()=>({...h,update:k,refs:H,elements:J,floatingStyles:ie}),[h,k,H,J,ie])}const TU=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?vC({element:n.current,padding:s}).fn(r):{}:n?vC({element:n,padding:s}).fn(r):{}}}},AU=(t,e)=>({...yU(t),options:[t,e]}),SU=(t,e)=>({...vU(t),options:[t,e]}),NU=(t,e)=>({...EU(t),options:[t,e]}),IU=(t,e)=>({...xU(t),options:[t,e]}),RU=(t,e)=>({...wU(t),options:[t,e]}),PU=(t,e)=>({...bU(t),options:[t,e]}),kU=(t,e)=>({...TU(t),options:[t,e]});var jU="Arrow",nR=y.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return a.jsx(qe.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});nR.displayName=jU;var MU=nR;function DU(t,e=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:m,children:v,...x}=f,p=(m==null?void 0:m[t][c])||l,w=y.useMemo(()=>x,Object.values(x));return a.jsx(p.Provider,{value:w,children:v})}function h(f,m){const v=(m==null?void 0:m[t][c])||l,x=y.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,h]}const s=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,OU(s,...e)]}function OU(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function LU(t){const[e,r]=y.useState(void 0);return Cr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Dw="Popper",[sR,fc]=DU(Dw),[FU,iR]=sR(Dw),oR=t=>{const{__scopePopper:e,children:r}=t,[n,s]=y.useState(null);return a.jsx(FU,{scope:e,anchor:n,onAnchorChange:s,children:r})};oR.displayName=Dw;var aR="PopperAnchor",lR=y.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=iR(aR,r),o=y.useRef(null),l=it(e,o);return y.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx(qe.div,{...s,ref:l})});lR.displayName=aR;var Ow="PopperContent",[VU,BU]=sR(Ow),cR=y.forwardRef((t,e)=>{var oe,ge,xe,be,Te,Ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:v="optimized",onPlaced:x,...p}=t,w=iR(Ow,r),[_,b]=y.useState(null),C=it(e,he=>b(he)),[R,L]=y.useState(null),F=LU(R),I=(F==null?void 0:F.width)??0,S=(F==null?void 0:F.height)??0,N=n+(i!=="center"?"-"+i:""),j=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},D=Array.isArray(u)?u:[u],O=D.length>0,k={padding:j,boundary:D.filter(qU),altBoundary:O},{refs:G,floatingStyles:H,placement:J,isPositioned:ie,middlewareData:q}=_U({strategy:"fixed",placement:N,whileElementsMounted:(...he)=>gU(...he,{animationFrame:v==="always"}),elements:{reference:w.anchor},middleware:[AU({mainAxis:s+S,alignmentAxis:o}),c&&SU({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?NU():void 0,...k}),c&&IU({...k}),RU({...k,apply:({elements:he,rects:ve,availableWidth:gt,availableHeight:at})=>{const{width:Ot,height:Ze}=ve.reference,yt=he.floating.style;yt.setProperty("--radix-popper-available-width",`${gt}px`),yt.setProperty("--radix-popper-available-height",`${at}px`),yt.setProperty("--radix-popper-anchor-width",`${Ot}px`),yt.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),R&&kU({element:R,padding:l}),GU({arrowWidth:I,arrowHeight:S}),m&&PU({strategy:"referenceHidden",...k})]}),[W,se]=hR(J),re=Er(x);Cr(()=>{ie&&(re==null||re())},[ie,re]);const le=(oe=q.arrow)==null?void 0:oe.x,ue=(ge=q.arrow)==null?void 0:ge.y,Se=((xe=q.arrow)==null?void 0:xe.centerOffset)!==0,[ke,we]=y.useState();return Cr(()=>{_&&we(window.getComputedStyle(_).zIndex)},[_]),a.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:ie?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(be=q.transformOrigin)==null?void 0:be.x,(Te=q.transformOrigin)==null?void 0:Te.y].join(" "),...((Ce=q.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(VU,{scope:r,placedSide:W,onArrowChange:L,arrowX:le,arrowY:ue,shouldHideArrow:Se,children:a.jsx(qe.div,{"data-side":W,"data-align":se,...p,ref:C,style:{...p.style,animation:ie?void 0:"none"}})})})});cR.displayName=Ow;var uR="PopperArrow",UU={top:"bottom",right:"left",bottom:"top",left:"right"},dR=y.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=BU(uR,n),o=UU[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(MU,{...s,ref:r,style:{...s.style,display:"block"}})})});dR.displayName=uR;function qU(t){return t!==null}var GU=t=>({name:"transformOrigin",options:t,fn(e){var w,_,b;const{placement:r,rects:n,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=hR(r),f={start:"0%",center:"50%",end:"100%"}[h],m=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,v=(((b=s.arrow)==null?void 0:b.y)??0)+c/2;let x="",p="";return u==="bottom"?(x=o?f:`${m}px`,p=`${-c}px`):u==="top"?(x=o?f:`${m}px`,p=`${n.floating.height+c}px`):u==="right"?(x=`${-c}px`,p=o?f:`${v}px`):u==="left"&&(x=`${n.floating.width+c}px`,p=o?f:`${v}px`),{data:{x,y:p}}}});function hR(t){const[e,r="center"]=t.split("-");return[e,r]}var fR=oR,Lw=lR,Fw=cR,Vw=dR,[Mp,bQ]=fd("Tooltip",[fc]),Bw=fc(),mR="TooltipProvider",$U=700,wC="tooltip.open",[zU,pR]=Mp(mR),gR=t=>{const{__scopeTooltip:e,delayDuration:r=$U,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,[o,l]=y.useState(!0),c=y.useRef(!1),u=y.useRef(0);return y.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),a.jsx(zU,{scope:e,isOpenDelayed:o,delayDuration:r,onOpen:y.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:y.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:y.useCallback(h=>{c.current=h},[]),disableHoverableContent:s,children:i})};gR.displayName=mR;var yR="Tooltip",[EQ,Dp]=Mp(yR),Hy="TooltipTrigger",WU=y.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Dp(Hy,r),i=pR(Hy,r),o=Bw(r),l=y.useRef(null),c=it(e,l,s.onTriggerChange),u=y.useRef(!1),h=y.useRef(!1),f=y.useCallback(()=>u.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(Lw,{asChild:!0,...o,children:a.jsx(qe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:me(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:me(t.onBlur,s.onClose),onClick:me(t.onClick,s.onClose)})})});WU.displayName=Hy;var QU="TooltipPortal",[CQ,YU]=Mp(QU,{forceMount:void 0}),Hl="TooltipContent",vR=y.forwardRef((t,e)=>{const r=YU(Hl,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,o=Dp(Hl,t.__scopeTooltip);return a.jsx(va,{present:n||o.open,children:o.disableHoverableContent?a.jsx(xR,{side:s,...i,ref:e}):a.jsx(HU,{side:s,...i,ref:e})})}),HU=y.forwardRef((t,e)=>{const r=Dp(Hl,t.__scopeTooltip),n=pR(Hl,t.__scopeTooltip),s=y.useRef(null),i=it(e,s),[o,l]=y.useState(null),{trigger:c,onClose:u}=r,h=s.current,{onPointerInTransitChange:f}=n,m=y.useCallback(()=>{l(null),f(!1)},[f]),v=y.useCallback((x,p)=>{const w=x.currentTarget,_={x:x.clientX,y:x.clientY},b=ZU(_,w.getBoundingClientRect()),C=e9(_,b),R=t9(p.getBoundingClientRect()),L=n9([...C,...R]);l(L),f(!0)},[f]);return y.useEffect(()=>()=>m(),[m]),y.useEffect(()=>{if(c&&h){const x=w=>v(w,h),p=w=>v(w,c);return c.addEventListener("pointerleave",x),h.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",p)}}},[c,h,v,m]),y.useEffect(()=>{if(o){const x=p=>{const w=p.target,_={x:p.clientX,y:p.clientY},b=(c==null?void 0:c.contains(w))||(h==null?void 0:h.contains(w)),C=!r9(_,o);b?m():C&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,h,o,u,m]),a.jsx(xR,{...t,ref:i})}),[KU,JU]=Mp(yR,{isInside:!1}),xR=y.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Dp(Hl,r),u=Bw(r),{onClose:h}=c;return y.useEffect(()=>(document.addEventListener(wC,h),()=>document.removeEventListener(wC,h)),[h]),y.useEffect(()=>{if(c.trigger){const f=m=>{const v=m.target;v!=null&&v.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(md,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(Fw,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(MA,{children:n}),a.jsx(KU,{scope:r,isInside:!0,children:a.jsx(DD,{id:c.contentId,role:"tooltip",children:s||n})})]})})});vR.displayName=Hl;var wR="TooltipArrow",XU=y.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Bw(r);return JU(wR,r).isInside?null:a.jsx(Vw,{...s,...n,ref:e})});XU.displayName=wR;function ZU(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function e9(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function t9(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function r9(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>n!=h>n&&r<(u-l)*(n-c)/(h-c)+l&&(s=!s)}return s}function n9(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),s9(e)}function s9(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var i9=gR,bR=vR;const o9=i9,a9=y.forwardRef(({className:t,sideOffset:e=4,...r},n)=>a.jsx(bR,{ref:n,sideOffset:e,className:rt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));a9.displayName=bR.displayName;var Op=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lp=typeof window>"u"||"Deno"in globalThis;function Dn(){}function l9(t,e){return typeof t=="function"?t(e):t}function c9(t){return typeof t=="number"&&t>=0&&t!==1/0}function u9(t,e){return Math.max(t+(e||0)-Date.now(),0)}function bC(t,e){return typeof t=="function"?t(e):t}function d9(t,e){return typeof t=="function"?t(e):t}function EC(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(n){if(e.queryHash!==Uw(o,e.options))return!1}else if(!ed(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function CC(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(Zu(e.options.mutationKey)!==Zu(i))return!1}else if(!ed(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Uw(t,e){return((e==null?void 0:e.queryKeyHashFn)||Zu)(t)}function Zu(t){return JSON.stringify(t,(e,r)=>Ky(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function ed(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!ed(t[r],e[r])):!1}function ER(t,e){if(t===e)return t;const r=_C(t)&&_C(e);if(r||Ky(t)&&Ky(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),o=i.length,l=r?[]:{};let c=0;for(let u=0;u<o;u++){const h=r?u:i[u];(!r&&n.includes(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=ER(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function _C(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ky(t){if(!TC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!TC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function TC(t){return Object.prototype.toString.call(t)==="[object Object]"}function h9(t){return new Promise(e=>{setTimeout(e,t)})}function f9(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?ER(t,e):e}function m9(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function p9(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var qw=Symbol();function CR(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===qw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var qo,Ni,Tl,u_,g9=(u_=class extends Op{constructor(){super();et(this,qo);et(this,Ni);et(this,Tl);De(this,Tl,e=>{if(!Lp&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){te(this,Ni)||this.setEventListener(te(this,Tl))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,Ni))==null||e.call(this),De(this,Ni,void 0))}setEventListener(e){var r;De(this,Tl,e),(r=te(this,Ni))==null||r.call(this),De(this,Ni,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){te(this,qo)!==e&&(De(this,qo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof te(this,qo)=="boolean"?te(this,qo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qo=new WeakMap,Ni=new WeakMap,Tl=new WeakMap,u_),_R=new g9,Al,Ii,Sl,d_,y9=(d_=class extends Op{constructor(){super();et(this,Al,!0);et(this,Ii);et(this,Sl);De(this,Sl,e=>{if(!Lp&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){te(this,Ii)||this.setEventListener(te(this,Sl))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,Ii))==null||e.call(this),De(this,Ii,void 0))}setEventListener(e){var r;De(this,Sl,e),(r=te(this,Ii))==null||r.call(this),De(this,Ii,e(this.setOnline.bind(this)))}setOnline(e){te(this,Al)!==e&&(De(this,Al,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return te(this,Al)}},Al=new WeakMap,Ii=new WeakMap,Sl=new WeakMap,d_),Rm=new y9;function v9(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function x9(t){return Math.min(1e3*2**t,3e4)}function TR(t){return(t??"online")==="online"?Rm.isOnline():!0}var AR=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function n0(t){return t instanceof AR}function SR(t){let e=!1,r=0,n=!1,s;const i=v9(),o=p=>{var w;n||(m(new AR(p)),(w=t.abort)==null||w.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>_R.isFocused()&&(t.networkMode==="always"||Rm.isOnline())&&t.canRun(),h=()=>TR(t.networkMode)&&t.canRun(),f=p=>{var w;n||(n=!0,(w=t.onSuccess)==null||w.call(t,p),s==null||s(),i.resolve(p))},m=p=>{var w;n||(n=!0,(w=t.onError)==null||w.call(t,p),s==null||s(),i.reject(p))},v=()=>new Promise(p=>{var w;s=_=>{(n||u())&&p(_)},(w=t.onPause)==null||w.call(t)}).then(()=>{var p;s=void 0,n||(p=t.onContinue)==null||p.call(t)}),x=()=>{if(n)return;let p;const w=r===0?t.initialPromise:void 0;try{p=w??t.fn()}catch(_){p=Promise.reject(_)}Promise.resolve(p).then(f).catch(_=>{var F;if(n)return;const b=t.retry??(Lp?0:3),C=t.retryDelay??x9,R=typeof C=="function"?C(r,_):C,L=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,_);if(e||!L){m(_);return}r++,(F=t.onFail)==null||F.call(t,r,_),h9(R).then(()=>u()?void 0:v()).then(()=>{e?m(_):x()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():v().then(x),i)}}function w9(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var kr=w9(),Go,h_,NR=(h_=class{constructor(){et(this,Go)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),c9(this.gcTime)&&De(this,Go,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Lp?1/0:5*60*1e3))}clearGcTimeout(){te(this,Go)&&(clearTimeout(te(this,Go)),De(this,Go,void 0))}},Go=new WeakMap,h_),Nl,Il,mn,yr,id,$o,On,ks,f_,b9=(f_=class extends NR{constructor(e){super();et(this,On);et(this,Nl);et(this,Il);et(this,mn);et(this,yr);et(this,id);et(this,$o);De(this,$o,!1),De(this,id,e.defaultOptions),this.setOptions(e.options),this.observers=[],De(this,mn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,De(this,Nl,C9(this.options)),this.state=e.state??te(this,Nl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=te(this,yr))==null?void 0:e.promise}setOptions(e){this.options={...te(this,id),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&te(this,mn).remove(this)}setData(e,r){const n=f9(this.state.data,e,this.options);return fr(this,On,ks).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){fr(this,On,ks).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=te(this,yr))==null?void 0:n.promise;return(s=te(this,yr))==null||s.cancel(e),r?r.then(Dn).catch(Dn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(te(this,Nl))}isActive(){return this.observers.some(e=>d9(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!u9(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=te(this,yr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=te(this,yr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),te(this,mn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(te(this,yr)&&(te(this,$o)?te(this,yr).cancel({revert:!0}):te(this,yr).cancelRetry()),this.scheduleGc()),te(this,mn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fr(this,On,ks).call(this,{type:"invalidate"})}fetch(e,r){var c,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(te(this,yr))return te(this,yr).continueRetry(),te(this,yr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(De(this,$o,!0),n.signal)})},i=()=>{const f=CR(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return s(m),De(this,$o,!1),this.options.persister?this.options.persister(f,m,this):f(m)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),De(this,Il,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&fr(this,On,ks).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const l=f=>{var m,v,x,p;n0(f)&&f.silent||fr(this,On,ks).call(this,{type:"error",error:f}),n0(f)||((v=(m=te(this,mn).config).onError)==null||v.call(m,f,this),(p=(x=te(this,mn).config).onSettled)==null||p.call(x,this.state.data,f,this)),this.scheduleGc()};return De(this,yr,SR({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,v,x,p;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(w){l(w);return}(v=(m=te(this,mn).config).onSuccess)==null||v.call(m,f,this),(p=(x=te(this,mn).config).onSettled)==null||p.call(x,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{fr(this,On,ks).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{fr(this,On,ks).call(this,{type:"pause"})},onContinue:()=>{fr(this,On,ks).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),te(this,yr).start()}},Nl=new WeakMap,Il=new WeakMap,mn=new WeakMap,yr=new WeakMap,id=new WeakMap,$o=new WeakMap,On=new WeakSet,ks=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...E9(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return n0(s)&&s.revert&&te(this,Il)?{...te(this,Il),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),kr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),te(this,mn).notify({query:this,type:"updated",action:e})})},f_);function E9(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:TR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function C9(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var es,m_,_9=(m_=class extends Op{constructor(e={}){super();et(this,es);this.config=e,De(this,es,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??Uw(s,r);let o=this.get(i);return o||(o=new b9({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){te(this,es).has(e.queryHash)||(te(this,es).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=te(this,es).get(e.queryHash);r&&(e.destroy(),r===e&&te(this,es).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){kr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return te(this,es).get(e)}getAll(){return[...te(this,es).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>EC(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>EC(e,n)):r}notify(e){kr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){kr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){kr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},es=new WeakMap,m_),ts,Rr,zo,rs,yi,p_,T9=(p_=class extends NR{constructor(e){super();et(this,rs);et(this,ts);et(this,Rr);et(this,zo);this.mutationId=e.mutationId,De(this,Rr,e.mutationCache),De(this,ts,[]),this.state=e.state||A9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){te(this,ts).includes(e)||(te(this,ts).push(e),this.clearGcTimeout(),te(this,Rr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){De(this,ts,te(this,ts).filter(r=>r!==e)),this.scheduleGc(),te(this,Rr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){te(this,ts).length||(this.state.status==="pending"?this.scheduleGc():te(this,Rr).remove(this))}continue(){var e;return((e=te(this,zo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,l,c,u,h,f,m,v,x,p,w,_,b,C,R,L,F,I;De(this,zo,SR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,N)=>{fr(this,rs,yi).call(this,{type:"failed",failureCount:S,error:N})},onPause:()=>{fr(this,rs,yi).call(this,{type:"pause"})},onContinue:()=>{fr(this,rs,yi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>te(this,Rr).canRun(this)}));const r=this.state.status==="pending",n=!te(this,zo).canStart();try{if(!r){fr(this,rs,yi).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(s=te(this,Rr).config).onMutate)==null?void 0:i.call(s,e,this));const N=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));N!==this.state.context&&fr(this,rs,yi).call(this,{type:"pending",context:N,variables:e,isPaused:n})}const S=await te(this,zo).start();return await((u=(c=te(this,Rr).config).onSuccess)==null?void 0:u.call(c,S,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,S,e,this.state.context)),await((v=(m=te(this,Rr).config).onSettled)==null?void 0:v.call(m,S,null,this.state.variables,this.state.context,this)),await((p=(x=this.options).onSettled)==null?void 0:p.call(x,S,null,e,this.state.context)),fr(this,rs,yi).call(this,{type:"success",data:S}),S}catch(S){try{throw await((_=(w=te(this,Rr).config).onError)==null?void 0:_.call(w,S,e,this.state.context,this)),await((C=(b=this.options).onError)==null?void 0:C.call(b,S,e,this.state.context)),await((L=(R=te(this,Rr).config).onSettled)==null?void 0:L.call(R,void 0,S,this.state.variables,this.state.context,this)),await((I=(F=this.options).onSettled)==null?void 0:I.call(F,void 0,S,e,this.state.context)),S}finally{fr(this,rs,yi).call(this,{type:"error",error:S})}}finally{te(this,Rr).runNext(this)}}},ts=new WeakMap,Rr=new WeakMap,zo=new WeakMap,rs=new WeakSet,yi=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),kr.batch(()=>{te(this,ts).forEach(n=>{n.onMutationUpdate(e)}),te(this,Rr).notify({mutation:this,type:"updated",action:e})})},p_);function A9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kr,od,g_,S9=(g_=class extends Op{constructor(e={}){super();et(this,Kr);et(this,od);this.config=e,De(this,Kr,new Map),De(this,od,Date.now())}build(e,r,n){const s=new T9({mutationCache:this,mutationId:++vh(this,od)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){const r=Qh(e),n=te(this,Kr).get(r)??[];n.push(e),te(this,Kr).set(r,n),this.notify({type:"added",mutation:e})}remove(e){var n;const r=Qh(e);if(te(this,Kr).has(r)){const s=(n=te(this,Kr).get(r))==null?void 0:n.filter(i=>i!==e);s&&(s.length===0?te(this,Kr).delete(r):te(this,Kr).set(r,s))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const r=(n=te(this,Kr).get(Qh(e)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===e}runNext(e){var n;const r=(n=te(this,Kr).get(Qh(e)))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){kr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...te(this,Kr).values()].flat()}find(e){const r={exact:!0,...e};return this.getAll().find(n=>CC(r,n))}findAll(e={}){return this.getAll().filter(r=>CC(e,r))}notify(e){kr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return kr.batch(()=>Promise.all(e.map(r=>r.continue().catch(Dn))))}},Kr=new WeakMap,od=new WeakMap,g_);function Qh(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function AC(t){return{onFetch:(e,r)=>{var h,f,m,v,x;const n=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const w=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},_=CR(e.options,e.fetchOptions),b=async(C,R,L)=>{if(p)return Promise.reject();if(R==null&&C.pages.length)return Promise.resolve(C);const F={queryKey:e.queryKey,pageParam:R,direction:L?"backward":"forward",meta:e.options.meta};w(F);const I=await _(F),{maxPages:S}=e.options,N=L?p9:m9;return{pages:N(C.pages,I,S),pageParams:N(C.pageParams,R,S)}};if(s&&i.length){const C=s==="backward",R=C?N9:SC,L={pages:i,pageParams:o},F=R(n,L);l=await b(L,F,C)}else{const C=t??i.length;do{const R=c===0?o[0]??n.initialPageParam:SC(n,l);if(c>0&&R==null)break;l=await b(l,R),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var p,w;return(w=(p=e.options).persister)==null?void 0:w.call(p,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function SC(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function N9(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Rt,Ri,Pi,Rl,Pl,ki,kl,jl,y_,I9=(y_=class{constructor(t={}){et(this,Rt);et(this,Ri);et(this,Pi);et(this,Rl);et(this,Pl);et(this,ki);et(this,kl);et(this,jl);De(this,Rt,t.queryCache||new _9),De(this,Ri,t.mutationCache||new S9),De(this,Pi,t.defaultOptions||{}),De(this,Rl,new Map),De(this,Pl,new Map),De(this,ki,0)}mount(){vh(this,ki)._++,te(this,ki)===1&&(De(this,kl,_R.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,Rt).onFocus())})),De(this,jl,Rm.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,Rt).onOnline())})))}unmount(){var t,e;vh(this,ki)._--,te(this,ki)===0&&((t=te(this,kl))==null||t.call(this),De(this,kl,void 0),(e=te(this,jl))==null||e.call(this),De(this,jl,void 0))}isFetching(t){return te(this,Rt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return te(this,Ri).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=te(this,Rt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=te(this,Rt).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(bC(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return te(this,Rt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=te(this,Rt).get(n.queryHash),i=s==null?void 0:s.state.data,o=l9(e,i);if(o!==void 0)return te(this,Rt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return kr.batch(()=>te(this,Rt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=te(this,Rt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=te(this,Rt);kr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=te(this,Rt),n={type:"active",...t};return kr.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=kr.batch(()=>te(this,Rt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Dn).catch(Dn)}invalidateQueries(t={},e={}){return kr.batch(()=>{if(te(this,Rt).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=kr.batch(()=>te(this,Rt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Dn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Dn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=te(this,Rt).build(this,e);return r.isStaleByTime(bC(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Dn).catch(Dn)}fetchInfiniteQuery(t){return t.behavior=AC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Dn).catch(Dn)}ensureInfiniteQueryData(t){return t.behavior=AC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Rm.isOnline()?te(this,Ri).resumePausedMutations():Promise.resolve()}getQueryCache(){return te(this,Rt)}getMutationCache(){return te(this,Ri)}getDefaultOptions(){return te(this,Pi)}setDefaultOptions(t){De(this,Pi,t)}setQueryDefaults(t,e){te(this,Rl).set(Zu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...te(this,Rl).values()];let r={};return e.forEach(n=>{ed(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){te(this,Pl).set(Zu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...te(this,Pl).values()];let r={};return e.forEach(n=>{ed(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...te(this,Pi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Uw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===qw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...te(this,Pi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){te(this,Rt).clear(),te(this,Ri).clear()}},Rt=new WeakMap,Ri=new WeakMap,Pi=new WeakMap,Rl=new WeakMap,Pl=new WeakMap,ki=new WeakMap,kl=new WeakMap,jl=new WeakMap,y_),R9=y.createContext(void 0),P9=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(R9.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},td.apply(this,arguments)}var Oi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Oi||(Oi={}));const NC="popstate";function k9(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:l}=n.location;return Jy("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Pm(s)}return M9(e,r,null,t)}function Dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function IR(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j9(){return Math.random().toString(36).substr(2,8)}function IC(t,e){return{usr:t.state,key:t.key,idx:e}}function Jy(t,e,r,n){return r===void 0&&(r=null),td({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?mc(e):e,{state:r,key:e&&e.key||n||j9()})}function Pm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function mc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function M9(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Oi.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(td({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=Oi.Pop;let w=h(),_=w==null?null:w-u;u=w,c&&c({action:l,location:p.location,delta:_})}function m(w,_){l=Oi.Push;let b=Jy(p.location,w,_);u=h()+1;let C=IC(b,u),R=p.createHref(b);try{o.pushState(C,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}i&&c&&c({action:l,location:p.location,delta:1})}function v(w,_){l=Oi.Replace;let b=Jy(p.location,w,_);u=h();let C=IC(b,u),R=p.createHref(b);o.replaceState(C,"",R),i&&c&&c({action:l,location:p.location,delta:0})}function x(w){let _=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:Pm(w);return b=b.replace(/ $/,"%20"),Dt(_,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,_)}let p={get action(){return l},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(NC,f),c=w,()=>{s.removeEventListener(NC,f),c=null}},createHref(w){return e(s,w)},createURL:x,encodeLocation(w){let _=x(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:v,go(w){return o.go(w)}};return p}var RC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(RC||(RC={}));function D9(t,e,r){return r===void 0&&(r="/"),O9(t,e,r,!1)}function O9(t,e,r,n){let s=typeof e=="string"?mc(e):e,i=Gw(s.pathname||"/",r);if(i==null)return null;let o=RR(t);L9(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Y9(i);l=W9(o[c],u,n)}return l}function RR(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Dt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Ki([n,c.relativePath]),h=r.concat(c);i.children&&i.children.length>0&&(Dt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),RR(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:$9(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of PR(i.path))s(i,o,c)}),e}function PR(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=PR(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function L9(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:z9(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const F9=/^:[\w-]+$/,V9=3,B9=2,U9=1,q9=10,G9=-2,PC=t=>t==="*";function $9(t,e){let r=t.split("/"),n=r.length;return r.some(PC)&&(n+=G9),e&&(n+=B9),r.filter(s=>!PC(s)).reduce((s,i)=>s+(F9.test(i)?V9:i===""?U9:q9),n)}function z9(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function W9(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=kC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=kC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ki([i,f.pathname]),pathnameBase:X9(Ki([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ki([i,f.pathnameBase]))}return o}function kC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Q9(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,h,f)=>{let{paramName:m,isOptional:v}=h;if(m==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const x=l[f];return v&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Q9(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),IR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Y9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return IR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Gw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function H9(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?mc(t):t;return{pathname:r?r.startsWith("/")?r:K9(r,e):e,search:Z9(n),hash:e7(s)}}function K9(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function s0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J9(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function $w(t,e){let r=J9(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function zw(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=mc(t):(s=td({},t),Dt(!s.pathname||!s.pathname.includes("?"),s0("?","pathname","search",s)),Dt(!s.pathname||!s.pathname.includes("#"),s0("#","pathname","hash",s)),Dt(!s.search||!s.search.includes("#"),s0("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=H9(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Ki=t=>t.join("/").replace(/\/\/+/g,"/"),X9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Z9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,e7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function t7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kR=["post","put","patch","delete"];new Set(kR);const r7=["get",...kR];new Set(r7);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rd(){return rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rd.apply(this,arguments)}const Ww=y.createContext(null),n7=y.createContext(null),xo=y.createContext(null),Fp=y.createContext(null),wo=y.createContext({outlet:null,matches:[],isDataRoute:!1}),jR=y.createContext(null);function s7(t,e){let{relative:r}=e===void 0?{}:e;pc()||Dt(!1);let{basename:n,navigator:s}=y.useContext(xo),{hash:i,pathname:o,search:l}=DR(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Ki([n,o])),s.createHref({pathname:c,search:l,hash:i})}function pc(){return y.useContext(Fp)!=null}function ti(){return pc()||Dt(!1),y.useContext(Fp).location}function MR(t){y.useContext(xo).static||y.useLayoutEffect(t)}function Yn(){let{isDataRoute:t}=y.useContext(wo);return t?y7():i7()}function i7(){pc()||Dt(!1);let t=y.useContext(Ww),{basename:e,future:r,navigator:n}=y.useContext(xo),{matches:s}=y.useContext(wo),{pathname:i}=ti(),o=JSON.stringify($w(s,r.v7_relativeSplatPath)),l=y.useRef(!1);return MR(()=>{l.current=!0}),y.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=zw(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ki([e,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[e,n,o,i,t])}function DR(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=y.useContext(xo),{matches:s}=y.useContext(wo),{pathname:i}=ti(),o=JSON.stringify($w(s,n.v7_relativeSplatPath));return y.useMemo(()=>zw(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function o7(t,e){return a7(t,e)}function a7(t,e,r,n){pc()||Dt(!1);let{navigator:s}=y.useContext(xo),{matches:i}=y.useContext(wo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ti(),h;if(e){var f;let w=typeof e=="string"?mc(e):e;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||Dt(!1),h=w}else h=u;let m=h.pathname||"/",v=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=D9(t,{pathname:v}),p=h7(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Ki([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ki([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return e&&p?y.createElement(Fp.Provider,{value:{location:rd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Oi.Pop}},p):p}function l7(){let t=g7(),e=t7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),r?y.createElement("pre",{style:s},r):null,null)}const c7=y.createElement(l7,null);class u7 extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?y.createElement(wo.Provider,{value:this.props.routeContext},y.createElement(jR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function d7(t){let{routeContext:e,match:r,children:n}=t,s=y.useContext(Ww);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(wo.Provider,{value:e},n)}function h7(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||Dt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:v}=r,x=f.route.loader&&m[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let v,x=!1,p=null,w=null;r&&(v=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||c7,c&&(u<0&&m===0?(x=!0,w=null):u===m&&(x=!0,w=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),b=()=>{let C;return v?C=p:x?C=w:f.route.Component?C=y.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,y.createElement(d7,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:r!=null},children:C})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?y.createElement(u7,{location:r.location,revalidation:r.revalidation,component:p,error:v,children:b(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):b()},null)}var OR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(OR||{}),km=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(km||{});function f7(t){let e=y.useContext(Ww);return e||Dt(!1),e}function m7(t){let e=y.useContext(n7);return e||Dt(!1),e}function p7(t){let e=y.useContext(wo);return e||Dt(!1),e}function LR(t){let e=p7(),r=e.matches[e.matches.length-1];return r.route.id||Dt(!1),r.route.id}function g7(){var t;let e=y.useContext(jR),r=m7(km.UseRouteError),n=LR(km.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function y7(){let{router:t}=f7(OR.UseNavigateStable),e=LR(km.UseNavigateStable),r=y.useRef(!1);return MR(()=>{r.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,rd({fromRouteId:e},i)))},[t,e])}function jm(t){let{to:e,replace:r,state:n,relative:s}=t;pc()||Dt(!1);let{future:i,static:o}=y.useContext(xo),{matches:l}=y.useContext(wo),{pathname:c}=ti(),u=Yn(),h=zw(e,$w(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return y.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Jn(t){Dt(!1)}function v7(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Oi.Pop,navigator:i,static:o=!1,future:l}=t;pc()&&Dt(!1);let c=e.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:i,static:o,future:rd({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=mc(n));let{pathname:h="/",search:f="",hash:m="",state:v=null,key:x="default"}=n,p=y.useMemo(()=>{let w=Gw(h,c);return w==null?null:{location:{pathname:w,search:f,hash:m,state:v,key:x},navigationType:s}},[c,h,f,m,v,x,s]);return p==null?null:y.createElement(xo.Provider,{value:u},y.createElement(Fp.Provider,{children:r,value:p}))}function x7(t){let{children:e,location:r}=t;return o7(Xy(e),r)}new Promise(()=>{});function Xy(t,e){e===void 0&&(e=[]);let r=[];return y.Children.forEach(t,(n,s)=>{if(!y.isValidElement(n))return;let i=[...e,s];if(n.type===y.Fragment){r.push.apply(r,Xy(n.props.children,i));return}n.type!==Jn&&Dt(!1),!n.props.index||!n.props.children||Dt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Xy(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zy(){return Zy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zy.apply(this,arguments)}function w7(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function b7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function E7(t,e){return t.button===0&&(!e||e==="_self")&&!b7(t)}const C7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_7="6";try{window.__reactRouterVersion=_7}catch{}const T7="startTransition",jC=I_[T7];function A7(t){let{basename:e,children:r,future:n,window:s}=t,i=y.useRef();i.current==null&&(i.current=k9({window:s,v5Compat:!0}));let o=i.current,[l,c]=y.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=y.useCallback(f=>{u&&jC?jC(()=>c(f)):c(f)},[c,u]);return y.useLayoutEffect(()=>o.listen(h),[o,h]),y.createElement(v7,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const S7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xs=y.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,m=w7(e,C7),{basename:v}=y.useContext(xo),x,p=!1;if(typeof u=="string"&&N7.test(u)&&(x=u,S7))try{let C=new URL(window.location.href),R=u.startsWith("//")?new URL(C.protocol+u):new URL(u),L=Gw(R.pathname,v);R.origin===C.origin&&L!=null?u=L+R.search+R.hash:p=!0}catch{}let w=s7(u,{relative:s}),_=I7(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function b(C){n&&n(C),C.defaultPrevented||_(C)}return y.createElement("a",Zy({},m,{href:x||w,onClick:p||i?n:b,ref:r,target:c}))});var MC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(MC||(MC={}));var DC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(DC||(DC={}));function I7(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Yn(),u=ti(),h=DR(t,{relative:o});return y.useCallback(f=>{if(E7(f,r)){f.preventDefault();let m=n!==void 0?n:Pm(u)===Pm(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,n,s,r,t,i,o,l])}const FR=()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,R7=async(t,e)=>{try{console.log("loginUser: Starting login process for email:",t);const r=await F6(Ko,t,e);console.log("loginUser: Firebase Auth successful for UID:",r.user.uid);const n=await ca(ar(Tt,"users",r.user.uid));if(console.log("loginUser: User document exists:",n.exists()),n.exists()){const s=n.data();console.log("loginUser: User data retrieved, current session status:",s.isSessionValid);const i=FR(),o=Be.now();console.log("loginUser: Updating user document with new session"),await _d(ar(Tt,"users",r.user.uid),{sessionToken:i,lastLoginAt:o,isSessionValid:!0}),console.log("loginUser: User document updated with new session");const l={...s,sessionToken:i,lastLoginAt:o,isSessionValid:!0};return console.log("loginUser: Returning updated user data with session:",l.isSessionValid),l}return console.log("loginUser: User document not found, returning null"),null}catch(r){throw console.error("loginUser error:",r),r}},P7=async(t,e,r,n,s)=>{try{const i=await L6(Ko,e,r),o=FR(),l=Be.now(),c={id:i.user.uid,name:t,email:e,feedback:n,purchases:0,isRewardReady:!1,createdAt:l,rewards:[],role:"customer",currentOfferId:"default_offer",currentOfferProgress:0,sessionToken:o,lastLoginAt:l,isSessionValid:!0};try{await Ap(ar(Tt,"users",i.user.uid),c),(await ca(ar(Tt,"users",i.user.uid))).exists()?console.log(" User document verified in Firestore"):console.error(" User document not found after creation!")}catch(u){throw console.error("Firestore error during user creation:",u),u}return c}catch(i){throw console.error("registerUser error:",i),i}},k7=async()=>{try{const t=Ko.currentUser;t&&await _d(ar(Tt,"users",t.uid),{isSessionValid:!1,sessionToken:null}),await eC(Ko)}catch(t){console.error("Logout error:",t),await eC(Ko)}},j7=t=>q6(Ko,t),M7=(t,e)=>{const r=cc(Tt,"users"),n=_p(r,yw("createdAt","desc"));return Sp(n,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({...l,id:o.id})}),t(i)},e)},D7=(t,e,r)=>{const n=ar(Tt,"users",t);return Sp(n,s=>{s.exists()?e(s.data()):e(null)},r)},O7=async(t,e,r)=>{if(!t||t.role!=="super_admin")throw new Error("Only super admins can update user roles");const n=ar(Tt,"users",e);await _d(n,{role:r})},L7=async(t,e,r,n)=>{var R,L;const s=e&&r;if(!t&&!s)return;const i=s?ar(Tt,"users",r):ar(Tt,"users",t.id),o=await ca(i);if(!o.exists())throw new Error("User not found");const l=o.data(),c=n||l.currentOfferId;if(!c)throw new Error("No offer specified and user has no active offer assigned");const u=ar(Tt,"offers",c),h=await ca(u);if(!h.exists())throw new Error("Specified offer not found");const f=h.data();if(!f.isActive)throw new Error("Specified offer is no longer active");const m=f.stampRequirement,v=(R=l.completedRewards)==null?void 0:R.find(F=>{var I,S,N;return((I=F.offerSnapshot)==null?void 0:I.offerId)===c&&((S=F.scanHistory)==null?void 0:S.length)<((N=F.offerSnapshot)==null?void 0:N.stampRequirement)&&!F.claimedAt});let x=0,p=v;if(v){if(x=((L=v.scanHistory)==null?void 0:L.length)||0,x>=m)throw new Error("User has already completed this offer")}else p={rewardId:`reward_${Date.now()}`,claimedAt:null,scanHistory:[],rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription,offerSnapshot:{offerId:f.offerId,offerName:f.name,description:f.description,stampRequirement:f.stampRequirement,rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription},createdAt:Be.now()};x+(f.stampsPerScan||1);const w={scannedBy:(t==null?void 0:t.email)||"unknown",timestamp:Be.now(),stampsEarned:f.stampsPerScan||1},_={...p,scanHistory:[...p.scanHistory||[],w]};let b=l.completedRewards||[];v?b=b.map(F=>F.rewardId===v.rewardId?_:F):b=[...b,_];const C=f.stampsPerScan||1;await _d(i,{lastScanAt:Be.now(),completedRewards:b,purchases:FV(C)})},F7=async(t,e,r,n)=>{const s=e&&r;if(!t&&!s)return;const i=s?ar(Tt,"users",r):ar(Tt,"users",t.id),o=await ca(i);if(!o.exists())throw new Error("User not found");const c=o.data().completedRewards||[],u=c.find(f=>f.rewardId===n);if(!u)throw new Error("Reward not found");if(u.claimedAt)throw new Error("Reward has already been redeemed");const h=c.map(f=>f.rewardId===n?{...f,claimedAt:Be.now()}:f);await _d(i,{completedRewards:h})},V7=(t,e)=>{const r=ar(Tt,"settings","global");return Sp(r,n=>{if(n.exists())t(n.data());else{const s={purchaseLimit:5,descriptionMessage:"Complete purchases to unlock your reward!",rewardType:"percentage",rewardValue:"20",rewardDescription:"20% OFF",updatedAt:Be.now(),updatedBy:"system"};Ap(r,s),t(s)}},e)},B7=5,U7="Welcome Offer",q7="Complete purchases to unlock your reward!",G7=5,$7="percentage",z7="20",W7="20% OFF",Q7=async t=>{cc(Tt,"offers");const e={offerId:"default_offer",name:U7,description:q7,stampRequirement:G7,stampsPerScan:1,rewardType:$7,rewardValue:z7,rewardDescription:W7,isActive:!0,createdAt:Be.now(),updatedAt:Be.now(),createdBy:t.email||"system",expiresAt:null};await Ap(ar(Tt,"offers","default_offer"),e)},VR=async()=>{const t=cc(Tt,"offers"),e=await xw(t);return e.empty?[]:e.docs.map(r=>r.data())},BR=async(t,e)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can create offers");if(!e.name||!e.description||!e.rewardValue||!e.rewardDescription)throw new Error("Missing required fields");if(e.stampRequirement<1||e.stampsPerScan<1)throw new Error("Stamp requirements must be at least 1");const r=`offer_${Date.now()}`,n={...e,offerId:r,createdAt:Be.now(),updatedAt:Be.now(),createdBy:t.email||"system",stampsPerScan:e.stampsPerScan||1,expiresAt:e.expiresAt||null};await Ap(ar(Tt,"offers",r),n)};function bo(t,e){return async(...r)=>{try{return await t(...r)}catch(n){throw console.error(`${e} error:`,n),n}}}const Y7=bo(R7,"loginUser"),H7=bo(P7,"registerUser"),OC=bo(k7,"logoutUser"),K7=j7,J7=M7,X7=D7,Z7=bo(O7,"updateUserRole"),eq=bo(L7,"addPurchase"),tq=bo(F7,"redeemReward"),rq=V7,yu=VR,nq=bo(BR,"createOffer"),LC=bo(Q7,"createDefaultOffer"),UR=y.createContext(null),sq=({children:t})=>{const[e,r]=y.useState(null),[n,s]=y.useState(!0),[i,o]=y.useState(null),[l,c]=y.useState(!0),[u,h]=y.useState([]),[f,m]=y.useState(!1);y.useEffect(()=>{const b=rq(C=>{o(C),c(!1)},C=>{console.error("Error listening to settings:",C),c(!1)});return()=>b()},[]),y.useEffect(()=>{if(!e||e.role!=="admin"&&e.role!=="super_admin"){h([]);return}m(!0);const b=J7(C=>{h(C),m(!1)},C=>{console.error("Error listening to all users:",C),m(!1)});return()=>b()},[e==null?void 0:e.role]),y.useEffect(()=>{let b=null,C=!1;const R=K7(async F=>{C||(C=!0),F&&typeof F=="object"&&F!==null&&"uid"in F?(console.log("Firebase Auth user detected, setting up real-time listener for:",F.uid),setTimeout(()=>{b=X7(F.uid,I=>{console.log("Real-time user data received:",{uid:I.id,isSessionValid:I.isSessionValid,hasSessionToken:!!I.sessionToken}),I.isSessionValid===!1?(console.log("Session explicitly invalidated, signing out user"),r(null),s(!1),OC()):(console.log("Accepting user data during login, session status:",I.isSessionValid),r(I),s(!1))},I=>{console.error("Error listening to user data:",I),r(null),s(!1)})},500)):(r(null),s(!1),b&&(b(),b=null))}),L=setTimeout(()=>{C||s(!1)},1e4);return()=>{R&&R(),b&&b(),clearTimeout(L)}},[]);const v=async(b,C)=>{console.log("Login attempt started for:",b);try{const R=await Y7(b,C);return console.log("Login successful, user data received:",!!R),R}catch(R){throw console.error("Login failed:",R),R}},x=(b,C,R,L)=>H7(b,C,R,L,null),p=(b,C,R)=>eq(e,b,C,R),w=(b,C)=>Z7(e,b,C),_=async()=>{console.log("Logout called from useAuth hook"),await OC(),r(null)};return a.jsx(UR.Provider,{value:{user:e,loading:n,settings:i,settingsLoading:l,allUsers:u,allUsersLoading:f,login:v,register:x,addPurchase:p,logout:_,updateUserRole:w},children:t})},vs=()=>{const t=y.useContext(UR);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Bc=({children:t,requiredRole:e})=>{const{user:r,loading:n}=vs(),s=ti();if(n)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Tx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!r)return a.jsx(jm,{to:"/login",state:{from:s},replace:!0});if(e){const i=r.role,o={customer:1,admin:2,super_admin:3};if(o[i]<o[e])return a.jsx(jm,{to:"/dashboard",replace:!0})}return a.jsx(a.Fragment,{children:t})},FC=({children:t})=>{const{user:e,loading:r}=vs();return r?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Tx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):e?a.jsx(jm,{to:"/dashboard",replace:!0}):a.jsx(a.Fragment,{children:t})},iq=Ex("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),je=y.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const o=n?na:"button";return a.jsx(o,{className:rt(iq({variant:e,size:r,className:t})),ref:i,...s})});je.displayName="Button";const oq=()=>{const[t,e]=y.useState(!1),[r,n]=y.useState(!1),s=()=>{const i=window.matchMedia("(display-mode: standalone)").matches,o=window.matchMedia("(display-mode: fullscreen)").matches,l=window.matchMedia("(display-mode: minimal-ui)").matches,c=navigator.standalone===!0;return i||o||l||c};return y.useEffect(()=>{s()&&n(!0);const o=window.matchMedia("(display-mode: standalone)"),l=c=>{c.matches&&n(!0)};return o.addEventListener("change",l),()=>{o.removeEventListener("change",l)}},[]),r?null:a.jsxs("div",{className:"fixed top-4 right-4 z-40",children:[a.jsxs(je,{onClick:()=>e(!t),size:"sm",variant:"outline",className:"bg-white/90 backdrop-blur-sm border-gray-200 hover:bg-white",children:[a.jsx(aO,{className:"w-4 h-4 mr-2"}),"Install Guide"]}),t&&a.jsxs("div",{className:"absolute top-12 right-0 w-80 bg-white rounded-lg shadow-lg border border-gray-200 p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"How to Install"}),a.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Chrome/Edge (Desktop):"}),a.jsx("p",{children:'Look for the install icon (plus sign) in your browser address bar, or use the menu (three dots) and select "Install app"'})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Chrome/Edge (Mobile):"}),a.jsx("p",{children:'Tap the menu (three dots) and select "Add to Home screen" or "Install app"'})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Safari (Mobile):"}),a.jsx("p",{children:'Tap the Share button (square with arrow) and select "Add to Home Screen"'})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Safari (Desktop):"}),a.jsx("p",{children:'Use the Share button in the toolbar and select "Add to Dock"'})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Firefox:"}),a.jsx("p",{children:'Use the menu (three lines) and select "Install App" or "Add to Home Screen"'})]})]}),a.jsx(je,{onClick:()=>e(!1),size:"sm",className:"mt-3 w-full",children:"Got it!"})]})]})},aq=()=>{const[t,e]=y.useState(!1),r=()=>{const n=window.matchMedia("(display-mode: standalone)").matches,s=window.matchMedia("(display-mode: fullscreen)").matches,i=window.matchMedia("(display-mode: minimal-ui)").matches,o=navigator.standalone===!0;return n||s||i||o};return y.useEffect(()=>{r()&&e(!0);const s=window.matchMedia("(display-mode: standalone)"),i=o=>{o.matches&&e(!0)};return s.addEventListener("change",i),()=>{s.removeEventListener("change",i)}},[]),a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/bgCover.jpeg)"}}),a.jsx("div",{className:"absolute inset-0 bg-black/60"}),a.jsxs("div",{className:"absolute inset-0 opacity-20",children:[a.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-red-700 rounded-full blur-3xl animate-pulse delay-500"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6 text-center",children:[a.jsx("div",{children:a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("img",{src:"/logo.png",alt:"Vape Master Logo",className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-48 lg:h-48 object-contain"})})}),a.jsxs("div",{className:"mb-12 max-w-md",children:[a.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-semibold text-white mb-4",children:"Loyalty Program"}),a.jsx("p",{className:"text-gray-300 text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed",children:"Join our loyalty program and get rewards! Earn points with every purchase and unlock exclusive benefits."})]}),a.jsxs("div",{className:"space-y-4 w-full max-w-sm",children:[a.jsx(Xs,{to:"/register",className:"block",children:a.jsx(je,{className:"w-full py-4 text-lg font-semibold bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"Join Now"})}),a.jsx(Xs,{to:"/login",className:"block",children:a.jsx(je,{variant:"outline",className:"w-full py-4 text-lg font-semibold bg-transparent border-2 border-red-500 text-red-400 hover:bg-red-500 hover:text-white transition-all duration-300 transform hover:scale-105",children:"Already a Member?"})})]}),!t&&a.jsx("div",{className:"mt-8",children:a.jsx(oq,{})}),a.jsx("div",{className:"absolute bottom-6 text-center text-gray-500",children:a.jsx("p",{className:"text-sm",children:"Smoke responsibly  21+ only"})})]})]})},lq=()=>{const{user:t,loading:e}=vs();return e?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Tx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):t?a.jsx(jm,{to:"/dashboard",replace:!0}):a.jsx(aq,{})},Ct=y.forwardRef(({className:t,type:e,...r},n)=>a.jsx("input",{type:e,className:rt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Ct.displayName="Input";var cq="Label",qR=y.forwardRef((t,e)=>a.jsx(qe.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));qR.displayName=cq;var GR=qR;const uq=Ex("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),en=y.forwardRef(({className:t,...e},r)=>a.jsx(GR,{ref:r,className:rt(uq(),t),...e}));en.displayName=GR.displayName;const Vp=y.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:rt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Vp.displayName="Textarea";function mt(t,e){const r=window;typeof window<"u"&&typeof r.gtag=="function"&&r.gtag("event",t,e||{})}const dq=()=>{const[t,e]=y.useState(""),[r,n]=y.useState(""),[s,i]=y.useState(""),[o,l]=y.useState(""),[c,u]=y.useState(!1),{register:h,user:f,loading:m}=vs(),v=Yn();y.useEffect(()=>{mt("page_view",{page:"Register"})},[]);const x=async p=>{if(p.preventDefault(),!t.trim()||!r.trim()||!o.trim()){lt({title:"Missing Information",description:"Please fill in your name, email, and password.",variant:"destructive"}),mt("register_missing_info");return}u(!0);try{mt("register_attempt",{email:r}),await h(t.trim(),r.trim(),o.trim(),s.trim()||null),lt({title:"Welcome to Vape Master!",description:"Your loyalty card is ready!"}),mt("register_success",{user_id:f.id,user_role:f.role}),v("/dashboard")}catch(w){let _="Please try again.";w&&typeof w=="object"&&"message"in w&&typeof w.message=="string"&&(_=w.message),lt({title:"Registration Failed",description:_,variant:"destructive"}),mt("register_failed",{email:r,error:_})}finally{u(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"p-6",children:a.jsx(Xs,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(Zl,{className:"w-6 h-6"})})}),a.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:a.jsx("div",{className:"w-full max-w-md",children:a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Join the Club"}),a.jsx("p",{className:"text-gray-400",children:"Create your loyalty account"})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"name",className:"text-white",children:"Full Name"}),a.jsx(Ct,{id:"name",type:"text",value:t,onChange:p=>e(p.target.value),placeholder:"Enter your full name",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"email",className:"text-white",children:"Email"}),a.jsx(Ct,{id:"email",type:"email",value:r,onChange:p=>n(p.target.value),placeholder:"Enter your email",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"password",className:"text-white",children:"Password"}),a.jsx(Ct,{id:"password",type:"password",value:o,onChange:p=>l(p.target.value),placeholder:"Create a password",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"feedback",className:"text-white",children:"Feedback (Optional)"}),a.jsx(Vp,{id:"feedback",value:s,onChange:p=>i(p.target.value),placeholder:"Tell us about your experience...",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 min-h-[100px]"})]}),a.jsx(je,{type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold",disabled:c,children:c?"Creating Account...":"Create Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",a.jsx(Xs,{to:"/login",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign in"})]})})]})})})]})]})},hq=()=>{const[t,e]=y.useState(""),[r,n]=y.useState(""),[s,i]=y.useState(!1),{login:o,user:l,loading:c}=vs(),u=Yn(),h=ti();y.useEffect(()=>{mt("page_view",{page:"Login"})},[]);const f=async m=>{var v,x;if(m.preventDefault(),!t.trim()||!r.trim()){lt({title:"Missing Information",description:"Please enter your email and password.",variant:"destructive"}),mt("login_missing_info");return}i(!0);try{mt("login_attempt",{email:t});const p=await o(t.trim(),r.trim());if(p){lt({title:"Welcome back!",description:`Good to see you again, ${p.name}!`}),mt("login_success",{user_id:p.id,user_role:p.role});const w=((x=(v=h.state)==null?void 0:v.from)==null?void 0:x.pathname)||"/dashboard";u(w,{replace:!0})}else lt({title:"User Not Found",description:"No account found with this email. Please register first.",variant:"destructive"}),mt("login_user_not_found",{email:t})}catch(p){let w="Please try again.";p&&typeof p=="object"&&"message"in p&&typeof p.message=="string"&&(w=p.message),lt({title:"Login Failed",description:w,variant:"destructive"}),mt("login_failed",{email:t,error:w})}finally{i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"p-6",children:a.jsx(Xs,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(Zl,{className:"w-6 h-6"})})}),a.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:a.jsx("div",{className:"w-full max-w-md",children:a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-400",children:"Sign in to your loyalty account"})]}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"email",className:"text-white",children:"Email"}),a.jsx(Ct,{id:"email",type:"email",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your email",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(en,{htmlFor:"password",className:"text-white",children:"Password"}),a.jsx(Ct,{id:"password",type:"password",value:r,onChange:m=>n(m.target.value),placeholder:"Enter your password",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),a.jsx(je,{type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold",disabled:s,children:s?"Signing In...":"Sign In"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",a.jsx(Xs,{to:"/register",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign up"})]})})]})})})]})]})};function fq(){const{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:o}=vs(),[l,c]=y.useState([]),u=Yn(),[h,f]=y.useState(!1),m=y.useRef(null),[v,x]=y.useState(!1),[p,w]=y.useState(0),[_,b]=y.useState(null),[C,R]=y.useState("progress"),L=(t==null?void 0:t.purchaseLimit)||(s==null?void 0:s.purchaseLimit)||B7;y.useEffect(()=>{!e&&!t&&u("/login")},[t,e,u]),y.useEffect(()=>{t&&(async()=>{try{const D=await yu();c(D)}catch(D){console.error("Error loading offers:",D)}})()},[t]),y.useEffect(()=>{t&&(b(new Date),m.current!==null&&m.current!==t.purchases&&t.purchases-m.current>0&&(lt({title:"Purchase Updated! ",description:`Your purchase count was updated via QR scan. New total: ${t.purchases}/${L}`}),x(!0),w(D=>D+1),setTimeout(()=>x(!1),2500),t.isRewardReady&&m.current<L&&setTimeout(()=>{lt({title:"Reward Unlocked! ",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)},1e3)),m.current===0&&t.purchases===1&&(f(!0),setTimeout(()=>f(!1),3e3)),m.current=t.purchases)},[t==null?void 0:t.purchases,t==null?void 0:t.isRewardReady,u,L]);const F=Math.max(0,L-((t==null?void 0:t.purchases)||0));return{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:o,offers:l,navigate:u,showFirstConfetti:h,showConfetti:v,confettiKey:p,lastUpdateTime:_,activeTab:C,setActiveTab:R,userPurchaseLimit:L,purchasesRemaining:F,handleAddPurchase:()=>{!t||t.purchases>=L||(r(),x(!0),w(j=>j+1),setTimeout(()=>x(!1),2500),t.purchases+1>=L?(lt({title:"Reward Unlocked! ",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)):lt({title:"Purchase Added!",description:`${L-1-t.purchases} more purchases until your next reward!`}))},handleLogout:()=>{n(),lt({title:"Logged Out",description:"Thanks for visiting Vape Master!"}),u("/")},handleOfferSelection:async j=>{try{console.log("Selecting offer:",j)}catch(D){console.error("Error selecting offer:",D)}}}}var Af={linear:function(t,e,r,n){var s=r-e;return s*t/n+e},easeInQuad:function(t,e,r,n){var s=r-e;return s*(t/=n)*t+e},easeOutQuad:function(t,e,r,n){var s=r-e;return-s*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t+e},easeOutCubic:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,r,n){var s=r-e;return-s*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,r,n){var s=r-e;return-s*Math.cos(t/n*(Math.PI/2))+s+e},easeOutSine:function(t,e,r,n){var s=r-e;return s*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,r,n){var s=r-e;return-s/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,r,n){var s=r-e;return t==0?e:s*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,r,n){var s=r-e;return t==n?e+s:s*(-Math.pow(2,-10*t/n)+1)+e},easeInOutExpo:function(t,e,r,n){var s=r-e;return t===0?e:t===n?e+s:(t/=n/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,r,n){var s=r-e;return-s*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,r,n){var s=r-e;return s*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,r,n){var s=r-e,i,o,l;return l=1.70158,o=0,i=s,t===0?e:(t/=n)===1?e+s:(o||(o=n*.3),i<Math.abs(s)?(i=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,r,n){var s=r-e,i,o,l;return l=1.70158,o=0,i=s,t===0?e:(t/=n)===1?e+s:(o||(o=n*.3),i<Math.abs(s)?(i=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*n-l)*(2*Math.PI)/o)+s+e)},easeInOutElastic:function(t,e,r,n){var s=r-e,i,o,l;return l=1.70158,o=0,i=s,t===0?e:(t/=n/2)===2?e+s:(o||(o=n*(.3*1.5)),i<Math.abs(s)?(i=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/o)*.5+s+e)},easeInBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),(t/=n/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,r,n){var s=r-e,i;return i=Af.easeOutBounce(n-t,0,s,n),s-i+e},easeOutBounce:function(t,e,r,n){var s=r-e;return(t/=n)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,r,n){var s=r-e,i;return t<n/2?(i=Af.easeInBounce(t*2,0,s,n),i*.5+e):(i=Af.easeOutBounce(t*2-n,0,s,n),i*.5+s*.5+e)}},mq=Af;function pq(t){return t*Math.PI/180}function Hr(t,e){return t+Math.random()*(e-t)}function gq(t,e){return Math.floor(t+Math.random()*(e-t+1))}var vu;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(vu||(vu={}));var bi;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(bi||(bi={}));const yq=1e3/60;class vq{constructor(e,r,n,s){this.getOptions=r;const{colors:i,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=e,this.x=n,this.y=s,this.w=Hr(5,20),this.h=Hr(5,20),this.radius=Hr(5,10),this.vx=typeof o=="number"?Hr(-o,o):Hr(o.min,o.max),this.vy=typeof l=="number"?Hr(-l,0):Hr(l.min,l.max),this.shape=gq(0,2),this.angle=pq(Hr(0,360)),this.angularSpin=Hr(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=Hr(0,1),this.rotationDirection=Hr(0,1)?bi.Positive:bi.Negative}update(e){const{gravity:r,wind:n,friction:s,opacity:i,drawShape:o}=this.getOptions(),l=e/yq;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=r*l,this.vx+=n*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===bi.Positive?this.rotationDirection=bi.Negative:this.rotateY<=-1&&this.rotationDirection===bi.Negative&&(this.rotationDirection=bi.Positive);const c=.1*this.rotationDirection*l;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case vu.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case vu.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case vu.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class xq{constructor(e,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Hr(this.x,this.w+this.x),i=Hr(this.y,this.h+this.y);return new vq(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:l,lastNumberOfPieces:c}=this,{run:u,recycle:h,numberOfPieces:f,debug:m,tweenFunction:v,tweenDuration:x}=this.getOptions();if(!u)return!1;const p=this.particles.length,w=h?p:l;if(w<f){c!==f&&(this.tweenProgress=0,this.tweenFrom=w,this.lastNumberOfPieces=f),this.tweenProgress=Math.min(x,Math.max(0,this.tweenProgress+s));const _=v(this.tweenProgress,this.tweenFrom,f,x),b=Math.round(_-w);for(let C=0;C<b;C++)this.particles.push(this.getParticle());this.particlesGenerated+=b}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${p}`,i.width-10,i.height-20));for(let _=this.particles.length-1;_>=0;_--){const b=this.particles[_];b.update(s),(b.y>i.height||b.y<-100||b.x>i.width+100||b.x<-100)&&(h&&w<=f?this.particles[_]=this.getParticle():this.removeParticleAt(_))}return p>0||w<f},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=r}}const Qw={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:mq.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class wq{constructor(e,r){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...Qw,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:l},canvas:c,context:u}=this,h=Math.min(s-this.lastFrameTime,50);if(l&&h<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?h%l:0),i&&(u.fillStyle="white",u.clearRect(0,0,c.width,c.height)),this.generator.animate(h)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new xq(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(e){var s,i;const r=(s=this._options)==null?void 0:s.run,n=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&n===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&r===!1&&this.update()}}const bq=Y.createRef();class Yw extends Y.Component{constructor(e){super(e),this.canvas=Y.createRef(),this.canvas=e.canvasRef||bq}componentDidMount(){if(this.canvas.current){const e=i0(this.props)[0];this.confetti=new wq(this.canvas.current,e)}}componentDidUpdate(){const e=i0(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,r]=i0(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return a.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...r,style:n})}}Yw.defaultProps={...Qw};Yw.displayName="ReactConfetti";function i0(t){const e={},r={},n={},s=[...Object.keys(Qw),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const l=t[o];s.includes(o)?e[o]=l:i.includes(o)?i[o]=l:n[o]=l}return[e,n,r]}const $R=Y.forwardRef((t,e)=>a.jsx(Yw,{canvasRef:e,...t})),Eq=({title:t,onBack:e,actions:r})=>a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:a.jsxs("div",{className:"p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[e&&a.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:t})]}),a.jsx("div",{className:"flex gap-2",children:r})]})}),Cq=({reward:t,isOpen:e,onClose:r})=>!e||!t?null:a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gray-900 border border-red-900/30 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-red-900/30",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Reward Details"}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[a.jsxs("p",{children:["Reward ID: ",t.rewardId]}),t.claimedAt&&a.jsxs("p",{className:"text-green-600",children:["Claimed:"," ",t.claimedAt.toDate?new Date(t.claimedAt.toDate()).toLocaleString():""]})]})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:t.scanHistory&&t.scanHistory.length>0?a.jsxs("div",{children:[a.jsxs("h4",{className:"text-lg font-semibold text-white mb-4",children:["Scan History (",t.scanHistory.length," scans)"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b justify-between border-gray-700 md:table-row flex flex-col md:flex-row",children:[a.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[a.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scan #"}),a.jsx("span",{className:"hidden md:block",children:"Scan #"})]}),a.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[a.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scanned By"}),a.jsx("span",{className:"hidden md:block",children:"Scanned By"})]}),a.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[a.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Date & Time"}),a.jsx("span",{className:"hidden md:block",children:"Date & Time"})]})]})}),a.jsx("tbody",{children:t.scanHistory.map((n,s)=>{var i,o;return a.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50 md:table-row flex flex-col md:flex-row justify-center text-center md:text-left",children:[a.jsxs("td",{className:"px-4 py-3 font-medium flex flex-col md:table-cell items-center md:items-start",children:[a.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scan #"}),s+1]}),a.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[a.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scanned By"}),n.scannedBy]}),a.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[a.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Date & Time"}),(i=n.timestamp)!=null&&i.toDate?new Date(n.timestamp.toDate()).toLocaleString():""]})]},((o=n.timestamp)==null?void 0:o.seconds)+n.scannedBy)})})]})})]}):a.jsx("div",{className:"text-center text-gray-400 py-8",children:a.jsx("p",{children:"No scan history available for this reward."})})}),a.jsx("div",{className:"p-6 border-t border-red-900/30",children:a.jsx("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Close"})})]})}),_q=({rewards:t,onRewardClick:e})=>!t||t.length===0?a.jsx("div",{className:"text-gray-400 text-sm",children:"No rewards claimed."}):a.jsxs("div",{className:"space-y-4 mt-2 mb-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-white",children:"Claimed Rewards"}),t.slice().reverse().map((r,n)=>a.jsxs("div",{className:"border border-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-800/50 transition-colors",onClick:()=>e(r),children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[a.jsxs("h5",{className:"text-sm font-medium text-white",children:["Reward #",t.length-n," - ",r.rewardId]}),a.jsxs("span",{className:"text-xs text-green-500 text-gray-400",children:["Claimed:"," ",r.claimedAt&&r.claimedAt.toDate?new Date(r.claimedAt.toDate()).toLocaleString():""]})]}),r.scanHistory&&r.scanHistory.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsxs("h6",{className:"text-xs font-medium text-gray-300 mb-1",children:["Scans for this reward: ",r.scanHistory.length," scans"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Click to view detailed scan history"})]})]},r.rewardId))]}),Tq=({allUsers:t})=>{const[e,r]=y.useState(null),[n,s]=y.useState(!1);return a.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-none p-6 min-h-[460px] flex flex-col justify-start -mt-0 shadow-2xl",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Rewards History"}),a.jsx("div",{className:"space-y-2",children:t.filter(i=>i.role==="customer").map(i=>{var o,l;return a.jsxs("div",{className:"bg-gray-800/60 rounded-lg p-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[a.jsxs("span",{className:"font-semibold text-white",children:[i.name," (",i.email,")"]}),a.jsxs("span",{className:"text-xs text-gray-400",children:["Total Scans: ",((l=(o=i.currentReward)==null?void 0:o.scanHistory)==null?void 0:l.length)||0]})]}),a.jsx(_q,{rewards:i.rewards,onRewardClick:c=>{r(c),s(!0)}})]},i.id)})}),a.jsx(Cq,{reward:e,isOpen:n,onClose:()=>{s(!1),r(null)}})]})},Aq=({users:t,loading:e})=>{const r=s=>{switch(s){case"super_admin":return a.jsx(hy,{className:"w-4 h-4 text-yellow-500"});case"admin":return a.jsx(dS,{className:"w-4 h-4 text-blue-500"});default:return a.jsx(ls,{className:"w-4 h-4 text-gray-400"})}},n=s=>{switch(s){case"super_admin":return"text-yellow-400";case"admin":return"text-blue-400";default:return"text-gray-400"}};return e?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}),a.jsx("span",{className:"ml-3 text-gray-400",children:"Loading users..."})]}):t.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ls,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"No users found"})]}):a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map(s=>{var l;const i=s.purchaseLimit||5,o=Math.min(100,s.purchases/i*100);return a.jsxs("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-lg p-4 hover:bg-gray-800/80 transition-all duration-200",children:[a.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[r(s.role),a.jsx("span",{className:`text-sm font-medium ${n(s.role)}`,children:(s.role||"").replace("_"," ").toUpperCase()})]}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"text-sm text-gray-400",children:s.lastScanAt?new Date(s.lastScanAt.toDate()).toLocaleDateString():"Never"})})]}),a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-1",children:[a.jsx("span",{className:"font-semibold text-white",children:s.name}),a.jsx("span",{className:"text-sm text-gray-400",children:s.email})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Progress:"}),a.jsxs("span",{className:"text-white font-medium",children:[s.purchases,"/",i]})]}),a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${o>=100?"bg-green-500":"bg-red-500"}`,style:{width:`${o}%`}})}),a.jsxs("div",{className:"flex items-center flex-wrap justify-between text-xs text-gray-500",children:[a.jsxs("span",{children:[((l=s.rewards)==null?void 0:l.length)||0," rewards claimed"]}),a.jsx("span",{children:s.isRewardReady?" Ready!":`${i-s.purchases} to go`})]})]})]},s.id)})})},Sq=({activeTab:t,onTabChange:e,userRole:r})=>{const n=[{key:"progress",label:"Progress",icon:as,description:"Track your stamps & rewards",color:"blue",activeColor:"from-blue-500 to-blue-600",inactiveColor:"from-blue-400/20 to-blue-500/20",borderColor:"border-blue-500/30",textColor:"text-blue-300",hoverColor:"hover:from-blue-400/30 hover:to-blue-500/30"},{key:"offers",label:"Offers",icon:Bt,description:"Available loyalty offers",color:"green",activeColor:"from-green-500 to-green-600",inactiveColor:"from-green-400/20 to-green-500/20",borderColor:"border-green-500/30",textColor:"text-green-300",hoverColor:"hover:from-green-400/30 hover:to-green-500/30"},{key:"card",label:"Rewards",icon:Ul,description:"Your earned rewards",color:"purple",activeColor:"from-purple-500 to-purple-600",inactiveColor:"from-purple-400/20 to-purple-500/20",borderColor:"border-purple-500/30",textColor:"text-purple-300",hoverColor:"hover:from-purple-400/30 hover:to-purple-500/30"}];return a.jsx("div",{className:"bg-gradient-to-r from-gray-900/80 via-gray-800/80 to-gray-900/80 border border-gray-700/50 rounded-xl p-3 backdrop-blur-sm shadow-lg",children:a.jsx("div",{className:"flex space-x-2 h-24",children:n.map(s=>{const i=s.icon,o=t===s.key;return a.jsxs("button",{onClick:()=>e(s.key),className:`flex-1 flex flex-col items-center justify-center rounded-lg transition-all duration-300 ease-out group relative overflow-hidden min-h-[88px] ${o?`bg-gradient-to-b ${s.activeColor} border-2 ${s.borderColor} text-white shadow-lg shadow-${s.color}-500/25`:`bg-gradient-to-b ${s.inactiveColor} border-2 border-transparent text-gray-400 ${s.hoverColor} hover:border-${s.color}-500/30 hover:text-${s.color}-300`}`,children:[a.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?`bg-gradient-to-b from-${s.color}-500/10 to-${s.color}-400/10`:"bg-transparent"}`}),o&&a.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-${s.color}-400 to-${s.color}-500`}),a.jsx(i,{className:`w-6 h-6 mb-2 transition-all duration-300 ${o?"text-white scale-110 drop-shadow-sm relative z-10":`group-hover:scale-110 group-hover:text-${s.color}-300`}`}),a.jsx("span",{className:`text-sm font-bold transition-all duration-300 mb-1 ${o?"text-white font-extrabold drop-shadow-lg relative z-10":"text-gray-300 group-hover:text-white"}`,children:s.label}),a.jsx("span",{className:`text-xs text-center transition-all duration-300 leading-tight ${o?"text-white font-semibold drop-shadow-lg relative z-10":"text-gray-400 group-hover:text-gray-200"}`,children:s.description}),a.jsx("div",{className:`absolute inset-0 rounded-lg transition-all duration-300 ${o?`ring-2 ring-${s.color}-500/30`:`group-hover:ring-1 group-hover:ring-${s.color}-500/20`}`}),o&&a.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-b from-${s.color}-500/5 to-transparent`})]},s.key)})})})},Nq=({user:t,userPurchaseLimit:e,settings:r,purchasesRemaining:n,onViewReward:s,currentOffer:i})=>{var C,R,L;const[o,l]=y.useState({inProgress:!0,completed:!1}),[c,u]=y.useState(!1),h=t.purchases||0,f=((C=t.completedRewards)==null?void 0:C.filter(F=>{var I,S;return((I=F.scanHistory)==null?void 0:I.length)>=((S=F.offerSnapshot)==null?void 0:S.stampRequirement)}))||[],m=((R=t.completedRewards)==null?void 0:R.filter(F=>{var I,S;return((I=F.scanHistory)==null?void 0:I.length)<((S=F.offerSnapshot)==null?void 0:S.stampRequirement)}))||[],v=f.filter(F=>!F.claimedAt),x=((L=t.completedRewards)==null?void 0:L.reduce((F,I)=>{var S;return F+(((S=I.scanHistory)==null?void 0:S.length)||0)},0))||0,p=Math.max(h,x),w=3,_=c?m:m.slice(0,w);c||f.slice(0,w);const b=F=>{l(I=>({...I,[F]:!I[F]}))};return a.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-xl p-6 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsxs("div",{className:"flex items-center justify-center mb-3",children:[a.jsx(py,{className:"w-8 h-8 text-yellow-400 mr-3"}),a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Life Stamps"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-5xl font-black text-white drop-shadow-[0_2px_8px_#000a] mb-2",children:p}),a.jsx("div",{className:"text-lg text-gray-300 font-medium",children:"Total Stamps Collected Since Joining"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[a.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-blue-400",children:f.length}),a.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards Completed"})]}),a.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-400",children:m.length}),a.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards in Progress"})]}),a.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-yellow-400",children:v.length}),a.jsx("div",{className:"text-gray-300 text-xs",children:"Ready to Redeem"})]})]}),m.length>0&&a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>b("inProgress"),children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(as,{className:"w-4 h-4 text-blue-400 mr-2"}),a.jsxs("span",{className:"text-blue-300 text-sm font-medium",children:["Current Active Rewards (",m.length,")"]})]}),o.inProgress?a.jsx(am,{className:"w-4 h-4 text-blue-400"}):a.jsx(Lu,{className:"w-4 h-4 text-blue-400"})]}),o.inProgress&&a.jsxs("div",{className:"space-y-3",children:[_.map((F,I)=>{var O,k,G;const S=((O=F.scanHistory)==null?void 0:O.length)||0,N=((k=F.offerSnapshot)==null?void 0:k.stampRequirement)||0,j=N>0?Math.min(S/N*100,100):0,D=Math.max(0,N-S);return a.jsx("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-3",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h4",{className:"text-white font-medium text-sm mb-2",children:((G=F.offerSnapshot)==null?void 0:G.offerName)||"Loyalty Reward"}),a.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[a.jsx("span",{className:"text-gray-400",children:"Progress:"}),a.jsxs("span",{className:"text-white font-medium",children:[S," / ",N," stamps"]})]}),a.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${j}%`}})}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-300 text-xs mb-2",children:F.rewardDescription}),a.jsx("div",{className:"text-blue-300 text-xs",children:D>0?`${D} more stamps needed`:" Reward ready to redeem!"})]})]})},F.rewardId)}),m.length>w&&a.jsx("div",{className:"text-center pt-2",children:a.jsx(je,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${m.length} Rewards`})})]})]})}),m.length===0&&a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-gray-400 text-sm mb-2",children:f.length>0?"All rewards completed! ":"No active rewards yet"}),a.jsx("div",{className:"text-gray-500 text-xs",children:f.length>0?"Check the Offers tab to start a new reward":"Visit the Offers tab to start collecting stamps"})]})}),a.jsx("div",{className:"text-center mb-4",children:a.jsxs("div",{className:"flex items-center justify-center text-gray-400 text-xs",children:[a.jsx(Cx,{className:"w-3 h-3 mr-1"}),"Member since"," ",t.createdAt.toDate().toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"short",year:"numeric"})]})}),t.isRewardReady&&s&&a.jsx("div",{className:"text-center",children:a.jsxs(je,{onClick:s,className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-medium px-6 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[a.jsx(mf,{className:"w-4 h-4 mr-2"}),"View Reward"]})})]})};var Iq=Object.defineProperty,Mm=Object.getOwnPropertySymbols,zR=Object.prototype.hasOwnProperty,WR=Object.prototype.propertyIsEnumerable,VC=(t,e,r)=>e in t?Iq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ev=(t,e)=>{for(var r in e||(e={}))zR.call(e,r)&&VC(t,r,e[r]);if(Mm)for(var r of Mm(e))WR.call(e,r)&&VC(t,r,e[r]);return t},tv=(t,e)=>{var r={};for(var n in t)zR.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Mm)for(var n of Mm(t))e.indexOf(n)<0&&WR.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var fa;(t=>{const e=class Ve{constructor(c,u,h,f){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<Ve.MIN_VERSION||c>Ve.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(h);if(this.drawCodewords(v),f==-1){let x=1e9;for(let p=0;p<8;p++){this.applyMask(p),this.drawFormatBits(p);const w=this.getPenaltyScore();w<x&&(f=p,x=w),this.applyMask(p)}}s(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,u){const h=t.QrSegment.makeSegments(c);return Ve.encodeSegments(h,u)}static encodeBinary(c,u){const h=t.QrSegment.makeBytes(c);return Ve.encodeSegments([h],u)}static encodeSegments(c,u,h=1,f=40,m=-1,v=!0){if(!(Ve.MIN_VERSION<=h&&h<=f&&f<=Ve.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,p;for(x=h;;x++){const C=Ve.getNumDataCodewords(x,u)*8,R=o.getTotalBits(c,x);if(R<=C){p=R;break}if(x>=f)throw new RangeError("Data too long")}for(const C of[Ve.Ecc.MEDIUM,Ve.Ecc.QUARTILE,Ve.Ecc.HIGH])v&&p<=Ve.getNumDataCodewords(x,C)*8&&(u=C);let w=[];for(const C of c){r(C.mode.modeBits,4,w),r(C.numChars,C.mode.numCharCountBits(x),w);for(const R of C.getData())w.push(R)}s(w.length==p);const _=Ve.getNumDataCodewords(x,u)*8;s(w.length<=_),r(0,Math.min(4,_-w.length),w),r(0,(8-w.length%8)%8,w),s(w.length%8==0);for(let C=236;w.length<_;C^=253)r(C,8,w);let b=[];for(;b.length*8<w.length;)b.push(0);return w.forEach((C,R)=>b[R>>>3]|=C<<7-(R&7)),new Ve(x,u,b,m)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let h=0;h<u;h++)for(let f=0;f<u;f++)h==0&&f==0||h==0&&f==u-1||h==u-1&&f==0||this.drawAlignmentPattern(c[h],c[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let h=u;for(let m=0;m<10;m++)h=h<<1^(h>>>9)*1335;const f=(u<<10|h)^21522;s(f>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,n(f,m));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,n(f,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,n(f,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,n(f,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let h=0;h<12;h++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;s(u>>>18==0);for(let h=0;h<18;h++){const f=n(u,h),m=this.size-11+h%3,v=Math.floor(h/3);this.setFunctionModule(m,v,f),this.setFunctionModule(v,m,f)}}drawFinderPattern(c,u){for(let h=-4;h<=4;h++)for(let f=-4;f<=4;f++){const m=Math.max(Math.abs(f),Math.abs(h)),v=c+f,x=u+h;0<=v&&v<this.size&&0<=x&&x<this.size&&this.setFunctionModule(v,x,m!=2&&m!=4)}}drawAlignmentPattern(c,u){for(let h=-2;h<=2;h++)for(let f=-2;f<=2;f++)this.setFunctionModule(c+f,u+h,Math.max(Math.abs(f),Math.abs(h))!=1)}setFunctionModule(c,u,h){this.modules[u][c]=h,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,h=this.errorCorrectionLevel;if(c.length!=Ve.getNumDataCodewords(u,h))throw new RangeError("Invalid argument");const f=Ve.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][u],m=Ve.ECC_CODEWORDS_PER_BLOCK[h.ordinal][u],v=Math.floor(Ve.getNumRawDataModules(u)/8),x=f-v%f,p=Math.floor(v/f);let w=[];const _=Ve.reedSolomonComputeDivisor(m);for(let C=0,R=0;C<f;C++){let L=c.slice(R,R+p-m+(C<x?0:1));R+=L.length;const F=Ve.reedSolomonComputeRemainder(L,_);C<x&&L.push(0),w.push(L.concat(F))}let b=[];for(let C=0;C<w[0].length;C++)w.forEach((R,L)=>{(C!=p-m||L>=x)&&b.push(R[C])});return s(b.length==v),b}drawCodewords(c){if(c.length!=Math.floor(Ve.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let f=0;f<this.size;f++)for(let m=0;m<2;m++){const v=h-m,p=(h+1&2)==0?this.size-1-f:f;!this.isFunction[p][v]&&u<c.length*8&&(this.modules[p][v]=n(c[u>>>3],7-(u&7)),u++)}}s(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let h=0;h<this.size;h++){let f;switch(c){case 0:f=(h+u)%2==0;break;case 1:f=u%2==0;break;case 2:f=h%3==0;break;case 3:f=(h+u)%3==0;break;case 4:f=(Math.floor(h/3)+Math.floor(u/2))%2==0;break;case 5:f=h*u%2+h*u%3==0;break;case 6:f=(h*u%2+h*u%3)%2==0;break;case 7:f=((h+u)%2+h*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][h]&&f&&(this.modules[u][h]=!this.modules[u][h])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let v=!1,x=0,p=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[m][w]==v?(x++,x==5?c+=Ve.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,p),v||(c+=this.finderPenaltyCountPatterns(p)*Ve.PENALTY_N3),v=this.modules[m][w],x=1);c+=this.finderPenaltyTerminateAndCount(v,x,p)*Ve.PENALTY_N3}for(let m=0;m<this.size;m++){let v=!1,x=0,p=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][m]==v?(x++,x==5?c+=Ve.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,p),v||(c+=this.finderPenaltyCountPatterns(p)*Ve.PENALTY_N3),v=this.modules[w][m],x=1);c+=this.finderPenaltyTerminateAndCount(v,x,p)*Ve.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let v=0;v<this.size-1;v++){const x=this.modules[m][v];x==this.modules[m][v+1]&&x==this.modules[m+1][v]&&x==this.modules[m+1][v+1]&&(c+=Ve.PENALTY_N2)}let u=0;for(const m of this.modules)u=m.reduce((v,x)=>v+(x?1:0),u);const h=this.size*this.size,f=Math.ceil(Math.abs(u*20-h*10)/h)-1;return s(0<=f&&f<=9),c+=f*Ve.PENALTY_N4,s(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let h=[6];for(let f=this.size-7;h.length<c;f-=u)h.splice(1,0,f);return h}}static getNumRawDataModules(c){if(c<Ve.MIN_VERSION||c>Ve.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const h=Math.floor(c/7)+2;u-=(25*h-10)*h-55,c>=7&&(u-=36)}return s(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(Ve.getNumRawDataModules(c)/8)-Ve.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*Ve.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let f=0;f<c-1;f++)u.push(0);u.push(1);let h=1;for(let f=0;f<c;f++){for(let m=0;m<u.length;m++)u[m]=Ve.reedSolomonMultiply(u[m],h),m+1<u.length&&(u[m]^=u[m+1]);h=Ve.reedSolomonMultiply(h,2)}return u}static reedSolomonComputeRemainder(c,u){let h=u.map(f=>0);for(const f of c){const m=f^h.shift();h.push(0),u.forEach((v,x)=>h[x]^=Ve.reedSolomonMultiply(v,m))}return h}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let h=0;for(let f=7;f>=0;f--)h=h<<1^(h>>>7)*285,h^=(u>>>f&1)*c;return s(h>>>8==0),h}finderPenaltyCountPatterns(c){const u=c[1];s(u<=this.size*3);const h=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(h&&c[0]>=u*4&&c[6]>=u?1:0)+(h&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,h){return c&&(this.finderPenaltyAddHistory(u,h),u=0),u+=this.size,this.finderPenaltyAddHistory(u,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)u.push(l>>>h&1)}function n(l,c){return(l>>>c&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const i=class It{constructor(c,u,h){if(this.mode=c,this.numChars=u,this.bitData=h,u<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(c){let u=[];for(const h of c)r(h,8,u);return new It(It.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!It.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let h=0;h<c.length;){const f=Math.min(c.length-h,3);r(parseInt(c.substring(h,h+f),10),f*3+1,u),h+=f}return new It(It.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!It.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],h;for(h=0;h+2<=c.length;h+=2){let f=It.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h))*45;f+=It.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h+1)),r(f,11,u)}return h<c.length&&r(It.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h)),6,u),new It(It.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:It.isNumeric(c)?[It.makeNumeric(c)]:It.isAlphanumeric(c)?[It.makeAlphanumeric(c)]:[It.makeBytes(It.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,u);else if(c<16384)r(2,2,u),r(c,14,u);else if(c<1e6)r(6,3,u),r(c,21,u);else throw new RangeError("ECI assignment value out of range");return new It(It.Mode.ECI,0,u)}static isNumeric(c){return It.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return It.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let h=0;for(const f of c){const m=f.mode.numCharCountBits(u);if(f.numChars>=1<<m)return 1/0;h+=4+m+f.bitData.length}return h}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let h=0;h<c.length;h++)c.charAt(h)!="%"?u.push(c.charCodeAt(h)):(u.push(parseInt(c.substring(h+1,h+3),16)),h+=2);return u}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;t.QrSegment=i})(fa||(fa={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(fa||(fa={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(fa||(fa={}));var cl=fa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Rq={L:cl.QrCode.Ecc.LOW,M:cl.QrCode.Ecc.MEDIUM,Q:cl.QrCode.Ecc.QUARTILE,H:cl.QrCode.Ecc.HIGH},QR=128,YR="L",HR="#FFFFFF",KR="#000000",JR=!1,XR=1,Pq=4,kq=0,jq=.1;function ZR(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(o,l){if(!o&&i!==null){r.push(`M${i+e} ${s+e}h${l-i}v1H${i+e}z`),i=null;return}if(l===n.length-1){if(!o)return;i===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${i+e},${s+e} h${l+1-i}v1H${i+e}z`);return}o&&i===null&&(i=l)})}),r.join("")}function e2(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function Mq(t,e,r,n){if(n==null)return null;const s=t.length+r*2,i=Math.floor(e*jq),o=s/e,l=(n.width||i)*o,c=(n.height||i)*o,u=n.x==null?t.length/2-l/2:n.x*o,h=n.y==null?t.length/2-c/2:n.y*o,f=n.opacity==null?1:n.opacity;let m=null;if(n.excavate){let x=Math.floor(u),p=Math.floor(h),w=Math.ceil(l+u-x),_=Math.ceil(c+h-p);m={x,y:p,w,h:_}}const v=n.crossOrigin;return{x:u,y:h,h:c,w:l,excavation:m,opacity:f,crossOrigin:v}}function Dq(t,e){return e!=null?Math.max(Math.floor(e),0):t?Pq:kq}function t2({value:t,level:e,minVersion:r,includeMargin:n,marginSize:s,imageSettings:i,size:o,boostLevel:l}){let c=Y.useMemo(()=>{const x=(Array.isArray(t)?t:[t]).reduce((p,w)=>(p.push(...cl.QrSegment.makeSegments(w)),p),[]);return cl.QrCode.encodeSegments(x,Rq[e],r,void 0,void 0,l)},[t,e,r,l]);const{cells:u,margin:h,numCells:f,calculatedImageSettings:m}=Y.useMemo(()=>{let v=c.getModules();const x=Dq(n,s),p=v.length+x*2,w=Mq(v,o,x,i);return{cells:v,margin:x,numCells:p,calculatedImageSettings:w}},[c,o,i,n,s]);return{qrcode:c,margin:h,cells:u,numCells:f,calculatedImageSettings:m}}var Oq=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Lq=Y.forwardRef(function(e,r){const n=e,{value:s,size:i=QR,level:o=YR,bgColor:l=HR,fgColor:c=KR,includeMargin:u=JR,minVersion:h=XR,boostLevel:f,marginSize:m,imageSettings:v}=n,p=tv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=p,_=tv(p,["style"]),b=v==null?void 0:v.src,C=Y.useRef(null),R=Y.useRef(null),L=Y.useCallback(G=>{C.current=G,typeof r=="function"?r(G):r&&(r.current=G)},[r]),[F,I]=Y.useState(!1),{margin:S,cells:N,numCells:j,calculatedImageSettings:D}=t2({value:s,level:o,minVersion:h,boostLevel:f,includeMargin:u,marginSize:m,imageSettings:v,size:i});Y.useEffect(()=>{if(C.current!=null){const G=C.current,H=G.getContext("2d");if(!H)return;let J=N;const ie=R.current,q=D!=null&&ie!==null&&ie.complete&&ie.naturalHeight!==0&&ie.naturalWidth!==0;q&&D.excavation!=null&&(J=e2(N,D.excavation));const W=window.devicePixelRatio||1;G.height=G.width=i*W;const se=i/j*W;H.scale(se,se),H.fillStyle=l,H.fillRect(0,0,j,j),H.fillStyle=c,Oq?H.fill(new Path2D(ZR(J,S))):N.forEach(function(re,le){re.forEach(function(ue,Se){ue&&H.fillRect(Se+S,le+S,1,1)})}),D&&(H.globalAlpha=D.opacity),q&&H.drawImage(ie,D.x+S,D.y+S,D.w,D.h)}}),Y.useEffect(()=>{I(!1)},[b]);const O=ev({height:i,width:i},w);let k=null;return b!=null&&(k=Y.createElement("img",{src:b,key:b,style:{display:"none"},onLoad:()=>{I(!0)},ref:R,crossOrigin:D==null?void 0:D.crossOrigin})),Y.createElement(Y.Fragment,null,Y.createElement("canvas",ev({style:O,height:i,width:i,ref:L,role:"img"},_)),k)});Lq.displayName="QRCodeCanvas";var r2=Y.forwardRef(function(e,r){const n=e,{value:s,size:i=QR,level:o=YR,bgColor:l=HR,fgColor:c=KR,includeMargin:u=JR,minVersion:h=XR,boostLevel:f,title:m,marginSize:v,imageSettings:x}=n,p=tv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:_,numCells:b,calculatedImageSettings:C}=t2({value:s,level:o,minVersion:h,boostLevel:f,includeMargin:u,marginSize:v,imageSettings:x,size:i});let R=_,L=null;x!=null&&C!=null&&(C.excavation!=null&&(R=e2(_,C.excavation)),L=Y.createElement("image",{href:x.src,height:C.h,width:C.w,x:C.x+w,y:C.y+w,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const F=ZR(R,w);return Y.createElement("svg",ev({height:i,width:i,viewBox:`0 0 ${b} ${b}`,ref:r,role:"img"},p),!!m&&Y.createElement("title",null,m),Y.createElement("path",{fill:l,d:`M0,0 h${b}v${b}H0z`,shapeRendering:"crispEdges"}),Y.createElement("path",{fill:c,d:F,shapeRendering:"crispEdges"}),L)});r2.displayName="QRCodeSVG";const n2=({qrData:t,isOpen:e,onClose:r})=>{if(!e)return null;const n=JSON.stringify(t);return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-white flex-1 text-center truncate",children:t.offerName}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors ml-4",children:a.jsx(sa,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6 flex justify-center",children:a.jsx("div",{className:"p-4 bg-white rounded-lg",children:a.jsx(r2,{value:n,size:200,level:"M",includeMargin:!0})})})]})})},Fq=({user:t,offers:e})=>{var O,k;const[r,n]=y.useState(!1),[s,i]=y.useState(null),[o,l]=y.useState({inProgress:!0,completed:!0}),[c,u]=y.useState(!1),[h,f]=y.useState(!1),m=t.completedRewards||[],v=m.filter(G=>{var H,J;return((H=G.scanHistory)==null?void 0:H.length)<((J=G.offerSnapshot)==null?void 0:J.stampRequirement)}),x=m.filter(G=>{var H,J;return((H=G.scanHistory)==null?void 0:H.length)>=((J=G.offerSnapshot)==null?void 0:J.stampRequirement)}),p=x.filter(G=>!G.claimedAt),w=x.filter(G=>!!G.claimedAt),_=(G,H)=>{const J=G.createdAt.toDate().getTime();return H.createdAt.toDate().getTime()-J},b=[...v].sort(_),C=[...p].sort(_),R=[...w].sort(_),L=3,F=c?b:b.slice(0,L),I=c?C:C.slice(0,L),S=h?R:R.slice(0,L),N=G=>{i(G),n(!0)},j=()=>{n(!1),i(null)},D=G=>{l(H=>({...H,[G]:!H[G]}))};return a.jsxs("div",{className:"space-y-6",children:[v.length>0&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 hover:bg-blue-900/30 transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>D("inProgress"),children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(as,{className:"w-5 h-5 text-blue-400 mr-2 animate-pulse"}),a.jsxs("h3",{className:"text-lg font-semibold text-blue-300",children:["Rewards in Progress (",v.length,")"]})]}),o.inProgress?a.jsx(am,{className:"w-5 h-5 text-blue-400"}):a.jsx(Lu,{className:"w-5 h-5 text-blue-400"})]}),o.inProgress&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:F.map(G=>{var W,se,re,le;const H=((W=G.scanHistory)==null?void 0:W.length)||0,J=((se=G.offerSnapshot)==null?void 0:se.stampRequirement)||0,ie=Math.min(H/J*100,100),q=Math.max(0,J-H);return a.jsxs("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-4 hover:bg-blue-900/20 hover:border-blue-500/30 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-blue-200 transition-colors duration-200",children:((re=G.offerSnapshot)==null?void 0:re.offerName)||"Loyalty Reward"}),a.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((le=G.offerSnapshot)==null?void 0:le.description)||"Collect stamps to earn this reward"}),a.jsx("p",{className:"text-blue-300 text-xs font-medium",children:G.rewardDescription})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm text-white font-medium",children:[H," / ",J]}),a.jsx("div",{className:"text-xs text-gray-400",children:"stamps collected"})]})]}),a.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3 overflow-hidden",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full transition-all duration-1000 ease-out shadow-sm",style:{width:`${ie}%`}})}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400",children:q>0?`${q} more stamps needed`:" Ready to redeem!"}),a.jsxs("span",{className:"text-blue-300 font-medium",children:["Started"," ",G.createdAt.toDate().toLocaleDateString()]})]})]},G.rewardId)})}),v.length>L&&a.jsx("div",{className:"text-center pt-4",children:a.jsx(je,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${v.length} In-Progress Rewards`})})]})]}),(p.length>0||w.length>0)&&a.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 hover:bg-green-900/30 transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-green-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>D("completed"),children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(py,{className:"w-5 h-5 text-green-400 mr-2 animate-pulse"}),a.jsxs("h3",{className:"text-lg font-semibold text-green-300",children:["Completed Rewards (",p.length+w.length,")"]})]}),o.completed?a.jsx(am,{className:"w-5 h-5 text-green-400"}):a.jsx(Lu,{className:"w-5 h-5 text-green-400"})]}),o.completed&&a.jsxs(a.Fragment,{children:[p.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"text-md font-medium text-green-200 mb-3 flex items-center",children:[a.jsx(Bt,{className:"w-4 h-4 mr-2 text-green-400"}),"Ready to Redeem (",p.length,")"]}),a.jsx("div",{className:"space-y-4",children:I.map(G=>{var J,ie,q;const H=!!G.claimedAt;return a.jsxs("div",{className:`border rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group ${H?"bg-gray-800/30 border-gray-600/30":"bg-green-900/10 border-green-600/20 hover:bg-green-900/20 hover:border-green-500/30"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-green-200 transition-colors duration-200",children:((J=G.offerSnapshot)==null?void 0:J.offerName)||"Loyalty Reward"}),a.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((ie=G.offerSnapshot)==null?void 0:ie.description)||"Reward description"}),a.jsx("p",{className:"text-green-300 text-xs font-medium",children:G.rewardDescription})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${H?"bg-gray-700 text-gray-300":"bg-green-700 text-green-300 animate-pulse"}`,children:H?"REDEEMED":"AVAILABLE"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-400",children:["Earned"," ",G.createdAt.toDate().toLocaleDateString()]}),H&&a.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(q=G.claimedAt)==null?void 0:q.toDate().toLocaleDateString()]})]}),!H&&a.jsx("div",{className:"mt-3",children:a.jsxs(je,{onClick:()=>N(G),className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-medium py-2 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-green-500/25",children:[a.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})})]},G.rewardId)})})]}),w.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-md font-medium text-gray-300 mb-3 flex items-center",children:[a.jsx(py,{className:"w-4 h-4 mr-2 text-gray-400"}),"Previously Redeemed (",w.length,")"]}),a.jsx("div",{className:"space-y-4",children:S.map(G=>{var H,J,ie;return a.jsxs("div",{className:"bg-gray-800/30 border border-gray-600/30 rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-gray-200 transition-colors duration-200",children:((H=G.offerSnapshot)==null?void 0:H.offerName)||"Loyalty Reward"}),a.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((J=G.offerSnapshot)==null?void 0:J.description)||"Reward description"}),a.jsx("p",{className:"text-gray-400 text-xs font-medium",children:G.rewardDescription})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"text-xs px-2 py-1 rounded-full font-medium bg-gray-700 text-gray-300",children:"REDEEMED"})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-400",children:["Earned"," ",G.createdAt.toDate().toLocaleDateString()]}),a.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(ie=G.claimedAt)==null?void 0:ie.toDate().toLocaleDateString()]})]})]},G.rewardId)})})]}),(p.length>L||w.length>L)&&a.jsx("div",{className:"text-center pt-4",children:a.jsx(je,{onClick:()=>f(!h),variant:"outline",size:"sm",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-colors duration-200",children:h?"Show Less":`Show All ${p.length+w.length} Completed Rewards`})})]})]}),m.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-xl p-8 hover:bg-gray-800/40 transition-all duration-300",children:[a.jsx(Bt,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No Rewards Yet"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Start collecting stamps from the Offers tab to earn your first reward!"})]})}),r&&s&&a.jsx(n2,{qrData:{userId:t.id,userEmail:t.email,userName:t.name,offerId:((O=s.offerSnapshot)==null?void 0:O.offerId)||"",offerName:((k=s.offerSnapshot)==null?void 0:k.offerName)||"Reward Redemption",timestamp:new Date().toISOString(),rewardId:s.rewardId,action:"redeem_reward"},isOpen:r,onClose:j})]})},BC=[{key:"profile",label:"Edit Profile",route:"profile",colorClass:"border-cyan-500 text-cyan-400 hover:bg-cyan-500 hover:text-white",roles:["customer","admin","super_admin"],icon:Ul},{key:"scan",label:"Scan",route:"/scan",colorClass:"border-green-500 text-green-400 hover:bg-green-500 hover:text-white",roles:["admin","super_admin"],icon:uO},{key:"settings",label:"Settings",route:"/settings",colorClass:"border-blue-500 text-blue-400 hover:bg-blue-500 hover:text-white",roles:["super_admin"],icon:Ax},{key:"users",label:"Users",route:"/users",colorClass:"border-purple-500 text-purple-400 hover:bg-purple-500 hover:text-white",roles:["super_admin"],icon:ls},{key:"logout",label:"Logout",route:"logout",colorClass:"border-red-500 text-red-400 hover:bg-red-500 hover:text-white",roles:["customer","admin","super_admin"],icon:cS}];var Vq=y.createContext(void 0);function Bp(t){const e=y.useContext(Vq);return t||e||"ltr"}var o0=0;function s2(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??UC()),document.body.insertAdjacentElement("beforeend",t[1]??UC()),o0++,()=>{o0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),o0--}},[])}function UC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var a0="focusScope.autoFocusOnMount",l0="focusScope.autoFocusOnUnmount",qC={bubbles:!1,cancelable:!0},Bq="FocusScope",Hw=y.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=y.useState(null),u=Er(s),h=Er(i),f=y.useRef(null),m=it(e,p=>c(p)),v=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(n){let p=function(C){if(v.paused||!l)return;const R=C.target;l.contains(R)?f.current=R:vi(f.current,{select:!0})},w=function(C){if(v.paused||!l)return;const R=C.relatedTarget;R!==null&&(l.contains(R)||vi(f.current,{select:!0}))},_=function(C){if(document.activeElement===document.body)for(const L of C)L.removedNodes.length>0&&vi(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",w);const b=new MutationObserver(_);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",w),b.disconnect()}}},[n,l,v.paused]),y.useEffect(()=>{if(l){$C.add(v);const p=document.activeElement;if(!l.contains(p)){const _=new CustomEvent(a0,qC);l.addEventListener(a0,u),l.dispatchEvent(_),_.defaultPrevented||(Uq(Wq(i2(l)),{select:!0}),document.activeElement===p&&vi(l))}return()=>{l.removeEventListener(a0,u),setTimeout(()=>{const _=new CustomEvent(l0,qC);l.addEventListener(l0,h),l.dispatchEvent(_),_.defaultPrevented||vi(p??document.body,{select:!0}),l.removeEventListener(l0,h),$C.remove(v)},0)}}},[l,u,h,v]);const x=y.useCallback(p=>{if(!r&&!n||v.paused)return;const w=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,_=document.activeElement;if(w&&_){const b=p.currentTarget,[C,R]=qq(b);C&&R?!p.shiftKey&&_===R?(p.preventDefault(),r&&vi(C,{select:!0})):p.shiftKey&&_===C&&(p.preventDefault(),r&&vi(R,{select:!0})):_===b&&p.preventDefault()}},[r,n,v.paused]);return a.jsx(qe.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});Hw.displayName=Bq;function Uq(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(vi(n,{select:e}),document.activeElement!==r)return}function qq(t){const e=i2(t),r=GC(e,t),n=GC(e.reverse(),t);return[r,n]}function i2(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function GC(t,e){for(const r of t)if(!Gq(r,{upTo:e}))return r}function Gq(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function $q(t){return t instanceof HTMLInputElement&&"select"in t}function vi(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&$q(t)&&e&&t.select()}}var $C=zq();function zq(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=zC(t,e),t.unshift(e)},remove(e){var r;t=zC(t,e),(r=t[0])==null||r.resume()}}}function zC(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function Wq(t){return t.filter(e=>e.tagName!=="A")}function Qq(t,e=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:m,children:v,...x}=f,p=(m==null?void 0:m[t][c])||l,w=y.useMemo(()=>x,Object.values(x));return a.jsx(p.Provider,{value:w,children:v})}function h(f,m){const v=(m==null?void 0:m[t][c])||l,x=y.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,h]}const s=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,Yq(s,...e)]}function Yq(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var c0="rovingFocusGroup.onEntryFocus",Hq={bubbles:!1,cancelable:!0},Up="RovingFocusGroup",[rv,o2,Kq]=hd(Up),[Jq,qp]=Qq(Up,[Kq]),[Xq,Zq]=Jq(Up),a2=y.forwardRef((t,e)=>a.jsx(rv.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(rv.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(eG,{...t,ref:e})})}));a2.displayName=Up;var eG=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=y.useRef(null),v=it(e,m),x=Bp(i),[p=null,w]=Ou({prop:o,defaultProp:l,onChange:c}),[_,b]=y.useState(!1),C=Er(u),R=o2(r),L=y.useRef(!1),[F,I]=y.useState(0);return y.useEffect(()=>{const S=m.current;if(S)return S.addEventListener(c0,C),()=>S.removeEventListener(c0,C)},[C]),a.jsx(Xq,{scope:r,orientation:n,dir:x,loop:s,currentTabStopId:p,onItemFocus:y.useCallback(S=>w(S),[w]),onItemShiftTab:y.useCallback(()=>b(!0),[]),onFocusableItemAdd:y.useCallback(()=>I(S=>S+1),[]),onFocusableItemRemove:y.useCallback(()=>I(S=>S-1),[]),children:a.jsx(qe.div,{tabIndex:_||F===0?-1:0,"data-orientation":n,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{L.current=!0}),onFocus:me(t.onFocus,S=>{const N=!L.current;if(S.target===S.currentTarget&&N&&!_){const j=new CustomEvent(c0,Hq);if(S.currentTarget.dispatchEvent(j),!j.defaultPrevented){const D=R().filter(J=>J.focusable),O=D.find(J=>J.active),k=D.find(J=>J.id===p),H=[O,k,...D].filter(Boolean).map(J=>J.ref.current);u2(H,h)}}L.current=!1}),onBlur:me(t.onBlur,()=>b(!1))})})}),l2="RovingFocusGroupItem",c2=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...o}=t,l=Jo(),c=i||l,u=Zq(l2,r),h=u.currentTabStopId===c,f=o2(r),{onFocusableItemAdd:m,onFocusableItemRemove:v}=u;return y.useEffect(()=>{if(n)return m(),()=>v()},[n,m,v]),a.jsx(rv.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:a.jsx(qe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:me(t.onMouseDown,x=>{n?u.onItemFocus(c):x.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const p=nG(x,u.orientation,u.dir);if(p!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=f().filter(b=>b.focusable).map(b=>b.ref.current);if(p==="last")_.reverse();else if(p==="prev"||p==="next"){p==="prev"&&_.reverse();const b=_.indexOf(x.currentTarget);_=u.loop?sG(_,b+1):_.slice(b+1)}setTimeout(()=>u2(_))}})})})});c2.displayName=l2;var tG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function nG(t,e,r){const n=rG(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return tG[n]}function u2(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function sG(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var d2=a2,h2=c2,iG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ga=new WeakMap,Yh=new WeakMap,Hh={},u0=0,f2=function(t){return t&&(t.host||f2(t.parentNode))},oG=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=f2(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},aG=function(t,e,r,n){var s=oG(e,Array.isArray(t)?t:[t]);Hh[r]||(Hh[r]=new WeakMap);var i=Hh[r],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var v=m.getAttribute(n),x=v!==null&&v!=="false",p=(Ga.get(m)||0)+1,w=(i.get(m)||0)+1;Ga.set(m,p),i.set(m,w),o.push(m),p===1&&x&&Yh.set(m,!0),w===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return h(e),l.clear(),u0++,function(){o.forEach(function(f){var m=Ga.get(f)-1,v=i.get(f)-1;Ga.set(f,m),i.set(f,v),m||(Yh.has(f)||f.removeAttribute(n),Yh.delete(f)),v||f.removeAttribute(r)}),u0--,u0||(Ga=new WeakMap,Ga=new WeakMap,Yh=new WeakMap,Hh={})}},m2=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=iG(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),aG(n,s,r,"aria-hidden")):function(){return null}},Sf="right-scroll-bar-position",Nf="width-before-scroll-bar",lG="with-scroll-bars-hidden",cG="--removed-body-scroll-bar-size";function d0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function uG(t,e){var r=y.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var dG=typeof window<"u"?y.useLayoutEffect:y.useEffect,WC=new WeakMap;function hG(t,e){var r=uG(null,function(n){return t.forEach(function(s){return d0(s,n)})});return dG(function(){var n=WC.get(r);if(n){var s=new Set(n),i=new Set(t),o=r.current;s.forEach(function(l){i.has(l)||d0(l,null)}),i.forEach(function(l){s.has(l)||d0(l,o)})}WC.set(r,t)},[t]),r}function fG(t){return t}function mG(t,e){e===void 0&&(e=fG);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),r}}}};return s}function pG(t){t===void 0&&(t={});var e=mG(null);return e.options=ss({async:!0,ssr:!1},t),e}var p2=function(t){var e=t.sideCar,r=Td(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return y.createElement(n,ss({},r))};p2.isSideCarExport=!0;function gG(t,e){return t.useMedium(e),p2}var g2=pG(),h0=function(){},Gp=y.forwardRef(function(t,e){var r=y.useRef(null),n=y.useState({onScrollCapture:h0,onWheelCapture:h0,onTouchMoveCapture:h0}),s=n[0],i=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,v=t.noIsolation,x=t.inert,p=t.allowPinchZoom,w=t.as,_=w===void 0?"div":w,b=t.gapMode,C=Td(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=m,L=hG([r,e]),F=ss(ss({},C),s);return y.createElement(y.Fragment,null,h&&y.createElement(R,{sideCar:g2,removeScrollBar:u,shards:f,noIsolation:v,inert:x,setCallbacks:i,allowPinchZoom:!!p,lockRef:r,gapMode:b}),o?y.cloneElement(y.Children.only(l),ss(ss({},F),{ref:L})):y.createElement(_,ss({},F,{className:c,ref:L}),l))});Gp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gp.classNames={fullWidth:Nf,zeroRight:Sf};var yG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vG(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=yG();return e&&t.setAttribute("nonce",e),t}function xG(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function wG(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var bG=function(){var t=0,e=null;return{add:function(r){t==0&&(e=vG())&&(xG(e,r),wG(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},EG=function(){var t=bG();return function(e,r){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},y2=function(){var t=EG(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},CG={left:0,top:0,right:0,gap:0},f0=function(t){return parseInt(t||"",10)||0},_G=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[f0(r),f0(n),f0(s)]},TG=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return CG;var e=_G(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},AG=y2(),Cl="data-scroll-locked",SG=function(t,e,r,n){var s=t.left,i=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(lG,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Cl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sf,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Nf,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Sf," .").concat(Sf,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Nf," .").concat(Nf,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Cl,`] {
    `).concat(cG,": ").concat(l,`px;
  }
`)},QC=function(){var t=parseInt(document.body.getAttribute(Cl)||"0",10);return isFinite(t)?t:0},NG=function(){y.useEffect(function(){return document.body.setAttribute(Cl,(QC()+1).toString()),function(){var t=QC()-1;t<=0?document.body.removeAttribute(Cl):document.body.setAttribute(Cl,t.toString())}},[])},IG=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;NG();var i=y.useMemo(function(){return TG(s)},[s]);return y.createElement(AG,{styles:SG(i,!e,s,r?"":"!important")})},nv=!1;if(typeof window<"u")try{var Kh=Object.defineProperty({},"passive",{get:function(){return nv=!0,!0}});window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{nv=!1}var $a=nv?{passive:!1}:!1,RG=function(t){return t.tagName==="TEXTAREA"},v2=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!RG(t)&&r[e]==="visible")},PG=function(t){return v2(t,"overflowY")},kG=function(t){return v2(t,"overflowX")},YC=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=x2(t,n);if(s){var i=w2(t,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},jG=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},MG=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},x2=function(t,e){return t==="v"?PG(e):kG(e)},w2=function(t,e){return t==="v"?jG(e):MG(e)},DG=function(t,e){return t==="h"&&e==="rtl"?-1:1},OG=function(t,e,r,n,s){var i=DG(t,window.getComputedStyle(e).direction),o=i*n,l=r.target,c=e.contains(l),u=!1,h=o>0,f=0,m=0;do{var v=w2(t,l),x=v[0],p=v[1],w=v[2],_=p-w-i*x;(x||_)&&x2(t,l)&&(f+=_,m+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},Jh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},HC=function(t){return[t.deltaX,t.deltaY]},KC=function(t){return t&&"current"in t?t.current:t},LG=function(t,e){return t[0]===e[0]&&t[1]===e[1]},FG=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},VG=0,za=[];function BG(t){var e=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),s=y.useState(VG++)[0],i=y.useState(y2)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=VV([t.lockRef.current],(t.shards||[]).map(KC),!0).filter(Boolean);return p.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=y.useCallback(function(p,w){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var _=Jh(p),b=r.current,C="deltaX"in p?p.deltaX:b[0]-_[0],R="deltaY"in p?p.deltaY:b[1]-_[1],L,F=p.target,I=Math.abs(C)>Math.abs(R)?"h":"v";if("touches"in p&&I==="h"&&F.type==="range")return!1;var S=YC(I,F);if(!S)return!0;if(S?L=I:(L=I==="v"?"h":"v",S=YC(I,F)),!S)return!1;if(!n.current&&"changedTouches"in p&&(C||R)&&(n.current=L),!L)return!0;var N=n.current||L;return OG(N,w,p,N==="h"?C:R,!0)},[]),c=y.useCallback(function(p){var w=p;if(!(!za.length||za[za.length-1]!==i)){var _="deltaY"in w?HC(w):Jh(w),b=e.current.filter(function(L){return L.name===w.type&&(L.target===w.target||w.target===L.shadowParent)&&LG(L.delta,_)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var C=(o.current.shards||[]).map(KC).filter(Boolean).filter(function(L){return L.contains(w.target)}),R=C.length>0?l(w,C[0]):!o.current.noIsolation;R&&w.cancelable&&w.preventDefault()}}},[]),u=y.useCallback(function(p,w,_,b){var C={name:p,delta:w,target:_,should:b,shadowParent:UG(_)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(R){return R!==C})},1)},[]),h=y.useCallback(function(p){r.current=Jh(p),n.current=void 0},[]),f=y.useCallback(function(p){u(p.type,HC(p),p.target,l(p,t.lockRef.current))},[]),m=y.useCallback(function(p){u(p.type,Jh(p),p.target,l(p,t.lockRef.current))},[]);y.useEffect(function(){return za.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,$a),document.addEventListener("touchmove",c,$a),document.addEventListener("touchstart",h,$a),function(){za=za.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,$a),document.removeEventListener("touchmove",c,$a),document.removeEventListener("touchstart",h,$a)}},[]);var v=t.removeScrollBar,x=t.inert;return y.createElement(y.Fragment,null,x?y.createElement(i,{styles:FG(s)}):null,v?y.createElement(IG,{gapMode:t.gapMode}):null)}function UG(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qG=gG(g2,BG);var Kw=y.forwardRef(function(t,e){return y.createElement(Gp,ss({},t,{ref:e,sideCar:qG}))});Kw.classNames=Gp.classNames;var sv=["Enter"," "],GG=["ArrowDown","PageUp","Home"],b2=["ArrowUp","PageDown","End"],$G=[...GG,...b2],zG={ltr:[...sv,"ArrowRight"],rtl:[...sv,"ArrowLeft"]},WG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Pd="Menu",[nd,QG,YG]=hd(Pd),[Ea,HG]=fd(Pd,[YG,fc,qp]),$p=fc(),E2=qp(),[KG,Ca]=Ea(Pd),[JG,kd]=Ea(Pd),C2=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:o=!0}=t,l=$p(e),[c,u]=y.useState(null),h=y.useRef(!1),f=Er(i),m=Bp(s);return y.useEffect(()=>{const v=()=>{h.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>h.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),a.jsx(fR,{...l,children:a.jsx(KG,{scope:e,open:r,onOpenChange:f,content:c,onContentChange:u,children:a.jsx(JG,{scope:e,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:o,children:n})})})};C2.displayName=Pd;var XG="MenuAnchor",Jw=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=$p(r);return a.jsx(Lw,{...s,...n,ref:e})});Jw.displayName=XG;var Xw="MenuPortal",[ZG,_2]=Ea(Xw,{forceMount:void 0}),T2=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=Ca(Xw,e);return a.jsx(ZG,{scope:e,forceMount:r,children:a.jsx(va,{present:r||i.open,children:a.jsx(tp,{asChild:!0,container:s,children:n})})})};T2.displayName=Xw;var bn="MenuContent",[e$,Zw]=Ea(bn),A2=y.forwardRef((t,e)=>{const r=_2(bn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Ca(bn,t.__scopeMenu),o=kd(bn,t.__scopeMenu);return a.jsx(nd.Provider,{scope:t.__scopeMenu,children:a.jsx(va,{present:n||i.open,children:a.jsx(nd.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(t$,{...s,ref:e}):a.jsx(r$,{...s,ref:e})})})})}),t$=y.forwardRef((t,e)=>{const r=Ca(bn,t.__scopeMenu),n=y.useRef(null),s=it(e,n);return y.useEffect(()=>{const i=n.current;if(i)return m2(i)},[]),a.jsx(eb,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:me(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),r$=y.forwardRef((t,e)=>{const r=Ca(bn,t.__scopeMenu);return a.jsx(eb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),eb=y.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:v,disableOutsideScroll:x,...p}=t,w=Ca(bn,r),_=kd(bn,r),b=$p(r),C=E2(r),R=QG(r),[L,F]=y.useState(null),I=y.useRef(null),S=it(e,I,w.onContentChange),N=y.useRef(0),j=y.useRef(""),D=y.useRef(0),O=y.useRef(null),k=y.useRef("right"),G=y.useRef(0),H=x?Kw:y.Fragment,J=x?{as:na,allowPinchZoom:!0}:void 0,ie=W=>{var oe,ge;const se=j.current+W,re=R().filter(xe=>!xe.disabled),le=document.activeElement,ue=(oe=re.find(xe=>xe.ref.current===le))==null?void 0:oe.textValue,Se=re.map(xe=>xe.textValue),ke=m$(Se,se,ue),we=(ge=re.find(xe=>xe.textValue===ke))==null?void 0:ge.ref.current;(function xe(be){j.current=be,window.clearTimeout(N.current),be!==""&&(N.current=window.setTimeout(()=>xe(""),1e3))})(se),we&&setTimeout(()=>we.focus())};y.useEffect(()=>()=>window.clearTimeout(N.current),[]),s2();const q=y.useCallback(W=>{var re,le;return k.current===((re=O.current)==null?void 0:re.side)&&g$(W,(le=O.current)==null?void 0:le.area)},[]);return a.jsx(e$,{scope:r,searchRef:j,onItemEnter:y.useCallback(W=>{q(W)&&W.preventDefault()},[q]),onItemLeave:y.useCallback(W=>{var se;q(W)||((se=I.current)==null||se.focus(),F(null))},[q]),onTriggerLeave:y.useCallback(W=>{q(W)&&W.preventDefault()},[q]),pointerGraceTimerRef:D,onPointerGraceIntentChange:y.useCallback(W=>{O.current=W},[]),children:a.jsx(H,{...J,children:a.jsx(Hw,{asChild:!0,trapped:s,onMountAutoFocus:me(i,W=>{var se;W.preventDefault(),(se=I.current)==null||se.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(md,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:v,children:a.jsx(d2,{asChild:!0,...C,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:L,onCurrentTabStopIdChange:F,onEntryFocus:me(c,W=>{_.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(Fw,{role:"menu","aria-orientation":"vertical","data-state":q2(w.open),"data-radix-menu-content":"",dir:_.dir,...b,...p,ref:S,style:{outline:"none",...p.style},onKeyDown:me(p.onKeyDown,W=>{const re=W.target.closest("[data-radix-menu-content]")===W.currentTarget,le=W.ctrlKey||W.altKey||W.metaKey,ue=W.key.length===1;re&&(W.key==="Tab"&&W.preventDefault(),!le&&ue&&ie(W.key));const Se=I.current;if(W.target!==Se||!$G.includes(W.key))return;W.preventDefault();const we=R().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);b2.includes(W.key)&&we.reverse(),h$(we)}),onBlur:me(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(N.current),j.current="")}),onPointerMove:me(t.onPointerMove,sd(W=>{const se=W.target,re=G.current!==W.clientX;if(W.currentTarget.contains(se)&&re){const le=W.clientX>G.current?"right":"left";k.current=le,G.current=W.clientX}}))})})})})})})});A2.displayName=bn;var n$="MenuGroup",tb=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(qe.div,{role:"group",...n,ref:e})});tb.displayName=n$;var s$="MenuLabel",S2=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(qe.div,{...n,ref:e})});S2.displayName=s$;var Dm="MenuItem",JC="menu.itemSelect",zp=y.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=y.useRef(null),o=kd(Dm,t.__scopeMenu),l=Zw(Dm,t.__scopeMenu),c=it(e,i),u=y.useRef(!1),h=()=>{const f=i.current;if(!r&&f){const m=new CustomEvent(JC,{bubbles:!0,cancelable:!0});f.addEventListener(JC,v=>n==null?void 0:n(v),{once:!0}),vx(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(N2,{...s,ref:c,disabled:r,onClick:me(t.onClick,h),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:me(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:me(t.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||sv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});zp.displayName=Dm;var N2=y.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,o=Zw(Dm,r),l=E2(r),c=y.useRef(null),u=it(e,c),[h,f]=y.useState(!1),[m,v]=y.useState("");return y.useEffect(()=>{const x=c.current;x&&v((x.textContent??"").trim())},[i.children]),a.jsx(nd.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:a.jsx(h2,{asChild:!0,...l,focusable:!n,children:a.jsx(qe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:me(t.onPointerMove,sd(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(t.onPointerLeave,sd(x=>o.onItemLeave(x))),onFocus:me(t.onFocus,()=>f(!0)),onBlur:me(t.onBlur,()=>f(!1))})})})}),i$="MenuCheckboxItem",I2=y.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return a.jsx(M2,{scope:t.__scopeMenu,checked:r,children:a.jsx(zp,{role:"menuitemcheckbox","aria-checked":Om(r)?"mixed":r,...s,ref:e,"data-state":nb(r),onSelect:me(s.onSelect,()=>n==null?void 0:n(Om(r)?!0:!r),{checkForDefaultPrevented:!1})})})});I2.displayName=i$;var R2="MenuRadioGroup",[o$,a$]=Ea(R2,{value:void 0,onValueChange:()=>{}}),P2=y.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=Er(n);return a.jsx(o$,{scope:t.__scopeMenu,value:r,onValueChange:i,children:a.jsx(tb,{...s,ref:e})})});P2.displayName=R2;var k2="MenuRadioItem",j2=y.forwardRef((t,e)=>{const{value:r,...n}=t,s=a$(k2,t.__scopeMenu),i=r===s.value;return a.jsx(M2,{scope:t.__scopeMenu,checked:i,children:a.jsx(zp,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":nb(i),onSelect:me(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});j2.displayName=k2;var rb="MenuItemIndicator",[M2,l$]=Ea(rb,{checked:!1}),D2=y.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=l$(rb,r);return a.jsx(va,{present:n||Om(i.checked)||i.checked===!0,children:a.jsx(qe.span,{...s,ref:e,"data-state":nb(i.checked)})})});D2.displayName=rb;var c$="MenuSeparator",O2=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(qe.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});O2.displayName=c$;var u$="MenuArrow",L2=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=$p(r);return a.jsx(Vw,{...s,...n,ref:e})});L2.displayName=u$;var d$="MenuSub",[AQ,F2]=Ea(d$),Jc="MenuSubTrigger",V2=y.forwardRef((t,e)=>{const r=Ca(Jc,t.__scopeMenu),n=kd(Jc,t.__scopeMenu),s=F2(Jc,t.__scopeMenu),i=Zw(Jc,t.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},h=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>h,[h]),y.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),a.jsx(Jw,{asChild:!0,...u,children:a.jsx(N2,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":q2(r.open),...t,ref:yx(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:me(t.onPointerMove,sd(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:me(t.onPointerLeave,sd(f=>{var v,x;h();const m=(v=r.content)==null?void 0:v.getBoundingClientRect();if(m){const p=(x=r.content)==null?void 0:x.dataset.side,w=p==="right",_=w?-5:5,b=m[w?"left":"right"],C=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:b,y:m.top},{x:C,y:m.top},{x:C,y:m.bottom},{x:b,y:m.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:me(t.onKeyDown,f=>{var v;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||zG[n.dir].includes(f.key)&&(r.onOpenChange(!0),(v=r.content)==null||v.focus(),f.preventDefault())})})})});V2.displayName=Jc;var B2="MenuSubContent",U2=y.forwardRef((t,e)=>{const r=_2(bn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Ca(bn,t.__scopeMenu),o=kd(bn,t.__scopeMenu),l=F2(B2,t.__scopeMenu),c=y.useRef(null),u=it(e,c);return a.jsx(nd.Provider,{scope:t.__scopeMenu,children:a.jsx(va,{present:n||i.open,children:a.jsx(nd.Slot,{scope:t.__scopeMenu,children:a.jsx(eb,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:me(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:me(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:me(t.onKeyDown,h=>{var v;const f=h.currentTarget.contains(h.target),m=WG[o.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(v=l.trigger)==null||v.focus(),h.preventDefault())})})})})})});U2.displayName=B2;function q2(t){return t?"open":"closed"}function Om(t){return t==="indeterminate"}function nb(t){return Om(t)?"indeterminate":t?"checked":"unchecked"}function h$(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function f$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function m$(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=f$(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function p$(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>n!=h>n&&r<(u-l)*(n-c)/(h-c)+l&&(s=!s)}return s}function g$(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return p$(r,e)}function sd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var y$=C2,v$=Jw,x$=T2,w$=A2,b$=tb,E$=S2,C$=zp,_$=I2,T$=P2,A$=j2,S$=D2,N$=O2,I$=L2,R$=V2,P$=U2,Wp="Menubar",[iv,k$,j$]=hd(Wp),[G2,SQ]=fd(Wp,[j$,qp]),Lr=HG(),$2=qp(),[M$,sb]=G2(Wp),z2=y.forwardRef((t,e)=>{const{__scopeMenubar:r,value:n,onValueChange:s,defaultValue:i,loop:o=!0,dir:l,...c}=t,u=Bp(l),h=$2(r),[f="",m]=Ou({prop:n,onChange:s,defaultProp:i}),[v,x]=y.useState(null);return a.jsx(M$,{scope:r,value:f,onMenuOpen:y.useCallback(p=>{m(p),x(p)},[m]),onMenuClose:y.useCallback(()=>m(""),[m]),onMenuToggle:y.useCallback(p=>{m(w=>w?"":p),x(p)},[m]),dir:u,loop:o,children:a.jsx(iv.Provider,{scope:r,children:a.jsx(iv.Slot,{scope:r,children:a.jsx(d2,{asChild:!0,...h,orientation:"horizontal",loop:o,dir:u,currentTabStopId:v,onCurrentTabStopIdChange:x,children:a.jsx(qe.div,{role:"menubar",...c,ref:e})})})})})});z2.displayName=Wp;var ib="MenubarMenu",[D$,W2]=G2(ib),Q2=t=>{const{__scopeMenubar:e,value:r,...n}=t,s=Jo(),i=r||s||"LEGACY_REACT_AUTO_VALUE",o=sb(ib,e),l=Lr(e),c=y.useRef(null),u=y.useRef(!1),h=o.value===i;return y.useEffect(()=>{h||(u.current=!1)},[h]),a.jsx(D$,{scope:e,value:i,triggerId:Jo(),triggerRef:c,contentId:Jo(),wasKeyboardTriggerOpenRef:u,children:a.jsx(y$,{...l,open:h,onOpenChange:f=>{f||o.onMenuClose()},modal:!1,dir:o.dir,...n})})};Q2.displayName=ib;var ov="MenubarTrigger",Y2=y.forwardRef((t,e)=>{const{__scopeMenubar:r,disabled:n=!1,...s}=t,i=$2(r),o=Lr(r),l=sb(ov,r),c=W2(ov,r),u=y.useRef(null),h=it(e,u,c.triggerRef),[f,m]=y.useState(!1),v=l.value===c.value;return a.jsx(iv.ItemSlot,{scope:r,value:c.value,disabled:n,children:a.jsx(h2,{asChild:!0,...i,focusable:!n,tabStopId:c.value,children:a.jsx(v$,{asChild:!0,...o,children:a.jsx(qe.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":v,"aria-controls":v?c.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":v?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:h,onPointerDown:me(t.onPointerDown,x=>{!n&&x.button===0&&x.ctrlKey===!1&&(l.onMenuOpen(c.value),v||x.preventDefault())}),onPointerEnter:me(t.onPointerEnter,()=>{var p;!!l.value&&!v&&(l.onMenuOpen(c.value),(p=u.current)==null||p.focus())}),onKeyDown:me(t.onKeyDown,x=>{n||(["Enter"," "].includes(x.key)&&l.onMenuToggle(c.value),x.key==="ArrowDown"&&l.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(x.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,x.preventDefault()))}),onFocus:me(t.onFocus,()=>m(!0)),onBlur:me(t.onBlur,()=>m(!1))})})})})});Y2.displayName=ov;var O$="MenubarPortal",H2=t=>{const{__scopeMenubar:e,...r}=t,n=Lr(e);return a.jsx(x$,{...n,...r})};H2.displayName=O$;var av="MenubarContent",K2=y.forwardRef((t,e)=>{const{__scopeMenubar:r,align:n="start",...s}=t,i=Lr(r),o=sb(av,r),l=W2(av,r),c=k$(r),u=y.useRef(!1);return a.jsx(w$,{id:l.contentId,"aria-labelledby":l.triggerId,"data-radix-menubar-content":"",...i,...s,ref:e,align:n,onCloseAutoFocus:me(t.onCloseAutoFocus,h=>{var m;!!!o.value&&!u.current&&((m=l.triggerRef.current)==null||m.focus()),u.current=!1,h.preventDefault()}),onFocusOutside:me(t.onFocusOutside,h=>{const f=h.target;c().some(v=>{var x;return(x=v.ref.current)==null?void 0:x.contains(f)})&&h.preventDefault()}),onInteractOutside:me(t.onInteractOutside,()=>{u.current=!0}),onEntryFocus:h=>{l.wasKeyboardTriggerOpenRef.current||h.preventDefault()},onKeyDown:me(t.onKeyDown,h=>{if(["ArrowRight","ArrowLeft"].includes(h.key)){const f=h.target,m=f.hasAttribute("data-radix-menubar-subtrigger"),v=f.closest("[data-radix-menubar-content]")!==h.currentTarget,p=(o.dir==="rtl"?"ArrowRight":"ArrowLeft")===h.key;if(!p&&m||v&&p)return;let b=c().filter(L=>!L.disabled).map(L=>L.value);p&&b.reverse();const C=b.indexOf(l.value);b=o.loop?J$(b,C+1):b.slice(C+1);const[R]=b;R&&o.onMenuOpen(R)}},{checkForDefaultPrevented:!1}),style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});K2.displayName=av;var L$="MenubarGroup",F$=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(b$,{...s,...n,ref:e})});F$.displayName=L$;var V$="MenubarLabel",J2=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(E$,{...s,...n,ref:e})});J2.displayName=V$;var B$="MenubarItem",X2=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(C$,{...s,...n,ref:e})});X2.displayName=B$;var U$="MenubarCheckboxItem",Z2=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(_$,{...s,...n,ref:e})});Z2.displayName=U$;var q$="MenubarRadioGroup",G$=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(T$,{...s,...n,ref:e})});G$.displayName=q$;var $$="MenubarRadioItem",eP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(A$,{...s,...n,ref:e})});eP.displayName=$$;var z$="MenubarItemIndicator",tP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(S$,{...s,...n,ref:e})});tP.displayName=z$;var W$="MenubarSeparator",rP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(N$,{...s,...n,ref:e})});rP.displayName=W$;var Q$="MenubarArrow",Y$=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(I$,{...s,...n,ref:e})});Y$.displayName=Q$;var H$="MenubarSubTrigger",nP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(R$,{"data-radix-menubar-subtrigger":"",...s,...n,ref:e})});nP.displayName=H$;var K$="MenubarSubContent",sP=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Lr(r);return a.jsx(P$,{...s,"data-radix-menubar-content":"",...n,ref:e,style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});sP.displayName=K$;function J$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var iP=z2,X$=Q2,oP=Y2,Z$=H2,aP=K2,lP=J2,cP=X2,uP=Z2,dP=eP,hP=tP,fP=rP,mP=nP,pP=sP;const ez=X$,gP=y.forwardRef(({className:t,...e},r)=>a.jsx(iP,{ref:r,className:rt("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",t),...e}));gP.displayName=iP.displayName;const yP=y.forwardRef(({className:t,...e},r)=>a.jsx(oP,{ref:r,className:rt("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t),...e}));yP.displayName=oP.displayName;const tz=y.forwardRef(({className:t,inset:e,children:r,...n},s)=>a.jsxs(mP,{ref:s,className:rt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",t),...n,children:[r,a.jsx(nO,{className:"ml-auto h-4 w-4"})]}));tz.displayName=mP.displayName;const rz=y.forwardRef(({className:t,...e},r)=>a.jsx(pP,{ref:r,className:rt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));rz.displayName=pP.displayName;const vP=y.forwardRef(({className:t,align:e="start",alignOffset:r=-4,sideOffset:n=8,...s},i)=>a.jsx(Z$,{children:a.jsx(aP,{ref:i,align:e,alignOffset:r,sideOffset:n,className:rt("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));vP.displayName=aP.displayName;const xP=y.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(cP,{ref:n,className:rt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));xP.displayName=cP.displayName;const nz=y.forwardRef(({className:t,children:e,checked:r,...n},s)=>a.jsxs(uP,{ref:s,className:rt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(hP,{children:a.jsx(aS,{className:"h-4 w-4"})})}),e]}));nz.displayName=uP.displayName;const sz=y.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(dP,{ref:n,className:rt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(hP,{children:a.jsx(iO,{className:"h-2 w-2 fill-current"})})}),e]}));sz.displayName=dP.displayName;const iz=y.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(lP,{ref:n,className:rt("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));iz.displayName=lP.displayName;const oz=y.forwardRef(({className:t,...e},r)=>a.jsx(fP,{ref:r,className:rt("-mx-1 my-1 h-px bg-muted",t),...e}));oz.displayName=fP.displayName;const az=({user:t,handleLogout:e,navigate:r})=>{const[n,s]=y.useState(!1),[i,o]=y.useState({name:t.name,mobileNumber:t.mobileNumber||""});y.useEffect(()=>{n&&o({name:t.name,mobileNumber:t.mobileNumber||""})},[n,t.name,t.mobileNumber]);const l=()=>{s(!0)},c=()=>{console.log("Saving profile:",i),s(!1)},u=()=>{o({name:t.name,mobileNumber:t.mobileNumber||""}),s(!1)},h=f=>{if(f==="logout")e();else if(f==="profile")l();else{const m=BC.find(v=>v.key===f);m&&r(m.route)}};return a.jsxs(a.Fragment,{children:[a.jsx(gP,{children:a.jsxs(ez,{children:[a.jsx(yP,{className:"bg-transparent text-black border border-white",children:"Menu"}),a.jsx(vP,{children:BC.filter(f=>f.roles.includes(t.role)).map(f=>{const m=f.icon;return a.jsxs(xP,{className:f.colorClass+" flex gap-2 items-center",onClick:()=>h(f.key),children:[a.jsx(m,{className:"w-4 h-4"}),f.label]},f.key)})})]})}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 grid place-items-center p-4",children:a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit Profile"}),a.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white transition-colors",children:a.jsx(sa,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),a.jsx(Ct,{value:i.name,onChange:f=>o({...i,name:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter your name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),a.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-700/30 border border-gray-600 rounded-md",children:[a.jsx(fy,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-300 text-sm",children:t.email})]}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Email cannot be changed for security reasons"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),a.jsx(Ct,{value:i.mobileNumber,onChange:f=>o({...i,mobileNumber:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter mobile number",type:"tel"})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(je,{onClick:c,className:"flex-1 bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-700 hover:to-cyan-800",children:"Save Changes"}),a.jsx(je,{onClick:u,variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"})]})]})]})})]})};function jr({className:t,...e}){return a.jsx("div",{className:rt("animate-pulse rounded-md bg-muted",t),...e})}const lz=()=>a.jsxs("div",{className:"flex items-center justify-between px-4 py-4 mb-4",children:[a.jsx(jr,{className:"h-8 w-32 rounded"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(jr,{className:"h-8 w-20 rounded"}),a.jsx(jr,{className:"h-8 w-20 rounded"}),a.jsx(jr,{className:"h-8 w-20 rounded"})]})]}),cz=()=>a.jsxs("div",{className:"mb-6 bg-gray-900/80 backdrop-blur-sm border border-red-900/30 text-center relative overflow-hidden rounded-2xl",children:[a.jsxs("div",{className:"flex flex-col items-center p-6",children:[a.jsx(jr,{className:"h-16 w-16 rounded-full mb-2"}),a.jsx(jr,{className:"h-6 w-40 mb-2"}),a.jsx(jr,{className:"h-4 w-56 mb-2"})]}),a.jsx("div",{className:"px-6 pb-4",children:a.jsx(jr,{className:"h-4 w-32 mx-auto"})})]}),uz=()=>a.jsxs("div",{className:"flex gap-4 mb-6 justify-center",children:[a.jsx(jr,{className:"h-8 w-24 rounded"}),a.jsx(jr,{className:"h-8 w-24 rounded"}),a.jsx(jr,{className:"h-8 w-24 rounded"})]}),dz=()=>a.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-2xl p-6 min-h-[220px] shadow-2xl mb-6",children:[a.jsx(jr,{className:"h-6 w-40 mb-4"}),a.jsx(jr,{className:"h-4 w-56 mb-4"}),a.jsx(jr,{className:"h-4 w-full rounded mb-2"}),a.jsx(jr,{className:"h-8 w-32 mt-6 mx-auto"})]}),hz=({reward:t,onClose:e})=>{const r=Yn(),[n,s]=y.useState(!0),[i,o]=y.useState(!0);y.useEffect(()=>{const u=setTimeout(()=>s(!1),5e3),h=setTimeout(()=>o(!1),3e3);return()=>{clearTimeout(u),clearTimeout(h)}},[]);const l=u=>{switch(u){case"percentage":return"";case"fixed_amount":return"";case"free_item":return"";default:return""}},c=u=>{switch(u){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:[n&&a.jsx($R,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:300,recycle:!1,colors:["#ef4444","#fff","#facc15","#ff9800","#a3e635","#8b5cf6"]}),i&&a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[a.jsx("div",{className:"w-96 h-96 border-4 border-red-500/30 rounded-full animate-ping"}),a.jsx("div",{className:"absolute w-80 h-80 border-4 border-yellow-500/30 rounded-full animate-ping",style:{animationDelay:"0.5s"}}),a.jsx("div",{className:"absolute w-64 h-64 border-4 border-green-500/30 rounded-full animate-ping",style:{animationDelay:"1s"}})]})}),a.jsxs("div",{className:"relative z-10 bg-gradient-to-br from-gray-900/95 to-red-900/95 border border-red-800/50 rounded-3xl p-8 max-w-md mx-4 text-center shadow-2xl",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:l(t.rewardType)}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:" Congratulations! "}),a.jsx("p",{className:"text-gray-300 text-lg",children:"You've earned your reward!"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-800/50 to-red-800/50 border border-red-700/50 rounded-2xl p-6 mb-6",children:[a.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:t.rewardDescription}),a.jsx("div",{className:"text-gray-300 mb-4",children:t.settingsSnapshot.descriptionMessage}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:t.rewardType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:t.rewardValue})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Goal:"}),a.jsxs("span",{className:"text-white",children:[t.settingsSnapshot.purchaseLimit," purchases"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Earned:"}),a.jsx("span",{className:"text-white",children:t.createdAt.toDate().toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(je,{onClick:()=>r("/rewards"),className:`w-full bg-gradient-to-r ${c(t.rewardType)} hover:opacity-90 text-white font-semibold py-3 text-lg`,children:[a.jsx(Bt,{className:"w-5 h-5 mr-2"}),"View All Rewards"]}),a.jsx(je,{onClick:e,variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white",children:"Continue Shopping"})]}),a.jsx("div",{className:"mt-6 flex items-center justify-center",children:a.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-600 to-yellow-700 border border-yellow-500 rounded-full",children:[a.jsx(Sx,{className:"w-4 h-4 mr-2 text-yellow-200"}),a.jsx("span",{className:"text-yellow-100 text-sm font-medium",children:"ACHIEVEMENT UNLOCKED"})]})})]})]})},fz=({totalUsers:t,customers:e,activeUsers:r,totalRewards:n,totalOffers:s,activeOffers:i,recentUsers:o})=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"}),a.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"All registered users"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),a.jsx("div",{className:"text-green-300 text-lg",children:"Customers"}),a.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Loyalty program members"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r}),a.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),a.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-yellow-400 mb-2",children:n}),a.jsx("div",{className:"text-yellow-300 text-lg",children:"Total Rewards"}),a.jsx("div",{className:"text-yellow-400 text-sm mt-2",children:"Earned by customers"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(Bt,{className:"w-5 h-5 mr-2 text-red-400"}),"Offers Status"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Total Offers:"}),a.jsx("span",{className:"text-white font-semibold",children:s})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Active Offers:"}),a.jsx("span",{className:"text-green-400 font-semibold",children:i})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Inactive Offers:"}),a.jsx("span",{className:"text-red-400 font-semibold",children:s-i})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-indigo-800/50 border border-indigo-700/50 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(om,{className:"w-5 h-5 mr-2 text-indigo-400"}),"User Activity"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Active Rate:"}),a.jsxs("span",{className:"text-white font-semibold",children:[e.length>0?Math.round(r/e.length*100):0,"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Avg. Rewards:"}),a.jsx("span",{className:"text-white font-semibold",children:e.length>0?(n/e.length).toFixed(1):0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Engagement:"}),a.jsx("span",{className:"text-green-400 font-semibold",children:r>0?"High":"Low"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(Fu,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Business Insights"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:[t>0?Math.round(e.length/t*100):0,"%"]}),a.jsx("div",{className:"text-blue-300 text-sm",children:"Customer Conversion"}),a.jsx("div",{className:"text-blue-400 text-xs",children:"Users to Loyalty Members"})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-1",children:[e.length>0?Math.round(r/e.length*100):0,"%"]}),a.jsx("div",{className:"text-green-300 text-sm",children:"Customer Engagement"}),a.jsx("div",{className:"text-green-400 text-xs",children:"Active in Last 7 Days"})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:[s>0?Math.round(i/s*100):0,"%"]}),a.jsx("div",{className:"text-purple-300 text-sm",children:"Offer Utilization"}),a.jsx("div",{className:"text-purple-400 text-xs",children:"Active vs Total Offers"})]})]})]})]}),mz=({users:t,searchTerm:e,setSearchTerm:r,statusFilter:n,setStatusFilter:s,roleFilter:i,setRoleFilter:o})=>{var F,I,S;const[l,c]=y.useState(null),[u,h]=y.useState(!1),[f,m]=y.useState(!1),[v,x]=y.useState({name:"",email:"",feedback:""}),p=N=>{c(N),h(!0)},w=N=>{N.role==="customer"&&(x({name:N.name,email:N.email,feedback:N.feedback||""}),c(N),m(!0))},_=()=>{console.log("Saving user:",l==null?void 0:l.id,v),m(!1),c(null)},b=t.length,C=t.filter(N=>N.role==="customer"),R=t.filter(N=>N.role==="admin"||N.role==="super_admin"),L=t.filter(N=>N.lastScanAt&&new Date().getTime()-N.lastScanAt.toDate().getTime()<7*24*60*60*1e3);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(lS,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[a.jsx("div",{className:"text-sm font-bold text-blue-400",children:b}),a.jsx("div",{className:"text-blue-300 text-xs",children:"Users"})]}),a.jsxs("div",{className:"bg-green-900/20 border border-green-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[a.jsx("div",{className:"text-sm font-bold text-green-400",children:C.length}),a.jsx("div",{className:"text-green-300 text-xs",children:"Customers"})]}),a.jsxs("div",{className:"bg-purple-900/20 border border-purple-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[a.jsx("div",{className:"text-sm font-bold text-purple-400",children:R.length}),a.jsx("div",{className:"text-purple-300 text-xs",children:"Admins"})]}),a.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[a.jsx("div",{className:"text-sm font-bold text-yellow-400",children:L.length}),a.jsx("div",{className:"text-yellow-300 text-xs",children:"Active"})]})]})]}),a.jsx(je,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",onClick:()=>{r(""),s("all"),o("all")},children:"Clear Filters"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Users"}),a.jsxs("div",{className:"relative",children:[a.jsx(uS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(Ct,{placeholder:"Search by name or email...",value:e,onChange:N=>r(N.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),a.jsxs("select",{value:n,onChange:N=>s(N.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active (Last 7 days)"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role Filter"}),a.jsxs("select",{value:i,onChange:N=>o(N.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"customer",children:"Customers"}),a.jsx("option",{value:"admin",children:"Admins"}),a.jsx("option",{value:"super_admin",children:"Super Admins"})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50",children:a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(ls,{className:"w-5 h-5 mr-2 text-blue-400"}),"Users (",t.length,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-700/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"User"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Role"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Status"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Purchases"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Rewards"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Last Activity"}),a.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:t.map(N=>{var j;return a.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-colors duration-200",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"text-white text-sm font-bold",children:N.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:N.name}),a.jsxs("div",{className:"text-gray-400 text-sm flex items-center",children:[a.jsx(fy,{className:"w-3 h-3 mr-1"}),N.email]})]})]})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${N.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":N.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:N.role.replace("_"," ").toUpperCase()})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${N.lastScanAt&&new Date().getTime()-N.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50":"bg-gradient-to-r from-gray-900/50 to-gray-800/50 text-gray-300 border border-gray-700/50"}`,children:N.lastScanAt&&new Date().getTime()-N.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(as,{className:"w-4 h-4 text-blue-400"}),a.jsx("span",{className:"text-white font-medium",children:N.purchases})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mf,{className:"w-4 h-4 text-yellow-400"}),a.jsx("span",{className:"text-white font-medium",children:((j=N.completedRewards)==null?void 0:j.length)||0})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fu,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-300",children:N.lastScanAt?N.lastScanAt.toDate().toLocaleDateString():"Never"})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(je,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>p(N),title:"View user profile",children:a.jsx(_x,{className:"w-4 h-4"})}),a.jsx(je,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200",onClick:()=>w(N),disabled:N.role!=="customer",title:N.role!=="customer"?"Only customers can be edited":"Edit customer",children:a.jsx(my,{className:"w-4 h-4"})})]})})]},N.id)})})]})})]}),u&&l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(ls,{className:"w-5 h-5 mr-2 text-blue-400"}),"User Profile"]}),a.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:a.jsx(sa,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"text-white text-2xl font-bold",children:l.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-2xl font-bold text-white",children:l.name}),a.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 mb-2",children:[a.jsx(fy,{className:"w-4 h-4"}),a.jsx("span",{children:l.email})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":l.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:l.role.replace("_"," ").toUpperCase()})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-800/30 border border-blue-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-400 mb-2 flex items-center justify-center",children:[a.jsx(as,{className:"w-5 h-5 mr-2"}),(()=>{var j;const N=((j=l.completedRewards)==null?void 0:j.reduce((D,O)=>{var k;return D+(((k=O.scanHistory)==null?void 0:k.length)||0)},0))||0;return Math.max(l.purchases||0,N)})()]}),a.jsx("div",{className:"text-blue-300 text-sm",children:"Lifetime Stamps"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/30 border border-green-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-2 flex items-center justify-center",children:[a.jsx(mf,{className:"w-5 h-5 mr-2"}),((F=l.completedRewards)==null?void 0:F.filter(N=>{var j,D;return((j=N.scanHistory)==null?void 0:j.length)>=(((D=N.offerSnapshot)==null?void 0:D.stampRequirement)||0)}).length)||0]}),a.jsx("div",{className:"text-green-300 text-sm",children:"Completed Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/30 border border-purple-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-2 flex items-center justify-center",children:[a.jsx(om,{className:"w-5 h-5 mr-2"}),((I=l.completedRewards)==null?void 0:I.filter(N=>{var j,D;return((j=N.scanHistory)==null?void 0:j.length)<(((D=N.offerSnapshot)==null?void 0:D.stampRequirement)||0)}).length)||0]}),a.jsx("div",{className:"text-purple-300 text-sm",children:"In-Progress Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 to-yellow-800/30 border border-yellow-700/30 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-yellow-400 mb-2 flex items-center justify-center",children:[a.jsx(Bt,{className:"w-5 h-5 mr-2"}),((S=l.completedRewards)==null?void 0:S.filter(N=>N.claimedAt).length)||0]}),a.jsx("div",{className:"text-yellow-300 text-sm",children:"Redeemed Rewards"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h5",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(om,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Activity Details"]}),a.jsx("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-1 flex items-center",children:[a.jsx(Cx,{className:"w-4 h-4 mr-1"}),"Member Since"]}),a.jsx("div",{className:"text-white font-medium",children:l.createdAt.toDate().toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-1 flex items-center",children:[a.jsx(Fu,{className:"w-4 h-4 mr-1"}),"Last Activity"]}),a.jsx("div",{className:"text-white font-medium",children:l.lastScanAt?l.lastScanAt.toDate().toLocaleDateString():"Never"})]})]})}),l.feedback&&a.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center",children:[a.jsx(Sx,{className:"w-4 h-4 mr-1"}),"Feedback"]}),a.jsx("div",{className:"text-white",children:l.feedback})]}),l.role==="customer"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-700/30 to-blue-800/30 border border-blue-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-3 flex items-center",children:[a.jsx(as,{className:"w-4 h-4 mr-1"}),"Current In-Progress Rewards"]}),l.completedRewards&&l.completedRewards.filter(N=>{var j,D;return((j=N.scanHistory)==null?void 0:j.length)<(((D=N.offerSnapshot)==null?void 0:D.stampRequirement)||0)}).length>0?a.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(N=>{var j,D;return((j=N.scanHistory)==null?void 0:j.length)<(((D=N.offerSnapshot)==null?void 0:D.stampRequirement)||0)}).map((N,j)=>{var G,H,J;const D=((G=N.scanHistory)==null?void 0:G.length)||0,O=((H=N.offerSnapshot)==null?void 0:H.stampRequirement)||0,k=O>0?Math.min(D/O*100,100):0;return a.jsxs("div",{className:"bg-blue-800/20 rounded p-3 border border-blue-700/30",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-white font-medium text-sm",children:((J=N.offerSnapshot)==null?void 0:J.offerName)||"Loyalty Reward"}),a.jsxs("span",{className:"text-blue-300 text-xs",children:[D,"/",O," stamps"]})]}),a.jsx("div",{className:"w-full bg-blue-600/30 rounded-full h-2 mb-2",children:a.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})}),a.jsxs("div",{className:"text-blue-300 text-xs",children:["Started:"," ",N.createdAt.toDate().toLocaleDateString()]})]},j)})}):a.jsx("div",{className:"text-gray-400 text-sm italic",children:"No rewards in progress"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-700/30 to-green-800/30 border border-green-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-3 flex items-center",children:[a.jsx(Bt,{className:"w-4 h-4 mr-1"}),"Available Rewards to Redeem"]}),(()=>{var D;const j=(((D=l.completedRewards)==null?void 0:D.filter(O=>{var k,G;return((k=O.scanHistory)==null?void 0:k.length)>=((G=O.offerSnapshot)==null?void 0:G.stampRequirement)}))||[]).filter(O=>!O.claimedAt);return console.log(j),j.length>0?a.jsx("div",{className:"space-y-3",children:j.map((O,k)=>{var G;return a.jsxs("div",{className:"bg-green-800/20 rounded p-3 border border-green-700/30",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-white font-medium text-sm",children:((G=O.offerSnapshot)==null?void 0:G.offerName)||"Loyalty Reward"}),a.jsx("span",{className:"text-green-300 text-xs",children:"Ready to Redeem"})]}),a.jsx("div",{className:"text-green-300 text-xs mb-2",children:O.rewardDescription||"No description"}),a.jsxs("div",{className:"text-green-300 text-xs",children:["Completed:"," ",O.createdAt.toDate().toLocaleDateString()]})]},k)})}):a.jsx("div",{className:"text-gray-400 text-sm italic",children:"No rewards ready to redeem"})})()]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-700/30 to-purple-800/30 border border-purple-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-3 flex items-center",children:[a.jsx(mf,{className:"w-4 h-4 mr-1"}),"Already Redeemed Rewards"]}),l.completedRewards&&l.completedRewards.filter(N=>N.claimedAt).length>0?a.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(N=>N.claimedAt).map((N,j)=>{var D,O;return a.jsxs("div",{className:"bg-purple-800/20 rounded p-3 border border-purple-700/30",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-white font-medium text-sm",children:((D=N.offerSnapshot)==null?void 0:D.offerName)||"Loyalty Reward"}),a.jsx("span",{className:"text-purple-300 text-xs",children:"Redeemed"})]}),a.jsx("div",{className:"text-purple-300 text-xs mb-2",children:((O=N.offerSnapshot)==null?void 0:O.rewardDescription)||"No description"}),a.jsxs("div",{className:"text-purple-300 text-xs",children:["Redeemed:"," ",N.claimedAt?N.claimedAt.toDate().toLocaleDateString():"Unknown"]})]},j)})}):a.jsx("div",{className:"text-gray-400 text-sm italic",children:"No rewards redeemed yet"})]})]}),l.role!=="customer"&&a.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-4",children:[a.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center",children:[a.jsx(ls,{className:"w-4 h-4 mr-1"}),"Admin Information"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Role Level:"}),a.jsx("span",{className:"text-white font-medium",children:l.role==="super_admin"?"Super Administrator":"Administrator"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Permissions:"}),a.jsx("span",{className:"text-white font-medium",children:l.role==="super_admin"?"Full system access":"User and offer management"})]})]})]})]})]})]})}),f&&l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-md w-full shadow-2xl",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(my,{className:"w-5 h-5 mr-2 text-green-400"}),"Edit Customer"]}),a.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:a.jsx(sa,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),a.jsx(Ct,{value:v.name,onChange:N=>x({...v,name:N.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),a.jsx(Ct,{value:v.email,onChange:N=>x({...v,email:N.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Feedback"}),a.jsx("textarea",{value:v.feedback,onChange:N=>x({...v,feedback:N.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 h-20 resize-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"Customer feedback..."})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(je,{onClick:_,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200",children:"Save Changes"}),a.jsx(je,{onClick:()=>m(!1),variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200",children:"Cancel"})]})]})]})})]})},pz=({offers:t,userRole:e,onOfferCreated:r,currentUser:n})=>{const[s,i]=y.useState(""),[o,l]=y.useState("all"),[c,u]=y.useState(!1),[h,f]=y.useState(!1),[m,v]=y.useState(""),[x,p]=y.useState(""),[w,_]=y.useState({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),b=t.filter(F=>{const I=F.name.toLowerCase().includes(s.toLowerCase())||F.description.toLowerCase().includes(s.toLowerCase()),S=o==="all"||o==="active"&&F.isActive||o==="inactive"&&!F.isActive;return I&&S});t.length,t.filter(F=>F.isActive).length,t.filter(F=>!F.isActive).length,t.reduce((F,I)=>F+I.stampRequirement,0),y.useEffect(()=>{const F=I=>{I.key==="Escape"&&c&&R()};return c&&document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}},[c]);const C=async()=>{try{if(f(!0),v(""),p(""),!w.name.trim()){v("Offer name is required");return}if(!w.description.trim()){v("Description is required");return}if(!w.rewardValue.trim()){v("Reward value is required");return}if(!w.rewardDescription.trim()){v("Reward description is required");return}const F={name:w.name.trim(),description:w.description.trim(),stampRequirement:w.stampRequirement,stampsPerScan:w.stampsPerScan,rewardType:w.rewardType,rewardValue:w.rewardValue.trim(),rewardDescription:w.rewardDescription.trim(),isActive:!0,expiresAt:w.expiryDate?Be.fromDate(new Date(w.expiryDate)):null};if(!n)throw new Error("User context not available");await BR(n,F),p("Offer created successfully!"),r==null||r(),setTimeout(()=>{p("")},5e3),_({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),v("")}catch(F){v(F instanceof Error?F.message:"Failed to create offer. Please try again."),console.error("Error creating offer:",F)}finally{f(!1)}},R=()=>{_({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),v(""),p(""),f(!1)},L=()=>{const F=new Date;return F.setFullYear(F.getFullYear()+10),F.toISOString().split("T")[0]};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(lS,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]})}),a.jsx(je,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",onClick:()=>{i(""),l("all")},children:"Clear Filters"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Offers"}),a.jsxs("div",{className:"relative",children:[a.jsx(uS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(Ct,{placeholder:"Search by name or description...",value:s,onChange:F=>i(F.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),a.jsxs("select",{value:o,onChange:F=>l(F.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active Offers"}),a.jsx("option",{value:"inactive",children:"Inactive Offers"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs(je,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 w-full",onClick:()=>u(!0),disabled:e!=="super_admin",title:e!=="super_admin"?"Only super admins can create offers":"Create new loyalty offer",children:[a.jsx(Fh,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50",children:a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(Bt,{className:"w-5 h-5 mr-2 text-green-400"}),"Loyalty Offers (",b.length,")"]})}),x&&a.jsx("div",{className:"mx-6 mt-4 bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gl,{className:"w-5 h-5 text-green-400"}),a.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),a.jsx("div",{className:"p-6",children:b.length>0?a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(F=>a.jsxs("div",{className:`bg-gradient-to-br ${F.isActive?"from-green-900/30 to-green-800/30 border-green-700/50":"from-gray-800/30 to-gray-700/30 border-gray-600/50"} border rounded-xl p-6 hover:shadow-lg transition-all duration-300`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white truncate",children:F.name}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${F.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:F.isActive?"ACTIVE":"INACTIVE"})]}),a.jsx("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:F.description}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[a.jsx(as,{className:"w-4 h-4 mr-2"}),"Stamps Required"]}),a.jsx("span",{className:"text-white font-medium",children:F.stampRequirement})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[a.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Reward"]}),a.jsx("span",{className:"text-white font-medium",children:F.rewardDescription})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[a.jsx(om,{className:"w-4 h-4 mr-2"}),"Type"]}),a.jsx("span",{className:"text-white font-medium capitalize",children:F.rewardType})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[a.jsx(Cx,{className:"w-4 h-4 mr-2"}),"Created"]}),a.jsx("span",{className:"text-white font-medium text-sm",children:F.createdAt.toDate().toLocaleDateString()})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(je,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200 flex-1",title:"View offer details",children:a.jsx(_x,{className:"w-4 h-4"})}),a.jsx(je,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200 flex-1",title:"Edit offer",children:a.jsx(my,{className:"w-4 h-4"})}),a.jsx(je,{size:"sm",variant:"outline",className:"border-red-600 text-red-400 hover:bg-red-600 hover:text-white transition-all duration-200 flex-1",title:"Delete offer",children:a.jsx(dO,{className:"w-4 h-4"})})]})]},F.offerId))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Bt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No offers found"}),a.jsx("p",{className:"text-gray-400 mb-6",children:s||o!=="all"?"Try adjusting your search or filters":"Create your first loyalty offer to get started"}),!s&&o==="all"&&a.jsxs(je,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",onClick:()=>u(!0),disabled:e!=="super_admin",children:[a.jsx(Fh,{className:"w-4 h-4 mr-2"}),"Create First Offer"]})]})})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(Fh,{className:"w-5 h-5 mr-2 text-green-400"}),"Create New Loyalty Offer"]}),a.jsx("button",{onClick:R,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:a.jsx(sa,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[m&&a.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sO,{className:"w-5 h-5 text-red-400"}),a.jsx("span",{className:"text-red-300 font-medium",children:m})]})}),x&&a.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gl,{className:"w-5 h-5 text-green-400"}),a.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(Bt,{className:"w-4 h-4 mr-2 text-green-400"}),"Basic Information"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Name *"}),a.jsx(Ct,{value:w.name,onChange:F=>_({...w,name:F.target.value}),placeholder:"Enter offer name...",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),a.jsx(Vp,{value:w.description,onChange:F=>_({...w,description:F.target.value}),placeholder:"Describe the offer...",rows:3,className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(as,{className:"w-4 h-4 mr-2 text-blue-400"}),"Stamp Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Stamps Required *"}),a.jsxs("div",{className:"relative",children:[a.jsx(N1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(Ct,{type:"number",min:"1",value:w.stampRequirement,onChange:F=>_({...w,stampRequirement:parseInt(F.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stamps Per Scan *"}),a.jsxs("div",{className:"relative",children:[a.jsx(N1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(Ct,{type:"number",min:"1",value:w.stampsPerScan,onChange:F=>_({...w,stampsPerScan:parseInt(F.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 stamp per scan. Can be increased for special promotions."})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(Bt,{className:"w-4 h-4 mr-2 text-purple-400"}),"Reward Details"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Type *"}),a.jsxs("select",{value:w.rewardType,onChange:F=>_({...w,rewardType:F.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"percentage",children:"Percentage Discount"}),a.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),a.jsx("option",{value:"free_item",children:"Free Item"}),a.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Value *"}),a.jsx(Ct,{value:w.rewardValue,onChange:F=>_({...w,rewardValue:F.target.value}),placeholder:w.rewardType==="percentage"?"20":w.rewardType==="fixed_amount"?"5.00":"Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Description *"}),a.jsx(Ct,{value:w.rewardDescription,onChange:F=>_({...w,rewardDescription:F.target.value}),placeholder:"e.g., 20% OFF, $5.00 OFF, Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(Fu,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Expiry Settings"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),a.jsx(Ct,{type:"date",value:w.expiryDate||L(),onChange:F=>_({...w,expiryDate:F.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 10 years from creation date"})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(je,{onClick:C,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 flex-1",disabled:!w.name||!w.description||!w.rewardValue||!w.rewardDescription||h,children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Fh,{className:"w-4 h-4 mr-2"}),"Create Offer"]})}),a.jsx(je,{onClick:R,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200 flex-1",disabled:h,children:"Cancel"})]})]})]})})]})},gz=({allUsers:t})=>{const e=t.flatMap(s=>(s.completedRewards||[]).map(i=>({...i,userName:s.name,userEmail:s.email,userId:s.id}))),r=e.filter(s=>!s.claimedAt),n=e.filter(s=>s.claimedAt);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:e.length}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:r.length}),a.jsx("div",{className:"text-green-300 text-lg",children:"Active Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:n.length}),a.jsx("div",{className:"text-yellow-300 text-lg",children:"Claimed Rewards"})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:["Active Rewards (",r.length,")"]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(s=>a.jsxs("div",{className:"bg-gradient-to-br from-green-900/40 to-green-800/40 border border-green-700/50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold text-white",children:s.rewardDescription}),a.jsx("span",{className:"text-xs text-green-300 bg-green-900/50 px-2 py-1 rounded-full",children:"ACTIVE"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:s.userName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:s.rewardType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:s.rewardValue})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Earned:"}),a.jsx("span",{className:"text-white",children:s.createdAt.toDate().toLocaleDateString()})]})]})]},s.rewardId))})]}),n.length>0&&a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:["Claimed Rewards (",n.length,")"]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(s=>{var i;return a.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 border border-yellow-700/50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold text-white",children:s.rewardDescription}),a.jsx("span",{className:"text-xs text-yellow-300 bg-yellow-900/50 px-2 py-1 rounded-full",children:"CLAIMED"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:s.userName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:s.rewardType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:s.rewardValue})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Earned:"}),a.jsx("span",{className:"text-white",children:s.createdAt.toDate().toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Redeemed:"}),a.jsx("span",{className:"text-yellow-300 font-medium",children:(i=s.claimedAt)==null?void 0:i.toDate().toLocaleDateString()})]})]})]},s.rewardId)})})]})]})},yz=({allUsers:t,offers:e})=>{const r=t.filter(i=>i.role==="customer"),n=r.reduce((i,o)=>{var l;return i+(((l=o.completedRewards)==null?void 0:l.length)||0)},0),s=r.filter(i=>i.lastScanAt&&new Date().getTime()-i.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:r.length}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:n}),a.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:s}),a.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:e.length}),a.jsx("div",{className:"text-yellow-300 text-lg",children:"Total Offers"})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Performance Overview"}),a.jsx("div",{className:"h-64 bg-gray-700/30 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(Nx,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Performance charts coming soon"})]})})]})]})},vz=({user:t})=>a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"System Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"General Settings"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Offer"}),a.jsx("select",{className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2",children:a.jsx("option",{children:"Select default offer for new users"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Timeout"}),a.jsx(Ct,{type:"number",placeholder:"24",className:"bg-gray-700/50 border-gray-600 text-white"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Security Settings"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"multiDevice",className:"rounded"}),a.jsx("label",{htmlFor:"multiDevice",className:"text-gray-300",children:"Allow multi-device login"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"sessionValidation",className:"rounded"}),a.jsx("label",{htmlFor:"sessionValidation",className:"text-gray-300",children:"Enable session validation"})]})]})]})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx(je,{className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800",children:"Save Settings"})})]})}),xz=({user:t,allUsers:e,offers:r,onLogout:n,onScan:s})=>{var O;const[i,o]=y.useState(()=>localStorage.getItem("adminActiveTab")||"overview"),[l,c]=y.useState(""),[u,h]=y.useState("all"),[f,m]=y.useState("all"),[v,x]=y.useState(!1),[p,w]=y.useState(r),_=Yn();y.useEffect(()=>{w(r)},[r]),y.useEffect(()=>{if((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="super_admin"){const k=cc(Tt,"offers"),G=_p(k,yw("createdAt","desc")),H=Sp(G,J=>{const ie=[];J.forEach(q=>{ie.push({...q.data(),offerId:q.id})}),w(ie)},J=>{console.error("Error listening to offers:",J)});return()=>H()}},[t==null?void 0:t.role]);const b=async()=>{try{const k=await VR();w(k),console.log("Offers refreshed successfully. New offers count:",k.length)}catch(k){console.error("Failed to refresh offers:",k)}},C=e.filter(k=>{const G=k.name.toLowerCase().includes(l.toLowerCase())||k.email.toLowerCase().includes(l.toLowerCase()),H=u==="all"||u==="active"&&k.lastScanAt&&new Date().getTime()-k.lastScanAt.toDate().getTime()<7*24*60*60*1e3||u==="inactive"&&(!k.lastScanAt||new Date().getTime()-k.lastScanAt.toDate().getTime()>=7*24*60*60*1e3),J=f==="all"||k.role===f;return G&&H&&J}),R=e.length,L=e.filter(k=>k.role==="customer"),F=L.filter(k=>k.lastScanAt&&new Date().getTime()-k.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,I=L.reduce((k,G)=>{var H;return k+(((H=G.completedRewards)==null?void 0:H.length)||0)},0),S=p.length,N=p.filter(k=>k.isActive).length;y.useEffect(()=>{mt("admin_dashboard_view",{tab:i,user_id:t.id})},[i,t.id]);const j=[{id:"overview",label:"Overview",icon:oS,color:"text-blue-400"},{id:"users",label:"Users",icon:ls,color:"text-green-400"},{id:"offers",label:"Offers",icon:Bt,color:"text-purple-400"},{id:"rewards",label:"Rewards",icon:as,color:"text-yellow-400"},{id:"analytics",label:"Analytics",icon:Nx,color:"text-indigo-400"},{id:"settings",label:"Settings",icon:Ax,color:"text-red-400"}],D=k=>{o(k),localStorage.setItem("adminActiveTab",k),x(!1)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>x(!1)}),a.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 bg-gray-900/95 backdrop-blur-sm border-r border-red-800/50 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${v?"translate-x-0":"-translate-x-full"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-red-800/30",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"}),a.jsx("p",{className:"text-red-300 text-sm",children:"Vape Master"})]}),a.jsx("button",{onClick:()=>x(!1),className:"lg:hidden text-gray-400 hover:text-white",children:a.jsx(sa,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"p-6 border-b border-red-800/30",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-lg font-bold",children:t.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:t.name}),a.jsx("div",{className:"text-gray-400 text-sm capitalize",children:t.role.replace("_"," ")})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-2",children:j.map(k=>{const G=k.icon;return a.jsxs("button",{onClick:()=>D(k.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ${i===k.id?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-800/50"}`,children:[a.jsx(G,{className:`w-5 h-5 ${i===k.id?"text-white":k.color}`}),a.jsx("span",{className:"font-medium",children:k.label})]},k.id)})}),a.jsxs("div",{className:"p-4 space-y-3 border-t border-red-800/30",children:[a.jsxs(je,{onClick:s,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:[a.jsx(cO,{className:"w-4 h-4 mr-2"}),"Scan QR"]}),a.jsxs(je,{onClick:()=>_("/dashboard"),variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",children:[a.jsx(oO,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),a.jsxs(je,{onClick:n,variant:"outline",className:"w-full border-red-600 text-red-300 hover:bg-red-700/20",children:[a.jsx(cS,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),a.jsxs("div",{className:"lg:pl-80",children:[a.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50 sticky top-0 z-30",children:a.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>x(!0),className:"lg:hidden text-gray-400 hover:text-white",children:a.jsx(lO,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:(O=j.find(k=>k.id===i))==null?void 0:O.label}),a.jsxs("p",{className:"text-red-300 text-sm",children:[i==="overview"&&"System overview and key metrics",i==="users"&&"Manage users and permissions",i==="offers"&&"Create and manage loyalty offers",i==="rewards"&&"Track rewards and redemptions",i==="analytics"&&"Performance insights and reports",i==="settings"&&"System configuration and preferences"]})]})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-6 text-sm",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white font-semibold",children:R}),a.jsx("div",{className:"text-gray-400",children:"Users"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white font-semibold",children:S}),a.jsx("div",{className:"text-gray-400",children:"Offers"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white font-semibold",children:I}),a.jsx("div",{className:"text-gray-400",children:"Rewards"})]})]})]})}),a.jsxs("div",{className:"p-6",children:[i==="overview"&&a.jsx(fz,{totalUsers:R,customers:L,activeUsers:F,totalRewards:I,totalOffers:S,activeOffers:N,recentUsers:e.slice(0,5)}),i==="users"&&a.jsx(mz,{users:C,searchTerm:l,setSearchTerm:c,statusFilter:u,setStatusFilter:h,roleFilter:f,setRoleFilter:m}),i==="offers"&&a.jsx(pz,{offers:p,userRole:t.role,onOfferCreated:b,currentUser:t}),i==="rewards"&&a.jsx(gz,{allUsers:e}),i==="analytics"&&a.jsx(yz,{allUsers:e,offers:p}),i==="settings"&&a.jsx(vz,{user:t})]})]})]})},wz=()=>{const{user:t,loading:e,settings:r,allUsers:n,allUsersLoading:s,offers:i,showConfetti:o,confettiKey:l,lastUpdateTime:c,activeTab:u,setActiveTab:h,userPurchaseLimit:f,purchasesRemaining:m,handleLogout:v,navigate:x,handleOfferSelection:p}=fq(),[w,_]=y.useState(!1),[b,C]=y.useState(null),[R,L]=y.useState(!1),[F,I]=y.useState(null);if(e)return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsx(lz,{}),a.jsx("div",{className:"flex-1 px-6 pb-6",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx(cz,{}),a.jsx(uz,{}),a.jsx(dz,{})]})})]});if(!t)return null;const S=u==="progress",N=u==="offers",j=t.role==="customer";return t.role==="admin"||t.role==="super_admin"?a.jsx(xz,{user:t,allUsers:n,offers:i,onLogout:v,onScan:()=>x("/scan")}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o&&a.jsx($R,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:200,recycle:!1},l),a.jsx(Eq,{title:"Dashboard",onBack:()=>x("/"),actions:a.jsx(az,{user:t,handleLogout:v,navigate:x})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx(Sq,{activeTab:u,onTabChange:h,userRole:t.role}),N&&j&&a.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-green-300 mb-2 flex items-center",children:[a.jsx(Bt,{className:"w-6 h-6 mr-2 text-green-400"}),"Available Offers"]}),a.jsx("p",{className:"text-green-200/80 text-sm",children:"Choose an offer and start collecting stamps to earn rewards"})]}),a.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:i&&i.length>0?a.jsx("div",{className:"grid gap-4",children:i.filter(O=>O.isActive).map(O=>{var H,J;const k=(H=t.completedRewards)==null?void 0:H.find(ie=>{var q,W,se;return((q=ie.offerSnapshot)==null?void 0:q.offerId)===O.offerId&&((W=ie.scanHistory)==null?void 0:W.length)>=((se=ie.offerSnapshot)==null?void 0:se.stampRequirement)&&!ie.claimedAt}),G=(J=t.completedRewards)==null?void 0:J.find(ie=>{var q,W,se;return((q=ie.offerSnapshot)==null?void 0:q.offerId)===O.offerId&&((W=ie.scanHistory)==null?void 0:W.length)<((se=ie.offerSnapshot)==null?void 0:se.stampRequirement)&&!ie.claimedAt});return a.jsxs("div",{className:`bg-gradient-to-br ${G?"from-green-900/40 to-green-800/40 border-green-600/50 hover:from-green-900/50 hover:to-green-800/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50 hover:from-gray-800/50 hover:to-gray-700/50"} border rounded-xl p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-lg`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-1",children:O.name}),a.jsx("p",{className:"text-gray-300 text-sm",children:O.description})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${G?"bg-green-600/80 text-white border border-green-500/50 shadow-lg":"bg-gray-600/80 text-gray-200 border border-gray-500/50"}`,children:G?"ACTIVE":"AVAILABLE"})]}),a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Required Stamps:"}),a.jsx("span",{className:"text-white font-medium",children:O.stampRequirement})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Reward:"}),a.jsx("span",{className:"text-white font-medium",children:O.rewardDescription})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white font-medium capitalize",children:O.rewardType})]})]}),a.jsx("div",{className:"flex justify-center",children:G?a.jsx("button",{onClick:()=>{const ie={userId:t.id,userEmail:t.email,userName:t.name,offerId:O.offerId,offerName:O.name,stampsPerScan:O.stampsPerScan||1,timestamp:new Date().toISOString()};I(ie),L(!0)},className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg",children:"Continue Collecting"}):a.jsx("button",{onClick:()=>{const ie={userId:t.id,userEmail:t.email,userName:t.name,offerId:O.offerId,offerName:O.name,stampsPerScan:O.stampsPerScan||1,timestamp:new Date().toISOString()};I(ie),L(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg",children:k?"Start New Reward":"Start Collecting"})})]},O.offerId)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Bt,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),a.jsx("div",{className:"text-gray-300 text-lg font-medium mb-2",children:"No active offers available"}),a.jsx("div",{className:"text-gray-500 text-sm",children:"Check back later for new offers"})]})})]}),S&&a.jsx(a.Fragment,{children:j?a.jsx("div",{className:"h-[720px] overflow-hidden",children:a.jsx(Nq,{user:t,userPurchaseLimit:f,settings:r,purchasesRemaining:m,onViewReward:()=>x("/scan"),currentOffer:i==null?void 0:i.find(O=>O.offerId===t.currentOfferId)})}):a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-blue-300 mb-2 flex items-center",children:[a.jsx(as,{className:"w-6 h-6 mr-2 text-blue-400"}),"User Progress Tracking"]}),a.jsx("p",{className:"text-blue-200/80 text-sm",children:"Real-time updates of all user loyalty progress"})]}),a.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:a.jsx(Aq,{users:n.filter(O=>O.role==="customer"),loading:s})})]})}),u==="card"&&(t.role==="super_admin"?a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[a.jsx(Ul,{className:"w-6 h-6 mr-2 text-purple-400"}),"Rewards History"]}),a.jsx("p",{className:"text-purple-200/80 text-sm",children:"Complete overview of all user rewards and redemptions"})]}),a.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:a.jsx(Tq,{allUsers:n})})]}):a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[a.jsx(Ul,{className:"w-6 h-6 mr-2 text-purple-400"}),"Your Rewards"]}),a.jsx("p",{className:"text-purple-200/80 text-sm",children:"Track your progress and manage your earned rewards"})]}),a.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:a.jsx(Fq,{user:t,offers:i})})]}))]})}),w&&b&&a.jsx(hz,{reward:b,onClose:()=>{_(!1),C(null)}}),R&&F&&a.jsx(n2,{qrData:F,isOpen:R,onClose:()=>{L(!1),I(null)}})]})},bz=()=>{var m,v,x,p;const{user:t,loading:e,redeemReward:r}=vs(),n=Yn(),[s,i]=y.useState(null);if(y.useEffect(()=>{mt("page_view",{page:"Rewards"})},[]),y.useEffect(()=>{!e&&!t&&n("/login")},[t,e,n]),e)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t)return null;const o=async w=>{i(w);try{await r(w),lt({title:"Reward Redeemed!",description:"Your reward has been successfully redeemed."}),mt("reward_redeemed",{reward_id:w,user_id:t.id}),window.location.reload()}catch{lt({title:"Error",description:"Failed to redeem reward. Please try again.",variant:"destructive"})}finally{i(null)}},l=w=>{switch(w){case"percentage":return"";case"fixed_amount":return"";case"free_item":return"";default:return""}},c=w=>{switch(w){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}},u=((m=t.completedRewards)==null?void 0:m.filter(w=>!w.claimedAt))||[],h=((v=t.completedRewards)==null?void 0:v.filter(w=>w.claimedAt))||[],f=t.currentReward;return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[a.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50",children:a.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(je,{variant:"ghost",size:"sm",onClick:()=>n("/dashboard"),className:"text-red-300 hover:text-white hover:bg-red-900/30",children:[a.jsx(Zl,{className:"w-5 h-5 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"My Rewards"}),a.jsx("p",{className:"text-red-300 text-sm",children:"Manage and redeem your earned rewards"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-white text-sm",children:"Total Rewards"}),a.jsx("div",{className:"text-2xl font-bold text-red-400",children:((x=t.completedRewards)==null?void 0:x.length)||0})]})]})})}),a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[f&&a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[a.jsx(Fu,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Current Progress"]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:t.purchases}),a.jsxs("div",{className:"text-sm text-gray-400",children:["of ",f.settingsSnapshot.purchaseLimit," ","purchases"]})]})]}),a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 mb-4",children:a.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 h-3 rounded-full transition-all duration-500",style:{width:`${t.purchases/f.settingsSnapshot.purchaseLimit*100}%`}})}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-lg font-semibold text-white mb-2",children:[l(f.rewardType)," ",f.rewardDescription]}),a.jsx("p",{className:"text-gray-300 text-sm",children:f.settingsSnapshot.descriptionMessage})]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(Bt,{className:"w-5 h-5 mr-2 text-green-400"}),"Available Rewards (",u.length,")"]}),u.length===0?a.jsxs("div",{className:"text-center py-12 bg-gradient-to-r from-gray-900/50 to-red-900/50 border border-gray-700/50 rounded-xl",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Available Rewards"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Complete your purchase goal to earn your first reward!"}),a.jsx(je,{onClick:()=>n("/dashboard"),className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800",children:"Go to Dashboard"})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(w=>a.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6 hover:border-red-600/70 transition-all duration-300 hover:shadow-lg hover:shadow-red-500/20",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"text-4xl mb-2",children:l(w.rewardType)}),a.jsx("div",{className:"text-xl font-bold text-white mb-1",children:w.rewardDescription}),a.jsxs("div",{className:"text-sm text-gray-400",children:["Earned on ",w.createdAt.toDate().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:w.rewardType})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:w.rewardValue})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Goal:"}),a.jsxs("span",{className:"text-white",children:[w.settingsSnapshot.purchaseLimit," purchases"]})]})]}),a.jsxs(je,{onClick:()=>o(w.rewardId),disabled:s===w.rewardId,className:`w-full bg-gradient-to-r ${c(w.rewardType)} hover:opacity-90 transition-all duration-300`,children:[s===w.rewardId?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(gl,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})]},w.rewardId))})]}),h.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(gl,{className:"w-5 h-5 mr-2 text-green-400"}),"Claimed Rewards (",h.length,")"]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.map(w=>{var _;return a.jsxs("div",{className:"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border border-gray-700/50 rounded-xl p-6 opacity-75",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"text-4xl mb-2",children:l(w.rewardType)}),a.jsx("div",{className:"text-xl font-bold text-gray-300 mb-1",children:w.rewardDescription}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Claimed on"," ",(_=w.claimedAt)==null?void 0:_.toDate().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Type:"}),a.jsx("span",{className:"text-gray-300 capitalize",children:w.rewardType})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Value:"}),a.jsx("span",{className:"text-gray-300",children:w.rewardValue})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Goal:"}),a.jsxs("span",{className:"text-gray-300",children:[w.settingsSnapshot.purchaseLimit," purchases"]})]})]}),a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-green-900/50 border border-green-600/50 rounded-full",children:[a.jsx(gl,{className:"w-4 h-4 mr-2 text-green-400"}),a.jsx("span",{className:"text-green-300 text-sm font-medium",children:"REDEEMED"})]})})]},w.rewardId)})})]}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[a.jsx(Sx,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Reward Statistics"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:((p=t.completedRewards)==null?void 0:p.length)||0}),a.jsx("div",{className:"text-sm text-gray-400",children:"Total Earned"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:h.length}),a.jsx("div",{className:"text-sm text-gray-400",children:"Redeemed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:u.length}),a.jsx("div",{className:"text-sm text-gray-400",children:"Available"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.purchases}),a.jsx("div",{className:"text-sm text-gray-400",children:"Current Progress"})]})]})]})]})]})},Ez=()=>{const{user:t,loading:e,allUsers:r}=vs(),n=Yn(),[s,i]=y.useState([]),[o,l]=y.useState(!0);y.useState(!1),y.useState(!1);const[c,u]=y.useState("offers");return y.useEffect(()=>{mt("page_view",{page:"Settings"})},[]),y.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),y.useEffect(()=>{t&&(async()=>{try{l(!0);const f=await yu();if(f.length===0){await LC(t);const m=await yu();i(m)}else i(f)}catch(f){console.error("Error loading offers:",f);try{await LC(t);const m=await yu();i(m)}catch(m){console.error("Error creating default offer:",m)}}finally{l(!1)}})()},[t]),e||o?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):!t||t.role!=="admin"&&t.role!=="super_admin"?null:a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:a.jsxs("div",{className:"p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xs,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(Zl,{className:"w-6 h-6"})}),a.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Settings"})]}),a.jsxs("div",{className:"flex items-center text-gray-400",children:[a.jsx(Ax,{className:"w-6 h-6 mr-2"}),a.jsx("span",{className:"text-sm",children:"Admin Panel"})]})]})}),a.jsx("div",{className:"flex-1 px-6 py-8",children:a.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[a.jsxs("div",{className:"flex space-x-1 mb-8 bg-gray-800/50 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>u("offers"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="offers"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Manage Offers"]}),a.jsxs("button",{onClick:()=>u("rewards"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="rewards"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Rewards History"]}),a.jsxs("button",{onClick:()=>u("analytics"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="analytics"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(oS,{className:"w-4 h-4 mr-2"}),"Analytics"]}),a.jsxs("button",{onClick:()=>u("users"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="users"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(ls,{className:"w-4 h-4 mr-2"}),"User Management"]})]}),c==="offers"&&a.jsx(Cz,{offers:s,onOffersChange:i,user:t}),c==="rewards"&&a.jsx(_z,{allUsers:r}),c==="analytics"&&a.jsx(Tz,{allUsers:r}),c==="users"&&a.jsx(Az,{allUsers:r})]})})]})]})},Cz=({offers:t,onOffersChange:e,user:r})=>{const[n,s]=y.useState(!1),[i,o]=y.useState(!1),[l,c]=y.useState(""),[u,h]=y.useState(""),[f,m]=y.useState(5),[v,x]=y.useState("percentage"),[p,w]=y.useState("20"),[_,b]=y.useState("20% OFF"),C=async()=>{if(!l.trim()||!u.trim()||!p.trim()||!_.trim()){lt({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});return}s(!0);try{await nq(r,{name:l.trim(),description:u.trim(),stampRequirement:f,rewardType:v,rewardValue:p.trim(),rewardDescription:_.trim(),isActive:!0});const R=await yu();e(R),o(!1),c(""),h(""),m(5),x("percentage"),w("20"),b("20% OFF"),lt({title:"Offer Created",description:"New offer has been created successfully!"})}catch{lt({title:"Creation Failed",description:"Failed to create offer. Please try again.",variant:"destructive"})}finally{s(!1)}};return a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Offers"}),a.jsx("p",{className:"text-gray-400",children:"Create and manage loyalty program offers for customers"})]}),a.jsx("div",{className:"mb-8 text-center",children:a.jsxs(je,{onClick:()=>o(!0),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold px-6 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})}),i&&a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6 mb-8",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create New Offer"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(en,{htmlFor:"offerName",className:"text-white font-medium",children:"Offer Name"}),a.jsx(Ct,{id:"offerName",value:l,onChange:R=>c(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"e.g., Welcome Offer, Summer Special"})]}),a.jsxs("div",{children:[a.jsx(en,{htmlFor:"offerDescription",className:"text-white font-medium",children:"Description"}),a.jsx(Vp,{id:"offerDescription",value:u,onChange:R=>h(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Describe what customers need to do to earn this reward"})]}),a.jsxs("div",{children:[a.jsx(en,{htmlFor:"stampRequirement",className:"text-white font-medium",children:"Stamps Required"}),a.jsx(Ct,{id:"stampRequirement",type:"number",min:"1",max:"50",value:f,onChange:R=>m(parseInt(R.target.value)||1),className:"bg-gray-700/50 border-gray-600 text-white mt-1"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(en,{htmlFor:"rewardType",className:"text-white font-medium",children:"Reward Type"}),a.jsxs("select",{id:"rewardType",value:v,onChange:R=>x(R.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[a.jsx("option",{value:"percentage",children:"Percentage Discount"}),a.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),a.jsx("option",{value:"free_item",children:"Free Item"})]})]}),a.jsxs("div",{children:[a.jsx(en,{htmlFor:"rewardValue",className:"text-white font-medium",children:"Reward Value"}),a.jsx(Ct,{id:"rewardValue",value:p,onChange:R=>w(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:v==="percentage"?"20":v==="fixed_amount"?"5.00":"Free Coffee"})]}),a.jsxs("div",{children:[a.jsx(en,{htmlFor:"rewardDescription",className:"text-white font-medium",children:"Reward Description"}),a.jsx(Ct,{id:"rewardDescription",value:_,onChange:R=>b(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:v==="percentage"?"20% OFF":v==="fixed_amount"?"$5.00 OFF":"Free Coffee"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx(je,{variant:"outline",onClick:()=>o(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),a.jsx(je,{onClick:C,disabled:n,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Offer"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Current Offers"}),t.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h4",{className:"text-xl font-semibold text-white mb-2",children:"No Offers Yet"}),a.jsx("p",{className:"text-gray-400",children:"Create your first offer to get started!"})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(R=>a.jsxs("div",{className:`bg-gradient-to-br ${R.isActive?"from-green-900/40 to-green-800/40 border-green-700/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50"} border rounded-xl p-4`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"text-lg font-semibold text-white",children:R.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:R.isActive?"ACTIVE":"INACTIVE"})]}),a.jsx("p",{className:"text-gray-300 text-sm mb-3",children:R.description}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Stamps:"}),a.jsx("span",{className:"text-white",children:R.stampRequirement})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Reward:"}),a.jsx("span",{className:"text-white",children:R.rewardDescription})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:R.rewardType})]})]})]},R.offerId))})]})]})},_z=({allUsers:t})=>{const e=o=>{var c,u;if((c=o.offerSnapshot)!=null&&c.stampRequirement)return o.offerSnapshot.stampRequirement;const l=o;return(u=l.settingsSnapshot)!=null&&u.purchaseLimit?l.settingsSnapshot.purchaseLimit:"Unknown"},r=t.flatMap(o=>(o.completedRewards||[]).map(l=>({...l,userName:o.name,userEmail:o.email,userId:o.id}))),n=r.filter(o=>!o.claimedAt),s=r.filter(o=>o.claimedAt),i=r.filter(o=>o.expiresAt?new Date>o.expiresAt.toDate():!1);return a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Rewards History & Status"}),a.jsx("p",{className:"text-gray-400",children:"Monitor all rewards across the system"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.length}),a.jsx("div",{className:"text-blue-300 text-sm",children:"Total Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:n.length}),a.jsx("div",{className:"text-green-300 text-sm",children:"Active Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:s.length}),a.jsx("div",{className:"text-yellow-300 text-sm",children:"Claimed Rewards"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-400",children:i.length}),a.jsx("div",{className:"text-red-300 text-sm",children:"Expired Rewards"})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(_x,{className:"w-5 h-5 mr-2 text-green-400"}),"Active Rewards (",n.length,")"]}),n.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-800/30 rounded-xl",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("p",{className:"text-gray-400",children:"No active rewards at the moment"})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(o=>a.jsxs("div",{className:"bg-gradient-to-br from-green-900/40 to-green-800/40 border border-green-700/50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold text-white",children:o.rewardDescription}),a.jsx("div",{className:"text-xs text-green-300 bg-green-900/50 px-2 py-1 rounded-full",children:"ACTIVE"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:o.userName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:o.rewardType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Value:"}),a.jsx("span",{className:"text-white",children:o.rewardValue})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Goal:"}),a.jsxs("span",{className:"text-white",children:[e(o)," purchases"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Earned:"}),a.jsx("span",{className:"text-white",children:o.createdAt.toDate().toLocaleDateString()})]})]})]},o.rewardId))})]}),s.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(gl,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Claimed Rewards (",s.length,")"]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.slice(0,6).map(o=>{var l;return a.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 border border-yellow-700/50 rounded-xl p-4 opacity-75",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold text-white",children:o.rewardDescription}),a.jsx("div",{className:"text-xs text-yellow-300 bg-yellow-900/50 px-2 py-1 rounded-full",children:"CLAIMED"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"User:"}),a.jsx("span",{className:"text-white",children:o.userName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Claimed:"}),a.jsx("span",{className:"text-white",children:(l=o.claimedAt)==null?void 0:l.toDate().toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Type:"}),a.jsx("span",{className:"text-white capitalize",children:o.rewardType})]})]})]},o.rewardId)})}),s.length>6&&a.jsx("div",{className:"text-center mt-4",children:a.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 6 of ",s.length," claimed rewards"]})})]})]})},Tz=({allUsers:t})=>{const e=t.filter(s=>s.role==="customer"),r=e.reduce((s,i)=>{var o;return s+(((o=i.completedRewards)==null?void 0:o.length)||0)},0),n=e.filter(s=>s.lastScanAt&&new Date().getTime()-s.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length;return a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"System Analytics"}),a.jsx("p",{className:"text-gray-400",children:"Overview of loyalty program performance"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:e.length}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"}),a.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"Active loyalty members"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:r}),a.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"}),a.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Earned by customers"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:n}),a.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),a.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(Nx,{className:"w-5 h-5 mr-2 text-green-400"}),"Recent Activity"]}),a.jsx("div",{className:"space-y-3",children:e.slice(0,5).map(s=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/30 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-bold",children:s.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:s.name}),a.jsx("div",{className:"text-gray-400 text-sm",children:s.email})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-white font-medium",children:[s.purchases," purchases"]}),a.jsx("div",{className:"text-gray-400 text-sm",children:s.lastScanAt?s.lastScanAt.toDate().toLocaleDateString():"Never"})]})]},s.id))})]})]})},Az=({allUsers:t})=>{const e=t.filter(n=>n.role==="customer"),r=t.filter(n=>n.role==="admin"||n.role==="super_admin");return a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),a.jsx("p",{className:"text-gray-400",children:"Overview of all system users"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t.length}),a.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),a.jsx("div",{className:"text-green-300 text-lg",children:"Customers"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r.length}),a.jsx("div",{className:"text-purple-300 text-lg",children:"Administrators"})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[a.jsx(ls,{className:"w-5 h-5 mr-2 text-blue-400"}),"Customer Overview"]}),a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Name"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Email"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Purchases"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Rewards"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Last Scan"}),a.jsx("th",{className:"text-left p-3 text-gray-300",children:"Status"})]})}),a.jsx("tbody",{children:e.slice(0,10).map(n=>{var s;return a.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[a.jsx("td",{className:"p-3 text-white",children:n.name}),a.jsx("td",{className:"p-3 text-gray-300",children:n.email}),a.jsx("td",{className:"p-3 text-white",children:n.purchases}),a.jsx("td",{className:"p-3 text-white",children:((s=n.completedRewards)==null?void 0:s.length)||0}),a.jsx("td",{className:"p-3 text-gray-300",children:n.lastScanAt?n.lastScanAt.toDate().toLocaleDateString():"Never"}),a.jsx("td",{className:"p-3",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-700/50"}`,children:n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})})]},n.id)})})]}),e.length>10&&a.jsx("div",{className:"text-center mt-4",children:a.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 10 of ",e.length," customers"]})})]})]})]})};function XC(t,[e,r]){return Math.min(r,Math.max(e,t))}function Sz(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Nz=[" ","Enter","ArrowUp","ArrowDown"],Iz=[" ","Enter"],jd="Select",[Qp,Yp,Rz]=hd(jd),[gc,NQ]=fd(jd,[Rz,fc]),Hp=fc(),[Pz,Eo]=gc(jd),[kz,jz]=gc(jd),wP=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:v,form:x}=t,p=Hp(e),[w,_]=y.useState(null),[b,C]=y.useState(null),[R,L]=y.useState(!1),F=Bp(u),[I=!1,S]=Ou({prop:n,defaultProp:s,onChange:i}),[N,j]=Ou({prop:o,defaultProp:l,onChange:c}),D=y.useRef(null),O=w?x||!!w.closest("form"):!0,[k,G]=y.useState(new Set),H=Array.from(k).map(J=>J.props.value).join(";");return a.jsx(fR,{...p,children:a.jsxs(Pz,{required:v,scope:e,trigger:w,onTriggerChange:_,valueNode:b,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:L,contentId:Jo(),value:N,onValueChange:j,open:I,onOpenChange:S,dir:F,triggerPointerDownPosRef:D,disabled:m,children:[a.jsx(Qp.Provider,{scope:e,children:a.jsx(kz,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(J=>{G(ie=>new Set(ie).add(J))},[]),onNativeOptionRemove:y.useCallback(J=>{G(ie=>{const q=new Set(ie);return q.delete(J),q})},[]),children:r})}),O?a.jsxs(zP,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:f,value:N,onChange:J=>j(J.target.value),disabled:m,form:x,children:[N===void 0?a.jsx("option",{value:""}):null,Array.from(k)]},H):null]})})};wP.displayName=jd;var bP="SelectTrigger",EP=y.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=Hp(r),o=Eo(bP,r),l=o.disabled||n,c=it(e,o.onTriggerChange),u=Yp(r),h=y.useRef("touch"),[f,m,v]=WP(p=>{const w=u().filter(C=>!C.disabled),_=w.find(C=>C.value===o.value),b=QP(w,p,_);b!==void 0&&o.onValueChange(b.value)}),x=p=>{l||(o.onOpenChange(!0),v()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return a.jsx(Lw,{asChild:!0,...i,children:a.jsx(qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":$P(o.value)?"":void 0,...s,ref:c,onClick:me(s.onClick,p=>{p.currentTarget.focus(),h.current!=="mouse"&&x(p)}),onPointerDown:me(s.onPointerDown,p=>{h.current=p.pointerType;const w=p.target;w.hasPointerCapture(p.pointerId)&&w.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(x(p),p.preventDefault())}),onKeyDown:me(s.onKeyDown,p=>{const w=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(w&&p.key===" ")&&Nz.includes(p.key)&&(x(),p.preventDefault())})})})});EP.displayName=bP;var CP="SelectValue",_P=y.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o="",...l}=t,c=Eo(CP,r),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=it(e,c.onValueNodeChange);return Cr(()=>{u(h)},[u,h]),a.jsx(qe.span,{...l,ref:f,style:{pointerEvents:"none"},children:$P(c.value)?a.jsx(a.Fragment,{children:o}):i})});_P.displayName=CP;var Mz="SelectIcon",TP=y.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return a.jsx(qe.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});TP.displayName=Mz;var Dz="SelectPortal",AP=t=>a.jsx(tp,{asChild:!0,...t});AP.displayName=Dz;var ma="SelectContent",SP=y.forwardRef((t,e)=>{const r=Eo(ma,t.__scopeSelect),[n,s]=y.useState();if(Cr(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?ya.createPortal(a.jsx(NP,{scope:t.__scopeSelect,children:a.jsx(Qp.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(IP,{...t,ref:e})});SP.displayName=ma;var jn=10,[NP,Co]=gc(ma),Oz="SelectContentImpl",IP=y.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:p,avoidCollisions:w,..._}=t,b=Eo(ma,r),[C,R]=y.useState(null),[L,F]=y.useState(null),I=it(e,oe=>R(oe)),[S,N]=y.useState(null),[j,D]=y.useState(null),O=Yp(r),[k,G]=y.useState(!1),H=y.useRef(!1);y.useEffect(()=>{if(C)return m2(C)},[C]),s2();const J=y.useCallback(oe=>{const[ge,...xe]=O().map(Ce=>Ce.ref.current),[be]=xe.slice(-1),Te=document.activeElement;for(const Ce of oe)if(Ce===Te||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===ge&&L&&(L.scrollTop=0),Ce===be&&L&&(L.scrollTop=L.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==Te))return},[O,L]),ie=y.useCallback(()=>J([S,C]),[J,S,C]);y.useEffect(()=>{k&&ie()},[k,ie]);const{onOpenChange:q,triggerPointerDownPosRef:W}=b;y.useEffect(()=>{if(C){let oe={x:0,y:0};const ge=be=>{var Te,Ce;oe={x:Math.abs(Math.round(be.pageX)-(((Te=W.current)==null?void 0:Te.x)??0)),y:Math.abs(Math.round(be.pageY)-(((Ce=W.current)==null?void 0:Ce.y)??0))}},xe=be=>{oe.x<=10&&oe.y<=10?be.preventDefault():C.contains(be.target)||q(!1),document.removeEventListener("pointermove",ge),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",xe,{capture:!0})}}},[C,q,W]),y.useEffect(()=>{const oe=()=>q(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[q]);const[se,re]=WP(oe=>{const ge=O().filter(Te=>!Te.disabled),xe=ge.find(Te=>Te.ref.current===document.activeElement),be=QP(ge,oe,xe);be&&setTimeout(()=>be.ref.current.focus())}),le=y.useCallback((oe,ge,xe)=>{const be=!H.current&&!xe;(b.value!==void 0&&b.value===ge||be)&&(N(oe),be&&(H.current=!0))},[b.value]),ue=y.useCallback(()=>C==null?void 0:C.focus(),[C]),Se=y.useCallback((oe,ge,xe)=>{const be=!H.current&&!xe;(b.value!==void 0&&b.value===ge||be)&&D(oe)},[b.value]),ke=n==="popper"?lv:RP,we=ke===lv?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:p,avoidCollisions:w}:{};return a.jsx(NP,{scope:r,content:C,viewport:L,onViewportChange:F,itemRefCallback:le,selectedItem:S,onItemLeave:ue,itemTextRefCallback:Se,focusSelectedItem:ie,selectedItemText:j,position:n,isPositioned:k,searchRef:se,children:a.jsx(Kw,{as:na,allowPinchZoom:!0,children:a.jsx(Hw,{asChild:!0,trapped:b.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:me(s,oe=>{var ge;(ge=b.trigger)==null||ge.focus({preventScroll:!0}),oe.preventDefault()}),children:a.jsx(md,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:a.jsx(ke,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:oe=>oe.preventDefault(),..._,...we,onPlaced:()=>G(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:me(_.onKeyDown,oe=>{const ge=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!ge&&oe.key.length===1&&re(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let be=O().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const Te=oe.target,Ce=be.indexOf(Te);be=be.slice(Ce+1)}setTimeout(()=>J(be)),oe.preventDefault()}})})})})})})});IP.displayName=Oz;var Lz="SelectItemAlignedPosition",RP=y.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=Eo(ma,r),o=Co(ma,r),[l,c]=y.useState(null),[u,h]=y.useState(null),f=it(e,I=>h(I)),m=Yp(r),v=y.useRef(!1),x=y.useRef(!0),{viewport:p,selectedItem:w,selectedItemText:_,focusSelectedItem:b}=o,C=y.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&w&&_){const I=i.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),j=_.getBoundingClientRect();if(i.dir!=="rtl"){const Te=j.left-S.left,Ce=N.left-Te,he=I.left-Ce,ve=I.width+he,gt=Math.max(ve,S.width),at=window.innerWidth-jn,Ot=XC(Ce,[jn,Math.max(jn,at-gt)]);l.style.minWidth=ve+"px",l.style.left=Ot+"px"}else{const Te=S.right-j.right,Ce=window.innerWidth-N.right-Te,he=window.innerWidth-I.right-Ce,ve=I.width+he,gt=Math.max(ve,S.width),at=window.innerWidth-jn,Ot=XC(Ce,[jn,Math.max(jn,at-gt)]);l.style.minWidth=ve+"px",l.style.right=Ot+"px"}const D=m(),O=window.innerHeight-jn*2,k=p.scrollHeight,G=window.getComputedStyle(u),H=parseInt(G.borderTopWidth,10),J=parseInt(G.paddingTop,10),ie=parseInt(G.borderBottomWidth,10),q=parseInt(G.paddingBottom,10),W=H+J+k+q+ie,se=Math.min(w.offsetHeight*5,W),re=window.getComputedStyle(p),le=parseInt(re.paddingTop,10),ue=parseInt(re.paddingBottom,10),Se=I.top+I.height/2-jn,ke=O-Se,we=w.offsetHeight/2,oe=w.offsetTop+we,ge=H+J+oe,xe=W-ge;if(ge<=Se){const Te=D.length>0&&w===D[D.length-1].ref.current;l.style.bottom="0px";const Ce=u.clientHeight-p.offsetTop-p.offsetHeight,he=Math.max(ke,we+(Te?ue:0)+Ce+ie),ve=ge+he;l.style.height=ve+"px"}else{const Te=D.length>0&&w===D[0].ref.current;l.style.top="0px";const he=Math.max(Se,H+p.offsetTop+(Te?le:0)+we)+xe;l.style.height=he+"px",p.scrollTop=ge-Se+p.offsetTop}l.style.margin=`${jn}px 0`,l.style.minHeight=se+"px",l.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>v.current=!0)}},[m,i.trigger,i.valueNode,l,u,p,w,_,i.dir,n]);Cr(()=>C(),[C]);const[R,L]=y.useState();Cr(()=>{u&&L(window.getComputedStyle(u).zIndex)},[u]);const F=y.useCallback(I=>{I&&x.current===!0&&(C(),b==null||b(),x.current=!1)},[C,b]);return a.jsx(Vz,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:F,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:a.jsx(qe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});RP.displayName=Lz;var Fz="SelectPopperPosition",lv=y.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=jn,...i}=t,o=Hp(r);return a.jsx(Fw,{...o,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lv.displayName=Fz;var[Vz,ob]=gc(ma,{}),cv="SelectViewport",PP=y.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=Co(cv,r),o=ob(cv,r),l=it(e,i.onViewportChange),c=y.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Qp.Slot,{scope:r,children:a.jsx(qe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const v=Math.abs(c.current-h.scrollTop);if(v>0){const x=window.innerHeight-jn*2,p=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),_=Math.max(p,w);if(_<x){const b=_+v,C=Math.min(x,b),R=b-C;f.style.height=C+"px",f.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});PP.displayName=cv;var kP="SelectGroup",[Bz,Uz]=gc(kP),qz=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Jo();return a.jsx(Bz,{scope:r,id:s,children:a.jsx(qe.div,{role:"group","aria-labelledby":s,...n,ref:e})})});qz.displayName=kP;var jP="SelectLabel",MP=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Uz(jP,r);return a.jsx(qe.div,{id:s.id,...n,ref:e})});MP.displayName=jP;var Lm="SelectItem",[Gz,DP]=gc(Lm),OP=y.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=t,l=Eo(Lm,r),c=Co(Lm,r),u=l.value===n,[h,f]=y.useState(i??""),[m,v]=y.useState(!1),x=it(e,b=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,b,n,s)}),p=Jo(),w=y.useRef("touch"),_=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(Gz,{scope:r,value:n,disabled:s,textId:p,isSelected:u,onItemTextChange:y.useCallback(b=>{f(C=>C||((b==null?void 0:b.textContent)??"").trim())},[]),children:a.jsx(Qp.ItemSlot,{scope:r,value:n,disabled:s,textValue:h,children:a.jsx(qe.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:x,onFocus:me(o.onFocus,()=>v(!0)),onBlur:me(o.onBlur,()=>v(!1)),onClick:me(o.onClick,()=>{w.current!=="mouse"&&_()}),onPointerUp:me(o.onPointerUp,()=>{w.current==="mouse"&&_()}),onPointerDown:me(o.onPointerDown,b=>{w.current=b.pointerType}),onPointerMove:me(o.onPointerMove,b=>{var C;w.current=b.pointerType,s?(C=c.onItemLeave)==null||C.call(c):w.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(o.onPointerLeave,b=>{var C;b.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:me(o.onKeyDown,b=>{var R;((R=c.searchRef)==null?void 0:R.current)!==""&&b.key===" "||(Iz.includes(b.key)&&_(),b.key===" "&&b.preventDefault())})})})})});OP.displayName=Lm;var Xc="SelectItemText",LP=y.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,o=Eo(Xc,r),l=Co(Xc,r),c=DP(Xc,r),u=jz(Xc,r),[h,f]=y.useState(null),m=it(e,_=>f(_),c.onItemTextChange,_=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,_,c.value,c.disabled)}),v=h==null?void 0:h.textContent,x=y.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:p,onNativeOptionRemove:w}=u;return Cr(()=>(p(x),()=>w(x)),[p,w,x]),a.jsxs(a.Fragment,{children:[a.jsx(qe.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ya.createPortal(i.children,o.valueNode):null]})});LP.displayName=Xc;var FP="SelectItemIndicator",VP=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return DP(FP,r).isSelected?a.jsx(qe.span,{"aria-hidden":!0,...n,ref:e}):null});VP.displayName=FP;var uv="SelectScrollUpButton",BP=y.forwardRef((t,e)=>{const r=Co(uv,t.__scopeSelect),n=ob(uv,t.__scopeSelect),[s,i]=y.useState(!1),o=it(e,n.onScrollButtonChange);return Cr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(qP,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});BP.displayName=uv;var dv="SelectScrollDownButton",UP=y.forwardRef((t,e)=>{const r=Co(dv,t.__scopeSelect),n=ob(dv,t.__scopeSelect),[s,i]=y.useState(!1),o=it(e,n.onScrollButtonChange);return Cr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(qP,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});UP.displayName=dv;var qP=y.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=Co("SelectScrollButton",r),o=y.useRef(null),l=Yp(r),c=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),Cr(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(qe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:me(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:me(s.onPointerLeave,()=>{c()})})}),$z="SelectSeparator",GP=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx(qe.div,{"aria-hidden":!0,...n,ref:e})});GP.displayName=$z;var hv="SelectArrow",zz=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Hp(r),i=Eo(hv,r),o=Co(hv,r);return i.open&&o.position==="popper"?a.jsx(Vw,{...s,...n,ref:e}):null});zz.displayName=hv;function $P(t){return t===""||t===void 0}var zP=y.forwardRef((t,e)=>{const{value:r,...n}=t,s=y.useRef(null),i=it(e,s),o=Sz(r);return y.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&h){const f=new Event("change",{bubbles:!0});h.call(l,r),l.dispatchEvent(f)}},[o,r]),a.jsx(pd,{asChild:!0,children:a.jsx("select",{...n,ref:i,defaultValue:r})})});zP.displayName="BubbleSelect";function WP(t){const e=Er(t),r=y.useRef(""),n=y.useRef(0),s=y.useCallback(o=>{const l=r.current+o;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=y.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function QP(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=Wz(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function Wz(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Qz=wP,YP=EP,Yz=_P,Hz=TP,Kz=AP,HP=SP,Jz=PP,KP=MP,JP=OP,Xz=LP,Zz=VP,XP=BP,ZP=UP,ek=GP;const eW=Qz,tW=Yz,tk=y.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(YP,{ref:n,className:rt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,a.jsx(Hz,{asChild:!0,children:a.jsx(Lu,{className:"h-4 w-4 opacity-50"})})]}));tk.displayName=YP.displayName;const rk=y.forwardRef(({className:t,...e},r)=>a.jsx(XP,{ref:r,className:rt("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(am,{className:"h-4 w-4"})}));rk.displayName=XP.displayName;const nk=y.forwardRef(({className:t,...e},r)=>a.jsx(ZP,{ref:r,className:rt("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(Lu,{className:"h-4 w-4"})}));nk.displayName=ZP.displayName;const sk=y.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>a.jsx(Kz,{children:a.jsxs(HP,{ref:s,className:rt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[a.jsx(rk,{}),a.jsx(Jz,{className:rt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(nk,{})]})}));sk.displayName=HP.displayName;const rW=y.forwardRef(({className:t,...e},r)=>a.jsx(KP,{ref:r,className:rt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));rW.displayName=KP.displayName;const If=y.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(JP,{ref:n,className:rt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Zz,{children:a.jsx(aS,{className:"h-4 w-4"})})}),a.jsx(Xz,{children:e})]}));If.displayName=JP.displayName;const nW=y.forwardRef(({className:t,...e},r)=>a.jsx(ek,{ref:r,className:rt("-mx-1 my-1 h-px bg-muted",t),...e}));nW.displayName=ek.displayName;const sW=()=>{const{user:t,loading:e,updateUserRole:r}=vs(),n=Yn(),[s,i]=y.useState([]),[o,l]=y.useState(!0),[c,u]=y.useState(null),[h,f]=y.useState(null),[m,v]=y.useState(null);if(y.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),y.useEffect(()=>{const b=async()=>{if(!(!t||t.role!=="super_admin"))try{const C=cc(Tt,"users"),R=_p(C,yw("createdAt","desc")),L=await xw(R),F=[];L.forEach(I=>{const S=I.data();F.push({id:I.id,name:S.name,email:S.email,role:S.role||"customer",purchases:S.purchases||0,createdAt:S.createdAt})}),i(F)}catch(C){console.error("Error loading users:",C),lt({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{l(!1)}};(t==null?void 0:t.role)==="super_admin"&&b()},[t]),e)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t||t.role!=="super_admin")return null;const x=async(b,C)=>{if(b===t.id){lt({title:"Cannot Update Own Role",description:"You cannot change your own role",variant:"destructive"});return}u(b);try{await r(b,C),lt({title:"Role Updated",description:"User role has been updated successfully!"}),i(R=>R.map(L=>L.id===b?{...L,role:C}:L))}catch(R){console.error("Error updating role:",R),lt({title:"Update Failed",description:"Failed to update user role. Please try again.",variant:"destructive"})}finally{u(null)}},p=async b=>{f(b);try{await LV(ar(Tt,"users",b)),i(C=>C.filter(R=>R.id!==b)),lt({title:"User Deleted",description:"The user has been deleted successfully."})}catch(C){console.error("Error deleting user:",C),lt({title:"Delete Failed",description:"Failed to delete user. Please try again.",variant:"destructive"})}finally{f(null),v(null)}},w=b=>{switch(b){case"super_admin":return a.jsx(hy,{className:"w-4 h-4 text-yellow-500"});case"admin":return a.jsx(dS,{className:"w-4 h-4 text-blue-500"});case"customer":return a.jsx(Ul,{className:"w-4 h-4 text-gray-500"});default:return a.jsx(Ul,{className:"w-4 h-4 text-gray-500"})}},_=b=>{switch(b){case"super_admin":return"text-yellow-500 bg-yellow-500/10 border-yellow-500/20";case"admin":return"text-blue-500 bg-blue-500/10 border-blue-500/20";case"customer":return"text-gray-500 bg-gray-500/10 border-gray-500/20";default:return"text-gray-500 bg-gray-500/10 border-gray-500/20"}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:a.jsxs("div",{className:"p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xs,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(Zl,{className:"w-6 h-6"})}),a.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"User Management"})]}),a.jsxs("div",{className:"flex items-center text-gray-400",children:[a.jsx(hy,{className:"w-6 h-6 mr-2 text-yellow-500"}),a.jsx("span",{className:"text-sm",children:"Super Admin Panel"})]})]})}),a.jsx("div",{className:"flex-1 px-6 py-8",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Users"}),a.jsx("p",{className:"text-gray-400",children:"Update user roles and permissions"})]}),o?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-white",children:"Loading users..."})]}):a.jsx("div",{className:"space-y-4",children:s.map(b=>a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[w(b.role),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-semibold",children:b.name}),a.jsx("p",{className:"text-gray-400 text-sm",children:b.email}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${_(b.role)}`,children:b.role.replace("_"," ").toUpperCase()}),a.jsxs("span",{className:"text-gray-500 text-xs",children:[b.purchases," purchases"]})]})]})]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[b.id!==t.id&&a.jsx(a.Fragment,{children:a.jsxs(eW,{value:b.role,onValueChange:C=>x(b.id,C),disabled:c===b.id,children:[a.jsx(tk,{className:"w-32 bg-gray-700 border-gray-600 text-white",children:a.jsx(tW,{})}),a.jsxs(sk,{className:"bg-gray-800 border-gray-700",children:[a.jsx(If,{value:"customer",children:"Customer"}),a.jsx(If,{value:"admin",children:"Admin"}),a.jsx(If,{value:"super_admin",children:"Super Admin"})]})]})}),b.id===t.id&&a.jsx("span",{className:"text-gray-500 text-sm",children:"Current User"})]})]},b.id))}),s.length===0&&!o&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ls,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"No users found"})]})]})})})]}),m&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:a.jsxs("div",{className:"bg-gray-900 rounded-lg p-8 border border-red-700 shadow-xl w-full max-w-sm",children:[a.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Confirm Delete"}),a.jsxs("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold text-red-400",children:m.name}),"? This action cannot be undone."]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(je,{variant:"ghost",onClick:()=>v(null),className:"text-gray-300 hover:text-white",children:"Cancel"}),a.jsx(je,{variant:"destructive",onClick:()=>p(m.id),disabled:h===m.id,children:h===m.id?"Deleting...":"Delete"})]})]})})]})},iW=()=>{const t=ti();return y.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};let ik=!0,ok=!0;function Zc(t,e,r){const n=t.match(e);return n&&n.length>=r&&parseFloat(n[r],10)}function _a(t,e,r){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype,s=n.addEventListener;n.addEventListener=function(o,l){if(o!==e)return s.apply(this,arguments);const c=u=>{const h=r(u);h&&(l.handleEvent?l.handleEvent(h):l(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,c),s.apply(this,[o,c])};const i=n.removeEventListener;n.removeEventListener=function(o,l){if(o!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(l))return i.apply(this,arguments);const c=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[o,c])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function oW(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(ik=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function aW(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(ok=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function ak(){if(typeof window=="object"){if(ik)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ab(t,e){ok&&console.warn(t+" is deprecated, please use "+e+" instead.")}function lW(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=t;if(r.userAgentData&&r.userAgentData.brands){const n=r.userAgentData.brands.find(s=>s.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(r.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Zc(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Zc(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Zc(r.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Zc(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function ZC(t){return Object.prototype.toString.call(t)==="[object Object]"}function lk(t){return ZC(t)?Object.keys(t).reduce(function(e,r){const n=ZC(t[r]),s=n?lk(t[r]):t[r],i=n&&!Object.keys(s).length;return s===void 0||i?e:Object.assign(e,{[r]:s})},{}):t}function fv(t,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?fv(t,t.get(e[n]),r):n.endsWith("Ids")&&e[n].forEach(s=>{fv(t,t.get(s),r)})}))}function e_(t,e,r){const n=r?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const i=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&i.push(o)}),i.forEach(o=>{t.forEach(l=>{l.type===n&&l.trackId===o.id&&fv(t,l,s)})}),s}const t_=ak;function ck(t,e){const r=t&&t.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const c={};return Object.keys(l).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const h=typeof l[u]=="object"?l[u]:{ideal:l[u]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const f=function(m,v){return m?m+v.charAt(0).toUpperCase()+v.slice(1):v==="deviceId"?"sourceId":v};if(h.ideal!==void 0){c.optional=c.optional||[];let m={};typeof h.ideal=="number"?(m[f("min",u)]=h.ideal,c.optional.push(m),m={},m[f("max",u)]=h.ideal,c.optional.push(m)):(m[f("",u)]=h.ideal,c.optional.push(m))}h.exact!==void 0&&typeof h.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[f("",u)]=h.exact):["min","max"].forEach(m=>{h[m]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[f(m,u)]=h[m])})}),l.advanced&&(c.optional=(c.optional||[]).concat(l.advanced)),c},s=function(l,c){if(e.version>=61)return c(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const u=function(h,f,m){f in h&&!(m in h)&&(h[m]=h[f],delete h[f])};l=JSON.parse(JSON.stringify(l)),u(l.audio,"autoGainControl","googAutoGainControl"),u(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let u=l.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const h=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete l.video.facingMode;let f;if(u.exact==="environment"||u.ideal==="environment"?f=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(f=["front"]),f)return r.mediaDevices.enumerateDevices().then(m=>{m=m.filter(x=>x.kind==="videoinput");let v=m.find(x=>f.some(p=>x.label.toLowerCase().includes(p)));return!v&&m.length&&f.includes("back")&&(v=m[m.length-1]),v&&(l.video.deviceId=u.exact?{exact:v.deviceId}:{ideal:v.deviceId}),l.video=n(l.video),t_("chrome: "+JSON.stringify(l)),c(l)})}l.video=n(l.video)}return t_("chrome: "+JSON.stringify(l)),c(l)},i=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,c,u){s(l,h=>{r.webkitGetUserMedia(h,c,f=>{u&&u(i(f))})})};if(r.getUserMedia=o.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(c){return s(c,u=>l(u).then(h=>{if(u.audio&&!h.getAudioTracks().length||u.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(i(h))))}}}function uk(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function dk(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.track.id):i={track:s.track};const o=new Event("track");o.track=s.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[n.stream],this.dispatchEvent(o)}),n.stream.getTracks().forEach(s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.id):i={track:s};const o=new Event("track");o.track=s,o.receiver=i,o.transceiver={receiver:i},o.streams=[n.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else _a(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function hk(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=s.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,c){let u=s.apply(this,arguments);return u||(u=e(this,l),this._senders.push(u)),u};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){i.apply(this,arguments);const c=this._senders.indexOf(l);c!==-1&&this._senders.splice(c,1)}}const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(o=>{const l=this._senders.find(c=>c.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function fk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>e_(o,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=r.apply(this,[]);return s.forEach(i=>i._pc=this),s}),_a(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>e_(i,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const n=arguments[0];let s,i,o;return this.getSenders().forEach(l=>{l.track===n&&(s?o=!0:s=l)}),this.getReceivers().forEach(l=>(l.track===n&&(i?o=!0:i=l),l.track===n)),o||s&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function mk(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(c)===-1&&this._shimmedLocalStreams[l.id].push(c):this._shimmedLocalStreams[l.id]=[l,c],c};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(f=>f.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const c=this.getSenders().filter(u=>l.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],n.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const c=this._shimmedLocalStreams[l].indexOf(o);c!==-1&&this._shimmedLocalStreams[l].splice(c,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),s.apply(this,arguments)}}function pk(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return mk(t);const r=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const h=r.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(f=>this._reverseStreams[f.id])};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(f=>{if(this.getSenders().find(v=>v.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const f=new t.MediaStream(h.getTracks());this._streams[h.id]=f,this._reverseStreams[f.id]=h,h=f}n.apply(this,[h])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},t.RTCPeerConnection.prototype.addTrack=function(h,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const m=[].slice.call(arguments,1);if(m.length!==1||!m[0].getTracks().find(p=>p===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(p=>p.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[f.id];if(x)x.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const p=new t.MediaStream([h]);this._streams[f.id]=p,this._reverseStreams[p.id]=f,this.addStream(p)}return this.getSenders().find(p=>p.track===h)};function i(u,h){let f=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const v=u._reverseStreams[m],x=u._streams[v.id];f=f.replace(new RegExp(x.id,"g"),v.id)}),new RTCSessionDescription({type:h.type,sdp:f})}function o(u,h){let f=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const v=u._reverseStreams[m],x=u._streams[v.id];f=f.replace(new RegExp(v.id,"g"),x.id)}),new RTCSessionDescription({type:h.type,sdp:f})}["createOffer","createAnswer"].forEach(function(u){const h=t.RTCPeerConnection.prototype[u],f={[u](){const m=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[x=>{const p=i(this,x);m[0].apply(null,[p])},x=>{m[1]&&m[1].apply(null,x)},arguments[2]]):h.apply(this,arguments).then(x=>i(this,x))}};t.RTCPeerConnection.prototype[u]=f[u]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=c.get.apply(this);return u.type===""?u:i(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let m;Object.keys(this._streams).forEach(v=>{this._streams[v].getTracks().find(p=>h.track===p)&&(m=this._streams[v])}),m&&(m.getTracks().length===1?this.removeStream(this._reverseStreams[m.id]):m.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function mv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=t.RTCPeerConnection.prototype[r],s={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=s[r]})}function gk(t,e){_a(t,"negotiationneeded",r=>{const n=r.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const r_=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:gk,shimAddTrackRemoveTrack:pk,shimAddTrackRemoveTrackWithNative:mk,shimGetSendersWithDtmf:hk,shimGetUserMedia:ck,shimMediaStream:uk,shimOnTrack:dk,shimPeerConnection:mv,shimSenderReceiverGetStats:fk},Symbol.toStringTag,{value:"Module"}));function yk(t,e){const r=t&&t.navigator,n=t&&t.MediaStreamTrack;if(r.getUserMedia=function(s,i,o){ab("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(s).then(i,o)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const s=function(o,l,c){l in o&&!(c in o)&&(o[c]=o[l],delete o[l])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o.audio,"autoGainControl","mozAutoGainControl"),s(o.audio,"noiseSuppression","mozNoiseSuppression")),i(o)},n&&n.prototype.getSettings){const o=n.prototype.getSettings;n.prototype.getSettings=function(){const l=o.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const o=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function cW(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}function vk(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function pv(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const i=t.RTCPeerConnection.prototype[s],o={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=o[s]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,o,l]=arguments;return n.apply(this,[i||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(u=>{u.type=r[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;c.forEach((h,f)=>{c.set(f,Object.assign({},h,{type:r[h.type]||h.type}))})}return c}).then(o,l)}}function xk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(i=>i._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function wk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n}),_a(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function bk(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){ab("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function Ek(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Ck(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const s=n.length>0;s&&n.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=e.apply(this,arguments);if(s){const{sender:o}=i,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n,o.sendEncodings=n,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function _k(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function Tk(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Ak(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const n_=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Ck,shimCreateAnswer:Ak,shimCreateOffer:Tk,shimGetDisplayMedia:cW,shimGetParameters:_k,shimGetUserMedia:yk,shimOnTrack:vk,shimPeerConnection:pv,shimRTCDataChannel:Ek,shimReceiverGetStats:wk,shimRemoveStream:bk,shimSenderGetStats:xk},Symbol.toStringTag,{value:"Module"}));function Sk(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(s=>e.call(this,s,n)),n.getVideoTracks().forEach(s=>e.call(this,s,n))},t.RTCPeerConnection.prototype.addTrack=function(n,...s){return s&&s.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const s=r.getTracks();this.getSenders().forEach(i=>{s.includes(i.track)&&this.removeTrack(i)})})}}function Nk(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,this.dispatchEvent(i)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(i=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(i)>=0)return;n._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,n.dispatchEvent(o)})}),e.apply(n,arguments)}}}function Ik(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,r=e.createOffer,n=e.createAnswer,s=e.setLocalDescription,i=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,h){const f=arguments.length>=2?arguments[2]:arguments[0],m=r.apply(this,[f]);return h?(m.then(u,h),Promise.resolve()):m},e.createAnswer=function(u,h){const f=arguments.length>=2?arguments[2]:arguments[0],m=n.apply(this,[f]);return h?(m.then(u,h),Promise.resolve()):m};let l=function(c,u,h){const f=s.apply(this,[c]);return h?(f.then(u,h),Promise.resolve()):f};e.setLocalDescription=l,l=function(c,u,h){const f=i.apply(this,[c]);return h?(f.then(u,h),Promise.resolve()):f},e.setRemoteDescription=l,l=function(c,u,h){const f=o.apply(this,[c]);return h?(f.then(u,h),Promise.resolve()):f},e.addIceCandidate=l}function Rk(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,n=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=s=>n(Pk(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(n,s,i){e.mediaDevices.getUserMedia(n).then(s,i)}).bind(e))}function Pk(t){return t&&t.video!==void 0?Object.assign({},t,{video:lk(t.video)}):t}function kk(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,s){if(n&&n.iceServers){const i=[];for(let o=0;o<n.iceServers.length;o++){let l=n.iceServers[o];l.urls===void 0&&l.url?(ab("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,i.push(l)):i.push(n.iceServers[o])}n.iceServers=i}return new e(n,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function jk(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Mk(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Dk(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const s_=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Dk,shimCallbacksAPI:Ik,shimConstraints:Pk,shimCreateOfferLegacy:Mk,shimGetUserMedia:Rk,shimLocalStreamsAPI:Sk,shimRTCIceServerUrls:kk,shimRemoteStreamsAPI:Nk,shimTrackEventTransceiver:jk},Symbol.toStringTag,{value:"Module"}));var Ok={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(r){return r.split(`
m=`).map((s,i)=>(i>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(r){const n=e.splitSections(r);return n&&n[0]},e.getMediaSections=function(r){const n=e.splitSections(r);return n.shift(),n},e.matchPrefix=function(r,n){return e.splitLines(r).filter(s=>s.indexOf(n)===0)},e.parseCandidate=function(r){let n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");const s={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let i=8;i<n.length;i+=2)switch(n[i]){case"raddr":s.relatedAddress=n[i+1];break;case"rport":s.relatedPort=parseInt(n[i+1],10);break;case"tcptype":s.tcpType=n[i+1];break;case"ufrag":s.ufrag=n[i+1],s.usernameFragment=n[i+1];break;default:s[n[i]]===void 0&&(s[n[i]]=n[i+1]);break}return s},e.writeCandidate=function(r){const n=[];n.push(r.foundation);const s=r.component;s==="rtp"?n.push(1):s==="rtcp"?n.push(2):n.push(s),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);const i=r.type;return n.push("typ"),n.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let n=r.substring(9).split(" ");const s={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),s.name=n[0],s.clockRate=parseInt(n[1],10),s.channels=n.length===3?parseInt(n[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);const s=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(r){const n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const n={};let s;const i=r.substring(r.indexOf(" ")+1).split(";");for(let o=0;o<i.length;o++)s=i[o].trim().split("="),n[s[0].trim()]=s[1];return n},e.writeFmtp=function(r){let n="",s=r.payloadType;if(r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const i=[];Object.keys(r.parameters).forEach(o=>{r.parameters[o]!==void 0?i.push(o+"="+r.parameters[o]):i.push(o)}),n+="a=fmtp:"+s+" "+i.join(";")+`\r
`}return n},e.parseRtcpFb=function(r){const n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(r){let n="",s=r.payloadType;return r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(i=>{n+="a=rtcp-fb:"+s+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(r){const n=r.indexOf(" "),s={ssrc:parseInt(r.substring(7,n),10)},i=r.indexOf(":",n);return i>-1?(s.attribute=r.substring(n+1,i),s.value=r.substring(i+1)):s.attribute=r.substring(n+1),s},e.parseSsrcGroup=function(r){const n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(s=>parseInt(s,10))}},e.getMid=function(r){const n=e.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(r){const n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:e.matchPrefix(r+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,n){let s="a=setup:"+n+`\r
`;return r.fingerprints.forEach(i=>{s+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),s},e.parseCryptoLine=function(r){const n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,n){return e.matchPrefix(r+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,n){const s=e.matchPrefix(r+n,"a=ice-ufrag:")[0],i=e.matchPrefix(r+n,"a=ice-pwd:")[0];return s&&i?{usernameFragment:s.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(r){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(r)[0].split(" ");n.profile=i[2];for(let l=3;l<i.length;l++){const c=i[l],u=e.matchPrefix(r,"a=rtpmap:"+c+" ")[0];if(u){const h=e.parseRtpMap(u),f=e.matchPrefix(r,"a=fmtp:"+c+" ");switch(h.parameters=f.length?e.parseFmtp(f[0]):{},h.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),n.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(h.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(l=>{n.headerExtensions.push(e.parseExtmap(l))});const o=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(l=>{o.forEach(c=>{l.rtcpFeedback.find(h=>h.type===c.type&&h.parameter===c.parameter)||l.rtcpFeedback.push(c)})}),n},e.writeRtpDescription=function(r,n){let s="";s+="m="+r+" ",s+=n.codecs.length>0?"9":"0",s+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=n.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(o=>{s+=e.writeRtpMap(o),s+=e.writeFmtp(o),s+=e.writeRtcpFb(o)});let i=0;return n.codecs.forEach(o=>{o.maxptime>i&&(i=o.maxptime)}),i>0&&(s+="a=maxptime:"+i+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(o=>{s+=e.writeExtmap(o)}),s},e.parseRtpEncodingParameters=function(r){const n=[],s=e.parseRtpParameters(r),i=s.fecMechanisms.indexOf("RED")!==-1,o=s.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(r,"a=ssrc:").map(m=>e.parseSsrcMedia(m)).filter(m=>m.attribute==="cname"),c=l.length>0&&l[0].ssrc;let u;const h=e.matchPrefix(r,"a=ssrc-group:FID").map(m=>m.substring(17).split(" ").map(x=>parseInt(x,10)));h.length>0&&h[0].length>1&&h[0][0]===c&&(u=h[0][1]),s.codecs.forEach(m=>{if(m.name.toUpperCase()==="RTX"&&m.parameters.apt){let v={ssrc:c,codecPayloadType:parseInt(m.parameters.apt,10)};c&&u&&(v.rtx={ssrc:u}),n.push(v),i&&(v=JSON.parse(JSON.stringify(v)),v.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},n.push(v))}}),n.length===0&&c&&n.push({ssrc:c});let f=e.matchPrefix(r,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,n.forEach(m=>{m.maxBitrate=f})),n},e.parseRtcpParameters=function(r){const n={},s=e.matchPrefix(r,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];s&&(n.cname=s.value,n.ssrc=s.ssrc);const i=e.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=i.length===0;const o=e.matchPrefix(r,"a=rtcp-mux");return n.mux=o.length>0,n},e.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},e.parseMsid=function(r){let n;const s=e.matchPrefix(r,"a=msid:");if(s.length===1)return n=s[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=e.matchPrefix(r,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(i.length>0)return n=i[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(r){const n=e.parseMLine(r),s=e.matchPrefix(r,"a=max-message-size:");let i;s.length>0&&(i=parseInt(s[0].substring(19),10)),isNaN(i)&&(i=65536);const o=e.matchPrefix(r,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const l=e.matchPrefix(r,"a=sctpmap:");if(l.length>0){const c=l[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:i}}},e.writeSctpDescription=function(r,n){let s=[];return r.protocol!=="DTLS/SCTP"?s=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:s=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&s.push("a=max-message-size:"+n.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,n,s){let i;const o=n!==void 0?n:2;return r?i=r:i=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+i+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,n){const s=e.splitLines(r);for(let i=0;i<s.length;i++)switch(s[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[i].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const s=e.splitLines(r)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(r){const s=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const n=e.splitLines(r);for(let s=0;s<n.length;s++)if(n[s].length<2||n[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(Ok);var Lk=Ok.exports;const _l=Ev(Lk),uW=v_({__proto__:null,default:_l},[Lk]);function Rf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const s=new e(n),i=_l.parseCandidate(n.candidate);for(const o in i)o in s||Object.defineProperty(s,o,{value:i[o]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(n)},t.RTCIceCandidate.prototype=e.prototype,_a(t,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"}),r))}function gv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||_a(t,"icecandidate",e=>{if(e.candidate){const r=_l.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function Pf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const c=_l.splitSections(l.sdp);return c.shift(),c.some(u=>{const h=_l.parseMLine(u);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},n=function(l){const c=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const u=parseInt(c[1],10);return u!==u?-1:u},s=function(l){let c=65536;return e.browser==="firefox"&&(e.version<57?l===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},i=function(l,c){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const h=_l.matchPrefix(l.sdp,"a=max-message-size:");return h.length>0?u=parseInt(h[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(u=2147483637),u},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const c=n(arguments[0]),u=s(c),h=i(arguments[0],c);let f;u===0&&h===0?f=Number.POSITIVE_INFINITY:u===0||h===0?f=Math.max(u,h):f=Math.min(u,h);const m={};Object.defineProperty(m,"maxMessageSize",{get(){return f}}),this._sctp=m}return o.apply(this,arguments)}}function kf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(n,s){const i=n.send;n.send=function(){const l=arguments[0],c=l.length||l.size||l.byteLength;if(n.readyState==="open"&&s.sctp&&c>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return i.apply(n,arguments)}}const r=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=r.apply(this,arguments);return e(s,this),s},_a(t,"datachannel",n=>(e(n.channel,n.target),n))}function yv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const i=s.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const o=new Event("connectionstatechange",s);i.dispatchEvent(o)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function vv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=s.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:i}):s.sdp=i}return r.apply(this,arguments)}}function jf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Mf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return r.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?r.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>r.apply(this,[o]))})}const dW=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:vv,shimAddIceCandidateNullOrEmpty:jf,shimConnectionState:yv,shimMaxMessageSize:Pf,shimParameterlessSetLocalDescription:Mf,shimRTCIceCandidate:Rf,shimRTCIceCandidateRelayProtocol:gv,shimSendThrowTypeError:kf},Symbol.toStringTag,{value:"Module"}));function hW({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=ak,n=lW(t),s={browserDetails:n,commonShim:dW,extractVersion:Zc,disableLog:oW,disableWarnings:aW,sdp:uW};switch(n.browser){case"chrome":if(!r_||!mv||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),s;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),s;r("adapter.js shimming chrome."),s.browserShim=r_,jf(t,n),Mf(t),ck(t,n),uk(t),mv(t,n),dk(t),pk(t,n),hk(t),fk(t),gk(t,n),Rf(t),gv(t),yv(t),Pf(t,n),kf(t),vv(t,n);break;case"firefox":if(!n_||!pv||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),s;r("adapter.js shimming firefox."),s.browserShim=n_,jf(t,n),Mf(t),yk(t,n),pv(t,n),vk(t),bk(t),xk(t),wk(t),Ek(t),Ck(t),_k(t),Tk(t),Ak(t),Rf(t),yv(t),Pf(t,n),kf(t);break;case"safari":if(!s_||!e.shimSafari)return r("Safari shim is not included in this adapter release."),s;r("adapter.js shimming safari."),s.browserShim=s_,jf(t,n),Mf(t),kk(t),Mk(t),Ik(t),Sk(t),Nk(t),jk(t),Rk(t),Dk(t),Rf(t),gv(t),Pf(t,n),kf(t),vv(t,n);break;default:r("Unsupported browser!");break}return s}hW({window:typeof window>"u"?void 0:window});var Fk=t=>{throw TypeError(t)},Vk=(t,e,r)=>e.has(t)||Fk("Cannot "+r),fW=(t,e,r)=>(Vk(t,e,"read from private field"),r?r.call(t):e.get(t)),mW=(t,e,r)=>e.has(t)?Fk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),pW=(t,e,r,n)=>(Vk(t,e,"write to private field"),e.set(t,r),r);const Kp=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],Jp=Kp.map(([t])=>t),gW=Jp.filter((t,e)=>Kp[e][1]==="L"),yW=Jp.filter((t,e)=>Kp[e][1]==="M");function xv(t){switch(t){case"Linear-Codes":return gW.reduce((e,r)=>e|xv(r),0);case"Matrix-Codes":return yW.reduce((e,r)=>e|xv(r),0);case"Any":return(1<<Kp.length)-1;case"None":return 0;default:return 1<<Jp.indexOf(t)}}function vW(t){if(t===0)return"None";const e=31-Math.clz32(t);return Jp[e]}function xW(t){return t.reduce((e,r)=>e|xv(r),0)}const wW=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function bW(t){return wW.indexOf(t)}const i_=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function EW(t){return t==="UnicodeBig"?i_.indexOf("UTF16BE"):i_.indexOf(t)}const CW=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function _W(t){return CW[t]}const TW=["Ignore","Read","Require"];function AW(t){return TW.indexOf(t)}const SW=["Plain","ECI","HRI","Hex","Escaped"];function NW(t){return SW.indexOf(t)}const Fm={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function o_(t){return{...t,formats:xW(t.formats),binarizer:bW(t.binarizer),eanAddOnSymbol:AW(t.eanAddOnSymbol),textMode:NW(t.textMode),characterSet:EW(t.characterSet)}}function IW(t){return{...t,format:vW(t.format),contentType:_W(t.contentType),eccLevel:t.ecLevel}}const RW={locateFile:(t,e)=>{const r=t.match(/_(.+?)\.wasm$/);return r?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.1.2/dist/${r[1]}/${t}`:e+t}},m0=new WeakMap;function PW(t,e){return Object.is(t,e)||Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>Object.prototype.hasOwnProperty.call(e,r)&&t[r]===e[r])}function Bk(t,{overrides:e,equalityFn:r=PW,fireImmediately:n=!1}={}){var s;const[i,o]=(s=m0.get(t))!=null?s:[RW],l=e??i;let c;if(n){if(o&&(c=r(i,l)))return o;const u=t({...l});return m0.set(t,[l,u]),u}(c??r(i,l))||m0.set(t,[l])}async function kW(t,e,r=Fm){const n={...Fm,...r},s=await Bk(t,{fireImmediately:!0});let i,o;if("width"in e&&"height"in e&&"data"in e){const{data:c,data:{byteLength:u},width:h,height:f}=e;o=s._malloc(u),s.HEAPU8.set(c,o),i=s.readBarcodesFromPixmap(o,h,f,o_(n))}else{let c,u;if("buffer"in e)[c,u]=[e.byteLength,e];else if("byteLength"in e)[c,u]=[e.byteLength,new Uint8Array(e)];else if("size"in e)[c,u]=[e.size,new Uint8Array(await e.arrayBuffer())];else throw new TypeError("Invalid input type");o=s._malloc(c),s.HEAPU8.set(u,o),i=s.readBarcodesFromImage(o,c,o_(n))}s._free(o);const l=[];for(let c=0;c<i.size();++c)l.push(IW(i.get(c)));return l}({...Fm,formats:[...Fm.formats]});var Uk=async function(t={}){var e,r=t,n,s,i=new Promise((T,E)=>{n=T,s=E}),o=typeof window=="object",l=typeof Bun<"u",c=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var u="./this.program",h="";function f(T){return r.locateFile?r.locateFile(T,h):h+T}var m,v;(o||c||l)&&(c?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),h.startsWith("blob:")?h="":h=h.slice(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1),c&&(v=T=>{var E=new XMLHttpRequest;return E.open("GET",T,!1),E.responseType="arraybuffer",E.send(null),new Uint8Array(E.response)}),m=async T=>{var E=await fetch(T,{credentials:"same-origin"});if(E.ok)return E.arrayBuffer();throw new Error(E.status+" : "+E.url)});var x=console.log.bind(console),p=console.error.bind(console),w,_,b=!1,C,R,L,F,I,S,N,j;function D(){var T=_.buffer;C=new Int8Array(T),L=new Int16Array(T),r.HEAPU8=R=new Uint8Array(T),F=new Uint16Array(T),I=new Int32Array(T),S=new Uint32Array(T),N=new Float32Array(T),j=new Float64Array(T)}function O(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Ce(r.preRun.shift());ge(Te)}function k(){g.ya()}function G(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)be(r.postRun.shift());ge(xe)}var H=0,J=null;function ie(T){var E;H++,(E=r.monitorRunDependencies)===null||E===void 0||E.call(r,H)}function q(T){var E;if(H--,(E=r.monitorRunDependencies)===null||E===void 0||E.call(r,H),H==0&&J){var P=J;J=null,P()}}function W(T){var E;(E=r.onAbort)===null||E===void 0||E.call(r,T),T="Aborted("+T+")",p(T),b=!0,T+=". Build with -sASSERTIONS for more info.";var P=new WebAssembly.RuntimeError(T);throw s(P),P}var se;function re(){return f("zxing_reader.wasm")}function le(T){if(T==se&&w)return new Uint8Array(w);if(v)return v(T);throw"both async and sync fetching of the wasm failed"}async function ue(T){if(!w)try{var E=await m(T);return new Uint8Array(E)}catch{}return le(T)}async function Se(T,E){try{var P=await ue(T),V=await WebAssembly.instantiate(P,E);return V}catch(B){p(`failed to asynchronously prepare wasm: ${B}`),W(B)}}async function ke(T,E,P){if(!T&&typeof WebAssembly.instantiateStreaming=="function")try{var V=fetch(E,{credentials:"same-origin"}),B=await WebAssembly.instantiateStreaming(V,P);return B}catch(U){p(`wasm streaming compile failed: ${U}`),p("falling back to ArrayBuffer instantiation")}return Se(E,P)}function we(){return{a:d}}async function oe(){function T(U,Q){return g=U.exports,_=g.xa,D(),Ra=g.Ba,q(),g}ie();function E(U){return T(U.instance)}var P=we();if(r.instantiateWasm)return new Promise((U,Q)=>{r.instantiateWasm(P,(z,ne)=>{U(T(z))})});se!=null||(se=re());try{var V=await ke(w,se,P),B=E(V);return B}catch(U){return s(U),Promise.reject(U)}}var ge=T=>{for(;T.length>0;)T.shift()(r)},xe=[],be=T=>xe.push(T),Te=[],Ce=T=>Te.push(T),he=T=>$t(T),ve=()=>Qe(),gt=[],at=0,Ot=T=>{var E=new ur(T);return E.get_caught()||(E.set_caught(!0),at--),E.set_rethrown(!1),gt.push(E),Jt(T),K(T)},Ze=0,yt=()=>{X(0,0);var T=gt.pop();Kt(T.excPtr),Ze=0};class ur{constructor(E){this.excPtr=E,this.ptr=E-24}set_type(E){S[this.ptr+4>>2]=E}get_type(){return S[this.ptr+4>>2]}set_destructor(E){S[this.ptr+8>>2]=E}get_destructor(){return S[this.ptr+8>>2]}set_caught(E){E=E?1:0,C[this.ptr+12]=E}get_caught(){return C[this.ptr+12]!=0}set_rethrown(E){E=E?1:0,C[this.ptr+13]=E}get_rethrown(){return C[this.ptr+13]!=0}init(E,P){this.set_adjusted_ptr(0),this.set_type(E),this.set_destructor(P)}set_adjusted_ptr(E){S[this.ptr+16>>2]=E}get_adjusted_ptr(){return S[this.ptr+16>>2]}}var _n=T=>nt(T),xs=T=>{var E=Ze;if(!E)return _n(0),0;var P=new ur(E);P.set_adjusted_ptr(E);var V=P.get_type();if(!V)return _n(0),E;for(var B of T){if(B===0||B===V)break;var U=P.ptr+16;if(di(B,V,U))return _n(B),E}return _n(V),E},un=()=>xs([]),ws=T=>xs([T]),_o=(T,E)=>xs([T,E]),Nt=()=>{var T=gt.pop();T||W("no exception to throw");var E=T.excPtr;throw T.get_rethrown()||(gt.push(T),T.set_rethrown(!0),T.set_caught(!1),at++),Ze=E,Ze},vt=(T,E,P)=>{var V=new ur(T);throw V.init(E,P),Ze=T,at++,Ze},bs=()=>at,Tn=T=>{throw Ze||(Ze=T),Ze},To=()=>W(""),ri={},dn=T=>{for(;T.length;){var E=T.pop(),P=T.pop();P(E)}};function An(T){return this.fromWireType(S[T>>2])}var Sn={},Tr={},Ar={},yc=r.InternalError=class extends Error{constructor(T){super(T),this.name="InternalError"}},Ae=T=>{throw new yc(T)},Ge=(T,E,P)=>{T.forEach(z=>Ar[z]=E);function V(z){var ne=P(z);ne.length!==T.length&&Ae("Mismatched type converter count");for(var ce=0;ce<T.length;++ce)hr(T[ce],ne[ce])}var B=new Array(E.length),U=[],Q=0;E.forEach((z,ne)=>{Tr.hasOwnProperty(z)?B[ne]=Tr[z]:(U.push(z),Sn.hasOwnProperty(z)||(Sn[z]=[]),Sn[z].push(()=>{B[ne]=Tr[z],++Q,Q===U.length&&V(B)}))}),U.length===0&&V(B)},Je=T=>{var E=ri[T];delete ri[T];var P=E.rawConstructor,V=E.rawDestructor,B=E.fields,U=B.map(Q=>Q.getterReturnType).concat(B.map(Q=>Q.setterArgumentType));Ge([T],U,Q=>{var z={};return B.forEach((ne,ce)=>{var de=ne.fieldName,_e=Q[ce],He=Q[ce].optional,Xe=ne.getter,wt=ne.getterContext,zt=Q[ce+B.length],Lt=ne.setter,Xt=ne.setterContext;z[de]={read:Rs=>_e.fromWireType(Xe(wt,Rs)),write:(Rs,Fr)=>{var fn=[];Lt(Xt,Rs,zt.toWireType(fn,Fr)),dn(fn)},optional:He}}),[{name:E.name,fromWireType:ne=>{var ce={};for(var de in z)ce[de]=z[de].read(ne);return V(ne),ce},toWireType:(ne,ce)=>{for(var de in z)if(!(de in ce)&&!z[de].optional)throw new TypeError(`Missing field: "${de}"`);var _e=P();for(de in z)z[de].write(_e,ce[de]);return ne!==null&&ne.push(V,_e),_e},argPackAdvance:hn,readValueFromPointer:An,destructorFunction:V}]})},Ht=(T,E,P,V,B)=>{},dr=()=>{for(var T=new Array(256),E=0;E<256;++E)T[E]=String.fromCharCode(E);Nn=T},Nn,dt=T=>{for(var E="",P=T;R[P];)E+=Nn[R[P++]];return E},ni=r.BindingError=class extends Error{constructor(T){super(T),this.name="BindingError"}},We=T=>{throw new ni(T)};function Md(T,E){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var V=E.name;if(T||We(`type "${V}" must have a positive integer typeid pointer`),Tr.hasOwnProperty(T)){if(P.ignoreDuplicateRegistrations)return;We(`Cannot register type '${V}' twice`)}if(Tr[T]=E,delete Ar[T],Sn.hasOwnProperty(T)){var B=Sn[T];delete Sn[T],B.forEach(U=>U())}}function hr(T,E){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Md(T,E,P)}var hn=8,rr=(T,E,P,V)=>{E=dt(E),hr(T,{name:E,fromWireType:function(B){return!!B},toWireType:function(B,U){return U?P:V},argPackAdvance:hn,readValueFromPointer:function(B){return this.fromWireType(R[B])},destructorFunction:null})},Dd=T=>({count:T.count,deleteScheduled:T.deleteScheduled,preservePointerOnDelete:T.preservePointerOnDelete,ptr:T.ptr,ptrType:T.ptrType,smartPtr:T.smartPtr,smartPtrType:T.smartPtrType}),Es=T=>{function E(P){return P.$$.ptrType.registeredClass.name}We(E(T)+" instance already deleted")},Cs=!1,Od=T=>{},Xp=T=>{T.smartPtr?T.smartPtrType.rawDestructor(T.smartPtr):T.ptrType.registeredClass.rawDestructor(T.ptr)},_s=T=>{T.count.value-=1;var E=T.count.value===0;E&&Xp(T)},Ao=T=>typeof FinalizationRegistry>"u"?(Ao=E=>E,T):(Cs=new FinalizationRegistry(E=>{_s(E.$$)}),Ao=E=>{var P=E.$$,V=!!P.smartPtr;if(V){var B={$$:P};Cs.register(E,B,E)}return E},Od=E=>Cs.unregister(E),Ao(T)),Zp=()=>{let T=Ts.prototype;Object.assign(T,{isAliasOf(P){if(!(this instanceof Ts)||!(P instanceof Ts))return!1;var V=this.$$.ptrType.registeredClass,B=this.$$.ptr;P.$$=P.$$;for(var U=P.$$.ptrType.registeredClass,Q=P.$$.ptr;V.baseClass;)B=V.upcast(B),V=V.baseClass;for(;U.baseClass;)Q=U.upcast(Q),U=U.baseClass;return V===U&&B===Q},clone(){if(this.$$.ptr||Es(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var P=Ao(Object.create(Object.getPrototypeOf(this),{$$:{value:Dd(this.$$)}}));return P.$$.count.value+=1,P.$$.deleteScheduled=!1,P},delete(){this.$$.ptr||Es(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&We("Object already scheduled for deletion"),Od(this),_s(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Es(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&We("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const E=Symbol.dispose;E&&(T[E]=T.delete)};function Ts(){}var Ta=(T,E)=>Object.defineProperty(E,"name",{value:T}),Aa={},So=(T,E,P)=>{if(T[E].overloadTable===void 0){var V=T[E];T[E]=function(){for(var B=arguments.length,U=new Array(B),Q=0;Q<B;Q++)U[Q]=arguments[Q];return T[E].overloadTable.hasOwnProperty(U.length)||We(`Function '${P}' called with an invalid number of arguments (${U.length}) - expects one of (${T[E].overloadTable})!`),T[E].overloadTable[U.length].apply(this,U)},T[E].overloadTable=[],T[E].overloadTable[V.argCount]=V}},In=(T,E,P)=>{r.hasOwnProperty(T)?((P===void 0||r[T].overloadTable!==void 0&&r[T].overloadTable[P]!==void 0)&&We(`Cannot register public name '${T}' twice`),So(r,T,T),r[T].overloadTable.hasOwnProperty(P)&&We(`Cannot register multiple overloads of a function with the same number of arguments (${P})!`),r[T].overloadTable[P]=E):(r[T]=E,r[T].argCount=P)},Ld=48,Fd=57,vc=T=>{T=T.replace(/[^a-zA-Z0-9_]/g,"$");var E=T.charCodeAt(0);return E>=Ld&&E<=Fd?`_${T}`:T};function xc(T,E,P,V,B,U,Q,z){this.name=T,this.constructor=E,this.instancePrototype=P,this.rawDestructor=V,this.baseClass=B,this.getActualType=U,this.upcast=Q,this.downcast=z,this.pureVirtualFunctions=[]}var Sa=(T,E,P)=>{for(;E!==P;)E.upcast||We(`Expected null or instance of ${P.name}, got an instance of ${E.name}`),T=E.upcast(T),E=E.baseClass;return T};function Vd(T,E){if(E===null)return this.isReference&&We(`null is not a valid ${this.name}`),0;E.$$||We(`Cannot pass "${embindRepr(E)}" as a ${this.name}`),E.$$.ptr||We(`Cannot pass deleted object as a pointer of type ${this.name}`);var P=E.$$.ptrType.registeredClass,V=Sa(E.$$.ptr,P,this.registeredClass);return V}function eg(T,E){var P;if(E===null)return this.isReference&&We(`null is not a valid ${this.name}`),this.isSmartPointer?(P=this.rawConstructor(),T!==null&&T.push(this.rawDestructor,P),P):0;(!E||!E.$$)&&We(`Cannot pass "${embindRepr(E)}" as a ${this.name}`),E.$$.ptr||We(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&E.$$.ptrType.isConst&&We(`Cannot convert argument of type ${E.$$.smartPtrType?E.$$.smartPtrType.name:E.$$.ptrType.name} to parameter type ${this.name}`);var V=E.$$.ptrType.registeredClass;if(P=Sa(E.$$.ptr,V,this.registeredClass),this.isSmartPointer)switch(E.$$.smartPtr===void 0&&We("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:E.$$.smartPtrType===this?P=E.$$.smartPtr:We(`Cannot convert argument of type ${E.$$.smartPtrType?E.$$.smartPtrType.name:E.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:P=E.$$.smartPtr;break;case 2:if(E.$$.smartPtrType===this)P=E.$$.smartPtr;else{var B=E.clone();P=this.rawShare(P,Rn.toHandle(()=>B.delete())),T!==null&&T.push(this.rawDestructor,P)}break;default:We("Unsupporting sharing policy")}return P}function Na(T,E){if(E===null)return this.isReference&&We(`null is not a valid ${this.name}`),0;E.$$||We(`Cannot pass "${embindRepr(E)}" as a ${this.name}`),E.$$.ptr||We(`Cannot pass deleted object as a pointer of type ${this.name}`),E.$$.ptrType.isConst&&We(`Cannot convert argument of type ${E.$$.ptrType.name} to parameter type ${this.name}`);var P=E.$$.ptrType.registeredClass,V=Sa(E.$$.ptr,P,this.registeredClass);return V}var wc=(T,E,P)=>{if(E===P)return T;if(P.baseClass===void 0)return null;var V=wc(T,E,P.baseClass);return V===null?null:P.downcast(V)},bc={},No=(T,E)=>{for(E===void 0&&We("ptr should not be undefined");T.baseClass;)E=T.upcast(E),T=T.baseClass;return E},As=(T,E)=>(E=No(T,E),bc[E]),si=(T,E)=>{(!E.ptrType||!E.ptr)&&Ae("makeClassHandle requires ptr and ptrType");var P=!!E.smartPtrType,V=!!E.smartPtr;return P!==V&&Ae("Both smartPtrType and smartPtr must be specified"),E.count={value:1},Ao(Object.create(T,{$$:{value:E,writable:!0}}))};function tg(T){var E=this.getPointee(T);if(!E)return this.destructor(T),null;var P=As(this.registeredClass,E);if(P!==void 0){if(P.$$.count.value===0)return P.$$.ptr=E,P.$$.smartPtr=T,P.clone();var V=P.clone();return this.destructor(T),V}function B(){return this.isSmartPointer?si(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:E,smartPtrType:this,smartPtr:T}):si(this.registeredClass.instancePrototype,{ptrType:this,ptr:T})}var U=this.registeredClass.getActualType(E),Q=Aa[U];if(!Q)return B.call(this);var z;this.isConst?z=Q.constPointerType:z=Q.pointerType;var ne=wc(E,this.registeredClass,z.registeredClass);return ne===null?B.call(this):this.isSmartPointer?si(z.registeredClass.instancePrototype,{ptrType:z,ptr:ne,smartPtrType:this,smartPtr:T}):si(z.registeredClass.instancePrototype,{ptrType:z,ptr:ne})}var Bd=()=>{Object.assign(Io.prototype,{getPointee(T){return this.rawGetPointee&&(T=this.rawGetPointee(T)),T},destructor(T){var E;(E=this.rawDestructor)===null||E===void 0||E.call(this,T)},argPackAdvance:hn,readValueFromPointer:An,fromWireType:tg})};function Io(T,E,P,V,B,U,Q,z,ne,ce,de){this.name=T,this.registeredClass=E,this.isReference=P,this.isConst=V,this.isSmartPointer=B,this.pointeeType=U,this.sharingPolicy=Q,this.rawGetPointee=z,this.rawConstructor=ne,this.rawShare=ce,this.rawDestructor=de,!B&&E.baseClass===void 0?V?(this.toWireType=Vd,this.destructorFunction=null):(this.toWireType=Na,this.destructorFunction=null):this.toWireType=eg}var Ec=(T,E,P)=>{r.hasOwnProperty(T)||Ae("Replacing nonexistent public symbol"),r[T].overloadTable!==void 0&&P!==void 0?r[T].overloadTable[P]=E:(r[T]=E,r[T].argCount=P)},Ia=[],Ra,Fe=T=>{var E=Ia[T];return E||(Ia[T]=E=Ra.get(T)),E},Ud=function(T,E){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(T.includes("j"))return dynCallLegacy(T,E,P);var V=Fe(E),B=V(...P);return B},rg=function(T,E){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var V=arguments.length,B=new Array(V),U=0;U<V;U++)B[U]=arguments[U];return Ud(T,E,B,P)}},Wr=function(T,E){T=dt(T);function P(){if(T.includes("j"))return rg(T,E);var B=Fe(E);return B}var V=P();return typeof V!="function"&&We(`unknown function pointer with signature ${T}: ${E}`),V};class qd extends Error{}var Cc=T=>{var E=A(T),P=dt(E);return M(E),P},Pa=(T,E)=>{var P=[],V={};function B(U){if(!V[U]&&!Tr[U]){if(Ar[U]){Ar[U].forEach(B);return}P.push(U),V[U]=!0}}throw E.forEach(B),new qd(`${T}: `+P.map(Cc).join([", "]))},Ss=(T,E,P,V,B,U,Q,z,ne,ce,de,_e,He)=>{de=dt(de),U=Wr(B,U),z&&(z=Wr(Q,z)),ce&&(ce=Wr(ne,ce)),He=Wr(_e,He);var Xe=vc(de);In(Xe,function(){Pa(`Cannot construct ${de} due to unbound types`,[V])}),Ge([T,E,P],V?[V]:[],wt=>{wt=wt[0];var zt,Lt;V?(zt=wt.registeredClass,Lt=zt.instancePrototype):Lt=Ts.prototype;var Xt=Ta(de,function(){if(Object.getPrototypeOf(this)!==Rs)throw new ni(`Use 'new' to construct ${de}`);if(Fr.constructor_body===void 0)throw new ni(`${de} has no accessible constructor`);for(var ub=arguments.length,gh=new Array(ub),yh=0;yh<ub;yh++)gh[yh]=arguments[yh];var db=Fr.constructor_body[gh.length];if(db===void 0)throw new ni(`Tried to invoke ctor of ${de} with invalid number of parameters (${gh.length}) - expected (${Object.keys(Fr.constructor_body).toString()}) parameters instead!`);return db.apply(this,gh)}),Rs=Object.create(Lt,{constructor:{value:Xt}});Xt.prototype=Rs;var Fr=new xc(de,Xt,Rs,He,zt,U,z,ce);if(Fr.baseClass){var fn,ph;(ph=(fn=Fr.baseClass).__derivedClasses)!==null&&ph!==void 0||(fn.__derivedClasses=[]),Fr.baseClass.__derivedClasses.push(Fr)}var Dj=new Io(de,Fr,!0,!1,!1),lb=new Io(de+"*",Fr,!1,!1,!1),cb=new Io(de+" const*",Fr,!1,!0,!1);return Aa[T]={pointerType:lb,constPointerType:cb},Ec(Xe,Xt),[Dj,lb,cb]})},Qr=(T,E)=>{for(var P=[],V=0;V<T;V++)P.push(S[E+V*4>>2]);return P};function ka(T){for(var E=1;E<T.length;++E)if(T[E]!==null&&T[E].destructorFunction===void 0)return!0;return!1}function ii(T,E,P,V,B,U){var Q=E.length;Q<2&&We("argTypes array size mismatch! Must at least get return value and 'this' types!");var z=E[1]!==null&&P!==null,ne=ka(E),ce=E[0].name!=="void",de=Q-2,_e=new Array(de),He=[],Xe=[],wt=function(){Xe.length=0;var zt;He.length=z?2:1,He[0]=B,z&&(zt=E[1].toWireType(Xe,this),He[1]=zt);for(var Lt=0;Lt<de;++Lt)_e[Lt]=E[Lt+2].toWireType(Xe,Lt<0||arguments.length<=Lt?void 0:arguments[Lt]),He.push(_e[Lt]);var Xt=V(...He);function Rs(Fr){if(ne)dn(Xe);else for(var fn=z?1:2;fn<E.length;fn++){var ph=fn===1?zt:_e[fn-2];E[fn].destructorFunction!==null&&E[fn].destructorFunction(ph)}if(ce)return E[0].fromWireType(Fr)}return Rs(Xt)};return Ta(T,wt)}var Gd=(T,E,P,V,B,U)=>{var Q=Qr(E,P);B=Wr(V,B),Ge([],[T],z=>{z=z[0];var ne=`constructor ${z.name}`;if(z.registeredClass.constructor_body===void 0&&(z.registeredClass.constructor_body=[]),z.registeredClass.constructor_body[E-1]!==void 0)throw new ni(`Cannot register multiple constructors with identical number of parameters (${E-1}) for class '${z.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return z.registeredClass.constructor_body[E-1]=()=>{Pa(`Cannot construct ${z.name} due to unbound types`,Q)},Ge([],Q,ce=>(ce.splice(1,0,null),z.registeredClass.constructor_body[E-1]=ii(ne,ce,null,B,U),[])),[]})},ot=T=>{T=T.trim();const E=T.indexOf("(");return E===-1?T:T.slice(0,E)},ja=(T,E,P,V,B,U,Q,z,ne,ce)=>{var de=Qr(P,V);E=dt(E),E=ot(E),U=Wr(B,U),Ge([],[T],_e=>{_e=_e[0];var He=`${_e.name}.${E}`;E.startsWith("@@")&&(E=Symbol[E.substring(2)]),z&&_e.registeredClass.pureVirtualFunctions.push(E);function Xe(){Pa(`Cannot call ${He} due to unbound types`,de)}var wt=_e.registeredClass.instancePrototype,zt=wt[E];return zt===void 0||zt.overloadTable===void 0&&zt.className!==_e.name&&zt.argCount===P-2?(Xe.argCount=P-2,Xe.className=_e.name,wt[E]=Xe):(So(wt,E,He),wt[E].overloadTable[P-2]=Xe),Ge([],de,Lt=>{var Xt=ii(He,Lt,_e,U,Q);return wt[E].overloadTable===void 0?(Xt.argCount=P-2,wt[E]=Xt):wt[E].overloadTable[P-2]=Xt,[]}),[]})},Ns=[],Sr=[],_c=T=>{T>9&&--Sr[T+1]===0&&(Sr[T]=void 0,Ns.push(T))},$d=()=>Sr.length/2-5-Ns.length,ng=()=>{Sr.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=$d},Rn={toValue:T=>(T||We(`Cannot use deleted val. handle = ${T}`),Sr[T]),toHandle:T=>{switch(T){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const E=Ns.pop()||Sr.length;return Sr[E]=T,Sr[E+1]=1,E}}}},zd={name:"emscripten::val",fromWireType:T=>{var E=Rn.toValue(T);return _c(T),E},toWireType:(T,E)=>Rn.toHandle(E),argPackAdvance:hn,readValueFromPointer:An,destructorFunction:null},sg=T=>hr(T,zd),Ro=(T,E)=>{switch(E){case 4:return function(P){return this.fromWireType(N[P>>2])};case 8:return function(P){return this.fromWireType(j[P>>3])};default:throw new TypeError(`invalid float width (${E}): ${T}`)}},Hn=(T,E,P)=>{E=dt(E),hr(T,{name:E,fromWireType:V=>V,toWireType:(V,B)=>B,argPackAdvance:hn,readValueFromPointer:Ro(E,P),destructorFunction:null})},Wd=(T,E,P,V,B,U,Q,z)=>{var ne=Qr(E,P);T=dt(T),T=ot(T),B=Wr(V,B),In(T,function(){Pa(`Cannot call ${T} due to unbound types`,ne)},E-1),Ge([],ne,ce=>{var de=[ce[0],null].concat(ce.slice(1));return Ec(T,ii(T,de,null,B,U),E-1),[]})},Qd=(T,E,P)=>{switch(E){case 1:return P?V=>C[V]:V=>R[V];case 2:return P?V=>L[V>>1]:V=>F[V>>1];case 4:return P?V=>I[V>>2]:V=>S[V>>2];default:throw new TypeError(`invalid integer width (${E}): ${T}`)}},Yd=(T,E,P,V,B)=>{E=dt(E);var U=de=>de;if(V===0){var Q=32-8*P;U=de=>de<<Q>>>Q}var z=E.includes("unsigned"),ne=(de,_e)=>{},ce;z?ce=function(de,_e){return ne(_e,this.name),_e>>>0}:ce=function(de,_e){return ne(_e,this.name),_e},hr(T,{name:E,fromWireType:U,toWireType:ce,argPackAdvance:hn,readValueFromPointer:Qd(E,P,V!==0),destructorFunction:null})},oi=(T,E,P)=>{var V=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],B=V[E];function U(Q){var z=S[Q>>2],ne=S[Q+4>>2];return new B(C.buffer,ne,z)}P=dt(P),hr(T,{name:P,fromWireType:U,argPackAdvance:hn,readValueFromPointer:U},{ignoreDuplicateRegistrations:!0})},ig=Object.assign({optional:!0},zd),og=(T,E)=>{hr(T,ig)},ag=(T,E,P,V)=>{if(!(V>0))return 0;for(var B=P,U=P+V-1,Q=0;Q<T.length;++Q){var z=T.charCodeAt(Q);if(z>=55296&&z<=57343){var ne=T.charCodeAt(++Q);z=65536+((z&1023)<<10)|ne&1023}if(z<=127){if(P>=U)break;E[P++]=z}else if(z<=2047){if(P+1>=U)break;E[P++]=192|z>>6,E[P++]=128|z&63}else if(z<=65535){if(P+2>=U)break;E[P++]=224|z>>12,E[P++]=128|z>>6&63,E[P++]=128|z&63}else{if(P+3>=U)break;E[P++]=240|z>>18,E[P++]=128|z>>12&63,E[P++]=128|z>>6&63,E[P++]=128|z&63}}return E[P]=0,P-B},Nr=(T,E,P)=>ag(T,R,E,P),Hd=T=>{for(var E=0,P=0;P<T.length;++P){var V=T.charCodeAt(P);V<=127?E++:V<=2047?E+=2:V>=55296&&V<=57343?(E+=4,++P):E+=3}return E},Kd=typeof TextDecoder<"u"?new TextDecoder:void 0,Po=function(T){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var V=E+P,B=E;T[B]&&!(B>=V);)++B;if(B-E>16&&T.buffer&&Kd)return Kd.decode(T.subarray(E,B));for(var U="";E<B;){var Q=T[E++];if(!(Q&128)){U+=String.fromCharCode(Q);continue}var z=T[E++]&63;if((Q&224)==192){U+=String.fromCharCode((Q&31)<<6|z);continue}var ne=T[E++]&63;if((Q&240)==224?Q=(Q&15)<<12|z<<6|ne:Q=(Q&7)<<18|z<<12|ne<<6|T[E++]&63,Q<65536)U+=String.fromCharCode(Q);else{var ce=Q-65536;U+=String.fromCharCode(55296|ce>>10,56320|ce&1023)}}return U},Ma=(T,E)=>T?Po(R,T,E):"",Jd=(T,E)=>{E=dt(E),hr(T,{name:E,fromWireType(P){for(var V=S[P>>2],B=P+4,U,z,Q=B,z=0;z<=V;++z){var ne=B+z;if(z==V||R[ne]==0){var ce=ne-Q,de=Ma(Q,ce);U===void 0?U=de:(U+="\0",U+=de),Q=ne+1}}return M(P),U},toWireType(P,V){V instanceof ArrayBuffer&&(V=new Uint8Array(V));var B,U=typeof V=="string";U||ArrayBuffer.isView(V)&&V.BYTES_PER_ELEMENT==1||We("Cannot pass non-string to std::string"),U?B=Hd(V):B=V.length;var Q=$(4+B+1),z=Q+4;return S[Q>>2]=B,U?Nr(V,z,B+1):R.set(V,z),P!==null&&P.push(M,Q),Q},argPackAdvance:hn,readValueFromPointer:An,destructorFunction(P){M(P)}})},ai=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ko=(T,E)=>{for(var P=T,V=P>>1,B=V+E/2;!(V>=B)&&F[V];)++V;if(P=V<<1,P-T>32&&ai)return ai.decode(R.subarray(T,P));for(var U="",Q=0;!(Q>=E/2);++Q){var z=L[T+Q*2>>1];if(z==0)break;U+=String.fromCharCode(z)}return U},Xd=(T,E,P)=>{if(P!=null||(P=2147483647),P<2)return 0;P-=2;for(var V=E,B=P<T.length*2?P/2:T.length,U=0;U<B;++U){var Q=T.charCodeAt(U);L[E>>1]=Q,E+=2}return L[E>>1]=0,E-V},Tc=T=>T.length*2,xt=(T,E)=>{for(var P=0,V="";!(P>=E/4);){var B=I[T+P*4>>2];if(B==0)break;if(++P,B>=65536){var U=B-65536;V+=String.fromCharCode(55296|U>>10,56320|U&1023)}else V+=String.fromCharCode(B)}return V},lg=(T,E,P)=>{if(P!=null||(P=2147483647),P<4)return 0;for(var V=E,B=V+P-4,U=0;U<T.length;++U){var Q=T.charCodeAt(U);if(Q>=55296&&Q<=57343){var z=T.charCodeAt(++U);Q=65536+((Q&1023)<<10)|z&1023}if(I[E>>2]=Q,E+=4,E+4>B)break}return I[E>>2]=0,E-V},cg=T=>{for(var E=0,P=0;P<T.length;++P){var V=T.charCodeAt(P);V>=55296&&V<=57343&&++P,E+=4}return E},Zd=(T,E,P)=>{P=dt(P);var V,B,U,Q;E===2?(V=ko,B=Xd,Q=Tc,U=z=>F[z>>1]):E===4&&(V=xt,B=lg,Q=cg,U=z=>S[z>>2]),hr(T,{name:P,fromWireType:z=>{for(var ne=S[z>>2],ce,de=z+4,_e=0;_e<=ne;++_e){var He=z+4+_e*E;if(_e==ne||U(He)==0){var Xe=He-de,wt=V(de,Xe);ce===void 0?ce=wt:(ce+="\0",ce+=wt),de=He+E}}return M(z),ce},toWireType:(z,ne)=>{typeof ne!="string"&&We(`Cannot pass non-string to C++ string type ${P}`);var ce=Q(ne),de=$(4+ce+E);return S[de>>2]=ce/E,B(ne,de+4,ce+E),z!==null&&z.push(M,de),de},argPackAdvance:hn,readValueFromPointer:An,destructorFunction(z){M(z)}})},eh=(T,E,P,V,B,U)=>{ri[T]={name:dt(E),rawConstructor:Wr(P,V),rawDestructor:Wr(B,U),fields:[]}},th=(T,E,P,V,B,U,Q,z,ne,ce)=>{ri[T].fields.push({fieldName:dt(E),getterReturnType:P,getter:Wr(V,B),getterContext:U,setterArgumentType:Q,setter:Wr(z,ne),setterContext:ce})},Da=(T,E)=>{E=dt(E),hr(T,{isVoid:!0,name:E,argPackAdvance:0,fromWireType:()=>{},toWireType:(P,V)=>{}})},Oa=[],Pn=(T,E,P,V)=>(T=Oa[T],E=Rn.toValue(E),T(null,E,P,V)),rh={},ug=T=>{var E=rh[T];return E===void 0?dt(T):E},li=()=>{if(typeof globalThis=="object")return globalThis;function T(E){E.$$$embind_global$$$=E;var P=typeof $$$embind_global$$$=="object"&&E.$$$embind_global$$$==E;return P||delete E.$$$embind_global$$$,P}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&T(global)?$$$embind_global$$$=global:typeof self=="object"&&T(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},nh=T=>T===0?Rn.toHandle(li()):(T=ug(T),Rn.toHandle(li()[T])),Ac=T=>{var E=Oa.length;return Oa.push(T),E},jo=(T,E)=>{var P=Tr[T];return P===void 0&&We(`${E} has unknown type ${Cc(T)}`),P},sh=(T,E)=>{for(var P=new Array(T),V=0;V<T;++V)P[V]=jo(S[E+V*4>>2],`parameter ${V}`);return P},La=(T,E,P)=>{var V=[],B=T.toWireType(V,P);return V.length&&(S[E>>2]=Rn.toHandle(V)),B},dg=Reflect.construct,ih=(T,E,P)=>{var V=sh(T,E),B=V.shift();T--;var U=new Array(T),Q=(ne,ce,de,_e)=>{for(var He=0,Xe=0;Xe<T;++Xe)U[Xe]=V[Xe].readValueFromPointer(_e+He),He+=V[Xe].argPackAdvance;var wt=P===1?dg(ce,U):ce.apply(ne,U);return La(B,de,wt)},z=`methodCaller<(${V.map(ne=>ne.name).join(", ")}) => ${B.name}>`;return Ac(Ta(z,Q))},Mo=T=>{T>9&&(Sr[T+1]+=1)},oh=T=>{var E=Rn.toValue(T);dn(E),_c(T)},ah=(T,E)=>{T=jo(T,"_emval_take_value");var P=T.readValueFromPointer(E);return Rn.toHandle(P)},Sc=(T,E,P,V)=>{var B=new Date().getFullYear(),U=new Date(B,0,1),Q=new Date(B,6,1),z=U.getTimezoneOffset(),ne=Q.getTimezoneOffset(),ce=Math.max(z,ne);S[T>>2]=ce*60,I[E>>2]=+(z!=ne);var de=Xe=>{var wt=Xe>=0?"-":"+",zt=Math.abs(Xe),Lt=String(Math.floor(zt/60)).padStart(2,"0"),Xt=String(zt%60).padStart(2,"0");return`UTC${wt}${Lt}${Xt}`},_e=de(z),He=de(ne);ne<z?(Nr(_e,P,17),Nr(He,V,17)):(Nr(_e,V,17),Nr(He,P,17))},Nc=()=>2147483648,lh=(T,E)=>Math.ceil(T/E)*E,Fa=T=>{var E=_.buffer,P=(T-E.byteLength+65535)/65536|0;try{return _.grow(P),D(),1}catch{}},ch=T=>{var E=R.length;T>>>=0;var P=Nc();if(T>P)return!1;for(var V=1;V<=4;V*=2){var B=E*(1+.2/V);B=Math.min(B,T+100663296);var U=Math.min(P,lh(Math.max(T,B),65536)),Q=Fa(U);if(Q)return!0}return!1},Va={},Is=()=>u||"./this.program",ci=()=>{if(!ci.strings){var T=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",E={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:T,_:Is()};for(var P in Va)Va[P]===void 0?delete E[P]:E[P]=Va[P];var V=[];for(var P in E)V.push(`${P}=${E[P]}`);ci.strings=V}return ci.strings},uh=(T,E)=>{var P=0,V=0;for(var B of ci()){var U=E+P;S[T+V>>2]=U,P+=Nr(B,U,1/0)+1,V+=4}return 0},dh=(T,E)=>{var P=ci();S[T>>2]=P.length;var V=0;for(var B of P)V+=Hd(B)+1;return S[E>>2]=V,0},hh=T=>52;function Ba(T,E,P,V,B){return 70}var Ir=[null,[],[]],fh=(T,E)=>{var P=Ir[T];E===0||E===10?((T===1?x:p)(Po(P)),P.length=0):P.push(E)},mh=(T,E,P,V)=>{for(var B=0,U=0;U<P;U++){var Q=S[E>>2],z=S[E+4>>2];E+=8;for(var ne=0;ne<z;ne++)fh(T,R[Q+ne]);B+=z}return S[V>>2]=B,0},ui=T=>T;dr(),Zp(),Bd(),ng(),r.noExitRuntime&&r.noExitRuntime,r.print&&(x=r.print),r.printErr&&(p=r.printErr),r.wasmBinary&&(w=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&(u=r.thisProgram);var d={s:Ot,w:yt,a:un,j:ws,m:_o,N:Nt,p:vt,da:bs,d:Tn,_:To,sa:Je,Z:Ht,na:rr,qa:Ss,pa:Gd,F:ja,la:sg,R:Hn,S:Wd,y:Yd,t:oi,ra:og,ma:Jd,O:Zd,K:eh,ta:th,oa:Da,V:Pn,ua:_c,wa:nh,$:ih,T:Mo,va:oh,ka:ah,aa:Sc,ea:ch,ba:uh,ca:dh,fa:hh,X:Ba,Q:mh,I:wj,C:Ej,U:sj,P:Ij,q:gj,b:ej,D:xj,ia:_j,c:rj,ha:Tj,h:nj,i:cj,r:dj,M:vj,v:fj,E:pj,J:yj,A:Cj,H:Rj,W:jj,k:oj,f:ij,e:tj,g:Ic,L:Nj,l:lj,ja:bj,o:hj,x:uj,u:mj,ga:Sj,B:Aj,n:aj,G:Pj,Y:kj,z:ui},g=await oe();g.ya;var A=g.za,M=r._free=g.Aa,$=r._malloc=g.Ca,K=g.Da,X=g.Ea,nt=g.Fa,$t=g.Ga,Qe=g.Ha,Kt=g.Ia,Jt=g.Ja,di=g.Ka;r.dynCall_viijii=g.La;var Yr=r.dynCall_vij=g.Ma;r.dynCall_jiji=g.Na;var Ua=r.dynCall_jiiii=g.Oa;r.dynCall_iiiiij=g.Pa,r.dynCall_iiiiijj=g.Qa,r.dynCall_iiiiiijj=g.Ra;function Ic(T,E,P,V){var B=ve();try{Fe(T)(E,P,V)}catch(U){if(he(B),U!==U+0)throw U;X(1,0)}}function ej(T,E){var P=ve();try{return Fe(T)(E)}catch(V){if(he(P),V!==V+0)throw V;X(1,0)}}function tj(T,E,P){var V=ve();try{Fe(T)(E,P)}catch(B){if(he(V),B!==B+0)throw B;X(1,0)}}function rj(T,E,P){var V=ve();try{return Fe(T)(E,P)}catch(B){if(he(V),B!==B+0)throw B;X(1,0)}}function nj(T,E,P,V){var B=ve();try{return Fe(T)(E,P,V)}catch(U){if(he(B),U!==U+0)throw U;X(1,0)}}function sj(T,E,P,V,B){var U=ve();try{return Fe(T)(E,P,V,B)}catch(Q){if(he(U),Q!==Q+0)throw Q;X(1,0)}}function ij(T,E){var P=ve();try{Fe(T)(E)}catch(V){if(he(P),V!==V+0)throw V;X(1,0)}}function oj(T){var E=ve();try{Fe(T)()}catch(P){if(he(E),P!==P+0)throw P;X(1,0)}}function aj(T,E,P,V,B,U,Q,z,ne,ce,de){var _e=ve();try{Fe(T)(E,P,V,B,U,Q,z,ne,ce,de)}catch(He){if(he(_e),He!==He+0)throw He;X(1,0)}}function lj(T,E,P,V,B){var U=ve();try{Fe(T)(E,P,V,B)}catch(Q){if(he(U),Q!==Q+0)throw Q;X(1,0)}}function cj(T,E,P,V,B){var U=ve();try{return Fe(T)(E,P,V,B)}catch(Q){if(he(U),Q!==Q+0)throw Q;X(1,0)}}function uj(T,E,P,V,B,U,Q){var z=ve();try{Fe(T)(E,P,V,B,U,Q)}catch(ne){if(he(z),ne!==ne+0)throw ne;X(1,0)}}function dj(T,E,P,V,B,U){var Q=ve();try{return Fe(T)(E,P,V,B,U)}catch(z){if(he(Q),z!==z+0)throw z;X(1,0)}}function hj(T,E,P,V,B,U){var Q=ve();try{Fe(T)(E,P,V,B,U)}catch(z){if(he(Q),z!==z+0)throw z;X(1,0)}}function fj(T,E,P,V,B,U,Q){var z=ve();try{return Fe(T)(E,P,V,B,U,Q)}catch(ne){if(he(z),ne!==ne+0)throw ne;X(1,0)}}function mj(T,E,P,V,B,U,Q,z){var ne=ve();try{Fe(T)(E,P,V,B,U,Q,z)}catch(ce){if(he(ne),ce!==ce+0)throw ce;X(1,0)}}function pj(T,E,P,V,B,U,Q,z){var ne=ve();try{return Fe(T)(E,P,V,B,U,Q,z)}catch(ce){if(he(ne),ce!==ce+0)throw ce;X(1,0)}}function gj(T){var E=ve();try{return Fe(T)()}catch(P){if(he(E),P!==P+0)throw P;X(1,0)}}function yj(T,E,P,V,B,U,Q,z,ne){var ce=ve();try{return Fe(T)(E,P,V,B,U,Q,z,ne)}catch(de){if(he(ce),de!==de+0)throw de;X(1,0)}}function vj(T,E,P,V,B,U,Q){var z=ve();try{return Fe(T)(E,P,V,B,U,Q)}catch(ne){if(he(z),ne!==ne+0)throw ne;X(1,0)}}function xj(T,E,P,V){var B=ve();try{return Fe(T)(E,P,V)}catch(U){if(he(B),U!==U+0)throw U;X(1,0)}}function wj(T,E,P,V){var B=ve();try{return Fe(T)(E,P,V)}catch(U){if(he(B),U!==U+0)throw U;X(1,0)}}function bj(T,E,P,V,B,U,Q,z){var ne=ve();try{Fe(T)(E,P,V,B,U,Q,z)}catch(ce){if(he(ne),ce!==ce+0)throw ce;X(1,0)}}function Ej(T,E,P,V,B,U){var Q=ve();try{return Fe(T)(E,P,V,B,U)}catch(z){if(he(Q),z!==z+0)throw z;X(1,0)}}function Cj(T,E,P,V,B,U,Q,z,ne,ce){var de=ve();try{return Fe(T)(E,P,V,B,U,Q,z,ne,ce)}catch(_e){if(he(de),_e!==_e+0)throw _e;X(1,0)}}function _j(T,E,P){var V=ve();try{return Fe(T)(E,P)}catch(B){if(he(V),B!==B+0)throw B;X(1,0)}}function Tj(T,E,P,V,B){var U=ve();try{return Fe(T)(E,P,V,B)}catch(Q){if(he(U),Q!==Q+0)throw Q;X(1,0)}}function Aj(T,E,P,V,B,U,Q,z,ne,ce){var de=ve();try{Fe(T)(E,P,V,B,U,Q,z,ne,ce)}catch(_e){if(he(de),_e!==_e+0)throw _e;X(1,0)}}function Sj(T,E,P,V,B,U,Q,z,ne){var ce=ve();try{Fe(T)(E,P,V,B,U,Q,z,ne)}catch(de){if(he(ce),de!==de+0)throw de;X(1,0)}}function Nj(T,E,P,V,B,U,Q){var z=ve();try{Fe(T)(E,P,V,B,U,Q)}catch(ne){if(he(z),ne!==ne+0)throw ne;X(1,0)}}function Ij(T,E,P,V){var B=ve();try{return Fe(T)(E,P,V)}catch(U){if(he(B),U!==U+0)throw U;X(1,0)}}function Rj(T,E,P,V,B,U,Q,z,ne,ce,de,_e){var He=ve();try{return Fe(T)(E,P,V,B,U,Q,z,ne,ce,de,_e)}catch(Xe){if(he(He),Xe!==Xe+0)throw Xe;X(1,0)}}function Pj(T,E,P,V,B,U,Q,z,ne,ce,de,_e,He,Xe,wt,zt){var Lt=ve();try{Fe(T)(E,P,V,B,U,Q,z,ne,ce,de,_e,He,Xe,wt,zt)}catch(Xt){if(he(Lt),Xt!==Xt+0)throw Xt;X(1,0)}}function kj(T,E,P,V){var B=ve();try{Yr(T,E,P,V)}catch(U){if(he(B),U!==U+0)throw U;X(1,0)}}function jj(T,E,P,V,B){var U=ve();try{return Ua(T,E,P,V,B)}catch(Q){if(he(U),Q!==Q+0)throw Q;X(1,0)}}function hg(){if(H>0){J=hg;return}if(O(),H>0){J=hg;return}function T(){var E;r.calledRun=!0,!b&&(k(),n(r),(E=r.onRuntimeInitialized)===null||E===void 0||E.call(r),G())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),T()},1)):T()}function Mj(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return Mj(),hg(),e=i,e};function jW(t){return Bk(Uk,t)}async function MW(t,e){return kW(Uk,t,e)}const qk=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],DW=[...qk,["unknown"]].map(t=>t[0]),wv=new Map(qk);function OW(t){for(const[e,r]of wv)if(t===r)return e;return"unknown"}function LW(t){if(Gk(t))return{width:t.naturalWidth,height:t.naturalHeight};if($k(t))return{width:t.width.baseVal.value,height:t.height.baseVal.value};if(zk(t))return{width:t.videoWidth,height:t.videoHeight};if(Qk(t))return{width:t.width,height:t.height};if(Hk(t))return{width:t.displayWidth,height:t.displayHeight};if(Wk(t))return{width:t.width,height:t.height};if(Yk(t))return{width:t.width,height:t.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Gk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLImageElement)}catch{return!1}}function $k(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.SVGImageElement)}catch{return!1}}function zk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLVideoElement)}catch{return!1}}function Wk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLCanvasElement)}catch{return!1}}function Qk(t){try{return t instanceof ImageBitmap||Object.prototype.toString.call(t)==="[object ImageBitmap]"}catch{return!1}}function Yk(t){try{return t instanceof OffscreenCanvas||Object.prototype.toString.call(t)==="[object OffscreenCanvas]"}catch{return!1}}function Hk(t){try{return t instanceof VideoFrame||Object.prototype.toString.call(t)==="[object VideoFrame]"}catch{return!1}}function FW(t){try{return t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"}catch{return!1}}function VW(t){try{return t instanceof ImageData||Object.prototype.toString.call(t)==="[object ImageData]"}catch{return!1}}function BW(t,e){try{const r=new OffscreenCanvas(t,e);if(r.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return r;throw void 0}catch{const r=document.createElement("canvas");return r.width=t,r.height=e,r}}async function Kk(t){if(Gk(t)&&!await $W(t))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if($k(t)&&!await zW(t))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Hk(t)&&WW(t))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(zk(t)&&(t.readyState===0||t.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Qk(t)&&YW(t))throw new DOMException("The image source is detached.","InvalidStateError");const{width:e,height:r}=LW(t);if(e===0||r===0)return null;const n=BW(e,r).getContext("2d");n.drawImage(t,0,0);try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function UW(t){let e;try{e=await createImageBitmap(t)}catch{try{if(globalThis.Image){e=new Image;let r="";try{r=URL.createObjectURL(t),e.src=r,await e.decode()}finally{URL.revokeObjectURL(r)}}else return t}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await Kk(e)}function qW(t){const{width:e,height:r}=t;if(e===0||r===0)return null;const n=t.getContext("2d");try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function GW(t){if(FW(t))return await UW(t);if(VW(t)){if(QW(t))throw new DOMException("The image data has been detached.","InvalidStateError");return t}return Wk(t)||Yk(t)?qW(t):await Kk(t)}async function $W(t){try{return await t.decode(),!0}catch{return!1}}async function zW(t){var e;try{return await((e=t.decode)==null?void 0:e.call(t)),!0}catch{return!1}}function WW(t){return t.format===null}function QW(t){return t.data.buffer.byteLength===0}function YW(t){return t.width===0&&t.height===0}function a_(t,e){return HW(t)?new DOMException(`${e}: ${t.message}`,t.name):KW(t)?new t.constructor(`${e}: ${t.message}`):new Error(`${e}: ${t}`)}function HW(t){return t instanceof DOMException||Object.prototype.toString.call(t)==="[object DOMException]"}function KW(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}var Df;class bv{constructor(e={}){mW(this,Df);var r;try{const n=(r=e==null?void 0:e.formats)==null?void 0:r.filter(s=>s!=="unknown");if((n==null?void 0:n.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const s of n??[])if(!wv.has(s))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${s}' is not a valid enum value of type BarcodeFormat.`);pW(this,Df,n??[]),jW({fireImmediately:!0}).catch(()=>{})}catch(n){throw a_(n,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return DW.filter(e=>e!=="unknown")}async detect(e){try{const r=await GW(e);if(r===null)return[];let n;const s={tryCode39ExtendedMode:!1,textMode:"Plain",formats:fW(this,Df).map(i=>wv.get(i))};try{n=await MW(r,s)}catch(i){throw console.error(i),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return n.map(i=>{const{topLeft:{x:o,y:l},topRight:{x:c,y:u},bottomLeft:{x:h,y:f},bottomRight:{x:m,y:v}}=i.position,x=Math.min(o,c,h,m),p=Math.min(l,u,f,v),w=Math.max(o,c,h,m),_=Math.max(l,u,f,v);return{boundingBox:new DOMRectReadOnly(x,p,w-x,_-p),rawValue:i.text,format:OW(i.format),cornerPoints:[{x:o,y:l},{x:c,y:u},{x:m,y:v},{x:h,y:f}]}})}catch(r){throw a_(r,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Df=new WeakMap;globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=bv);function JW(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return Y.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y.createElement("path",{d:"M3 3L6.00007 6.00007M21 21L19.8455 19.8221M9.74194 4.06811C9.83646 4.04279 9.93334 4.02428 10.0319 4.01299C10.1453 4 10.2683 4 10.5141 4H13.5327C13.7786 4 13.9015 4 14.015 4.01299C14.6068 4.08078 15.1375 4.40882 15.4628 4.90782C15.5252 5.00345 15.5802 5.11345 15.6901 5.33333C15.7451 5.44329 15.7726 5.49827 15.8037 5.54609C15.9664 5.79559 16.2318 5.95961 16.5277 5.9935C16.5844 6 16.6459 6 16.7688 6H17.8234C18.9435 6 19.5036 6 19.9314 6.21799C20.3077 6.40973 20.6137 6.71569 20.8055 7.09202C21.0234 7.51984 21.0234 8.0799 21.0234 9.2V15.3496M19.8455 19.8221C19.4278 20 18.8702 20 17.8234 20H6.22344C5.10333 20 4.54328 20 4.11546 19.782C3.73913 19.5903 3.43317 19.2843 3.24142 18.908C3.02344 18.4802 3.02344 17.9201 3.02344 16.8V9.2C3.02344 8.0799 3.02344 7.51984 3.24142 7.09202C3.43317 6.71569 3.73913 6.40973 4.11546 6.21799C4.51385 6.015 5.0269 6.00103 6.00007 6.00007M19.8455 19.8221L14.5619 14.5619M14.5619 14.5619C14.0349 15.4243 13.0847 16 12 16C10.3431 16 9 14.6569 9 13C9 11.9153 9.57566 10.9651 10.4381 10.4381M14.5619 14.5619L10.4381 10.4381M10.4381 10.4381L6.00007 6.00007"}))}function XW(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return Y.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y.createElement("path",{d:"M12 16C13.6569 16 15 14.6569 15 13C15 11.3431 13.6569 10 12 10C10.3431 10 9 11.3431 9 13C9 14.6569 10.3431 16 12 16Z"}),Y.createElement("path",{d:"M3 16.8V9.2C3 8.0799 3 7.51984 3.21799 7.09202C3.40973 6.71569 3.71569 6.40973 4.09202 6.21799C4.51984 6 5.0799 6 6.2 6H7.25464C7.37758 6 7.43905 6 7.49576 5.9935C7.79166 5.95961 8.05705 5.79559 8.21969 5.54609C8.25086 5.49827 8.27836 5.44328 8.33333 5.33333C8.44329 5.11342 8.49827 5.00346 8.56062 4.90782C8.8859 4.40882 9.41668 4.08078 10.0085 4.01299C10.1219 4 10.2448 4 10.4907 4H13.5093C13.7552 4 13.8781 4 13.9915 4.01299C14.5833 4.08078 15.1141 4.40882 15.4394 4.90782C15.5017 5.00345 15.5567 5.11345 15.6667 5.33333C15.7216 5.44329 15.7491 5.49827 15.7803 5.54609C15.943 5.79559 16.2083 5.95961 16.5042 5.9935C16.561 6 16.6224 6 16.7454 6H17.8C18.9201 6 19.4802 6 19.908 6.21799C20.2843 6.40973 20.5903 6.71569 20.782 7.09202C21 7.51984 21 8.0799 21 9.2V16.8C21 17.9201 21 18.4802 20.782 18.908C20.5903 19.2843 20.2843 19.5903 19.908 19.782C19.4802 20 18.9201 20 17.8 20H6.2C5.0799 20 4.51984 20 4.09202 19.782C3.71569 19.5903 3.40973 19.2843 3.21799 18.908C3 18.4802 3 17.9201 3 16.8Z"}))}function ZW(t){const{scanning:e,startScanning:r,stopScanning:n}=t,[s,i]=y.useState(!1);function o(){i(!0),e?n():r(),setTimeout(()=>i(!1),1e3)}return Y.createElement("div",{style:{bottom:85,right:8,position:"absolute",zIndex:2,cursor:s?"default":"pointer"}},e?Y.createElement(JW,{disabled:s,onClick:o}):Y.createElement(XW,{disabled:s,onClick:o}))}function eQ(t){const{onClick:e,className:r,style:n}=t;return Y.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},Y.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M13.225 9l5.025-7h-7.972l-3.3 11h5.359l-2.452 8.648.75.364L20.374 9zm.438 3H8.322l2.7-9H16.3l-5.025 7h7.101l-6.7 8.953z"}))}function tQ(t){const{onClick:e,className:r,style:n}=t;return Y.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},Y.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M14.516 15.158l.714.714-4.595 6.14-.75-.364L12.337 13H6.978L8.22 8.861l.803.803L8.322 12h3.036l1.793 1.792-1.475 5.16zm5.984 4.05L4.793 3.5l.707-.707 3.492 3.492L10.278 2h7.972l-5.025 7h7.149l-3.71 4.957 4.543 4.543zM12.707 10l3.243 3.243L18.376 10zM9.795 7.088l2.079 2.079L16.3 3h-5.278z"}))}function rQ(t){const{status:e,scanning:r,torchToggle:n}=t;function s(i){n(i)}return r&&n?Y.createElement("div",{style:{bottom:35,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},e?Y.createElement(tQ,{onClick:()=>s(!1)}):Y.createElement(eQ,{onClick:()=>s(!0)})):null}function nQ(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return Y.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},Y.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-7.46,0.5l-1.5,0c-0.645,0 -0.643,-1 -0,-1l1.5,0l-0,-1.5c-0,-0.645 1,-0.643 1,0l-0,1.5l1.5,0c0.645,0 0.643,1 -0,1l-1.5,0l-0,1.5c-0,0.645 -1,0.643 -1,0l-0,-1.5Z"}))}function sQ(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return Y.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},Y.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-4.96,-0.5c0.645,0 0.643,1 -0,1l-4,0c-0.645,0 -0.643,-1 -0,-1l4,0Z"}))}function iQ(t){const{scanning:e,capabilities:r,onZoom:n,value:s}=t;if(!e||!n)return null;const i=(r.max-r.min)/3;return Y.createElement(y.Fragment,null,Y.createElement("div",{style:{bottom:130,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},Y.createElement(sQ,{disabled:s<=r.min,onClick:function(){n(Math.max(s-i,r.min))}})),Y.createElement("div",{style:{bottom:180,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},Y.createElement(nQ,{disabled:s>=r.max,onClick:function(){n(Math.min(s+i,r.max))}})))}const gi={fullContainer:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},innerContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},borderBox:{position:"relative",width:"70%",aspectRatio:"1 / 1",border:"2px dashed rgba(239, 68, 68, 0.4)",borderRadius:"0.5rem"},cornerTopLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,left:0,borderBottomColor:"transparent",borderRightColor:"transparent",borderTopLeftRadius:"0.5rem"},cornerTopRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,right:0,borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopRightRadius:"0.5rem"},cornerBottomLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,left:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomLeftRadius:"0.5rem"},cornerBottomRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,right:0,borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomRightRadius:"0.5rem"}};function oQ(t){const{scanning:e,capabilities:r,onOff:n,torch:s,zoom:i,startScanning:o,stopScanning:l}=t;return Y.createElement("div",{style:gi.fullContainer},Y.createElement("div",{style:gi.innerContainer},Y.createElement("div",{style:gi.overlay},Y.createElement("div",{style:gi.borderBox},Y.createElement("div",{style:gi.cornerTopLeft}),Y.createElement("div",{style:gi.cornerTopRight}),Y.createElement("div",{style:gi.cornerBottomLeft}),Y.createElement("div",{style:gi.cornerBottomRight}))),n&&Y.createElement(ZW,{scanning:e,startScanning:o,stopScanning:l}),s&&r.torch&&Y.createElement(rQ,{scanning:e,status:s.status,torchToggle:s.toggle}),i&&r.zoom&&Y.createElement(iQ,{scanning:e,capabilities:r.zoom,value:i.value,onZoom:i.onChange})))}const aQ="data:audio/mp3;base64,//PkZAAhghE0AKToAJra/n0FQygAAAGIkYJgmCYXBMAAGCTJz3zhCEM//z//1hz//8MMMMN08ssV6e5DDWIQreAgCvFKy8bXgIKMkUDDBgzJwIBtkRMQAocxIFdxghQGKDoEziAzQxOBOdH92i/iGi+zDCAEIX46a73HrSybZw1x3JZjXp7dSNy/P68rjcbt7p7fakMP5LVMyzCaj1pjvejYYAIDgDGzECjEAk1Jl3559HIon8hzlfPVTCvGJZzfcKSxXfyMWM88//9VKSxXdtnb9vomOuuRyiWVYbf+X8zp6fKGHIdycuWMMMMMMKSnp+6wsYc/9f/7z7rPPWHN556p6fP8MMMP///PPP/7+GHK9PT6p7f/unldP2np7YeHjweiYA4GLNAgAiI7u57n5//oc5/yfk6znOcPhwOBwggHCMpA4HA4KEyHOc5znO+hPIc5//+fqJh8XQPh90JU5xQinOf//87/zvP+ggAYuhCKHxdA+Hxd0EA4KKHA4ciB3kOXfXB/gmf8p/B96lAMKAgAADU+BujARHgwdisgHMfAUHAiceBg4ASBgZBiBIBH4ZaHOJsLhf8R+HYEciIgYSwj/+Bi7EqBh+AcBn5P6Bh4TuBmrAMBiZH7gaLEWgew//PkZFMlyek60MpYAShzqqZhm6gCUWeEUWAewEWYGN4X4GDEPwGE8S4GDoOIGAYKgIQOkz//gGARAUB+CwGxTwMAACAEgyAwdAlAxKhzAxXiZ///AxcEwAwJjDAziCAAwQgdAwRgdAsJQDAmAcGzYDwAhZIAKAcIQB4GT9TQMJ9/4Gi1Fv/AcAYUqKBAwGgNAwVBAAwGhwAwdBlAxFg1AwlgzAwNBuAkJQDBgEEDEqGECgChFgBgL//CIswYYH//+HKCpk4K0C9AaKKCAOBeMcR4X9C44BwABCgGAsGYCgTwHAcAwXAiAwSAQV///CJP9lwMBQAwAAAWGo5lVLCcaeneVhJAVGai3//ioaUEf//gaTAYGCj8BnEwfrIqDcsIQb/vmhU/8fAs0G8YGGwKST8Igj4GCATipksVzY8p//90FWJwh45AkX//4fCF9wMEgkL3uQc+gbGJ8t4MBAMBP/hEXf9FRuWBcAfIFjYzQdoLCBwh7IWVlxaX/w8oMCP/+EQT5poGB1Ir90DhiV6af/jFYBpT2BgoQyyt2M0ToBdEaZyzt8nTo3xdNDCTSd//o6F06CjooxRr4jVF/0bOKD6OMUNDRxiMUVFR0FFQPhGXRjDpr4MAEA4wIQUhYOIw//PkZE4nrg08sOx4ACQ0CopD2aAAlwTTBxQeMcwd8w8gZTAgABXwGABOkzpI0wAQAExnWfP4x8ZjKunWdZ1o1Qe6lFGKCNULORQCELAAPnRUf/GIx/0FHGfo3SdZ0qP2cukXKLlRtBKFgAQwCkwJgFRYBEEATmDsLSY2QiQYCEnEra+UZo6F1aKMRr6GhoaP/+j//ov+i+hjLqBgMkYoqChoo1GqCjoY06TpRqjjLOYzRRmMuizmgdKhdF8kjTAAAPMCwGswzglgwAJfzqxmioKH/////////////+ijLOAwFmN0f/////////Q///8ZjP/9DGYyFwIDBeB3MA4AlBWidKM5spykAUAQOCakK+udGqN8VDYjTRuN//0bVX//6Kio4xQFv//nf//kKOoAEIB6SY6hcxenp85///4/DEPf/84Xvl4vF4dwtxfEJgCYQHMSgKCROp4+fn////L4tQf0unz89OecLxeL0ul09y6enzp4dIhKAQFA5hKfLu1nU7/Wr71rRKJUBQSUVt////l08GUPVWgAAYAeNKsxbQNAAhQx3/oKGMM6dZ1Yy6sajMbfKio7lNcv0sScZ47lNcw32ekVFMP9fp/f+mklI6at6u/dBMQuW6y+C5BcgwAA//PkZEomGg1HYGe0riWsCqbEwiY0BJFJMxrCcxGgQ2VK8xxCF1wsABgQBBgQBAYAFCkYCgALkK4fJ00E5ctJN1Uxy5au3XoGcM4dSN0EYZwzhW0WCh1PZwzhnFFQxtnbO2d0Kt6CdXbruggkTEX5Rs4TEQUVsdVXaCcuWXIBQUGmwmgoAGcJiM4dSioHQdBnEY+hjcbov//jcb/43G43G/jCRibfxugdBnDqULO2duvQumztncbo4xGKKNxugooxGIxQULoOgFgUMTA/jbrxiMDmETL+eLhcPThzOeeOZfL5fIcBYuXD/OHv8t//LJFxjxQYHHKDGFkZMtlmKM0RgQfbVtxFIHbQBDRuzRguEI1c9XZ/rWmrZfVU3Oc/9utNNygRQkCoHlAYstNN6DJ1IINpoINppv+WG/+g2mmnUmmmpBAoJIJhnwB5xkymn606Df/t000xhU03UXC5Ol8uFyXy+Xy/l8v5w4cLk4XAvwAYUvl/QL5fTdlKZkEEEEGumaKaX00zIOemf6CH///ywI3LKpiQ2Ef4xYWMSDyI0XwzikpL0ajVHZ3j9DGIjeuXcNfjn96/S/TUz/X/vX////5K/r+v7Jn+LlAoGZOIQIwMKBQM/yppKYURmhGZkR2b//PkZE0mHg1HEG8wyiD7mlwAyDU8nJHi5htakZmZGNiRcpkJhBmUmZYQcM1VDEEBggNDV/ASEZRYKFZIhkXKLlKmk7IVTKmZNJ5KhiqVUqpX+k7+qlVKyV/ZIqZDFDWTJlFyi5TJpKhiXKBQyZzIS5JhBoayV/AQWVpGWkcYTV5O/rIVSv8/0nkr+v6/vyR/X9f1/ZN8kf5/n99/n+f5/lTKmf9/mRP8yFUqpWSv4yJUqpX9kj/MmZNJ5K/z/P9J5P/v6yFUz/CEoywgUMqZkz/FssECIsVq0aPRrRRatFFFykQZJ2Ukl///5KjmksOaA7ALROJLDnEsLbq3GTMVrwb/0dGzmM0DlfBlHQOmrdR0MYi92TX6b/cmDHLclyUVYO/4O8sFTKFTKFf8yhUyhUyhXzKlDKlCsr/+ZUoVlSsr/+ZQqZUoZUoceMfcoZUoZUoVlfOPGcmDHKcpynKg9yXJcr3JclyXJclyYO+DXJclyfgxFZVb3KcqD/g2MxzsY72L9LubPR0dCyf5K5NNd+Tv9GXRdV0XJclyfcl/n+k8kf6SX/iVynvXf///4Mg/1OkxguYzmM5jMcLHMxwwGhgNCwXMLAcwMXTLi1MD7w7tmTdBvMmE0xQFzCwHMDAd//PkZGMpigkmAGOUvCfTgcgAuC+ITswMFzC4oMLhYMByn0xvU+p9Tr0xUxf/0xv///1PBYDhgNTFTFTGTGTGTGTGTGTGTGC4GTFMDAcLAdMVMVMULAcMBpgYDhcDGFwsYXFBikLGFwMGA4MBxgcDKfTEMUoAx2BisD+mKp5Tv1OkxkxkxkxkxkxkxkxlO0xVPJi/6nv////U7CwHTFTFTGTGTGTGU+p71PpjJipihYDpipi/6n1Ov//C4GC4GTGTGTGTFU8WBSZdLhWB//yKlotyLZFiLf8tyyRUipFSKkVGRBZQMiWC3yx//wxUGKsSvDFQGHUAL3QMsHDFIYpCYy2Bmagy6BjLgy6Bh3od58DCLAizBgRb+EQiyEQiwGBFuDAi3/////20QqSBJf/qcumv/////wMZdGXAYMu1gYy6MuBEZdBgy4BjLgy6BjLgy6BjLgy6BjLQy6DBlz2cJDLgRGXAMZdGXAYMuhMZcCIy6sJGaoGMuppwNRl3WBjLgy63wiEWAwIt/+EQi0IhFsDCLAi0GBFkGBFgMJCqaqYAgAYIhBBvwf7kwcqRq7V3IctacvlN6NxqgooxRRuNRiijEZjMGRuMvz9FGozQ+1X2qe1T1S//+VhaWAtKwtML//PkZEIkbgcaAHc1xCJrjeAAtfuUAtLAWf///mWePH95ZFgsyssvM88+jzO6K+z7OM48sH+WDiweZx5YOK+zxWLGJWsa6xadAv02fTZLSpsFpvLSga0tMgWgUgWmwgUmyWl8tMgWWmLSoFJsoFlpSwsmyBg4HhEdgwHAYPBwGDgeBg8HwMHg4DB4PBgOAwcOwMHLwDn5lAwcDgiDgYDwMHA/4MB3//+EQeDAdwiDwYLPhEWQYLODBYERZBgt8Ii34GLBaB5pfAZ0FvEAQ/UfwxULlx+IXx+8f5CELH8fxKhAIDFoHBEDRc3////gwHgaRXgMHYMB2EU/gwZ/gYbw3gY3QbgYNgbgYiAbgwN3/+EQbBEG4MBuDAbAwG4RBtAwbg2////+B9B6F//////////hEdD//////////8DRahEQGCInMNg3LBElgNjDciCwG/lgNiwGxWG///mG4bf/+WA3Kw3KyIMNw2Kw3MNg3MNg3MNiIMiQ2OK0xMiA3KyJLAEZgRARmBEDEYFwBBgEgEeomowol5YAJKwCDAIAJ8sAE+gGBgCJYAQUZ/13LubMu5dyiYOAhKwEFGf9AOoz/g4CFAIol/lgAjysAgsAElYBP////lgJksBM//lgRUxF//PkZGApggsIAHt2wiNLoggAqCz8RFSwIqYioipkjEjHCCSN/+WJg5iYOYmPK5krmTmZk5mZ8sTJYmf8yJiNiIisi/ywRmRkZkZGZGRmRERkREZERGRERkREZERGxEf///hETIMEyBiZEyBiZEzwiJgDEwU4DV2gQGFOBgmP8GAiAwRAiBgIgYCIGAi/4MBHAwRgjAwRgjwMEQIgMcgY8DBGCMDBGCMDEyJn///+BiYQIBlObj4eYLIwsjAOBGFkYBoEQ84eULIw88LIA88PKHnw8sPKFkeHlANAiAaFUDAiMYPIHmDzBZBhZB///8GBOA1sH/Awni7AwnhPCITwYE/CKzBgt8Ig8GA4Ig6EQdww4Yb+F1sIgtwYCwGAsAwWAsBgLAYCwDBYCwDBaHUDF+VEDKgC2BgtBaDAWgYLQW////gYLAWQMFgLAMFoLcGAt////4RMABmBSj4NgwMOGHBsHhdcLrwbB4XXC6+F14YcLrww4Ng8MOGHBsHww4Ng8AUC4AoMQMC4fgw3wutV4QIsAgFYIBWCCVgHeVgHeWABCwAIVgH+YBwB5aRAstKgV6Ba1oMg9avtUVN/qdLWciD/cqD3Jg6DFPuTB/////lYAn//mC8C+YLwL5gvgvGC//PkZFEpLgMKYXt2xB5LogAArbdc+C8VgvlYL/mC8C+YLwL5YBfMNgNkwXixDWoHPMc4VUxVA2TBeDZPYXzXl815fK14sLxYXvK1//NeXzXl815fMtdDLSw3UsMtLCstMtLDLSwsFhWWlgt//8sFhW6f/////+WF7zXl8sL5ry+Vrxry+WF/wMLwX4MC+EQv/AwvBfAxsjYAyqpKA0lpLAwvBfBgXv///4RA2DANAYGgNgYGgNgYGwN+EQvf/BgXwYF//8DC+F4Dd6NgGBf4AgFwbB0MMF1wuuDYMBsGwusDYOBsHA2Dvg2DQuuDYOhdcMMF14YYDGYDEGwfhhgbB0MN///4RBaEQWgZByoYRWYMFvwiDsGwaF1gbB34GDwdC64XW/w1aKxDVgatir4YcLrQbBwNg7////////////+ESfgZPyff/////////4MFmBvvMAERZ8CC5adNj02E2S0qbCBSBZaYtN///oFlpU2QMXIFAYuQK9AtAo7IxLTpsIFJs/5aZRxQawaxGfIg9CsrI+PUqkWdOHp7ODsOl6cOHZ4dsulfLI9/8BAAgMBACsBLACVgBjoAWAE5OTM6WDAR0zodMdHCsJLASWAjzCQgsBJhASWAjysI8wkJMICU//PkZFkeqgcaYDd1th6DogAAqCuIxQwtDA5MdMULgyY6YqnXqdep5TpMdMVRNRL/UT9AN6jCiSjKAZRNRhAMomgFQDfCIJwYCQiCAiCMGAkGAgDBJUA3eVAMEgj////8SrDFIYqh5g8kPMHkDzB5OFkYeYPJ+HlDzB5+AYVQDibCyIPLLEZIsjIliWS0WywWyyWuWCyWJaLZbLJYDHgLAItFvy3///4eYPKBlQTh5QYEODBb//hhoNg7/C62DYPFUKwKsVgNWBq8VkVcVkVUVYrH//hGff/8Iz8GT7//////wiX4ML3gwvgwvf4ML3gZeqoHVGyBl4vgZfL2F1oNg4Lrg2DcLrg2DQw0Lrhh8Lr4YcMNBsGhdcGBcMOGGAFGAGMQsF1guuGG4XXV/4uQXOLmF1kL/8lCXkuSk4O8/FzHzuP0hIucf/CIFAMCgFPgYFAKAwCgGBQCgGHYO4GBVM4GgQI4RCMEQKQOtQjUI1CNcI14MqDKwDIAGQDzh5wsjDyw8uHmDzYeUPN+DEYRRhFEIowYgDQgIhWDApgwKAwKQYFAYFQMKkYDOxHAzsRgMKBUGBX/h5v+Hm4ecPNh5A8wBwjhZHhZAHlDzBZAFkAeQPKHnCyILIAsih5QsgDz//PkZLQgIgsMAFp1xCGLogAAA2rkB5w8oeYLIQ8kPMHkCyGHnAMKoGmAgFkUPMHmDYAtfHPHNkr/JYl8c8lCWHPHMkqSo5onMAkBDnfJX//8IgDBgBhEdAaxSQMHUGAEIgAV4risCcipBOMVRVBO////hEvAxsAwvf////8MPDDww4XWC64XXDDww4YcMPC6wYb/wYGgiGwMplMDYhTCIaCIaBga/////8GA+EQdgYPB4MB4GDwdhEH8Ig8Ig8GA6EQcEQf8DBxlBjoAweDuFwgCQXiL//iLiKCKCL4XCiKRFwEgoRT4iqpMQU1FMy4xMDCqqqqqqqr////xuDd8fv/DVwrArEIg6EQdhEHAYPBwMB+ERYBi0WAwWAZ0FoGLYOB+JfgZ0FoGdBaDBYbn+WHm9xW7/Nzzc83PLDzc8reWlA7S0oHamx//6BflpU2C0qbBaf/8yk/ysn+VkMhTKQrKVk8yE8rIVkKyYsAn/5WC+YICmCApWCGTkxtKMcVWlgFMEBTBAX////0C0C0C/////////LTFpvTZLTlpv/0Ci0xaYtOgWmymyWkAxcWmTZTYTY8tMmygUWmLTIFpsFpv9NnywLmLCx2RgWmQKTZ98UjnzZ1/++D4M6/////3//PkZOgjIg8IAFcbxCaTogAAoCuIzfJ8vfJ8Wcs5fBnD5//++L5f////////6nCKv//+o0o0FUYwqDNGCwgUMKC0VVGkVv//4Yf8LrxVCriqDVoasDVuKsNWw1bisBqwVkVkVX//gy/4YYMMGGhhgwwNg4LrhdcLrAYWGAA0zBsH4Ng3C6/////4MAoGBQIDAKBgUCAwCgYEAsDAoEAwKBAYBYMAoGBQIBgUCYGBQIBgUCwiBAYBYMAoRAgRAoGBBMBooCAYFAkIgTEUxFv/EWxFxFhFoi0LhQuFiLCL/EWqTEFNRTMuMTAwqqqq//////8TWJriV/hERAwRgYiEYGIhGBmIRgYiEYMEQMEcDMSiA1GYwMR+UDMTkA7KIgMRGIGGM0SIrRGjRlhEV4jxov8rR/5YRFhEdQSViCsR5iRJWIKxPlgQYgSViSsR5WJMQJLC78IiKERF4REeERGEREERHwMRGOBmIRhERhERAwRAYiEQGIhGBmIRAajkgG5TEEREDBHwYIwYI4REXCIV/4MCmDArgwKAYUO/gYVCkGBUGBTgYUCsGBUIhUDCoUCIVBgVBgVBgUhEKQMKhUDCoUBgVAwoFAYFcGBQDI6oA5+qQiFAMjBUGBXCyEPIFkOH//PkZPMj6gr6AFdVwifkBdwAoC2Ilh5/8PPh5Qsih5IeUA0TAZrE8PP////wMRiIIqID8piAxEIwMxCMDEQjCIj//BiIDRo8Iogii/4MKwYVhEoESkDEiIGJEgYlfBgmDBIMEAYgSBiBIREAwSERH/8I7wPfuCO4I7v/8GBvAw3Bv/////gwN34RBuBg2BuBg2BuBg2BuEQbhEG+EQbAwG4MBtwiDaDAbhEGwMBuDAbAwG4GDYG8DBsDcDBuNwDRWDcIg2AwbA34RBv///CINvCINgMRIN/////wiG4DDeG+TEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq/zB4OLAP8rBxWDisHlYOKxb5WLTFgsMWiw18LDOnjPxZoxadDOgsLAtLAbKymVhsrDZWG/LAb8w2GywGysNlgNFgNGFwuBQuWnTZLToFFpisLJsFp0Cy0voFAQLFZkMCAQwIBCsC/5WBCwBCwBCwBCsCeVgUwIBCwBDEwEMCAQrAhgUClgCFgTlgCGJgJ5gQTGJwKWAKYFApgQTGBQL5kY0HMjQYnAhWJvKwIWAIVgQrApYAhWBPBgECIEBgE/8IgXhECQiBAMCkcDEwEwMCAQGAQIhoIhsGBsIhvgwN//PkZN4irgr2AAOVqiUThegAnCtMgwNwiG/8IhuDA1hENhENgYbKYHb2IBhoNhENAwN////8IhsDKZS////8IhuBhspgc0KQRDWEQ3///CNf4GAIMDAwgAwAAwhAwAwYAIgwiHBgAMAYGAAGHv///CIBqBqESDEIgRYGoGHBiDEIgGoGgMAYgxgwgxCIETwYFYMCoMCuDApBgU8DCoU//gY3G//wYFOBhUKBEKQYFfBgV8IhSEQoBkYK8IhT/wMKhXBgUCIU4RCoRCvgYVCsDCp3A1SqAYFAiFP////gY3G1TEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVgwCAwCBEC///////8IgUIgWEQIBgUCAwTQMCAQDAoEhECAYFIwGaRMBotWAasdwH/KqBmhFgaKI4GRgKVpjCBTCBPMJHNMFMIFKwnlgJ5hUxhUwGWlpAMuMuWLTFpvQKQLQKLTIFJsoFIFFZb/8woQwoT///MIF8rC+WAphAphAppgpYClgsmwBC6bHoFFpUCi0wGXFguWCwFLgUsgX6BZaVNj0Ci03//+EQKEQKEQLCIFAxMBcDAgFAwIBQYBODAKBgUCAYEAuDAKBgUCAYFAgRAngwCgwCwiBIRAmE//PkZN4iogj2AFdVxiUrhewAhOkwQIBgQ0gbOI4GRhOBiYCgYEAv////CIFAyMBQYBf///CIF8IgUDAgFBgEAwIRwMCCcDEwFAwIBf///CIEQGMDGEXCKBpCIDCEQDCAsYInDFQMMAuYSoTQMVfBlf//+DKfBgAiGDAQMIMIgCIQYADAEGAgwP////8ItgNu2/8DAAAiABgHhECBgQGEQARA8GAeEQIMABECEQIMAwYBBgCDAARA4GAAgYACDAARAwiAgwDhED4RABEBCIGBgDoH2dgZwCBgAP//BhX/+DCiTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqF1ww////////hdeGGDDBhwjeF102E2fTYAowMLjE0zTDfyyMYjEDJTwMLSwFi0/gQLoFIFpsegWmyBQsWlQL9ApNgtIWn8tMgX6BaBX+WmQL9Nn02f9NktIgUgWmwWl9Avy06bCBSbJaUtImyWkQKLTIFgYWoFFpAKFwMLzZgwAwvLTIFlpU2fQLQK///4Yf4YaF1sLrg2DAuuDYNDDQw4NgwLrhh4XXC64Ng3C60MNwbB4XWC64YcMODYPCJYDlMQBlwRLg2DOF1v/////PkZM0eKgz0AE+UuCnLFfAAk3Fsg2DAYX/ww//4YaGGDDhdbDDACFwMuXA2DADlygusDYOBsGhhv//wNU/CKQusF1oXX+F1wuuGGC6wXWDDBdbC6wXXhHv//4AHIFgC0BZAA4Ba4FkADwFsC3AtQAOcC0BYAtgAcAA9+BYAsgW4FvgWOABwC1oq+it4RT0VVG0VFGkVywo1/RWU4U59TlFb1GvRX////QK9Nj/9AtNn02fTY9NhNlAr/QK//TYTZLSJsIFemx///oF/5aZNj02U2C0yBaBfoFAS6bKBfoFVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQiA8GAO/4RAf//////wYA4GAO+EQHAwB4GDoB4GA4HQRB0BhlDIBpEAcBgPDIBgPAeDAHIFAYuLTpspsJsFpi0haRApAtAstIYKClgF/ysF/ysE/ysF//LAJ6plTlYC1ZUypmqtWVK1VqyplSFgBaqqcwAAVIqcrEBAAKmMBERCQhwD5iICIQEyABMAABBVGXF4gIA4DLAAWAEQgLVSsBaq1ZUv+YKClgELAJ////5YBP//LAL5WC+Vgn+WAX/LT+gW//PkZMIhLgrsAFt1yiD7FiB6A9qwmwViybCbCbCBSBabCBSBabPpsegWmwWn9ApApApNgCGBmEwWlLSpsf////hEHgYOB3////4GDkiBxMHhEdgYOB4GDwcBg4HW23gooFYHd/+BnAz8O8Vv//FaBm4rBWh38es2zbAtD1m2PVBqBrBqBrAF7AF3/5el84MkuHTgyy+dL0dRnEajMIyOn8RsZ5HGG/kbIpHIkYUiD0y2WctlZaWSwrKx6FZbxnL54ul04eLhw9Ol84dl86cOHT3Ipb5Z8qKpVx6/j0EkLctVTEFNRTMuMTAwgWQLQAHgLf/////4Fn+EQESEcIgInCIRW9TkrCzH0YIjjWtI+YeCD0woLCBQwsKRWUaRVCBZFZRtRtFRTlTlThRtAr0C0C//02E2fTZQK/0Ck2f9TlFRTlTlFT/9TlFVFRFb/9ThThynIQbWkAREue5S11rKdlkDEVABh61ExYPU+tOD4MQgcn4iwigivxFRFoXDcRQLhoiwioXCeAkFBcNiL8RURQBIKEVEWiLBcKIqIpEXC4QReIoIpCIKAQMxFAFAsIuIr/4YYLr//ww4XWBgwC64XX/hhgw3hhwuv8MNhhguvhdcAUYgaYTAAoWDDg2DQbBg//PkZPYe6gzuADd1uDKsBhBAe89cYYdGjtDT2hDmlD2leaOv9oX0OX/0NNLplNf8ewakNWGrTfTRpphNJtfaeh7T1/tStdtTpqN532lpX/1/kmQ5eaf2hoaV9paGleJAvd0rer2pWu1ar2vk56vVrV5Hj1Nop+/lfv5Zpkem5kX/2vtata2rq783nbvtbW6VjW6a2rq13+rO6VysV58K7tbp0ru6Vrtqa1a67tr6sau1ulYrnfa2v927Vrt21NSuN5X927/D4diAQANh4gEIfxB+IQG/D/4gDw/iGIRD+HRATEFNRTMuMTAwqqqqqqqqqqqqqqqqqiIEK/ititFX///8VcVuK38VsVhXBOQTpq/qm8QCAcBmIxgdfFZCHECpxFBFAuFEUC4cLhsRTEVEUDVoDQD+KrFYirFX+KwKoVgVUVUVeKwGrhWRWBViqFYDV4rMViKyGroauBg/A0YThVgNAEVQqw1fisis4quKxxWYrAatxWIqoqg1dFYxVxWIrAavAaAArIrAqoqhWYrIqvxWMVYrARCADhcKoVYavDVgqhV4qorIrHFWKuKxFViscVUVYasAaAfFY/4YcMNhdfwuuGGC64YfDDA2DwusANygbBwAxhAECwNg8MOF1hD4//PkZOkc4g7yBjd1sDNkDhgqYwtcYoUyiQ0NCkxQ0NCQkSIbGKIyRGEo5mUaNEhGKEHMmaGhI0UokORvMmZmZSZSiMZQkRnKKZkzRoSNCQpQ0NEZoaNFJkhh3KOUJEhIcoSJCQkIzlDlEjMDMyMpQ0JCQzNCRGaNCRISEZoZihoaIwlEHKNGiMzFEjRmSIwlHMyZmcyiGyMxRyhIkIxRSZokSEYGBkiRojAPESNGjQxvKHMmMoSKTJCQkIwlFKLDYWGhoZhYWAAUGBsAwsMDYUAcK4XDPhQVwwLAH/DfgHC6TEFNRaqqBgjwYI//wYI/8GCL///+DBFhERgwRcIiPAzGYgMRKIDcskBgjAxEIwYI4GiRwNEjhFH4MRwYjA0aOEUf8Io/BiLgxGEUYRRQij/BiKDEYMR+DBGBiMRQiIgYIwiIwYIgiIgMRGIDUSjhEReEREBiIRAwR/wYI/8IiP4MEcGCIIiOERH8GCIIiMIiIIiODBHBgjBgjwiIoREcIiOEREDBFCKiAxHJcIiMGCMGCLwYI8IiPhERgwRAwRAYjEUIiIGCP/AxGIgiIsGCL//4REYMEXhERBERhExhExAzyAZiEWDBGERGeKsVsVRVFcVwTnFcVxVgnYqipFUV//PkZPkcfgzeAFaVxDgUBgAgatvIYrgnYqgnQJyK4riqK4rwTsVor4rQAjABAgnQritFSKoqQTsE5C1haxfF7F4XQtULSFqC1i4LwWkXIWkXRdF+LwqAnME4iqCdwToVuK+HAERWAkAlgJB0OB3Doc8OYc8VCsVgIB3DuHAERUAkAkHMOBwOAIisO4dwEAEAEg6AkAl4CeHA4AkKhXioBIOiv8OB3F+LgWkXxeF8XouxcF0XBeF8XBdF8XhdAdouC8AEsXYWsXOKsVBU/FaKmK/FTxXFbFUVPiv/8VfxXitVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVAXX/8MN/wwwYf//DDBh4Yf/+DYODDfCIFAwKBQiaANFgUDAgFAwIBcADwFuBY/At8C1wLfgAdAtwLGBawLcC3AsgWeBYwLX4XW8LrBhgiFgMlhYLrhh4XWhdb8MOGGhdcMP4YaF1gw8LrwuvhhoYYLrYXWDDBdcGwfC60MN/ww8GwZ4XXC64GZQsF1wbBnDD4XXg2DcLrBdaDYPhhgusF1uGGC64YfhhoNg0LrQwwYcMNC62F1/g2DYXW4XXC6+GH8DTIW4YeB/wR/wjwR+DP/y06bJaRAtAtAtAs//PkZNwY2grqBFW1xDhTRegABLBstL6BRaVAstN5aYtN/psIFf5aQtIgWgUWk8tImyWkQL9Avy0qbKbKbJaf02f/0CkCy05adAsC3K7+mx5aVAv0C/TZ8tOmymwB2pspsFpPLSlpy0qbCBSBXlpk2E2E2C0paUtP6Bfpslp0CkCy0ibJaZAosWQLLTJsemwgUmz6BZaYtOgUWmLTpsJsoFJslpPLT+mwmz//6Bfpsf6BSBSbCBXoFeWk9NhNhAr0Cy0/+WnTZ8tJ/oFf6bP+myWn//8tMmz/lpf//////8sPTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBgJwiCYMBP//gwE//////wiCAMEgkIggIqIDKpUCIIgwE8IzA4j+EYhGAZMIyDJA5gGRhGcIyDIhEQiIGAgwIRDwiAGAAwYMHBghGAZMGRCMhGYRgGRA5gIyDIwZPBk/wZIRmEY/gyOBxIMgIzCMgcTgwRBgjwYJBgngwTwYJhEQBiBGERMIrwOouAxAgGCQYIhERhEQDBGDBAREgwTCIgGCQYJgwSDBHwiI4MEAwSBiRHCIkGCYGJEQiI/Bgn4REYREeBiBIH6XhERhETwogoy04mpZibFmJuWYmx8n//PkZN4ZrgrkAFZUyDcjofgAA9qc0HafZ8HwNrjaG3xtjaDtJwTo+D55Ow7fxNRNSyLPlqJsAr/lmA/FmWYm5acTQVgTkVQTnBOQTgVxVBOBVFWK4J3FUE7gBABOwToVQTsVhUFcVRXBOhUBORWiuKkVYrCqK+KoqgnQrAnEV+K8E7FQE5xWBOQToVQTsVRW8V4qRUFYVgTsVhXioKgrCqKwqAnYqCtBOhUioK+CcisK8VRUFSKnirFQVBVFcE6FcVoJwKoqCrFXFUE7gnAqiuCcQTsE7xU8VP8VYrgnYrCuTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqn3/l/J/8vHL5f/BhwCETgGpIDOATgEIOFoDcHzgEIDgC+pG7eve1S/6tat7rXupDXSStWoIpGS4TSMQNIySMwpIyAaRkkZ8GJGdBtbwYkZ63tCKRkoIpGWDEjLCKRmEkjOvsEUjJOsIpGa6bOrgxIzsEkjIGJGYUkZVKCKRmqoDkgEjMJJGSYMSMAikZJ3qhp0dq9ru3X1I36FujPbXuxwKbr//waABfg0AC6DUDUDXBqBoAmQawJiGrhqDUGoN//PkZL8USgKcAAblrroTgfQAbhtQAag1QawaYNIAuQa12Lv9si7F2NnXa2Vsi7i/DZl2tlL9l+vL8tlUTUTUTUYQDIBlGUAyifqJKJqJ+p5Mf/U7TETEU7CxkxVO1PKdqeU8u4vq2ddnrsbM2Zs/tl9s67V2NlbIu5sgaA1Q14ExAmAaA0BrDVDXhpgTPDQGuBMA0gTKGgCYgTHDQGrDUGgNcNQaw1hoAmcNIaRIAtALVEgC1gteI8FpBaBIAtcRwkAWgFpBaILVBaIkAWgRwjhIiPEeDXwa/4NUGr+DRwaKBgX/8IhP//wiF8GBMGBP/wYEhEKEQmEQuDAoGFTAwLgwLhG/4MvCM8GSDJCNwZQOXg2DwbB8MPDDhhuGGBsHhh8Lrf4MCQYFCIUGJgiE8GBQMIFhELDDhdaGHhdYGwaGGDDhhuDYMBsHg2D8MMGHBsH8GwYDYMhEKEQgMCeDAsIhAiFBgQIhAYFhEKDAkGBMIhYGEC4GFCBELgYUKDAuEQsGBQMKEwiEBgUGBcIhQYFwYFAwgWDAoRC8GBAYE4RCgwKEQvhEJgYUIBhQkIhAiECIUGBIMC4RCgwJCIUGBAiFgaYLwiEA5cGXCNhGBGwZAw4Ng0MPBkqNqcoqorlh//PkZP8cygrkAFI0wjo7lfAAjhq4SnPor//psoFemygWmwWm/0C0Ci05adApNn/TZQLU5RU9FRFVFdTn1OFG1Gywv/UbUa9Ff0VoFgCwBbAtQLUCzAtgAchHAN8ImAbgBvwDd4RwjQDeAN8I0ImEQEQAbwRgiQjBHhHAN0A3vgG6Ab/CIhEgG5AN6EQESAbmEYI4RABvYRoRABuYRgDehEQiAiIRABvcA3QiQDfwjwDfCICPCJCJCJ4RwiYRwjBEwDehEYRgDfCNCOEQEQEcI+BagAd4FrAscCxAswLfwLAFgC1wLNVMQU1FMy4xMDBVVVVVVVVVBlBkwO3wZAZMIz//////+DJwO0IwI0DsA7cGUI34Rn4RgMuEZgywZQjAZP/hGAcmDKEYDIB28GQGQGXhGgcgRoMgRoHYBywZAZYMmBygyQYFCIUDChQYE4MCgaYJ/gwKEQsGBAiEBgXAwgQLrhdcGwcGHBsGA2Dgw4YYGwZC6/hdYMMF14YcLrYYcMPDDhdYGweF1oYb4MCwYEwYEgwJBgTCIQGBIRC/BgQDCBcIhAMKFhEKDAsGBQYFAwgTgwKDAoMCQiEgwIBhAnCIUGBQiFwiEBicIhAiFhEIgIoBooGieDPA+4GeDPCP//PkZOobXgrkAEY0jjazieQgBKKIBGgyBGhGhGgyAdoMmEaDIB2gyhGwZYMsI0GSDIEaDKB2QOWEaDKB2hGgygcoHYBygdkDtgygcngyAyhG4MgMgRgRmDJCNBkA7QjAZIRoRoMuByhGgyAyAyhGwZYHKByAcgMgRoHIEbCNCNA7fCNA7AZAO0GSEYEaDLA7cDthGgyAyAyQjAOwGUIyDKEYEaEYEYEaEbA5AZQZAZAZIMgRkGXBlBkCMgyAyQZYMngcmEb8GUGQIyDIBywZAZOEZhGBGwO2EbwjcI3hGYMqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqquDqz8GMDQIvBj///+DGDEGAMAifBj8IuEThFCIEQGPCLwiQYBFCKESDCETBhhGAZGEZ4MjgcSEY4GoRQigxCIEQGPCKBiBrgxwiBEwMIRAY4MQNMIkImDEGIRYMIRYRAYhFBjwYwNQYgwBgBh4GAMQiwYgxA0gahFBgBjgYBFhFhFCKEWBgEWEUGEIgMQYQMYRAMQigxhFBh4GkIgRIRYRAY4RIMQYgYhFA18IoMQYQihFhEgwhFCIDEGIRQieBiEUIoRQYhEwYDAFwGrBog0waAaQawacGsGiDQp9MZMVT3piJjJjK//PkZOYZBgjoaUJQ0DprofQgbhq0dep71PqeU69TpMdMVT6n1OlPKdJjpiKdFZkxlPKdJiJj+mKp/0xFPBoAmYaw0BpwJhDSBMQ1BqAmIEzDSGgNXDRDRhp+GsNMNAEyAmYagJkBMA1BpDXAmECZhoDXhqAmYawJjgTICZBrDSGsNAExDVDQGqGgNHDWBMIaQ0BrAmcCYgTHAmIEzDWGgNYaOBMw0BqDSBMYaA04aA1hqwJhw0ATKGqBM8NYEz4aQJkGoNMNIag1+GsCY+BMQJlDVw0cCYfDXw1ho4aQ0gTCTEFNRTMuMTAwqqoD37wjuhHf/////hGf////hHf/gycEZwRn4MnYMncIzsGTwOdOA507A507hGeEZ8GTuDJ4Rn4HPn4Mn4RnhGcDJwM3YM3gzdBm6DNwR3QjvA927Bm//Bm7Bm/Bm8GbgZvBm4GboR3gzeEd+DN8GbvBm6EZ+Bzp4Mn4HOnBGfA588IzsDnTgZPCM8Iz+EZ/CM4DnTgOdPBk8Iz4RJwGTidBi7AycTgiT4RJ8GE6ESdhEngZPJwGTieDCcESfwYToMJ3AycTwiTsDJ5OhEnwibwYb+ETdwibwibvCJuwYb/4RN/Btf/jYGyNv8bHLUtSzE0/LQBW//PkZPQcHgjQAFKVrjfDmgAge1eMLITcshNy1LX8si0LUTQtCyLQTUteWQmvLItSz4mgmnTJops0umEymDSPsnR9HwfB8k7Pvn0fAvwtcLXF/F+L4vQtQWuFoC0BaReF7AeBfwtcXBdF4XheFwXAtAui9C1haRdi6LwvirgnUE6FcVBVisKgrCvioK+KoqiqAhh3AQFXhwVYrFYCWHMOioVAI4dFWHPDgCAdDgdDmHcBIBEO+HRWAiKsBMO4dFQCAdATw6HBWHBWAgHBUHMOf/gICsOCoV4qw7+KxWHA6KhVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVC11Fz1+NP+/Xkqpr9OfuhQ6lZNWf+XsZc/si+KNoOj/Ntai9j7IISgZAklTqQhjToNTeQoreRdaSDODWvYAVFaWWkQmVuZPP8bRUzq896vc+XS6mm5gnnW7JLnV4z9N5XnW4k86x+uyHyxnWkmdborzraff2SvOtvljOtjd/5XRW8MivOsry/K3gUzrFPS1eFTOttTsul1+lLGdbV3c53h51mdbK7xPOr1SpnWlM63kedZnV4XPK86onnW7myrnWTmRTOqascoabXd/L+yuzS95dv1efjhl92ntYyTuIb6wuWRZFmWRa//PkZOcb/gqMACDf1LTLofggA9qc/gKRZiblqWYm3E24moSQnR9BJj6JwfBaFqWZZFoWvLUshNPxNuWn6bTZHgozRTSaNAY5oGjFQVgTkE6FUVorioK8VBXBO8VRUioAhxVioK4qAnIrYrCqKsVRVBORXBORVFcVcVwTgVBUBORUisK4rCoKwrxXFYE4FYVATjFcVhX4rcVBVFQV4rxVFSKwqCpFcV+K8VhXFYV4qivFUE4FaCdivBORUBOfBOgToE6FUVYqisKgqCtxWFbFQVxXisKgqRU4qioKuKwqCvxVBkH/4Mgf4Rg4RgfgxZBizhFYEVuDFvhFbBi3CKyEVsGLf/4MgAxaDFoGsWYMWgaxYBrFngxaDFnCKwIrAYswNas+DFgRWYGtWYMWBFZgxbgaxbgxZCKwGLIRWgxZCK2EVmDFmDFgMW4GtW8IrAYtBi3Bi0GLAYsCK0IrQit4MWeEVgRW+DFsI9cDW9AYtgxZhFaBrVgMWgxaDFvCKwIrIGtWhFaBrFuEVvBi3hFZA1i0IrYMWYMWAxaEVkGLAisCKzBizCK0DWrIRg+EYIRgQjABkHwODABkDhGDwODBgyAEYIRoRvww4YcKILYKILfhRg5htjY4OQbQ2hNAH8su//PkZP8cRgjWAFAUYjwDofQAi9pcJry1E1LUsuWvE2E0LQTcB+E2LMTctQFEEcWnFYVwTkAI4rRWFYE6BOhWwToBBAQgnIrisETANwIiAb/COEQEbgG+EcA38A3wjhGCMEeEaEeKoJwK4J2KoARBVBOIJ1FWKoJ0CcCuCdRWFcV4rioK4rAnYJ2K0V8VYr8E4xWFUVBVFQE6FXBORWFSKorxVFcVwToE5wTvBOoqwToVIJziuKwJxAQgnUVBUgnAqQCaCdxWirFaKwrRWFcE7FfFeK4rgnIrAnYrCoKoqgnAqCrip4qgnCr/////8Iu8BjvP4Ry5/8Izggc4Zw4RnD/hGcP8GThBk4eDJwgycIMnDwjOD4MnBA3eu9hF3kGO8gx3vBjvAN3jvMGO8CLvAY72DHeAbvXe+DHehF3kGO8gbvHeBF3oG713gG713vgx3oMd5BjvAi7wGO9A3eu8BjvMDd470Iu9wN3jvQY7wGO9wN3jvIRd4Bu9d6Bu9d6DHeAbvHewi7yEXecGO9BjvQN3rvIG7zykGO9A3eO9CLvYMd6EXegx3gG7x3kDd470Dd472DHewY7yDHeAKomwmhZFkAof8tCy4m5aCbcTUswFYsy0/LQTX9NBqBgJgYaY//PkZPcaTdCuAFgWlkI0DfQAe9r8Jxz6CShr8++JsArgjxNBNC0LQsyyLMsgRxallyyLIsi0LUTUtS0AVwFPia8si0LMTXiacsxNizLMTYTcsi1LMsy0E2LUsuJqJvxNyy/E1LMteWgm4mpZlkJuWRZFmWnLQTfgncVATkVcVQTsVIqQToVxWFeK4rwTmATCsCcAnQJyKoriqKwrxWiqKoqwToVRWBORWBOBVFSKgq4qAnAqAnArRVgnIJ3FYVQAgCriqK4qYqivBOsVoJwKgJ3FYVBWFfBOIqCoCcivipxUFSCd4qRV4rCvFaCc/BOhW8VxWFUVhX4r1eX/+DHgaYMOEX/CJgwwYQY8GODH/wYf4RAiQiAxCKBj4GAMYRQiwYcGEGMIoMfhECIBgEXAwCJhEA1BjhF+BhCIDEGARYGoRAYgxCLwYeESEUGMDEIoGAMAiAwBiBrCJ8GMGGEWEUGIRYMAYAxCKBiBgBqDDA1wiBEBiDAIsGIMANANMIoMAYhEBh4GMGMGARfAxBj8GAMANYRAYBFAwCIBhgYhEwNQMYGIRAMAiwNYRQi4RQYwYgahEBiBqBgESEUIqa6Z6bTBpGkmUwmkwaZpJlNCkifmkaaaBymgm0wmRPxSDTTa//PkZOYYTgboZUAQIkCEFgAAe898YTZpJtMJhNilphNdMJhMGgmemDSNJNmkaX6aNJN9MJhMc0E2mzSNJMpg0umU2mDS5oJlNJtNJnpg0DSTBoml0wmzTE8TRpGgm00mkzzRNNMJg0jQTSb/NFNdNGl02KTzRTfTPTSbTKZNLphNJpNmgmUymkwaaaTKZ/TSYTBoJr/ifptMpr9MJlNptMpg0kymumEwmf+mEwmOmkymTT5ppv80eaHTCYTHTSaNBNJtN80/0yaBoJo0k2aPTPNA0OaSaTJoplMJv9MgBAB4MBUGwbwVwUBkFAYDAU4NBoMBqhAELk//h/y1/vz6/6zMnEglwqnIsVSHBzAMMIqXiLgxS8ucoLCKl7VwipeupwYpeAxS8Z22hSl4U+qE1L2goKUva1GUJqXqwkpeAxS81IQpS8smBqXql6E1LyEVLxdEJqXoSUvAmpeJhFS8rpH3CKl6EVLxPWFKXgDUvVL1LCal4kuDFL2EVLxFlPClLyEVL2FKXhdwYpeswGpeqXkGKXqLAxS8wYpeqWk8KUvATUvQYpehJS9Bil6yoUpegipeZT2x1vN5NR2X3KrRuXjFmaS0AUCyE1BHflmWZacTYsvy05ZgAIs+WQCqJoWZ//PkZOwZ+gaYBgbm6EQMAfQAe9r8ZCbiaFkWv5ZibialoArlryyDtCSnyfR8hrE7PpNmiaIxDTGKafTJalqJoJoWQm4mnLUtSzE1LUsxNyy4mpZlqJpy14mgD8WpagKvLIEcJuWnLItBNhNhNxNgH8tSyLMTflmA/iaCaFqJqWf4mxZFmCdCvFWKwqivgnQJzFfwToAIwqgnOKgqCoK4J2KwqisKwJwKwqCqKgJwK4rYqirgnIJ2K8VhVwTmKorYrioK4JwKwrRWFQE5FUE6BOwTgV4qYqiuCdAnYqAnMVBVFUVATkVBVirioKoqCviuK8VwTjxWFfivFUVxXBOcVuKvFaKoqiuCdeEW3Bjb/gxvhFvCLYGN8GNwi3CLf8DbtuEW//CM7+DG+EW+DG8DbNgi3CLfA2zYItwY3gbZuDG8GT/Bk+DJ+DJ/hGdCM+EZwMnQZP8GT8GToRngc6dBk4IzwZOBk8GTvhGdBk+DG8Dbt8DbtgY2CLbBjYGNwi2A2zYDbN4RbhFtA2zcDbNwNu3CLaEW4RbeEW2DG8DbNwY3BjYDbNgY3A2zYItwi3CLbgbdvA27YGN/CLaDG4RbgxsDG4Rb8ItsI7oR3cGb00m0wmTT6aTZoJgUpMc0kwaa//PkZNcYqeLUAAAUHjw8DgQAe88cYTXTXNBpXiQdfLVpLJoaCSJs0TQNAbRpJpDWleaGlDmlfQ9fQ7tBZoa0IeOw3Ccq44TcHgrufDVzQNA0Om0wmDTNE0EymkymumU2mU0aSY6ZE8NFMmiaaYNDptMGn+aJpdNptNps0OmU0J50wNtMGmmEz/zQTJpppNplMJlM9M8FAYCoKAAApgqDIMACwAQbBsAMGQAQaCkGg0GgyCkGeCgNABwAAUgrwA+CoAQNAeHCAOAeAyIQHBwgDg4QYDAGgMEEOEAeA0Q4DxAHh0PEMGYMBsFQYDPgoDMGQV4NBqryAZfhGfwjMDl4Rv/wjcGT/4R/CPBH//hH4H3gzv4M7A+/gzoR4GdBnAf+DPBnwj4M7BnwivA1QIpCKcIpgaqDFgaqBogMWBqgGqgxQinA0XBi8IqEUCKBFcD7/CPwj0I+DPA/8GfBnQZ8I+EeCPwZ4R6EfhGcI0GSDIDJCNCMBkgdsIwGQDkBk4HIEZgy4RoHZwZQjcDtCMgcoRgRoRgHKDJBl4RgHIDKDIEYEaEZgyYMoRsIwGQGQIwGUGUI3A5AZMI2EaDLBlwjQZQjAjAZQoqIqqN+pypx/qNIqoqqNKNKcqchwGrCAPqN//PkZOsaCgjiBUZRnkhEBfAgw9tw+iu1RUqp2qNUNalOVG1GkV/U58sLU48sLLCiwFU4hAYA+qQQgasVhVIYQNWKwmAKpvasNoHIDm4OQHIDlGwNgbH4D+JuWQm4mhZFoJsWgm4I4TcbA2xtA5ODnGyNoHJ+NgHKDl/LMBXLUtS04mvLQteAqCaCbFoWQmha8bQ2Acg2ht8bI2RsjaGyNrjYGwNvjbByja/GxFYE4ipBOIrwTiK4J2KuK8BAK4rAnAJwKkE4FYE7FUVgEIqgIRVBO4qRXFQVBVBOMVwCcE5itBOoqAnQqCpBOIrxVBOoJ0KwJxgnQrCuKsVBXioCcCqCdAnYJyKsVYqipBOgjwiAj/8InhH4RMIkIioAC4RiJCMRP////CNk//Blkv4M6F8I9C/8GWT/8I2SwjZOEbJQZZIGWShGyYMsnwj0P///CPQ/hGyQRsn8I2SCNkgOyVkoMsnhGyQMslCNkoMsl4MsnhGyXCNk4MsmEbJ/wZZP8I2SA7JWTgyyQMiKDIieEYiAcRIihGIkIxFwZEUIxEA4iREgcRYihGIoHESIkDiJEUIxFwjEQIxEwZEWDIihGIoRiKEYiHcYJRIr9kzDmO5cIaApXE/NA0TTTKZGym/0//PkZMQWjdCsAwAWCsQ8Cfwoe89cyaXTKZACgKxsmybQFQCyPQPUbRtA9x6QAoegHKmRtClpk0RSkwaCYE/GyaaZ6ZFJTaaTCbTabTBomgmk2mxS0x0waSaTI2gcgOcT0T5MiedM9M9NCfCeGgNhMJlNJoT1MdNJhMjaNPptNGkmhtpnmgmv+KQmRSE0aaY6ZTKZTRoJg0U0aBopg0emU1/xPzTTaa5o80DRTZoJs0TRNEUhMikJs0P0x0wmkwmUymkwaKb5pppNJg0OaInhpGgmeaSbTBp9N/ptNJo0DTNAbOCkGAwGABgA4NgwAAAMAPBgAQKAyDAZgoCkFINAABWAEDAUBTAABgMBTgqACDcGAAQYDAUqLUlVt///+Bj4MIRcGH/hE//hEwY/wi8GPBj8GH8IgRcIv4RYMQi+DAIsIsIn8GHCLCJCJ/BhBgBpgwwifhFhEhF/gwCIDAGIMIMAMQYBFhFBgDH4GAMQiQNAYAwwYBECIAMIAMAAiHBgAMIAiAIg4MABgABhADAhEAGAARCBhCEQhEIMABh6EQAwIMABgCEQwMAQYD4MDCIcGACIQiHwYGDAhEOEQ4MAENB8hJD7PsnXJ0fZ98+D6LItQR3PgnZHmgPYYRopk0xj//PkZMkU/gLsKkITrkL0CfzIetvgJtNdNGkmkwCPLITf8s+WpaFmApAjgFUsyz49jSTCaGMmkyaRZlkJsWpaiagKBZlmWomh8c+CdcnROj4Pk+Akh9E6DsJ0fJ8c+OTs+idk4J2Tg+j7Pr8nB9nwfAa59k7598+D74Sk+eEkFQdDmKsOhwBEVYCeAiAmAiHcBEV4CYCIWmCHF6FqC0haRcF4XYvxfF2LwvC+FqC0xcC0C/FwLSFoF0XBfi7C0xei8LwvcLQLoWoXheC0BaIWoXBdiNiMY6cZ8RkZxnjqOojAz4zx0HUdBGozjoMw6iMjpxdi+L4uC5F/xd/haIui/bZ/+DGBp4RYMQYgw8Ivgw/CJ4RfBh/hECKBgEUGODH8InhFwY4GoMcIgRIMcInCIBrBhCIESESBp+DEGARfhEA1gxBjBj4RAYQYgxgYwiYRcIgMAiAwBjCJgYAawYYRQMQMAYhFgagYhEA0AxA1A1CJBhBgEXwMQNAihFhFAxwYAwgaYMPCJA1hEBiBrwYQiwYwiBFwYhFgxgawihFCLA0gYAwCKESBoBpCJ4MIRcGOEVB9ALR8BJj7/PonB9HyEoJwfZ9E4Dt5OeTnlqJtxNAH7nwfHPonJ8E759E6PoJI//PkZOAWKgjoZUAQYka0Ffgge9VcfZOCdE7J0To+Cc8JWTo+D7J0EqPoO0+T5PsJSfJ9n0TkJUfJOeTknPPo+z6J2Ts+ycE759/k7Pg+z5J2TonBOeTkJUTg+T5DtJ0Tvk5Pjk5DXPg+idH2HYfR9E6PgnR9k5JyfZ9cnR9cNYJSfROidE6Ps+Cdn0fB8E6DtPs+CdHwfH5OAlR8nyfB98+SdE4J0ff5OidH2TknfPkJMfYSg+Cd8+D6PsnP/JwTk++fYSQO0+D5J0fZ8HwTjn2AWDgdAL8ApALQCkO8GACwMgyAVBiAVhzwY4BeDIMgFMOh0ArDgc4BeAV4cgFsOhz/wP225HGw7wCsO4M8AqHP/+DEGQ7/8OgzgFoM4Bf4MhwO4BT4cDmHcGfDnw78GcVhUFTFXFeKoqYJ3isKuKkVgTsVoqCsKwrCoKsVQTqKorYWoXhfxeF/xdi58XOL4WmLnFYVQToE4FXiuK0VwTnFQVRVFcVhU4JzFfDgdhzBnDuHfALgyDAMQZBgGQCgBUAoDAMh3BkAsDMGcGAYgxBn+HAC0ArwCwMAS5adAry0yBSBfoFBVaKqKwVUVrRXUa9FUOEqVUjV3ySPLkvkzlNlNn02E2S06pvVKWACECpW//PkZN8VDgj+zymq5krb1ewAxJvkqe1XysDVFSqlVIo2o0ispyFVoqKNIrKcqNKcKcFhSjaKiKyKhYWiv6nCnCKijajSnPorKNKcKcqcIrqNoqKNqcKNoqKNKNqNKcIqKN//orf6BSbKbKBSBXlp0CvQKTYTZ/0C/LTxFxFoigioigCLC4cRYRWItEXC4cRcI0IoFwwXCiKwjQXC8LhRFcRcRQRSFwoikRcLhxFRFguHiKRF8E7FYVhVBOgCYVRUACKKgqgE0E6ACJFYVoJ0CcgnQrAnMVwTgE6ioKoRwDdhHhG4RARgDcCMEaEYIiAbwRIRuESEcIwRwiYRwjQjBEgWoFuBa4FngWkIQQigwhEwigx/CL/4RfCKEQGP/wYiEUwYHwYGDAwYAGA4RCEQBEGB0rCNcGU4RrBlcIsGGDCESBiEWDCBhCIEWBiDAGHCKEUGEGEGMIgMAiwigxCIDADQGIRfCIEQDXgYYRfBgBoESEXwY/CJCKEQIsGIRODEGIRQYgw8IgRYMMGAGGDEDGDAIoMcDQIkGMGGBrgwCKDAIsIkDUDWDGDDA1hE4RQMQYgwBhhFBhBh4MAMYRMIoRAiAxBjhF4mhZFpxNBNy0LQTUTXhKglR9FqWpaAP5Zi//PkZNYXkgTkGEJwlkXcDfQAe9r8bCa/k5JwTriacsizBHE6CSH1w7efHLPgjuJqWnLITYTX8tRNAH/ialqJuJuWZaFkCO4m5aE7J2TonB8E559nyEnJyfB8FmJrxNxNhNS1E3LT8sxNC0E0LTlqJuWQm3E15ZiaFqWRZiaCagP5aCblkKoqCsCdioKoqwToE6FcVwAhRWBOIrCpFbgnEVRVFUVIJ2K4rAnIqioKgrcV4riuK0E4FcVQTsVxUBOoJ3FUE7itFYE7FYVRXFUVwTkVoqAnYJxBO4rReF4XYWsLWLoui4LwuC9AdsLQL0LQA9C8Lgvi6LguBahfFwXAtIvQQ4vCqKwrxX/8E5xXit4JwKzBnwj+DF+F1guvBiQYkDRIR8I/gz8Gd4R/wYsGLBi8I8DPBneDPBnwZ/8I8DP8I8B/0Gd+DPA+8I/+Ef+DOgzvwj4R/hHoM+Ee4M4D74M+Ef/A/7gfcDPBn4R7BnfCPgz4M7Bngf8DPwjwR6B/3CPwj0Gfgz+EfBnhH8GfwioRQGIBqgRUDVAYoGiBFcIoBqoMWEUA1UDRYRUIqEUA1WBooGiAaqBogRUGJwigM8I/gz+DOCPwj/Bnwj3BnBHgZ4M4I+DOhHhNCz5aiaCb//PkZM0YugrgAAASBEUEBfQAe9rclmWompZ8shNyzLMsy1LMBUAfhNxNicBJCcE5J0JpyyLMTcBVLXloCO5aCagKACiAqflqWYmvE3E3BHlmArFnxNRNC1LUBS5aFoWhZFmWR8k5CTnxz4PonZ8E5Pg+j4LUshNQH4TYtSzLMshNBNhNSyAViyE0FQE4FYVoJ0CcRUgnYqisKoJxFWAhiuKgrCtFUE7FQE5iqKgqRVFWKorwTsVxVFYE7FTFTBOxVgnAqRXBOPisK4BOK0VoriuK0E5BOxUivFcE5FYE5FQVBXFQE6FQVBVFYVxWioCcCoLovi4LoWiL0LSL+LouBaIvBahdi6LoWgEMFoC1hacXxdC14uipiqKn8VPFbiqKsVb//Bm/+EXgx4RdhFb///hE1/8GLP//CKwIrQjoGa/wPewZqEdYM1wZqDNAetgzWEd8GagzYM2DN4M1wjoI7Bm+DNhHcD3rA9awZuEdwZvCOwjsGaA964M1A978I7hHQR0DNge98I6hHYR1wZrBmwPWgPWwZsI7wjqB63COvgzQR3BmwZsGaget8D3rCOgZoGa4R1gzYM0EdwZsI6CO+DN4R1wZsD3oGaBmwjqEdAzXCO/4R0DNAzYR0WgI8TQT//PkZL4XFgTcAE6Tekf8EfQAe9t8YTXiagKwCsJuWXLMTUtC1LMTT8TYTUJP+fAdomomoD8JuWoCgWoI7iaFkJqJqfZ8hrk4CSE5Pk+Cdk5PgnBOT7JwTg+uWZaiaCbcsgFAsy0LPlmJsWYmom5ZFmWpaibiaAjy15ZFkWQm5Zll+JsJqJvy1E0CThJz65OQlJ8H2TknZOT759k6J3z4PgTQTcsy0LITflmWfLUsiyLITYTcTT8syzLQsi0LMEcWZa8tSyE1LTibibFqWYI/8shNCyE1LQsy1LUTUBTLLloWXLUsiyLUtBN+JqJvy1E05Z8TcsxNeWn/LTnxydHwfZ9n1ydk4PsnHJyfR9E4JwTgnB8k4588nB9cnR8c+D7PjxV4q4r8VsVgTgE4/itFShX/xV4rirxVFWKoq4qfxX8E6xVxUBOYrCtwTvwTj/xV8E5/irBOsVuKwqRXFTFQVorCrFf/xWioKwrCtioCcxUFUVAToE4FUVxWFQVhUBO4rgnUVIJyKkVgToE4ipFUVoq4qisKsE64qCoCdxUFUVxXFUE78VxWFQV4qiuKgqiuK4CCK2KoqirBOATsE4FWK4qxVFUVhVFYE4gnIriuCcQTiK4rCoCdCtirBORUiqK2//PkZLAWsgzuADQNNkZj/fjIe9r8K/FXFUVwSE5aiaAKgmhaFpxNQkp8n3z5PsJOGsffLQsyyE1LItS1E1Af+CPLMTUTfibFmJoWQmxanzydHwTsnASknBaCalqWom5ZcsxNyc8nASsnHDt59BrhJgkpOicBKg7D7JyfZ8E5Pk+Cd8EeWXE0LQsiyLQtSyLIsi0LUTYsy0E3LITQshNiyLUsiy4I78shNy0LMVcE6ipgnArRVgncE4wTsVIrCqCcCtBOYrwTgE7iuKwqCoKwrcE7BOQTqKgqiqFpBEC1gPYD3F0X4WoLTF0Xxei6FqC0BaAtQWgXxdwtWFqC0haBW/FQVRUBOBUFcE6ioCcAnEVRX4rYrxWFUVBViuLsXgtAuC6FoBDBaYvi7F8XxexdF8XhcFyI//gx//CJBhgxhEwY/+EXwYgx8ImDH8GPhE8GPhEwigwhFwNQNQNfhE+DGDAGHCIBrhEhEBh4RQMAY/gYBFBhhEAxCIDCEUDEDHBiEUIoRQY+DCBp4McGEIgGgMcGIGMGIGIGgRQYgxCKBiBjBgDGESDADWBgEUDEIuDADWBpBiEUDEDDgYgwBgDEDQDUGIGgRAYQYAxCKBhCKEThEBgBiEUGIRQMQiQiwNAY//PkZKwWNgjoZUAQREakFfQAe9t8YMfwi4GBaFoJsWpaFlyyBHctCzE25ZiaFoAocsy1E24Sk+idk6LMTYTYTQsyyLUtCyLQTUswFYJMGuTg+CdHwErPotAFAsuJtxNCz4m4mvBHiafloWZZ8YppBqzTNI0jTNBMpg0jTTZZFqWfE3Af/xNf+WomhZ8suWZZCb8tC1LQtS14m/LQtBNhNOfR8hKCc8nHJ2EqCUE5CSHxydk6Pg+D7Ps+Sdk6LUTQTcTcTctSz4mwmha8TXlmJvyy5ZiaFl+WpZFoWZa8TQshNCz4mhalmJsWfLQsuWRactBNRNC1E1LLlly0E2PgJWfR8h2H2fJOSdnx+fXPs+T5PgNbnzz6Po+T7JwTk+z4PonROglJ84qCvxXxUirFX4q4qeCd1f8InCI/4R/CP//4RMI/CMEYI4RAR8I8IjCJ4REI/gG8ESEfCOERCP4R/+EaERCPCNCNCI4BvQjYRMHINobIOfjZBzDZG3xtja42gcw2PwcvG2Nng5+NgbY2wcn42htDYGwNrjYGwNsbX42vxscbI2gc3Bzg5Qcg2uNvjaGwNgbI2+Dl4OUbI2Qc42RsjbBy//g5eAboR4RwjQDeCP+EcI8IwBuwjwjBEBEA//PkZKoZMgrqADXt9EV8FfQAe9scG+EThEBGCMESESEbhEQjwjwjwjBHCIwiQDcCNCI/hHE0/LQBSLITf/lqWoSvk7LT8BWLMtRNAk58E7Po+CyLQTcsyyLUsi0Afi1LUTUTUtBNS05aFkWpZHzwkoSgnB9HwfQSsTYsizLQtRNRNgFf/8NcJWEmAWCdn0To+T4CUHyGtxNiyLT/lmJqJqJqWgmpZFqJsWgmwmwmwmv5ZiaibiactBNv/yyLTiaFkWZagKgCmJqWQmgmom3E0LTibAKfE0LLiuKgrYqipBO4JzFUE5BORXBOhVioKwqRWBOYJyKkE6BOIrYqCqCcxVxVFUV8E4FSCdcVgAgCuKkLTBDC6CHi+LwuRfha4uC+FpF8XQtAWgB2wtAWoXBchaBfwtQWnFSCdxVxXFUVhUFYV4rgnOK3wTiKir//1eDCsf//7/+wOYd///ei/f6lmiqGXpyOlCSRm+yP3UtDhFIzqBhwCFHAGFHABYGcAnAAMOAAYcAAw4BYKOAIROANgicAQYcABE4AAzgE4B+1wmcAwYcAK+sDOADgFLCJwAlWBnABwABnABwDWraETgEDOADgDBiRkgoJpGaP+64RSMoRSMGBiRkkwMSMlq7AxIy4//PkZJUYEgieBFw3fkL8FgAied8AROAAicA8DOATgAGHAAROAFwM4BOAGBhwADDgAGHANQUcAgicAYROAfgw4AIkbPNNNpo0TSNBNJgUs0l7lomEwmRSOaRp80zQFK4nvTInnTEGgwGwAwYmOmkyaInppJpMJg0k1+KUaaaTCb42U0mBsGiaSaNNNpo0OaKZNE0jTTSY5oGmaZpJrphM9MGkmDQTCZBzpg0OKR+mBtdMJobfTSbTfG2KSaBpGgaZomiaBomn02mOmkwmjSNPpjmmaKZNA0zSNFNCeClJkT40DTTCY5oJk0kyaJpdMppMdMdN80TR6ZTXTfNJNmimumem+aKZTKaTaaTRops0kwaZppk0+aSa6ZTKYTfTfTPTHTKa5omgmEyaJo9NmkaRp/pnmmaf6aNNMplMplMdMpv8TxMJlNplNJn9MdM1OM6hWa/EjiRiRiO/xIcSP+GgCZQ1+GvDRDV//4aP///4I8EwTwTBLwS/4AHgnBHBHgiwR4JgAgS4IwAYPA8ADg+AAAAFwfB4L4WADC2AGAGFwsFwuD2FgAcAPC+F/B8L4X/B7B4L4WwuD+AGDwXACAAC2D2AEFgfCwAAAAXB8LhcLeDwXCwPYPA+ACACD+AH4XwA//PkZJMVIgb2ejVLxkBMEgTIe898vwv4X/ACB/C4WwtgBg/gA4PA9gBeFhLRTXTRomkmP0yJ6J+mPy0NA0OvibNDQmfzTNNMjaFKNATxMiemiaRoGkmE2mkwmTRTHNBMGiaCZTSZTZomh0PaV9fX2hoX14kzSmOaCY5pJr80U0aPTfNFMps0jSNJMmiaSaTKb6aTKYNLphMpg0eaJoGkJ8aBoppMppMJg00xzTTabNFNJpNJpNpnpg0DT6bTRoppoJMWrSh/690NQ5paV5D2le/LND2hoQxDF/rzR1/r/aWhfaWleQxfXmheaevNDS0tLQ0ryGoch/X15D+vLy+0oc0ry/19DUOXuvIc0oav9oXkNX1/r3X18QCGHQGQHB8PiAPAaHgPDsBgcH+Hqv//+DJ0GNuEW4MbQY2wZO4Rn///4R34R3Qjv//8Gbv//8GbgZuwZvCO4GbsD37+Ed3A586DJ4Rn8DnToRn8GTsGT8GToRn4HOngyf4HOnBGeDJ0IzgjOCM8DnTwjOgydwOdP4RnYMncDbtwY2A27cItgNs3CLeDGwMbwY3CLaEWwRbQi3A27eDG0GN4G2bBFvA2zcItgY3A27YGN4G2bAxtA58/gc6eDJwHOnAyfCM7A588//PkZLMYngTSAFAUhEYcDfggw9V8DnzwOdOBk8IzuEZ4MnAyfgychsy7F3oE13Nl9sy7myrsL6qqOU5anCqkHqNDI3KVUTEU8GNU7U6gxyHKchyVV/Xa2Zspfds3rubK2VsjZmztk9djZi/TZV2NnXYu0vsm0yaBoDZNEbA2k0aKZNjmwbH/Nvm2bRtGyBVArD1G0bQPUevg9h6/+PRzZNkCrzZNgesegesermyPQPXzbHpNvm0PQPUPSbJs82TaHqAtj082h6DaNn8eo2DbHrHpNjj1m1zYHqNo2jYNnmwbPNgek2ja5sj0D1m0bJs80xtJlMdMCeps0U0meaaa6b5p/mmmU3zRTfNFN/pgHPzQNPmkaaaTXTKbTRoJk0zS6b/NBNdNJlNGj02aH6Z4IgAEEYJ4I+CMEQJcEUEXBOpHDX/w1Q0Q1Q1cNWGvw0Q0/hp/AmIaA0cCYhow0w1/w0hoDRhpw1w1BrgTLDXw1BrhrDQGgNQEzAmOGuGiGgNfgTHDQGoCZw1w0BrDWBMIEzDVDTDUGgNfAFwGjBrg1A1YNcGsAXAaQaABcBqg1g1QagaINYaoEyw1Bow1YaA1hoDSBMw1gTICYQJkGrDQGoNGGmGsNcNQawJkGuBM4aIa//PkZKAYngTsATQNQkKMFgDifh7AYagJkGsCZ+GkNWGiGsNAaYaOGgCYgTENQaw0Yaw1Q1Q0/hqw1BkAfmkaCb6ZTCY6bNBNLwmqGA5fzSTCb/lgwXOmMmMmTQ5pmkmUwmkymfzRTaZFJ6aNM002NrppMpg0kwKQmE2m0yKUaKaE95o9MJj9N9NJk0UymOaSaE/TabNNNmmmk2mU2aHTKZTCaNDjaTJoGimkyNvpk0TRTHTf6bTRopg001+mU0aXNBMjYNA0k2mjR5pfps0U100mUz0ym02mDRTHTaaTRpplMc0kz0ySA000mDSTKbNI002mzQTHTaYTf//NA0zQTBodNJk0UyKSaaZNJMprmkaP5oGmKUmEymUyaCbTHNBMJlN80DRNBMmkm/00mUwaZpprplNpvmiaJo80+aSa//TaY/6ZaH//wY4ReEX4RIMfwiAxBh/BhCJ/+ESDDwYcIn+EQIoMAiQYAw8IsGIGGETBj4MP4MQiAxhEAwAxAxBjBiEUIgMIMcDCDAGIMcGMDEGGBgEUDTwNfAx4MAiwiQYgwBgEUIgMIRAiQYhFwYAwBhA1CKDEIoGoGgMQi4MeDADGEQIkIgGMDCDAIoMAiQiAYwYYMQNQigwCJBiDEGAR//PkZJwV+gzoZUAQRkZsCfQAe9tcQYgx8GEGIMQiwMAY4MANAMcIoMSyE1E1/LMTUtCz5OD5PkJJz5Pk+uA/FqWRaib8TUTUTQtC05alqWYm4momgI8TYsxNCzE3LUtQFEsgFM+z6J0fB8nz+TsNcnB9BK+Tk+g7CdhJT6LTiaFqWYI7lqWoCvy05ZlnxNy0/LUshNBNvwR4moCj+Wv5ZlkJqWpalkCOE1E1LQsiyLITUBULLlqWZZlmJsWhZcsi1/4CiWpalkJqJuWvLXlkJsJpyy4mwm5ZlmJuWXLUTQteWgmgmwCsJoWfE3LMsiyLP8TTlkJuAolqJryzE1LTibCbloJuWhZFoWYmxZ8TcXIvxeC0i+FrF0B2i4L8LSL4uBaIDyCHF8XRfF6FqgiwtIuYWoXIrYqAncVvxVip8VIqCvUxPqtFbFf/4q/8V/8V/iririr8VATjxXipxWgnYq+KwqfFTFQVoq+KsVBW8VhUisKuK0VRXivFYE4FTBOhVFcVRV4riuCdCuCdCtwTiCcCqCcgnYqxWFcVIJwKsVxWisK8VxVgnArYqRWFeK0V4qgnQrgnYrfBOoqAnAq4J0CciqKviuK3BOoJyKsE4FUVoqisK2KwrAnArgBAFSK4//PkZJ0VagjyJgGtbkOkFfwAbh4AqRViuK4J0KgrCrFUVxVjOEeDQgjlcT4T40xtjaNI0uaI2QciGNJIl4kJZtCGIaSckIm6GL3TQ2zRTY2UwmjSNE0fxS02aY2BsJs0/+mzSE8TQpHTKZTaaG0aQpApZp/mmm+aHTfTCZGwNgUk0E0aRp/ilJlNJgT5MmkJ9zQNA0TQTH6ZG2mk0mk0mk3zQTKY/G3zQTHTabTBpGgmU0aKaTJpJpNJtMphNjYTfNE0emkymE2mEyaCbNBNfmkaJpdNJnpg0k0mDTTCbTaZTBp80k2aCbTfNE00yaCb6bTZoplMmmaKZTKaTJpmiaHTXNJNdMDbTab6Y6Z6ZNNMJhMJhN9NJrmim02m0ymU300aPTSa6Y//5pJpNdN/9NppxWxU4Jx/xWxU/xU4qcV/ipiuKwqxWFbioK/8VIqivFTwTkVgTkVor4JxFXxX8VcVxUFQE4FaCcwTvBOIqwToVuKwqCtFUVYqxXxWFeK0E7FQVYrwTnwTsV4rCqCcfFaCcRVFQE5gnAr4JyK4r4Jz4J0Koqip4rCvisKoJ3xWBOME7iuKgriuKgrAnAqgnArxXiqCcgnYJzFQVQTmAEIVYrwToAIYrwTiKkVQTkE5//PkZK4XGgzsADQNAkIcCfwAe898FXFTFYVxXxUFQVkzzS5oilg5TTTY2kyaJpJtNGgJ8aKaTQ2k2aCaNI0eaSYNJM/tKHEiQxfJG09MmgaSYTRppg0TRNNMJlMptMCfppNprmiaA2jQNLmmaRppk0jRFLNP9NJhMGmaQpZpJhNCkGkmE0J+mxSk0m0x02mjRTKbTCZ42EwaQpJpptNprmgaRpmim00J4mzSNM0kymkyKWmE0muaKYGwNjmgafTPNE0U0mUwJ7+mem01+J8mhSk2mjRTSb6aTCbNBM9MpjpjppMpk0E2mE2mE2mjSTfTaZ6YNFMcT1MpnprptNmim0wmE100aSaTRo9MGjzTTHTaaTfTSaNLpoFMAAFYNBQGwAvwAYM4NgqqkjaAN3d3d3etERNK5CZ/3Ctf8AaiAc/u7vaIn/+8XPv//+GDKv8W1/+AC8K4Yw+94xe940jgceOBwOcRaxGwH4EuNIjBfxazB8HhkwVjIAII/vDkjG/wAcJPeF5e98hNgSYLWMFvhZ73pX06aoehpmh01hMJtM9K3TKY9E10x+memvlIpZM9MUTCbShbUrtM+n5ophNZuXK+0wmemumMCemkmvc0Uwm/lJJlLe5oJZI0SyW6R0mE//PkZLcXlgrzECFvrEmMEfgAfh7k2aORpbTYUo9SBNsekGYNVKgqg6hrUXK4Q42DOwPWbILEzBSumEgkWJPU8S72G5wUuGDwguEKa1Q0UykS3Bn7FJNgg5qoEgpsGabBtGabZt7NrKCNgLYes1idmabBtm2bZsBRm0PQbF9mwPSPUBbMwzB6QojYM42ePTzbMwzR6TaNs1eBVNv81yDUJ2QYhJtD0m0PVe+x6T2M8HsbFwsh6B6D7HpugT2uZhO6HqZhmE7ISZhhkFNcghtmybBnnsD1Ho49ZtG2bZs5PVBc2EEepCaEHNjj1EJHq5smabZtmwbNEEPR+bJse9z2PY2T1SN0rdNJq6yXI06COvNJj9MGmkkGmUj7pI0TToNGlEsNEnCW10ymi5FtNFKpvps0kz0uW3aaTF00mTSzdNJu0KFYz1KjaGAhyoQCFGM//zFARgIUZ/oZpdCttay6M5drW1joSj6Ekk1b7J7R7aoQNlPrWBKLTTzOsGT5yYxLrtHTy2iUxEkES0HIBVD066VjGj31odPkkSjJtbWs6OIjKmlXHR9K5MTv5pdZolE10kk2lly74TFx5KTXeTGLrS6ExiucvJSSDUdXZm3NLn1rtYBCUEoRj77WOhCPc+g5//PkZJ8XPgzoAABMTrz8BfQyY9ONGxJULutaa1TE5LHxWEo+XecmMa3p0kqBCR6qOFaFUGpNJIIjqVi0ylBqJIkiSJIkmJj605EkSRJPetWAyVacmodBUVhGfrAZPF0AUrgRLNiqDU4VHo8h6HRObJJNdqlRBMFT0qdNE0WZhmay2tCuOY6oieWieianCnVSbzjd7SGhrLi6eUSeLcZTWqdML5PM50uOGJms9VqtYU6hrgrm4V0frUzTvYsiegR2FOkqUxSKdVCpmRCSkIAUZ4VPhqEKgFDU2VhUiIhUaIg0RAkTBYEjYBUbBMuCJgLAkCUBUinABgBE3/9EQqFRM0s0qzktk9ZFqqFC6RULE11JVDkd8Y1vVFOx9oUIpZ8Vnq5klkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";var eu=t=>t instanceof Date,Jk=t=>t==null;const Xk=t=>typeof t=="object";var l_=t=>!Jk(t)&&!Array.isArray(t)&&Xk(t)&&!eu(t),c_=t=>Jk(t)||!Xk(t);function Zk(t,e){if(c_(t)||c_(e))return t===e;if(eu(t)&&eu(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const i=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=e[s];if(eu(i)&&eu(o)||l_(i)&&l_(o)||Array.isArray(i)&&Array.isArray(o)?!Zk(i,o):i!==o)return!1}}return!0}const lQ={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},cQ={finder:!0,torch:!0,tracker:void 0,onOff:!1,zoom:!1},uQ={width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",aspectRatio:"1/1"},dQ={width:"100%",height:"100%",objectFit:"cover",overflow:"hidden"};function Xh(t){if(t===null)throw new Error("Canvas should always be defined when component is mounted.");const e=t.getContext("2d");if(e===null)throw new Error("Canvas 2D context should be non-null");e.clearRect(0,0,t.width,t.height)}function hQ(t){var e;const{onScan:r,constraints:n,formats:s=["qr_code"],paused:i=!1,components:o,children:l,styles:c,classNames:u,allowMultiple:h,scanDelay:f,onError:m,sound:v}=t,x=y.useRef(null),p=y.useRef(null),w=y.useRef(null),_=y.useMemo(()=>({...lQ,...n}),[n]),b=y.useMemo(()=>({...cQ,...o}),[o]),[C,R]=y.useState(!1),[L,F]=y.useState(!0),[I,S]=y.useState(_),N=function(){const H=y.useRef(Promise.resolve({type:"stop",data:{}})),J=y.useRef(null),ie=y.useRef(null),[q,W]=y.useState({}),[se,re]=y.useState({}),le=y.useCallback(async(oe,ge)=>{var xe,be,Te;if(!window.isSecureContext)throw new Error("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.");if(((xe=navigator==null?void 0:navigator.mediaDevices)===null||xe===void 0?void 0:xe.getUserMedia)===void 0)throw new Error("this browser has no Stream API support");const Ce=await navigator.mediaDevices.getUserMedia({audio:!1,video:ge});oe.srcObject!==void 0?oe.srcObject=Ce:oe.mozSrcObject!==void 0?oe.mozSrcObject=Ce:window.URL.createObjectURL?oe.src=window.URL.createObjectURL(Ce):window.webkitURL?oe.src=window.webkitURL.createObjectURL(Ce):oe.src=Ce.id,await Promise.race([oe.play(),new Promise(ve=>setTimeout(ve,3e3)).then(()=>{throw new Error("Loading camera stream timed out after 3 seconds.")})]),await new Promise(ve=>setTimeout(ve,500));const[he]=Ce.getVideoTracks();return re(he.getSettings()),W((Te=(be=he==null?void 0:he.getCapabilities)===null||be===void 0?void 0:be.call(he))!==null&&Te!==void 0?Te:{}),J.current=Ce,ie.current=he,{type:"start",data:{videoEl:oe,stream:Ce,constraints:ge}}},[]),ue=y.useCallback(async(oe,ge)=>{oe.src="",oe.srcObject=null,oe.load();for(const xe of ge.getTracks())ge.removeTrack(xe),xe.stop();return J.current=null,ie.current=null,re({}),{type:"stop",data:{}}},[]),Se=y.useCallback(async(oe,{constraints:ge,restart:xe=!1})=>{if(H.current=H.current.then(be=>{if(be.type==="start"){const{data:{videoEl:Te,stream:Ce,constraints:he}}=be;return xe||oe!==Te||ge!==he?ue(Te,Ce).then(()=>le(oe,ge)):be}return le(oe,ge)}),(await H.current).type==="stop")throw new Error("Something went wrong with the camera task queue (start task).")},[le,ue]),ke=y.useCallback(async()=>{if(H.current=H.current.then(oe=>{if(oe.type==="stop")return oe;const{data:{videoEl:ge,stream:xe}}=oe;return ue(ge,xe)}),(await H.current).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")},[ue]),we=y.useCallback(async oe=>{const ge=ie.current;if(!ge)throw new Error("No active video track found.");{oe.advanced&&oe.advanced[0].zoom&&ge.getCapabilities().torch&&await ge.applyConstraints({advanced:[{torch:!1}]}),await ge.applyConstraints(oe);const xe=ge.getCapabilities(),be=ge.getSettings();W(xe),re(be)}},[]);return y.useEffect(()=>()=>{(async()=>await ke())()},[ke]),{capabilities:q,settings:se,startCamera:Se,stopCamera:ke,updateConstraints:we}}(),{startScanning:j,stopScanning:D}=function(H){const{videoElementRef:J,onScan:ie,onFound:q,retryDelay:W=100,scanDelay:se=0,formats:re=[],allowMultiple:le=!1,sound:ue=!0}=H,Se=y.useRef(new bv({formats:re})),ke=y.useRef(null),we=y.useRef(null);y.useEffect(()=>{Se.current=new bv({formats:re})},[re]),y.useEffect(()=>{typeof window<"u"&&ue&&(ke.current=new Audio(typeof ue=="string"?ue:aQ))},[ue]);const oe=y.useCallback(ge=>async xe=>{if(J.current!==null&&J.current.readyState>1){const{lastScan:be,contentBefore:Te,lastScanHadContent:Ce}=ge;if(xe-be<W)we.current=window.requestAnimationFrame(oe(ge));else{const he=await Se.current.detect(J.current),ve=he.some(Ze=>!Te.includes(Ze.rawValue)),gt=he.length>0;let at=ge.lastOnScan;(ve||le&&gt&&xe-at>=se)&&(ue&&ke.current&&ke.current.paused&&ke.current.play().catch(Ze=>console.error("Error playing the sound",Ze)),at=xe,ie(he)),gt&&q(he),!gt&&Ce&&q(he);const Ot={lastScan:xe,lastOnScan:at,lastScanHadContent:gt,contentBefore:ve?he.map(Ze=>Ze.rawValue):Te};we.current=window.requestAnimationFrame(oe(Ot))}}},[J.current,ie,q,W]);return{startScanning:y.useCallback(()=>{const ge=performance.now(),xe={lastScan:ge,lastOnScan:ge,contentBefore:[],lastScanHadContent:!1};we.current=window.requestAnimationFrame(oe(xe))},[oe]),stopScanning:y.useCallback(()=>{we.current!==null&&(window.cancelAnimationFrame(we.current),we.current=null)},[])}}({videoElementRef:x,onScan:r,onFound:H=>function(J,ie,q,W){const se=q;if(se==null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas is always defined.");const re=ie;if(re==null)throw new Error("onFound handler should only be called when component is mounted. Thus video element is always defined.");if(J.length===0||W===void 0)Xh(se);else{const le=re.offsetWidth,ue=re.offsetHeight,Se=re.videoWidth,ke=re.videoHeight,we=Math.max(le/Se,ue/ke),oe=Se*we,ge=ke*we,xe=oe/Se,be=ge/ke,Te=(le-oe)/2,Ce=(ue-ge)/2,he=({x:Ot,y:Ze})=>({x:Math.floor(Ot*xe),y:Math.floor(Ze*be)}),ve=({x:Ot,y:Ze})=>({x:Math.floor(Ot+Te),y:Math.floor(Ze+Ce)}),gt=J.map(Ot=>{const{boundingBox:Ze,cornerPoints:yt}=Ot,{x:ur,y:_n}=ve(he({x:Ze.x,y:Ze.y})),{x:xs,y:un}=he({x:Ze.width,y:Ze.height});return{...Ot,cornerPoints:yt.map(ws=>ve(he(ws))),boundingBox:DOMRectReadOnly.fromRect({x:ur,y:_n,width:xs,height:un})}});se.width=re.offsetWidth,se.height=re.offsetHeight;const at=se.getContext("2d");if(at===null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas 2D context is always defined.");W(gt,at)}}(H,x.current,w.current,b.tracker),formats:s,retryDelay:b.tracker===void 0?500:10,scanDelay:f,allowMultiple:h,sound:v});y.useEffect(()=>(R(!0),()=>{R(!1)}),[]),y.useEffect(()=>{C&&(D(),j())},[o==null?void 0:o.tracker]),y.useEffect(()=>{if(!Zk(_,I)){const H=_;n!=null&&n.deviceId&&delete H.facingMode,S(H)}},[n]);const O=y.useMemo(()=>({constraints:I,shouldStream:C&&!i}),[I,C,i]),k=async()=>{const H=x.current;if(H==null)throw new Error("Video should be defined when component is mounted.");const J=p.current;if(J==null)throw new Error("Canvas should be defined when component is mounted.");const ie=J.getContext("2d");if(ie==null)throw new Error("Canvas should be defined when component is mounted.");if(O.shouldStream){await N.stopCamera(),F(!1);try{await N.startCamera(H,O),H?F(!0):await N.stopCamera()}catch(q){m==null||m(q),console.error("error",q)}}else J.width=H.videoWidth,J.height=H.videoHeight,ie.drawImage(H,0,0,H.videoWidth,H.videoHeight),await N.stopCamera(),F(!1)};y.useEffect(()=>{(async()=>await k())()},[O]);const G=y.useMemo(()=>O.shouldStream&&L,[O.shouldStream,L]);return y.useEffect(()=>{if(G){if(p.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus pause frame canvas is defined");if(Xh(p.current),w.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus tracking canvas is defined");if(Xh(w.current),x.current==null)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus video element is defined");j()}},[G]),Y.createElement("div",{style:{...uQ,...c==null?void 0:c.container},className:u==null?void 0:u.container},Y.createElement("video",{ref:x,style:{...dQ,...c==null?void 0:c.video,visibility:i?"hidden":"visible"},className:u==null?void 0:u.video,autoPlay:!0,muted:!0,playsInline:!0}),Y.createElement("canvas",{ref:p,style:{display:i?"block":"none",position:"absolute",width:"100%",height:"100%"}}),Y.createElement("canvas",{ref:w,style:{position:"absolute",width:"100%",height:"100%"}}),Y.createElement("div",{style:{position:"absolute",width:"100%",height:"100%"}},b.finder&&Y.createElement(oQ,{scanning:L,capabilities:N.capabilities,onOff:b.onOff,zoom:b.zoom&&N.settings.zoom?{value:N.settings.zoom,onChange:async H=>{const J={...I,advanced:[{zoom:H}]};await N.updateConstraints(J)}}:void 0,torch:b.torch?{status:(e=N.settings.torch)!==null&&e!==void 0&&e,toggle:async H=>{const J={...I,advanced:[{torch:H}]};await N.updateConstraints(J)}}:void 0,startScanning:async()=>await k(),stopScanning:async()=>{await N.stopCamera(),Xh(w.current),F(!1)}}),l))}const fQ=()=>{const[t,e]=y.useState(null),[r,n]=y.useState(null),[s,i]=y.useState(!1),[o,l]=y.useState(null),c=Yn();ti();const{addPurchase:u}=vs();y.useEffect(()=>{mt("page_view",{page:"Scan"})},[]);const h=async v=>{if(!s){i(!0),e(null),n(null);try{if(!Array.isArray(v)||!v[0]||typeof v[0].rawValue!="string")throw new Error("Invalid QR scan result format");const x=v[0].rawValue;mt("scan_qr_attempt",{rawValue:x});let p;try{p=JSON.parse(x)}catch{const L=x.split(":");if(L.length<3||L[0]!=="LOYALTY")throw mt("scan_qr_invalid",{rawValue:x}),new Error("Invalid QR code format");p={userEmail:L[1],userId:L[2],offerId:"default_offer"}}if(!p.userEmail||!p.userId)throw new Error("Invalid QR code data - missing user information");const w=ar(Tt,"users",p.userId),_=await xw(_p(cc(Tt,"users"),UE("email","==",p.userEmail),UE("id","==",p.userId)));if(_.empty)throw mt("scan_qr_no_user",{email:p.userEmail,uid:p.userId}),new Error("No user found for this QR code");const C=_.docs[0].data();mt("scan_qr_success",{scanned_user:p.userEmail,scanned_uid:p.userId,offer_id:p.offerId}),p.action==="redeem_reward"&&p.rewardId?await tq(null,p.userEmail,p.userId,p.rewardId):await u(p.userEmail,p.userId,p.offerId),n(p.userEmail),e(!0),l(p);const R=await ca(w);if(R.exists()){const L=R.data(),F=L.purchases||0;let I="";if(p.action==="redeem_reward")I=`Reward redeemed for ${p.userName}! `,mt("reward_redeemed",{scanned_user:p.userEmail,reward_id:p.rewardId});else{const S=p.stampsPerScan||1;I=`${S} ${S===1?"stamp":"stamps"} added for ${p.offerName||"loyalty program"}!`;const j=await ca(w);if(j.exists()){const O=j.data().purchases||0;I+=` Total stamps: ${O}`}if(p.offerId&&p.offerId!=="default_offer"){const D=L.currentOfferProgress||0,O=5,k=Math.max(0,O-D);D>=O?(I+=" - Offer completed! ",mt("offer_completed",{scanned_user:p.userEmail,offer_id:p.offerId})):I+=` - ${k} more stamps needed for reward`}else{const D=L.purchaseLimit||5;if(F>=D)I+=" - Reward ready! ",mt("reward_ready",{scanned_user:p.userEmail,scanned_uid:p.userId});else{const O=D-F;I+=` - ${O} more to earn reward`}}}lt({title:"Success",description:I})}setTimeout(()=>{c("/dashboard")},1500)}catch(x){console.error("Error processing QR scan:",x);let p="Failed to process loyalty point";x instanceof Error&&(p=x.message),e(!1),lt({title:"Error",description:p,variant:"destructive"}),mt("scan_qr_error",{error:x.message})}finally{i(!1)}}},f=v=>{console.error("Scanner error:",v),e(!1),lt({title:"Scanner Error",description:"Camera error - please check permissions",variant:"destructive"}),mt("scan_qr_scanner_error",{error:String(v)})},m=()=>{e(null),n(null),i(!1),l(null)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:a.jsx("div",{className:"p-6 flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xs,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:a.jsx(Zl,{className:"w-6 h-6"})}),a.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Scan Loyalty QR"})]})})}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6",children:a.jsxs("div",{className:"w-full max-w-md bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl flex flex-col items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Scan a User's QR Code"}),!t&&a.jsxs("div",{className:"relative w-full flex flex-col items-center",children:[a.jsx("div",{style:{width:300,height:300,margin:"20px auto"},children:a.jsx(hQ,{onScan:h,onError:f})}),s&&a.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"Processing..."})]}),t===!0&&a.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-green-900/50 to-emerald-900/50 border border-green-700 rounded-xl text-center shadow-2xl animate-pulse",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:"Stamp Added Successfully!"}),a.jsxs("div",{className:"text-lg text-green-300 mb-3",children:[r&&a.jsxs("div",{className:"mb-3",children:[a.jsx("span",{className:"text-green-400 font-semibold",children:r}),a.jsxs("span",{className:"text-green-300",children:[" ","has earned ",(o==null?void 0:o.stampsPerScan)||1," ",(o==null?void 0:o.stampsPerScan)===1?"stamp":"stamps","!"]})]}),(o==null?void 0:o.offerName)&&a.jsxs("div",{className:"text-sm text-green-400 bg-green-900/30 px-3 py-1 rounded-full inline-block mb-2",children:["Offer: ",o.offerName]})]}),a.jsx("div",{className:"mt-4 text-xs text-green-500",children:"Redirecting to dashboard..."})]}),t===!1&&a.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700 rounded-xl text-center shadow-2xl",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("div",{className:"text-2xl font-bold text-red-400 mb-2",children:"Scan Failed"}),a.jsx("div",{className:"text-lg text-red-300 mb-3",children:"There was an error processing the QR code"}),a.jsx("div",{className:"text-sm text-red-400 bg-red-900/30 px-3 py-1 rounded-full inline-block",children:"Please try scanning again"})]}),!t&&a.jsx("div",{className:"mt-6 flex gap-3",children:a.jsx(je,{onClick:m,disabled:!t,variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500/20",children:"Reset Scanner"})})]})})]})]})},mQ=new I9,pQ=()=>a.jsx(P9,{client:mQ,children:a.jsx(o9,{children:a.jsxs(sq,{children:[a.jsx(s8,{}),a.jsx(j8,{}),a.jsx(A7,{children:a.jsxs(x7,{children:[a.jsx(Jn,{path:"/",element:a.jsx(lq,{})}),a.jsx(Jn,{path:"/register",element:a.jsx(FC,{children:a.jsx(dq,{})})}),a.jsx(Jn,{path:"/login",element:a.jsx(FC,{children:a.jsx(hq,{})})}),a.jsx(Jn,{path:"/dashboard",element:a.jsx(Bc,{children:a.jsx(wz,{})})}),a.jsx(Jn,{path:"/rewards",element:a.jsx(Bc,{children:a.jsx(bz,{})})}),a.jsx(Jn,{path:"/settings",element:a.jsx(Bc,{children:a.jsx(Ez,{})})}),a.jsx(Jn,{path:"/scan",element:a.jsx(Bc,{children:a.jsx(fQ,{})})}),a.jsx(Jn,{path:"/users",element:a.jsx(Bc,{requiredRole:"admin",children:a.jsx(sW,{})})}),a.jsx(Jn,{path:"*",element:a.jsx(iW,{})})]})})]})})});jA(document.getElementById("root")).render(a.jsx(pQ,{}));
