var Tb=t=>{throw TypeError(t)};var Cg=(t,e,r)=>e.has(t)||Tb("Cannot "+r);var oe=(t,e,r)=>(Cg(t,e,"read from private field"),r?r.call(t):e.get(t)),nt=(t,e,r)=>e.has(t)?Tb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Fe=(t,e,r,n)=>(Cg(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),pr=(t,e,r)=>(Cg(t,e,"access private method"),r);var Sh=(t,e,r,n)=>({set _(s){Fe(t,e,s,r)},get _(){return oe(t,e,n)}});function FN(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Mv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VN={exports:{}},Ym={},BN={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=Symbol.for("react.element"),r4=Symbol.for("react.portal"),n4=Symbol.for("react.fragment"),s4=Symbol.for("react.strict_mode"),i4=Symbol.for("react.profiler"),o4=Symbol.for("react.provider"),a4=Symbol.for("react.context"),l4=Symbol.for("react.forward_ref"),c4=Symbol.for("react.suspense"),u4=Symbol.for("react.memo"),d4=Symbol.for("react.lazy"),_b=Symbol.iterator;function h4(t){return t===null||typeof t!="object"?null:(t=_b&&t[_b]||t["@@iterator"],typeof t=="function"?t:null)}var UN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qN=Object.assign,GN={};function oc(t,e,r){this.props=t,this.context=e,this.refs=GN,this.updater=r||UN}oc.prototype.isReactComponent={};oc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $N(){}$N.prototype=oc.prototype;function Dv(t,e,r){this.props=t,this.context=e,this.refs=GN,this.updater=r||UN}var Ov=Dv.prototype=new $N;Ov.constructor=Dv;qN(Ov,oc.prototype);Ov.isPureReactComponent=!0;var Ab=Array.isArray,zN=Object.prototype.hasOwnProperty,Lv={current:null},HN={key:!0,ref:!0,__self:!0,__source:!0};function WN(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)zN.call(e,n)&&!HN.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:yd,type:t,key:i,ref:a,props:s,_owner:Lv.current}}function f4(t,e){return{$$typeof:yd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fv(t){return typeof t=="object"&&t!==null&&t.$$typeof===yd}function m4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Sb=/\/+/g;function Ng(t,e){return typeof t=="object"&&t!==null&&t.key!=null?m4(""+t.key):e.toString(36)}function df(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case yd:case r4:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Ng(a,0):n,Ab(s)?(r="",t!=null&&(r=t.replace(Sb,"$&/")+"/"),df(s,e,r,"",function(u){return u})):s!=null&&(Fv(s)&&(s=f4(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Sb,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Ab(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Ng(i,l);a+=df(i,e,r,c,s)}else if(c=h4(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Ng(i,l++),a+=df(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Rh(t,e,r){if(t==null)return t;var n=[],s=0;return df(t,n,"","",function(i){return e.call(r,i,s++)}),n}function p4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lr={current:null},hf={transition:null},g4={ReactCurrentDispatcher:Lr,ReactCurrentBatchConfig:hf,ReactCurrentOwner:Lv};function QN(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Rh,forEach:function(t,e,r){Rh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Rh(t,function(){e++}),e},toArray:function(t){return Rh(t,function(e){return e})||[]},only:function(t){if(!Fv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=oc;Ge.Fragment=n4;Ge.Profiler=i4;Ge.PureComponent=Dv;Ge.StrictMode=s4;Ge.Suspense=c4;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g4;Ge.act=QN;Ge.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=qN({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Lv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)zN.call(e,c)&&!HN.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:yd,type:t.type,key:s,ref:i,props:n,_owner:a}};Ge.createContext=function(t){return t={$$typeof:a4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o4,_context:t},t.Consumer=t};Ge.createElement=WN;Ge.createFactory=function(t){var e=WN.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:l4,render:t}};Ge.isValidElement=Fv;Ge.lazy=function(t){return{$$typeof:d4,_payload:{_status:-1,_result:t},_init:p4}};Ge.memo=function(t,e){return{$$typeof:u4,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=hf.transition;hf.transition={};try{t()}finally{hf.transition=e}};Ge.unstable_act=QN;Ge.useCallback=function(t,e){return Lr.current.useCallback(t,e)};Ge.useContext=function(t){return Lr.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return Lr.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return Lr.current.useEffect(t,e)};Ge.useId=function(){return Lr.current.useId()};Ge.useImperativeHandle=function(t,e,r){return Lr.current.useImperativeHandle(t,e,r)};Ge.useInsertionEffect=function(t,e){return Lr.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return Lr.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return Lr.current.useMemo(t,e)};Ge.useReducer=function(t,e,r){return Lr.current.useReducer(t,e,r)};Ge.useRef=function(t){return Lr.current.useRef(t)};Ge.useState=function(t){return Lr.current.useState(t)};Ge.useSyncExternalStore=function(t,e,r){return Lr.current.useSyncExternalStore(t,e,r)};Ge.useTransition=function(){return Lr.current.useTransition()};Ge.version="18.3.1";BN.exports=Ge;var g=BN.exports;const J=Mv(g),YN=FN({__proto__:null,default:J},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y4=g,v4=Symbol.for("react.element"),x4=Symbol.for("react.fragment"),w4=Object.prototype.hasOwnProperty,b4=y4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E4={key:!0,ref:!0,__self:!0,__source:!0};function KN(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)w4.call(e,n)&&!E4.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:v4,type:t,key:i,ref:a,props:s,_owner:b4.current}}Ym.Fragment=x4;Ym.jsx=KN;Ym.jsxs=KN;VN.exports=Ym;var o=VN.exports,JN={exports:{}},un={},XN={exports:{}},ZN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,H){var ie=U.length;U.push(H);e:for(;0<ie;){var ne=ie-1>>>1,le=U[ne];if(0<s(le,H))U[ne]=H,U[ie]=le,ie=ne;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var H=U[0],ie=U.pop();if(ie!==H){U[0]=ie;e:for(var ne=0,le=U.length,he=le>>>1;ne<he;){var _e=2*(ne+1)-1,Me=U[_e],ue=_e+1,Z=U[ue];if(0>s(Me,ie))ue<le&&0>s(Z,Me)?(U[ne]=Z,U[ue]=ie,ne=ue):(U[ne]=Me,U[_e]=ie,ne=_e);else if(ue<le&&0>s(Z,ie))U[ne]=Z,U[ue]=ie,ne=ue;else break e}}return H}function s(U,H){var ie=U.sortIndex-H.sortIndex;return ie!==0?ie:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,m=3,p=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=U)n(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=r(u)}}function R(U){if(y=!1,E(U),!w)if(r(c)!==null)w=!0,Y(I);else{var H=r(u);H!==null&&ee(R,H.startTime-U)}}function I(U,H){w=!1,y&&(y=!1,N(T),T=-1),p=!0;var ie=m;try{for(E(H),f=r(c);f!==null&&(!(f.expirationTime>H)||U&&!L());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,m=f.priorityLevel;var le=ne(f.expirationTime<=H);H=t.unstable_now(),typeof le=="function"?f.callback=le:f===r(c)&&n(c),E(H)}else n(c);f=r(c)}if(f!==null)var he=!0;else{var _e=r(u);_e!==null&&ee(R,_e.startTime-H),he=!1}return he}finally{f=null,m=ie,p=!1}}var V=!1,j=null,T=-1,S=5,k=-1;function L(){return!(t.unstable_now()-k<S)}function D(){if(j!==null){var U=t.unstable_now();k=U;var H=!0;try{H=j(!0,U)}finally{H?P():(V=!1,j=null)}}else V=!1}var P;if(typeof x=="function")P=function(){x(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=D,P=function(){z.postMessage(null)}}else P=function(){b(D,0)};function Y(U){j=U,V||(V=!0,P())}function ee(U,H){T=b(function(){U(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||p||(w=!0,Y(I))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var ie=m;m=H;try{return U()}finally{m=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=m;m=U;try{return H()}finally{m=ie}},t.unstable_scheduleCallback=function(U,H,ie){var ne=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,U){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=ie+le,U={id:d++,callback:H,priorityLevel:U,startTime:ie,expirationTime:le,sortIndex:-1},ie>ne?(U.sortIndex=ie,e(u,U),r(c)===null&&U===r(u)&&(y?(N(T),T=-1):y=!0,ee(R,ie-ne))):(U.sortIndex=le,e(c,U),w||p||(w=!0,Y(I))),U},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(U){var H=m;return function(){var ie=m;m=H;try{return U.apply(this,arguments)}finally{m=ie}}}})(ZN);XN.exports=ZN;var C4=XN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N4=g,cn=C4;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eT=new Set,Iu={};function ba(t,e){ql(t,e),ql(t+"Capture",e)}function ql(t,e){for(Iu[t]=e,t=0;t<e.length;t++)eT.add(e[t])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S0=Object.prototype.hasOwnProperty,T4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rb={},Ib={};function _4(t){return S0.call(Ib,t)?!0:S0.call(Rb,t)?!1:T4.test(t)?Ib[t]=!0:(Rb[t]=!0,!1)}function A4(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function S4(t,e,r,n){if(e===null||typeof e>"u"||A4(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fr(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ur[t]=new Fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ur[e]=new Fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ur[t]=new Fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ur[t]=new Fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ur[t]=new Fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ur[t]=new Fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ur[t]=new Fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ur[t]=new Fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ur[t]=new Fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vv=/[\-:]([a-z])/g;function Bv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vv,Bv);ur[e]=new Fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vv,Bv);ur[e]=new Fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vv,Bv);ur[e]=new Fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ur[t]=new Fr(t,1,!1,t.toLowerCase(),null,!1,!1)});ur.xlinkHref=new Fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ur[t]=new Fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uv(t,e,r,n){var s=ur.hasOwnProperty(e)?ur[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(S4(e,r,s,n)&&(r=null),n||s===null?_4(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ii=N4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ih=Symbol.for("react.element"),sl=Symbol.for("react.portal"),il=Symbol.for("react.fragment"),qv=Symbol.for("react.strict_mode"),R0=Symbol.for("react.profiler"),tT=Symbol.for("react.provider"),rT=Symbol.for("react.context"),Gv=Symbol.for("react.forward_ref"),I0=Symbol.for("react.suspense"),j0=Symbol.for("react.suspense_list"),$v=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),nT=Symbol.for("react.offscreen"),jb=Symbol.iterator;function Vc(t){return t===null||typeof t!="object"?null:(t=jb&&t[jb]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,Tg;function Jc(t){if(Tg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Tg=e&&e[1]||""}return`
`+Tg+t}var _g=!1;function Ag(t,e){if(!t||_g)return"";_g=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{_g=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Jc(t):""}function R4(t){switch(t.tag){case 5:return Jc(t.type);case 16:return Jc("Lazy");case 13:return Jc("Suspense");case 19:return Jc("SuspenseList");case 0:case 2:case 15:return t=Ag(t.type,!1),t;case 11:return t=Ag(t.type.render,!1),t;case 1:return t=Ag(t.type,!0),t;default:return""}}function P0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case il:return"Fragment";case sl:return"Portal";case R0:return"Profiler";case qv:return"StrictMode";case I0:return"Suspense";case j0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rT:return(t.displayName||"Context")+".Consumer";case tT:return(t._context.displayName||"Context")+".Provider";case Gv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $v:return e=t.displayName||null,e!==null?e:P0(t.type)||"Memo";case Ti:e=t._payload,t=t._init;try{return P0(t(e))}catch{}}return null}function I4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P0(e);case 8:return e===qv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function no(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function j4(t){var e=sT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jh(t){t._valueTracker||(t._valueTracker=j4(t))}function iT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=sT(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Wf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function k0(t,e){var r=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Pb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=no(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oT(t,e){e=e.checked,e!=null&&Uv(t,"checked",e,!1)}function M0(t,e){oT(t,e);var r=no(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?D0(t,e.type,r):e.hasOwnProperty("defaultValue")&&D0(t,e.type,no(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function D0(t,e,r){(e!=="number"||Wf(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Xc=Array.isArray;function vl(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+no(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function O0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ce(92));if(Xc(r)){if(1<r.length)throw Error(ce(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:no(r)}}function aT(t,e){var r=no(e.value),n=no(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Db(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ph,cT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ph=Ph||document.createElement("div"),Ph.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ph.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ju(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var hu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P4=["Webkit","ms","Moz","O"];Object.keys(hu).forEach(function(t){P4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hu[e]=hu[t]})});function uT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||hu.hasOwnProperty(t)&&hu[t]?(""+e).trim():e+"px"}function dT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=uT(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var k4=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function F0(t,e){if(e){if(k4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function V0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B0=null;function zv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var U0=null,xl=null,wl=null;function Ob(t){if(t=wd(t)){if(typeof U0!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=ep(e),U0(t.stateNode,t.type,e))}}function hT(t){xl?wl?wl.push(t):wl=[t]:xl=t}function fT(){if(xl){var t=xl,e=wl;if(wl=xl=null,Ob(t),e)for(t=0;t<e.length;t++)Ob(e[t])}}function mT(t,e){return t(e)}function pT(){}var Sg=!1;function gT(t,e,r){if(Sg)return t(e,r);Sg=!0;try{return mT(t,e,r)}finally{Sg=!1,(xl!==null||wl!==null)&&(pT(),fT())}}function Pu(t,e){var r=t.stateNode;if(r===null)return null;var n=ep(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ce(231,e,typeof r));return r}var q0=!1;if(Qs)try{var Bc={};Object.defineProperty(Bc,"passive",{get:function(){q0=!0}}),window.addEventListener("test",Bc,Bc),window.removeEventListener("test",Bc,Bc)}catch{q0=!1}function M4(t,e,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var fu=!1,Qf=null,Yf=!1,G0=null,D4={onError:function(t){fu=!0,Qf=t}};function O4(t,e,r,n,s,i,a,l,c){fu=!1,Qf=null,M4.apply(D4,arguments)}function L4(t,e,r,n,s,i,a,l,c){if(O4.apply(this,arguments),fu){if(fu){var u=Qf;fu=!1,Qf=null}else throw Error(ce(198));Yf||(Yf=!0,G0=u)}}function Ea(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function yT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lb(t){if(Ea(t)!==t)throw Error(ce(188))}function F4(t){var e=t.alternate;if(!e){if(e=Ea(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Lb(s),t;if(i===n)return Lb(s),e;i=i.sibling}throw Error(ce(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?t:e}function vT(t){return t=F4(t),t!==null?xT(t):null}function xT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xT(t);if(e!==null)return e;t=t.sibling}return null}var wT=cn.unstable_scheduleCallback,Fb=cn.unstable_cancelCallback,V4=cn.unstable_shouldYield,B4=cn.unstable_requestPaint,Ot=cn.unstable_now,U4=cn.unstable_getCurrentPriorityLevel,Hv=cn.unstable_ImmediatePriority,bT=cn.unstable_UserBlockingPriority,Kf=cn.unstable_NormalPriority,q4=cn.unstable_LowPriority,ET=cn.unstable_IdlePriority,Km=null,cs=null;function G4(t){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Km,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:H4,$4=Math.log,z4=Math.LN2;function H4(t){return t>>>=0,t===0?32:31-($4(t)/z4|0)|0}var kh=64,Mh=4194304;function Zc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jf(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Zc(l):(i&=a,i!==0&&(n=Zc(i)))}else a=r&~s,a!==0?n=Zc(a):i!==0&&(n=Zc(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-$n(e),s=1<<r,n|=t[r],e&=~s;return n}function W4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q4(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-$n(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=W4(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function $0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function CT(){var t=kh;return kh<<=1,!(kh&4194240)&&(kh=64),t}function Rg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function vd(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=r}function Y4(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-$n(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Wv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-$n(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var ct=0;function NT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TT,Qv,_T,AT,ST,z0=!1,Dh=[],Gi=null,$i=null,zi=null,ku=new Map,Mu=new Map,Si=[],K4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vb(t,e){switch(t){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":ku.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(e.pointerId)}}function Uc(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=wd(e),e!==null&&Qv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function J4(t,e,r,n,s){switch(e){case"focusin":return Gi=Uc(Gi,t,e,r,n,s),!0;case"dragenter":return $i=Uc($i,t,e,r,n,s),!0;case"mouseover":return zi=Uc(zi,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return ku.set(i,Uc(ku.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Mu.set(i,Uc(Mu.get(i)||null,t,e,r,n,s)),!0}return!1}function RT(t){var e=zo(t.target);if(e!==null){var r=Ea(e);if(r!==null){if(e=r.tag,e===13){if(e=yT(r),e!==null){t.blockedOn=e,ST(t.priority,function(){_T(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ff(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=H0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);B0=n,r.target.dispatchEvent(n),B0=null}else return e=wd(r),e!==null&&Qv(e),t.blockedOn=r,!1;e.shift()}return!0}function Bb(t,e,r){ff(t)&&r.delete(e)}function X4(){z0=!1,Gi!==null&&ff(Gi)&&(Gi=null),$i!==null&&ff($i)&&($i=null),zi!==null&&ff(zi)&&(zi=null),ku.forEach(Bb),Mu.forEach(Bb)}function qc(t,e){t.blockedOn===e&&(t.blockedOn=null,z0||(z0=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,X4)))}function Du(t){function e(s){return qc(s,t)}if(0<Dh.length){qc(Dh[0],t);for(var r=1;r<Dh.length;r++){var n=Dh[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Gi!==null&&qc(Gi,t),$i!==null&&qc($i,t),zi!==null&&qc(zi,t),ku.forEach(e),Mu.forEach(e),r=0;r<Si.length;r++)n=Si[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Si.length&&(r=Si[0],r.blockedOn===null);)RT(r),r.blockedOn===null&&Si.shift()}var bl=ii.ReactCurrentBatchConfig,Xf=!0;function Z4(t,e,r,n){var s=ct,i=bl.transition;bl.transition=null;try{ct=1,Yv(t,e,r,n)}finally{ct=s,bl.transition=i}}function eM(t,e,r,n){var s=ct,i=bl.transition;bl.transition=null;try{ct=4,Yv(t,e,r,n)}finally{ct=s,bl.transition=i}}function Yv(t,e,r,n){if(Xf){var s=H0(t,e,r,n);if(s===null)Vg(t,e,n,Zf,r),Vb(t,n);else if(J4(s,t,e,r,n))n.stopPropagation();else if(Vb(t,n),e&4&&-1<K4.indexOf(t)){for(;s!==null;){var i=wd(s);if(i!==null&&TT(i),i=H0(t,e,r,n),i===null&&Vg(t,e,n,Zf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Vg(t,e,n,null,r)}}var Zf=null;function H0(t,e,r,n){if(Zf=null,t=zv(n),t=zo(t),t!==null)if(e=Ea(t),e===null)t=null;else if(r=e.tag,r===13){if(t=yT(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zf=t,null}function IT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U4()){case Hv:return 1;case bT:return 4;case Kf:case q4:return 16;case ET:return 536870912;default:return 16}default:return 16}}var Vi=null,Kv=null,mf=null;function jT(){if(mf)return mf;var t,e=Kv,r=e.length,n,s="value"in Vi?Vi.value:Vi.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return mf=s.slice(t,1<n?1-n:void 0)}function pf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oh(){return!0}function Ub(){return!1}function dn(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oh:Ub,this.isPropagationStopped=Ub,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Oh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Oh)},persist:function(){},isPersistent:Oh}),e}var ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jv=dn(ac),xd=St({},ac,{view:0,detail:0}),tM=dn(xd),Ig,jg,Gc,Jm=St({},xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gc&&(Gc&&t.type==="mousemove"?(Ig=t.screenX-Gc.screenX,jg=t.screenY-Gc.screenY):jg=Ig=0,Gc=t),Ig)},movementY:function(t){return"movementY"in t?t.movementY:jg}}),qb=dn(Jm),rM=St({},Jm,{dataTransfer:0}),nM=dn(rM),sM=St({},xd,{relatedTarget:0}),Pg=dn(sM),iM=St({},ac,{animationName:0,elapsedTime:0,pseudoElement:0}),oM=dn(iM),aM=St({},ac,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lM=dn(aM),cM=St({},ac,{data:0}),Gb=dn(cM),uM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hM[t])?!!e[t]:!1}function Xv(){return fM}var mM=St({},xd,{key:function(t){if(t.key){var e=uM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xv,charCode:function(t){return t.type==="keypress"?pf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pM=dn(mM),gM=St({},Jm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$b=dn(gM),yM=St({},xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xv}),vM=dn(yM),xM=St({},ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),wM=dn(xM),bM=St({},Jm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EM=dn(bM),CM=[9,13,27,32],Zv=Qs&&"CompositionEvent"in window,mu=null;Qs&&"documentMode"in document&&(mu=document.documentMode);var NM=Qs&&"TextEvent"in window&&!mu,PT=Qs&&(!Zv||mu&&8<mu&&11>=mu),zb=" ",Hb=!1;function kT(t,e){switch(t){case"keyup":return CM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ol=!1;function TM(t,e){switch(t){case"compositionend":return MT(e);case"keypress":return e.which!==32?null:(Hb=!0,zb);case"textInput":return t=e.data,t===zb&&Hb?null:t;default:return null}}function _M(t,e){if(ol)return t==="compositionend"||!Zv&&kT(t,e)?(t=jT(),mf=Kv=Vi=null,ol=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PT&&e.locale!=="ko"?null:e.data;default:return null}}var AM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AM[t.type]:e==="textarea"}function DT(t,e,r,n){hT(n),e=em(e,"onChange"),0<e.length&&(r=new Jv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var pu=null,Ou=null;function SM(t){HT(t,0)}function Xm(t){var e=cl(t);if(iT(e))return t}function RM(t,e){if(t==="change")return e}var OT=!1;if(Qs){var kg;if(Qs){var Mg="oninput"in document;if(!Mg){var Qb=document.createElement("div");Qb.setAttribute("oninput","return;"),Mg=typeof Qb.oninput=="function"}kg=Mg}else kg=!1;OT=kg&&(!document.documentMode||9<document.documentMode)}function Yb(){pu&&(pu.detachEvent("onpropertychange",LT),Ou=pu=null)}function LT(t){if(t.propertyName==="value"&&Xm(Ou)){var e=[];DT(e,Ou,t,zv(t)),gT(SM,e)}}function IM(t,e,r){t==="focusin"?(Yb(),pu=e,Ou=r,pu.attachEvent("onpropertychange",LT)):t==="focusout"&&Yb()}function jM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xm(Ou)}function PM(t,e){if(t==="click")return Xm(e)}function kM(t,e){if(t==="input"||t==="change")return Xm(e)}function MM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:MM;function Lu(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!S0.call(e,s)||!Wn(t[s],e[s]))return!1}return!0}function Kb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jb(t,e){var r=Kb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kb(r)}}function FT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VT(){for(var t=window,e=Wf();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Wf(t.document)}return e}function ex(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DM(t){var e=VT(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&FT(r.ownerDocument.documentElement,r)){if(n!==null&&ex(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Jb(r,i);var a=Jb(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OM=Qs&&"documentMode"in document&&11>=document.documentMode,al=null,W0=null,gu=null,Q0=!1;function Xb(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Q0||al==null||al!==Wf(n)||(n=al,"selectionStart"in n&&ex(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),gu&&Lu(gu,n)||(gu=n,n=em(W0,"onSelect"),0<n.length&&(e=new Jv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=al)))}function Lh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ll={animationend:Lh("Animation","AnimationEnd"),animationiteration:Lh("Animation","AnimationIteration"),animationstart:Lh("Animation","AnimationStart"),transitionend:Lh("Transition","TransitionEnd")},Dg={},BT={};Qs&&(BT=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function Zm(t){if(Dg[t])return Dg[t];if(!ll[t])return t;var e=ll[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in BT)return Dg[t]=e[r];return t}var UT=Zm("animationend"),qT=Zm("animationiteration"),GT=Zm("animationstart"),$T=Zm("transitionend"),zT=new Map,Zb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(t,e){zT.set(t,e),ba(e,[t])}for(var Og=0;Og<Zb.length;Og++){var Lg=Zb[Og],LM=Lg.toLowerCase(),FM=Lg[0].toUpperCase()+Lg.slice(1);xo(LM,"on"+FM)}xo(UT,"onAnimationEnd");xo(qT,"onAnimationIteration");xo(GT,"onAnimationStart");xo("dblclick","onDoubleClick");xo("focusin","onFocus");xo("focusout","onBlur");xo($T,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VM=new Set("cancel close invalid load scroll toggle".split(" ").concat(eu));function e1(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,L4(n,e,void 0,t),t.currentTarget=null}function HT(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;e1(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;e1(s,l,u),i=c}}}if(Yf)throw t=G0,Yf=!1,G0=null,t}function vt(t,e){var r=e[Z0];r===void 0&&(r=e[Z0]=new Set);var n=t+"__bubble";r.has(n)||(WT(e,t,2,!1),r.add(n))}function Fg(t,e,r){var n=0;e&&(n|=4),WT(r,t,n,e)}var Fh="_reactListening"+Math.random().toString(36).slice(2);function Fu(t){if(!t[Fh]){t[Fh]=!0,eT.forEach(function(r){r!=="selectionchange"&&(VM.has(r)||Fg(r,!1,t),Fg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fh]||(e[Fh]=!0,Fg("selectionchange",!1,e))}}function WT(t,e,r,n){switch(IT(e)){case 1:var s=Z4;break;case 4:s=eM;break;default:s=Yv}r=s.bind(null,e,r,t),s=void 0,!q0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Vg(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=zo(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}gT(function(){var u=i,d=zv(r),f=[];e:{var m=zT.get(t);if(m!==void 0){var p=Jv,w=t;switch(t){case"keypress":if(pf(r)===0)break e;case"keydown":case"keyup":p=pM;break;case"focusin":w="focus",p=Pg;break;case"focusout":w="blur",p=Pg;break;case"beforeblur":case"afterblur":p=Pg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=qb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=nM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=vM;break;case UT:case qT:case GT:p=oM;break;case $T:p=wM;break;case"scroll":p=tM;break;case"wheel":p=EM;break;case"copy":case"cut":case"paste":p=lM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=$b}var y=(e&4)!==0,b=!y&&t==="scroll",N=y?m!==null?m+"Capture":null:m;y=[];for(var x=u,E;x!==null;){E=x;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,N!==null&&(R=Pu(x,N),R!=null&&y.push(Vu(x,R,E)))),b)break;x=x.return}0<y.length&&(m=new p(m,w,null,r,d),f.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&r!==B0&&(w=r.relatedTarget||r.fromElement)&&(zo(w)||w[Ys]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(w=r.relatedTarget||r.toElement,p=u,w=w?zo(w):null,w!==null&&(b=Ea(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=u),p!==w)){if(y=qb,R="onMouseLeave",N="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=$b,R="onPointerLeave",N="onPointerEnter",x="pointer"),b=p==null?m:cl(p),E=w==null?m:cl(w),m=new y(R,x+"leave",p,r,d),m.target=b,m.relatedTarget=E,R=null,zo(d)===u&&(y=new y(N,x+"enter",w,r,d),y.target=E,y.relatedTarget=b,R=y),b=R,p&&w)t:{for(y=p,N=w,x=0,E=y;E;E=Ka(E))x++;for(E=0,R=N;R;R=Ka(R))E++;for(;0<x-E;)y=Ka(y),x--;for(;0<E-x;)N=Ka(N),E--;for(;x--;){if(y===N||N!==null&&y===N.alternate)break t;y=Ka(y),N=Ka(N)}y=null}else y=null;p!==null&&t1(f,m,p,y,!1),w!==null&&b!==null&&t1(f,b,w,y,!0)}}e:{if(m=u?cl(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var I=RM;else if(Wb(m))if(OT)I=kM;else{I=jM;var V=IM}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=PM);if(I&&(I=I(t,u))){DT(f,I,r,d);break e}V&&V(t,m,u),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&D0(m,"number",m.value)}switch(V=u?cl(u):window,t){case"focusin":(Wb(V)||V.contentEditable==="true")&&(al=V,W0=u,gu=null);break;case"focusout":gu=W0=al=null;break;case"mousedown":Q0=!0;break;case"contextmenu":case"mouseup":case"dragend":Q0=!1,Xb(f,r,d);break;case"selectionchange":if(OM)break;case"keydown":case"keyup":Xb(f,r,d)}var j;if(Zv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ol?kT(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(PT&&r.locale!=="ko"&&(ol||T!=="onCompositionStart"?T==="onCompositionEnd"&&ol&&(j=jT()):(Vi=d,Kv="value"in Vi?Vi.value:Vi.textContent,ol=!0)),V=em(u,T),0<V.length&&(T=new Gb(T,t,null,r,d),f.push({event:T,listeners:V}),j?T.data=j:(j=MT(r),j!==null&&(T.data=j)))),(j=NM?TM(t,r):_M(t,r))&&(u=em(u,"onBeforeInput"),0<u.length&&(d=new Gb("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}HT(f,e)})}function Vu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function em(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pu(t,r),i!=null&&n.unshift(Vu(t,i,s)),i=Pu(t,e),i!=null&&n.push(Vu(t,i,s))),t=t.return}return n}function Ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t1(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Pu(r,i),c!=null&&a.unshift(Vu(r,c,l))):s||(c=Pu(r,i),c!=null&&a.push(Vu(r,c,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var BM=/\r\n?/g,UM=/\u0000|\uFFFD/g;function r1(t){return(typeof t=="string"?t:""+t).replace(BM,`
`).replace(UM,"")}function Vh(t,e,r){if(e=r1(e),r1(t)!==e&&r)throw Error(ce(425))}function tm(){}var Y0=null,K0=null;function J0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var X0=typeof setTimeout=="function"?setTimeout:void 0,qM=typeof clearTimeout=="function"?clearTimeout:void 0,n1=typeof Promise=="function"?Promise:void 0,GM=typeof queueMicrotask=="function"?queueMicrotask:typeof n1<"u"?function(t){return n1.resolve(null).then(t).catch($M)}:X0;function $M(t){setTimeout(function(){throw t})}function Bg(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Du(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Du(e)}function Hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var lc=Math.random().toString(36).slice(2),as="__reactFiber$"+lc,Bu="__reactProps$"+lc,Ys="__reactContainer$"+lc,Z0="__reactEvents$"+lc,zM="__reactListeners$"+lc,HM="__reactHandles$"+lc;function zo(t){var e=t[as];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ys]||r[as]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=s1(t);t!==null;){if(r=t[as])return r;t=s1(t)}return e}t=r,r=t.parentNode}return null}function wd(t){return t=t[as]||t[Ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function ep(t){return t[Bu]||null}var ey=[],ul=-1;function wo(t){return{current:t}}function xt(t){0>ul||(t.current=ey[ul],ey[ul]=null,ul--)}function pt(t,e){ul++,ey[ul]=t.current,t.current=e}var so={},Cr=wo(so),Hr=wo(!1),ia=so;function Gl(t,e){var r=t.type.contextTypes;if(!r)return so;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Wr(t){return t=t.childContextTypes,t!=null}function rm(){xt(Hr),xt(Cr)}function i1(t,e,r){if(Cr.current!==so)throw Error(ce(168));pt(Cr,e),pt(Hr,r)}function QT(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ce(108,I4(t)||"Unknown",s));return St({},r,n)}function nm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||so,ia=Cr.current,pt(Cr,t),pt(Hr,Hr.current),!0}function o1(t,e,r){var n=t.stateNode;if(!n)throw Error(ce(169));r?(t=QT(t,e,ia),n.__reactInternalMemoizedMergedChildContext=t,xt(Hr),xt(Cr),pt(Cr,t)):xt(Hr),pt(Hr,r)}var Vs=null,tp=!1,Ug=!1;function YT(t){Vs===null?Vs=[t]:Vs.push(t)}function WM(t){tp=!0,YT(t)}function bo(){if(!Ug&&Vs!==null){Ug=!0;var t=0,e=ct;try{var r=Vs;for(ct=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Vs=null,tp=!1}catch(s){throw Vs!==null&&(Vs=Vs.slice(t+1)),wT(Hv,bo),s}finally{ct=e,Ug=!1}}return null}var dl=[],hl=0,sm=null,im=0,yn=[],vn=0,oa=null,Bs=1,Us="";function qo(t,e){dl[hl++]=im,dl[hl++]=sm,sm=t,im=e}function KT(t,e,r){yn[vn++]=Bs,yn[vn++]=Us,yn[vn++]=oa,oa=t;var n=Bs;t=Us;var s=32-$n(n)-1;n&=~(1<<s),r+=1;var i=32-$n(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Bs=1<<32-$n(e)+s|r<<s|n,Us=i+t}else Bs=1<<i|r<<s|n,Us=t}function tx(t){t.return!==null&&(qo(t,1),KT(t,1,0))}function rx(t){for(;t===sm;)sm=dl[--hl],dl[hl]=null,im=dl[--hl],dl[hl]=null;for(;t===oa;)oa=yn[--vn],yn[vn]=null,Us=yn[--vn],yn[vn]=null,Bs=yn[--vn],yn[vn]=null}var on=null,nn=null,Tt=!1,Un=null;function JT(t,e){var r=bn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function a1(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,nn=Hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=oa!==null?{id:Bs,overflow:Us}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=bn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,on=t,nn=null,!0):!1;default:return!1}}function ty(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ry(t){if(Tt){var e=nn;if(e){var r=e;if(!a1(t,e)){if(ty(t))throw Error(ce(418));e=Hi(r.nextSibling);var n=on;e&&a1(t,e)?JT(n,r):(t.flags=t.flags&-4097|2,Tt=!1,on=t)}}else{if(ty(t))throw Error(ce(418));t.flags=t.flags&-4097|2,Tt=!1,on=t}}}function l1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function Bh(t){if(t!==on)return!1;if(!Tt)return l1(t),Tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!J0(t.type,t.memoizedProps)),e&&(e=nn)){if(ty(t))throw XT(),Error(ce(418));for(;e;)JT(t,e),e=Hi(e.nextSibling)}if(l1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){nn=Hi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=on?Hi(t.stateNode.nextSibling):null;return!0}function XT(){for(var t=nn;t;)t=Hi(t.nextSibling)}function $l(){nn=on=null,Tt=!1}function nx(t){Un===null?Un=[t]:Un.push(t)}var QM=ii.ReactCurrentBatchConfig;function $c(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,t))}return t}function Uh(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c1(t){var e=t._init;return e(t._payload)}function ZT(t){function e(N,x){if(t){var E=N.deletions;E===null?(N.deletions=[x],N.flags|=16):E.push(x)}}function r(N,x){if(!t)return null;for(;x!==null;)e(N,x),x=x.sibling;return null}function n(N,x){for(N=new Map;x!==null;)x.key!==null?N.set(x.key,x):N.set(x.index,x),x=x.sibling;return N}function s(N,x){return N=Ki(N,x),N.index=0,N.sibling=null,N}function i(N,x,E){return N.index=E,t?(E=N.alternate,E!==null?(E=E.index,E<x?(N.flags|=2,x):E):(N.flags|=2,x)):(N.flags|=1048576,x)}function a(N){return t&&N.alternate===null&&(N.flags|=2),N}function l(N,x,E,R){return x===null||x.tag!==6?(x=Qg(E,N.mode,R),x.return=N,x):(x=s(x,E),x.return=N,x)}function c(N,x,E,R){var I=E.type;return I===il?d(N,x,E.props.children,R,E.key):x!==null&&(x.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ti&&c1(I)===x.type)?(R=s(x,E.props),R.ref=$c(N,x,E),R.return=N,R):(R=Ef(E.type,E.key,E.props,null,N.mode,R),R.ref=$c(N,x,E),R.return=N,R)}function u(N,x,E,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=Yg(E,N.mode,R),x.return=N,x):(x=s(x,E.children||[]),x.return=N,x)}function d(N,x,E,R,I){return x===null||x.tag!==7?(x=ea(E,N.mode,R,I),x.return=N,x):(x=s(x,E),x.return=N,x)}function f(N,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Qg(""+x,N.mode,E),x.return=N,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ih:return E=Ef(x.type,x.key,x.props,null,N.mode,E),E.ref=$c(N,null,x),E.return=N,E;case sl:return x=Yg(x,N.mode,E),x.return=N,x;case Ti:var R=x._init;return f(N,R(x._payload),E)}if(Xc(x)||Vc(x))return x=ea(x,N.mode,E,null),x.return=N,x;Uh(N,x)}return null}function m(N,x,E,R){var I=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return I!==null?null:l(N,x,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ih:return E.key===I?c(N,x,E,R):null;case sl:return E.key===I?u(N,x,E,R):null;case Ti:return I=E._init,m(N,x,I(E._payload),R)}if(Xc(E)||Vc(E))return I!==null?null:d(N,x,E,R,null);Uh(N,E)}return null}function p(N,x,E,R,I){if(typeof R=="string"&&R!==""||typeof R=="number")return N=N.get(E)||null,l(x,N,""+R,I);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ih:return N=N.get(R.key===null?E:R.key)||null,c(x,N,R,I);case sl:return N=N.get(R.key===null?E:R.key)||null,u(x,N,R,I);case Ti:var V=R._init;return p(N,x,E,V(R._payload),I)}if(Xc(R)||Vc(R))return N=N.get(E)||null,d(x,N,R,I,null);Uh(x,R)}return null}function w(N,x,E,R){for(var I=null,V=null,j=x,T=x=0,S=null;j!==null&&T<E.length;T++){j.index>T?(S=j,j=null):S=j.sibling;var k=m(N,j,E[T],R);if(k===null){j===null&&(j=S);break}t&&j&&k.alternate===null&&e(N,j),x=i(k,x,T),V===null?I=k:V.sibling=k,V=k,j=S}if(T===E.length)return r(N,j),Tt&&qo(N,T),I;if(j===null){for(;T<E.length;T++)j=f(N,E[T],R),j!==null&&(x=i(j,x,T),V===null?I=j:V.sibling=j,V=j);return Tt&&qo(N,T),I}for(j=n(N,j);T<E.length;T++)S=p(j,N,T,E[T],R),S!==null&&(t&&S.alternate!==null&&j.delete(S.key===null?T:S.key),x=i(S,x,T),V===null?I=S:V.sibling=S,V=S);return t&&j.forEach(function(L){return e(N,L)}),Tt&&qo(N,T),I}function y(N,x,E,R){var I=Vc(E);if(typeof I!="function")throw Error(ce(150));if(E=I.call(E),E==null)throw Error(ce(151));for(var V=I=null,j=x,T=x=0,S=null,k=E.next();j!==null&&!k.done;T++,k=E.next()){j.index>T?(S=j,j=null):S=j.sibling;var L=m(N,j,k.value,R);if(L===null){j===null&&(j=S);break}t&&j&&L.alternate===null&&e(N,j),x=i(L,x,T),V===null?I=L:V.sibling=L,V=L,j=S}if(k.done)return r(N,j),Tt&&qo(N,T),I;if(j===null){for(;!k.done;T++,k=E.next())k=f(N,k.value,R),k!==null&&(x=i(k,x,T),V===null?I=k:V.sibling=k,V=k);return Tt&&qo(N,T),I}for(j=n(N,j);!k.done;T++,k=E.next())k=p(j,N,T,k.value,R),k!==null&&(t&&k.alternate!==null&&j.delete(k.key===null?T:k.key),x=i(k,x,T),V===null?I=k:V.sibling=k,V=k);return t&&j.forEach(function(D){return e(N,D)}),Tt&&qo(N,T),I}function b(N,x,E,R){if(typeof E=="object"&&E!==null&&E.type===il&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ih:e:{for(var I=E.key,V=x;V!==null;){if(V.key===I){if(I=E.type,I===il){if(V.tag===7){r(N,V.sibling),x=s(V,E.props.children),x.return=N,N=x;break e}}else if(V.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ti&&c1(I)===V.type){r(N,V.sibling),x=s(V,E.props),x.ref=$c(N,V,E),x.return=N,N=x;break e}r(N,V);break}else e(N,V);V=V.sibling}E.type===il?(x=ea(E.props.children,N.mode,R,E.key),x.return=N,N=x):(R=Ef(E.type,E.key,E.props,null,N.mode,R),R.ref=$c(N,x,E),R.return=N,N=R)}return a(N);case sl:e:{for(V=E.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){r(N,x.sibling),x=s(x,E.children||[]),x.return=N,N=x;break e}else{r(N,x);break}else e(N,x);x=x.sibling}x=Yg(E,N.mode,R),x.return=N,N=x}return a(N);case Ti:return V=E._init,b(N,x,V(E._payload),R)}if(Xc(E))return w(N,x,E,R);if(Vc(E))return y(N,x,E,R);Uh(N,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,x!==null&&x.tag===6?(r(N,x.sibling),x=s(x,E),x.return=N,N=x):(r(N,x),x=Qg(E,N.mode,R),x.return=N,N=x),a(N)):r(N,x)}return b}var zl=ZT(!0),e_=ZT(!1),om=wo(null),am=null,fl=null,sx=null;function ix(){sx=fl=am=null}function ox(t){var e=om.current;xt(om),t._currentValue=e}function ny(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function El(t,e){am=t,sx=fl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($r=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(sx!==t)if(t={context:t,memoizedValue:e,next:null},fl===null){if(am===null)throw Error(ce(308));fl=t,am.dependencies={lanes:0,firstContext:t}}else fl=fl.next=t;return e}var Ho=null;function ax(t){Ho===null?Ho=[t]:Ho.push(t)}function t_(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,ax(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ks(t,n)}function Ks(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var _i=!1;function lx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wi(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ze&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ks(t,r)}return s=n.interleaved,s===null?(e.next=e,ax(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ks(t,r)}function gf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wv(t,r)}}function u1(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function lm(t,e,r,n){var s=t.updateQueue;_i=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,y=l;switch(m=e,p=r,y.tag){case 1:if(w=y.payload,typeof w=="function"){f=w.call(p,f,m);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,m=typeof w=="function"?w.call(p,f,m):w,m==null)break e;f=St({},f,m);break e;case 2:_i=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);la|=a,t.lanes=a,t.memoizedState=f}}function d1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ce(191,s));s.call(n)}}}var bd={},us=wo(bd),Uu=wo(bd),qu=wo(bd);function Wo(t){if(t===bd)throw Error(ce(174));return t}function cx(t,e){switch(pt(qu,e),pt(Uu,t),pt(us,bd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:L0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=L0(e,t)}xt(us),pt(us,e)}function Hl(){xt(us),xt(Uu),xt(qu)}function n_(t){Wo(qu.current);var e=Wo(us.current),r=L0(e,t.type);e!==r&&(pt(Uu,t),pt(us,r))}function ux(t){Uu.current===t&&(xt(us),xt(Uu))}var _t=wo(0);function cm(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qg=[];function dx(){for(var t=0;t<qg.length;t++)qg[t]._workInProgressVersionPrimary=null;qg.length=0}var yf=ii.ReactCurrentDispatcher,Gg=ii.ReactCurrentBatchConfig,aa=0,At=null,Qt=null,rr=null,um=!1,yu=!1,Gu=0,YM=0;function gr(){throw Error(ce(321))}function hx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Wn(t[r],e[r]))return!1;return!0}function fx(t,e,r,n,s,i){if(aa=i,At=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yf.current=t===null||t.memoizedState===null?ZM:eD,t=r(n,s),yu){i=0;do{if(yu=!1,Gu=0,25<=i)throw Error(ce(301));i+=1,rr=Qt=null,e.updateQueue=null,yf.current=tD,t=r(n,s)}while(yu)}if(yf.current=dm,e=Qt!==null&&Qt.next!==null,aa=0,rr=Qt=At=null,um=!1,e)throw Error(ce(300));return t}function mx(){var t=Gu!==0;return Gu=0,t}function rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?At.memoizedState=rr=t:rr=rr.next=t,rr}function _n(){if(Qt===null){var t=At.alternate;t=t!==null?t.memoizedState:null}else t=Qt.next;var e=rr===null?At.memoizedState:rr.next;if(e!==null)rr=e,Qt=t;else{if(t===null)throw Error(ce(310));Qt=t,t={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},rr===null?At.memoizedState=rr=t:rr=rr.next=t}return rr}function $u(t,e){return typeof e=="function"?e(t):e}function $g(t){var e=_n(),r=e.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=t;var n=Qt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((aa&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,At.lanes|=d,la|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,Wn(n,e.memoizedState)||($r=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,At.lanes|=i,la|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function zg(t){var e=_n(),r=e.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Wn(i,e.memoizedState)||($r=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function s_(){}function i_(t,e){var r=At,n=_n(),s=e(),i=!Wn(n.memoizedState,s);if(i&&(n.memoizedState=s,$r=!0),n=n.queue,px(l_.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||rr!==null&&rr.memoizedState.tag&1){if(r.flags|=2048,zu(9,a_.bind(null,r,n,s,e),void 0,null),sr===null)throw Error(ce(349));aa&30||o_(r,e,s)}return s}function o_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function a_(t,e,r,n){e.value=r,e.getSnapshot=n,c_(e)&&u_(t)}function l_(t,e,r){return r(function(){c_(e)&&u_(t)})}function c_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Wn(t,r)}catch{return!0}}function u_(t){var e=Ks(t,1);e!==null&&zn(e,t,1,-1)}function h1(t){var e=rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:t},e.queue=t,t=t.dispatch=XM.bind(null,At,t),[e.memoizedState,t]}function zu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function d_(){return _n().memoizedState}function vf(t,e,r,n){var s=rs();At.flags|=t,s.memoizedState=zu(1|e,r,void 0,n===void 0?null:n)}function rp(t,e,r,n){var s=_n();n=n===void 0?null:n;var i=void 0;if(Qt!==null){var a=Qt.memoizedState;if(i=a.destroy,n!==null&&hx(n,a.deps)){s.memoizedState=zu(e,r,i,n);return}}At.flags|=t,s.memoizedState=zu(1|e,r,i,n)}function f1(t,e){return vf(8390656,8,t,e)}function px(t,e){return rp(2048,8,t,e)}function h_(t,e){return rp(4,2,t,e)}function f_(t,e){return rp(4,4,t,e)}function m_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p_(t,e,r){return r=r!=null?r.concat([t]):null,rp(4,4,m_.bind(null,e,t),r)}function gx(){}function g_(t,e){var r=_n();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&hx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function y_(t,e){var r=_n();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&hx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function v_(t,e,r){return aa&21?(Wn(r,e)||(r=CT(),At.lanes|=r,la|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$r=!0),t.memoizedState=r)}function KM(t,e){var r=ct;ct=r!==0&&4>r?r:4,t(!0);var n=Gg.transition;Gg.transition={};try{t(!1),e()}finally{ct=r,Gg.transition=n}}function x_(){return _n().memoizedState}function JM(t,e,r){var n=Yi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},w_(t))b_(e,r);else if(r=t_(t,e,r,n),r!==null){var s=Or();zn(r,t,n,s),E_(r,e,n)}}function XM(t,e,r){var n=Yi(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(w_(t))b_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Wn(l,a)){var c=e.interleaved;c===null?(s.next=s,ax(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=t_(t,e,s,n),r!==null&&(s=Or(),zn(r,t,n,s),E_(r,e,n))}}function w_(t){var e=t.alternate;return t===At||e!==null&&e===At}function b_(t,e){yu=um=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function E_(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wv(t,r)}}var dm={readContext:Tn,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},ZM={readContext:Tn,useCallback:function(t,e){return rs().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:f1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,vf(4194308,4,m_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return vf(4194308,4,t,e)},useInsertionEffect:function(t,e){return vf(4,2,t,e)},useMemo:function(t,e){var r=rs();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=rs();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=JM.bind(null,At,t),[n.memoizedState,t]},useRef:function(t){var e=rs();return t={current:t},e.memoizedState=t},useState:h1,useDebugValue:gx,useDeferredValue:function(t){return rs().memoizedState=t},useTransition:function(){var t=h1(!1),e=t[0];return t=KM.bind(null,t[1]),rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=At,s=rs();if(Tt){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=e(),sr===null)throw Error(ce(349));aa&30||o_(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,f1(l_.bind(null,n,i,t),[t]),n.flags|=2048,zu(9,a_.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=rs(),e=sr.identifierPrefix;if(Tt){var r=Us,n=Bs;r=(n&~(1<<32-$n(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=YM++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eD={readContext:Tn,useCallback:g_,useContext:Tn,useEffect:px,useImperativeHandle:p_,useInsertionEffect:h_,useLayoutEffect:f_,useMemo:y_,useReducer:$g,useRef:d_,useState:function(){return $g($u)},useDebugValue:gx,useDeferredValue:function(t){var e=_n();return v_(e,Qt.memoizedState,t)},useTransition:function(){var t=$g($u)[0],e=_n().memoizedState;return[t,e]},useMutableSource:s_,useSyncExternalStore:i_,useId:x_,unstable_isNewReconciler:!1},tD={readContext:Tn,useCallback:g_,useContext:Tn,useEffect:px,useImperativeHandle:p_,useInsertionEffect:h_,useLayoutEffect:f_,useMemo:y_,useReducer:zg,useRef:d_,useState:function(){return zg($u)},useDebugValue:gx,useDeferredValue:function(t){var e=_n();return Qt===null?e.memoizedState=t:v_(e,Qt.memoizedState,t)},useTransition:function(){var t=zg($u)[0],e=_n().memoizedState;return[t,e]},useMutableSource:s_,useSyncExternalStore:i_,useId:x_,unstable_isNewReconciler:!1};function Ln(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function sy(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:St({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var np={isMounted:function(t){return(t=t._reactInternals)?Ea(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Or(),s=Yi(t),i=$s(n,s);i.payload=e,r!=null&&(i.callback=r),e=Wi(t,i,s),e!==null&&(zn(e,t,s,n),gf(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Or(),s=Yi(t),i=$s(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Wi(t,i,s),e!==null&&(zn(e,t,s,n),gf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Or(),n=Yi(t),s=$s(r,n);s.tag=2,e!=null&&(s.callback=e),e=Wi(t,s,n),e!==null&&(zn(e,t,n,r),gf(e,t,n))}};function m1(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Lu(r,n)||!Lu(s,i):!0}function C_(t,e,r){var n=!1,s=so,i=e.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(s=Wr(e)?ia:Cr.current,n=e.contextTypes,i=(n=n!=null)?Gl(t,s):so),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=np,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function p1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&np.enqueueReplaceState(e,e.state,null)}function iy(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},lx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Tn(i):(i=Wr(e)?ia:Cr.current,s.context=Gl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sy(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&np.enqueueReplaceState(s,s.state,null),lm(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wl(t,e){try{var r="",n=e;do r+=R4(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function oy(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rD=typeof WeakMap=="function"?WeakMap:Map;function N_(t,e,r){r=$s(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){fm||(fm=!0,gy=n),oy(t,e)},r}function T_(t,e,r){r=$s(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){oy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){oy(t,e),typeof n!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function g1(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rD;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=gD.bind(null,t,e,r),e.then(t,t))}function y1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v1(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=$s(-1,1),e.tag=2,Wi(r,e,1))),r.lanes|=1),t)}var nD=ii.ReactCurrentOwner,$r=!1;function kr(t,e,r,n){e.child=t===null?e_(e,null,r,n):zl(e,t.child,r,n)}function x1(t,e,r,n,s){r=r.render;var i=e.ref;return El(e,s),n=fx(t,e,r,n,i,s),r=mx(),t!==null&&!$r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Js(t,e,s)):(Tt&&r&&tx(e),e.flags|=1,kr(t,e,n,s),e.child)}function w1(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Nx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,__(t,e,i,n,s)):(t=Ef(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Lu,r(a,n)&&t.ref===e.ref)return Js(t,e,s)}return e.flags|=1,t=Ki(i,n),t.ref=e.ref,t.return=e,e.child=t}function __(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Lu(i,n)&&t.ref===e.ref)if($r=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&($r=!0);else return e.lanes=t.lanes,Js(t,e,s)}return ay(t,e,r,n,s)}function A_(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(pl,tn),tn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(pl,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,pt(pl,tn),tn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,pt(pl,tn),tn|=n;return kr(t,e,s,r),e.child}function S_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ay(t,e,r,n,s){var i=Wr(r)?ia:Cr.current;return i=Gl(e,i),El(e,s),r=fx(t,e,r,n,i,s),n=mx(),t!==null&&!$r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Js(t,e,s)):(Tt&&n&&tx(e),e.flags|=1,kr(t,e,r,s),e.child)}function b1(t,e,r,n,s){if(Wr(r)){var i=!0;nm(e)}else i=!1;if(El(e,s),e.stateNode===null)xf(t,e),C_(e,r,n),iy(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Tn(u):(u=Wr(r)?ia:Cr.current,u=Gl(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&p1(e,a,n,u),_i=!1;var m=e.memoizedState;a.state=m,lm(e,n,a,s),c=e.memoizedState,l!==n||m!==c||Hr.current||_i?(typeof d=="function"&&(sy(e,r,d,n),c=e.memoizedState),(l=_i||m1(e,r,l,n,m,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,r_(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ln(e.type,l),a.props=u,f=e.pendingProps,m=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Tn(c):(c=Wr(r)?ia:Cr.current,c=Gl(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&p1(e,a,n,c),_i=!1,m=e.memoizedState,a.state=m,lm(e,n,a,s);var w=e.memoizedState;l!==f||m!==w||Hr.current||_i?(typeof p=="function"&&(sy(e,r,p,n),w=e.memoizedState),(u=_i||m1(e,r,u,n,m,w,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,w,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=w),a.props=n,a.state=w,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return ly(t,e,r,n,i,s)}function ly(t,e,r,n,s,i){S_(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&o1(e,r,!1),Js(t,e,i);n=e.stateNode,nD.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=zl(e,t.child,null,i),e.child=zl(e,null,l,i)):kr(t,e,l,i),e.memoizedState=n.state,s&&o1(e,r,!0),e.child}function R_(t){var e=t.stateNode;e.pendingContext?i1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i1(t,e.context,!1),cx(t,e.containerInfo)}function E1(t,e,r,n,s){return $l(),nx(s),e.flags|=256,kr(t,e,r,n),e.child}var cy={dehydrated:null,treeContext:null,retryLane:0};function uy(t){return{baseLanes:t,cachePool:null,transitions:null}}function I_(t,e,r){var n=e.pendingProps,s=_t.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pt(_t,s&1),t===null)return ry(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=op(a,n,0,null),t=ea(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uy(r),e.memoizedState=cy,t):yx(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return sD(t,e,a,n,l,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Ki(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ki(l,i):(i=ea(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?uy(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=cy,n}return i=t.child,t=i.sibling,n=Ki(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function yx(t,e){return e=op({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qh(t,e,r,n){return n!==null&&nx(n),zl(e,t.child,null,r),t=yx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sD(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=Hg(Error(ce(422))),qh(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=op({mode:"visible",children:n.children},s,0,null),i=ea(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&zl(e,t.child,null,a),e.child.memoizedState=uy(a),e.memoizedState=cy,i);if(!(e.mode&1))return qh(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ce(419)),n=Hg(i,n,void 0),qh(t,e,a,n)}if(l=(a&t.childLanes)!==0,$r||l){if(n=sr,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ks(t,s),zn(n,t,s,-1))}return Cx(),n=Hg(Error(ce(421))),qh(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yD.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,nn=Hi(s.nextSibling),on=e,Tt=!0,Un=null,t!==null&&(yn[vn++]=Bs,yn[vn++]=Us,yn[vn++]=oa,Bs=t.id,Us=t.overflow,oa=e),e=yx(e,n.children),e.flags|=4096,e)}function C1(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ny(t.return,e,r)}function Wg(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function j_(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(kr(t,e,n.children,r),n=_t.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&C1(t,r,e);else if(t.tag===19)C1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(pt(_t,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&cm(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Wg(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&cm(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Wg(e,!0,r,null,i);break;case"together":Wg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Js(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),la|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,r=Ki(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ki(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function iD(t,e,r){switch(e.tag){case 3:R_(e),$l();break;case 5:n_(e);break;case 1:Wr(e.type)&&nm(e);break;case 4:cx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;pt(om,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(pt(_t,_t.current&1),e.flags|=128,null):r&e.child.childLanes?I_(t,e,r):(pt(_t,_t.current&1),t=Js(t,e,r),t!==null?t.sibling:null);pt(_t,_t.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return j_(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pt(_t,_t.current),n)break;return null;case 22:case 23:return e.lanes=0,A_(t,e,r)}return Js(t,e,r)}var P_,dy,k_,M_;P_=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};dy=function(){};k_=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Wo(us.current);var i=null;switch(r){case"input":s=k0(t,s),n=k0(t,n),i=[];break;case"select":s=St({},s,{value:void 0}),n=St({},n,{value:void 0}),i=[];break;case"textarea":s=O0(t,s),n=O0(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=tm)}F0(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Iu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Iu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&vt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};M_=function(t,e,r,n){r!==n&&(e.flags|=4)};function zc(t,e){if(!Tt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function yr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function oD(t,e,r){var n=e.pendingProps;switch(rx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(e),null;case 1:return Wr(e.type)&&rm(),yr(e),null;case 3:return n=e.stateNode,Hl(),xt(Hr),xt(Cr),dx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Bh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&(xy(Un),Un=null))),dy(t,e),yr(e),null;case 5:ux(e);var s=Wo(qu.current);if(r=e.type,t!==null&&e.stateNode!=null)k_(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ce(166));return yr(e),null}if(t=Wo(us.current),Bh(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[as]=e,n[Bu]=i,t=(e.mode&1)!==0,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(s=0;s<eu.length;s++)vt(eu[s],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":Pb(n,i),vt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},vt("invalid",n);break;case"textarea":Mb(n,i),vt("invalid",n)}F0(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Vh(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Vh(n.textContent,l,t),s=["children",""+l]):Iu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&vt("scroll",n)}switch(r){case"input":jh(n),kb(n,i,!0);break;case"textarea":jh(n),Db(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=tm)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lT(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[as]=e,t[Bu]=n,P_(t,e,!1,!1),e.stateNode=t;e:{switch(a=V0(r,n),r){case"dialog":vt("cancel",t),vt("close",t),s=n;break;case"iframe":case"object":case"embed":vt("load",t),s=n;break;case"video":case"audio":for(s=0;s<eu.length;s++)vt(eu[s],t);s=n;break;case"source":vt("error",t),s=n;break;case"img":case"image":case"link":vt("error",t),vt("load",t),s=n;break;case"details":vt("toggle",t),s=n;break;case"input":Pb(t,n),s=k0(t,n),vt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=St({},n,{value:void 0}),vt("invalid",t);break;case"textarea":Mb(t,n),s=O0(t,n),vt("invalid",t);break;default:s=n}F0(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?dT(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cT(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ju(t,c):typeof c=="number"&&ju(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Iu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&vt("scroll",t):c!=null&&Uv(t,i,c,a))}switch(r){case"input":jh(t),kb(t,n,!1);break;case"textarea":jh(t),Db(t);break;case"option":n.value!=null&&t.setAttribute("value",""+no(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?vl(t,!!n.multiple,i,!1):n.defaultValue!=null&&vl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=tm)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yr(e),null;case 6:if(t&&e.stateNode!=null)M_(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ce(166));if(r=Wo(qu.current),Wo(us.current),Bh(e)){if(n=e.stateNode,r=e.memoizedProps,n[as]=e,(i=n.nodeValue!==r)&&(t=on,t!==null))switch(t.tag){case 3:Vh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vh(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[as]=e,e.stateNode=n}return yr(e),null;case 13:if(xt(_t),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tt&&nn!==null&&e.mode&1&&!(e.flags&128))XT(),$l(),e.flags|=98560,i=!1;else if(i=Bh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[as]=e}else $l(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yr(e),i=!1}else Un!==null&&(xy(Un),Un=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Yt===0&&(Yt=3):Cx())),e.updateQueue!==null&&(e.flags|=4),yr(e),null);case 4:return Hl(),dy(t,e),t===null&&Fu(e.stateNode.containerInfo),yr(e),null;case 10:return ox(e.type._context),yr(e),null;case 17:return Wr(e.type)&&rm(),yr(e),null;case 19:if(xt(_t),i=e.memoizedState,i===null)return yr(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)zc(i,!1);else{if(Yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=cm(t),a!==null){for(e.flags|=128,zc(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return pt(_t,_t.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ot()>Ql&&(e.flags|=128,n=!0,zc(i,!1),e.lanes=4194304)}else{if(!n)if(t=cm(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),zc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Tt)return yr(e),null}else 2*Ot()-i.renderingStartTime>Ql&&r!==1073741824&&(e.flags|=128,n=!0,zc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ot(),e.sibling=null,r=_t.current,pt(_t,n?r&1|2:r&1),e):(yr(e),null);case 22:case 23:return Ex(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?tn&1073741824&&(yr(e),e.subtreeFlags&6&&(e.flags|=8192)):yr(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function aD(t,e){switch(rx(e),e.tag){case 1:return Wr(e.type)&&rm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hl(),xt(Hr),xt(Cr),dx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ux(e),null;case 13:if(xt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));$l()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(_t),null;case 4:return Hl(),null;case 10:return ox(e.type._context),null;case 22:case 23:return Ex(),null;case 24:return null;default:return null}}var Gh=!1,br=!1,lD=typeof WeakSet=="function"?WeakSet:Set,be=null;function ml(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){kt(t,e,n)}else r.current=null}function hy(t,e,r){try{r()}catch(n){kt(t,e,n)}}var N1=!1;function cD(t,e){if(Y0=Xf,t=VT(),ex(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==i||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===r&&++u===s&&(l=a),m===i&&++d===n&&(c=a),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(K0={focusedElem:t,selectionRange:r},Xf=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,N=e.stateNode,x=N.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ln(e.type,y),b);N.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(R){kt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return w=N1,N1=!1,w}function vu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hy(e,r,i)}s=s.next}while(s!==n)}}function sp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function fy(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function D_(t){var e=t.alternate;e!==null&&(t.alternate=null,D_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[as],delete e[Bu],delete e[Z0],delete e[zM],delete e[HM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function O_(t){return t.tag===5||t.tag===3||t.tag===4}function T1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function my(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=tm));else if(n!==4&&(t=t.child,t!==null))for(my(t,e,r),t=t.sibling;t!==null;)my(t,e,r),t=t.sibling}function py(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(py(t,e,r),t=t.sibling;t!==null;)py(t,e,r),t=t.sibling}var or=null,Bn=!1;function vi(t,e,r){for(r=r.child;r!==null;)L_(t,e,r),r=r.sibling}function L_(t,e,r){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Km,r)}catch{}switch(r.tag){case 5:br||ml(r,e);case 6:var n=or,s=Bn;or=null,vi(t,e,r),or=n,Bn=s,or!==null&&(Bn?(t=or,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):or.removeChild(r.stateNode));break;case 18:or!==null&&(Bn?(t=or,r=r.stateNode,t.nodeType===8?Bg(t.parentNode,r):t.nodeType===1&&Bg(t,r),Du(t)):Bg(or,r.stateNode));break;case 4:n=or,s=Bn,or=r.stateNode.containerInfo,Bn=!0,vi(t,e,r),or=n,Bn=s;break;case 0:case 11:case 14:case 15:if(!br&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&hy(r,e,a),s=s.next}while(s!==n)}vi(t,e,r);break;case 1:if(!br&&(ml(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){kt(r,e,l)}vi(t,e,r);break;case 21:vi(t,e,r);break;case 22:r.mode&1?(br=(n=br)||r.memoizedState!==null,vi(t,e,r),br=n):vi(t,e,r);break;default:vi(t,e,r)}}function _1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lD),e.forEach(function(n){var s=vD.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Dn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:or=l.stateNode,Bn=!1;break e;case 3:or=l.stateNode.containerInfo,Bn=!0;break e;case 4:or=l.stateNode.containerInfo,Bn=!0;break e}l=l.return}if(or===null)throw Error(ce(160));L_(i,a,s),or=null,Bn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){kt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)F_(e,t),e=e.sibling}function F_(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),es(t),n&4){try{vu(3,t,t.return),sp(3,t)}catch(y){kt(t,t.return,y)}try{vu(5,t,t.return)}catch(y){kt(t,t.return,y)}}break;case 1:Dn(e,t),es(t),n&512&&r!==null&&ml(r,r.return);break;case 5:if(Dn(e,t),es(t),n&512&&r!==null&&ml(r,r.return),t.flags&32){var s=t.stateNode;try{ju(s,"")}catch(y){kt(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&oT(s,i),V0(l,a);var u=V0(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?dT(s,f):d==="dangerouslySetInnerHTML"?cT(s,f):d==="children"?ju(s,f):Uv(s,d,f,u)}switch(l){case"input":M0(s,i);break;case"textarea":aT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?vl(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?vl(s,!!i.multiple,i.defaultValue,!0):vl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bu]=i}catch(y){kt(t,t.return,y)}}break;case 6:if(Dn(e,t),es(t),n&4){if(t.stateNode===null)throw Error(ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){kt(t,t.return,y)}}break;case 3:if(Dn(e,t),es(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Du(e.containerInfo)}catch(y){kt(t,t.return,y)}break;case 4:Dn(e,t),es(t);break;case 13:Dn(e,t),es(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wx=Ot())),n&4&&_1(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(br=(u=br)||d,Dn(e,t),br=u):Dn(e,t),es(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(f=be=d;be!==null;){switch(m=be,p=m.child,m.tag){case 0:case 11:case 14:case 15:vu(4,m,m.return);break;case 1:ml(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(y){kt(n,r,y)}}break;case 5:ml(m,m.return);break;case 22:if(m.memoizedState!==null){S1(f);continue}}p!==null?(p.return=m,be=p):S1(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=uT("display",a))}catch(y){kt(t,t.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){kt(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Dn(e,t),es(t),n&4&&_1(t);break;case 21:break;default:Dn(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(O_(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ju(s,""),n.flags&=-33);var i=T1(t);py(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=T1(t);my(t,l,a);break;default:throw Error(ce(161))}}catch(c){kt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uD(t,e,r){be=t,V_(t)}function V_(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var s=be,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Gh;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||br;l=Gh;var u=br;if(Gh=a,(br=c)&&!u)for(be=s;be!==null;)a=be,c=a.child,a.tag===22&&a.memoizedState!==null?R1(s):c!==null?(c.return=a,be=c):R1(s);for(;i!==null;)be=i,V_(i),i=i.sibling;be=s,Gh=l,br=u}A1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,be=i):A1(t)}}function A1(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:br||sp(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!br)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ln(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&d1(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}d1(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Du(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}br||e.flags&512&&fy(e)}catch(m){kt(e,e.return,m)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function S1(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function R1(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{sp(4,e)}catch(c){kt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){kt(e,s,c)}}var i=e.return;try{fy(e)}catch(c){kt(e,i,c)}break;case 5:var a=e.return;try{fy(e)}catch(c){kt(e,a,c)}}}catch(c){kt(e,e.return,c)}if(e===t){be=null;break}var l=e.sibling;if(l!==null){l.return=e.return,be=l;break}be=e.return}}var dD=Math.ceil,hm=ii.ReactCurrentDispatcher,vx=ii.ReactCurrentOwner,En=ii.ReactCurrentBatchConfig,Ze=0,sr=null,Ut=null,cr=0,tn=0,pl=wo(0),Yt=0,Hu=null,la=0,ip=0,xx=0,xu=null,qr=null,wx=0,Ql=1/0,Fs=null,fm=!1,gy=null,Qi=null,$h=!1,Bi=null,mm=0,wu=0,yy=null,wf=-1,bf=0;function Or(){return Ze&6?Ot():wf!==-1?wf:wf=Ot()}function Yi(t){return t.mode&1?Ze&2&&cr!==0?cr&-cr:QM.transition!==null?(bf===0&&(bf=CT()),bf):(t=ct,t!==0||(t=window.event,t=t===void 0?16:IT(t.type)),t):1}function zn(t,e,r,n){if(50<wu)throw wu=0,yy=null,Error(ce(185));vd(t,r,n),(!(Ze&2)||t!==sr)&&(t===sr&&(!(Ze&2)&&(ip|=r),Yt===4&&Ri(t,cr)),Qr(t,n),r===1&&Ze===0&&!(e.mode&1)&&(Ql=Ot()+500,tp&&bo()))}function Qr(t,e){var r=t.callbackNode;Q4(t,e);var n=Jf(t,t===sr?cr:0);if(n===0)r!==null&&Fb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Fb(r),e===1)t.tag===0?WM(I1.bind(null,t)):YT(I1.bind(null,t)),GM(function(){!(Ze&6)&&bo()}),r=null;else{switch(NT(n)){case 1:r=Hv;break;case 4:r=bT;break;case 16:r=Kf;break;case 536870912:r=ET;break;default:r=Kf}r=W_(r,B_.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function B_(t,e){if(wf=-1,bf=0,Ze&6)throw Error(ce(327));var r=t.callbackNode;if(Cl()&&t.callbackNode!==r)return null;var n=Jf(t,t===sr?cr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=pm(t,n);else{e=n;var s=Ze;Ze|=2;var i=q_();(sr!==t||cr!==e)&&(Fs=null,Ql=Ot()+500,Zo(t,e));do try{mD();break}catch(l){U_(t,l)}while(!0);ix(),hm.current=i,Ze=s,Ut!==null?e=0:(sr=null,cr=0,e=Yt)}if(e!==0){if(e===2&&(s=$0(t),s!==0&&(n=s,e=vy(t,s))),e===1)throw r=Hu,Zo(t,0),Ri(t,n),Qr(t,Ot()),r;if(e===6)Ri(t,n);else{if(s=t.current.alternate,!(n&30)&&!hD(s)&&(e=pm(t,n),e===2&&(i=$0(t),i!==0&&(n=i,e=vy(t,i))),e===1))throw r=Hu,Zo(t,0),Ri(t,n),Qr(t,Ot()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ce(345));case 2:Go(t,qr,Fs);break;case 3:if(Ri(t,n),(n&130023424)===n&&(e=wx+500-Ot(),10<e)){if(Jf(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Or(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=X0(Go.bind(null,t,qr,Fs),e);break}Go(t,qr,Fs);break;case 4:if(Ri(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-$n(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=Ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dD(n/1960))-n,10<n){t.timeoutHandle=X0(Go.bind(null,t,qr,Fs),n);break}Go(t,qr,Fs);break;case 5:Go(t,qr,Fs);break;default:throw Error(ce(329))}}}return Qr(t,Ot()),t.callbackNode===r?B_.bind(null,t):null}function vy(t,e){var r=xu;return t.current.memoizedState.isDehydrated&&(Zo(t,e).flags|=256),t=pm(t,e),t!==2&&(e=qr,qr=r,e!==null&&xy(e)),t}function xy(t){qr===null?qr=t:qr.push.apply(qr,t)}function hD(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Wn(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ri(t,e){for(e&=~xx,e&=~ip,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-$n(e),n=1<<r;t[r]=-1,e&=~n}}function I1(t){if(Ze&6)throw Error(ce(327));Cl();var e=Jf(t,0);if(!(e&1))return Qr(t,Ot()),null;var r=pm(t,e);if(t.tag!==0&&r===2){var n=$0(t);n!==0&&(e=n,r=vy(t,n))}if(r===1)throw r=Hu,Zo(t,0),Ri(t,e),Qr(t,Ot()),r;if(r===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Go(t,qr,Fs),Qr(t,Ot()),null}function bx(t,e){var r=Ze;Ze|=1;try{return t(e)}finally{Ze=r,Ze===0&&(Ql=Ot()+500,tp&&bo())}}function ca(t){Bi!==null&&Bi.tag===0&&!(Ze&6)&&Cl();var e=Ze;Ze|=1;var r=En.transition,n=ct;try{if(En.transition=null,ct=1,t)return t()}finally{ct=n,En.transition=r,Ze=e,!(Ze&6)&&bo()}}function Ex(){tn=pl.current,xt(pl)}function Zo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,qM(r)),Ut!==null)for(r=Ut.return;r!==null;){var n=r;switch(rx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&rm();break;case 3:Hl(),xt(Hr),xt(Cr),dx();break;case 5:ux(n);break;case 4:Hl();break;case 13:xt(_t);break;case 19:xt(_t);break;case 10:ox(n.type._context);break;case 22:case 23:Ex()}r=r.return}if(sr=t,Ut=t=Ki(t.current,null),cr=tn=e,Yt=0,Hu=null,xx=ip=la=0,qr=xu=null,Ho!==null){for(e=0;e<Ho.length;e++)if(r=Ho[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Ho=null}return t}function U_(t,e){do{var r=Ut;try{if(ix(),yf.current=dm,um){for(var n=At.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}um=!1}if(aa=0,rr=Qt=At=null,yu=!1,Gu=0,vx.current=null,r===null||r.return===null){Yt=1,Hu=e,Ut=null;break}e:{var i=t,a=r.return,l=r,c=e;if(e=cr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=y1(a);if(p!==null){p.flags&=-257,v1(p,a,l,i,e),p.mode&1&&g1(i,u,e),e=p,c=u;var w=e.updateQueue;if(w===null){var y=new Set;y.add(c),e.updateQueue=y}else w.add(c);break e}else{if(!(e&1)){g1(i,u,e),Cx();break e}c=Error(ce(426))}}else if(Tt&&l.mode&1){var b=y1(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),v1(b,a,l,i,e),nx(Wl(c,l));break e}}i=c=Wl(c,l),Yt!==4&&(Yt=2),xu===null?xu=[i]:xu.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var N=N_(i,c,e);u1(i,N);break e;case 1:l=c;var x=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Qi===null||!Qi.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=T_(i,l,e);u1(i,R);break e}}i=i.return}while(i!==null)}$_(r)}catch(I){e=I,Ut===r&&r!==null&&(Ut=r=r.return);continue}break}while(!0)}function q_(){var t=hm.current;return hm.current=dm,t===null?dm:t}function Cx(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),sr===null||!(la&268435455)&&!(ip&268435455)||Ri(sr,cr)}function pm(t,e){var r=Ze;Ze|=2;var n=q_();(sr!==t||cr!==e)&&(Fs=null,Zo(t,e));do try{fD();break}catch(s){U_(t,s)}while(!0);if(ix(),Ze=r,hm.current=n,Ut!==null)throw Error(ce(261));return sr=null,cr=0,Yt}function fD(){for(;Ut!==null;)G_(Ut)}function mD(){for(;Ut!==null&&!V4();)G_(Ut)}function G_(t){var e=H_(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?$_(t):Ut=e,vx.current=null}function $_(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=aD(r,e),r!==null){r.flags&=32767,Ut=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,Ut=null;return}}else if(r=oD(r,e,tn),r!==null){Ut=r;return}if(e=e.sibling,e!==null){Ut=e;return}Ut=e=t}while(e!==null);Yt===0&&(Yt=5)}function Go(t,e,r){var n=ct,s=En.transition;try{En.transition=null,ct=1,pD(t,e,r,n)}finally{En.transition=s,ct=n}return null}function pD(t,e,r,n){do Cl();while(Bi!==null);if(Ze&6)throw Error(ce(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Y4(t,i),t===sr&&(Ut=sr=null,cr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$h||($h=!0,W_(Kf,function(){return Cl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=En.transition,En.transition=null;var a=ct;ct=1;var l=Ze;Ze|=4,vx.current=null,cD(t,r),F_(r,t),DM(K0),Xf=!!Y0,K0=Y0=null,t.current=r,uD(r),B4(),Ze=l,ct=a,En.transition=i}else t.current=r;if($h&&($h=!1,Bi=t,mm=s),i=t.pendingLanes,i===0&&(Qi=null),G4(r.stateNode),Qr(t,Ot()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(fm)throw fm=!1,t=gy,gy=null,t;return mm&1&&t.tag!==0&&Cl(),i=t.pendingLanes,i&1?t===yy?wu++:(wu=0,yy=t):wu=0,bo(),null}function Cl(){if(Bi!==null){var t=NT(mm),e=En.transition,r=ct;try{if(En.transition=null,ct=16>t?16:t,Bi===null)var n=!1;else{if(t=Bi,Bi=null,mm=0,Ze&6)throw Error(ce(331));var s=Ze;for(Ze|=4,be=t.current;be!==null;){var i=be,a=i.child;if(be.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(be=u;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:vu(8,d,i)}var f=d.child;if(f!==null)f.return=d,be=f;else for(;be!==null;){d=be;var m=d.sibling,p=d.return;if(D_(d),d===u){be=null;break}if(m!==null){m.return=p,be=m;break}be=p}}}var w=i.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}be=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,be=a;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vu(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,be=N;break e}be=i.return}}var x=t.current;for(be=x;be!==null;){a=be;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,be=E;else e:for(a=x;be!==null;){if(l=be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sp(9,l)}}catch(I){kt(l,l.return,I)}if(l===a){be=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,be=R;break e}be=l.return}}if(Ze=s,bo(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Km,t)}catch{}n=!0}return n}finally{ct=r,En.transition=e}}return!1}function j1(t,e,r){e=Wl(r,e),e=N_(t,e,1),t=Wi(t,e,1),e=Or(),t!==null&&(vd(t,1,e),Qr(t,e))}function kt(t,e,r){if(t.tag===3)j1(t,t,r);else for(;e!==null;){if(e.tag===3){j1(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qi===null||!Qi.has(n))){t=Wl(r,t),t=T_(e,t,1),e=Wi(e,t,1),t=Or(),e!==null&&(vd(e,1,t),Qr(e,t));break}}e=e.return}}function gD(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Or(),t.pingedLanes|=t.suspendedLanes&r,sr===t&&(cr&r)===r&&(Yt===4||Yt===3&&(cr&130023424)===cr&&500>Ot()-wx?Zo(t,0):xx|=r),Qr(t,e)}function z_(t,e){e===0&&(t.mode&1?(e=Mh,Mh<<=1,!(Mh&130023424)&&(Mh=4194304)):e=1);var r=Or();t=Ks(t,e),t!==null&&(vd(t,e,r),Qr(t,r))}function yD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),z_(t,r)}function vD(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(e),z_(t,r)}var H_;H_=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Hr.current)$r=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return $r=!1,iD(t,e,r);$r=!!(t.flags&131072)}else $r=!1,Tt&&e.flags&1048576&&KT(e,im,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;xf(t,e),t=e.pendingProps;var s=Gl(e,Cr.current);El(e,r),s=fx(null,e,n,t,s,r);var i=mx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wr(n)?(i=!0,nm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lx(e),s.updater=np,e.stateNode=s,s._reactInternals=e,iy(e,n,t,r),e=ly(null,e,n,!0,i,r)):(e.tag=0,Tt&&i&&tx(e),kr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(xf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=wD(n),t=Ln(n,t),s){case 0:e=ay(null,e,n,t,r);break e;case 1:e=b1(null,e,n,t,r);break e;case 11:e=x1(null,e,n,t,r);break e;case 14:e=w1(null,e,n,Ln(n.type,t),r);break e}throw Error(ce(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ln(n,s),ay(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ln(n,s),b1(t,e,n,s,r);case 3:e:{if(R_(e),t===null)throw Error(ce(387));n=e.pendingProps,i=e.memoizedState,s=i.element,r_(t,e),lm(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Wl(Error(ce(423)),e),e=E1(t,e,n,r,s);break e}else if(n!==s){s=Wl(Error(ce(424)),e),e=E1(t,e,n,r,s);break e}else for(nn=Hi(e.stateNode.containerInfo.firstChild),on=e,Tt=!0,Un=null,r=e_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if($l(),n===s){e=Js(t,e,r);break e}kr(t,e,n,r)}e=e.child}return e;case 5:return n_(e),t===null&&ry(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,J0(n,s)?a=null:i!==null&&J0(n,i)&&(e.flags|=32),S_(t,e),kr(t,e,a,r),e.child;case 6:return t===null&&ry(e),null;case 13:return I_(t,e,r);case 4:return cx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=zl(e,null,n,r):kr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ln(n,s),x1(t,e,n,s,r);case 7:return kr(t,e,e.pendingProps,r),e.child;case 8:return kr(t,e,e.pendingProps.children,r),e.child;case 12:return kr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,pt(om,n._currentValue),n._currentValue=a,i!==null)if(Wn(i.value,a)){if(i.children===s.children&&!Hr.current){e=Js(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=$s(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ny(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ce(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),ny(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}kr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,El(e,r),s=Tn(s),n=n(s),e.flags|=1,kr(t,e,n,r),e.child;case 14:return n=e.type,s=Ln(n,e.pendingProps),s=Ln(n.type,s),w1(t,e,n,s,r);case 15:return __(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ln(n,s),xf(t,e),e.tag=1,Wr(n)?(t=!0,nm(e)):t=!1,El(e,r),C_(e,n,s),iy(e,n,s,r),ly(null,e,n,!0,t,r);case 19:return j_(t,e,r);case 22:return A_(t,e,r)}throw Error(ce(156,e.tag))};function W_(t,e){return wT(t,e)}function xD(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,r,n){return new xD(t,e,r,n)}function Nx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wD(t){if(typeof t=="function")return Nx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gv)return 11;if(t===$v)return 14}return 2}function Ki(t,e){var r=t.alternate;return r===null?(r=bn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ef(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")Nx(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case il:return ea(r.children,s,i,e);case qv:a=8,s|=8;break;case R0:return t=bn(12,r,e,s|2),t.elementType=R0,t.lanes=i,t;case I0:return t=bn(13,r,e,s),t.elementType=I0,t.lanes=i,t;case j0:return t=bn(19,r,e,s),t.elementType=j0,t.lanes=i,t;case nT:return op(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tT:a=10;break e;case rT:a=9;break e;case Gv:a=11;break e;case $v:a=14;break e;case Ti:a=16,n=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=bn(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function ea(t,e,r,n){return t=bn(7,t,n,e),t.lanes=r,t}function op(t,e,r,n){return t=bn(22,t,n,e),t.elementType=nT,t.lanes=r,t.stateNode={isHidden:!1},t}function Qg(t,e,r){return t=bn(6,t,null,e),t.lanes=r,t}function Yg(t,e,r){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bD(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rg(0),this.expirationTimes=Rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tx(t,e,r,n,s,i,a,l,c){return t=new bD(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},lx(i),t}function ED(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Q_(t){if(!t)return so;t=t._reactInternals;e:{if(Ea(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var r=t.type;if(Wr(r))return QT(t,r,e)}return e}function Y_(t,e,r,n,s,i,a,l,c){return t=Tx(r,n,!0,t,s,i,a,l,c),t.context=Q_(null),r=t.current,n=Or(),s=Yi(r),i=$s(n,s),i.callback=e??null,Wi(r,i,s),t.current.lanes=s,vd(t,s,n),Qr(t,n),t}function ap(t,e,r,n){var s=e.current,i=Or(),a=Yi(s);return r=Q_(r),e.context===null?e.context=r:e.pendingContext=r,e=$s(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Wi(s,e,a),t!==null&&(zn(t,s,a,i),gf(t,s,a)),a}function gm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function _x(t,e){P1(t,e),(t=t.alternate)&&P1(t,e)}function CD(){return null}var K_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ax(t){this._internalRoot=t}lp.prototype.render=Ax.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));ap(t,e,null,null)};lp.prototype.unmount=Ax.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ca(function(){ap(null,t,null,null)}),e[Ys]=null}};function lp(t){this._internalRoot=t}lp.prototype.unstable_scheduleHydration=function(t){if(t){var e=AT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Si.length&&e!==0&&e<Si[r].priority;r++);Si.splice(r,0,t),r===0&&RT(t)}};function Sx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k1(){}function ND(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=gm(a);i.call(u)}}var a=Y_(e,n,t,0,null,!1,!1,"",k1);return t._reactRootContainer=a,t[Ys]=a.current,Fu(t.nodeType===8?t.parentNode:t),ca(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=gm(c);l.call(u)}}var c=Tx(t,0,!1,null,null,!1,!1,"",k1);return t._reactRootContainer=c,t[Ys]=c.current,Fu(t.nodeType===8?t.parentNode:t),ca(function(){ap(e,c,r,n)}),c}function up(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=gm(a);l.call(c)}}ap(e,a,t,s)}else a=ND(r,e,t,s,n);return gm(a)}TT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Zc(e.pendingLanes);r!==0&&(Wv(e,r|1),Qr(e,Ot()),!(Ze&6)&&(Ql=Ot()+500,bo()))}break;case 13:ca(function(){var n=Ks(t,1);if(n!==null){var s=Or();zn(n,t,1,s)}}),_x(t,1)}};Qv=function(t){if(t.tag===13){var e=Ks(t,134217728);if(e!==null){var r=Or();zn(e,t,134217728,r)}_x(t,134217728)}};_T=function(t){if(t.tag===13){var e=Yi(t),r=Ks(t,e);if(r!==null){var n=Or();zn(r,t,e,n)}_x(t,e)}};AT=function(){return ct};ST=function(t,e){var r=ct;try{return ct=t,e()}finally{ct=r}};U0=function(t,e,r){switch(e){case"input":if(M0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=ep(n);if(!s)throw Error(ce(90));iT(n),M0(n,s)}}}break;case"textarea":aT(t,r);break;case"select":e=r.value,e!=null&&vl(t,!!r.multiple,e,!1)}};mT=bx;pT=ca;var TD={usingClientEntryPoint:!1,Events:[wd,cl,ep,hT,fT,bx]},Hc={findFiberByHostInstance:zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_D={bundleType:Hc.bundleType,version:Hc.version,rendererPackageName:Hc.rendererPackageName,rendererConfig:Hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vT(t),t===null?null:t.stateNode},findFiberByHostInstance:Hc.findFiberByHostInstance||CD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zh.isDisabled&&zh.supportsFiber)try{Km=zh.inject(_D),cs=zh}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TD;un.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sx(e))throw Error(ce(200));return ED(t,e,null,r)};un.createRoot=function(t,e){if(!Sx(t))throw Error(ce(299));var r=!1,n="",s=K_;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Tx(t,1,!1,null,null,r,!1,n,s),t[Ys]=e.current,Fu(t.nodeType===8?t.parentNode:t),new Ax(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=vT(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return ca(t)};un.hydrate=function(t,e,r){if(!cp(e))throw Error(ce(200));return up(null,t,e,!0,r)};un.hydrateRoot=function(t,e,r){if(!Sx(t))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=K_;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=Y_(e,null,t,1,r??null,s,!1,i,a),t[Ys]=e.current,Fu(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new lp(e)};un.render=function(t,e,r){if(!cp(e))throw Error(ce(200));return up(null,t,e,!1,r)};un.unmountComponentAtNode=function(t){if(!cp(t))throw Error(ce(40));return t._reactRootContainer?(ca(function(){up(null,null,t,!1,function(){t._reactRootContainer=null,t[Ys]=null})}),!0):!1};un.unstable_batchedUpdates=bx;un.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!cp(r))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return up(t,e,r,!1,n)};un.version="18.3.1-next-f1338f8080-20240426";function J_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J_)}catch(t){console.error(t)}}J_(),JN.exports=un;var Ca=JN.exports;const X_=Mv(Ca);var Z_,M1=Ca;Z_=M1.createRoot,M1.hydrateRoot;const AD=1,SD=1e6;let Kg=0;function RD(){return Kg=(Kg+1)%Number.MAX_SAFE_INTEGER,Kg.toString()}const Jg=new Map,D1=t=>{if(Jg.has(t))return;const e=setTimeout(()=>{Jg.delete(t),bu({type:"REMOVE_TOAST",toastId:t})},SD);Jg.set(t,e)},ID=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,AD)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?D1(r):t.toasts.forEach(n=>{D1(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Cf=[];let Nf={toasts:[]};function bu(t){Nf=ID(Nf,t),Cf.forEach(e=>{e(Nf)})}function Ye({...t}){const e=RD(),r=s=>bu({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>bu({type:"DISMISS_TOAST",toastId:e});return bu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function jD(){const[t,e]=g.useState(Nf);return g.useEffect(()=>(Cf.push(e),()=>{const r=Cf.indexOf(e);r>-1&&Cf.splice(r,1)}),[t]),{...t,toast:Ye,dismiss:r=>bu({type:"DISMISS_TOAST",toastId:r})}}function xe(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function PD(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Rx(...t){return e=>t.forEach(r=>PD(r,e))}function ut(...t){return g.useCallback(Rx(...t),t)}function kD(t,e=[]){let r=[];function n(i,a){const l=g.createContext(a),c=r.length;r=[...r,a];function u(f){const{scope:m,children:p,...w}=f,y=(m==null?void 0:m[t][c])||l,b=g.useMemo(()=>w,Object.values(w));return o.jsx(y.Provider,{value:b,children:p})}function d(f,m){const p=(m==null?void 0:m[t][c])||l,w=g.useContext(p);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const s=()=>{const i=r.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,MD(s,...e)]}function MD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var ua=g.forwardRef((t,e)=>{const{children:r,...n}=t,s=g.Children.toArray(r),i=s.find(DD);if(i){const a=i.props.children,l=s.map(c=>c===i?g.Children.count(a)>1?g.Children.only(null):g.isValidElement(a)?a.props.children:null:c);return o.jsx(wy,{...n,ref:e,children:g.isValidElement(a)?g.cloneElement(a,void 0,l):null})}return o.jsx(wy,{...n,ref:e,children:r})});ua.displayName="Slot";var wy=g.forwardRef((t,e)=>{const{children:r,...n}=t;if(g.isValidElement(r)){const s=LD(r);return g.cloneElement(r,{...OD(n,r.props),ref:e?Rx(e,s):s})}return g.Children.count(r)>1?g.Children.only(null):null});wy.displayName="SlotClone";var eA=({children:t})=>o.jsx(o.Fragment,{children:t});function DD(t){return g.isValidElement(t)&&t.type===eA}function OD(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{i(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function LD(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Ed(t){const e=t+"CollectionProvider",[r,n]=kD(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:w,children:y}=p,b=J.useRef(null),N=J.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:N,collectionRef:b,children:y})};a.displayName=e;const l=t+"CollectionSlot",c=J.forwardRef((p,w)=>{const{scope:y,children:b}=p,N=i(l,y),x=ut(w,N.collectionRef);return o.jsx(ua,{ref:x,children:b})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=J.forwardRef((p,w)=>{const{scope:y,children:b,...N}=p,x=J.useRef(null),E=ut(w,x),R=i(u,y);return J.useEffect(()=>(R.itemMap.set(x,{ref:x,...N}),()=>void R.itemMap.delete(x))),o.jsx(ua,{[d]:"",ref:E,children:b})});f.displayName=u;function m(p){const w=i(t+"CollectionConsumer",p);return J.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const N=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(w.itemMap.values()).sort((R,I)=>N.indexOf(R.ref.current)-N.indexOf(I.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:c,ItemSlot:f},m,n]}function Cd(t,e=[]){let r=[];function n(i,a){const l=g.createContext(a),c=r.length;r=[...r,a];const u=f=>{var N;const{scope:m,children:p,...w}=f,y=((N=m==null?void 0:m[t])==null?void 0:N[c])||l,b=g.useMemo(()=>w,Object.values(w));return o.jsx(y.Provider,{value:b,children:p})};u.displayName=i+"Provider";function d(f,m){var y;const p=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,w=g.useContext(p);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=r.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,FD(s,...e)]}function FD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var VD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$e=VD.reduce((t,e)=>{const r=g.forwardRef((n,s)=>{const{asChild:i,...a}=n,l=i?ua:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Ix(t,e){t&&Ca.flushSync(()=>t.dispatchEvent(e))}function Nr(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function BD(t,e=globalThis==null?void 0:globalThis.document){const r=Nr(t);g.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var UD="DismissableLayer",by="dismissableLayer.update",qD="dismissableLayer.pointerDownOutside",GD="dismissableLayer.focusOutside",O1,tA=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nd=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=g.useContext(tA),[d,f]=g.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),w=ut(e,j=>f(j)),y=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),N=y.indexOf(b),x=d?y.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,R=x>=N,I=zD(j=>{const T=j.target,S=[...u.branches].some(k=>k.contains(T));!R||S||(s==null||s(j),a==null||a(j),j.defaultPrevented||l==null||l())},m),V=HD(j=>{const T=j.target;[...u.branches].some(k=>k.contains(T))||(i==null||i(j),a==null||a(j),j.defaultPrevented||l==null||l())},m);return BD(j=>{x===u.layers.size-1&&(n==null||n(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},m),g.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(O1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),L1(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=O1)}},[d,m,r,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),L1())},[d,u]),g.useEffect(()=>{const j=()=>p({});return document.addEventListener(by,j),()=>document.removeEventListener(by,j)},[]),o.jsx($e.div,{...c,ref:w,style:{pointerEvents:E?R?"auto":"none":void 0,...t.style},onFocusCapture:xe(t.onFocusCapture,V.onFocusCapture),onBlurCapture:xe(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:xe(t.onPointerDownCapture,I.onPointerDownCapture)})});Nd.displayName=UD;var $D="DismissableLayerBranch",rA=g.forwardRef((t,e)=>{const r=g.useContext(tA),n=g.useRef(null),s=ut(e,n);return g.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),o.jsx($e.div,{...t,ref:s})});rA.displayName=$D;function zD(t,e=globalThis==null?void 0:globalThis.document){const r=Nr(t),n=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){nA(qD,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function HD(t,e=globalThis==null?void 0:globalThis.document){const r=Nr(t),n=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!n.current&&nA(GD,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function L1(){const t=new CustomEvent(by);document.dispatchEvent(t)}function nA(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Ix(s,i):s.dispatchEvent(i)}var WD=Nd,QD=rA,Tr=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},YD="Portal",dp=g.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,i]=g.useState(!1);Tr(()=>i(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?X_.createPortal(o.jsx($e.div,{...n,ref:e}),a):null});dp.displayName=YD;function KD(t,e){return g.useReducer((r,n)=>e[r][n]??r,t)}var Na=t=>{const{present:e,children:r}=t,n=JD(e),s=typeof r=="function"?r({present:n.isPresent}):g.Children.only(r),i=ut(n.ref,XD(s));return typeof r=="function"||n.isPresent?g.cloneElement(s,{ref:i}):null};Na.displayName="Presence";function JD(t){const[e,r]=g.useState(),n=g.useRef({}),s=g.useRef(t),i=g.useRef("none"),a=t?"mounted":"unmounted",[l,c]=KD(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=Hh(n.current);i.current=l==="mounted"?u:"none"},[l]),Tr(()=>{const u=n.current,d=s.current;if(d!==t){const m=i.current,p=Hh(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Tr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=p=>{const y=Hh(n.current).includes(p.animationName);if(p.target===e&&y&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=p=>{p.target===e&&(i.current=Hh(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Hh(t){return(t==null?void 0:t.animationName)||"none"}function XD(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Wu({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,s]=ZD({defaultProp:e,onChange:r}),i=t!==void 0,a=i?t:n,l=Nr(r),c=g.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[a,c]}function ZD({defaultProp:t,onChange:e}){const r=g.useState(t),[n]=r,s=g.useRef(n),i=Nr(e);return g.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var e3="VisuallyHidden",Td=g.forwardRef((t,e)=>o.jsx($e.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Td.displayName=e3;var t3=Td,jx="ToastProvider",[Px,r3,n3]=Ed("Toast"),[sA,HW]=Cd("Toast",[n3]),[s3,hp]=sA(jx),iA=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=g.useState(null),[u,d]=g.useState(0),f=g.useRef(!1),m=g.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${jx}\`. Expected non-empty \`string\`.`),o.jsx(Px.Provider,{scope:e,children:o.jsx(s3,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>d(p=>p+1),[]),onToastRemove:g.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};iA.displayName=jx;var oA="ToastViewport",i3=["F8"],Ey="toast.viewportPause",Cy="toast.viewportResume",aA=g.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=i3,label:s="Notifications ({hotkey})",...i}=t,a=hp(oA,r),l=r3(r),c=g.useRef(null),u=g.useRef(null),d=g.useRef(null),f=g.useRef(null),m=ut(e,f,a.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=a.toastCount>0;g.useEffect(()=>{const b=N=>{var E;n.length!==0&&n.every(R=>N[R]||N.code===R)&&((E=f.current)==null||E.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),g.useEffect(()=>{const b=c.current,N=f.current;if(w&&b&&N){const x=()=>{if(!a.isClosePausedRef.current){const V=new CustomEvent(Ey);N.dispatchEvent(V),a.isClosePausedRef.current=!0}},E=()=>{if(a.isClosePausedRef.current){const V=new CustomEvent(Cy);N.dispatchEvent(V),a.isClosePausedRef.current=!1}},R=V=>{!b.contains(V.relatedTarget)&&E()},I=()=>{b.contains(document.activeElement)||E()};return b.addEventListener("focusin",x),b.addEventListener("focusout",R),b.addEventListener("pointermove",x),b.addEventListener("pointerleave",I),window.addEventListener("blur",x),window.addEventListener("focus",E),()=>{b.removeEventListener("focusin",x),b.removeEventListener("focusout",R),b.removeEventListener("pointermove",x),b.removeEventListener("pointerleave",I),window.removeEventListener("blur",x),window.removeEventListener("focus",E)}}},[w,a.isClosePausedRef]);const y=g.useCallback(({tabbingDirection:b})=>{const x=l().map(E=>{const R=E.ref.current,I=[R,...v3(R)];return b==="forwards"?I:I.reverse()});return(b==="forwards"?x.reverse():x).flat()},[l]);return g.useEffect(()=>{const b=f.current;if(b){const N=x=>{var I,V,j;const E=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!E){const T=document.activeElement,S=x.shiftKey;if(x.target===b&&S){(I=u.current)==null||I.focus();return}const D=y({tabbingDirection:S?"backwards":"forwards"}),P=D.findIndex(B=>B===T);Xg(D.slice(P+1))?x.preventDefault():S?(V=u.current)==null||V.focus():(j=d.current)==null||j.focus()}};return b.addEventListener("keydown",N),()=>b.removeEventListener("keydown",N)}},[l,y]),o.jsxs(QD,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&o.jsx(Ny,{ref:u,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"forwards"});Xg(b)}}),o.jsx(Px.Slot,{scope:r,children:o.jsx($e.ol,{tabIndex:-1,...i,ref:m})}),w&&o.jsx(Ny,{ref:d,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"backwards"});Xg(b)}})]})});aA.displayName=oA;var lA="ToastFocusProxy",Ny=g.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,i=hp(lA,r);return o.jsx(Td,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});Ny.displayName=lA;var fp="Toast",o3="toast.swipeStart",a3="toast.swipeMove",l3="toast.swipeCancel",c3="toast.swipeEnd",cA=g.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=Wu({prop:n,defaultProp:s,onChange:i});return o.jsx(Na,{present:r||l,children:o.jsx(h3,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:Nr(t.onPause),onResume:Nr(t.onResume),onSwipeStart:xe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xe(t.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:xe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xe(t.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});cA.displayName=fp;var[u3,d3]=sA(fp,{onClose(){}}),h3=g.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...w}=t,y=hp(fp,r),[b,N]=g.useState(null),x=ut(e,B=>N(B)),E=g.useRef(null),R=g.useRef(null),I=s||y.duration,V=g.useRef(0),j=g.useRef(I),T=g.useRef(0),{onToastAdd:S,onToastRemove:k}=y,L=Nr(()=>{var z;(b==null?void 0:b.contains(document.activeElement))&&((z=y.viewport)==null||z.focus()),a()}),D=g.useCallback(B=>{!B||B===1/0||(window.clearTimeout(T.current),V.current=new Date().getTime(),T.current=window.setTimeout(L,B))},[L]);g.useEffect(()=>{const B=y.viewport;if(B){const z=()=>{D(j.current),u==null||u()},Y=()=>{const ee=new Date().getTime()-V.current;j.current=j.current-ee,window.clearTimeout(T.current),c==null||c()};return B.addEventListener(Ey,Y),B.addEventListener(Cy,z),()=>{B.removeEventListener(Ey,Y),B.removeEventListener(Cy,z)}}},[y.viewport,I,c,u,D]),g.useEffect(()=>{i&&!y.isClosePausedRef.current&&D(I)},[i,I,y.isClosePausedRef,D]),g.useEffect(()=>(S(),()=>k()),[S,k]);const P=g.useMemo(()=>b?gA(b):null,[b]);return y.viewport?o.jsxs(o.Fragment,{children:[P&&o.jsx(f3,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),o.jsx(u3,{scope:r,onClose:L,children:Ca.createPortal(o.jsx(Px.ItemSlot,{scope:r,children:o.jsx(WD,{asChild:!0,onEscapeKeyDown:xe(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||L(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx($e.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...w,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:xe(t.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:xe(t.onPointerDown,B=>{B.button===0&&(E.current={x:B.clientX,y:B.clientY})}),onPointerMove:xe(t.onPointerMove,B=>{if(!E.current)return;const z=B.clientX-E.current.x,Y=B.clientY-E.current.y,ee=!!R.current,U=["left","right"].includes(y.swipeDirection),H=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,ie=U?H(0,z):0,ne=U?0:H(0,Y),le=B.pointerType==="touch"?10:2,he={x:ie,y:ne},_e={originalEvent:B,delta:he};ee?(R.current=he,Wh(a3,f,_e,{discrete:!1})):F1(he,y.swipeDirection,le)?(R.current=he,Wh(o3,d,_e,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(z)>le||Math.abs(Y)>le)&&(E.current=null)}),onPointerUp:xe(t.onPointerUp,B=>{const z=R.current,Y=B.target;if(Y.hasPointerCapture(B.pointerId)&&Y.releasePointerCapture(B.pointerId),R.current=null,E.current=null,z){const ee=B.currentTarget,U={originalEvent:B,delta:z};F1(z,y.swipeDirection,y.swipeThreshold)?Wh(c3,p,U,{discrete:!0}):Wh(l3,m,U,{discrete:!0}),ee.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),f3=t=>{const{__scopeToast:e,children:r,...n}=t,s=hp(fp,e),[i,a]=g.useState(!1),[l,c]=g.useState(!1);return g3(()=>a(!0)),g.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(dp,{asChild:!0,children:o.jsx(Td,{...n,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",r]})})})},m3="ToastTitle",uA=g.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return o.jsx($e.div,{...n,ref:e})});uA.displayName=m3;var p3="ToastDescription",dA=g.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return o.jsx($e.div,{...n,ref:e})});dA.displayName=p3;var hA="ToastAction",fA=g.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?o.jsx(pA,{altText:r,asChild:!0,children:o.jsx(kx,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${hA}\`. Expected non-empty \`string\`.`),null)});fA.displayName=hA;var mA="ToastClose",kx=g.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=d3(mA,r);return o.jsx(pA,{asChild:!0,children:o.jsx($e.button,{type:"button",...n,ref:e,onClick:xe(t.onClick,s.onClose)})})});kx.displayName=mA;var pA=g.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return o.jsx($e.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function gA(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),y3(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...gA(n))}}),e}function Wh(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Ix(s,i):s.dispatchEvent(i)}var F1=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),i=n>s;return e==="left"||e==="right"?i&&n>r:!i&&s>r};function g3(t=()=>{}){const e=Nr(t);Tr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function y3(t){return t.nodeType===t.ELEMENT_NODE}function v3(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Xg(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var x3=iA,yA=aA,vA=cA,xA=uA,wA=dA,bA=fA,EA=kx;function CA(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=CA(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function NA(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=CA(t))&&(n&&(n+=" "),n+=e);return n}const V1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,B1=NA,Mx=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return B1(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const m=V1(d)||V1(f);return s[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...p}=d;return Object.entries(p).every(w=>{let[y,b]=w;return Array.isArray(b)?b.includes({...i,...l}[y]):{...i,...l}[y]===b})?[...u,f,m]:u},[]);return B1(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TA=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...b3,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:TA("lucide",s),...l},[...a.map(([u,d])=>g.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,e)=>{const r=g.forwardRef(({className:n,...s},i)=>g.createElement(E3,{ref:i,iconNode:e,className:TA(`lucide-${w3(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=Re("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=Re("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=Re("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=Re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=Re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=Re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=Re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=Re("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=Re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Re("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Re("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=Re("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=Re("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=Re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=Re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=Re("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=Re("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=Re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=Re("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=Re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Re("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Gx="-",F3=t=>{const e=B3(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const l=a.split(Gx);return l[0]===""&&l.length!==1&&l.shift(),IA(l,e)||V3(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},IA=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?IA(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Gx);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},$1=/^\[(.+)\]$/,V3=t=>{if($1.test(t)){const e=$1.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},B3=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return q3(Object.entries(t.classGroups),r).forEach(([i,a])=>{Ay(a,n,i,e)}),n},Ay=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:z1(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(U3(s)){Ay(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,a])=>{Ay(a,z1(e,i),r,n)})})},z1=(t,e)=>{let r=t;return e.split(Gx).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},U3=t=>t.isThemeGetter,q3=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[r,s]}):t,G3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,a)=>{r.set(i,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){r.has(i)?r.set(i,a):s(i,a)}}},jA="!",$3=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let u=0,d=0,f;for(let b=0;b<l.length;b++){let N=l[b];if(u===0){if(N===s&&(n||l.slice(b,b+i)===e)){c.push(l.slice(d,b)),d=b+i;continue}if(N==="/"){f=b;continue}}N==="["?u++:N==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(jA),w=p?m.substring(1):m,y=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:a}):a},z3=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},H3=t=>({cache:G3(t.cacheSize),parseClassName:$3(t),...F3(t)}),W3=/\s+/,Q3=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(W3);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=r(u);let w=!!p,y=n(w?m.substring(0,p):m);if(!y){if(!w){l=u+(l.length>0?" "+l:l);continue}if(y=n(m),!y){l=u+(l.length>0?" "+l:l);continue}w=!1}const b=z3(d).join(":"),N=f?b+jA:b,x=N+y;if(i.includes(x))continue;i.push(x);const E=s(y,w);for(let R=0;R<E.length;++R){const I=E[R];i.push(N+I)}l=u+(l.length>0?" "+l:l)}return l};function Y3(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=PA(e))&&(n&&(n+=" "),n+=r);return n}const PA=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=PA(t[n]))&&(r&&(r+=" "),r+=e);return r};function K3(t,...e){let r,n,s,i=a;function a(c){const u=e.reduce((d,f)=>f(d),t());return r=H3(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=Q3(c,r);return s(c,d),d}return function(){return i(Y3.apply(null,arguments))}}const yt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},kA=/^\[(?:([a-z-]+):)?(.+)\]$/i,J3=/^\d+\/\d+$/,X3=new Set(["px","full","screen"]),Z3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,rO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ds=t=>Tl(t)||X3.has(t)||J3.test(t),xi=t=>uc(t,"length",dO),Tl=t=>!!t&&!Number.isNaN(Number(t)),r0=t=>uc(t,"number",Tl),Qc=t=>!!t&&Number.isInteger(Number(t)),sO=t=>t.endsWith("%")&&Tl(t.slice(0,-1)),Le=t=>kA.test(t),wi=t=>Z3.test(t),iO=new Set(["length","size","percentage"]),oO=t=>uc(t,iO,MA),aO=t=>uc(t,"position",MA),lO=new Set(["image","url"]),cO=t=>uc(t,lO,fO),uO=t=>uc(t,"",hO),Yc=()=>!0,uc=(t,e,r)=>{const n=kA.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},dO=t=>eO.test(t)&&!tO.test(t),MA=()=>!1,hO=t=>rO.test(t),fO=t=>nO.test(t),mO=()=>{const t=yt("colors"),e=yt("spacing"),r=yt("blur"),n=yt("brightness"),s=yt("borderColor"),i=yt("borderRadius"),a=yt("borderSpacing"),l=yt("borderWidth"),c=yt("contrast"),u=yt("grayscale"),d=yt("hueRotate"),f=yt("invert"),m=yt("gap"),p=yt("gradientColorStops"),w=yt("gradientColorStopPositions"),y=yt("inset"),b=yt("margin"),N=yt("opacity"),x=yt("padding"),E=yt("saturate"),R=yt("scale"),I=yt("sepia"),V=yt("skew"),j=yt("space"),T=yt("translate"),S=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Le,e],D=()=>[Le,e],P=()=>["",Ds,xi],B=()=>["auto",Tl,Le],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Le],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[Tl,Le];return{cacheSize:500,separator:":",theme:{colors:[Yc],spacing:[Ds,xi],blur:["none","",wi,Le],brightness:ne(),borderColor:[t],borderRadius:["none","","full",wi,Le],borderSpacing:D(),borderWidth:P(),contrast:ne(),grayscale:H(),hueRotate:ne(),invert:H(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[sO,xi],inset:L(),margin:L(),opacity:ne(),padding:D(),saturate:ne(),scale:ne(),sepia:H(),skew:ne(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Le]}],container:["container"],columns:[{columns:[wi]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Le]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qc,Le]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Le]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Qc,Le]}],"grid-cols":[{"grid-cols":[Yc]}],"col-start-end":[{col:["auto",{span:["full",Qc,Le]},Le]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Yc]}],"row-start-end":[{row:["auto",{span:[Qc,Le]},Le]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Le]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Le,e]}],"min-w":[{"min-w":[Le,e,"min","max","fit"]}],"max-w":[{"max-w":[Le,e,"none","full","min","max","fit","prose",{screen:[wi]},wi]}],h:[{h:[Le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",wi,xi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",r0]}],"font-family":[{font:[Yc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Le]}],"line-clamp":[{"line-clamp":["none",Tl,r0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ds,Le]}],"list-image":[{"list-image":["none",Le]}],"list-style-type":[{list:["none","disc","decimal",Le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ds,xi]}],"underline-offset":[{"underline-offset":["auto",Ds,Le]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),aO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:Y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Ds,Le]}],"outline-w":[{outline:[Ds,xi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[Ds,xi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wi,uO]}],"shadow-color":[{shadow:[Yc]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",wi,Le]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[E]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Le]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",Le]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",Le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Qc,Le]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Le]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ds,xi,r0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pO=K3(mO),gO=()=>{};var H1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},yO=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],l=t[r++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},OA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,p=u&63;c||(p=64,a||(m=64)),n.push(r[d],r[f],r[m],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new vO;const m=i<<2|l>>4;if(n.push(m),u!==64){const p=l<<4&240|u>>2;if(n.push(p),f!==64){const w=u<<6&192|f;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xO=function(t){const e=DA(t);return OA.encodeByteArray(e,!0)},vm=function(t){return xO(t).replace(/\./g,"")},LA=function(t){try{return OA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=()=>wO().__FIREBASE_DEFAULTS__,EO=()=>{if(typeof process>"u"||typeof H1>"u")return;const t=H1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LA(t[1]);return e&&JSON.parse(e)},pp=()=>{try{return gO()||bO()||EO()||CO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},FA=t=>{var e,r;return(r=(e=pp())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},NO=t=>{const e=FA(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},VA=()=>{var t;return(t=pp())===null||t===void 0?void 0:t.config},BA=t=>{var e;return(e=pp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vm(JSON.stringify(r)),vm(JSON.stringify(a)),""].join(".")}const Eu={};function AO(){const t={prod:[],emulator:[]};for(const e of Object.keys(Eu))Eu[e]?t.emulator.push(e):t.prod.push(e);return t}function SO(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let W1=!1;function qA(t,e){if(typeof window>"u"||typeof document>"u"||!dc(window.location.host)||Eu[t]===e||Eu[t]||W1)return;Eu[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",i=AO().prod.length>0;function a(){const m=document.getElementById(n);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,p){m.setAttribute("width","24"),m.setAttribute("id",p),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{W1=!0,a()},m}function d(m,p){m.setAttribute("id",p),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=SO(n),p=r("text"),w=document.getElementById(p)||document.createElement("span"),y=r("learnmore"),b=document.getElementById(y)||document.createElement("a"),N=r("preprendIcon"),x=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const E=m.element;l(E),d(b,y);const R=u();c(x,N),E.append(x,w,b,R),document.body.appendChild(E)}i?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function IO(){var t;const e=(t=pp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MO(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DO(){return!IO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OO(){try{return typeof indexedDB=="object"}catch{return!1}}function LO(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="FirebaseError";class oi extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=FO,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_d.prototype.create)}}class _d{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?VO(i,n):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new oi(s,l,n)}}function VO(t,e){return t.replace(BO,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const BO=/\{\$([^}]+)}/g;function UO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ha(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(Q1(i)&&Q1(a)){if(!ha(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Q1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ru(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function nu(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function qO(t,e){const r=new GO(t,e);return r.subscribe.bind(r)}class GO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");$O(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=n0),s.error===void 0&&(s.error=n0),s.complete===void 0&&(s.complete=n0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $O(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function n0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class fa{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zO=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new TO;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WO(e))try{this.getOrInitializeService({instanceIdentifier:$o})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=$o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$o){return this.instances.has(e)}getOptions(e=$o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:HO(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=$o){return this.component?this.component.multipleInstances?e:$o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function HO(t){return t===$o?void 0:t}function WO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new zO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const YO={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},KO=He.INFO,JO={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},XO=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=JO[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $x{constructor(e){this.name=e,this._logLevel=KO,this._logHandler=XO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const ZO=(t,e)=>e.some(r=>t instanceof r);let Y1,K1;function e5(){return Y1||(Y1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t5(){return K1||(K1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GA=new WeakMap,Sy=new WeakMap,$A=new WeakMap,s0=new WeakMap,zx=new WeakMap;function r5(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(Ji(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&GA.set(r,t)}).catch(()=>{}),zx.set(e,t),e}function n5(t){if(Sy.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Sy.set(t,e)}let Ry={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Sy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$A.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ji(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s5(t){Ry=t(Ry)}function i5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(i0(this),e,...r);return $A.set(n,e.sort?e.sort():[e]),Ji(n)}:t5().includes(t)?function(...e){return t.apply(i0(this),e),Ji(GA.get(this))}:function(...e){return Ji(t.apply(i0(this),e))}}function o5(t){return typeof t=="function"?i5(t):(t instanceof IDBTransaction&&n5(t),ZO(t,e5())?new Proxy(t,Ry):t)}function Ji(t){if(t instanceof IDBRequest)return r5(t);if(s0.has(t))return s0.get(t);const e=o5(t);return e!==t&&(s0.set(t,e),zx.set(e,t)),e}const i0=t=>zx.get(t);function a5(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Ji(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Ji(a.result),c.oldVersion,c.newVersion,Ji(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const l5=["get","getKey","getAll","getAllKeys","count"],c5=["put","add","delete","clear"],o0=new Map;function J1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(o0.get(e))return o0.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=c5.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||l5.includes(r)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return o0.set(e,i),i}s5(t=>({...t,get:(e,r,n)=>J1(e,r)||t.get(e,r,n),has:(e,r)=>!!J1(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(d5(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function d5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iy="@firebase/app",X1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new $x("@firebase/app"),h5="@firebase/app-compat",f5="@firebase/analytics-compat",m5="@firebase/analytics",p5="@firebase/app-check-compat",g5="@firebase/app-check",y5="@firebase/auth",v5="@firebase/auth-compat",x5="@firebase/database",w5="@firebase/data-connect",b5="@firebase/database-compat",E5="@firebase/functions",C5="@firebase/functions-compat",N5="@firebase/installations",T5="@firebase/installations-compat",_5="@firebase/messaging",A5="@firebase/messaging-compat",S5="@firebase/performance",R5="@firebase/performance-compat",I5="@firebase/remote-config",j5="@firebase/remote-config-compat",P5="@firebase/storage",k5="@firebase/storage-compat",M5="@firebase/firestore",D5="@firebase/ai",O5="@firebase/firestore-compat",L5="firebase",F5="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="[DEFAULT]",V5={[Iy]:"fire-core",[h5]:"fire-core-compat",[m5]:"fire-analytics",[f5]:"fire-analytics-compat",[g5]:"fire-app-check",[p5]:"fire-app-check-compat",[y5]:"fire-auth",[v5]:"fire-auth-compat",[x5]:"fire-rtdb",[w5]:"fire-data-connect",[b5]:"fire-rtdb-compat",[E5]:"fire-fn",[C5]:"fire-fn-compat",[N5]:"fire-iid",[T5]:"fire-iid-compat",[_5]:"fire-fcm",[A5]:"fire-fcm-compat",[S5]:"fire-perf",[R5]:"fire-perf-compat",[I5]:"fire-rc",[j5]:"fire-rc-compat",[P5]:"fire-gcs",[k5]:"fire-gcs-compat",[M5]:"fire-fst",[O5]:"fire-fst-compat",[D5]:"fire-vertex","fire-js":"fire-js",[L5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Map,B5=new Map,Py=new Map;function Z1(t,e){try{t.container.addComponent(e)}catch(r){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Kl(t){const e=t.name;if(Py.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;Py.set(e,t);for(const r of Yu.values())Z1(r,t);for(const r of B5.values())Z1(r,t);return!0}function Hx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xi=new _d("app","Firebase",U5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=F5;function zA(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:jy,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw Xi.create("bad-app-name",{appName:String(s)});if(r||(r=VA()),!r)throw Xi.create("no-options");const i=Yu.get(s);if(i){if(ha(r,i.options)&&ha(n,i.config))return i;throw Xi.create("duplicate-app",{appName:s})}const a=new QO(s);for(const c of Py.values())a.addComponent(c);const l=new q5(r,n,a);return Yu.set(s,l),l}function Wx(t=jy){const e=Yu.get(t);if(!e&&t===jy&&VA())return zA();if(!e)throw Xi.create("no-app",{appName:t});return e}function G5(){return Array.from(Yu.values())}function Zi(t,e,r){var n;let s=(n=V5[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(l.join(" "));return}Kl(new fa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="firebase-heartbeat-database",z5=1,Ku="firebase-heartbeat-store";let a0=null;function HA(){return a0||(a0=a5($5,z5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ku)}catch(r){console.warn(r)}}}}).catch(t=>{throw Xi.create("idb-open",{originalErrorMessage:t.message})})),a0}async function H5(t){try{const r=(await HA()).transaction(Ku),n=await r.objectStore(Ku).get(WA(t));return await r.done,n}catch(e){if(e instanceof oi)Xs.warn(e.message);else{const r=Xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xs.warn(r.message)}}}async function eE(t,e){try{const n=(await HA()).transaction(Ku,"readwrite");await n.objectStore(Ku).put(e,WA(t)),await n.done}catch(r){if(r instanceof oi)Xs.warn(r.message);else{const n=Xi.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Xs.warn(n.message)}}}function WA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5=1024,Q5=30;class Y5{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new J5(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Q5){const a=X5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Xs.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=tE(),{heartbeatsToSend:n,unsentEntries:s}=K5(this._heartbeatsCache.heartbeats),i=vm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Xs.warn(r),""}}}function tE(){return new Date().toISOString().substring(0,10)}function K5(t,e=W5){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),rE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),rE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class J5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OO()?LO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await H5(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return eE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return eE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rE(t){return vm(JSON.stringify({version:2,heartbeats:t})).length}function X5(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(t){Kl(new fa("platform-logger",e=>new u5(e),"PRIVATE")),Kl(new fa("heartbeat",e=>new Y5(e),"PRIVATE")),Zi(Iy,X1,t),Zi(Iy,X1,"esm2017"),Zi("fire-js","")}Z5("");var eL="firebase",tL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi(eL,tL,"app");var nE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eo,QA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,T){function S(){}S.prototype=T.prototype,j.D=T.prototype,j.prototype=new S,j.prototype.constructor=j,j.C=function(k,L,D){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return T.prototype[L].apply(k,P)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,T,S){S||(S=0);var k=Array(16);if(typeof T=="string")for(var L=0;16>L;++L)k[L]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(L=0;16>L;++L)k[L]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=j.g[0],S=j.g[1],L=j.g[2];var D=j.g[3],P=T+(D^S&(L^D))+k[0]+3614090360&4294967295;T=S+(P<<7&4294967295|P>>>25),P=D+(L^T&(S^L))+k[1]+3905402710&4294967295,D=T+(P<<12&4294967295|P>>>20),P=L+(S^D&(T^S))+k[2]+606105819&4294967295,L=D+(P<<17&4294967295|P>>>15),P=S+(T^L&(D^T))+k[3]+3250441966&4294967295,S=L+(P<<22&4294967295|P>>>10),P=T+(D^S&(L^D))+k[4]+4118548399&4294967295,T=S+(P<<7&4294967295|P>>>25),P=D+(L^T&(S^L))+k[5]+1200080426&4294967295,D=T+(P<<12&4294967295|P>>>20),P=L+(S^D&(T^S))+k[6]+2821735955&4294967295,L=D+(P<<17&4294967295|P>>>15),P=S+(T^L&(D^T))+k[7]+4249261313&4294967295,S=L+(P<<22&4294967295|P>>>10),P=T+(D^S&(L^D))+k[8]+1770035416&4294967295,T=S+(P<<7&4294967295|P>>>25),P=D+(L^T&(S^L))+k[9]+2336552879&4294967295,D=T+(P<<12&4294967295|P>>>20),P=L+(S^D&(T^S))+k[10]+4294925233&4294967295,L=D+(P<<17&4294967295|P>>>15),P=S+(T^L&(D^T))+k[11]+2304563134&4294967295,S=L+(P<<22&4294967295|P>>>10),P=T+(D^S&(L^D))+k[12]+1804603682&4294967295,T=S+(P<<7&4294967295|P>>>25),P=D+(L^T&(S^L))+k[13]+4254626195&4294967295,D=T+(P<<12&4294967295|P>>>20),P=L+(S^D&(T^S))+k[14]+2792965006&4294967295,L=D+(P<<17&4294967295|P>>>15),P=S+(T^L&(D^T))+k[15]+1236535329&4294967295,S=L+(P<<22&4294967295|P>>>10),P=T+(L^D&(S^L))+k[1]+4129170786&4294967295,T=S+(P<<5&4294967295|P>>>27),P=D+(S^L&(T^S))+k[6]+3225465664&4294967295,D=T+(P<<9&4294967295|P>>>23),P=L+(T^S&(D^T))+k[11]+643717713&4294967295,L=D+(P<<14&4294967295|P>>>18),P=S+(D^T&(L^D))+k[0]+3921069994&4294967295,S=L+(P<<20&4294967295|P>>>12),P=T+(L^D&(S^L))+k[5]+3593408605&4294967295,T=S+(P<<5&4294967295|P>>>27),P=D+(S^L&(T^S))+k[10]+38016083&4294967295,D=T+(P<<9&4294967295|P>>>23),P=L+(T^S&(D^T))+k[15]+3634488961&4294967295,L=D+(P<<14&4294967295|P>>>18),P=S+(D^T&(L^D))+k[4]+3889429448&4294967295,S=L+(P<<20&4294967295|P>>>12),P=T+(L^D&(S^L))+k[9]+568446438&4294967295,T=S+(P<<5&4294967295|P>>>27),P=D+(S^L&(T^S))+k[14]+3275163606&4294967295,D=T+(P<<9&4294967295|P>>>23),P=L+(T^S&(D^T))+k[3]+4107603335&4294967295,L=D+(P<<14&4294967295|P>>>18),P=S+(D^T&(L^D))+k[8]+1163531501&4294967295,S=L+(P<<20&4294967295|P>>>12),P=T+(L^D&(S^L))+k[13]+2850285829&4294967295,T=S+(P<<5&4294967295|P>>>27),P=D+(S^L&(T^S))+k[2]+4243563512&4294967295,D=T+(P<<9&4294967295|P>>>23),P=L+(T^S&(D^T))+k[7]+1735328473&4294967295,L=D+(P<<14&4294967295|P>>>18),P=S+(D^T&(L^D))+k[12]+2368359562&4294967295,S=L+(P<<20&4294967295|P>>>12),P=T+(S^L^D)+k[5]+4294588738&4294967295,T=S+(P<<4&4294967295|P>>>28),P=D+(T^S^L)+k[8]+2272392833&4294967295,D=T+(P<<11&4294967295|P>>>21),P=L+(D^T^S)+k[11]+1839030562&4294967295,L=D+(P<<16&4294967295|P>>>16),P=S+(L^D^T)+k[14]+4259657740&4294967295,S=L+(P<<23&4294967295|P>>>9),P=T+(S^L^D)+k[1]+2763975236&4294967295,T=S+(P<<4&4294967295|P>>>28),P=D+(T^S^L)+k[4]+1272893353&4294967295,D=T+(P<<11&4294967295|P>>>21),P=L+(D^T^S)+k[7]+4139469664&4294967295,L=D+(P<<16&4294967295|P>>>16),P=S+(L^D^T)+k[10]+3200236656&4294967295,S=L+(P<<23&4294967295|P>>>9),P=T+(S^L^D)+k[13]+681279174&4294967295,T=S+(P<<4&4294967295|P>>>28),P=D+(T^S^L)+k[0]+3936430074&4294967295,D=T+(P<<11&4294967295|P>>>21),P=L+(D^T^S)+k[3]+3572445317&4294967295,L=D+(P<<16&4294967295|P>>>16),P=S+(L^D^T)+k[6]+76029189&4294967295,S=L+(P<<23&4294967295|P>>>9),P=T+(S^L^D)+k[9]+3654602809&4294967295,T=S+(P<<4&4294967295|P>>>28),P=D+(T^S^L)+k[12]+3873151461&4294967295,D=T+(P<<11&4294967295|P>>>21),P=L+(D^T^S)+k[15]+530742520&4294967295,L=D+(P<<16&4294967295|P>>>16),P=S+(L^D^T)+k[2]+3299628645&4294967295,S=L+(P<<23&4294967295|P>>>9),P=T+(L^(S|~D))+k[0]+4096336452&4294967295,T=S+(P<<6&4294967295|P>>>26),P=D+(S^(T|~L))+k[7]+1126891415&4294967295,D=T+(P<<10&4294967295|P>>>22),P=L+(T^(D|~S))+k[14]+2878612391&4294967295,L=D+(P<<15&4294967295|P>>>17),P=S+(D^(L|~T))+k[5]+4237533241&4294967295,S=L+(P<<21&4294967295|P>>>11),P=T+(L^(S|~D))+k[12]+1700485571&4294967295,T=S+(P<<6&4294967295|P>>>26),P=D+(S^(T|~L))+k[3]+2399980690&4294967295,D=T+(P<<10&4294967295|P>>>22),P=L+(T^(D|~S))+k[10]+4293915773&4294967295,L=D+(P<<15&4294967295|P>>>17),P=S+(D^(L|~T))+k[1]+2240044497&4294967295,S=L+(P<<21&4294967295|P>>>11),P=T+(L^(S|~D))+k[8]+1873313359&4294967295,T=S+(P<<6&4294967295|P>>>26),P=D+(S^(T|~L))+k[15]+4264355552&4294967295,D=T+(P<<10&4294967295|P>>>22),P=L+(T^(D|~S))+k[6]+2734768916&4294967295,L=D+(P<<15&4294967295|P>>>17),P=S+(D^(L|~T))+k[13]+1309151649&4294967295,S=L+(P<<21&4294967295|P>>>11),P=T+(L^(S|~D))+k[4]+4149444226&4294967295,T=S+(P<<6&4294967295|P>>>26),P=D+(S^(T|~L))+k[11]+3174756917&4294967295,D=T+(P<<10&4294967295|P>>>22),P=L+(T^(D|~S))+k[2]+718787259&4294967295,L=D+(P<<15&4294967295|P>>>17),P=S+(D^(L|~T))+k[9]+3951481745&4294967295,j.g[0]=j.g[0]+T&4294967295,j.g[1]=j.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,j.g[2]=j.g[2]+L&4294967295,j.g[3]=j.g[3]+D&4294967295}n.prototype.u=function(j,T){T===void 0&&(T=j.length);for(var S=T-this.blockSize,k=this.B,L=this.h,D=0;D<T;){if(L==0)for(;D<=S;)s(this,j,D),D+=this.blockSize;if(typeof j=="string"){for(;D<T;)if(k[L++]=j.charCodeAt(D++),L==this.blockSize){s(this,k),L=0;break}}else for(;D<T;)if(k[L++]=j[D++],L==this.blockSize){s(this,k),L=0;break}}this.h=L,this.o+=T},n.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var T=1;T<j.length-8;++T)j[T]=0;var S=8*this.o;for(T=j.length-8;T<j.length;++T)j[T]=S&255,S/=256;for(this.u(j),j=Array(16),T=S=0;4>T;++T)for(var k=0;32>k;k+=8)j[S++]=this.g[T]>>>k&255;return j};function i(j,T){var S=l;return Object.prototype.hasOwnProperty.call(S,j)?S[j]:S[j]=T(j)}function a(j,T){this.h=T;for(var S=[],k=!0,L=j.length-1;0<=L;L--){var D=j[L]|0;k&&D==T||(S[L]=D,k=!1)}this.g=S}var l={};function c(j){return-128<=j&&128>j?i(j,function(T){return new a([T|0],0>T?-1:0)}):new a([j|0],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return f;if(0>j)return b(u(-j));for(var T=[],S=1,k=0;j>=S;k++)T[k]=j/S|0,S*=4294967296;return new a(T,0)}function d(j,T){if(j.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(j.charAt(0)=="-")return b(d(j.substring(1),T));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(T,8)),k=f,L=0;L<j.length;L+=8){var D=Math.min(8,j.length-L),P=parseInt(j.substring(L,L+D),T);8>D?(D=u(Math.pow(T,D)),k=k.j(D).add(u(P))):(k=k.j(S),k=k.add(u(P)))}return k}var f=c(0),m=c(1),p=c(16777216);t=a.prototype,t.m=function(){if(y(this))return-b(this).m();for(var j=0,T=1,S=0;S<this.g.length;S++){var k=this.i(S);j+=(0<=k?k:4294967296+k)*T,T*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(w(this))return"0";if(y(this))return"-"+b(this).toString(j);for(var T=u(Math.pow(j,6)),S=this,k="";;){var L=R(S,T).g;S=N(S,L.j(T));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(j);if(S=L,w(S))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function w(j){if(j.h!=0)return!1;for(var T=0;T<j.g.length;T++)if(j.g[T]!=0)return!1;return!0}function y(j){return j.h==-1}t.l=function(j){return j=N(this,j),y(j)?-1:w(j)?0:1};function b(j){for(var T=j.g.length,S=[],k=0;k<T;k++)S[k]=~j.g[k];return new a(S,~j.h).add(m)}t.abs=function(){return y(this)?b(this):this},t.add=function(j){for(var T=Math.max(this.g.length,j.g.length),S=[],k=0,L=0;L<=T;L++){var D=k+(this.i(L)&65535)+(j.i(L)&65535),P=(D>>>16)+(this.i(L)>>>16)+(j.i(L)>>>16);k=P>>>16,D&=65535,P&=65535,S[L]=P<<16|D}return new a(S,S[S.length-1]&-2147483648?-1:0)};function N(j,T){return j.add(b(T))}t.j=function(j){if(w(this)||w(j))return f;if(y(this))return y(j)?b(this).j(b(j)):b(b(this).j(j));if(y(j))return b(this.j(b(j)));if(0>this.l(p)&&0>j.l(p))return u(this.m()*j.m());for(var T=this.g.length+j.g.length,S=[],k=0;k<2*T;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<j.g.length;L++){var D=this.i(k)>>>16,P=this.i(k)&65535,B=j.i(L)>>>16,z=j.i(L)&65535;S[2*k+2*L]+=P*z,x(S,2*k+2*L),S[2*k+2*L+1]+=D*z,x(S,2*k+2*L+1),S[2*k+2*L+1]+=P*B,x(S,2*k+2*L+1),S[2*k+2*L+2]+=D*B,x(S,2*k+2*L+2)}for(k=0;k<T;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=T;k<2*T;k++)S[k]=0;return new a(S,0)};function x(j,T){for(;(j[T]&65535)!=j[T];)j[T+1]+=j[T]>>>16,j[T]&=65535,T++}function E(j,T){this.g=j,this.h=T}function R(j,T){if(w(T))throw Error("division by zero");if(w(j))return new E(f,f);if(y(j))return T=R(b(j),T),new E(b(T.g),b(T.h));if(y(T))return T=R(j,b(T)),new E(b(T.g),T.h);if(30<j.g.length){if(y(j)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var S=m,k=T;0>=k.l(j);)S=I(S),k=I(k);var L=V(S,1),D=V(k,1);for(k=V(k,2),S=V(S,2);!w(k);){var P=D.add(k);0>=P.l(j)&&(L=L.add(S),D=P),k=V(k,1),S=V(S,1)}return T=N(j,L.j(T)),new E(L,T)}for(L=f;0<=j.l(T);){for(S=Math.max(1,Math.floor(j.m()/T.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=u(S),P=D.j(T);y(P)||0<P.l(j);)S-=k,D=u(S),P=D.j(T);w(D)&&(D=m),L=L.add(D),j=N(j,P)}return new E(L,j)}t.A=function(j){return R(this,j).h},t.and=function(j){for(var T=Math.max(this.g.length,j.g.length),S=[],k=0;k<T;k++)S[k]=this.i(k)&j.i(k);return new a(S,this.h&j.h)},t.or=function(j){for(var T=Math.max(this.g.length,j.g.length),S=[],k=0;k<T;k++)S[k]=this.i(k)|j.i(k);return new a(S,this.h|j.h)},t.xor=function(j){for(var T=Math.max(this.g.length,j.g.length),S=[],k=0;k<T;k++)S[k]=this.i(k)^j.i(k);return new a(S,this.h^j.h)};function I(j){for(var T=j.g.length+1,S=[],k=0;k<T;k++)S[k]=j.i(k)<<1|j.i(k-1)>>>31;return new a(S,j.h)}function V(j,T){var S=T>>5;T%=32;for(var k=j.g.length-S,L=[],D=0;D<k;D++)L[D]=0<T?j.i(D+S)>>>T|j.i(D+S+1)<<32-T:j.i(D+S);return new a(L,j.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,QA=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,eo=a}).apply(typeof nE<"u"?nE:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YA,su,KA,_f,ky,JA,XA,ZA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,A){return h==Array.prototype||h==Object.prototype||(h[v]=A.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var v=0;v<h.length;++v){var A=h[v];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var n=r(this);function s(h,v){if(v)e:{var A=n;h=h.split(".");for(var O=0;O<h.length-1;O++){var W=h[O];if(!(W in A))break e;A=A[W]}h=h[h.length-1],O=A[h],v=v(O),v!=O&&v!=null&&e(A,h,{configurable:!0,writable:!0,value:v})}}function i(h,v){h instanceof String&&(h+="");var A=0,O=!1,W={next:function(){if(!O&&A<h.length){var X=A++;return{value:v(X,h[X]),done:!1}}return O=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(h){return h||function(){return i(this,function(v,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function u(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function d(h,v,A){return h.call.apply(h.bind,arguments)}function f(h,v,A){if(!h)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,O),h.apply(v,W)}}return function(){return h.apply(v,arguments)}}function m(h,v,A){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function p(h,v){var A=Array.prototype.slice.call(arguments,1);return function(){var O=A.slice();return O.push.apply(O,arguments),h.apply(this,O)}}function w(h,v){function A(){}A.prototype=v.prototype,h.aa=v.prototype,h.prototype=new A,h.prototype.constructor=h,h.Qb=function(O,W,X){for(var te=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)te[lt-2]=arguments[lt];return v.prototype[W].apply(O,te)}}function y(h){const v=h.length;if(0<v){const A=Array(v);for(let O=0;O<v;O++)A[O]=h[O];return A}return[]}function b(h,v){for(let A=1;A<arguments.length;A++){const O=arguments[A];if(c(O)){const W=h.length||0,X=O.length||0;h.length=W+X;for(let te=0;te<X;te++)h[W+te]=O[te]}else h.push(O)}}class N{constructor(v,A){this.i=v,this.j=A,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function x(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=l.navigator;return h&&(h=h.userAgent)?h:""}function R(h){return R[" "](h),h}R[" "]=function(){};var I=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function V(h,v,A){for(const O in h)v.call(A,h[O],O,h)}function j(h,v){for(const A in h)v.call(void 0,h[A],A,h)}function T(h){const v={};for(const A in h)v[A]=h[A];return v}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,v){let A,O;for(let W=1;W<arguments.length;W++){O=arguments[W];for(A in O)h[A]=O[A];for(let X=0;X<S.length;X++)A=S[X],Object.prototype.hasOwnProperty.call(O,A)&&(h[A]=O[A])}}function L(h){var v=1;h=h.split(":");const A=[];for(;0<v&&h.length;)A.push(h.shift()),v--;return h.length&&A.push(h.join(":")),A}function D(h){l.setTimeout(()=>{throw h},0)}function P(){var h=H;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class B{constructor(){this.h=this.g=null}add(v,A){const O=z.get();O.set(v,A),this.h?this.h.next=O:this.g=O,this.h=O}}var z=new N(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(v,A){this.h=v,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,U=!1,H=new B,ie=()=>{const h=l.Promise.resolve(void 0);ee=()=>{h.then(ne)}};var ne=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(A){D(A)}var v=z;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}U=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const A=()=>{};l.addEventListener("test",A,v),l.removeEventListener("test",A,v)}catch{}return h}();function Me(h,v){if(he.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var A=this.type=h.type,O=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(I){e:{try{R(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else A=="mouseover"?v=h.fromElement:A=="mouseout"&&(v=h.toElement);this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ue[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Me.aa.h.call(this)}}w(Me,he);var ue={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),de=0;function G(h,v,A,O,W){this.listener=h,this.proxy=null,this.src=v,this.type=A,this.capture=!!O,this.ha=W,this.key=++de,this.da=this.fa=!1}function me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h){this.src=h,this.g={},this.h=0}Ee.prototype.add=function(h,v,A,O,W){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var te=pe(h,v,O,W);return-1<te?(v=h[te],A||(v.fa=!1)):(v=new G(v,this.src,X,!!O,W),v.fa=A,h.push(v)),v};function Ce(h,v){var A=v.type;if(A in h.g){var O=h.g[A],W=Array.prototype.indexOf.call(O,v,void 0),X;(X=0<=W)&&Array.prototype.splice.call(O,W,1),X&&(me(v),h.g[A].length==0&&(delete h.g[A],h.h--))}}function pe(h,v,A,O){for(var W=0;W<h.length;++W){var X=h[W];if(!X.da&&X.listener==v&&X.capture==!!A&&X.ha==O)return W}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),at={};function ht(h,v,A,O,W){if(Array.isArray(v)){for(var X=0;X<v.length;X++)ht(h,v[X],A,O,W);return null}return A=jo(A),h&&h[Z]?h.K(v,A,u(O)?!!O.capture:!!O,W):Ft(h,v,A,!1,O,W)}function Ft(h,v,A,O,W,X){if(!v)throw Error("Invalid event type");var te=u(W)?!!W.capture:!!W,lt=hn(h);if(lt||(h[ve]=lt=new Ee(h)),A=lt.add(v,A,O,te,X),A.proxy)return A;if(O=rt(),A.proxy=O,O.src=h,O.listener=A,h.addEventListener)_e||(W=te),W===void 0&&(W=!1),h.addEventListener(v.toString(),O,W);else if(h.attachEvent)h.attachEvent(An(v.toString()),O);else if(h.addListener&&h.removeListener)h.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return A}function rt(){function h(A){return v.call(h.src,h.listener,A)}const v=Cs;return h}function wt(h,v,A,O,W){if(Array.isArray(v))for(var X=0;X<v.length;X++)wt(h,v[X],A,O,W);else O=u(O)?!!O.capture:!!O,A=jo(A),h&&h[Z]?(h=h.i,v=String(v).toString(),v in h.g&&(X=h.g[v],A=pe(X,A,O,W),-1<A&&(me(X[A]),Array.prototype.splice.call(X,A,1),X.length==0&&(delete h.g[v],h.h--)))):h&&(h=hn(h))&&(v=h.g[v.toString()],h=-1,v&&(h=pe(v,A,O,W)),(A=-1<h?v[h]:null)&&hr(A))}function hr(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Z])Ce(v.i,h);else{var A=h.type,O=h.proxy;v.removeEventListener?v.removeEventListener(A,O,h.capture):v.detachEvent?v.detachEvent(An(A),O):v.addListener&&v.removeListener&&v.removeListener(O),(A=hn(v))?(Ce(A,h),A.h==0&&(A.src=null,v[ve]=null)):me(h)}}}function An(h){return h in at?at[h]:at[h]="on"+h}function Cs(h,v){if(h.da)h=!0;else{v=new Me(v,this);var A=h.listener,O=h.ha||h.src;h.fa&&hr(h),h=A.call(O,v)}return h}function hn(h){return h=h[ve],h instanceof Ee?h:null}var Ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function jo(h){return typeof h=="function"?h:(h[Ns]||(h[Ns]=function(v){return h.handleEvent(v)}),h[Ns])}function It(){le.call(this),this.i=new Ee(this),this.M=this,this.F=null}w(It,le),It.prototype[Z]=!0,It.prototype.removeEventListener=function(h,v,A,O){wt(this,h,v,A,O)};function bt(h,v){var A,O=h.F;if(O)for(A=[];O;O=O.F)A.push(O);if(h=h.M,O=v.type||v,typeof v=="string")v=new he(v,h);else if(v instanceof he)v.target=v.target||h;else{var W=v;v=new he(O,h),k(v,W)}if(W=!0,A)for(var X=A.length-1;0<=X;X--){var te=v.g=A[X];W=Ts(te,O,!0,v)&&W}if(te=v.g=h,W=Ts(te,O,!0,v)&&W,W=Ts(te,O,!1,v)&&W,A)for(X=0;X<A.length;X++)te=v.g=A[X],W=Ts(te,O,!1,v)&&W}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var A=h.g[v],O=0;O<A.length;O++)me(A[O]);delete h.g[v],h.h--}}this.F=null},It.prototype.K=function(h,v,A,O){return this.i.add(String(h),v,!1,A,O)},It.prototype.L=function(h,v,A,O){return this.i.add(String(h),v,!0,A,O)};function Ts(h,v,A,O){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,X=0;X<v.length;++X){var te=v[X];if(te&&!te.da&&te.capture==A){var lt=te.listener,Ht=te.ha||te.src;te.fa&&Ce(h.i,te),W=lt.call(Ht,O)!==!1&&W}}return W&&!O.defaultPrevented}function Sn(h,v,A){if(typeof h=="function")A&&(h=m(h,A));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(h,v||0)}function Po(h){h.g=Sn(()=>{h.g=null,h.i&&(h.i=!1,Po(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class li extends le{constructor(v,A){super(),this.m=v,this.l=A,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Po(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fn(h){le.call(this),this.h=h,this.g={}}w(fn,le);var Rn=[];function In(h){V(h.g,function(v,A){this.g.hasOwnProperty(A)&&hr(v)},h),h.g={}}fn.prototype.N=function(){fn.aa.N.call(this),In(this)},fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ar=l.JSON.stringify,Sr=l.JSON.parse,_c=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function je(){}je.prototype.h=null;function ze(h){return h.h||(h.h=h.i())}function et(){}var Jt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fr(){he.call(this,"d")}w(fr,he);function jn(){he.call(this,"c")}w(jn,he);var gt={},ci=null;function Qe(){return ci=ci||new It}gt.La="serverreachability";function $d(h){he.call(this,gt.La,h)}w($d,he);function mr(h){const v=Qe();bt(v,new $d(v))}gt.STAT_EVENT="statevent";function mn(h,v){he.call(this,gt.STAT_EVENT,h),this.stat=v}w(mn,he);function ir(h){const v=Qe();bt(v,new mn(v,h))}gt.Ma="timingevent";function zd(h,v){he.call(this,gt.Ma,h),this.size=v}w(zd,he);function _s(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},v)}function As(){this.g=!0}As.prototype.xa=function(){this.g=!1};function Hd(h,v,A,O,W,X){h.info(function(){if(h.g)if(X)for(var te="",lt=X.split("&"),Ht=0;Ht<lt.length;Ht++){var Ke=lt[Ht].split("=");if(1<Ke.length){var Xt=Ke[0];Ke=Ke[1];var Zt=Xt.split("_");te=2<=Zt.length&&Zt[1]=="type"?te+(Xt+"="+Ke+"&"):te+(Xt+"=redacted&")}}else te=null;else te=X;return"XMLHTTP REQ ("+O+") [attempt "+W+"]: "+v+`
`+A+`
`+te})}function lg(h,v,A,O,W,X,te){h.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+W+"]: "+v+`
`+A+`
`+X+" "+te})}function Ss(h,v,A,O){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+cg(h,A)+(O?" "+O:"")})}function ko(h,v){h.info(function(){return"TIMEOUT: "+v})}As.prototype.info=function(){};function cg(h,v){if(!h.g)return v;if(!v)return null;try{var A=JSON.parse(v);if(A){for(h=0;h<A.length;h++)if(Array.isArray(A[h])){var O=A[h];if(!(2>O.length)){var W=O[1];if(Array.isArray(W)&&!(1>W.length)){var X=W[0];if(X!="noop"&&X!="stop"&&X!="close")for(var te=1;te<W.length;te++)W[te]=""}}}}return Ar(A)}catch{return v}}var Rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ka={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ma;function Mo(){}w(Mo,je),Mo.prototype.g=function(){return new XMLHttpRequest},Mo.prototype.i=function(){return{}},Ma=new Mo;function Pn(h,v,A,O){this.j=h,this.i=v,this.l=A,this.R=O||1,this.U=new fn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wd}function Wd(){this.i=null,this.g="",this.h=!1}var Qd={},Ac={};function Sc(h,v,A){h.L=1,h.v=Ua(Kr(v)),h.m=A,h.P=!0,Da(h,null)}function Da(h,v){h.F=Date.now(),Oa(h),h.A=Kr(h.v);var A=h.A,O=h.R;Array.isArray(O)||(O=[String(O)]),sh(A.i,"t",O),h.C=0,A=h.j.J,h.h=new Wd,h.g=bh(h.j,A?v:null,!h.m),0<h.O&&(h.M=new li(m(h.Y,h,h.g),h.O)),v=h.U,A=h.g,O=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(Rn[0]=W.toString()),W=Rn);for(var X=0;X<W.length;X++){var te=ht(A,W[X],O||v.handleEvent,!1,v.h||v);if(!te)break;v.g[te.key]=te}v=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),mr(),Hd(h.i,h.u,h.A,h.l,h.R,h.m)}Pn.prototype.ca=function(h){h=h.target;const v=this.M;v&&Mn(h)==3?v.j():this.Y(h)},Pn.prototype.Y=function(h){try{if(h==this.g)e:{const Zt=Mn(this.g);var v=this.g.Ba();const yi=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||hh(this.g)))){this.J||Zt!=4||v==7||(v==8||0>=yi?mr(3):mr(2)),Ic(this);var A=this.g.Z();this.X=A;t:if(Yd(this)){var O=hh(this.g);h="";var W=O.length,X=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),Do(this);var te="";break t}this.h.i=new l.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,h+=this.h.i.decode(O[v],{stream:!(X&&v==W-1)});O.length=0,this.h.g+=h,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=A==200,lg(this.i,this.u,this.A,this.l,this.R,Zt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,Ht=this.g;if((lt=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(lt)){var Ke=lt;break t}}Ke=null}if(A=Ke)Ss(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ui(this,A);else{this.o=!1,this.s=3,ir(12),Is(this),Do(this);break e}}if(this.P){A=!0;let Jr;for(;!this.J&&this.C<te.length;)if(Jr=ug(this,te),Jr==Ac){Zt==4&&(this.s=4,ir(14),A=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Jr==Qd){this.s=4,ir(15),Ss(this.i,this.l,te,"[Invalid Chunk]"),A=!1;break}else Ss(this.i,this.l,Jr,null),ui(this,Jr);if(Yd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||te.length!=0||this.h.h||(this.s=1,ir(16),A=!1),this.o=this.o&&A,!A)Ss(this.i,this.l,te,"[Invalid Chunked Response]"),Is(this),Do(this);else if(0<te.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Lc(Xt),Xt.M=!0,ir(11))}}else Ss(this.i,this.l,te,null),ui(this,te);Zt==4&&Is(this),this.o&&!this.J&&(Zt==4?xh(this.j,this):(this.o=!1,Oa(this)))}else wg(this.g),A==400&&0<te.indexOf("Unknown SID")?(this.s=3,ir(12)):(this.s=0,ir(13)),Is(this),Do(this)}}}catch{}finally{}};function Yd(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ug(h,v){var A=h.C,O=v.indexOf(`
`,A);return O==-1?Ac:(A=Number(v.substring(A,O)),isNaN(A)?Qd:(O+=1,O+A>v.length?Ac:(v=v.slice(O,O+A),h.C=O+A,v)))}Pn.prototype.cancel=function(){this.J=!0,Is(this)};function Oa(h){h.S=Date.now()+h.I,Rc(h,h.I)}function Rc(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=_s(m(h.ba,h),v)}function Ic(h){h.B&&(l.clearTimeout(h.B),h.B=null)}Pn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ko(this.i,this.A),this.L!=2&&(mr(),ir(17)),Is(this),this.s=2,Do(this)):Rc(this,this.S-h)};function Do(h){h.j.G==0||h.J||xh(h.j,h)}function Is(h){Ic(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,In(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function ui(h,v){try{var A=h.j;if(A.G!=0&&(A.g==h||La(A.h,h))){if(!h.K&&La(A.h,h)&&A.G==3){try{var O=A.Da.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var W=O;if(W[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<h.F)Ha(A),Bo(A);else break e;Oc(A),ir(18)}}else A.za=W[1],0<A.za-A.T&&37500>W[2]&&A.F&&A.v==0&&!A.C&&(A.C=_s(m(A.Za,A),6e3));if(1>=jc(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else ks(A,11)}else if((h.K||A.g==h)&&Ha(A),!x(v))for(W=A.Da.g.parse(v),v=0;v<W.length;v++){let Ke=W[v];if(A.T=Ke[0],Ke=Ke[1],A.G==2)if(Ke[0]=="c"){A.K=Ke[1],A.ia=Ke[2];const Xt=Ke[3];Xt!=null&&(A.la=Xt,A.j.info("VER="+A.la));const Zt=Ke[4];Zt!=null&&(A.Aa=Zt,A.j.info("SVER="+A.Aa));const yi=Ke[5];yi!=null&&typeof yi=="number"&&0<yi&&(O=1.5*yi,A.L=O,A.j.info("backChannelRequestTimeoutMs_="+O)),O=A;const Jr=h.g;if(Jr){const Ya=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ya){var X=O.h;X.g||Ya.indexOf("spdy")==-1&&Ya.indexOf("quic")==-1&&Ya.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Fa(X,X.h),X.h=null))}if(O.D){const Fc=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Fc&&(O.ya=Fc,dt(O.I,O.D,Fc))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-h.F,A.j.info("Handshake RTT: "+A.R+"ms")),O=A;var te=h;if(O.qa=wh(O,O.J?O.ia:null,O.W),te.K){Ue(O.h,te);var lt=te,Ht=O.L;Ht&&(lt.I=Ht),lt.B&&(Ic(lt),Oa(lt)),O.g=te}else yh(O);0<A.i.length&&za(A)}else Ke[0]!="stop"&&Ke[0]!="close"||ks(A,7);else A.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?ks(A,7):Dc(A):Ke[0]!="noop"&&A.l&&A.l.ta(Ke),A.v=0)}}mr(4)}catch{}}var dg=class{constructor(h,v){this.g=h,this.map=v}};function Kd(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function jc(h){return h.h?1:h.g?h.g.size:0}function La(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Fa(h,v){h.g?h.g.add(v):h.h=v}function Ue(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Kd.prototype.cancel=function(){if(this.i=Jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Jd(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const A of h.g.values())v=v.concat(A.D);return v}return y(h.i)}function hg(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var v=[],A=h.length,O=0;O<A;O++)v.push(h[O]);return v}v=[],A=0;for(O in h)v[A++]=h[O];return v}function Yr(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var v=[];h=h.length;for(var A=0;A<h;A++)v.push(A);return v}v=[],A=0;for(const O in h)v[A++]=O;return v}}}function Xd(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var A=Yr(h),O=hg(h),W=O.length,X=0;X<W;X++)v.call(void 0,O[X],A&&A[X],h)}var Pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Va(h,v){if(h){h=h.split("&");for(var A=0;A<h.length;A++){var O=h[A].indexOf("="),W=null;if(0<=O){var X=h[A].substring(0,O);W=h[A].substring(O+1)}else X=h[A];v(X,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function js(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof js){this.h=h.h,Ba(this,h.j),this.o=h.o,this.g=h.g,di(this,h.s),this.l=h.l;var v=h.i,A=new Lo;A.i=v.i,v.g&&(A.g=new Map(v.g),A.h=v.h),Zd(this,A),this.m=h.m}else h&&(v=String(h).match(Pc))?(this.h=!1,Ba(this,v[1]||"",!0),this.o=Ps(v[2]||""),this.g=Ps(v[3]||"",!0),di(this,v[4]),this.l=Ps(v[5]||"",!0),Zd(this,v[6]||"",!0),this.m=Ps(v[7]||"")):(this.h=!1,this.i=new Lo(null,this.h))}js.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Rr(v,eh,!0),":");var A=this.g;return(A||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Rr(v,eh,!0),"@"),h.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&h.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(Rr(A,A.charAt(0)=="/"?kn:fg,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",Rr(A,mg)),h.join("")};function Kr(h){return new js(h)}function Ba(h,v,A){h.j=A?Ps(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function di(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Zd(h,v,A){v instanceof Lo?(h.i=v,pg(h.i,h.h)):(A||(v=Rr(v,th)),h.i=new Lo(v,h.h))}function dt(h,v,A){h.i.set(v,A)}function Ua(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ps(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Rr(h,v,A){return typeof h=="string"?(h=encodeURI(h).replace(v,kc),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function kc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var eh=/[#\/\?@]/g,fg=/[#\?:]/g,kn=/[#\?]/g,th=/[#\?@]/g,mg=/#/g;function Lo(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Zn(h){h.g||(h.g=new Map,h.h=0,h.i&&Va(h.i,function(v,A){h.add(decodeURIComponent(v.replace(/\+/g," ")),A)}))}t=Lo.prototype,t.add=function(h,v){Zn(this),this.i=null,h=hi(this,h);var A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(v),this.h+=1,this};function rh(h,v){Zn(h),v=hi(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function nh(h,v){return Zn(h),v=hi(h,v),h.g.has(v)}t.forEach=function(h,v){Zn(this),this.g.forEach(function(A,O){A.forEach(function(W){h.call(v,W,O,this)},this)},this)},t.na=function(){Zn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),A=[];for(let O=0;O<v.length;O++){const W=h[O];for(let X=0;X<W.length;X++)A.push(v[O])}return A},t.V=function(h){Zn(this);let v=[];if(typeof h=="string")nh(this,h)&&(v=v.concat(this.g.get(hi(this,h))));else{h=Array.from(this.g.values());for(let A=0;A<h.length;A++)v=v.concat(h[A])}return v},t.set=function(h,v){return Zn(this),this.i=null,h=hi(this,h),nh(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function sh(h,v,A){rh(h,v),0<A.length&&(h.i=null,h.g.set(hi(h,v),y(A)),h.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var A=0;A<v.length;A++){var O=v[A];const X=encodeURIComponent(String(O)),te=this.V(O);for(O=0;O<te.length;O++){var W=X;te[O]!==""&&(W+="="+encodeURIComponent(String(te[O]))),h.push(W)}}return this.i=h.join("&")};function hi(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function pg(h,v){v&&!h.j&&(Zn(h),h.i=null,h.g.forEach(function(A,O){var W=O.toLowerCase();O!=W&&(rh(this,O),sh(this,W,A))},h)),h.j=v}function gg(h,v){const A=new As;if(l.Image){const O=new Image;O.onload=p(Ir,A,"TestLoadImage: loaded",!0,v,O),O.onerror=p(Ir,A,"TestLoadImage: error",!1,v,O),O.onabort=p(Ir,A,"TestLoadImage: abort",!1,v,O),O.ontimeout=p(Ir,A,"TestLoadImage: timeout",!1,v,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=h}else v(!1)}function yg(h,v){const A=new As,O=new AbortController,W=setTimeout(()=>{O.abort(),Ir(A,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:O.signal}).then(X=>{clearTimeout(W),X.ok?Ir(A,"TestPingServer: ok",!0,v):Ir(A,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),Ir(A,"TestPingServer: error",!1,v)})}function Ir(h,v,A,O,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),O(A)}catch{}}function ih(){this.g=new _c}function oh(h,v,A){const O=A||"";try{Xd(h,function(W,X){let te=W;u(W)&&(te=Ar(W)),v.push(O+X+"="+encodeURIComponent(te))})}catch(W){throw v.push(O+"type="+encodeURIComponent("_badmap")),W}}function Fo(h){this.l=h.Ub||null,this.j=h.eb||!1}w(Fo,je),Fo.prototype.g=function(){return new qa(this.l,this.j)},Fo.prototype.i=function(h){return function(){return h}}({});function qa(h,v){It.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(qa,It),t=qa.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Vo(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Vo(this)),this.g&&(this.readyState=3,Vo(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ah(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ah(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?fi(this):Vo(this),this.readyState==3&&ah(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,fi(this))},t.Qa=function(h){this.g&&(this.response=h,fi(this))},t.ga=function(){this.g&&fi(this)};function fi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Vo(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var A=v.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=v.next();return h.join(`\r
`)};function Vo(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function lh(h){let v="";return V(h,function(A,O){v+=O,v+=":",v+=A,v+=`\r
`}),v}function Mc(h,v,A){e:{for(O in A){var O=!1;break e}O=!0}O||(A=lh(A),typeof h=="string"?A!=null&&encodeURIComponent(String(A)):dt(h,v,A))}function Et(h){It.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Et,It);var vg=/^https?$/i,xg=["POST","PUT"];t=Et.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,A,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ma.g(),this.v=this.o?ze(this.o):ze(Ma),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(X){ch(this,X);return}if(h=A||"",A=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var W in O)A.set(W,O[W]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const X of O.keys())A.set(X,O.get(X));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(A.keys()).find(X=>X.toLowerCase()=="content-type"),W=l.FormData&&h instanceof l.FormData,!(0<=Array.prototype.indexOf.call(xg,v,void 0))||O||W||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,te]of A)this.g.setRequestHeader(X,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$a(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){ch(this,X)}};function ch(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,uh(h),Ga(h)}function uh(h){h.A||(h.A=!0,bt(h,"complete"),bt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,bt(this,"complete"),bt(this,"abort"),Ga(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ga(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dh(this):this.bb())},t.bb=function(){dh(this)};function dh(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Mn(h)!=4||h.Z()!=2)){if(h.u&&Mn(h)==4)Sn(h.Ea,0,h);else if(bt(h,"readystatechange"),Mn(h)==4){h.h=!1;try{const te=h.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var A;if(!(A=v)){var O;if(O=te===0){var W=String(h.D).match(Pc)[1]||null;!W&&l.self&&l.self.location&&(W=l.self.location.protocol.slice(0,-1)),O=!vg.test(W?W.toLowerCase():"")}A=O}if(A)bt(h,"complete"),bt(h,"success");else{h.m=6;try{var X=2<Mn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",uh(h)}}finally{Ga(h)}}}}function Ga(h,v){if(h.g){$a(h);const A=h.g,O=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||bt(h,"ready");try{A.onreadystatechange=O}catch{}}}function $a(h){h.I&&(l.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Mn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Sr(v)}};function hh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function wg(h){const v={};h=(h.g&&2<=Mn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<h.length;O++){if(x(h[O]))continue;var A=L(h[O]);const W=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const X=v[W]||[];v[W]=X,X.push(A)}j(v,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(h,v,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||v}function fh(h){this.Aa=0,this.i=[],this.j=new As,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mi("baseRetryDelayMs",5e3,h),this.cb=mi("retryDelaySeedMs",1e4,h),this.Wa=mi("forwardChannelMaxRetries",2,h),this.wa=mi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Kd(h&&h.concurrentRequestLimit),this.Da=new ih,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fh.prototype,t.la=8,t.G=1,t.connect=function(h,v,A,O){ir(0),this.W=h,this.H=v||{},A&&O!==void 0&&(this.H.OSID=A,this.H.OAID=O),this.F=this.X,this.I=wh(this,null,this.W),za(this)};function Dc(h){if(mh(h),h.G==3){var v=h.U++,A=Kr(h.I);if(dt(A,"SID",h.K),dt(A,"RID",v),dt(A,"TYPE","terminate"),Uo(h,A),v=new Pn(h,h.j,v),v.L=2,v.v=Ua(Kr(A)),A=!1,l.navigator&&l.navigator.sendBeacon)try{A=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!A&&l.Image&&(new Image().src=v.v,A=!0),A||(v.g=bh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Oa(v)}pi(h)}function Bo(h){h.g&&(Lc(h),h.g.cancel(),h.g=null)}function mh(h){Bo(h),h.u&&(l.clearTimeout(h.u),h.u=null),Ha(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&l.clearTimeout(h.s),h.s=null)}function za(h){if(!Oo(h.h)&&!h.s){h.s=!0;var v=h.Ga;ee||ie(),U||(ee(),U=!0),H.add(v,h),h.B=0}}function bg(h,v){return jc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=_s(m(h.Ga,h,v),Wa(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new Pn(this,this.j,h);let X=this.o;if(this.S&&(X?(X=T(X),k(X,this.S)):X=this.S),this.m!==null||this.O||(W.H=X,X=null),this.P)e:{for(var v=0,A=0;A<this.i.length;A++){t:{var O=this.i[A];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,4096<v){v=A;break e}if(v===4096||A===this.i.length-1){v=A+1;break e}}v=1e3}else v=1e3;v=gh(this,W,v),A=Kr(this.I),dt(A,"RID",h),dt(A,"CVER",22),this.D&&dt(A,"X-HTTP-Session-Id",this.D),Uo(this,A),X&&(this.O?v="headers="+encodeURIComponent(String(lh(X)))+"&"+v:this.m&&Mc(A,this.m,X)),Fa(this.h,W),this.Ua&&dt(A,"TYPE","init"),this.P?(dt(A,"$req",v),dt(A,"SID","null"),W.T=!0,Sc(W,A,null)):Sc(W,A,v),this.G=2}}else this.G==3&&(h?ph(this,h):this.i.length==0||Oo(this.h)||ph(this))};function ph(h,v){var A;v?A=v.l:A=h.U++;const O=Kr(h.I);dt(O,"SID",h.K),dt(O,"RID",A),dt(O,"AID",h.T),Uo(h,O),h.m&&h.o&&Mc(O,h.m,h.o),A=new Pn(h,h.j,A,h.B+1),h.m===null&&(A.H=h.o),v&&(h.i=v.D.concat(h.i)),v=gh(h,A,1e3),A.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Fa(h.h,A),Sc(A,O,v)}function Uo(h,v){h.H&&V(h.H,function(A,O){dt(v,O,A)}),h.l&&Xd({},function(A,O){dt(v,O,A)})}function gh(h,v,A){A=Math.min(h.i.length,A);var O=h.l?m(h.l.Na,h.l,h):null;e:{var W=h.i;let X=-1;for(;;){const te=["count="+A];X==-1?0<A?(X=W[0].g,te.push("ofs="+X)):X=0:te.push("ofs="+X);let lt=!0;for(let Ht=0;Ht<A;Ht++){let Ke=W[Ht].g;const Xt=W[Ht].map;if(Ke-=X,0>Ke)X=Math.max(0,W[Ht].g-100),lt=!1;else try{oh(Xt,te,"req"+Ke+"_")}catch{O&&O(Xt)}}if(lt){O=te.join("&");break e}}}return h=h.i.splice(0,A),v.D=h,O}function yh(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ee||ie(),U||(ee(),U=!0),H.add(v,h),h.v=0}}function Oc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=_s(m(h.Fa,h),Wa(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,vh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=_s(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ir(10),Bo(this),vh(this))};function Lc(h){h.A!=null&&(l.clearTimeout(h.A),h.A=null)}function vh(h){h.g=new Pn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Kr(h.qa);dt(v,"RID","rpc"),dt(v,"SID",h.K),dt(v,"AID",h.T),dt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(v,"TO",h.ja),dt(v,"TYPE","xmlhttp"),Uo(h,v),h.m&&h.o&&Mc(v,h.m,h.o),h.L&&(h.g.I=h.L);var A=h.g;h=h.ia,A.L=1,A.v=Ua(Kr(v)),A.m=null,A.P=!0,Da(A,h)}t.Za=function(){this.C!=null&&(this.C=null,Bo(this),Oc(this),ir(19))};function Ha(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function xh(h,v){var A=null;if(h.g==v){Ha(h),Lc(h),h.g=null;var O=2}else if(La(h.h,v))A=v.D,Ue(h.h,v),O=1;else return;if(h.G!=0){if(v.o)if(O==1){A=v.m?v.m.length:0,v=Date.now()-v.F;var W=h.B;O=Qe(),bt(O,new zd(O,A)),za(h)}else yh(h);else if(W=v.s,W==3||W==0&&0<v.X||!(O==1&&bg(h,v)||O==2&&Oc(h)))switch(A&&0<A.length&&(v=h.h,v.i=v.i.concat(A)),W){case 1:ks(h,5);break;case 4:ks(h,10);break;case 3:ks(h,6);break;default:ks(h,2)}}}function Wa(h,v){let A=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(A*=2),A*v}function ks(h,v){if(h.j.info("Error code "+v),v==2){var A=m(h.fb,h),O=h.Xa;const W=!O;O=new js(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ba(O,"https"),Ua(O),W?gg(O.toString(),A):yg(O.toString(),A)}else ir(2);h.G=0,h.l&&h.l.sa(v),pi(h),mh(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ir(2)):(this.j.info("Failed to ping google.com"),ir(1))};function pi(h){if(h.G=0,h.ka=[],h.l){const v=Jd(h.h);(v.length!=0||h.i.length!=0)&&(b(h.ka,v),b(h.ka,h.i),h.h.i.length=0,y(h.i),h.i.length=0),h.l.ra()}}function wh(h,v,A){var O=A instanceof js?Kr(A):new js(A);if(O.g!="")v&&(O.g=v+"."+O.g),di(O,O.s);else{var W=l.location;O=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var X=new js(null);O&&Ba(X,O),v&&(X.g=v),W&&di(X,W),A&&(X.l=A),O=X}return A=h.D,v=h.ya,A&&v&&dt(O,A,v),dt(O,"VER",h.la),Uo(h,O),O}function bh(h,v,A){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Et(new Fo({eb:A})):new Et(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eh(){}t=Eh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qa(){}Qa.prototype.g=function(h,v){return new jr(h,v)};function jr(h,v){It.call(this),this.g=new fh(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!x(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!x(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new gi(this)}w(jr,It),jr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jr.prototype.close=function(){Dc(this.g)},jr.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.u&&(A={},A.__data__=Ar(h),h=A);v.i.push(new dg(v.Ya++,h)),v.G==3&&za(v)},jr.prototype.N=function(){this.g.l=null,delete this.j,Dc(this.g),delete this.g,jr.aa.N.call(this)};function Ch(h){fr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const A in v){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}w(Ch,fr);function Nh(){jn.call(this),this.status=1}w(Nh,jn);function gi(h){this.g=h}w(gi,Eh),gi.prototype.ua=function(){bt(this.g,"a")},gi.prototype.ta=function(h){bt(this.g,new Ch(h))},gi.prototype.sa=function(h){bt(this.g,new Nh)},gi.prototype.ra=function(){bt(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,jr.prototype.send=jr.prototype.o,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,ZA=function(){return new Qa},XA=function(){return Qe()},JA=gt,ky={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,_f=Rs,ka.COMPLETE="complete",KA=ka,et.EventType=Jt,Jt.OPEN="a",Jt.CLOSE="b",Jt.ERROR="c",Jt.MESSAGE="d",It.prototype.listen=It.prototype.K,su=et,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,YA=Et}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});const sE="@firebase/firestore",iE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new $x("@firebase/firestore");function el(){return ma.logLevel}function we(t,...e){if(ma.logLevel<=He.DEBUG){const r=e.map(Qx);ma.debug(`Firestore (${fc}): ${t}`,...r)}}function Zs(t,...e){if(ma.logLevel<=He.ERROR){const r=e.map(Qx);ma.error(`Firestore (${fc}): ${t}`,...r)}}function io(t,...e){if(ma.logLevel<=He.WARN){const r=e.map(Qx);ma.warn(`Firestore (${fc}): ${t}`,...r)}}function Qx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,eS(t,n,r)}function eS(t,e,r){let n=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Zs(n),new Error(n)}function it(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||eS(e,s,n)}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends oi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(wr.UNAUTHENTICATED))}shutdown(){}}class nL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class sL{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){it(this.o===void 0,42304);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let i=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hs)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(it(typeof n.accessToken=="string",31837,{l:n}),new tS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new wr(e)}}class iL{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=wr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oL{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new iL(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aL{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){it(this.o===void 0,3512);const n=i=>{i.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,we("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(it(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new oE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=lL(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function Be(t,e){return t<e?-1:t>e?1:0}function My(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),s=e.codePointAt(r);if(n!==s){if(n<128&&s<128)return Be(n,s);{const i=rS(),a=cL(i.encode(aE(t,r)),i.encode(aE(e,r)));return a!==0?a:Be(n,s)}}r+=n>65535?2:1}return Be(t.length,e.length)}function aE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function cL(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return Be(t[r],e[r]);return Be(t.length,e.length)}function Jl(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="__name__";class ns{constructor(e,r,n){r===void 0?r=0:r>e.length&&ke(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&ke(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ns.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ns?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=ns.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return Be(e.length,r.length)}static compareSegments(e,r){const n=ns.isNumericId(e),s=ns.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?ns.extractNumericId(e).compare(ns.extractNumericId(r)):My(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return eo.fromString(e.substring(4,e.length-2))}}class mt extends ns{construct(e,r,n){return new mt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new mt(r)}static emptyPath(){return new mt([])}}const uL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends ns{construct(e,r,n){return new lr(e,r,n)}static isValidIdentifier(e){return uL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lE}static keyField(){return new lr([lE])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(n+=l,s++):(i(),s++)}if(i(),a)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(r)}static emptyPath(){return new lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(mt.fromString(e))}static fromName(e){return new Ae(mt.fromString(e).popFirst(5))}static empty(){return new Ae(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return mt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e,r){if(!r)throw new ye(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dL(t,e,r,n){if(e===!0&&n===!0)throw new ye(re.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function cE(t){if(!Ae.isDocumentKey(t))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uE(t){if(Ae.isDocumentKey(t))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function an(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=gp(t);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t,e){const r={typeString:t};return e&&(r.value=e),r}function Sd(t,e){if(!sS(t))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(s&&typeof a!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new ye(re.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=-62135596800,hE=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*hE);return new Ve(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<dE)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hE}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sd(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:Gt("string",Ve._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Ve(0,0))}static max(){return new De(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=-1;function hL(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=De.fromTimestamp(n===1e9?new Ve(r+1,0):new Ve(r,n));return new oo(s,Ae.empty(),e)}function fL(t){return new oo(t.readTime,t.key,Ju)}class oo{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new oo(De.min(),Ae.empty(),Ju)}static max(){return new oo(De.max(),Ae.empty(),Ju)}}function mL(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ae.comparator(t.documentKey,e.documentKey),r!==0?r:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==pL)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new se((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof se?r:se.resolve(r)}catch(r){return se.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):se.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):se.reject(r)}static resolve(e){return new se((r,n)=>{r(e)})}static reject(e){return new se((r,n)=>{n(e)})}static waitFor(e){return new se((r,n)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&r()},c=>n(c))}),a=!0,i===s&&r()})}static or(e){let r=se.resolve(!1);for(const n of e)r=r.next(s=>s?se.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new se((n,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;r(e[u]).next(d=>{a[u]=d,++l,l===i&&n(a)},d=>s(d))}})}static doWhile(e,r){return new se((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function yL(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function pc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this._e(n),this.ae=n=>r.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}yp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=-1;function vp(t){return t==null}function xm(t){return t===0&&1/t==-1/0}function vL(t){return typeof t=="number"&&Number.isInteger(t)&&!xm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="";function xL(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=fE(e)),e=wL(t.get(r),e);return fE(e)}function wL(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case iS:r+="";break;default:r+=i}}return r}function fE(t){return t+iS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Eo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function oS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,r){this.comparator=e,this.root=r||ar.EMPTY}insert(e,r){return new Rt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jh(this.root,e,this.comparator,!0)}}class Jh{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ar{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ar.RED,this.left=s??ar.EMPTY,this.right=i??ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ar(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ar.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new ar(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(e){return new pE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Kt(this.comparator);return r.data=e,r}}class pE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new sn([])}unionWith(e){let r=new Kt(lr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new sn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new aS("Invalid base64 string: "+i):i}}(e);return new dr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new dr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const bL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(t){if(it(!!t,39018),typeof t=="string"){let e=0;const r=bL.exec(t);if(it(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function lo(t){return typeof t=="string"?dr.fromBase64String(t):dr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="server_timestamp",cS="__type__",uS="__previous_value__",dS="__local_write_time__";function Jx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[cS])===null||r===void 0?void 0:r.stringValue)===lS}function xp(t){const e=t.mapValue.fields[uS];return Jx(e)?xp(e):e}function Xu(t){const e=ao(t.mapValue.fields[dS].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,r,n,s,i,a,l,c,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const wm="(default)";class Zu{constructor(e,r){this.projectId=e,this.database=r||wm}static empty(){return new Zu("","")}get isDefaultDatabase(){return this.database===wm}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="__type__",fS="__max__",Xh={mapValue:{fields:{__type__:{stringValue:fS}}}},mS="__vector__",bm="value";function co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jx(t)?4:NL(t)?9007199254740991:CL(t)?10:11:ke(28295,{value:t})}function xs(t,e){if(t===e)return!0;const r=co(t);if(r!==co(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xu(t).isEqual(Xu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=ao(s.timestampValue),l=ao(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return lo(s.bytesValue).isEqual(lo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Dt(s.geoPointValue.latitude)===Dt(i.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Dt(s.integerValue)===Dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Dt(s.doubleValue),l=Dt(i.doubleValue);return a===l?xm(a)===xm(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],xs);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(mE(a)!==mE(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!xs(a[c],l[c])))return!1;return!0}(t,e);default:return ke(52216,{left:t})}}function ed(t,e){return(t.values||[]).find(r=>xs(r,e))!==void 0}function Xl(t,e){if(t===e)return 0;const r=co(t),n=co(e);if(r!==n)return Be(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Dt(i.integerValue||i.doubleValue),c=Dt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return gE(t.timestampValue,e.timestampValue);case 4:return gE(Xu(t),Xu(e));case 5:return My(t.stringValue,e.stringValue);case 6:return function(i,a){const l=lo(i),c=lo(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Be(l[u],c[u]);if(d!==0)return d}return Be(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Be(Dt(i.latitude),Dt(a.latitude));return l!==0?l:Be(Dt(i.longitude),Dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yE(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,c,u,d;const f=i.fields||{},m=a.fields||{},p=(l=f[bm])===null||l===void 0?void 0:l.arrayValue,w=(c=m[bm])===null||c===void 0?void 0:c.arrayValue,y=Be(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:yE(p,w)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Xh.mapValue&&a===Xh.mapValue)return 0;if(i===Xh.mapValue)return 1;if(a===Xh.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=My(c[f],d[f]);if(m!==0)return m;const p=Xl(l[c[f]],u[d[f]]);if(p!==0)return p}return Be(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ke(23264,{le:r})}}function gE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const r=ao(t),n=ao(e),s=Be(r.seconds,n.seconds);return s!==0?s:Be(r.nanos,n.nanos)}function yE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Xl(r[s],n[s]);if(i)return i}return Be(r.length,n.length)}function Zl(t){return Dy(t)}function Dy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ao(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return lo(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ae.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Dy(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Dy(r.fields[a])}`;return s+"}"}(t.mapValue):ke(61005,{value:t})}function Af(t){switch(co(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xp(t);return e?16+Af(e):16;case 5:return 2*t.stringValue.length;case 6:return lo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+Af(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Eo(n.fields,(i,a)=>{s+=i.length+Af(a)}),s}(t.mapValue);default:throw ke(13486,{value:t})}}function vE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Oy(t){return!!t&&"integerValue"in t}function Xx(t){return!!t&&"arrayValue"in t}function xE(t){return!!t&&"nullValue"in t}function wE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sf(t){return!!t&&"mapValue"in t}function CL(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[hS])===null||r===void 0?void 0:r.stringValue)===mS}function Cu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Eo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Cu(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Cu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function NL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.value=e}static empty(){return new Gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Sf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cu(r)}setAll(e){let r=lr.emptyPath(),n={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}a?n[l.lastSegment()]=Cu(a):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Sf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return xs(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Sf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Eo(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Gr(Cu(this.value))}}function pS(t){const e=[];return Eo(t.fields,(r,n)=>{const s=new lr([r]);if(Sf(n)){const i=pS(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,r,n,s,i,a,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Er(e,0,De.min(),De.min(),De.min(),Gr.empty(),0)}static newFoundDocument(e,r,n,s){return new Er(e,1,r,De.min(),n,s,0)}static newNoDocument(e,r){return new Er(e,2,r,De.min(),De.min(),Gr.empty(),0)}static newUnknownDocument(e,r){return new Er(e,3,r,De.min(),De.min(),Gr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,r){this.position=e,this.inclusive=r}}function bE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=Ae.comparator(Ae.fromName(a.referenceValue),r.key):n=Xl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function EE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!xs(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,r="asc"){this.field=e,this.dir=r}}function TL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{}class qt extends gS{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new AL(e,r,n):r==="array-contains"?new IL(e,n):r==="in"?new jL(e,n):r==="not-in"?new PL(e,n):r==="array-contains-any"?new kL(e,n):new qt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new SL(e,n):new RL(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Xl(r,this.value)):r!==null&&co(this.value)===co(r)&&this.matchesComparison(Xl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends gS{constructor(e,r){super(),this.filters=e,this.op=r,this.he=null}static create(e,r){return new Qn(e,r)}matches(e){return yS(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function yS(t){return t.op==="and"}function vS(t){return _L(t)&&yS(t)}function _L(t){for(const e of t.filters)if(e instanceof Qn)return!1;return!0}function Ly(t){if(t instanceof qt)return t.field.canonicalString()+t.op.toString()+Zl(t.value);if(vS(t))return t.filters.map(e=>Ly(e)).join(",");{const e=t.filters.map(r=>Ly(r)).join(",");return`${t.op}(${e})`}}function xS(t,e){return t instanceof qt?function(n,s){return s instanceof qt&&n.op===s.op&&n.field.isEqual(s.field)&&xs(n.value,s.value)}(t,e):t instanceof Qn?function(n,s){return s instanceof Qn&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,l)=>i&&xS(a,s.filters[l]),!0):!1}(t,e):void ke(19439)}function wS(t){return t instanceof qt?function(r){return`${r.field.canonicalString()} ${r.op} ${Zl(r.value)}`}(t):t instanceof Qn?function(r){return r.op.toString()+" {"+r.getFilters().map(wS).join(" ,")+"}"}(t):"Filter"}class AL extends qt{constructor(e,r,n){super(e,r,n),this.key=Ae.fromName(n.referenceValue)}matches(e){const r=Ae.comparator(e.key,this.key);return this.matchesComparison(r)}}class SL extends qt{constructor(e,r){super(e,"in",r),this.keys=bS("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class RL extends qt{constructor(e,r){super(e,"not-in",r),this.keys=bS("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function bS(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ae.fromName(n.referenceValue))}class IL extends qt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Xx(r)&&ed(r.arrayValue,this.value)}}class jL extends qt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ed(this.value.arrayValue,r)}}class PL extends qt{constructor(e,r){super(e,"not-in",r)}matches(e){if(ed(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!ed(this.value.arrayValue,r)}}class kL extends qt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Xx(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ed(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,r=null,n=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function CE(t,e=null,r=[],n=[],s=null,i=null,a=null){return new ML(t,e,r,n,s,i,a)}function Zx(t){const e=Oe(t);if(e.Pe===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Ly(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),vp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Zl(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Zl(n)).join(",")),e.Pe=r}return e.Pe}function ew(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!TL(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!xS(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!EE(t.startAt,e.startAt)&&EE(t.endAt,e.endAt)}function Fy(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,r=null,n=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function DL(t,e,r,n,s,i,a,l){return new gc(t,e,r,n,s,i,a,l)}function wp(t){return new gc(t)}function NE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ES(t){return t.collectionGroup!==null}function Nu(t){const e=Oe(t);if(e.Te===null){e.Te=[];const r=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Kt(lr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Te.push(new td(i,n))}),r.has(lr.keyField().canonicalString())||e.Te.push(new td(lr.keyField(),n))}return e.Te}function fs(t){const e=Oe(t);return e.Ie||(e.Ie=OL(e,Nu(t))),e.Ie}function OL(t,e){if(t.limitType==="F")return CE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new td(s.field,i)});const r=t.endAt?new Em(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Em(t.startAt.position,t.startAt.inclusive):null;return CE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Vy(t,e){const r=t.filters.concat([e]);return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function By(t,e,r){return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function bp(t,e){return ew(fs(t),fs(e))&&t.limitType===e.limitType}function CS(t){return`${Zx(fs(t))}|lt:${t.limitType}`}function tl(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>wS(s)).join(", ")}]`),vp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Zl(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Zl(s)).join(",")),`Target(${n})`}(fs(t))}; limitType=${t.limitType})`}function Ep(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ae.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Nu(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,l,c){const u=bE(a,l,c);return a.inclusive?u<=0:u<0}(n.startAt,Nu(n),s)||n.endAt&&!function(a,l,c){const u=bE(a,l,c);return a.inclusive?u>=0:u>0}(n.endAt,Nu(n),s))}(t,e)}function LL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NS(t){return(e,r)=>{let n=!1;for(const s of Nu(t)){const i=FL(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function FL(t,e,r){const n=t.field.isKeyField()?Ae.comparator(e.key,r.key):function(i,a,l){const c=a.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Xl(c,u):ke(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ke(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return oS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=new Rt(Ae.comparator);function ei(){return VL}const TS=new Rt(Ae.comparator);function iu(...t){let e=TS;for(const r of t)e=e.insert(r.key,r);return e}function _S(t){let e=TS;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Qo(){return Tu()}function AS(){return Tu()}function Tu(){return new Ta(t=>t.toString(),(t,e)=>t.isEqual(e))}const BL=new Rt(Ae.comparator),UL=new Kt(Ae.comparator);function We(...t){let e=UL;for(const r of t)e=e.add(r);return e}const qL=new Kt(Be);function GL(){return qL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xm(e)?"-0":e}}function SS(t){return{integerValue:""+t}}function RS(t,e){return vL(e)?SS(e):tw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(){this._=void 0}}function $L(t,e,r){return t instanceof Cm?function(s,i){const a={fields:{[cS]:{stringValue:lS},[dS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Jx(i)&&(i=xp(i)),i&&(a.fields[uS]=i),{mapValue:a}}(r,e):t instanceof rd?jS(t,e):t instanceof nd?PS(t,e):function(s,i){const a=IS(s,i),l=TE(a)+TE(s.Ee);return Oy(a)&&Oy(s.Ee)?SS(l):tw(s.serializer,l)}(t,e)}function zL(t,e,r){return t instanceof rd?jS(t,e):t instanceof nd?PS(t,e):r}function IS(t,e){return t instanceof sd?function(n){return Oy(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Cm extends Cp{}class rd extends Cp{constructor(e){super(),this.elements=e}}function jS(t,e){const r=kS(e);for(const n of t.elements)r.some(s=>xs(s,n))||r.push(n);return{arrayValue:{values:r}}}class nd extends Cp{constructor(e){super(),this.elements=e}}function PS(t,e){let r=kS(e);for(const n of t.elements)r=r.filter(s=>!xs(s,n));return{arrayValue:{values:r}}}class sd extends Cp{constructor(e,r){super(),this.serializer=e,this.Ee=r}}function TE(t){return Dt(t.integerValue||t.doubleValue)}function kS(t){return Xx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,r){this.field=e,this.transform=r}}function WL(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof rd&&s instanceof rd||n instanceof nd&&s instanceof nd?Jl(n.elements,s.elements,xs):n instanceof sd&&s instanceof sd?xs(n.Ee,s.Ee):n instanceof Cm&&s instanceof Cm}(t.transform,e.transform)}class QL{constructor(e,r){this.version=e,this.transformResults=r}}class Hn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let Np=class{};function MS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rw(t.key,Hn.none()):new Rd(t.key,t.data,Hn.none());{const r=t.data,n=Gr.empty();let s=new Kt(lr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new Co(t.key,n,new sn(s.toArray()),Hn.none())}}function YL(t,e,r){t instanceof Rd?function(s,i,a){const l=s.value.clone(),c=AE(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Co?function(s,i,a){if(!Rf(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=AE(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(DS(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function _u(t,e,r,n){return t instanceof Rd?function(i,a,l,c){if(!Rf(i.precondition,a))return l;const u=i.value.clone(),d=SE(i.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Co?function(i,a,l,c){if(!Rf(i.precondition,a))return l;const u=SE(i.fieldTransforms,c,a),d=a.data;return d.setAll(DS(i)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,l){return Rf(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,r)}function KL(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=IS(n.transform,s||null);i!=null&&(r===null&&(r=Gr.empty()),r.set(n.field,i))}return r||null}function _E(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Jl(n,s,(i,a)=>WL(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rd extends Np{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Co extends Np{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function DS(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function AE(t,e,r){const n=new Map;it(t.length===r.length,32656,{Ae:r.length,Re:t.length});for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);n.set(i.field,zL(a,l,r[s]))}return n}function SE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,$L(i,a,e))}return n}class rw extends Np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JL extends Np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&YL(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=_u(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=_u(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=AS();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=r.has(s.key)?null:l;const c=MS(a,l);c!==null&&n.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(De.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),We())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(r,n)=>_E(r,n))&&Jl(this.baseMutations,e.baseMutations,(r,n)=>_E(r,n))}}class nw{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){it(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let s=function(){return BL}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new nw(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Je;function tF(t){switch(t){case re.OK:return ke(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function OS(t){if(t===void 0)return Zs("GRPC error has no .code"),re.UNKNOWN;switch(t){case Bt.OK:return re.OK;case Bt.CANCELLED:return re.CANCELLED;case Bt.UNKNOWN:return re.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return re.INTERNAL;case Bt.UNAVAILABLE:return re.UNAVAILABLE;case Bt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Bt.NOT_FOUND:return re.NOT_FOUND;case Bt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Bt.ABORTED:return re.ABORTED;case Bt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Bt.DATA_LOSS:return re.DATA_LOSS;default:return ke(39323,{code:t})}}(Je=Bt||(Bt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=new eo([4294967295,4294967295],0);function RE(t){const e=rS().encode(t),r=new QA;return r.update(e),new Uint8Array(r.digest())}function IE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new eo([r,n],0),new eo([s,i],0)]}class sw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ou(`Invalid padding: ${r}`);if(n<0)throw new ou(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ou(`Invalid padding when bitmap length is 0: ${r}`);this.fe=8*e.length-r,this.ge=eo.fromNumber(this.fe)}pe(e,r,n){let s=e.add(r.multiply(eo.fromNumber(n)));return s.compare(rF)===1&&(s=new eo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const r=RE(e),[n,s]=IE(r);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);if(!this.ye(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new sw(i,s,r);return n.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const r=RE(e),[n,s]=IE(r);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);this.we(a)}}we(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Id.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Tp(De.min(),s,new Rt(Be),ei(),We())}}class Id{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Id(n,r,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,r,n,s){this.Se=e,this.removedTargetIds=r,this.key=n,this.be=s}}class LS{constructor(e,r){this.targetId=e,this.De=r}}class FS{constructor(e,r,n=dr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class jE{constructor(){this.ve=0,this.Ce=PE(),this.Fe=dr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=We(),r=We(),n=We();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:ke(38017,{changeType:i})}}),new Id(this.Fe,this.Me,e,r,n)}ke(){this.xe=!1,this.Ce=PE()}qe(e,r){this.xe=!0,this.Ce=this.Ce.insert(e,r)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class nF{constructor(e){this.We=e,this.Ge=new Map,this.ze=ei(),this.je=Zh(),this.Je=Zh(),this.He=new Rt(Be)}Ye(e){for(const r of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(r,e.be):this.Xe(r,e.key,e.be);for(const r of e.removedTargetIds)this.Xe(r,e.key,e.be)}et(e){this.forEachTarget(e,r=>{const n=this.tt(r);switch(e.state){case 0:this.nt(r)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(r);break;case 3:this.nt(r)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(r)&&(this.rt(r),n.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Ge.forEach((n,s)=>{this.nt(s)&&r(s)})}it(e){const r=e.targetId,n=e.De.count,s=this.st(r);if(s){const i=s.target;if(Fy(i))if(n===0){const a=new Ae(i.path);this.Xe(r,a,Er.newNoDocument(a,De.min()))}else it(n===1,20013,{expectedCount:n});else{const a=this.ot(r);if(a!==n){const l=this._t(e),c=l?this.ut(l,e,a):1;if(c!==0){this.rt(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(r,u)}}}}}_t(e){const r=e.De.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,l;try{a=lo(n).toUint8Array()}catch(c){if(c instanceof aS)return io("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new sw(a,s,i)}catch(c){return io(c instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,r,n){return r.De.count===n-this.ht(e,r.targetId)?0:2}ht(e,r){const n=this.We.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(r,i,null),s++)}),s}Pt(e){const r=new Map;this.Ge.forEach((i,a)=>{const l=this.st(a);if(l){if(i.current&&Fy(l.target)){const c=new Ae(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,Er.newNoDocument(c,e))}i.Ne&&(r.set(a,i.Le()),i.ke())}});let n=We();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.ze.forEach((i,a)=>a.setReadTime(e));const s=new Tp(e,r,this.He,this.ze,n);return this.ze=ei(),this.je=Zh(),this.Je=Zh(),this.He=new Rt(Be),s}Ze(e,r){if(!this.nt(e))return;const n=this.It(e,r.key)?2:0;this.tt(e).qe(r.key,n),this.ze=this.ze.insert(r.key,r),this.je=this.je.insert(r.key,this.Tt(r.key).add(e)),this.Je=this.Je.insert(r.key,this.dt(r.key).add(e))}Xe(e,r,n){if(!this.nt(e))return;const s=this.tt(e);this.It(e,r)?s.qe(r,1):s.Qe(r),this.Je=this.Je.insert(r,this.dt(r).delete(e)),this.Je=this.Je.insert(r,this.dt(r).add(e)),n&&(this.ze=this.ze.insert(r,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const r=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let r=this.Ge.get(e);return r||(r=new jE,this.Ge.set(e,r)),r}dt(e){let r=this.Je.get(e);return r||(r=new Kt(Be),this.Je=this.Je.insert(e,r)),r}Tt(e){let r=this.je.get(e);return r||(r=new Kt(Be),this.je=this.je.insert(e,r)),r}nt(e){const r=this.st(e)!==null;return r||we("WatchChangeAggregator","Detected inactive target",e),r}st(e){const r=this.Ge.get(e);return r&&r.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jE),this.We.getRemoteKeysForTarget(e).forEach(r=>{this.Xe(e,r,null)})}It(e,r){return this.We.getRemoteKeysForTarget(e).has(r)}}function Zh(){return new Rt(Ae.comparator)}function PE(){return new Rt(Ae.comparator)}const sF={asc:"ASCENDING",desc:"DESCENDING"},iF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oF={and:"AND",or:"OR"};class aF{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Uy(t,e){return t.useProto3Json||vp(e)?e:{value:e}}function Nm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lF(t,e){return Nm(t,e.toTimestamp())}function ms(t){return it(!!t,49232),De.fromTimestamp(function(r){const n=ao(r);return new Ve(n.seconds,n.nanos)}(t))}function iw(t,e){return qy(t,e).canonicalString()}function qy(t,e){const r=function(s){return new mt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function BS(t){const e=mt.fromString(t);return it(zS(e),10190,{key:e.toString()}),e}function Gy(t,e){return iw(t.databaseId,e.path)}function l0(t,e){const r=BS(e);if(r.get(1)!==t.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ae(qS(r))}function US(t,e){return iw(t.databaseId,e)}function cF(t){const e=BS(t);return e.length===4?mt.emptyPath():qS(e)}function $y(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qS(t){return it(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kE(t,e,r){return{name:Gy(t,e),fields:r.value.mapValue.fields}}function uF(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ke(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(it(d===void 0||typeof d=="string",58123),dr.fromBase64String(d||"")):(it(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),dr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const d=u.code===void 0?re.UNKNOWN:OS(u.code);return new ye(d,u.message||"")}(a);r=new FS(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=l0(t,n.document.name),i=ms(n.document.updateTime),a=n.document.createTime?ms(n.document.createTime):De.min(),l=new Gr({mapValue:{fields:n.document.fields}}),c=Er.newFoundDocument(s,i,a,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new If(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=l0(t,n.document),i=n.readTime?ms(n.readTime):De.min(),a=Er.newNoDocument(s,i),l=n.removedTargetIds||[];r=new If([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=l0(t,n.document),i=n.removedTargetIds||[];r=new If([],i,s,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new eF(s,i),l=n.targetId;r=new LS(l,a)}}return r}function dF(t,e){let r;if(e instanceof Rd)r={update:kE(t,e.key,e.value)};else if(e instanceof rw)r={delete:Gy(t,e.key)};else if(e instanceof Co)r={update:kE(t,e.key,e.data),updateMask:wF(e.fieldMask)};else{if(!(e instanceof JL))return ke(16599,{Rt:e.type});r={verify:Gy(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const l=a.transform;if(l instanceof Cm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof rd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof nd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sd)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw ke(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:lF(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ke(27497)}(t,e.precondition)),r}function hF(t,e){return t&&t.length>0?(it(e!==void 0,14353),t.map(r=>function(s,i){let a=s.updateTime?ms(s.updateTime):ms(i);return a.isEqual(De.min())&&(a=ms(i)),new QL(a,s.transformResults||[])}(r,e))):[]}function fF(t,e){return{documents:[US(t,e.path)]}}function mF(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=US(t,s);const i=function(u){if(u.length!==0)return $S(Qn.create(u,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:rl(m.field),direction:yF(m.dir)}}(d))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=Uy(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:r,parent:s}}function pF(t){let e=cF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){it(n===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];r.where&&(i=function(f){const m=GS(f);return m instanceof Qn&&vS(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(m=>function(w){return new td(nl(w.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,vp(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(f){const m=!!f.before,p=f.values||[];return new Em(p,m)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const m=!f.before,p=f.values||[];return new Em(p,m)}(r.endAt)),DL(e,s,a,i,l,"F",c,u)}function gF(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function GS(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=nl(r.unaryFilter.field);return qt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=nl(r.unaryFilter.field);return qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=nl(r.unaryFilter.field);return qt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=nl(r.unaryFilter.field);return qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}}(t):t.fieldFilter!==void 0?function(r){return qt.create(nl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Qn.create(r.compositeFilter.filters.map(n=>GS(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}}(r.compositeFilter.op))}(t):ke(30097,{filter:t})}function yF(t){return sF[t]}function vF(t){return iF[t]}function xF(t){return oF[t]}function rl(t){return{fieldPath:t.canonicalString()}}function nl(t){return lr.fromServerFormat(t.fieldPath)}function $S(t){return t instanceof qt?function(r){if(r.op==="=="){if(wE(r.value))return{unaryFilter:{field:rl(r.field),op:"IS_NAN"}};if(xE(r.value))return{unaryFilter:{field:rl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(wE(r.value))return{unaryFilter:{field:rl(r.field),op:"IS_NOT_NAN"}};if(xE(r.value))return{unaryFilter:{field:rl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(r.field),op:vF(r.op),value:r.value}}}(t):t instanceof Qn?function(r){const n=r.getFilters().map(s=>$S(s));return n.length===1?n[0]:{compositeFilter:{op:xF(r.op),filters:n}}}(t):ke(54877,{filter:t})}function wF(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function zS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,r,n,s,i=De.min(),a=De.min(),l=dr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e){this.gt=e}}function EF(t){const e=pF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?By(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.Dn=new NF}addToCollectionParentIndex(e,r){return this.Dn.add(r),se.resolve()}getCollectionParents(e,r){return se.resolve(this.Dn.getEntries(r))}addFieldIndex(e,r){return se.resolve()}deleteFieldIndex(e,r){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,r){return se.resolve()}getDocumentsMatchingTarget(e,r){return se.resolve(null)}getIndexType(e,r){return se.resolve(0)}getFieldIndexes(e,r){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,r){return se.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,r){return se.resolve(oo.min())}updateCollectionGroup(e,r,n){return se.resolve()}updateIndexEntries(e,r){return se.resolve()}}class NF{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Kt(mt.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Kt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HS=41943040;class Ur{static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(HS,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ec(0)}static ur(){return new ec(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="LruGarbageCollector",TF=1048576;function OE([t,e],[r,n]){const s=Be(t,r);return s===0?Be(e,n):s}class _F{constructor(e){this.Tr=e,this.buffer=new Kt(OE),this.Ir=0}dr(){return++this.Ir}Er(e){const r=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();OE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class AF{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){we(DE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){pc(r)?we(DE,"Ignoring IndexedDB error during garbage collection: ",r):await mc(r)}await this.Rr(3e5)})}}class SF{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.mr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return se.resolve(yp.ue);const n=new _F(r);return this.Vr.forEachTarget(e,s=>n.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>n.Er(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Vr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(ME)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ME):this.pr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,r){let n,s,i,a,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),el()<=He.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function RF(t,e){return new SF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(){this.changes=new Ta(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?se.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&_u(n.mutation,s,sn.empty(),Ve.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,We()).next(()=>n))}getLocalViewOfDocuments(e,r,n=We()){const s=Qo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=iu();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Qo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,We()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,n,s){let i=ei();const a=Tu(),l=function(){return Tu()}();return r.forEach((c,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Co)?i=i.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),_u(d.mutation,u,d.mutation.getFieldMask(),Ve.now())):a.set(u.key,sn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>a.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new jF(d,(f=a.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=Tu();let s=new Rt((a,l)=>a-l),i=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||sn.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(s.get(l.batchId)||We()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=AS();d.forEach(m=>{if(!i.has(m)){const p=MS(r.get(m),n.get(m));p!==null&&f.set(m,p),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return se.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return Ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):ES(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):se.resolve(Qo());let l=Ju,c=i;return a.next(u=>se.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(d)?se.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,We())).next(d=>({batchId:l,changes:_S(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ae(r)).next(n=>{let s=iu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=iu();return this.indexManager.getCollectionParents(e,i).next(l=>se.forEach(l,c=>{const u=function(f,m){return new gc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(d=>{d.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,Er.newInvalidDocument(d)))});let l=iu();return a.forEach((c,u)=>{const d=i.get(c);d!==void 0&&_u(d.mutation,u,sn.empty(),Ve.now()),Ep(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,r){return se.resolve(this.Br.get(r))}saveBundleMetadata(e,r){return this.Br.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ms(s.createTime)}}(r)),se.resolve()}getNamedQuery(e,r){return se.resolve(this.Lr.get(r))}saveNamedQuery(e,r){return this.Lr.set(r.name,function(s){return{name:s.name,query:EF(s.bundledQuery),readTime:ms(s.readTime)}}(r)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(){this.overlays=new Rt(Ae.comparator),this.kr=new Map}getOverlay(e,r){return se.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Qo();return se.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.wt(e,r,i)}),se.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.kr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(n)),se.resolve()}getOverlaysForCollection(e,r,n){const s=Qo(),i=r.length+1,a=new Ae(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>n&&s.set(c.getKey(),c)}return se.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Rt((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=i.get(u.largestBatchId);d===null&&(d=Qo(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Qo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return se.resolve(l)}wt(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(n.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new ZL(r,n));let i=this.kr.get(r);i===void 0&&(i=We(),this.kr.set(r,i)),this.kr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(){this.sessionToken=dr.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.qr=new Kt(tr.Qr),this.$r=new Kt(tr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,r){const n=new tr(e,r);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Wr(new tr(e,r))}Gr(e,r){e.forEach(n=>this.removeReference(n,r))}zr(e){const r=new Ae(new mt([])),n=new tr(r,e),s=new tr(r,e+1),i=[];return this.$r.forEachInRange([n,s],a=>{this.Wr(a),i.push(a.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const r=new Ae(new mt([])),n=new tr(r,e),s=new tr(r,e+1);let i=We();return this.$r.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new tr(e,0),n=this.qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class tr{constructor(e,r){this.key=e,this.Hr=r}static Qr(e,r){return Ae.comparator(e.key,r.key)||Be(e.Hr,r.Hr)}static Ur(e,r){return Be(e.Hr,r.Hr)||Ae.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.er=1,this.Yr=new Kt(tr.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XL(i,r,n,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new tr(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return se.resolve(a)}lookupMutationBatch(e,r){return se.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.Xr(n),i=s<0?0:s;return se.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Kx:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new tr(r,0),s=new tr(r,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),se.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Kt(Be);return r.forEach(s=>{const i=new tr(s,0),a=new tr(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],l=>{n=n.add(l.Hr)})}),se.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Ae.isDocumentKey(i)||(i=i.child(""));const a=new tr(new Ae(i),0);let l=new Kt(Be);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},a),se.resolve(this.ei(l))}ei(e){const r=[];return e.forEach(n=>{const s=this.Zr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){it(this.ti(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return se.forEach(r.mutations,s=>{const i=new tr(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,r){const n=new tr(r,0),s=this.Yr.firstAfterOrEqual(n);return se.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.ni=e,this.docs=function(){return new Rt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.ni(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return se.resolve(n?n.document.mutableCopy():Er.newInvalidDocument(r))}getEntries(e,r){let n=ei();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Er.newInvalidDocument(s))}),se.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=ei();const a=r.path,l=new Ae(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||mL(fL(d),n)<=0||(s.has(d.key)||Ep(r,d))&&(i=i.insert(d.key,d.mutableCopy()))}return se.resolve(i)}getAllFromCollectionGroup(e,r,n,s){ke(9500)}ri(e,r){return se.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new FF(this)}getSize(e){return se.resolve(this.size)}}class FF extends IF{constructor(e){super(),this.Or=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Or.addEntry(e,s)):this.Or.removeEntry(n)}),se.waitFor(r)}getFromCache(e,r){return this.Or.getEntry(e,r)}getAllFromCache(e,r){return this.Or.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.persistence=e,this.ii=new Ta(r=>Zx(r),ew),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new ow,this.targetCount=0,this._i=ec.ar()}forEachTarget(e,r){return this.ii.forEach((n,s)=>r(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.si&&(this.si=r),se.resolve()}hr(e){this.ii.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this._i=new ec(r),this.highestTargetId=r),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,r){return this.hr(r),this.targetCount+=1,se.resolve()}updateTargetData(e,r){return this.hr(r),se.resolve()}removeTargetData(e,r){return this.ii.delete(r.target),this.oi.zr(r.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),se.waitFor(i).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,r){const n=this.ii.get(r)||null;return se.resolve(n)}addMatchingKeys(e,r,n){return this.oi.Kr(r,n),se.resolve()}removeMatchingKeys(e,r,n){this.oi.Gr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),se.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.oi.zr(r),se.resolve()}getMatchingKeysForTargetId(e,r){const n=this.oi.Jr(r);return se.resolve(n)}containsKey(e,r){return se.resolve(this.oi.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,r){this.ai={},this.overlays={},this.ui=new yp(0),this.ci=!1,this.ci=!0,this.li=new DF,this.referenceDelegate=e(this),this.hi=new VF(this),this.indexManager=new CF,this.remoteDocumentCache=function(s){return new LF(s)}(n=>this.referenceDelegate.Pi(n)),this.serializer=new bF(r),this.Ti=new kF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new MF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ai[e.toKey()];return n||(n=new OF(r,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,r,n){we("MemoryPersistence","Starting transaction:",e);const s=new BF(this.ui.next());return this.referenceDelegate.Ii(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,r){return se.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,r)))}}class BF extends gL{constructor(e){super(),this.currentSequenceNumber=e}}class aw{constructor(e){this.persistence=e,this.Ai=new ow,this.Ri=null}static Vi(e){return new aw(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,r,n){return this.Ai.addReference(n,r),this.mi.delete(n.toString()),se.resolve()}removeReference(e,r,n){return this.Ai.removeReference(n,r),this.mi.add(n.toString()),se.resolve()}markPotentiallyOrphaned(e,r){return this.mi.add(r.toString()),se.resolve()}removeTarget(e,r){this.Ai.zr(r.targetId).forEach(s=>this.mi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ii(){this.Ri=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,n=>{const s=Ae.fromPath(n);return this.fi(e,s).next(i=>{i||r.removeEntry(s,De.min())})}).next(()=>(this.Ri=null,r.apply(e)))}updateLimboDocument(e,r){return this.fi(e,r).next(n=>{n?this.mi.delete(r.toString()):this.mi.add(r.toString())})}Pi(e){return 0}fi(e,r){return se.or([()=>se.resolve(this.Ai.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class Tm{constructor(e,r){this.persistence=e,this.gi=new Ta(n=>xL(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=RF(this,r)}static Vi(e,r){return new Tm(e,r)}Ii(){}di(e){return se.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}mr(e){const r=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}yr(e){let r=0;return this.gr(e,n=>{r++}).next(()=>r)}gr(e,r){return se.forEach(this.gi,(n,s)=>this.Sr(e,n,s).next(i=>i?se.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,a=>this.Sr(e,a,r).next(l=>{l||(n++,i.removeEntry(a,De.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.gi.set(r,e.currentSequenceNumber),se.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),se.resolve()}removeReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,r){return this.gi.set(r,e.currentSequenceNumber),se.resolve()}Pi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Af(e.data.value)),r}Sr(e,r,n){return se.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.gi.get(r);return se.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Is=n,this.ds=s}static Es(e,r){let n=We(),s=We();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new lw(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return DO()?8:yL(_r())>0?6:4}()}initialize(e,r){this.gs=e,this.indexManager=r,this.As=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ps(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ys(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new UF;return this.ws(e,r,a).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,r,a,l.size)})}).next(()=>i.result)}Ss(e,r,n,s){return n.documentReadCount<this.Vs?(el()<=He.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",tl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(el()<=He.DEBUG&&we("QueryEngine","Query:",tl(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.fs*s?(el()<=He.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",tl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fs(r))):se.resolve())}ps(e,r){if(NE(r))return se.resolve(null);let n=fs(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=By(r,null,"F"),n=fs(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=We(...i);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.bs(r,l);return this.Ds(r,u,a,c.readTime)?this.ps(e,By(r,null,"F")):this.vs(e,u,r,c)}))})))}ys(e,r,n,s){return NE(r)||s.isEqual(De.min())?se.resolve(null):this.gs.getDocuments(e,n).next(i=>{const a=this.bs(r,i);return this.Ds(r,a,n,s)?se.resolve(null):(el()<=He.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tl(r)),this.vs(e,a,r,hL(s,Ju)).next(l=>l))})}bs(e,r){let n=new Kt(NS(e));return r.forEach((s,i)=>{Ep(e,i)&&(n=n.add(i))}),n}Ds(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,r,n){return el()<=He.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",tl(r)),this.gs.getDocumentsMatchingQuery(e,r,oo.min(),n)}vs(e,r,n,s){return this.gs.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="LocalStore",GF=3e8;class $F{constructor(e,r,n,s){this.persistence=e,this.Cs=r,this.serializer=s,this.Fs=new Rt(Be),this.Ms=new Ta(i=>Zx(i),ew),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Fs))}}function zF(t,e,r,n){return new $F(t,e,r,n)}async function QS(t,e){const r=Oe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Ns(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],l=[];let c=We();for(const u of s){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Bs:u,removedBatchIds:a,addedBatchIds:l}))})})}function HF(t,e){const r=Oe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,m=f.keys();let p=se.resolve();return m.forEach(w=>{p=p.next(()=>d.getEntry(c,w)).next(y=>{const b=u.docVersions.get(w);it(b!==null,48541),y.version.compareTo(b)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=We();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function YS(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.hi.getLastRemoteSnapshotVersion(r))}function WF(t,e){const r=Oe(t),n=e.snapshotVersion;let s=r.Fs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.Os.newChangeBuffer({trackRemovals:!0});s=r.Fs;const l=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;l.push(r.hi.removeMatchingKeys(i,d.removedDocuments,f).next(()=>r.hi.addMatchingKeys(i,d.addedDocuments,f)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(dr.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),s=s.insert(f,p),function(y,b,N){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=GF?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,p,d)&&l.push(r.hi.updateTargetData(i,p))});let c=ei(),u=We();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(QF(i,a,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!n.isEqual(De.min())){const d=r.hi.getLastRemoteSnapshotVersion(i).next(f=>r.hi.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(d)}return se.waitFor(l).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(r.Fs=s,i))}function QF(t,e,r){let n=We(),s=We();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=ei();return r.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):we(cw,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ls:a,ks:s}})}function YF(t,e){const r=Oe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Kx),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function KF(t,e){const r=Oe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.hi.getTargetData(n,e).next(i=>i?(s=i,se.resolve(s)):r.hi.allocateTargetId(n).next(a=>(s=new Ui(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.hi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Fs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Fs=r.Fs.insert(n.targetId,n),r.Ms.set(e,n.targetId)),n})}async function zy(t,e,r){const n=Oe(t),s=n.Fs.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!pc(a))throw a;we(cw,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(s.target)}function LE(t,e,r){const n=Oe(t);let s=De.min(),i=We();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const f=Oe(c),m=f.Ms.get(d);return m!==void 0?se.resolve(f.Fs.get(m)):f.hi.getTargetData(u,d)}(n,a,fs(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>n.Cs.getDocumentsMatchingQuery(a,e,r?s:De.min(),r?i:We())).next(l=>(JF(n,LL(e),l),{documents:l,qs:i})))}function JF(t,e,r){let n=t.xs.get(e)||De.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.xs.set(e,n)}class FE{constructor(){this.activeTargetIds=GL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XF{constructor(){this.Fo=new FE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,r,n){this.Mo[e]=r}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new FE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="ConnectivityMonitor";class BE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){we(VE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){we(VE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function Hy(){return ef===null?ef=function(){return 268435456+Math.round(2147483648*Math.random())}():ef++,"0x"+ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="RestConnection",e6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=r+"://"+e.host,this.Uo=`projects/${n}/databases/${s}`,this.Ko=this.databaseId.database===wm?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(e,r,n,s,i){const a=Hy(),l=this.Go(e,r.toUriEncodedString());we(c0,`Sending RPC '${e}' ${a}:`,l,n);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:u}=new URL(l),d=dc(u);return this.jo(e,l,c,n,d).then(f=>(we(c0,`Received RPC '${e}' ${a}: `,f),f),f=>{throw io(c0,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",n),f})}Jo(e,r,n,s,i,a){return this.Wo(e,r,n,s,i)}zo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}Go(e,r){const n=e6[e];return`${this.$o}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="WebChannelConnection";class n6 extends t6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,r,n,s,i){const a=Hy();return new Promise((l,c)=>{const u=new YA;u.setWithCredentials(!0),u.listenOnce(KA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _f.NO_ERROR:const f=u.getResponseJson();we(vr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case _f.TIMEOUT:we(vr,`RPC '${e}' ${a} timed out`),c(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case _f.HTTP_ERROR:const m=u.getStatus();if(we(vr,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const y=function(N){const x=N.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(x)>=0?x:re.UNKNOWN}(w.status);c(new ye(y,w.message))}else c(new ye(re.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ye(re.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:a,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{we(vr,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);we(vr,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",d,n,15)})}P_(e,r,n){const s=Hy(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ZA(),l=XA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=i.join("");we(vr,`Creating RPC '${e}' stream ${s}: ${d}`,c);const f=a.createWebChannel(d,c);this.T_(f);let m=!1,p=!1;const w=new r6({Ho:b=>{p?we(vr,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(we(vr,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),we(vr,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Yo:()=>f.close()}),y=(b,N,x)=>{b.listen(N,E=>{try{x(E)}catch(R){setTimeout(()=>{throw R},0)}})};return y(f,su.EventType.OPEN,()=>{p||(we(vr,`RPC '${e}' stream ${s} transport opened.`),w.s_())}),y(f,su.EventType.CLOSE,()=>{p||(p=!0,we(vr,`RPC '${e}' stream ${s} transport closed`),w.__(),this.I_(f))}),y(f,su.EventType.ERROR,b=>{p||(p=!0,io(vr,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),w.__(new ye(re.UNAVAILABLE,"The operation could not be completed")))}),y(f,su.EventType.MESSAGE,b=>{var N;if(!p){const x=b.data[0];it(!!x,16349);const E=x,R=(E==null?void 0:E.error)||((N=E[0])===null||N===void 0?void 0:N.error);if(R){we(vr,`RPC '${e}' stream ${s} received error:`,R);const I=R.status;let V=function(S){const k=Bt[S];if(k!==void 0)return OS(k)}(I),j=R.message;V===void 0&&(V=re.INTERNAL,j="Unknown error status: "+I+" with message "+R.message),p=!0,w.__(new ye(V,j)),f.close()}else we(vr,`RPC '${e}' stream ${s} received:`,x),w.a_(x)}}),y(l,JA.STAT_EVENT,b=>{b.stat===ky.PROXY?we(vr,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===ky.NOPROXY&&we(vr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(r=>r===e)}}function u0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){return new aF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=r,this.d_=n,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const r=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),s=Math.max(0,r-n);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="PersistentStream";class JS{constructor(e,r,n,s,i,a,l,c){this.Fi=e,this.w_=n,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new KS(e,r)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():r&&r.code===re.RESOURCE_EXHAUSTED?(Zs(r.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):r&&r.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(r)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),r=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.b_===r&&this.W_(n,s)},n=>{e(()=>{const s=new ye(re.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(s)})})}W_(e,r){const n=this.K_(this.b_);this.stream=this.z_(e,r),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{n(()=>this.G_(s))}),this.stream.onMessage(s=>{n(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return we(UE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return r=>{this.Fi.enqueueAndForget(()=>this.b_===e?r():(we(UE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s6 extends JS{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}z_(e,r){return this.connection.P_("Listen",e,r)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const r=uF(this.serializer,e),n=function(i){if(!("targetChange"in i))return De.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?De.min():a.readTime?ms(a.readTime):De.min()}(e);return this.listener.J_(r,n)}H_(e){const r={};r.database=$y(this.serializer),r.addTarget=function(i,a){let l;const c=a.target;if(l=Fy(c)?{documents:fF(i,c)}:{query:mF(i,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=VS(i,a.resumeToken);const u=Uy(i,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(De.min())>0){l.readTime=Nm(i,a.snapshotVersion.toTimestamp());const u=Uy(i,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=gF(this.serializer,e);n&&(r.labels=n),this.k_(r)}Y_(e){const r={};r.database=$y(this.serializer),r.removeTarget=e,this.k_(r)}}class i6 extends JS{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,r){return this.connection.P_("Write",e,r)}j_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const r=hF(e.writeResults,e.commitTime),n=ms(e.commitTime);return this.listener.ta(n,r)}na(){const e={};e.database=$y(this.serializer),this.k_(e)}X_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>dF(this.serializer,n))};this.k_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{}class a6 extends o6{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,n,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,qy(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ye(re.UNKNOWN,i.toString())})}Jo(e,r,n,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,qy(r,n),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(re.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class l6{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Zs(r),this._a=!1):we("OnlineStateTracker",r)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class c6{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(a=>{n.enqueueAndForget(async()=>{_a(this)&&(we(pa,"Restarting streams for network reachability change."),await async function(c){const u=Oe(c);u.Ia.add(4),await jd(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Ap(u)}(this))})}),this.Aa=new l6(n,s)}}async function Ap(t){if(_a(t))for(const e of t.da)await e(!0)}async function jd(t){for(const e of t.da)await e(!1)}function XS(t,e){const r=Oe(t);r.Ta.has(e.targetId)||(r.Ta.set(e.targetId,e),fw(r)?hw(r):yc(r).x_()&&dw(r,e))}function uw(t,e){const r=Oe(t),n=yc(r);r.Ta.delete(e),n.x_()&&ZS(r,e),r.Ta.size===0&&(n.x_()?n.B_():_a(r)&&r.Aa.set("Unknown"))}function dw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}yc(t).H_(e)}function ZS(t,e){t.Ra.$e(e),yc(t).Y_(e)}function hw(t){t.Ra=new nF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),yc(t).start(),t.Aa.aa()}function fw(t){return _a(t)&&!yc(t).M_()&&t.Ta.size>0}function _a(t){return Oe(t).Ia.size===0}function eR(t){t.Ra=void 0}async function u6(t){t.Aa.set("Online")}async function d6(t){t.Ta.forEach((e,r)=>{dw(t,e)})}async function h6(t,e){eR(t),fw(t)?(t.Aa.la(e),hw(t)):t.Aa.set("Unknown")}async function f6(t,e,r){if(t.Aa.set("Online"),e instanceof FS&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(n){we(pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await _m(t,n)}else if(e instanceof If?t.Ra.Ye(e):e instanceof LS?t.Ra.it(e):t.Ra.et(e),!r.isEqual(De.min()))try{const n=await YS(t.localStore);r.compareTo(n)>=0&&await function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ta.get(u);d&&i.Ta.set(u,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ta.get(c);if(!d)return;i.Ta.set(c,d.withResumeToken(dr.EMPTY_BYTE_STRING,d.snapshotVersion)),ZS(i,c);const f=new Ui(d.target,c,u,d.sequenceNumber);dw(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){we(pa,"Failed to raise snapshot:",n),await _m(t,n)}}async function _m(t,e,r){if(!pc(e))throw e;t.Ia.add(1),await jd(t),t.Aa.set("Offline"),r||(r=()=>YS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(pa,"Retrying IndexedDB access"),await r(),t.Ia.delete(1),await Ap(t)})}function tR(t,e){return e().catch(r=>_m(t,r,e))}async function Sp(t){const e=Oe(t),r=uo(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Kx;for(;m6(e);)try{const s=await YF(e.localStore,n);if(s===null){e.Pa.length===0&&r.B_();break}n=s.batchId,p6(e,s)}catch(s){await _m(e,s)}rR(e)&&nR(e)}function m6(t){return _a(t)&&t.Pa.length<10}function p6(t,e){t.Pa.push(e);const r=uo(t);r.x_()&&r.Z_&&r.X_(e.mutations)}function rR(t){return _a(t)&&!uo(t).M_()&&t.Pa.length>0}function nR(t){uo(t).start()}async function g6(t){uo(t).na()}async function y6(t){const e=uo(t);for(const r of t.Pa)e.X_(r.mutations)}async function v6(t,e,r){const n=t.Pa.shift(),s=nw.from(n,e,r);await tR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sp(t)}async function x6(t,e){e&&uo(t).Z_&&await async function(n,s){if(function(a){return tF(a)&&a!==re.ABORTED}(s.code)){const i=n.Pa.shift();uo(n).N_(),await tR(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sp(n)}}(t,e),rR(t)&&nR(t)}async function qE(t,e){const r=Oe(t);r.asyncQueue.verifyOperationInProgress(),we(pa,"RemoteStore received new credentials");const n=_a(r);r.Ia.add(3),await jd(r),n&&r.Aa.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ia.delete(3),await Ap(r)}async function w6(t,e){const r=Oe(t);e?(r.Ia.delete(2),await Ap(r)):e||(r.Ia.add(2),await jd(r),r.Aa.set("Unknown"))}function yc(t){return t.Va||(t.Va=function(r,n,s){const i=Oe(r);return i.ia(),new s6(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:u6.bind(null,t),e_:d6.bind(null,t),n_:h6.bind(null,t),J_:f6.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),fw(t)?hw(t):t.Aa.set("Unknown")):(await t.Va.stop(),eR(t))})),t.Va}function uo(t){return t.ma||(t.ma=function(r,n,s){const i=Oe(r);return i.ia(),new i6(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:g6.bind(null,t),n_:x6.bind(null,t),ea:y6.bind(null,t),ta:v6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Sp(t)):(await t.ma.stop(),t.Pa.length>0&&(we(pa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,l=new mw(e,r,a,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pw(t,e){if(Zs("AsyncQueue",`${e}: ${t}`),pc(t))return new ye(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{static emptySet(e){return new _l(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ae.comparator(r.key,n.key):(r,n)=>Ae.comparator(r.key,n.key),this.keyedMap=iu(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof _l)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new _l;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.fa=new Rt(Ae.comparator)}track(e){const r=e.doc.key,n=this.fa.get(r);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(r,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(r):e.type===1&&n.type===2?this.fa=this.fa.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):ke(63341,{At:e,ga:n}):this.fa=this.fa.insert(r,e)}pa(){const e=[];return this.fa.inorderTraversal((r,n)=>{e.push(n)}),e}}class tc{constructor(e,r,n,s,i,a,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new tc(e,r,_l.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class E6{constructor(){this.queries=$E(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(r,n){const s=Oe(r),i=s.queries;s.queries=$E(),i.forEach((a,l)=>{for(const c of l.wa)c.onError(n)})})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function $E(){return new Ta(t=>CS(t),bp)}async function gw(t,e){const r=Oe(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.Sa()&&e.ba()&&(n=2):(i=new b6,n=e.ba()?0:1);try{switch(n){case 0:i.ya=await r.onListen(s,!0);break;case 1:i.ya=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=pw(a,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.wa.push(e),e.va(r.onlineState),i.ya&&e.Ca(i.ya)&&vw(r)}async function yw(t,e){const r=Oe(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.wa.indexOf(e);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function C6(t,e){const r=Oe(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(n=!0);a.ya=s}}n&&vw(r)}function N6(t,e,r){const n=Oe(t),s=n.queries.get(e);if(s)for(const i of s.wa)i.onError(r);n.queries.delete(e)}function vw(t){t.Da.forEach(e=>{e.next()})}var Wy,zE;(zE=Wy||(Wy={})).Fa="default",zE.Cache="cache";class xw{constructor(e,r,n){this.query=e,this.Ma=r,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new tc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),r=!0):this.Ba(e,this.onlineState)&&(this.La(e),r=!0),this.Oa=e,r}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let r=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),r=!0),r}Ba(e,r){if(!e.fromCache||!this.ba())return!0;const n=r!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const r=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}La(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Wy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.key=e}}class iR{constructor(e){this.key=e}}class T6{constructor(e,r){this.query=e,this.Ha=r,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=We(),this.mutatedKeys=We(),this.Xa=NS(e),this.eu=new _l(this.Xa)}get tu(){return this.Ha}nu(e,r){const n=r?r.ru:new GE,s=r?r.eu:this.eu;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),p=Ep(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;m&&p?m.data.isEqual(p.data)?w!==y&&(n.track({type:3,doc:p}),b=!0):this.iu(m,p)||(n.track({type:2,doc:p}),b=!0,(c&&this.Xa(p,c)>0||u&&this.Xa(p,u)<0)&&(l=!0)):!m&&p?(n.track({type:0,doc:p}),b=!0):m&&!p&&(n.track({type:1,doc:m}),b=!0,(c||u)&&(l=!0)),b&&(p?(a=a.add(p),i=y?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),n.track({type:1,doc:d})}return{eu:a,ru:n,Ds:l,mutatedKeys:i}}iu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((d,f)=>function(p,w){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:b})}};return y(p)-y(w)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(n),s=s!=null&&s;const l=r&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,u=c!==this.Ya;return this.Ya=c,a.length!==0||u?{snapshot:new tc(this.query,e.eu,i,a,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new GE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(r=>this.Ha=this.Ha.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ha=this.Ha.delete(r)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=We(),this.eu.forEach(n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))});const r=[];return e.forEach(n=>{this.Za.has(n)||r.push(new iR(n))}),this.Za.forEach(n=>{e.has(n)||r.push(new sR(n))}),r}uu(e){this.Ha=e.qs,this.Za=We();const r=this.nu(e.documents);return this.applyChanges(r,!0)}cu(){return tc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ww="SyncEngine";class _6{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class A6{constructor(e){this.key=e,this.lu=!1}}class S6{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Ta(l=>CS(l),bp),this.Tu=new Map,this.Iu=new Set,this.du=new Rt(Ae.comparator),this.Eu=new Map,this.Au=new ow,this.Ru={},this.Vu=new Map,this.mu=ec.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function R6(t,e,r=!0){const n=dR(t);let s;const i=n.Pu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await oR(n,e,r,!0),s}async function I6(t,e){const r=dR(t);await oR(r,e,!0,!1)}async function oR(t,e,r,n){const s=await KF(t.localStore,fs(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await j6(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&XS(t.remoteStore,s),l}async function j6(t,e,r,n,s){t.gu=(f,m,p)=>async function(y,b,N,x){let E=b.view.nu(N);E.Ds&&(E=await LE(y.localStore,b.query,!1).then(({documents:j})=>b.view.nu(j,E)));const R=x&&x.targetChanges.get(b.targetId),I=x&&x.targetMismatches.get(b.targetId)!=null,V=b.view.applyChanges(E,y.isPrimaryClient,R,I);return WE(y,b.targetId,V._u),V.snapshot}(t,f,m,p);const i=await LE(t.localStore,e,!0),a=new T6(e,i.qs),l=a.nu(i.documents),c=Id.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);WE(t,r,u._u);const d=new _6(e,r,a);return t.Pu.set(e,d),t.Tu.has(r)?t.Tu.get(r).push(e):t.Tu.set(r,[e]),u.snapshot}async function P6(t,e,r){const n=Oe(t),s=n.Pu.get(e),i=n.Tu.get(s.targetId);if(i.length>1)return n.Tu.set(s.targetId,i.filter(a=>!bp(a,e))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await zy(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&uw(n.remoteStore,s.targetId),Qy(n,s.targetId)}).catch(mc)):(Qy(n,s.targetId),await zy(n.localStore,s.targetId,!0))}async function k6(t,e){const r=Oe(t),n=r.Pu.get(e),s=r.Tu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),uw(r.remoteStore,n.targetId))}async function M6(t,e,r){const n=U6(t);try{const s=await function(a,l){const c=Oe(a),u=Ve.now(),d=l.reduce((p,w)=>p.add(w.key),We());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let w=ei(),y=We();return c.Os.getEntries(p,d).next(b=>{w=b,w.forEach((N,x)=>{x.isValidDocument()||(y=y.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,w)).next(b=>{f=b;const N=[];for(const x of l){const E=KL(x,f.get(x.key).overlayedDocument);E!=null&&N.push(new Co(x.key,E,pS(E.value.mapValue),Hn.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,N,l)}).next(b=>{m=b;const N=b.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(p,b.batchId,N)})}).then(()=>({batchId:m.batchId,changes:_S(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Ru[a.currentUser.toKey()];u||(u=new Rt(Be)),u=u.insert(l,c),a.Ru[a.currentUser.toKey()]=u}(n,s.batchId,r),await Pd(n,s.changes),await Sp(n.remoteStore)}catch(s){const i=pw(s,"Failed to persist write");r.reject(i)}}async function aR(t,e){const r=Oe(t);try{const n=await WF(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Eu.get(i);a&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?it(a.lu,14607):s.removedDocuments.size>0&&(it(a.lu,42227),a.lu=!1))}),await Pd(r,n,e)}catch(n){await mc(n)}}function HE(t,e,r){const n=Oe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Pu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Oe(a);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.wa)m.va(l)&&(u=!0)}),u&&vw(c)}(n.eventManager,e),s.length&&n.hu.J_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function D6(t,e,r){const n=Oe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Eu.get(e),i=s&&s.key;if(i){let a=new Rt(Ae.comparator);a=a.insert(i,Er.newNoDocument(i,De.min()));const l=We().add(i),c=new Tp(De.min(),new Map,new Rt(Be),a,l);await aR(n,c),n.du=n.du.remove(i),n.Eu.delete(e),bw(n)}else await zy(n.localStore,e,!1).then(()=>Qy(n,e,r)).catch(mc)}async function O6(t,e){const r=Oe(t),n=e.batch.batchId;try{const s=await HF(r.localStore,e);cR(r,n,null),lR(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Pd(r,s)}catch(s){await mc(s)}}async function L6(t,e,r){const n=Oe(t);try{const s=await function(a,l){const c=Oe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(it(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);cR(n,e,r),lR(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Pd(n,s)}catch(s){await mc(s)}}function lR(t,e){(t.Vu.get(e)||[]).forEach(r=>{r.resolve()}),t.Vu.delete(e)}function cR(t,e,r){const n=Oe(t);let s=n.Ru[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ru[n.currentUser.toKey()]=s}}function Qy(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Tu.get(e))t.Pu.delete(n),r&&t.hu.pu(n,r);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(n=>{t.Au.containsKey(n)||uR(t,n)})}function uR(t,e){t.Iu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(uw(t.remoteStore,r),t.du=t.du.remove(e),t.Eu.delete(r),bw(t))}function WE(t,e,r){for(const n of r)n instanceof sR?(t.Au.addReference(n.key,e),F6(t,n)):n instanceof iR?(we(ww,"Document no longer in limbo: "+n.key),t.Au.removeReference(n.key,e),t.Au.containsKey(n.key)||uR(t,n.key)):ke(19791,{yu:n})}function F6(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Iu.has(n)||(we(ww,"New document in limbo: "+r),t.Iu.add(n),bw(t))}function bw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const r=new Ae(mt.fromString(e)),n=t.mu.next();t.Eu.set(n,new A6(r)),t.du=t.du.insert(r,n),XS(t.remoteStore,new Ui(fs(wp(r.path)),n,"TargetPurposeLimboResolution",yp.ue))}}async function Pd(t,e,r){const n=Oe(t),s=[],i=[],a=[];n.Pu.isEmpty()||(n.Pu.forEach((l,c)=>{a.push(n.gu(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=lw.Es(c.targetId,u);i.push(f)}}))}),await Promise.all(a),n.hu.J_(s),await async function(c,u){const d=Oe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>se.forEach(u,m=>se.forEach(m.Is,p=>d.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>se.forEach(m.ds,p=>d.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!pc(f))throw f;we(cw,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const p=d.Fs.get(m),w=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(w);d.Fs=d.Fs.insert(m,y)}}}(n.localStore,i))}async function V6(t,e){const r=Oe(t);if(!r.currentUser.isEqual(e)){we(ww,"User change. New user:",e.toKey());const n=await QS(r.localStore,e);r.currentUser=e,function(i,a){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new ye(re.CANCELLED,a))})}),i.Vu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Pd(r,n.Bs)}}function B6(t,e){const r=Oe(t),n=r.Eu.get(e);if(n&&n.lu)return We().add(n.key);{let s=We();const i=r.Tu.get(e);if(!i)return s;for(const a of i){const l=r.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function dR(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D6.bind(null,e),e.hu.J_=C6.bind(null,e.eventManager),e.hu.pu=N6.bind(null,e.eventManager),e}function U6(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L6.bind(null,e),e}class Am{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_p(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,r){return null}Fu(e,r){return null}vu(e){return zF(this.persistence,new qF,e.initialUser,this.serializer)}Du(e){return new WS(aw.Vi,this.serializer)}bu(e){return new XF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Am.provider={build:()=>new Am};class q6 extends Am{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,r){it(this.persistence.referenceDelegate instanceof Tm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new AF(n,e.asyncQueue,r)}Du(e){const r=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new WS(n=>Tm.Vi(n,r),this.serializer)}}class Yy{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>HE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=V6.bind(null,this.syncEngine),await w6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E6}()}createDatastore(e){const r=_p(e.databaseInfo.databaseId),n=function(i){return new n6(i)}(e.databaseInfo);return function(i,a,l,c){return new a6(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,l){return new c6(n,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>HE(this.syncEngine,r,0),function(){return BE.C()?new BE:new ZF}())}createSyncEngine(e,r){return function(s,i,a,l,c,u,d){const f=new S6(s,i,a,l,c,u);return d&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Oe(s);we(pa,"RemoteStore shutting down."),i.Ia.add(5),await jd(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Yy.provider={build:()=>new Yy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Zs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="FirestoreClient";class G6{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=wr.UNAUTHENTICATED,this.clientId=Yx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{we(ho,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(we(ho,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=pw(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function d0(t,e){t.asyncQueue.verifyOperationInProgress(),we(ho,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await QS(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>{io("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{we("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{io("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function QE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await $6(t);we(ho,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>qE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>qE(e.remoteStore,s)),t._onlineComponents=e}async function $6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(ho,"Using user provided OfflineComponentProvider");try{await d0(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;io("Error using user provided cache. Falling back to memory cache: "+r),await d0(t,new Am)}}else we(ho,"Using default OfflineComponentProvider"),await d0(t,new q6(void 0));return t._offlineComponents}async function hR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(ho,"Using user provided OnlineComponentProvider"),await QE(t,t._uninitializedComponentsProvider._online)):(we(ho,"Using default OnlineComponentProvider"),await QE(t,new Yy))),t._onlineComponents}function z6(t){return hR(t).then(e=>e.syncEngine)}async function Sm(t){const e=await hR(t),r=e.eventManager;return r.onListen=R6.bind(null,e.syncEngine),r.onUnlisten=P6.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=I6.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=k6.bind(null,e.syncEngine),r}function H6(t,e,r={}){const n=new Hs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const d=new Ew({next:m=>{d.Ou(),a.enqueueAndForget(()=>yw(i,f));const p=m.docs.has(l);!p&&m.fromCache?u.reject(new ye(re.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&c&&c.source==="server"?u.reject(new ye(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new xw(wp(l.path),d,{includeMetadataChanges:!0,ka:!0});return gw(i,f)}(await Sm(t),t.asyncQueue,e,r,n)),n.promise}function W6(t,e,r={}){const n=new Hs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const d=new Ew({next:m=>{d.Ou(),a.enqueueAndForget(()=>yw(i,f)),m.fromCache&&c.source==="server"?u.reject(new ye(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new xw(l,d,{includeMetadataChanges:!0,ka:!0});return gw(i,f)}(await Sm(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="firestore.googleapis.com",KE=!0;class JE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mR,this.ssl=KE}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:KE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TF)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fR((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new rL;switch(n.type){case"firstParty":return new oL(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=YE.get(r);n&&(we("ComponentProvider","Removing Datastore"),YE.delete(r),n.terminate())}(this),Promise.resolve()}}function Q6(t,e,r,n={}){var s;t=an(t,Rp);const i=dc(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${r}`;i&&(UA(`https://${c}`),qA("Firestore",!0)),a.host!==mR&&a.host!==c&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:n});if(!ha(u,l)&&(t._setSettings(u),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=wr.MOCK_USER;else{d=_O(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new wr(m)}t._authCredentials=new nL(new tS(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=class pR{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pR(this.firestore,e,this._query)}};class Mt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new to(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Sd(r,Mt._jsonSchema))return new Mt(e,n||null,new Ae(mt.fromString(r.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Gt("string",Mt._jsonSchemaVersion),referencePath:Gt("string")};class to extends vc{constructor(e,r,n){super(e,r,wp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Ae(e))}withConverter(e){return new to(this.firestore,e,this._path)}}function Aa(t,e,...r){if(t=zt(t),nS("collection","path",e),t instanceof Rp){const n=mt.fromString(e,...r);return uE(n),new to(t,null,n)}{if(!(t instanceof Mt||t instanceof to))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return uE(n),new to(t.firestore,null,n)}}function $t(t,e,...r){if(t=zt(t),arguments.length===1&&(e=Yx.newId()),nS("doc","path",e),t instanceof Rp){const n=mt.fromString(e,...r);return cE(n),new Mt(t,null,new Ae(n))}{if(!(t instanceof Mt||t instanceof to))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return cE(n),new Mt(t.firestore,t instanceof to?t.converter:null,new Ae(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="AsyncQueue";class ZE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new KS(this,"async_queue_retry"),this.oc=()=>{const n=u0();n&&we(XE,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const r=u0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const r=u0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const r=new Hs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pc(e))throw e;we(XE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const r=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,Zs("INTERNAL UNHANDLED ERROR: ",eC(n)),n}).then(n=>(this.nc=!1,n))));return this._c=r,r}enqueueAfterDelay(e,r,n){this.ac(),this.sc.indexOf(e)>-1&&(r=0);const s=mw.createAndSchedule(this,e,r,n,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&ke(47125,{hc:eC(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const r of this.ec)if(r.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.ec)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const r=this.ec.indexOf(e);this.ec.splice(r,1)}}function eC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fo extends Rp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new ZE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ZE(e),this._firestoreClient=void 0,await e}}}function Y6(t,e){const r=typeof t=="object"?t:Wx(),n=typeof t=="string"?t:wm,s=Hx(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=NO("firestore");i&&Q6(s,...i)}return s}function Ip(t){if(t._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K6(t),t._firestoreClient}function K6(t){var e,r,n;const s=t._freezeSettings(),i=function(l,c,u,d){return new EL(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fR(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new G6(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(dr.fromBase64String(e))}catch(r){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new wn(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sd(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:Gt("string",wn._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ps._jsonSchemaVersion}}static fromJSON(e){if(Sd(e,ps._jsonSchema))return new ps(e.latitude,e.longitude)}}ps._jsonSchemaVersion="firestore/geoPoint/1.0",ps._jsonSchema={type:Gt("string",ps._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sd(e,gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new gs(e.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gs._jsonSchemaVersion="firestore/vectorValue/1.0",gs._jsonSchema={type:Gt("string",gs._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=/^__.*__$/;class X6{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Co(e,this.data,this.fieldMask,r,this.fieldTransforms):new Rd(e,this.data,r,this.fieldTransforms)}}class gR{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Co(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function yR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:t})}}class Cw{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Cw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.fc(e),s}gc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(yR(this.Ec)&&J6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Z6{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||_p(e)}Dc(e,r,n,s=!1){return new Cw({Ec:e,methodName:r,bc:n,path:lr.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nw(t){const e=t._freezeSettings(),r=_p(t._databaseId);return new Z6(t._databaseId,!!e.ignoreUndefinedProperties,r)}function eV(t,e,r,n,s,i={}){const a=t.Dc(i.merge||i.mergeFields?2:0,e,r,s);_w("Data must be an object, but it was:",a,n);const l=vR(n,a);let c,u;if(i.merge)c=new sn(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=Ky(e,f,r);if(!a.contains(m))throw new ye(re.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wR(d,m)||d.push(m)}c=new sn(d),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new X6(new Gr(l),c,u)}class kp extends Pp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kp}}class Tw extends Pp{constructor(e,r){super(e),this.Cc=r}_toFieldTransform(e){const r=new sd(e.serializer,RS(e.serializer,this.Cc));return new HL(e.path,r)}isEqual(e){return e instanceof Tw&&this.Cc===e.Cc}}function tV(t,e,r,n){const s=t.Dc(1,e,r);_w("Data must be an object, but it was:",s,n);const i=[],a=Gr.empty();Eo(n,(c,u)=>{const d=Aw(e,c,r);u=zt(u);const f=s.gc(d);if(u instanceof kp)i.push(d);else{const m=kd(u,f);m!=null&&(i.push(d),a.set(d,m))}});const l=new sn(i);return new gR(a,l,s.fieldTransforms)}function rV(t,e,r,n,s,i){const a=t.Dc(1,e,r),l=[Ky(e,n,r)],c=[s];if(i.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Ky(e,i[m])),c.push(i[m+1]);const u=[],d=Gr.empty();for(let m=l.length-1;m>=0;--m)if(!wR(u,l[m])){const p=l[m];let w=c[m];w=zt(w);const y=a.gc(p);if(w instanceof kp)u.push(p);else{const b=kd(w,y);b!=null&&(u.push(p),d.set(p,b))}}const f=new sn(u);return new gR(d,f,a.fieldTransforms)}function nV(t,e,r,n=!1){return kd(r,t.Dc(n?4:3,e))}function kd(t,e){if(xR(t=zt(t)))return _w("Unsupported field value:",e,t),vR(t,e);if(t instanceof Pp)return function(n,s){if(!yR(s.Ec))throw s.wc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const l of n){let c=kd(l,s.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=zt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return RS(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ve.fromDate(n);return{timestampValue:Nm(s.serializer,i)}}if(n instanceof Ve){const i=new Ve(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Nm(s.serializer,i)}}if(n instanceof ps)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wn)return{bytesValue:VS(s.serializer,n._byteString)};if(n instanceof Mt){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof gs)return function(a,l){return{mapValue:{fields:{[hS]:{stringValue:mS},[bm]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.wc("VectorValues must only contain numeric values.");return tw(l.serializer,u)})}}}}}}(n,s);throw s.wc(`Unsupported field value: ${gp(n)}`)}(t,e)}function vR(t,e){const r={};return oS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(t,(n,s)=>{const i=kd(s,e.Vc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function xR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof ps||t instanceof wn||t instanceof Mt||t instanceof Pp||t instanceof gs)}function _w(t,e,r){if(!xR(r)||!sS(r)){const n=gp(r);throw n==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+n)}}function Ky(t,e,r){if((e=zt(e))instanceof jp)return e._internalPath;if(typeof e=="string")return Aw(t,e);throw Rm("Field path arguments must be of type string or ",t,!1,void 0,r)}const sV=new RegExp("[~\\*/\\[\\]]");function Aw(t,e,r){if(e.search(sV)>=0)throw Rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new jp(...e.split("."))._internalPath}catch{throw Rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Rm(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${n}`),a&&(c+=` in document ${s}`),c+=")"),new ye(re.INVALID_ARGUMENT,l+t+c)}function wR(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Mp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class iV extends bR{data(){return super.data()}}function Mp(t,e){return typeof e=="string"?Aw(t,e):e instanceof jp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sw{}class CR extends Sw{}function Md(t,e,...r){let n=[];e instanceof Sw&&n.push(e),n=n.concat(r),function(i){const a=i.filter(c=>c instanceof Rw).length,l=i.filter(c=>c instanceof Dp).length;if(a>1||a>0&&l>0)throw new ye(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Dp extends CR{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Dp(e,r,n)}_apply(e){const r=this._parse(e);return NR(e._query,r),new vc(e.firestore,e.converter,Vy(e._query,r))}_parse(e){const r=Nw(e.firestore);return function(i,a,l,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ye(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nC(f,d);const w=[];for(const y of f)w.push(rC(c,i,y));m={arrayValue:{values:w}}}else m=rC(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nC(f,d),m=nV(l,a,f,d==="in"||d==="not-in");return qt.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Jy(t,e,r){const n=e,s=Mp("where",t);return Dp._create(s,n,r)}class Rw extends Sw{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Rw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Qn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)NR(a,c),a=Vy(a,c)}(e._query,r),new vc(e.firestore,e.converter,Vy(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Iw extends CR{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Iw(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new td(i,a)}(e._query,this._field,this._direction);return new vc(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new gc(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function jw(t,e="asc"){const r=e,n=Mp("orderBy",t);return Iw._create(n,r)}function rC(t,e,r){if(typeof(r=zt(r))=="string"){if(r==="")throw new ye(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ES(e)&&r.indexOf("/")!==-1)throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(mt.fromString(r));if(!Ae.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return vE(t,new Ae(n))}if(r instanceof Mt)return vE(t,r._key);throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gp(r)}.`)}function nC(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NR(t,e){const r=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class oV{convertValue(e,r="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Eo(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r[bm].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Dt(a.doubleValue));return new gs(i)}convertGeoPoint(e){return new ps(Dt(e.latitude),Dt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=xp(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){const r=ao(e);return new Ve(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=mt.fromString(e);it(zS(n),9688,{name:e});const s=new Zu(n.get(1),n.get(3)),i=new Ae(n.popFirst(5));return s.isEqual(r)||Zs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class au{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ta extends bR{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Mp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=ta._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",ta._jsonSchema={type:Gt("string",ta._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class jf extends ta{data(e={}){return super.data(e)}}class ra{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new au(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new jf(this._firestore,this._userDataWriter,n.key,n,new au(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new jf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new au(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new jf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new au(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:lV(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){t=an(t,Mt);const e=an(t.firestore,fo);return H6(Ip(e),t._key).then(r=>_R(e,t,r))}ra._jsonSchemaVersion="firestore/querySnapshot/1.0",ra._jsonSchema={type:Gt("string",ra._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Pw extends oV{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,r)}}function Op(t){t=an(t,vc);const e=an(t.firestore,fo),r=Ip(e),n=new Pw(e);return ER(t._query),W6(r,t._query).then(s=>new ra(e,n,t,s))}function Lp(t,e,r){t=an(t,Mt);const n=an(t.firestore,fo),s=aV(t.converter,e);return kw(n,[eV(Nw(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Hn.none())])}function Sa(t,e,r,...n){t=an(t,Mt);const s=an(t.firestore,fo),i=Nw(s);let a;return a=typeof(e=zt(e))=="string"||e instanceof jp?rV(i,"updateDoc",t._key,e,r,n):tV(i,"updateDoc",t._key,e),kw(s,[a.toMutation(t._key,Hn.exists(!0))])}function TR(t){return kw(an(t.firestore,fo),[new rw(t._key,Hn.none())])}function Fp(t,...e){var r,n,s;t=zt(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||tC(e[a])||(i=e[a++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(tC(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,d;if(t instanceof Mt)u=an(t.firestore,fo),d=wp(t._key.path),c={next:f=>{e[a]&&e[a](_R(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=an(t,vc);u=an(f.firestore,fo),d=f._query;const m=new Pw(u);c={next:p=>{e[a]&&e[a](new ra(u,m,f,p))},error:e[a+1],complete:e[a+2]},ER(t._query)}return function(m,p,w,y){const b=new Ew(y),N=new xw(p,b,w);return m.asyncQueue.enqueueAndForget(async()=>gw(await Sm(m),N)),()=>{b.Ou(),m.asyncQueue.enqueueAndForget(async()=>yw(await Sm(m),N))}}(Ip(u),d,l,c)}function kw(t,e){return function(n,s){const i=new Hs;return n.asyncQueue.enqueueAndForget(async()=>M6(await z6(n),s,i)),i.promise}(Ip(t),e)}function _R(t,e,r){const n=r.docs.get(e._key),s=new Pw(t);return new ta(t,s,e._key,n,new au(r.hasPendingWrites,r.fromCache),e.converter)}function cV(t){return new Tw("increment",t)}(function(e,r=!0){(function(s){fc=s})(hc),Kl(new fa("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),l=new fo(new sL(n.getProvider("auth-internal")),new aL(a,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(u.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Zi(sE,iE,e),Zi(sE,iE,"esm2017")})();var ls=function(){return ls=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ls.apply(this,arguments)};function Dd(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function uV(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function AR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dV=AR,SR=new _d("auth","Firebase",AR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=new $x("@firebase/auth");function hV(t,...e){Im.logLevel<=He.WARN&&Im.warn(`Auth (${hc}): ${t}`,...e)}function Pf(t,...e){Im.logLevel<=He.ERROR&&Im.error(`Auth (${hc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,...e){throw Mw(t,...e)}function ys(t,...e){return Mw(t,...e)}function RR(t,e,r){const n=Object.assign(Object.assign({},dV()),{[e]:r});return new _d("auth","Firebase",n).create(e,{appName:t.name})}function Ws(t){return RR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mw(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return SR.create(t,...e)}function Pe(t,e,...r){if(!t)throw Mw(e,...r)}function qs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pf(e),new Error(e)}function ti(t,e){t||qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fV(){return sC()==="http:"||sC()==="https:"}function sC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fV()||PO()||"connection"in navigator)?navigator.onLine:!0}function pV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,r){this.shortDelay=e,this.longDelay=r,ti(r>e,"Short delay should be less than long delay!"),this.isMobile=RO()||kO()}get(){return mV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e){ti(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vV=new Od(3e4,6e4);function No(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function To(t,e,r,n,s={}){return jR(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const l=Ad(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return jO()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&dc(t.emulatorConfig.host)&&(u.credentials="include"),IR.fetch()(await PR(t,t.config.apiHost,r,l),u)})}async function jR(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},gV),e);try{const s=new wV(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw tf(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw tf(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw tf(t,"user-disabled",a);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw RR(t,d,u);Yn(t,d)}}catch(s){if(s instanceof oi)throw s;Yn(t,"network-request-failed",{message:String(s)})}}async function Ld(t,e,r,n,s={}){const i=await To(t,e,r,n,s);return"mfaPendingCredential"in i&&Yn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function PR(t,e,r,n){const s=`${e}${r}?${n}`,i=t,a=i.config.emulator?Dw(t.config,s):`${t.config.apiScheme}://${s}`;return yV.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function xV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ys(this.auth,"network-request-failed")),vV.get())})}}function tf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=ys(t,e,n);return s.customData._tokenResponse=r,s}function iC(t){return t!==void 0&&t.enterprise!==void 0}class bV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return xV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EV(t,e){return To(t,"GET","/v2/recaptchaConfig",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(t,e){return To(t,"POST","/v1/accounts:delete",e)}async function jm(t,e){return To(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NV(t,e=!1){const r=zt(t),n=await r.getIdToken(e),s=Ow(n);Pe(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Au(h0(s.auth_time)),issuedAtTime:Au(h0(s.iat)),expirationTime:Au(h0(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function h0(t){return Number(t)*1e3}function Ow(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=LA(r);return s?JSON.parse(s):(Pf("Failed to decode base64 JWT payload"),null)}catch(s){return Pf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oC(t){const e=Ow(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof oi&&TV(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function TV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(t){var e;const r=t.auth,n=await t.getIdToken(),s=await id(t,jm(r,{idToken:n}));Pe(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?kR(i.providerUserInfo):[],l=SV(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Zy(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function AV(t){const e=zt(t);await Pm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SV(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function kR(t){return t.map(e=>{var{providerId:r}=e,n=Dd(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e){const r=await jR(t,{},async()=>{const n=Ad({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await PR(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&dc(t.emulatorConfig.host)&&(c.credentials="include"),IR.fetch()(a,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function IV(t,e){return To(t,"POST","/v2/accounts:revokeToken",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const r=oC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await RV(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Al;return n&&(Pe(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Pe(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Pe(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Al,this.toJSON())}_performRefresh(){return qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gn{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Dd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _V(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await id(this,this.stsTokenManager.getToken(this.auth,e));return Pe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return NV(this,e)}reload(){return AV(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Pm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await id(this,CV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,p=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,w=(a=r.photoURL)!==null&&a!==void 0?a:void 0,y=(l=r.tenantId)!==null&&l!==void 0?l:void 0,b=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,N=(u=r.createdAt)!==null&&u!==void 0?u:void 0,x=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:R,isAnonymous:I,providerData:V,stsTokenManager:j}=r;Pe(E&&j,e,"internal-error");const T=Al.fromJSON(this.name,j);Pe(typeof E=="string",e,"internal-error"),bi(f,e.name),bi(m,e.name),Pe(typeof R=="boolean",e,"internal-error"),Pe(typeof I=="boolean",e,"internal-error"),bi(p,e.name),bi(w,e.name),bi(y,e.name),bi(b,e.name),bi(N,e.name),bi(x,e.name);const S=new Gn({uid:E,auth:e,email:m,emailVerified:R,displayName:f,isAnonymous:I,photoURL:w,phoneNumber:p,tenantId:y,stsTokenManager:T,createdAt:N,lastLoginAt:x});return V&&Array.isArray(V)&&(S.providerData=V.map(k=>Object.assign({},k))),b&&(S._redirectEventId=b),S}static async _fromIdTokenResponse(e,r,n=!1){const s=new Al;s.updateFromServerResponse(r);const i=new Gn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Pm(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?kR(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Al;l.updateFromIdToken(n);const c=new Gn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Map;function Gs(t){ti(t instanceof Function,"Expected a class definition");let e=aC.get(t);return e?(ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,aC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}MR.type="NONE";const lC=MR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t,e,r){return`firebase:${t}:${e}:${r}`}class Sl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=kf(this.userKey,s.apiKey,i),this.fullPersistenceKey=kf("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await jm(this.auth,{idToken:e}).catch(()=>{});return r?Gn._fromGetAccountInfoResponse(this.auth,r,e):null}return Gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Sl(Gs(lC),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Gs(lC);const a=kf(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(a);if(d){let f;if(typeof d=="string"){const m=await jm(e,{idToken:d}).catch(()=>{});if(!m)break;f=await Gn._fromGetAccountInfoResponse(e,m,d)}else f=Gn._fromJSON(e,d);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Sl(i,e,n):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Sl(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BR(e))return"Blackberry";if(UR(e))return"Webos";if(OR(e))return"Safari";if((e.includes("chrome/")||LR(e))&&!e.includes("edge/"))return"Chrome";if(VR(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function DR(t=_r()){return/firefox\//i.test(t)}function OR(t=_r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LR(t=_r()){return/crios\//i.test(t)}function FR(t=_r()){return/iemobile/i.test(t)}function VR(t=_r()){return/android/i.test(t)}function BR(t=_r()){return/blackberry/i.test(t)}function UR(t=_r()){return/webos/i.test(t)}function Lw(t=_r()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jV(t=_r()){var e;return Lw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PV(){return MO()&&document.documentMode===10}function qR(t=_r()){return Lw(t)||VR(t)||UR(t)||BR(t)||/windows phone/i.test(t)||FR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e=[]){let r;switch(t){case"Browser":r=cC(_r());break;case"Worker":r=`${cC(_r())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${hc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(t,e={}){return To(t,"GET","/v2/passwordPolicy",No(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=6;class OV{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:DV,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uC(this),this.idTokenSubscription=new uC(this),this.beforeStateQueue=new kV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Gs(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await Sl.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await jm(this,{idToken:e}),n=await Gn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(xn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Pm(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Ws(this));const r=e?zt(e):null;return r&&Pe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MV(this),r=new OV(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _d("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await IV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Gs(e)||this._popupRedirectResolver;Pe(r,this,"argument-error"),this.redirectPersistenceManager=await Sl.create(this,[Gs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{a=!0,c()}}else{const c=e.addObserver(r);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&hV(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ra(t){return zt(t)}class uC{constructor(e){this.auth=e,this.observer=null,this.addObserver=qO(r=>this.observer=r)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FV(t){Vp=t}function $R(t){return Vp.loadJS(t)}function VV(){return Vp.recaptchaEnterpriseScript}function BV(){return Vp.gapiScript}function UV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class qV{constructor(){this.enterprise=new GV}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class GV{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const $V="recaptcha-enterprise",zR="NO_RECAPTCHA";class zV{constructor(e){this.type=$V,this.auth=Ra(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{EV(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new bV(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;iC(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(zR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qV().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{n(this.auth).then(l=>{if(!r&&iC(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=VV();c.length!==0&&(c+=l),$R(c).then(()=>{s(l,i,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function dC(t,e,r,n=!1,s=!1){const i=new zV(t);let a;if(s)a=zR;else try{a=await i.verify(r)}catch{a=await i.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ev(t,e,r,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await dC(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await dC(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(t,e){const r=Hx(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(ha(i,e??{}))return s;Yn(s,"already-initialized")}return r.initialize({options:e})}function WV(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Gs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function QV(t,e,r){const n=Ra(t);Pe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=HR(e),{host:a,port:l}=YV(e),c=l===null?"":`:${l}`,u={url:`${i}//${a}${c}/`},d=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Pe(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Pe(ha(u,n.config.emulator)&&ha(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,dc(a)?(UA(`${i}//${a}${c}`),qA("Auth",!0)):KV()}function HR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YV(t){const e=HR(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:hC(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:hC(a)}}}function hC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function KV(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return qs("not implemented")}_getIdTokenResponse(e){return qs("not implemented")}_linkToIdToken(e,r){return qs("not implemented")}_getReauthenticationResolver(e){return qs("not implemented")}}async function JV(t,e){return To(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(t,e){return Ld(t,"POST","/v1/accounts:signInWithPassword",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV(t,e){return Ld(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}async function eB(t,e){return Ld(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends Fw{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new od(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new od(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ev(e,r,"signInWithPassword",XV);case"emailLink":return ZV(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ev(e,n,"signUpPassword",JV);case"emailLink":return eB(e,{idToken:r,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(t,e){return Ld(t,"POST","/v1/accounts:signInWithIdp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="http://localhost";class ga extends Fw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Yn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Dd(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new ga(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Rl(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Rl(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Rl(e,r)}buildRequest(){const e={requestUri:tB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ad(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nB(t){const e=ru(nu(t)).link,r=e?ru(nu(e)).deep_link_id:null,n=ru(nu(t)).deep_link_id;return(n?ru(nu(n)).link:null)||n||r||e||t}class Vw{constructor(e){var r,n,s,i,a,l;const c=ru(nu(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=rB((s=c.mode)!==null&&s!==void 0?s:null);Pe(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=c.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=nB(e);try{return new Vw(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.providerId=xc.PROVIDER_ID}static credential(e,r){return od._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Vw.parseLink(r);return Pe(n,"argument-error"),od._fromEmailAndCode(e,n.code,n.tenantId)}}xc.PROVIDER_ID="password";xc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends WR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Fd{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ga._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ji.credential(r,n)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Fd{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com";Pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Fd{constructor(){super("twitter.com")}static credential(e,r){return ga._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ki.credential(r,n)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e){return Ld(t,"POST","/v1/accounts:signUp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Gn._fromIdTokenResponse(e,n,s),a=fC(n);return new ya({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=fC(n);return new ya({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function fC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends oi{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,km.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new km(e,r,n,s)}}function QR(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(t,i,e,n):i})}async function iB(t,e,r=!1){const n=await id(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ya._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oB(t,e,r=!1){const{auth:n}=t;if(xn(n.app))return Promise.reject(Ws(n));const s="reauthenticate";try{const i=await id(t,QR(n,s,e,t),r);Pe(i.idToken,n,"internal-error");const a=Ow(i.idToken);Pe(a,n,"internal-error");const{sub:l}=a;return Pe(t.uid===l,n,"user-mismatch"),ya._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Yn(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(t,e,r=!1){if(xn(t.app))return Promise.reject(Ws(t));const n="signIn",s=await QR(t,n,e),i=await ya._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function aB(t,e){return YR(Ra(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t){const e=Ra(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lB(t,e,r){if(xn(t.app))return Promise.reject(Ws(t));const n=Ra(t),a=await ev(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sB).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&KR(t),c}),l=await ya._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(l.user),l}function cB(t,e,r){return xn(t.app)?Promise.reject(Ws(t)):aB(zt(t),xc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&KR(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t,e){return zt(t).setPersistence(e)}function dB(t,e,r,n){return zt(t).onIdTokenChanged(e,r,n)}function hB(t,e,r){return zt(t).beforeAuthStateChanged(e,r)}function fB(t,e,r,n){return zt(t).onAuthStateChanged(e,r,n)}function mC(t){return zt(t).signOut()}const Mm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Mm,"1"),this.storage.removeItem(Mm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=1e3,pB=10;class XR extends JR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);PV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pB):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},mB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}XR.type="LOCAL";const ZR=XR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI extends JR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}eI.type="SESSION";const tI=eI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Bp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(a).map(async u=>u(r.origin,i)),c=await gB(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const u=Bw("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(){return window}function vB(t){vs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){return typeof vs().WorkerGlobalScope<"u"&&typeof vs().importScripts=="function"}async function xB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function bB(){return rI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebaseLocalStorageDb",EB=1,Dm="firebaseLocalStorage",sI="fbase_key";class Vd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Up(t,e){return t.transaction([Dm],e?"readwrite":"readonly").objectStore(Dm)}function CB(){const t=indexedDB.deleteDatabase(nI);return new Vd(t).toPromise()}function tv(){const t=indexedDB.open(nI,EB);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Dm,{keyPath:sI})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Dm)?e(n):(n.close(),await CB(),e(await tv()))})})}async function pC(t,e,r){const n=Up(t,!0).put({[sI]:e,value:r});return new Vd(n).toPromise()}async function NB(t,e){const r=Up(t,!1).get(e),n=await new Vd(r).toPromise();return n===void 0?null:n.value}function gC(t,e){const r=Up(t,!0).delete(e);return new Vd(r).toPromise()}const TB=800,_B=3;class iI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>_B)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bp._getInstance(bB()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await xB(),!this.activeServiceWorker)return;this.sender=new yB(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tv();return await pC(e,Mm,"1"),await gC(e,Mm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>pC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>NB(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>gC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Up(s,!1).getAll();return new Vd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iI.type="LOCAL";const AB=iI;new Od(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t,e){return e?Gs(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw extends Fw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Rl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function RB(t){return YR(t.auth,new Uw(t),t.bypassAuthState)}function IB(t){const{auth:e,user:r}=t;return Pe(r,e,"internal-error"),oB(r,new Uw(t),t.bypassAuthState)}async function jB(t){const{auth:e,user:r}=t;return Pe(r,e,"internal-error"),iB(r,new Uw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RB;case"linkViaPopup":case"linkViaRedirect":return jB;case"reauthViaPopup":case"reauthViaRedirect":return IB;default:Yn(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=new Od(2e3,1e4);class gl extends oI{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,gl.currentPopupAction&&gl.currentPopupAction.cancel(),gl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=Bw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ys(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ys(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ys(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PB.get())};e()}}gl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB="pendingRedirect",Mf=new Map;class MB extends oI{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Mf.get(this.auth._key());if(!e){try{const n=await DB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Mf.set(this.auth._key(),e)}return this.bypassAuthState||Mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DB(t,e){const r=FB(e),n=LB(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function OB(t,e){Mf.set(t._key(),e)}function LB(t){return Gs(t._redirectPersistence)}function FB(t){return kf(kB,t.config.apiKey,t.name)}async function VB(t,e,r=!1){if(xn(t.app))return Promise.reject(Ws(t));const n=Ra(t),s=SB(n,e),a=await new MB(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=10*60*1e3;class UB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qB(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!aI(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ys(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BB&&this.cachedEventUids.clear(),this.cachedEventUids.has(yC(e))}saveEventToCache(e){this.cachedEventUids.add(yC(e)),this.lastProcessedEventTime=Date.now()}}function yC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e={}){return To(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zB=/^https?/;async function HB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await GB(t);for(const r of e)try{if(WB(r))return}catch{}Yn(t,"unauthorized-domain")}function WB(t){const e=Xy(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!zB.test(r))return!1;if($B.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB=new Od(3e4,6e4);function vC(){const t=vs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function YB(t){return new Promise((e,r)=>{var n,s,i;function a(){vC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vC(),r(ys(t,"network-request-failed"))},timeout:QB.get()})}if(!((s=(n=vs().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vs().gapi)===null||i===void 0)&&i.load)a();else{const l=UV("iframefcb");return vs()[l]=()=>{gapi.load?a():r(ys(t,"network-request-failed"))},$R(`${BV()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Df=null,e})}let Df=null;function KB(t){return Df=Df||YB(t),Df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB=new Od(5e3,15e3),XB="__/auth/iframe",ZB="emulator/auth/iframe",e8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r8(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Dw(e,ZB):`https://${t.config.authDomain}/${XB}`,n={apiKey:e.apiKey,appName:t.name,v:hc},s=t8.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Ad(n).slice(1)}`}async function n8(t){const e=await KB(t),r=vs().gapi;return Pe(r,t,"internal-error"),e.open({where:document.body,url:r8(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e8,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=ys(t,"network-request-failed"),l=vs().setTimeout(()=>{i(a)},JB.get());function c(){vs().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i8=500,o8=600,a8="_blank",l8="http://localhost";class xC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c8(t,e,r,n=i8,s=o8){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},s8),{width:n.toString(),height:s.toString(),top:i,left:a}),u=_r().toLowerCase();r&&(l=LR(u)?a8:r),DR(u)&&(e=e||l8,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[p,w])=>`${m}${p}=${w},`,"");if(jV(u)&&l!=="_self")return u8(e||"",l),new xC(null);const f=window.open(e||"",l,d);Pe(f,t,"popup-blocked");try{f.focus()}catch{}return new xC(f)}function u8(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8="__/auth/handler",h8="emulator/auth/handler",f8=encodeURIComponent("fac");async function wC(t,e,r,n,s,i){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:hc,eventId:s};if(e instanceof WR){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",UO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof Fd){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${f8}=${encodeURIComponent(c)}`:"";return`${m8(t)}?${Ad(l).slice(1)}${u}`}function m8({config:t}){return t.emulator?Dw(t,h8):`https://${t.authDomain}/${d8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="webStorageSupport";class p8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tI,this._completeRedirectFn=VB,this._overrideRedirectResult=OB}async _openPopup(e,r,n,s){var i;ti((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await wC(e,r,n,Xy(),s);return c8(e,a,Bw())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await wC(e,r,n,Xy(),s);return vB(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(ti(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await n8(e),n=new UB(e);return r.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(f0,{type:f0},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[f0];a!==void 0&&r(!!a),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=HB(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return qR()||OR()||Lw()}}const g8=p8;var bC="@firebase/auth",EC="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x8(t){Kl(new fa("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;Pe(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GR(t)},u=new LV(n,s,i,c);return WV(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Kl(new fa("auth-internal",e=>{const r=Ra(e.getProvider("auth").getImmediate());return(n=>new y8(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zi(bC,EC,v8(t)),Zi(bC,EC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=5*60,b8=BA("authIdTokenMaxAge")||w8;let CC=null;const E8=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>b8)return;const s=r==null?void 0:r.token;CC!==s&&(CC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function C8(t=Wx()){const e=Hx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=HV(t,{popupRedirectResolver:g8,persistence:[AB,ZR,tI]}),n=BA("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=E8(i.toString());hB(r,a,()=>a(r.currentUser)),dB(r,l=>a(l))}}const s=FA("auth");return s&&QV(r,`http://${s}`),r}function N8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FV({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=ys("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",N8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x8("Browser");const T8={apiKey:"AIzaSyBUftmUEX4_zgW-7daz3Yq9Md7QJQWTDOM",authDomain:"vmaster-fcdff.firebaseapp.com",projectId:"vmaster-fcdff",storageBucket:"vmaster-fcdff.firebasestorage.app",messagingSenderId:"44584686885",appId:"1:44584686885:web:1aa7941cebb2ad30bf76cc",measurementId:"G-FH5MHDJ62K"},lI=G5().length?Wx():zA(T8),ft=Y6(lI),na=C8(lI);uB(na,ZR);function ot(...t){return pO(NA(t))}const _8=x3,cI=g.forwardRef(({className:t,...e},r)=>o.jsx(yA,{ref:r,className:ot("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));cI.displayName=yA.displayName;const A8=Mx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),uI=g.forwardRef(({className:t,variant:e,...r},n)=>o.jsx(vA,{ref:n,className:ot(A8({variant:e}),t),...r}));uI.displayName=vA.displayName;const S8=g.forwardRef(({className:t,...e},r)=>o.jsx(bA,{ref:r,className:ot("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));S8.displayName=bA.displayName;const dI=g.forwardRef(({className:t,...e},r)=>o.jsx(EA,{ref:r,className:ot("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(hs,{className:"h-4 w-4"})}));dI.displayName=EA.displayName;const hI=g.forwardRef(({className:t,...e},r)=>o.jsx(xA,{ref:r,className:ot("text-sm font-semibold",t),...e}));hI.displayName=xA.displayName;const fI=g.forwardRef(({className:t,...e},r)=>o.jsx(wA,{ref:r,className:ot("text-sm opacity-90",t),...e}));fI.displayName=wA.displayName;function R8(){const{toasts:t}=jD();return o.jsxs(_8,{children:[t.map(function({id:e,title:r,description:n,action:s,...i}){return o.jsxs(uI,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(hI,{children:r}),n&&o.jsx(fI,{children:n})]}),s,o.jsx(dI,{})]},e)}),o.jsx(cI,{})]})}var NC=["light","dark"],I8="(prefers-color-scheme: dark)",j8=g.createContext(void 0),P8={setTheme:t=>{},themes:[]},k8=()=>{var t;return(t=g.useContext(j8))!=null?t:P8};g.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=s?NC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(w,y=!1,b=!0)=>{let N=a?a[w]:w,x=y?w+"|| ''":`'${N}'`,E="";return s&&b&&!y&&NC.includes(w)&&(E+=`d.style.colorScheme = '${w}';`),r==="class"?y||N?E+=`c.add(${x})`:E+="null":N&&(E+=`d[s](n,${x})`),E},p=t?`!function(){${d}${m(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${I8}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var M8=t=>{switch(t){case"success":return L8;case"info":return V8;case"warning":return F8;case"error":return B8;default:return null}},D8=Array(12).fill(0),O8=({visible:t})=>J.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},J.createElement("div",{className:"sonner-spinner"},D8.map((e,r)=>J.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),L8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),F8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),V8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),B8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),U8=()=>{let[t,e]=J.useState(document.hidden);return J.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},rv=1,q8=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:rv++,i=this.toasts.find(l=>l.id===s),a=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:r}),{...l,...t,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...n,dismissible:a,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0;return n.then(async i=>{if($8(i)&&!i.ok){s=!1;let a=typeof e.error=="function"?await e.error(`HTTP error! status: ${i.status}`):e.error,l=typeof e.description=="function"?await e.description(`HTTP error! status: ${i.status}`):e.description;this.create({id:r,type:"error",message:a,description:l})}else if(e.success!==void 0){s=!1;let a=typeof e.success=="function"?await e.success(i):e.success,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"success",message:a,description:l})}}).catch(async i=>{if(e.error!==void 0){s=!1;let a=typeof e.error=="function"?await e.error(i):e.error,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"error",message:a,description:l})}}).finally(()=>{var i;s&&(this.dismiss(r),r=void 0),(i=e.finally)==null||i.call(e)}),r},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||rv++;return this.create({jsx:t(r),id:r,...e}),r},this.subscribers=[],this.toasts=[]}},en=new q8,G8=(t,e)=>{let r=(e==null?void 0:e.id)||rv++;return en.addToast({title:t,...e,id:r}),r},$8=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",z8=G8,H8=()=>en.toasts;Object.assign(z8,{success:en.success,info:en.info,warning:en.warning,error:en.error,custom:en.custom,message:en.message,promise:en.promise,dismiss:en.dismiss,loading:en.loading},{getHistory:H8});function W8(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}W8(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function rf(t){return t.label!==void 0}var Q8=3,Y8="32px",K8=4e3,J8=356,X8=14,Z8=20,e9=200;function t9(...t){return t.filter(Boolean).join(" ")}var r9=t=>{var e,r,n,s,i,a,l,c,u,d;let{invert:f,toast:m,unstyled:p,interacting:w,setHeights:y,visibleToasts:b,heights:N,index:x,toasts:E,expanded:R,removeToast:I,defaultRichColors:V,closeButton:j,style:T,cancelButtonStyle:S,actionButtonStyle:k,className:L="",descriptionClassName:D="",duration:P,position:B,gap:z,loadingIcon:Y,expandByDefault:ee,classNames:U,icons:H,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:ne,cn:le}=t,[he,_e]=J.useState(!1),[Me,ue]=J.useState(!1),[Z,de]=J.useState(!1),[G,me]=J.useState(!1),[Ee,Ce]=J.useState(0),[pe,ve]=J.useState(0),at=J.useRef(null),ht=J.useRef(null),Ft=x===0,rt=x+1<=b,wt=m.type,hr=m.dismissible!==!1,An=m.className||"",Cs=m.descriptionClassName||"",hn=J.useMemo(()=>N.findIndex(je=>je.toastId===m.id)||0,[N,m.id]),Ns=J.useMemo(()=>{var je;return(je=m.closeButton)!=null?je:j},[m.closeButton,j]),jo=J.useMemo(()=>m.duration||P||K8,[m.duration,P]),It=J.useRef(0),bt=J.useRef(0),Ts=J.useRef(0),Sn=J.useRef(null),[Po,li]=B.split("-"),fn=J.useMemo(()=>N.reduce((je,ze,et)=>et>=hn?je:je+ze.height,0),[N,hn]),Rn=U8(),In=m.invert||f,Ar=wt==="loading";bt.current=J.useMemo(()=>hn*z+fn,[hn,fn]),J.useEffect(()=>{_e(!0)},[]),J.useLayoutEffect(()=>{if(!he)return;let je=ht.current,ze=je.style.height;je.style.height="auto";let et=je.getBoundingClientRect().height;je.style.height=ze,ve(et),y(Jt=>Jt.find(fr=>fr.toastId===m.id)?Jt.map(fr=>fr.toastId===m.id?{...fr,height:et}:fr):[{toastId:m.id,height:et,position:m.position},...Jt])},[he,m.title,m.description,y,m.id]);let Sr=J.useCallback(()=>{ue(!0),Ce(bt.current),y(je=>je.filter(ze=>ze.toastId!==m.id)),setTimeout(()=>{I(m)},e9)},[m,I,y,bt]);J.useEffect(()=>{if(m.promise&&wt==="loading"||m.duration===1/0||m.type==="loading")return;let je,ze=jo;return R||w||ne&&Rn?(()=>{if(Ts.current<It.current){let et=new Date().getTime()-It.current;ze=ze-et}Ts.current=new Date().getTime()})():ze!==1/0&&(It.current=new Date().getTime(),je=setTimeout(()=>{var et;(et=m.onAutoClose)==null||et.call(m,m),Sr()},ze)),()=>clearTimeout(je)},[R,w,ee,m,jo,Sr,m.promise,wt,ne,Rn]),J.useEffect(()=>{let je=ht.current;if(je){let ze=je.getBoundingClientRect().height;return ve(ze),y(et=>[{toastId:m.id,height:ze,position:m.position},...et]),()=>y(et=>et.filter(Jt=>Jt.toastId!==m.id))}},[y,m.id]),J.useEffect(()=>{m.delete&&Sr()},[Sr,m.delete]);function _c(){return H!=null&&H.loading?J.createElement("div",{className:"sonner-loader","data-visible":wt==="loading"},H.loading):Y?J.createElement("div",{className:"sonner-loader","data-visible":wt==="loading"},Y):J.createElement(O8,{visible:wt==="loading"})}return J.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ht,className:le(L,An,U==null?void 0:U.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[wt],(r=m==null?void 0:m.classNames)==null?void 0:r[wt]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:V,"data-styled":!(m.jsx||m.unstyled||p),"data-mounted":he,"data-promise":!!m.promise,"data-removed":Me,"data-visible":rt,"data-y-position":Po,"data-x-position":li,"data-index":x,"data-front":Ft,"data-swiping":Z,"data-dismissible":hr,"data-type":wt,"data-invert":In,"data-swipe-out":G,"data-expanded":!!(R||ee&&he),style:{"--index":x,"--toasts-before":x,"--z-index":E.length-x,"--offset":`${Me?Ee:bt.current}px`,"--initial-height":ee?"auto":`${pe}px`,...T,...m.style},onPointerDown:je=>{Ar||!hr||(at.current=new Date,Ce(bt.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(de(!0),Sn.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,ze,et,Jt;if(G||!hr)return;Sn.current=null;let fr=Number(((je=ht.current)==null?void 0:je.style.getPropertyValue("--swipe-amount").replace("px",""))||0),jn=new Date().getTime()-((ze=at.current)==null?void 0:ze.getTime()),gt=Math.abs(fr)/jn;if(Math.abs(fr)>=Z8||gt>.11){Ce(bt.current),(et=m.onDismiss)==null||et.call(m,m),Sr(),me(!0);return}(Jt=ht.current)==null||Jt.style.setProperty("--swipe-amount","0px"),de(!1)},onPointerMove:je=>{var ze;if(!Sn.current||!hr)return;let et=je.clientY-Sn.current.y,Jt=je.clientX-Sn.current.x,fr=(Po==="top"?Math.min:Math.max)(0,et),jn=je.pointerType==="touch"?10:2;Math.abs(fr)>jn?(ze=ht.current)==null||ze.style.setProperty("--swipe-amount",`${et}px`):Math.abs(Jt)>jn&&(Sn.current=null)}},Ns&&!m.jsx?J.createElement("button",{"aria-label":ie,"data-disabled":Ar,"data-close-button":!0,onClick:Ar||!hr?()=>{}:()=>{var je;Sr(),(je=m.onDismiss)==null||je.call(m,m)},className:le(U==null?void 0:U.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},J.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),J.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||J.isValidElement(m.title)?m.jsx||m.title:J.createElement(J.Fragment,null,wt||m.icon||m.promise?J.createElement("div",{"data-icon":"",className:le(U==null?void 0:U.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||_c():null,m.type!=="loading"?m.icon||(H==null?void 0:H[wt])||M8(wt):null):null,J.createElement("div",{"data-content":"",className:le(U==null?void 0:U.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},J.createElement("div",{"data-title":"",className:le(U==null?void 0:U.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?J.createElement("div",{"data-description":"",className:le(D,Cs,U==null?void 0:U.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),J.isValidElement(m.cancel)?m.cancel:m.cancel&&rf(m.cancel)?J.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||S,onClick:je=>{var ze,et;rf(m.cancel)&&hr&&((et=(ze=m.cancel).onClick)==null||et.call(ze,je),Sr())},className:le(U==null?void 0:U.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,J.isValidElement(m.action)?m.action:m.action&&rf(m.action)?J.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||k,onClick:je=>{var ze,et;rf(m.action)&&(je.defaultPrevented||((et=(ze=m.action).onClick)==null||et.call(ze,je),Sr()))},className:le(U==null?void 0:U.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function TC(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var n9=t=>{let{invert:e,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:a,offset:l,theme:c="light",richColors:u,duration:d,style:f,visibleToasts:m=Q8,toastOptions:p,dir:w=TC(),gap:y=X8,loadingIcon:b,icons:N,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:E,cn:R=t9}=t,[I,V]=J.useState([]),j=J.useMemo(()=>Array.from(new Set([r].concat(I.filter(ne=>ne.position).map(ne=>ne.position)))),[I,r]),[T,S]=J.useState([]),[k,L]=J.useState(!1),[D,P]=J.useState(!1),[B,z]=J.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=J.useRef(null),ee=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=J.useRef(null),H=J.useRef(!1),ie=J.useCallback(ne=>{var le;(le=I.find(he=>he.id===ne.id))!=null&&le.delete||en.dismiss(ne.id),V(he=>he.filter(({id:_e})=>_e!==ne.id))},[I]);return J.useEffect(()=>en.subscribe(ne=>{if(ne.dismiss){V(le=>le.map(he=>he.id===ne.id?{...he,delete:!0}:he));return}setTimeout(()=>{X_.flushSync(()=>{V(le=>{let he=le.findIndex(_e=>_e.id===ne.id);return he!==-1?[...le.slice(0,he),{...le[he],...ne},...le.slice(he+1)]:[ne,...le]})})})}),[]),J.useEffect(()=>{if(c!=="system"){z(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:ne})=>{z(ne?"dark":"light")})},[c]),J.useEffect(()=>{I.length<=1&&L(!1)},[I]),J.useEffect(()=>{let ne=le=>{var he,_e;n.every(Me=>le[Me]||le.code===Me)&&(L(!0),(he=Y.current)==null||he.focus()),le.code==="Escape"&&(document.activeElement===Y.current||(_e=Y.current)!=null&&_e.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[n]),J.useEffect(()=>{if(Y.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,H.current=!1)}},[Y.current]),I.length?J.createElement("section",{"aria-label":`${x} ${ee}`,tabIndex:-1},j.map((ne,le)=>{var he;let[_e,Me]=ne.split("-");return J.createElement("ol",{key:ne,dir:w==="auto"?TC():w,tabIndex:-1,ref:Y,className:a,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":_e,"data-x-position":Me,style:{"--front-toast-height":`${((he=T[0])==null?void 0:he.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||Y8,"--width":`${J8}px`,"--gap":`${y}px`,...f},onBlur:ue=>{H.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(H.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||H.current||(H.current=!0,U.current=ue.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{D||L(!1)},onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},I.filter(ue=>!ue.position&&le===0||ue.position===ne).map((ue,Z)=>{var de,G;return J.createElement(r9,{key:ue.id,icons:N,index:Z,toast:ue,defaultRichColors:u,duration:(de=p==null?void 0:p.duration)!=null?de:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:e,visibleToasts:m,closeButton:(G=p==null?void 0:p.closeButton)!=null?G:i,interacting:D,position:ne,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:ie,toasts:I.filter(me=>me.position==ue.position),heights:T.filter(me=>me.position==ue.position),setHeights:S,expandByDefault:s,gap:y,loadingIcon:b,expanded:k,pauseWhenPageIsHidden:E,cn:R})}))})):null};const s9=({...t})=>{const{theme:e="system"}=k8();return o.jsx(n9,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var i9=YN.useId||(()=>{}),o9=0;function sa(t){const[e,r]=g.useState(i9());return Tr(()=>{r(n=>n??String(o9++))},[t]),e?`radix-${e}`:""}const a9=["top","right","bottom","left"],po=Math.min,rn=Math.max,Om=Math.round,nf=Math.floor,go=t=>({x:t,y:t}),l9={left:"right",right:"left",bottom:"top",top:"bottom"},c9={start:"end",end:"start"};function nv(t,e,r){return rn(t,po(e,r))}function ri(t,e){return typeof t=="function"?t(e):t}function ni(t){return t.split("-")[0]}function wc(t){return t.split("-")[1]}function qw(t){return t==="x"?"y":"x"}function Gw(t){return t==="y"?"height":"width"}function yo(t){return["top","bottom"].includes(ni(t))?"y":"x"}function $w(t){return qw(yo(t))}function u9(t,e,r){r===void 0&&(r=!1);const n=wc(t),s=$w(t),i=Gw(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Lm(a)),[a,Lm(a)]}function d9(t){const e=Lm(t);return[sv(t),e,sv(e)]}function sv(t){return t.replace(/start|end/g,e=>c9[e])}function h9(t,e,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?i:a;default:return[]}}function f9(t,e,r,n){const s=wc(t);let i=h9(ni(t),r==="start",n);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(sv)))),i}function Lm(t){return t.replace(/left|right|bottom|top/g,e=>l9[e])}function m9(t){return{top:0,right:0,bottom:0,left:0,...t}}function mI(t){return typeof t!="number"?m9(t):{top:t,right:t,bottom:t,left:t}}function Fm(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function _C(t,e,r){let{reference:n,floating:s}=t;const i=yo(e),a=$w(e),l=Gw(a),c=ni(e),u=i==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-s.width,y:f};break;default:p={x:n.x,y:n.y}}switch(wc(e)){case"start":p[a]-=m*(r&&u?-1:1);break;case"end":p[a]+=m*(r&&u?-1:1);break}return p}const p9=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:a}=r,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=_C(u,n,c),m=n,p={},w=0;for(let y=0;y<l.length;y++){const{name:b,fn:N}=l[y],{x,y:E,data:R,reset:I}=await N({x:d,y:f,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:u,platform:a,elements:{reference:t,floating:e}});d=x??d,f=E??f,p={...p,[b]:{...p[b],...R}},I&&w<=50&&(w++,typeof I=="object"&&(I.placement&&(m=I.placement),I.rects&&(u=I.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):I.rects),{x:d,y:f}=_C(u,m,c)),y=-1)}return{x:d,y:f,placement:m,strategy:s,middlewareData:p}};async function ad(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=ri(e,t),w=mI(p),b=l[m?f==="floating"?"reference":"floating":f],N=Fm(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=f==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},I=Fm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:E,strategy:c}):x);return{top:(N.top-I.top+w.top)/R.y,bottom:(I.bottom-N.bottom+w.bottom)/R.y,left:(N.left-I.left+w.left)/R.x,right:(I.right-N.right+w.right)/R.x}}const g9=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ri(t,e)||{};if(u==null)return{};const f=mI(d),m={x:r,y:n},p=$w(s),w=Gw(p),y=await a.getDimensions(u),b=p==="y",N=b?"top":"left",x=b?"bottom":"right",E=b?"clientHeight":"clientWidth",R=i.reference[w]+i.reference[p]-m[p]-i.floating[w],I=m[p]-i.reference[p],V=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let j=V?V[E]:0;(!j||!await(a.isElement==null?void 0:a.isElement(V)))&&(j=l.floating[E]||i.floating[w]);const T=R/2-I/2,S=j/2-y[w]/2-1,k=po(f[N],S),L=po(f[x],S),D=k,P=j-y[w]-L,B=j/2-y[w]/2+T,z=nv(D,B,P),Y=!c.arrow&&wc(s)!=null&&B!==z&&i.reference[w]/2-(B<D?k:L)-y[w]/2<0,ee=Y?B<D?B-D:B-P:0;return{[p]:m[p]+ee,data:{[p]:z,centerOffset:B-z-ee,...Y&&{alignmentOffset:ee}},reset:Y}}}),y9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0,...b}=ri(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const N=ni(s),x=yo(l),E=ni(l)===l,R=await(c.isRTL==null?void 0:c.isRTL(u.floating)),I=m||(E||!y?[Lm(l)]:d9(l)),V=w!=="none";!m&&V&&I.push(...f9(l,y,w,R));const j=[l,...I],T=await ad(e,b),S=[];let k=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&S.push(T[N]),f){const B=u9(s,a,R);S.push(T[B[0]],T[B[1]])}if(k=[...k,{placement:s,overflows:S}],!S.every(B=>B<=0)){var L,D;const B=(((L=i.flip)==null?void 0:L.index)||0)+1,z=j[B];if(z)return{data:{index:B,overflows:k},reset:{placement:z}};let Y=(D=k.filter(ee=>ee.overflows[0]<=0).sort((ee,U)=>ee.overflows[1]-U.overflows[1])[0])==null?void 0:D.placement;if(!Y)switch(p){case"bestFit":{var P;const ee=(P=k.filter(U=>{if(V){const H=yo(U.placement);return H===x||H==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(H=>H>0).reduce((H,ie)=>H+ie,0)]).sort((U,H)=>U[1]-H[1])[0])==null?void 0:P[0];ee&&(Y=ee);break}case"initialPlacement":Y=l;break}if(s!==Y)return{reset:{placement:Y}}}return{}}}};function AC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function SC(t){return a9.some(e=>t[e]>=0)}const v9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=ri(t,e);switch(n){case"referenceHidden":{const i=await ad(e,{...s,elementContext:"reference"}),a=AC(i,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:SC(a)}}}case"escaped":{const i=await ad(e,{...s,altBoundary:!0}),a=AC(i,r.floating);return{data:{escapedOffsets:a,escaped:SC(a)}}}default:return{}}}}};async function x9(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=ni(r),l=wc(r),c=yo(r)==="y",u=["left","top"].includes(a)?-1:1,d=i&&c?-1:1,f=ri(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof w=="number"&&(p=l==="end"?w*-1:w),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const w9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await x9(e,t);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},b9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:N,y:x}=b;return{x:N,y:x}}},...c}=ri(t,e),u={x:r,y:n},d=await ad(e,c),f=yo(ni(s)),m=qw(f);let p=u[m],w=u[f];if(i){const b=m==="y"?"top":"left",N=m==="y"?"bottom":"right",x=p+d[b],E=p-d[N];p=nv(x,p,E)}if(a){const b=f==="y"?"top":"left",N=f==="y"?"bottom":"right",x=w+d[b],E=w-d[N];w=nv(x,w,E)}const y=l.fn({...e,[m]:p,[f]:w});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[m]:i,[f]:a}}}}}},E9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ri(t,e),d={x:r,y:n},f=yo(s),m=qw(f);let p=d[m],w=d[f];const y=ri(l,e),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const E=m==="y"?"height":"width",R=i.reference[m]-i.floating[E]+b.mainAxis,I=i.reference[m]+i.reference[E]-b.mainAxis;p<R?p=R:p>I&&(p=I)}if(u){var N,x;const E=m==="y"?"width":"height",R=["top","left"].includes(ni(s)),I=i.reference[f]-i.floating[E]+(R&&((N=a.offset)==null?void 0:N[f])||0)+(R?0:b.crossAxis),V=i.reference[f]+i.reference[E]+(R?0:((x=a.offset)==null?void 0:x[f])||0)-(R?b.crossAxis:0);w<I?w=I:w>V&&(w=V)}return{[m]:p,[f]:w}}}},C9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=ri(t,e),d=await ad(e,u),f=ni(s),m=wc(s),p=yo(s)==="y",{width:w,height:y}=i.floating;let b,N;f==="top"||f==="bottom"?(b=f,N=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(N=f,b=m==="end"?"top":"bottom");const x=y-d.top-d.bottom,E=w-d.left-d.right,R=po(y-d[b],x),I=po(w-d[N],E),V=!e.middlewareData.shift;let j=R,T=I;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(T=E),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(j=x),V&&!m){const k=rn(d.left,0),L=rn(d.right,0),D=rn(d.top,0),P=rn(d.bottom,0);p?T=w-2*(k!==0||L!==0?k+L:rn(d.left,d.right)):j=y-2*(D!==0||P!==0?D+P:rn(d.top,d.bottom))}await c({...e,availableWidth:T,availableHeight:j});const S=await a.getDimensions(l.floating);return w!==S.width||y!==S.height?{reset:{rects:!0}}:{}}}};function qp(){return typeof window<"u"}function bc(t){return pI(t)?(t.nodeName||"").toLowerCase():"#document"}function ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function bs(t){var e;return(e=(pI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function pI(t){return qp()?t instanceof Node||t instanceof ln(t).Node:!1}function Kn(t){return qp()?t instanceof Element||t instanceof ln(t).Element:!1}function ws(t){return qp()?t instanceof HTMLElement||t instanceof ln(t).HTMLElement:!1}function RC(t){return!qp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ln(t).ShadowRoot}function Bd(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=Jn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function N9(t){return["table","td","th"].includes(bc(t))}function Gp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function zw(t){const e=Hw(),r=Kn(t)?Jn(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function T9(t){let e=vo(t);for(;ws(e)&&!rc(e);){if(zw(e))return e;if(Gp(e))return null;e=vo(e)}return null}function Hw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rc(t){return["html","body","#document"].includes(bc(t))}function Jn(t){return ln(t).getComputedStyle(t)}function $p(t){return Kn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function vo(t){if(bc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||RC(t)&&t.host||bs(t);return RC(e)?e.host:e}function gI(t){const e=vo(t);return rc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ws(e)&&Bd(e)?e:gI(e)}function ld(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=gI(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),a=ln(s);if(i){const l=iv(a);return e.concat(a,a.visualViewport||[],Bd(s)?s:[],l&&r?ld(l):[])}return e.concat(s,ld(s,[],r))}function iv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yI(t){const e=Jn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=ws(t),i=s?t.offsetWidth:r,a=s?t.offsetHeight:n,l=Om(r)!==i||Om(n)!==a;return l&&(r=i,n=a),{width:r,height:n,$:l}}function Ww(t){return Kn(t)?t:t.contextElement}function Il(t){const e=Ww(t);if(!ws(e))return go(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=yI(e);let a=(i?Om(r.width):r.width)/n,l=(i?Om(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const _9=go(0);function vI(t){const e=ln(t);return!Hw()||!e.visualViewport?_9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function A9(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ln(t)?!1:e}function va(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=Ww(t);let a=go(1);e&&(n?Kn(n)&&(a=Il(n)):a=Il(t));const l=A9(i,r,n)?vI(i):go(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,f=s.height/a.y;if(i){const m=ln(i),p=n&&Kn(n)?ln(n):n;let w=m,y=iv(w);for(;y&&n&&p!==w;){const b=Il(y),N=y.getBoundingClientRect(),x=Jn(y),E=N.left+(y.clientLeft+parseFloat(x.paddingLeft))*b.x,R=N.top+(y.clientTop+parseFloat(x.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=E,u+=R,w=ln(y),y=iv(w)}}return Fm({width:d,height:f,x:c,y:u})}function S9(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",a=bs(n),l=e?Gp(e.floating):!1;if(n===a||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=go(1);const d=go(0),f=ws(n);if((f||!f&&!i)&&((bc(n)!=="body"||Bd(a))&&(c=$p(n)),ws(n))){const m=va(n);u=Il(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x,y:r.y*u.y-c.scrollTop*u.y+d.y}}function R9(t){return Array.from(t.getClientRects())}function ov(t,e){const r=$p(t).scrollLeft;return e?e.left+r:va(bs(t)).left+r}function I9(t){const e=bs(t),r=$p(t),n=t.ownerDocument.body,s=rn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=rn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+ov(t);const l=-r.scrollTop;return Jn(n).direction==="rtl"&&(a+=rn(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:a,y:l}}function j9(t,e){const r=ln(t),n=bs(t),s=r.visualViewport;let i=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Hw();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function P9(t,e){const r=va(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=ws(t)?Il(t):go(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:a,height:l,x:c,y:u}}function IC(t,e,r){let n;if(e==="viewport")n=j9(t,r);else if(e==="document")n=I9(bs(t));else if(Kn(e))n=P9(e,r);else{const s=vI(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return Fm(n)}function xI(t,e){const r=vo(t);return r===e||!Kn(r)||rc(r)?!1:Jn(r).position==="fixed"||xI(r,e)}function k9(t,e){const r=e.get(t);if(r)return r;let n=ld(t,[],!1).filter(l=>Kn(l)&&bc(l)!=="body"),s=null;const i=Jn(t).position==="fixed";let a=i?vo(t):t;for(;Kn(a)&&!rc(a);){const l=Jn(a),c=zw(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Bd(a)&&!c&&xI(t,a))?n=n.filter(d=>d!==a):s=l,a=vo(a)}return e.set(t,n),n}function M9(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const a=[...r==="clippingAncestors"?Gp(e)?[]:k9(e,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,d)=>{const f=IC(e,d,s);return u.top=rn(f.top,u.top),u.right=po(f.right,u.right),u.bottom=po(f.bottom,u.bottom),u.left=rn(f.left,u.left),u},IC(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function D9(t){const{width:e,height:r}=yI(t);return{width:e,height:r}}function O9(t,e,r){const n=ws(e),s=bs(e),i=r==="fixed",a=va(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=go(0);if(n||!n&&!i)if((bc(e)!=="body"||Bd(s))&&(l=$p(e)),n){const p=va(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=ov(s));let u=0,d=0;if(s&&!n&&!i){const p=s.getBoundingClientRect();d=p.top+l.scrollTop,u=p.left+l.scrollLeft-ov(s,p)}const f=a.left+l.scrollLeft-c.x-u,m=a.top+l.scrollTop-c.y-d;return{x:f,y:m,width:a.width,height:a.height}}function m0(t){return Jn(t).position==="static"}function jC(t,e){if(!ws(t)||Jn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return bs(t)===r&&(r=r.ownerDocument.body),r}function wI(t,e){const r=ln(t);if(Gp(t))return r;if(!ws(t)){let s=vo(t);for(;s&&!rc(s);){if(Kn(s)&&!m0(s))return s;s=vo(s)}return r}let n=jC(t,e);for(;n&&N9(n)&&m0(n);)n=jC(n,e);return n&&rc(n)&&m0(n)&&!zw(n)?r:n||T9(t)||r}const L9=async function(t){const e=this.getOffsetParent||wI,r=this.getDimensions,n=await r(t.floating);return{reference:O9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function F9(t){return Jn(t).direction==="rtl"}const V9={convertOffsetParentRelativeRectToViewportRelativeRect:S9,getDocumentElement:bs,getClippingRect:M9,getOffsetParent:wI,getElementRects:L9,getClientRects:R9,getDimensions:D9,getScale:Il,isElement:Kn,isRTL:F9};function B9(t,e){let r=null,n;const s=bs(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:u,top:d,width:f,height:m}=t.getBoundingClientRect();if(l||e(),!f||!m)return;const p=nf(d),w=nf(s.clientWidth-(u+f)),y=nf(s.clientHeight-(d+m)),b=nf(u),x={rootMargin:-p+"px "+-w+"px "+-y+"px "+-b+"px",threshold:rn(0,po(1,c))||1};let E=!0;function R(I){const V=I[0].intersectionRatio;if(V!==c){if(!E)return a();V?a(!1,V):n=setTimeout(()=>{a(!1,1e-7)},1e3)}E=!1}try{r=new IntersectionObserver(R,{...x,root:s.ownerDocument})}catch{r=new IntersectionObserver(R,x)}r.observe(t)}return a(!0),i}function U9(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Ww(t),d=s||i?[...u?ld(u):[],...ld(e)]:[];d.forEach(N=>{s&&N.addEventListener("scroll",r,{passive:!0}),i&&N.addEventListener("resize",r)});const f=u&&l?B9(u,r):null;let m=-1,p=null;a&&(p=new ResizeObserver(N=>{let[x]=N;x&&x.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=p)==null||E.observe(e)})),r()}),u&&!c&&p.observe(u),p.observe(e));let w,y=c?va(t):null;c&&b();function b(){const N=va(t);y&&(N.x!==y.x||N.y!==y.y||N.width!==y.width||N.height!==y.height)&&r(),y=N,w=requestAnimationFrame(b)}return r(),()=>{var N;d.forEach(x=>{s&&x.removeEventListener("scroll",r),i&&x.removeEventListener("resize",r)}),f==null||f(),(N=p)==null||N.disconnect(),p=null,c&&cancelAnimationFrame(w)}}const q9=w9,G9=b9,$9=y9,z9=C9,H9=v9,PC=g9,W9=E9,Q9=(t,e,r)=>{const n=new Map,s={platform:V9,...r},i={...s.platform,_c:n};return p9(t,e,{...s,platform:i})};var Of=typeof document<"u"?g.useLayoutEffect:g.useEffect;function Vm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Vm(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!Vm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function bI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kC(t,e){const r=bI(t);return Math.round(e*r)/r}function p0(t){const e=g.useRef(t);return Of(()=>{e.current=t}),e}function Y9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=g.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=g.useState(n);Vm(m,n)||p(n);const[w,y]=g.useState(null),[b,N]=g.useState(null),x=g.useCallback(U=>{U!==V.current&&(V.current=U,y(U))},[]),E=g.useCallback(U=>{U!==j.current&&(j.current=U,N(U))},[]),R=i||w,I=a||b,V=g.useRef(null),j=g.useRef(null),T=g.useRef(d),S=c!=null,k=p0(c),L=p0(s),D=p0(u),P=g.useCallback(()=>{if(!V.current||!j.current)return;const U={placement:e,strategy:r,middleware:m};L.current&&(U.platform=L.current),Q9(V.current,j.current,U).then(H=>{const ie={...H,isPositioned:D.current!==!1};B.current&&!Vm(T.current,ie)&&(T.current=ie,Ca.flushSync(()=>{f(ie)}))})},[m,e,r,L,D]);Of(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[u]);const B=g.useRef(!1);Of(()=>(B.current=!0,()=>{B.current=!1}),[]),Of(()=>{if(R&&(V.current=R),I&&(j.current=I),R&&I){if(k.current)return k.current(R,I,P);P()}},[R,I,P,k,S]);const z=g.useMemo(()=>({reference:V,floating:j,setReference:x,setFloating:E}),[x,E]),Y=g.useMemo(()=>({reference:R,floating:I}),[R,I]),ee=g.useMemo(()=>{const U={position:r,left:0,top:0};if(!Y.floating)return U;const H=kC(Y.floating,d.x),ie=kC(Y.floating,d.y);return l?{...U,transform:"translate("+H+"px, "+ie+"px)",...bI(Y.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:ie}},[r,l,Y.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:P,refs:z,elements:Y,floatingStyles:ee}),[d,P,z,Y,ee])}const K9=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?PC({element:n.current,padding:s}).fn(r):{}:n?PC({element:n,padding:s}).fn(r):{}}}},J9=(t,e)=>({...q9(t),options:[t,e]}),X9=(t,e)=>({...G9(t),options:[t,e]}),Z9=(t,e)=>({...W9(t),options:[t,e]}),eU=(t,e)=>({...$9(t),options:[t,e]}),tU=(t,e)=>({...z9(t),options:[t,e]}),rU=(t,e)=>({...H9(t),options:[t,e]}),nU=(t,e)=>({...K9(t),options:[t,e]});var sU="Arrow",EI=g.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return o.jsx($e.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});EI.displayName=sU;var iU=EI;function oU(t,e=[]){let r=[];function n(i,a){const l=g.createContext(a),c=r.length;r=[...r,a];function u(f){const{scope:m,children:p,...w}=f,y=(m==null?void 0:m[t][c])||l,b=g.useMemo(()=>w,Object.values(w));return o.jsx(y.Provider,{value:b,children:p})}function d(f,m){const p=(m==null?void 0:m[t][c])||l,w=g.useContext(p);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const s=()=>{const i=r.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,aU(s,...e)]}function aU(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}function lU(t){const[e,r]=g.useState(void 0);return Tr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;r({width:a,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Qw="Popper",[CI,Ec]=oU(Qw),[cU,NI]=CI(Qw),TI=t=>{const{__scopePopper:e,children:r}=t,[n,s]=g.useState(null);return o.jsx(cU,{scope:e,anchor:n,onAnchorChange:s,children:r})};TI.displayName=Qw;var _I="PopperAnchor",AI=g.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=NI(_I,r),a=g.useRef(null),l=ut(e,a);return g.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx($e.div,{...s,ref:l})});AI.displayName=_I;var Yw="PopperContent",[uU,dU]=CI(Yw),SI=g.forwardRef((t,e)=>{var Z,de,G,me,Ee,Ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:w,...y}=t,b=NI(Yw,r),[N,x]=g.useState(null),E=ut(e,pe=>x(pe)),[R,I]=g.useState(null),V=lU(R),j=(V==null?void 0:V.width)??0,T=(V==null?void 0:V.height)??0,S=n+(i!=="center"?"-"+i:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},L=Array.isArray(u)?u:[u],D=L.length>0,P={padding:k,boundary:L.filter(fU),altBoundary:D},{refs:B,floatingStyles:z,placement:Y,isPositioned:ee,middlewareData:U}=Y9({strategy:"fixed",placement:S,whileElementsMounted:(...pe)=>U9(...pe,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[J9({mainAxis:s+T,alignmentAxis:a}),c&&X9({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Z9():void 0,...P}),c&&eU({...P}),tU({...P,apply:({elements:pe,rects:ve,availableWidth:at,availableHeight:ht})=>{const{width:Ft,height:rt}=ve.reference,wt=pe.floating.style;wt.setProperty("--radix-popper-available-width",`${at}px`),wt.setProperty("--radix-popper-available-height",`${ht}px`),wt.setProperty("--radix-popper-anchor-width",`${Ft}px`),wt.setProperty("--radix-popper-anchor-height",`${rt}px`)}}),R&&nU({element:R,padding:l}),mU({arrowWidth:j,arrowHeight:T}),m&&rU({strategy:"referenceHidden",...P})]}),[H,ie]=jI(Y),ne=Nr(w);Tr(()=>{ee&&(ne==null||ne())},[ee,ne]);const le=(Z=U.arrow)==null?void 0:Z.x,he=(de=U.arrow)==null?void 0:de.y,_e=((G=U.arrow)==null?void 0:G.centerOffset)!==0,[Me,ue]=g.useState();return Tr(()=>{N&&ue(window.getComputedStyle(N).zIndex)},[N]),o.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:ee?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(me=U.transformOrigin)==null?void 0:me.x,(Ee=U.transformOrigin)==null?void 0:Ee.y].join(" "),...((Ce=U.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(uU,{scope:r,placedSide:H,onArrowChange:I,arrowX:le,arrowY:he,shouldHideArrow:_e,children:o.jsx($e.div,{"data-side":H,"data-align":ie,...y,ref:E,style:{...y.style,animation:ee?void 0:"none"}})})})});SI.displayName=Yw;var RI="PopperArrow",hU={top:"bottom",right:"left",bottom:"top",left:"right"},II=g.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=dU(RI,n),a=hU[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(iU,{...s,ref:r,style:{...s.style,display:"block"}})})});II.displayName=RI;function fU(t){return t!==null}var mU=t=>({name:"transformOrigin",options:t,fn(e){var b,N,x;const{placement:r,rects:n,middlewareData:s}=e,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,d]=jI(r),f={start:"0%",center:"50%",end:"100%"}[d],m=(((N=s.arrow)==null?void 0:N.x)??0)+l/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let w="",y="";return u==="bottom"?(w=a?f:`${m}px`,y=`${-c}px`):u==="top"?(w=a?f:`${m}px`,y=`${n.floating.height+c}px`):u==="right"?(w=`${-c}px`,y=a?f:`${p}px`):u==="left"&&(w=`${n.floating.width+c}px`,y=a?f:`${p}px`),{data:{x:w,y}}}});function jI(t){const[e,r="center"]=t.split("-");return[e,r]}var PI=TI,Kw=AI,Jw=SI,Xw=II,[zp,KW]=Cd("Tooltip",[Ec]),Zw=Ec(),kI="TooltipProvider",pU=700,MC="tooltip.open",[gU,MI]=zp(kI),DI=t=>{const{__scopeTooltip:e,delayDuration:r=pU,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,[a,l]=g.useState(!0),c=g.useRef(!1),u=g.useRef(0);return g.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),o.jsx(gU,{scope:e,isOpenDelayed:a,delayDuration:r,onOpen:g.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:g.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:g.useCallback(d=>{c.current=d},[]),disableHoverableContent:s,children:i})};DI.displayName=kI;var OI="Tooltip",[JW,Hp]=zp(OI),av="TooltipTrigger",yU=g.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Hp(av,r),i=MI(av,r),a=Zw(r),l=g.useRef(null),c=ut(e,l,s.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),f=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(Kw,{asChild:!0,...a,children:o.jsx($e.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:xe(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:xe(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:xe(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:xe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:xe(t.onBlur,s.onClose),onClick:xe(t.onClick,s.onClose)})})});yU.displayName=av;var vU="TooltipPortal",[XW,xU]=zp(vU,{forceMount:void 0}),nc="TooltipContent",LI=g.forwardRef((t,e)=>{const r=xU(nc,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,a=Hp(nc,t.__scopeTooltip);return o.jsx(Na,{present:n||a.open,children:a.disableHoverableContent?o.jsx(FI,{side:s,...i,ref:e}):o.jsx(wU,{side:s,...i,ref:e})})}),wU=g.forwardRef((t,e)=>{const r=Hp(nc,t.__scopeTooltip),n=MI(nc,t.__scopeTooltip),s=g.useRef(null),i=ut(e,s),[a,l]=g.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:f}=n,m=g.useCallback(()=>{l(null),f(!1)},[f]),p=g.useCallback((w,y)=>{const b=w.currentTarget,N={x:w.clientX,y:w.clientY},x=NU(N,b.getBoundingClientRect()),E=TU(N,x),R=_U(y.getBoundingClientRect()),I=SU([...E,...R]);l(I),f(!0)},[f]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(c&&d){const w=b=>p(b,d),y=b=>p(b,c);return c.addEventListener("pointerleave",w),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",y)}}},[c,d,p,m]),g.useEffect(()=>{if(a){const w=y=>{const b=y.target,N={x:y.clientX,y:y.clientY},x=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),E=!AU(N,a);x?m():E&&(m(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,d,a,u,m]),o.jsx(FI,{...t,ref:i})}),[bU,EU]=zp(OI,{isInside:!1}),FI=g.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=Hp(nc,r),u=Zw(r),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(MC,d),()=>document.removeEventListener(MC,d)),[d]),g.useEffect(()=>{if(c.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),o.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:o.jsxs(Jw,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(eA,{children:n}),o.jsx(bU,{scope:r,isInside:!0,children:o.jsx(t3,{id:c.contentId,role:"tooltip",children:s||n})})]})})});LI.displayName=nc;var VI="TooltipArrow",CU=g.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Zw(r);return EU(VI,r).isInside?null:o.jsx(Xw,{...s,...n,ref:e})});CU.displayName=VI;function NU(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function TU(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function _U(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function AU(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,d=e[a].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function SU(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),RU(e)}function RU(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],a=r[r.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var IU=DI,BI=LI;const jU=IU,PU=g.forwardRef(({className:t,sideOffset:e=4,...r},n)=>o.jsx(BI,{ref:n,sideOffset:e,className:ot("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));PU.displayName=BI.displayName;var Wp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qp=typeof window>"u"||"Deno"in globalThis;function Fn(){}function kU(t,e){return typeof t=="function"?t(e):t}function MU(t){return typeof t=="number"&&t>=0&&t!==1/0}function DU(t,e){return Math.max(t+(e||0)-Date.now(),0)}function DC(t,e){return typeof t=="function"?t(e):t}function OU(t,e){return typeof t=="function"?t(e):t}function OC(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(n){if(e.queryHash!==eb(a,e.options))return!1}else if(!ud(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function LC(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(cd(e.options.mutationKey)!==cd(i))return!1}else if(!ud(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function eb(t,e){return((e==null?void 0:e.queryKeyHashFn)||cd)(t)}function cd(t){return JSON.stringify(t,(e,r)=>lv(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function ud(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!ud(t[r],e[r])):!1}function UI(t,e){if(t===e)return t;const r=FC(t)&&FC(e);if(r||lv(t)&&lv(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),a=i.length,l=r?[]:{};let c=0;for(let u=0;u<a;u++){const d=r?u:i[u];(!r&&n.includes(d)||r)&&t[d]===void 0&&e[d]===void 0?(l[d]=void 0,c++):(l[d]=UI(t[d],e[d]),l[d]===t[d]&&t[d]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function FC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function lv(t){if(!VC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!VC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function VC(t){return Object.prototype.toString.call(t)==="[object Object]"}function LU(t){return new Promise(e=>{setTimeout(e,t)})}function FU(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?UI(t,e):e}function VU(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function BU(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var tb=Symbol();function qI(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===tb?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Yo,Mi,kl,IN,UU=(IN=class extends Wp{constructor(){super();nt(this,Yo);nt(this,Mi);nt(this,kl);Fe(this,kl,e=>{if(!Qp&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){oe(this,Mi)||this.setEventListener(oe(this,kl))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,Mi))==null||e.call(this),Fe(this,Mi,void 0))}setEventListener(e){var r;Fe(this,kl,e),(r=oe(this,Mi))==null||r.call(this),Fe(this,Mi,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){oe(this,Yo)!==e&&(Fe(this,Yo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof oe(this,Yo)=="boolean"?oe(this,Yo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Yo=new WeakMap,Mi=new WeakMap,kl=new WeakMap,IN),GI=new UU,Ml,Di,Dl,jN,qU=(jN=class extends Wp{constructor(){super();nt(this,Ml,!0);nt(this,Di);nt(this,Dl);Fe(this,Dl,e=>{if(!Qp&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){oe(this,Di)||this.setEventListener(oe(this,Dl))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,Di))==null||e.call(this),Fe(this,Di,void 0))}setEventListener(e){var r;Fe(this,Dl,e),(r=oe(this,Di))==null||r.call(this),Fe(this,Di,e(this.setOnline.bind(this)))}setOnline(e){oe(this,Ml)!==e&&(Fe(this,Ml,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return oe(this,Ml)}},Ml=new WeakMap,Di=new WeakMap,Dl=new WeakMap,jN),Bm=new qU;function GU(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function $U(t){return Math.min(1e3*2**t,3e4)}function $I(t){return(t??"online")==="online"?Bm.isOnline():!0}var zI=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function g0(t){return t instanceof zI}function HI(t){let e=!1,r=0,n=!1,s;const i=GU(),a=y=>{var b;n||(m(new zI(y)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>GI.isFocused()&&(t.networkMode==="always"||Bm.isOnline())&&t.canRun(),d=()=>$I(t.networkMode)&&t.canRun(),f=y=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,y),s==null||s(),i.resolve(y))},m=y=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,y),s==null||s(),i.reject(y))},p=()=>new Promise(y=>{var b;s=N=>{(n||u())&&y(N)},(b=t.onPause)==null||b.call(t)}).then(()=>{var y;s=void 0,n||(y=t.onContinue)==null||y.call(t)}),w=()=>{if(n)return;let y;const b=r===0?t.initialPromise:void 0;try{y=b??t.fn()}catch(N){y=Promise.reject(N)}Promise.resolve(y).then(f).catch(N=>{var V;if(n)return;const x=t.retry??(Qp?0:3),E=t.retryDelay??$U,R=typeof E=="function"?E(r,N):E,I=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,N);if(e||!I){m(N);return}r++,(V=t.onFail)==null||V.call(t,r,N),LU(R).then(()=>u()?void 0:p()).then(()=>{e?m(N):w()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?w():p().then(w),i)}}function zU(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{r(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Mr=zU(),Ko,PN,WI=(PN=class{constructor(){nt(this,Ko)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),MU(this.gcTime)&&Fe(this,Ko,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Qp?1/0:5*60*1e3))}clearGcTimeout(){oe(this,Ko)&&(clearTimeout(oe(this,Ko)),Fe(this,Ko,void 0))}},Ko=new WeakMap,PN),Ol,Ll,gn,xr,pd,Jo,Vn,Ls,kN,HU=(kN=class extends WI{constructor(e){super();nt(this,Vn);nt(this,Ol);nt(this,Ll);nt(this,gn);nt(this,xr);nt(this,pd);nt(this,Jo);Fe(this,Jo,!1),Fe(this,pd,e.defaultOptions),this.setOptions(e.options),this.observers=[],Fe(this,gn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Fe(this,Ol,QU(this.options)),this.state=e.state??oe(this,Ol),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=oe(this,xr))==null?void 0:e.promise}setOptions(e){this.options={...oe(this,pd),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,gn).remove(this)}setData(e,r){const n=FU(this.state.data,e,this.options);return pr(this,Vn,Ls).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){pr(this,Vn,Ls).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=oe(this,xr))==null?void 0:n.promise;return(s=oe(this,xr))==null||s.cancel(e),r?r.then(Fn).catch(Fn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,Ol))}isActive(){return this.observers.some(e=>OU(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===tb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!DU(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=oe(this,xr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=oe(this,xr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),oe(this,gn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(oe(this,xr)&&(oe(this,Jo)?oe(this,xr).cancel({revert:!0}):oe(this,xr).cancelRetry()),this.scheduleGc()),oe(this,gn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pr(this,Vn,Ls).call(this,{type:"invalidate"})}fetch(e,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,xr))return oe(this,xr).continueRetry(),oe(this,xr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Fe(this,Jo,!0),n.signal)})},i=()=>{const f=qI(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return s(m),Fe(this,Jo,!1),this.options.persister?this.options.persister(f,m,this):f(m)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),Fe(this,Ll,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&pr(this,Vn,Ls).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var m,p,w,y;g0(f)&&f.silent||pr(this,Vn,Ls).call(this,{type:"error",error:f}),g0(f)||((p=(m=oe(this,gn).config).onError)==null||p.call(m,f,this),(y=(w=oe(this,gn).config).onSettled)==null||y.call(w,this.state.data,f,this)),this.scheduleGc()};return Fe(this,xr,HI({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,p,w,y;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(b){l(b);return}(p=(m=oe(this,gn).config).onSuccess)==null||p.call(m,f,this),(y=(w=oe(this,gn).config).onSettled)==null||y.call(w,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{pr(this,Vn,Ls).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{pr(this,Vn,Ls).call(this,{type:"pause"})},onContinue:()=>{pr(this,Vn,Ls).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),oe(this,xr).start()}},Ol=new WeakMap,Ll=new WeakMap,gn=new WeakMap,xr=new WeakMap,pd=new WeakMap,Jo=new WeakMap,Vn=new WeakSet,Ls=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...WU(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return g0(s)&&s.revert&&oe(this,Ll)?{...oe(this,Ll),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Mr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),oe(this,gn).notify({query:this,type:"updated",action:e})})},kN);function WU(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$I(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function QU(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ss,MN,YU=(MN=class extends Wp{constructor(e={}){super();nt(this,ss);this.config=e,Fe(this,ss,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??eb(s,r);let a=this.get(i);return a||(a=new HU({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){oe(this,ss).has(e.queryHash)||(oe(this,ss).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=oe(this,ss).get(e.queryHash);r&&(e.destroy(),r===e&&oe(this,ss).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Mr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return oe(this,ss).get(e)}getAll(){return[...oe(this,ss).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>OC(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>OC(e,n)):r}notify(e){Mr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Mr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Mr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ss=new WeakMap,MN),is,Pr,Xo,os,Ci,DN,KU=(DN=class extends WI{constructor(e){super();nt(this,os);nt(this,is);nt(this,Pr);nt(this,Xo);this.mutationId=e.mutationId,Fe(this,Pr,e.mutationCache),Fe(this,is,[]),this.state=e.state||JU(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){oe(this,is).includes(e)||(oe(this,is).push(e),this.clearGcTimeout(),oe(this,Pr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Fe(this,is,oe(this,is).filter(r=>r!==e)),this.scheduleGc(),oe(this,Pr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){oe(this,is).length||(this.state.status==="pending"?this.scheduleGc():oe(this,Pr).remove(this))}continue(){var e;return((e=oe(this,Xo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,a,l,c,u,d,f,m,p,w,y,b,N,x,E,R,I,V,j;Fe(this,Xo,HI({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,S)=>{pr(this,os,Ci).call(this,{type:"failed",failureCount:T,error:S})},onPause:()=>{pr(this,os,Ci).call(this,{type:"pause"})},onContinue:()=>{pr(this,os,Ci).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,Pr).canRun(this)}));const r=this.state.status==="pending",n=!oe(this,Xo).canStart();try{if(!r){pr(this,os,Ci).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(s=oe(this,Pr).config).onMutate)==null?void 0:i.call(s,e,this));const S=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));S!==this.state.context&&pr(this,os,Ci).call(this,{type:"pending",context:S,variables:e,isPaused:n})}const T=await oe(this,Xo).start();return await((u=(c=oe(this,Pr).config).onSuccess)==null?void 0:u.call(c,T,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,T,e,this.state.context)),await((p=(m=oe(this,Pr).config).onSettled)==null?void 0:p.call(m,T,null,this.state.variables,this.state.context,this)),await((y=(w=this.options).onSettled)==null?void 0:y.call(w,T,null,e,this.state.context)),pr(this,os,Ci).call(this,{type:"success",data:T}),T}catch(T){try{throw await((N=(b=oe(this,Pr).config).onError)==null?void 0:N.call(b,T,e,this.state.context,this)),await((E=(x=this.options).onError)==null?void 0:E.call(x,T,e,this.state.context)),await((I=(R=oe(this,Pr).config).onSettled)==null?void 0:I.call(R,void 0,T,this.state.variables,this.state.context,this)),await((j=(V=this.options).onSettled)==null?void 0:j.call(V,void 0,T,e,this.state.context)),T}finally{pr(this,os,Ci).call(this,{type:"error",error:T})}}finally{oe(this,Pr).runNext(this)}}},is=new WeakMap,Pr=new WeakMap,Xo=new WeakMap,os=new WeakSet,Ci=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Mr.batch(()=>{oe(this,is).forEach(n=>{n.onMutationUpdate(e)}),oe(this,Pr).notify({mutation:this,type:"updated",action:e})})},DN);function JU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zr,gd,ON,XU=(ON=class extends Wp{constructor(e={}){super();nt(this,Zr);nt(this,gd);this.config=e,Fe(this,Zr,new Map),Fe(this,gd,Date.now())}build(e,r,n){const s=new KU({mutationCache:this,mutationId:++Sh(this,gd)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){const r=sf(e),n=oe(this,Zr).get(r)??[];n.push(e),oe(this,Zr).set(r,n),this.notify({type:"added",mutation:e})}remove(e){var n;const r=sf(e);if(oe(this,Zr).has(r)){const s=(n=oe(this,Zr).get(r))==null?void 0:n.filter(i=>i!==e);s&&(s.length===0?oe(this,Zr).delete(r):oe(this,Zr).set(r,s))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const r=(n=oe(this,Zr).get(sf(e)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===e}runNext(e){var n;const r=(n=oe(this,Zr).get(sf(e)))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Mr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...oe(this,Zr).values()].flat()}find(e){const r={exact:!0,...e};return this.getAll().find(n=>LC(r,n))}findAll(e={}){return this.getAll().filter(r=>LC(e,r))}notify(e){Mr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Mr.batch(()=>Promise.all(e.map(r=>r.continue().catch(Fn))))}},Zr=new WeakMap,gd=new WeakMap,ON);function sf(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function BC(t){return{onFetch:(e,r)=>{var d,f,m,p,w;const n=e.options,s=(m=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],a=((w=e.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const b=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},N=qI(e.options,e.fetchOptions),x=async(E,R,I)=>{if(y)return Promise.reject();if(R==null&&E.pages.length)return Promise.resolve(E);const V={queryKey:e.queryKey,pageParam:R,direction:I?"backward":"forward",meta:e.options.meta};b(V);const j=await N(V),{maxPages:T}=e.options,S=I?BU:VU;return{pages:S(E.pages,j,T),pageParams:S(E.pageParams,R,T)}};if(s&&i.length){const E=s==="backward",R=E?ZU:UC,I={pages:i,pageParams:a},V=R(n,I);l=await x(I,V,E)}else{const E=t??i.length;do{const R=c===0?a[0]??n.initialPageParam:UC(n,l);if(c>0&&R==null)break;l=await x(l,R),c++}while(c<E)}return l};e.options.persister?e.fetchFn=()=>{var y,b;return(b=(y=e.options).persister)==null?void 0:b.call(y,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function UC(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function ZU(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Pt,Oi,Li,Fl,Vl,Fi,Bl,Ul,LN,e7=(LN=class{constructor(t={}){nt(this,Pt);nt(this,Oi);nt(this,Li);nt(this,Fl);nt(this,Vl);nt(this,Fi);nt(this,Bl);nt(this,Ul);Fe(this,Pt,t.queryCache||new YU),Fe(this,Oi,t.mutationCache||new XU),Fe(this,Li,t.defaultOptions||{}),Fe(this,Fl,new Map),Fe(this,Vl,new Map),Fe(this,Fi,0)}mount(){Sh(this,Fi)._++,oe(this,Fi)===1&&(Fe(this,Bl,GI.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,Pt).onFocus())})),Fe(this,Ul,Bm.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,Pt).onOnline())})))}unmount(){var t,e;Sh(this,Fi)._--,oe(this,Fi)===0&&((t=oe(this,Bl))==null||t.call(this),Fe(this,Bl,void 0),(e=oe(this,Ul))==null||e.call(this),Fe(this,Ul,void 0))}isFetching(t){return oe(this,Pt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return oe(this,Oi).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=oe(this,Pt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=oe(this,Pt).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(DC(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return oe(this,Pt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=oe(this,Pt).get(n.queryHash),i=s==null?void 0:s.state.data,a=kU(e,i);if(a!==void 0)return oe(this,Pt).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return Mr.batch(()=>oe(this,Pt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=oe(this,Pt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=oe(this,Pt);Mr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=oe(this,Pt),n={type:"active",...t};return Mr.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Mr.batch(()=>oe(this,Pt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Fn).catch(Fn)}invalidateQueries(t={},e={}){return Mr.batch(()=>{if(oe(this,Pt).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Mr.batch(()=>oe(this,Pt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Fn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Fn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=oe(this,Pt).build(this,e);return r.isStaleByTime(DC(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Fn).catch(Fn)}fetchInfiniteQuery(t){return t.behavior=BC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Fn).catch(Fn)}ensureInfiniteQueryData(t){return t.behavior=BC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Bm.isOnline()?oe(this,Oi).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,Pt)}getMutationCache(){return oe(this,Oi)}getDefaultOptions(){return oe(this,Li)}setDefaultOptions(t){Fe(this,Li,t)}setQueryDefaults(t,e){oe(this,Fl).set(cd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...oe(this,Fl).values()];let r={};return e.forEach(n=>{ud(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){oe(this,Vl).set(cd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...oe(this,Vl).values()];let r={};return e.forEach(n=>{ud(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...oe(this,Li).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=eb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===tb&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...oe(this,Li).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){oe(this,Pt).clear(),oe(this,Oi).clear()}},Pt=new WeakMap,Oi=new WeakMap,Li=new WeakMap,Fl=new WeakMap,Vl=new WeakMap,Fi=new WeakMap,Bl=new WeakMap,Ul=new WeakMap,LN),t7=g.createContext(void 0),r7=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(t7.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dd.apply(this,arguments)}var qi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qi||(qi={}));const qC="popstate";function n7(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:l}=n.location;return cv("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Um(s)}return i7(e,r,null,t)}function Lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s7(){return Math.random().toString(36).substr(2,8)}function GC(t,e){return{usr:t.state,key:t.key,idx:e}}function cv(t,e,r,n){return r===void 0&&(r=null),dd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Cc(e):e,{state:r,key:e&&e.key||n||s7()})}function Um(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Cc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function i7(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=qi.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(dd({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=qi.Pop;let b=d(),N=b==null?null:b-u;u=b,c&&c({action:l,location:y.location,delta:N})}function m(b,N){l=qi.Push;let x=cv(y.location,b,N);u=d()+1;let E=GC(x,u),R=y.createHref(x);try{a.pushState(E,"",R)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(R)}i&&c&&c({action:l,location:y.location,delta:1})}function p(b,N){l=qi.Replace;let x=cv(y.location,b,N);u=d();let E=GC(x,u),R=y.createHref(x);a.replaceState(E,"",R),i&&c&&c({action:l,location:y.location,delta:0})}function w(b){let N=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof b=="string"?b:Um(b);return x=x.replace(/ $/,"%20"),Lt(N,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,N)}let y={get action(){return l},get location(){return t(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(qC,f),c=b,()=>{s.removeEventListener(qC,f),c=null}},createHref(b){return e(s,b)},createURL:w,encodeLocation(b){let N=w(b);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:m,replace:p,go(b){return a.go(b)}};return y}var $C;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($C||($C={}));function o7(t,e,r){return r===void 0&&(r="/"),a7(t,e,r,!1)}function a7(t,e,r,n){let s=typeof e=="string"?Cc(e):e,i=rb(s.pathname||"/",r);if(i==null)return null;let a=YI(t);l7(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=x7(i);l=y7(a[c],u,n)}return l}function YI(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Lt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ro([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Lt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),YI(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:p7(u,i.index),routesMeta:d})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of KI(i.path))s(i,a,c)}),e}function KI(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=KI(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function l7(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:g7(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const c7=/^:[\w-]+$/,u7=3,d7=2,h7=1,f7=10,m7=-2,zC=t=>t==="*";function p7(t,e){let r=t.split("/"),n=r.length;return r.some(zC)&&(n+=m7),e&&(n+=d7),r.filter(s=>!zC(s)).reduce((s,i)=>s+(c7.test(i)?u7:i===""?h7:f7),n)}function g7(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function y7(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=HC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=HC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:ro([i,f.pathname]),pathnameBase:C7(ro([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=ro([i,f.pathnameBase]))}return a}function HC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=v7(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let y=l[f]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const w=l[f];return p&&!w?u[m]=void 0:u[m]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function v7(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),QI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function x7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return QI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function w7(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Cc(t):t;return{pathname:r?r.startsWith("/")?r:b7(r,e):e,search:N7(n),hash:T7(s)}}function b7(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function y0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function E7(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function nb(t,e){let r=E7(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function sb(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Cc(t):(s=dd({},t),Lt(!s.pathname||!s.pathname.includes("?"),y0("?","pathname","search",s)),Lt(!s.pathname||!s.pathname.includes("#"),y0("#","pathname","hash",s)),Lt(!s.search||!s.search.includes("#"),y0("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=w7(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ro=t=>t.join("/").replace(/\/\/+/g,"/"),C7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),N7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JI=["post","put","patch","delete"];new Set(JI);const A7=["get",...JI];new Set(A7);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hd(){return hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hd.apply(this,arguments)}const ib=g.createContext(null),S7=g.createContext(null),_o=g.createContext(null),Yp=g.createContext(null),Ao=g.createContext({outlet:null,matches:[],isDataRoute:!1}),XI=g.createContext(null);function R7(t,e){let{relative:r}=e===void 0?{}:e;Nc()||Lt(!1);let{basename:n,navigator:s}=g.useContext(_o),{hash:i,pathname:a,search:l}=e2(t,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:ro([n,a])),s.createHref({pathname:c,search:l,hash:i})}function Nc(){return g.useContext(Yp)!=null}function ai(){return Nc()||Lt(!1),g.useContext(Yp).location}function ZI(t){g.useContext(_o).static||g.useLayoutEffect(t)}function Xn(){let{isDataRoute:t}=g.useContext(Ao);return t?q7():I7()}function I7(){Nc()||Lt(!1);let t=g.useContext(ib),{basename:e,future:r,navigator:n}=g.useContext(_o),{matches:s}=g.useContext(Ao),{pathname:i}=ai(),a=JSON.stringify(nb(s,r.v7_relativeSplatPath)),l=g.useRef(!1);return ZI(()=>{l.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=sb(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ro([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,a,i,t])}function e2(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=g.useContext(_o),{matches:s}=g.useContext(Ao),{pathname:i}=ai(),a=JSON.stringify(nb(s,n.v7_relativeSplatPath));return g.useMemo(()=>sb(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function j7(t,e){return P7(t,e)}function P7(t,e,r,n){Nc()||Lt(!1);let{navigator:s}=g.useContext(_o),{matches:i}=g.useContext(Ao),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=ai(),d;if(e){var f;let b=typeof e=="string"?Cc(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Lt(!1),d=b}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=o7(t,{pathname:p}),y=L7(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:ro([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:ro([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return e&&y?g.createElement(Yp.Provider,{value:{location:hd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:qi.Pop}},y):y}function k7(){let t=U7(),e=_7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),r?g.createElement("pre",{style:s},r):null,null)}const M7=g.createElement(k7,null);class D7 extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?g.createElement(Ao.Provider,{value:this.props.routeContext},g.createElement(XI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function O7(t){let{routeContext:e,match:r,children:n}=t,s=g.useContext(ib);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Ao.Provider,{value:e},n)}function L7(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Lt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:p}=r,w=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,m)=>{let p,w=!1,y=null,b=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||M7,c&&(u<0&&m===0?(w=!0,b=null):u===m&&(w=!0,b=f.route.hydrateFallbackElement||null)));let N=e.concat(a.slice(0,m+1)),x=()=>{let E;return p?E=y:w?E=b:f.route.Component?E=g.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=d,g.createElement(O7,{match:f,routeContext:{outlet:d,matches:N,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?g.createElement(D7,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):x()},null)}var t2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(t2||{}),qm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qm||{});function F7(t){let e=g.useContext(ib);return e||Lt(!1),e}function V7(t){let e=g.useContext(S7);return e||Lt(!1),e}function B7(t){let e=g.useContext(Ao);return e||Lt(!1),e}function r2(t){let e=B7(),r=e.matches[e.matches.length-1];return r.route.id||Lt(!1),r.route.id}function U7(){var t;let e=g.useContext(XI),r=V7(qm.UseRouteError),n=r2(qm.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function q7(){let{router:t}=F7(t2.UseNavigateStable),e=r2(qm.UseNavigateStable),r=g.useRef(!1);return ZI(()=>{r.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,hd({fromRouteId:e},i)))},[t,e])}function Gm(t){let{to:e,replace:r,state:n,relative:s}=t;Nc()||Lt(!1);let{future:i,static:a}=g.useContext(_o),{matches:l}=g.useContext(Ao),{pathname:c}=ai(),u=Xn(),d=sb(e,nb(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function ts(t){Lt(!1)}function G7(t){let{basename:e="/",children:r=null,location:n,navigationType:s=qi.Pop,navigator:i,static:a=!1,future:l}=t;Nc()&&Lt(!1);let c=e.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:i,static:a,future:hd({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=Cc(n));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:w="default"}=n,y=g.useMemo(()=>{let b=rb(d,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:p,key:w},navigationType:s}},[c,d,f,m,p,w,s]);return y==null?null:g.createElement(_o.Provider,{value:u},g.createElement(Yp.Provider,{children:r,value:y}))}function $7(t){let{children:e,location:r}=t;return j7(uv(e),r)}new Promise(()=>{});function uv(t,e){e===void 0&&(e=[]);let r=[];return g.Children.forEach(t,(n,s)=>{if(!g.isValidElement(n))return;let i=[...e,s];if(n.type===g.Fragment){r.push.apply(r,uv(n.props.children,i));return}n.type!==ts&&Lt(!1),!n.props.index||!n.props.children||Lt(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=uv(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dv(){return dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dv.apply(this,arguments)}function z7(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function H7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function W7(t,e){return t.button===0&&(!e||e==="_self")&&!H7(t)}const Q7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Y7="6";try{window.__reactRouterVersion=Y7}catch{}const K7="startTransition",WC=YN[K7];function J7(t){let{basename:e,children:r,future:n,window:s}=t,i=g.useRef();i.current==null&&(i.current=n7({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=g.useCallback(f=>{u&&WC?WC(()=>c(f)):c(f)},[c,u]);return g.useLayoutEffect(()=>a.listen(d),[a,d]),g.createElement(G7,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const X7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,si=g.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,m=z7(e,Q7),{basename:p}=g.useContext(_o),w,y=!1;if(typeof u=="string"&&Z7.test(u)&&(w=u,X7))try{let E=new URL(window.location.href),R=u.startsWith("//")?new URL(E.protocol+u):new URL(u),I=rb(R.pathname,p);R.origin===E.origin&&I!=null?u=I+R.search+R.hash:y=!0}catch{}let b=R7(u,{relative:s}),N=eq(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function x(E){n&&n(E),E.defaultPrevented||N(E)}return g.createElement("a",dv({},m,{href:w||b,onClick:y||i?n:x,ref:r,target:c}))});var QC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(QC||(QC={}));var YC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(YC||(YC={}));function eq(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=Xn(),u=ai(),d=e2(t,{relative:a});return g.useCallback(f=>{if(W7(f,r)){f.preventDefault();let m=n!==void 0?n:Um(u)===Um(d);c(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,n,s,r,t,i,a,l])}const n2=()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,tq=async(t,e)=>{try{console.log("loginUser: Starting login process for email:",t);const r=await cB(na,t,e);console.log("loginUser: Firebase Auth successful for UID:",r.user.uid);const n=await mo($t(ft,"users",r.user.uid));if(console.log("loginUser: User document exists:",n.exists()),n.exists()){const s=n.data();console.log("loginUser: User data retrieved, current session status:",s.isSessionValid);const i=n2(),a=Ve.now();console.log("loginUser: Updating user document with new session"),await Sa($t(ft,"users",r.user.uid),{sessionToken:i,lastLoginAt:a,isSessionValid:!0}),console.log("loginUser: User document updated with new session");const l={...s,sessionToken:i,lastLoginAt:a,isSessionValid:!0};return console.log("loginUser: Returning updated user data with session:",l.isSessionValid),l}return console.log("loginUser: User document not found, returning null"),null}catch(r){throw console.error("loginUser error:",r),r}},rq=async(t,e,r,n,s)=>{try{const i=await lB(na,e,r),a=n2(),l=Ve.now(),c={id:i.user.uid,name:t,email:e,mobileNumber:n,purchases:0,isRewardReady:!1,createdAt:l,rewards:[],role:"customer",currentOfferId:"default_offer",currentOfferProgress:0,sessionToken:a,lastLoginAt:l,isSessionValid:!0};try{await Lp($t(ft,"users",i.user.uid),c),(await mo($t(ft,"users",i.user.uid))).exists()?console.log("✅ User document verified in Firestore"):console.error("❌ User document not found after creation!")}catch(u){throw console.error("Firestore error during user creation:",u),u}return c}catch(i){throw console.error("registerUser error:",i),i}},nq=async()=>{try{const t=na.currentUser;t&&await Sa($t(ft,"users",t.uid),{isSessionValid:!1,sessionToken:null}),await mC(na)}catch(t){console.error("Logout error:",t),await mC(na)}},sq=t=>fB(na,t),iq=(t,e)=>{const r=Aa(ft,"users"),n=Md(r,jw("createdAt","desc"));return Fp(n,s=>{const i=[];s.forEach(a=>{const l=a.data();i.push({...l,id:a.id})}),t(i)},e)},oq=(t,e,r)=>{const n=$t(ft,"users",t);return Fp(n,s=>{s.exists()?e(s.data()):e(null)},r)},aq=async(t,e,r)=>{if(!t||t.role!=="super_admin")throw new Error("Only super admins can update user roles");const n=$t(ft,"users",e);await Sa(n,{role:r})},lq=async(t,e,r,n)=>{var V,j;const s=e&&r;if(!t&&!s)return;const i=s?$t(ft,"users",r):$t(ft,"users",t.id),a=await mo(i);if(!a.exists())throw new Error("User not found");const l=a.data(),c=n||l.currentOfferId;if(!c)throw new Error("No offer specified and user has no active offer assigned");const u=$t(ft,"offers",c),d=await mo(u);if(!d.exists())throw new Error("Specified offer not found");const f=d.data(),m=f.stampRequirement,p=(V=l.completedRewards)==null?void 0:V.find(T=>{var S,k,L;return((S=T.offerSnapshot)==null?void 0:S.offerId)===c&&((k=T.scanHistory)==null?void 0:k.length)<((L=T.offerSnapshot)==null?void 0:L.stampRequirement)&&!T.claimedAt});let w=0,y=p;if(p){if(w=((j=p.scanHistory)==null?void 0:j.length)||0,w>=m)throw new Error("User has already completed this offer");console.log(`User continuing existing offer: ${c}, current progress: ${w}/${m}`)}else{if(!f.isActive)throw new Error("This offer is no longer active for new users. Only users who have already started collecting stamps can continue.");y={rewardId:`reward_${Date.now()}`,claimedAt:null,scanHistory:[],rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription,offerSnapshot:{offerId:f.offerId,offerName:f.name,description:f.description,stampRequirement:f.stampRequirement,rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription},createdAt:Ve.now()}}const b=w+(f.stampsPerScan||1),N=f.stampsPerScan||1,x=[];for(let T=0;T<N;T++)x.push({scannedBy:(t==null?void 0:t.email)||"unknown",timestamp:Ve.now(),stampsEarned:1});const E={...y,scanHistory:[...y.scanHistory||[],...x]};let R=l.completedRewards||[];p?R=R.map(T=>T.rewardId===p.rewardId?E:T):R=[...R,E];const I=f.stampsPerScan||1;console.log(`Adding ${I} stamps for offer ${c}. Progress: ${w} -> ${b}/${m}`),console.log(`Created ${x.length} scan events for ${I} stamps`),await Sa(i,{lastScanAt:Ve.now(),completedRewards:R,purchases:cV(I)})},cq=async(t,e,r,n)=>{const s=e&&r;if(!t&&!s)return;const i=s?$t(ft,"users",r):$t(ft,"users",t.id),a=await mo(i);if(!a.exists())throw new Error("User not found");const c=a.data().completedRewards||[],u=c.find(f=>f.rewardId===n);if(!u)throw new Error("Reward not found");if(u.claimedAt)throw new Error("Reward has already been redeemed");const d=c.map(f=>f.rewardId===n?{...f,claimedAt:Ve.now()}:f);await Sa(i,{completedRewards:d})},uq=(t,e)=>{const r=$t(ft,"settings","global");return Fp(r,n=>{if(n.exists())t(n.data());else{const s={purchaseLimit:5,descriptionMessage:"Complete purchases to unlock your reward!",rewardType:"percentage",rewardValue:"20",rewardDescription:"20% OFF",updatedAt:Ve.now(),updatedBy:"system"};Lp(r,s),t(s)}},e)},dq=async(t,e,r,n,s,i)=>{if(!t||t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can update settings");const a=$t(ft,"settings","global");await Sa(a,{purchaseLimit:e,descriptionMessage:r,rewardType:n,rewardValue:s,rewardDescription:i,updatedAt:Ve.now(),updatedBy:t.email})},hq=5,fq="Welcome Offer",mq="Complete purchases to unlock your reward!",pq=5,gq="percentage",yq="20",vq="20% OFF",xq=async t=>{Aa(ft,"offers");const e={offerId:"default_offer",name:fq,description:mq,stampRequirement:pq,stampsPerScan:1,rewardType:gq,rewardValue:yq,rewardDescription:vq,isActive:!0,createdAt:Ve.now(),updatedAt:Ve.now(),createdBy:t.email||"system",expiresAt:null};await Lp($t(ft,"offers","default_offer"),e)},s2=async()=>{const t=Aa(ft,"offers"),e=await Op(t);return e.empty?[]:e.docs.map(r=>r.data())},i2=async(t,e)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can create offers");if(!e.name||!e.description||!e.rewardValue||!e.rewardDescription)throw new Error("Missing required fields");if(e.stampRequirement<1||e.stampsPerScan<1)throw new Error("Stamp requirements must be at least 1");const r=`offer_${Date.now()}`,n={...e,offerId:r,createdAt:Ve.now(),updatedAt:Ve.now(),createdBy:t.email||"system",stampsPerScan:e.stampsPerScan||1,expiresAt:e.expiresAt||null};await Lp($t(ft,"offers",r),n)},KC=async(t,e,r)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can update offers");const n=$t(ft,"offers",e);if(!(await mo(n)).exists())throw new Error("Offer not found");await Sa(n,{...r,updatedAt:Ve.now()})},wq=async(t,e)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can delete offers");const r=Aa(ft,"users"),n=Md(r,Jy("completedRewards","array-contains",{"offerSnapshot.offerId":e})),s=await Op(n);let i=!1;if(s.forEach(a=>{var u;((u=a.data().completedRewards)==null?void 0:u.find(d=>{var f,m,p;return((f=d.offerSnapshot)==null?void 0:f.offerId)===e&&((m=d.scanHistory)==null?void 0:m.length)<((p=d.offerSnapshot)==null?void 0:p.stampRequirement)&&!d.claimedAt}))&&(i=!0)}),i)throw new Error("Cannot delete offer - users are actively collecting stamps. Deactivate the offer instead to hide it from new users while allowing existing users to complete their rewards.");await TR($t(ft,"offers",e))};function So(t,e){return async(...r)=>{try{return await t(...r)}catch(n){throw console.error(`${e} error:`,n),n}}}const bq=So(tq,"loginUser"),Eq=So(rq,"registerUser"),JC=So(nq,"logoutUser"),Cq=sq,Nq=iq,Tq=oq,_q=So(aq,"updateUserRole"),Aq=So(lq,"addPurchase"),Sq=So(cq,"redeemReward"),Rq=uq,Su=s2,Iq=So(i2,"createOffer"),XC=So(xq,"createDefaultOffer"),o2=g.createContext(null),jq=({children:t})=>{const[e,r]=g.useState(null),[n,s]=g.useState(!0),[i,a]=g.useState(null),[l,c]=g.useState(!0),[u,d]=g.useState([]),[f,m]=g.useState(!1);g.useEffect(()=>{const x=Rq(E=>{a(E),c(!1)},E=>{console.error("Error listening to settings:",E),c(!1)});return()=>x()},[]),g.useEffect(()=>{if(!e||e.role!=="admin"&&e.role!=="super_admin"){d([]);return}m(!0);const x=Nq(E=>{d(E),m(!1)},E=>{console.error("Error listening to all users:",E),m(!1)});return()=>x()},[e==null?void 0:e.role]),g.useEffect(()=>{let x=null,E=!1;const R=Cq(async V=>{E||(E=!0),V&&typeof V=="object"&&V!==null&&"uid"in V?(console.log("Firebase Auth user detected, setting up real-time listener for:",V.uid),setTimeout(()=>{x=Tq(V.uid,j=>{console.log("Real-time user data received:",{uid:j.id,isSessionValid:j.isSessionValid,hasSessionToken:!!j.sessionToken}),j.isSessionValid===!1?(console.log("Session explicitly invalidated, signing out user"),r(null),s(!1),JC()):(console.log("Accepting user data during login, session status:",j.isSessionValid),r(j),s(!1))},j=>{console.error("Error listening to user data:",j),r(null),s(!1)})},500)):(r(null),s(!1),x&&(x(),x=null))}),I=setTimeout(()=>{E||s(!1)},1e4);return()=>{R&&R(),x&&x(),clearTimeout(I)}},[]);const p=async(x,E)=>{console.log("Login attempt started for:",x);try{const R=await bq(x,E);return console.log("Login successful, user data received:",!!R),R}catch(R){throw console.error("Login failed:",R),R}},w=(x,E,R,I)=>Eq(x,E,R,I,null),y=(x,E,R)=>Aq(null,x,E,R),b=(x,E)=>_q(e,x,E),N=async()=>{console.log("Logout called from useAuth hook"),await JC(),r(null)};return o.jsx(o2.Provider,{value:{user:e,loading:n,settings:i,settingsLoading:l,allUsers:u,allUsersLoading:f,login:p,register:w,addPurchase:y,logout:N,updateUserRole:b},children:t})},Es=()=>{const t=g.useContext(o2);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Kc=({children:t,requiredRole:e})=>{const{user:r,loading:n}=Es(),s=ai();if(n)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Fx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!r)return o.jsx(Gm,{to:"/login",state:{from:s},replace:!0});if(e){const i=r.role,a={customer:1,admin:2,super_admin:3};if(a[i]<a[e])return o.jsx(Gm,{to:"/dashboard",replace:!0})}return o.jsx(o.Fragment,{children:t})},ZC=({children:t})=>{const{user:e,loading:r}=Es();return r?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Fx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):e?o.jsx(Gm,{to:"/dashboard",replace:!0}):o.jsx(o.Fragment,{children:t})},Pq=Mx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Te=g.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const a=n?ua:"button";return o.jsx(a,{className:ot(Pq({variant:e,size:r,className:t})),ref:i,...s})});Te.displayName="Button";const kq=()=>{const[t,e]=g.useState(!1),[r,n]=g.useState(!1),s=()=>{const i=window.matchMedia("(display-mode: standalone)").matches,a=window.matchMedia("(display-mode: fullscreen)").matches,l=window.matchMedia("(display-mode: minimal-ui)").matches,c=navigator.standalone===!0;return i||a||l||c};return g.useEffect(()=>{s()&&n(!0);const a=window.matchMedia("(display-mode: standalone)"),l=c=>{c.matches&&n(!0)};return a.addEventListener("change",l),()=>{a.removeEventListener("change",l)}},[]),r?null:o.jsxs("div",{className:"fixed top-4 right-4 z-40",children:[o.jsxs(Te,{onClick:()=>e(!t),size:"sm",variant:"outline",className:"bg-white/90 backdrop-blur-sm border-gray-200 hover:bg-white",children:[o.jsx(AA,{className:"w-4 h-4 mr-2"}),"Install Guide"]}),t&&o.jsxs("div",{className:"absolute top-12 right-0 w-80 bg-white rounded-lg shadow-lg border border-gray-200 p-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"How to Install"}),o.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Chrome/Edge (Desktop):"}),o.jsx("p",{children:'Look for the install icon (plus sign) in your browser address bar, or use the menu (three dots) and select "Install app"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Chrome/Edge (Mobile):"}),o.jsx("p",{children:'Tap the menu (three dots) and select "Add to Home screen" or "Install app"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Safari (Mobile):"}),o.jsx("p",{children:'Tap the Share button (square with arrow) and select "Add to Home Screen"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Safari (Desktop):"}),o.jsx("p",{children:'Use the Share button in the toolbar and select "Add to Dock"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Firefox:"}),o.jsx("p",{children:'Use the menu (three lines) and select "Install App" or "Add to Home Screen"'})]})]}),o.jsx(Te,{onClick:()=>e(!1),size:"sm",className:"mt-3 w-full",children:"Got it!"})]})]})},Mq=()=>{const[t,e]=g.useState(!1),r=()=>{const n=window.matchMedia("(display-mode: standalone)").matches,s=window.matchMedia("(display-mode: fullscreen)").matches,i=window.matchMedia("(display-mode: minimal-ui)").matches,a=navigator.standalone===!0;return n||s||i||a};return g.useEffect(()=>{r()&&e(!0);const s=window.matchMedia("(display-mode: standalone)"),i=a=>{a.matches&&e(!0)};return s.addEventListener("change",i),()=>{s.removeEventListener("change",i)}},[]),o.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/bgCover.jpeg)"}}),o.jsx("div",{className:"absolute inset-0 bg-black/60"}),o.jsxs("div",{className:"absolute inset-0 opacity-20",children:[o.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-red-700 rounded-full blur-3xl animate-pulse delay-500"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6 text-center",children:[o.jsx("div",{children:o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("img",{src:"/logo.png",alt:"Vape Master Logo",className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-48 lg:h-48 object-contain"})})}),o.jsxs("div",{className:"mb-12 max-w-md",children:[o.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-semibold text-white mb-4",children:"Loyalty Program"}),o.jsx("p",{className:"text-gray-300 text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed",children:"Join our loyalty program and get rewards! Earn points with every purchase and unlock exclusive benefits."})]}),o.jsxs("div",{className:"space-y-4 w-full max-w-sm",children:[o.jsx(si,{to:"/register",className:"block",children:o.jsx(Te,{className:"w-full py-4 text-lg font-semibold bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"Join Now"})}),o.jsx(si,{to:"/login",className:"block",children:o.jsx(Te,{variant:"outline",className:"w-full py-4 text-lg font-semibold bg-transparent border-2 border-red-500 text-red-400 hover:bg-red-500 hover:text-white transition-all duration-300 transform hover:scale-105",children:"Already a Member?"})})]}),!t&&o.jsx("div",{className:"mt-8",children:o.jsx(kq,{})}),o.jsx("div",{className:"absolute bottom-6 text-center text-gray-500",children:o.jsx("p",{className:"text-sm",children:"Smoke responsibly • 21+ only"})})]})]})},Dq=()=>{const{user:t,loading:e}=Es();return e?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Fx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):t?o.jsx(Gm,{to:"/dashboard",replace:!0}):o.jsx(Mq,{})},Se=g.forwardRef(({className:t,type:e,...r},n)=>o.jsx("input",{type:e,className:ot("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Se.displayName="Input";var Oq="Label",a2=g.forwardRef((t,e)=>o.jsx($e.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));a2.displayName=Oq;var l2=a2;const Lq=Mx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ne=g.forwardRef(({className:t,...e},r)=>o.jsx(l2,{ref:r,className:ot(Lq(),t),...e}));Ne.displayName=l2.displayName;function Nt(t,e){const r=window;typeof window<"u"&&typeof r.gtag=="function"&&r.gtag("event",t,e||{})}const sc=new Map,nr={MAX_REGISTRATIONS_PER_IP:3,MAX_REGISTRATIONS_PER_EMAIL:1,RATE_LIMIT_WINDOW:60*60*1e3,MIN_REQUEST_INTERVAL:3e3,MAX_REQUESTS_PER_MINUTE:5,MIN_PASSWORD_LENGTH:8,REQUIRE_UPPERCASE:!0,REQUIRE_LOWERCASE:!0,REQUIRE_NUMBERS:!0,REQUIRE_SPECIAL_CHARS:!0,BLOCKED_EMAIL_DOMAINS:["tempmail.org","10minutemail.com","guerrillamail.com","mailinator.com","yopmail.com","throwaway.email","fakeinbox.com","sharklasers.com","grr.la","temp-mail.org","dispostable.com","mailnesia.com","maildrop.cc"],MIN_PHONE_LENGTH:10,MAX_PHONE_LENGTH:15,MIN_NAME_LENGTH:2,MAX_NAME_LENGTH:50,SUSPICIOUS_PATTERNS:[/test\d+/i,/user\d+/i,/admin\d+/i,/demo\d+/i,/fake\d+/i,/spam\d+/i,/bot\d+/i,/scam\d+/i,/temp\d+/i,/dummy\d+/i]},c2=()=>`${navigator.userAgent.slice(0,20)}_${Date.now()}`,eN=(t,e)=>{const r=Date.now(),n=`${e}:${t}`,s=sc.get(n);return!s||r>s.resetTime?(sc.set(n,{count:1,resetTime:r+nr.RATE_LIMIT_WINDOW,lastRequest:r}),!0):s.count>=(e==="ip"?nr.MAX_REGISTRATIONS_PER_IP:nr.MAX_REGISTRATIONS_PER_EMAIL)?!1:(s.count++,s.lastRequest=r,!0)},Fq=t=>{const e=Date.now(),r=`throttle:${t}`,n=sc.get(r);return n?e-n.lastRequest<nr.MIN_REQUEST_INTERVAL?!1:e>n.resetTime?(n.count=1,n.resetTime=e+6e4,n.lastRequest=e,!0):n.count>=nr.MAX_REQUESTS_PER_MINUTE?!1:(n.count++,n.lastRequest=e,!0):(sc.set(r,{count:1,resetTime:e+6e4,lastRequest:e}),!0)},tN=t=>{const e=[];return t.length<nr.MIN_PASSWORD_LENGTH&&e.push(`Password must be at least ${nr.MIN_PASSWORD_LENGTH} characters long`),/[A-Z]/.test(t)||e.push("Password must contain at least one uppercase letter"),/[a-z]/.test(t)||e.push("Password must contain at least one lowercase letter"),/\d/.test(t)||e.push("Password must contain at least one number"),/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(t)||e.push("Password must contain at least one special character"),["password","123456","qwerty","admin","letmein","password123","123456789"].includes(t.toLowerCase())&&e.push("Password is too common and easily guessable"),/(.)\1{3,}/.test(t)&&e.push("Password contains too many repeated characters"),{isValid:e.length===0,errors:e}},rN=t=>{var a;const e=[],r=t.toLowerCase();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return e.push("Please enter a valid email address"),{isValid:!1,errors:e};const s=(a=r.split("@")[1])==null?void 0:a.toLowerCase();s&&nr.BLOCKED_EMAIL_DOMAINS.includes(s)&&e.push("Temporary or disposable email addresses are not allowed");const i=r.split("@")[0];return nr.SUSPICIOUS_PATTERNS.some(l=>l.test(i))&&e.push("Email address contains suspicious patterns"),r.length>254&&e.push("Email address is too long"),i.length>64&&e.push("Email username part is too long"),(i.match(/\./g)||[]).length>3&&e.push("Email username contains too many dots"),{isValid:e.length===0,errors:e}},nN=t=>{const e=[],r=t.replace(/\D/g,"");return r.length<nr.MIN_PHONE_LENGTH&&e.push(`Phone number must be at least ${nr.MIN_PHONE_LENGTH} digits`),r.length>nr.MAX_PHONE_LENGTH&&e.push(`Phone number must be no more than ${nr.MAX_PHONE_LENGTH} digits`),/(\d)\1{5,}/.test(r)&&e.push("Phone number contains suspicious repeating patterns"),/^(\d)\1+$/.test(r)&&e.push("Phone number cannot be all the same digit"),["1234567890","0000000000","1111111111","9999999999"].includes(r)&&e.push("Phone number appears to be a test number"),{isValid:e.length===0,errors:e}},sN=t=>{const e=[];return t.length<nr.MIN_NAME_LENGTH&&e.push(`Name must be at least ${nr.MIN_NAME_LENGTH} characters long`),t.length>nr.MAX_NAME_LENGTH&&e.push(`Name must be no more than ${nr.MAX_NAME_LENGTH} characters long`),nr.SUSPICIOUS_PATTERNS.some(i=>i.test(t))&&e.push("Name contains suspicious patterns"),(t.match(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/g)||[]).length>t.length*.3&&e.push("Name contains too many special characters"),(t.match(/\d/g)||[]).length>t.length*.5&&e.push("Name contains too many numbers"),["test","user","admin","demo","fake","spam","bot","scam"].some(i=>t.toLowerCase().includes(i))&&e.push("Name contains suspicious words"),{isValid:e.length===0,errors:e}},Vq=()=>{try{const t=document.createElement("canvas"),e=t.getContext("2d");if(e)return e.textBaseline="top",e.font="14px Arial",e.fillText("Browser fingerprint",2,2),t.toDataURL()}catch{console.warn("Canvas fingerprinting not available")}return`${navigator.userAgent}_${navigator.language}_${screen.width}x${screen.height}_${new Date().getTimezoneOffset()}`},Os=(t,e)=>{const r={timestamp:new Date().toISOString(),event:t,details:e,userAgent:navigator.userAgent,fingerprint:Vq(),identifier:c2(),url:window.location.href,referrer:document.referrer};console.log("🔒 Security Event:",r)};setInterval(()=>{const t=Date.now();for(const[e,r]of sc.entries())t>r.resetTime&&sc.delete(e)},6e4);const Bq=()=>{var Y,ee,U,H,ie,ne,le,he,_e,Me;const[t,e]=g.useState(""),[r,n]=g.useState(""),[s,i]=g.useState(""),[a,l]=g.useState(""),[c,u]=g.useState(""),[d,f]=g.useState(!1),[m,p]=g.useState(!1),[w,y]=g.useState(!1),[b,N]=g.useState({}),[x,E]=g.useState(0),[R,I]=g.useState(""),[V,j]=g.useState(""),{register:T,user:S,loading:k}=Es(),L=Xn(),D=g.useRef(null),P=g.useRef(null);g.useEffect(()=>{Nt("page_view",{page:"Register"}),Os("registration_page_visit",{timestamp:new Date().toISOString(),userAgent:navigator.userAgent})},[]),g.useEffect(()=>{const ue=(G,me)=>{let Ee=[];switch(G){case"name":{Ee=sN(me).errors;break}case"email":{Ee=rN(me).errors;break}case"contactNumber":{Ee=nN(me).errors;break}case"password":{Ee=tN(me).errors;break}case"confirmPassword":{me&&me!==a&&Ee.push("Passwords do not match");break}}N(Ce=>({...Ce,[G]:Ee}))},Z={},de=(G,me)=>{Z[G]&&clearTimeout(Z[G]),Z[G]=setTimeout(()=>{ue(G,me)},500)};return t&&de("name",t),r&&de("email",r.toLowerCase()),s&&de("contactNumber",s),a&&de("password",a),c&&de("confirmPassword",c),()=>{Object.values(Z).forEach(G=>clearTimeout(G))}},[t,r,s,a,c]);const B=async ue=>{ue.preventDefault();const Z=Date.now(),de=c2();if(R.trim()!==""||V.trim()!==""){Os("honeypot_triggered",{honeypotWebsite:R,honeypotCompany:V,clientId:de}),Ye({title:"Registration Blocked",description:"Suspicious activity detected. Please try again later.",variant:"destructive"});return}if(!Fq(de)){Os("request_throttled",{clientId:de,timeSinceLastRequest:Z-x}),Ye({title:"Too Many Requests",description:"Please wait a few seconds before trying again.",variant:"destructive"});return}if(!eN(de,"ip")){Os("ip_rate_limit_exceeded",{clientId:de,timeSinceLastRequest:Z-x}),Ye({title:"Registration Limit Reached",description:"Too many registration attempts from this location. Please try again later.",variant:"destructive"});return}const G=r.trim().toLowerCase();if(!eN(G,"email")){Os("email_rate_limit_exceeded",{email:G,clientId:de}),Ye({title:"Email Already Used",description:"This email address has already been registered.",variant:"destructive"});return}const me=sN(t.trim()),Ee=rN(G),Ce=nN(s.trim()),pe=tN(a);if(!me.isValid||!Ee.isValid||!Ce.isValid||!pe.isValid||a!==c){const ve={name:me.errors,email:Ee.errors,contactNumber:Ce.errors,password:pe.errors,confirmPassword:a!==c?["Passwords do not match"]:[]};N(ve),Os("validation_failed",{clientId:de,errors:ve}),Ye({title:"Validation Errors",description:"Please fix the errors in the form.",variant:"destructive"});return}f(!0),E(Z);try{Os("registration_attempt",{email:G,clientId:de,timestamp:new Date().toISOString()}),Nt("register_attempt",{email:G}),await T(t.trim(),G,a,s.trim()),Os("registration_success",{email:G,clientId:de,userId:S==null?void 0:S.id,userRole:S==null?void 0:S.role}),Ye({title:"Welcome to Vape Master!",description:"Your loyalty card is ready!"}),Nt("register_success",{user_id:S==null?void 0:S.id,user_role:S==null?void 0:S.role}),L("/dashboard")}catch(ve){let at="Please try again.";ve&&typeof ve=="object"&&"message"in ve&&typeof ve.message=="string"&&(at=ve.message),Os("registration_failed",{email:G,clientId:de,error:at}),Ye({title:"Registration Failed",description:at,variant:"destructive"}),Nt("register_failed",{email:G,error:at})}finally{f(!1)}},z=Object.values(b).some(ue=>ue.length>0);return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx(si,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("h1",{className:"text-3xl font-bold text-white",children:"Join the Club"})})}),o.jsxs("form",{ref:D,onSubmit:B,className:"space-y-6",children:[o.jsxs("div",{className:"hidden",children:[o.jsx("input",{type:"text",name:"website",value:R,onChange:ue=>I(ue.target.value),tabIndex:-1,autoComplete:"off"}),o.jsx("input",{type:"text",name:"company",value:V,onChange:ue=>j(ue.target.value),tabIndex:-1,autoComplete:"off"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"name",className:"text-white",children:"Full Name"}),o.jsx(Se,{id:"name",type:"text",value:t,onChange:ue=>e(ue.target.value),placeholder:"Enter your full name",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${(Y=b.name)!=null&&Y.length?"border-red-500":""}`,required:!0,autoComplete:"name"}),((ee=b.name)==null?void 0:ee.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.name.map((ue,Z)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},Z))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"email",className:"text-white",children:"Email"}),o.jsx(Se,{id:"email",type:"email",value:r,onChange:ue=>n(ue.target.value),placeholder:"Enter your email",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${(U=b.email)!=null&&U.length?"border-red-500":""}`,required:!0,autoComplete:"email"}),((H=b.email)==null?void 0:H.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.email.map((ue,Z)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},Z))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"password",className:"text-white",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Se,{id:"password",type:m?"text":"password",value:a,onChange:ue=>l(ue.target.value),placeholder:"Create a strong password",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 pr-10 ${(ie=b.password)!=null&&ie.length?"border-red-500":""}`,required:!0,autoComplete:"new-password"}),o.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:m?o.jsx(G1,{className:"w-4 h-4"}):o.jsx(da,{className:"w-4 h-4"})})]}),((ne=b.password)==null?void 0:ne.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.password.map((ue,Z)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},Z))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"confirmPassword",className:"text-white",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Se,{id:"confirmPassword",type:w?"text":"password",value:c,onChange:ue=>u(ue.target.value),placeholder:"Confirm your password",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 pr-10 ${(le=b.confirmPassword)!=null&&le.length?"border-red-500":""}`,required:!0,autoComplete:"new-password"}),o.jsx("button",{type:"button",onClick:()=>y(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:w?o.jsx(G1,{className:"w-4 h-4"}):o.jsx(da,{className:"w-4 h-4"})})]}),((he=b.confirmPassword)==null?void 0:he.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.confirmPassword.map((ue,Z)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},Z))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"contactNumber",className:"text-white",children:"Contact Number"}),o.jsx(Se,{id:"contactNumber",type:"tel",value:s,onChange:ue=>i(ue.target.value),placeholder:"Enter your contact number",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${(_e=b.contactNumber)!=null&&_e.length?"border-red-500":""}`,required:!0,autoComplete:"tel"}),((Me=b.contactNumber)==null?void 0:Me.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.contactNumber.map((ue,Z)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},Z))})]}),o.jsx(Te,{ref:P,type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:d||z,children:d?"Creating Account...":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",o.jsx(si,{to:"/login",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign in"})]})})]})})})]})]})},Uq=()=>{const[t,e]=g.useState(""),[r,n]=g.useState(""),[s,i]=g.useState(!1),{login:a,user:l,loading:c}=Es(),u=Xn(),d=ai();g.useEffect(()=>{Nt("page_view",{page:"Login"})},[]);const f=async m=>{var p,w;if(m.preventDefault(),!t.trim()||!r.trim()){Ye({title:"Missing Information",description:"Please enter your email and password.",variant:"destructive"}),Nt("login_missing_info");return}i(!0);try{Nt("login_attempt",{email:t});const y=await a(t.trim(),r.trim());if(y){Ye({title:"Welcome back!",description:`Good to see you again, ${y.name}!`}),Nt("login_success",{user_id:y.id,user_role:y.role});const b=((w=(p=d.state)==null?void 0:p.from)==null?void 0:w.pathname)||"/dashboard";u(b,{replace:!0})}else Ye({title:"User Not Found",description:"No account found with this email. Please register first.",variant:"destructive"}),Nt("login_user_not_found",{email:t})}catch(y){let b="Please try again.";y&&typeof y=="object"&&"message"in y&&typeof y.message=="string"&&(b=y.message),Ye({title:"Login Failed",description:b,variant:"destructive"}),Nt("login_failed",{email:t,error:b})}finally{i(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx(si,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-400",children:"Sign in to your loyalty account"})]}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"email",className:"text-white",children:"Email"}),o.jsx(Se,{id:"email",type:"email",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your email",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"password",className:"text-white",children:"Password"}),o.jsx(Se,{id:"password",type:"password",value:r,onChange:m=>n(m.target.value),placeholder:"Enter your password",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),o.jsx(Te,{type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold",disabled:s,children:s?"Signing In...":"Sign In"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",o.jsx(si,{to:"/register",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign up"})]})})]})})})]})]})};function qq(){const{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:a}=Es(),[l,c]=g.useState([]),u=Xn(),[d,f]=g.useState(!1),m=g.useRef(null),[p,w]=g.useState(!1),[y,b]=g.useState(0),[N,x]=g.useState(null),[E,R]=g.useState("progress"),I=(t==null?void 0:t.purchaseLimit)||(s==null?void 0:s.purchaseLimit)||hq;g.useEffect(()=>{!e&&!t&&u("/login")},[t,e,u]),g.useEffect(()=>{t&&(async()=>{try{const L=await Su();c(L)}catch(L){console.error("Error loading offers:",L)}})()},[t]),g.useEffect(()=>{t&&(x(new Date),m.current!==null&&m.current!==t.purchases&&t.purchases-m.current>0&&(Ye({title:"Purchase Updated! 📱",description:`Your purchase count was updated via QR scan. New total: ${t.purchases}/${I}`}),w(!0),b(L=>L+1),setTimeout(()=>w(!1),2500),t.isRewardReady&&m.current<I&&setTimeout(()=>{Ye({title:"Reward Unlocked! 🎉",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)},1e3)),m.current===0&&t.purchases===1&&(f(!0),setTimeout(()=>f(!1),3e3)),m.current=t.purchases)},[t==null?void 0:t.purchases,t==null?void 0:t.isRewardReady,u,I]);const V=Math.max(0,I-((t==null?void 0:t.purchases)||0));return{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:a,offers:l,navigate:u,showFirstConfetti:d,showConfetti:p,confettiKey:y,lastUpdateTime:N,activeTab:E,setActiveTab:R,userPurchaseLimit:I,purchasesRemaining:V,handleAddPurchase:()=>{!t||t.purchases>=I||(r(),w(!0),b(k=>k+1),setTimeout(()=>w(!1),2500),t.purchases+1>=I?(Ye({title:"Reward Unlocked! 🎉",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)):Ye({title:"Purchase Added!",description:`${I-1-t.purchases} more purchases until your next reward!`}))},handleLogout:()=>{n(),Ye({title:"Logged Out",description:"Thanks for visiting Vape Master!"}),u("/")},handleOfferSelection:async k=>{try{console.log("Selecting offer:",k)}catch(L){console.error("Error selecting offer:",L)}}}}var Lf={linear:function(t,e,r,n){var s=r-e;return s*t/n+e},easeInQuad:function(t,e,r,n){var s=r-e;return s*(t/=n)*t+e},easeOutQuad:function(t,e,r,n){var s=r-e;return-s*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t+e},easeOutCubic:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,r,n){var s=r-e;return-s*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,r,n){var s=r-e;return-s*Math.cos(t/n*(Math.PI/2))+s+e},easeOutSine:function(t,e,r,n){var s=r-e;return s*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,r,n){var s=r-e;return-s/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,r,n){var s=r-e;return t==0?e:s*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,r,n){var s=r-e;return t==n?e+s:s*(-Math.pow(2,-10*t/n)+1)+e},easeInOutExpo:function(t,e,r,n){var s=r-e;return t===0?e:t===n?e+s:(t/=n/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,r,n){var s=r-e;return-s*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,r,n){var s=r-e;return s*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,r,n){var s=r-e,i,a,l;return l=1.70158,a=0,i=s,t===0?e:(t/=n)===1?e+s:(a||(a=n*.3),i<Math.abs(s)?(i=s,l=a/4):l=a/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/a))+e)},easeOutElastic:function(t,e,r,n){var s=r-e,i,a,l;return l=1.70158,a=0,i=s,t===0?e:(t/=n)===1?e+s:(a||(a=n*.3),i<Math.abs(s)?(i=s,l=a/4):l=a/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*n-l)*(2*Math.PI)/a)+s+e)},easeInOutElastic:function(t,e,r,n){var s=r-e,i,a,l;return l=1.70158,a=0,i=s,t===0?e:(t/=n/2)===2?e+s:(a||(a=n*(.3*1.5)),i<Math.abs(s)?(i=s,l=a/4):l=a/(2*Math.PI)*Math.asin(s/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/a))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/a)*.5+s+e)},easeInBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),(t/=n/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,r,n){var s=r-e,i;return i=Lf.easeOutBounce(n-t,0,s,n),s-i+e},easeOutBounce:function(t,e,r,n){var s=r-e;return(t/=n)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,r,n){var s=r-e,i;return t<n/2?(i=Lf.easeInBounce(t*2,0,s,n),i*.5+e):(i=Lf.easeOutBounce(t*2-n,0,s,n),i*.5+s*.5+e)}},Gq=Lf;function $q(t){return t*Math.PI/180}function Xr(t,e){return t+Math.random()*(e-t)}function zq(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Ru;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Ru||(Ru={}));var Ai;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Ai||(Ai={}));const Hq=1e3/60;class Wq{constructor(e,r,n,s){this.getOptions=r;const{colors:i,initialVelocityX:a,initialVelocityY:l}=this.getOptions();this.context=e,this.x=n,this.y=s,this.w=Xr(5,20),this.h=Xr(5,20),this.radius=Xr(5,10),this.vx=typeof a=="number"?Xr(-a,a):Xr(a.min,a.max),this.vy=typeof l=="number"?Xr(-l,0):Xr(l.min,l.max),this.shape=zq(0,2),this.angle=$q(Xr(0,360)),this.angularSpin=Xr(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=Xr(0,1),this.rotationDirection=Xr(0,1)?Ai.Positive:Ai.Negative}update(e){const{gravity:r,wind:n,friction:s,opacity:i,drawShape:a}=this.getOptions(),l=e/Hq;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=r*l,this.vx+=n*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===Ai.Positive?this.rotationDirection=Ai.Negative:this.rotateY<=-1&&this.rotationDirection===Ai.Negative&&(this.rotationDirection=Ai.Positive);const c=.1*this.rotationDirection*l;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case Ru.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Ru.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Ru.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Qq{constructor(e,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Xr(this.x,this.w+this.x),i=Xr(this.y,this.h+this.y);return new Wq(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:a,particlesGenerated:l,lastNumberOfPieces:c}=this,{run:u,recycle:d,numberOfPieces:f,debug:m,tweenFunction:p,tweenDuration:w}=this.getOptions();if(!u)return!1;const y=this.particles.length,b=d?y:l;if(b<f){c!==f&&(this.tweenProgress=0,this.tweenFrom=b,this.lastNumberOfPieces=f),this.tweenProgress=Math.min(w,Math.max(0,this.tweenProgress+s));const N=p(this.tweenProgress,this.tweenFrom,f,w),x=Math.round(N-b);for(let E=0;E<x;E++)this.particles.push(this.getParticle());this.particlesGenerated+=x}m&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${y}`,i.width-10,i.height-20));for(let N=this.particles.length-1;N>=0;N--){const x=this.particles[N];x.update(s),(x.y>i.height||x.y<-100||x.x>i.width+100||x.x<-100)&&(d&&b<=f?this.particles[N]=this.getParticle():this.removeParticleAt(N))}return y>0||b<f},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=r}}const ob={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Gq.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Yq{constructor(e,r){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...ob,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:a,frameRate:l},canvas:c,context:u}=this,d=Math.min(s-this.lastFrameTime,50);if(l&&d<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?d%l:0),i&&(u.fillStyle="white",u.clearRect(0,0,c.width,c.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new Qq(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(e){var s,i;const r=(s=this._options)==null?void 0:s.run,n=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&n===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&r===!1&&this.update()}}const Kq=J.createRef();class ab extends J.Component{constructor(e){super(e),this.canvas=J.createRef(),this.canvas=e.canvasRef||Kq}componentDidMount(){if(this.canvas.current){const e=v0(this.props)[0];this.confetti=new Yq(this.canvas.current,e)}}componentDidUpdate(){const e=v0(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,r]=v0(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return o.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...r,style:n})}}ab.defaultProps={...ob};ab.displayName="ReactConfetti";function v0(t){const e={},r={},n={},s=[...Object.keys(ob),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const a in t){const l=t[a];s.includes(a)?e[a]=l:i.includes(a)?i[a]=l:n[a]=l}return[e,n,r]}const u2=J.forwardRef((t,e)=>o.jsx(ab,{canvasRef:e,...t})),Jq=({title:t,onBack:e,actions:r})=>o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[e&&o.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:t})]}),o.jsx("div",{className:"flex gap-2",children:r})]})}),Xq=({reward:t,isOpen:e,onClose:r})=>!e||!t?null:o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gray-900 border border-red-900/30 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-red-900/30",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Reward Details"}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[o.jsxs("p",{children:["Reward ID: ",t.rewardId]}),t.claimedAt&&o.jsxs("p",{className:"text-green-600",children:["Claimed:"," ",t.claimedAt.toDate?new Date(t.claimedAt.toDate()).toLocaleString():""]})]})]}),o.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:t.scanHistory&&t.scanHistory.length>0?o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4",children:["Scan History (",t.scanHistory.length," scans)"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b justify-between border-gray-700 md:table-row flex flex-col md:flex-row",children:[o.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[o.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scan #"}),o.jsx("span",{className:"hidden md:block",children:"Scan #"})]}),o.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[o.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scanned By"}),o.jsx("span",{className:"hidden md:block",children:"Scanned By"})]}),o.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[o.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Date & Time"}),o.jsx("span",{className:"hidden md:block",children:"Date & Time"})]})]})}),o.jsx("tbody",{children:t.scanHistory.map((n,s)=>{var i,a;return o.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50 md:table-row flex flex-col md:flex-row justify-center text-center md:text-left",children:[o.jsxs("td",{className:"px-4 py-3 font-medium flex flex-col md:table-cell items-center md:items-start",children:[o.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scan #"}),s+1]}),o.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[o.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scanned By"}),n.scannedBy]}),o.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[o.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Date & Time"}),(i=n.timestamp)!=null&&i.toDate?new Date(n.timestamp.toDate()).toLocaleString():""]})]},((a=n.timestamp)==null?void 0:a.seconds)+n.scannedBy)})})]})})]}):o.jsx("div",{className:"text-center text-gray-400 py-8",children:o.jsx("p",{children:"No scan history available for this reward."})})}),o.jsx("div",{className:"p-6 border-t border-red-900/30",children:o.jsx("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Close"})})]})}),Zq=({rewards:t,onRewardClick:e})=>!t||t.length===0?o.jsx("div",{className:"text-gray-400 text-sm",children:"No rewards claimed."}):o.jsxs("div",{className:"space-y-4 mt-2 mb-4",children:[o.jsx("h4",{className:"text-sm font-semibold text-white",children:"Claimed Rewards"}),t.slice().reverse().map((r,n)=>o.jsxs("div",{className:"border border-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-800/50 transition-colors",onClick:()=>e(r),children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[o.jsxs("h5",{className:"text-sm font-medium text-white",children:["Reward #",t.length-n," - ",r.rewardId]}),o.jsxs("span",{className:"text-xs text-green-500 text-gray-400",children:["Claimed:"," ",r.claimedAt&&r.claimedAt.toDate?new Date(r.claimedAt.toDate()).toLocaleString():""]})]}),r.scanHistory&&r.scanHistory.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsxs("h6",{className:"text-xs font-medium text-gray-300 mb-1",children:["Scans for this reward: ",r.scanHistory.length," scans"]}),o.jsx("p",{className:"text-xs text-gray-400",children:"Click to view detailed scan history"})]})]},r.rewardId))]}),eG=({allUsers:t})=>{const[e,r]=g.useState(null),[n,s]=g.useState(!1);return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-none p-6 min-h-[460px] flex flex-col justify-start -mt-0 shadow-2xl",children:[o.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Rewards History"}),o.jsx("div",{className:"space-y-2",children:t.filter(i=>i.role==="customer").map(i=>{var a,l;return o.jsxs("div",{className:"bg-gray-800/60 rounded-lg p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[o.jsxs("span",{className:"font-semibold text-white",children:[i.name," (",i.email,")"]}),o.jsxs("span",{className:"text-xs text-gray-400",children:["Total Scans: ",((l=(a=i.currentReward)==null?void 0:a.scanHistory)==null?void 0:l.length)||0]})]}),o.jsx(Zq,{rewards:i.rewards,onRewardClick:c=>{r(c),s(!0)}})]},i.id)})}),o.jsx(Xq,{reward:e,isOpen:n,onClose:()=>{s(!1),r(null)}})]})},tG=({users:t,loading:e})=>{const r=s=>{switch(s){case"super_admin":return o.jsx(Ty,{className:"w-4 h-4 text-yellow-500"});case"admin":return o.jsx(Bx,{className:"w-4 h-4 text-blue-500"});default:return o.jsx(Cn,{className:"w-4 h-4 text-gray-400"})}},n=s=>{switch(s){case"super_admin":return"text-yellow-400";case"admin":return"text-blue-400";default:return"text-gray-400"}};return e?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}),o.jsx("span",{className:"ml-3 text-gray-400",children:"Loading users..."})]}):t.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Cn,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No users found"})]}):o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map(s=>{var l;const i=s.purchaseLimit||5,a=Math.min(100,s.purchases/i*100);return o.jsxs("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-lg p-4 hover:bg-gray-800/80 transition-all duration-200",children:[o.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[r(s.role),o.jsx("span",{className:`text-sm font-medium ${n(s.role)}`,children:(s.role||"").replace("_"," ").toUpperCase()})]}),o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:"text-sm text-gray-400",children:s.lastScanAt?new Date(s.lastScanAt.toDate()).toLocaleDateString():"Never"})})]}),o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-1",children:[o.jsx("span",{className:"font-semibold text-white",children:s.name}),o.jsx("span",{className:"text-sm text-gray-400",children:s.email})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white font-medium",children:[s.purchases,"/",i]})]}),o.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${a>=100?"bg-green-500":"bg-red-500"}`,style:{width:`${a}%`}})}),o.jsxs("div",{className:"flex items-center flex-wrap justify-between text-xs text-gray-500",children:[o.jsxs("span",{children:[((l=s.rewards)==null?void 0:l.length)||0," rewards claimed"]}),o.jsx("span",{children:s.isRewardReady?"🎉 Ready!":`${i-s.purchases} to go`})]})]})]},s.id)})})},rG=({activeTab:t,onTabChange:e,userRole:r})=>{const n=[{key:"progress",label:"Progress",icon:zr,description:"Track your stamps & rewards",color:"blue",activeColor:"from-blue-500 to-blue-600",inactiveColor:"from-blue-400/20 to-blue-500/20",borderColor:"border-blue-500/30",textColor:"text-blue-300",hoverColor:"hover:from-blue-400/30 hover:to-blue-500/30"},{key:"offers",label:"Offers",icon:st,description:"Available loyalty offers",color:"green",activeColor:"from-green-500 to-green-600",inactiveColor:"from-green-400/20 to-green-500/20",borderColor:"border-green-500/30",textColor:"text-green-300",hoverColor:"hover:from-green-400/30 hover:to-green-500/30"},{key:"card",label:"Rewards",icon:zs,description:"Your earned rewards",color:"purple",activeColor:"from-purple-500 to-purple-600",inactiveColor:"from-purple-400/20 to-purple-500/20",borderColor:"border-purple-500/30",textColor:"text-purple-300",hoverColor:"hover:from-purple-400/30 hover:to-purple-500/30"}];return o.jsx("div",{className:"bg-gradient-to-r from-gray-900/80 via-gray-800/80 to-gray-900/80 border border-gray-700/50 rounded-xl p-3 backdrop-blur-sm shadow-lg",children:o.jsx("div",{className:"flex space-x-2 h-24",children:n.map(s=>{const i=s.icon,a=t===s.key;return o.jsxs("button",{onClick:()=>e(s.key),className:`flex-1 flex flex-col items-center justify-center rounded-lg transition-all duration-300 ease-out group relative overflow-hidden min-h-[88px] ${a?`bg-gradient-to-b ${s.activeColor} border-2 ${s.borderColor} text-white shadow-lg shadow-${s.color}-500/25`:`bg-gradient-to-b ${s.inactiveColor} border-2 border-transparent text-gray-400 ${s.hoverColor} hover:border-${s.color}-500/30 hover:text-${s.color}-300`}`,children:[o.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${a?`bg-gradient-to-b from-${s.color}-500/10 to-${s.color}-400/10`:"bg-transparent"}`}),a&&o.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-${s.color}-400 to-${s.color}-500`}),o.jsx(i,{className:`w-6 h-6 mb-2 transition-all duration-300 ${a?"text-white scale-110 drop-shadow-sm relative z-10":`group-hover:scale-110 group-hover:text-${s.color}-300`}`}),o.jsx("span",{className:`text-sm font-bold transition-all duration-300 mb-1 ${a?"text-white font-extrabold drop-shadow-lg relative z-10":"text-gray-300 group-hover:text-white"}`,children:s.label}),o.jsx("span",{className:`text-xs text-center transition-all duration-300 leading-tight ${a?"text-white font-semibold drop-shadow-lg relative z-10":"text-gray-400 group-hover:text-gray-200"}`,children:s.description}),o.jsx("div",{className:`absolute inset-0 rounded-lg transition-all duration-300 ${a?`ring-2 ring-${s.color}-500/30`:`group-hover:ring-1 group-hover:ring-${s.color}-500/20`}`}),a&&o.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-b from-${s.color}-500/5 to-transparent`})]},s.key)})})})},nG=({user:t,userPurchaseLimit:e,settings:r,purchasesRemaining:n,onViewReward:s,currentOffer:i})=>{var E,R,I;const[a,l]=g.useState({inProgress:!0,completed:!1}),[c,u]=g.useState(!1),d=t.purchases||0,f=((E=t.completedRewards)==null?void 0:E.filter(V=>{var j,T;return((j=V.scanHistory)==null?void 0:j.length)>=((T=V.offerSnapshot)==null?void 0:T.stampRequirement)}))||[],m=((R=t.completedRewards)==null?void 0:R.filter(V=>{var j,T;return((j=V.scanHistory)==null?void 0:j.length)<((T=V.offerSnapshot)==null?void 0:T.stampRequirement)}))||[],p=f.filter(V=>!V.claimedAt),w=((I=t.completedRewards)==null?void 0:I.reduce((V,j)=>{var T;return V+(((T=j.scanHistory)==null?void 0:T.length)||0)},0))||0,y=Math.max(d,w),b=3,N=c?m:m.slice(0,b);c||f.slice(0,b);const x=V=>{l(j=>({...j,[V]:!j[V]}))};return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-xl p-6 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsxs("div",{className:"flex items-center justify-center mb-3",children:[o.jsx(_y,{className:"w-8 h-8 text-yellow-400 mr-3"}),o.jsx("h3",{className:"text-2xl font-bold text-white",children:"Life Stamps"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-5xl font-black text-white drop-shadow-[0_2px_8px_#000a] mb-2",children:y}),o.jsx("div",{className:"text-lg text-gray-300 font-medium",children:"Total Stamps Collected Since Joining"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-blue-400",children:f.length}),o.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards Completed"})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-green-400",children:m.length}),o.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards in Progress"})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-yellow-400",children:p.length}),o.jsx("div",{className:"text-gray-300 text-xs",children:"Ready to Redeem"})]})]}),m.length>0&&o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>x("inProgress"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 text-blue-400 mr-2"}),o.jsxs("span",{className:"text-blue-300 text-sm font-medium",children:["Current Active Rewards (",m.length,")"]})]}),a.inProgress?o.jsx(ym,{className:"w-4 h-4 text-blue-400"}):o.jsx(Qu,{className:"w-4 h-4 text-blue-400"})]}),a.inProgress&&o.jsxs("div",{className:"space-y-3",children:[N.map((V,j)=>{var D,P,B;const T=((D=V.scanHistory)==null?void 0:D.length)||0,S=((P=V.offerSnapshot)==null?void 0:P.stampRequirement)||0,k=S>0?Math.min(T/S*100,100):0,L=Math.max(0,S-T);return o.jsx("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-3",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-2",children:((B=V.offerSnapshot)==null?void 0:B.offerName)||"Loyalty Reward"}),o.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white font-medium",children:[T," / ",S," stamps"]})]}),o.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3",children:o.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${k}%`}})}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-gray-300 text-xs mb-2",children:V.rewardDescription}),o.jsx("div",{className:"text-blue-300 text-xs",children:L>0?`${L} more stamps needed`:"🎉 Reward ready to redeem!"})]})]})},V.rewardId)}),m.length>b&&o.jsx("div",{className:"text-center pt-2",children:o.jsx(Te,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${m.length} Rewards`})})]})]})}),m.length===0&&o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-gray-400 text-sm mb-2",children:f.length>0?"All rewards completed! 🎉":"No active rewards yet"}),o.jsx("div",{className:"text-gray-500 text-xs",children:f.length>0?"Check the Offers tab to start a new reward":"Visit the Offers tab to start collecting stamps"})]})}),o.jsx("div",{className:"text-center mb-4",children:o.jsxs("div",{className:"flex items-center justify-center text-gray-400 text-xs",children:[o.jsx(Dx,{className:"w-3 h-3 mr-1"}),"Member since"," ",t.createdAt.toDate().toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"short",year:"numeric"})]})}),t.isRewardReady&&s&&o.jsx("div",{className:"text-center",children:o.jsxs(Te,{onClick:s,className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-medium px-6 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[o.jsx(tu,{className:"w-4 h-4 mr-2"}),"View Reward"]})})]})};var sG=Object.defineProperty,$m=Object.getOwnPropertySymbols,d2=Object.prototype.hasOwnProperty,h2=Object.prototype.propertyIsEnumerable,iN=(t,e,r)=>e in t?sG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hv=(t,e)=>{for(var r in e||(e={}))d2.call(e,r)&&iN(t,r,e[r]);if($m)for(var r of $m(e))h2.call(e,r)&&iN(t,r,e[r]);return t},fv=(t,e)=>{var r={};for(var n in t)d2.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&$m)for(var n of $m(t))e.indexOf(n)<0&&h2.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var xa;(t=>{const e=class qe{constructor(c,u,d,f){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<qe.MIN_VERSION||c>qe.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let w=0;w<this.size;w++)m.push(!1);for(let w=0;w<this.size;w++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(d);if(this.drawCodewords(p),f==-1){let w=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const b=this.getPenaltyScore();b<w&&(f=y,w=b),this.applyMask(y)}}s(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,u){const d=t.QrSegment.makeSegments(c);return qe.encodeSegments(d,u)}static encodeBinary(c,u){const d=t.QrSegment.makeBytes(c);return qe.encodeSegments([d],u)}static encodeSegments(c,u,d=1,f=40,m=-1,p=!0){if(!(qe.MIN_VERSION<=d&&d<=f&&f<=qe.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let w,y;for(w=d;;w++){const E=qe.getNumDataCodewords(w,u)*8,R=a.getTotalBits(c,w);if(R<=E){y=R;break}if(w>=f)throw new RangeError("Data too long")}for(const E of[qe.Ecc.MEDIUM,qe.Ecc.QUARTILE,qe.Ecc.HIGH])p&&y<=qe.getNumDataCodewords(w,E)*8&&(u=E);let b=[];for(const E of c){r(E.mode.modeBits,4,b),r(E.numChars,E.mode.numCharCountBits(w),b);for(const R of E.getData())b.push(R)}s(b.length==y);const N=qe.getNumDataCodewords(w,u)*8;s(b.length<=N),r(0,Math.min(4,N-b.length),b),r(0,(8-b.length%8)%8,b),s(b.length%8==0);for(let E=236;b.length<N;E^=253)r(E,8,b);let x=[];for(;x.length*8<b.length;)x.push(0);return b.forEach((E,R)=>x[R>>>3]|=E<<7-(R&7)),new qe(w,u,x,m)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let d=0;d<u;d++)for(let f=0;f<u;f++)d==0&&f==0||d==0&&f==u-1||d==u-1&&f==0||this.drawAlignmentPattern(c[d],c[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let d=u;for(let m=0;m<10;m++)d=d<<1^(d>>>9)*1335;const f=(u<<10|d)^21522;s(f>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,n(f,m));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,n(f,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,n(f,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,n(f,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let d=0;d<12;d++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;s(u>>>18==0);for(let d=0;d<18;d++){const f=n(u,d),m=this.size-11+d%3,p=Math.floor(d/3);this.setFunctionModule(m,p,f),this.setFunctionModule(p,m,f)}}drawFinderPattern(c,u){for(let d=-4;d<=4;d++)for(let f=-4;f<=4;f++){const m=Math.max(Math.abs(f),Math.abs(d)),p=c+f,w=u+d;0<=p&&p<this.size&&0<=w&&w<this.size&&this.setFunctionModule(p,w,m!=2&&m!=4)}}drawAlignmentPattern(c,u){for(let d=-2;d<=2;d++)for(let f=-2;f<=2;f++)this.setFunctionModule(c+f,u+d,Math.max(Math.abs(f),Math.abs(d))!=1)}setFunctionModule(c,u,d){this.modules[u][c]=d,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,d=this.errorCorrectionLevel;if(c.length!=qe.getNumDataCodewords(u,d))throw new RangeError("Invalid argument");const f=qe.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u],m=qe.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u],p=Math.floor(qe.getNumRawDataModules(u)/8),w=f-p%f,y=Math.floor(p/f);let b=[];const N=qe.reedSolomonComputeDivisor(m);for(let E=0,R=0;E<f;E++){let I=c.slice(R,R+y-m+(E<w?0:1));R+=I.length;const V=qe.reedSolomonComputeRemainder(I,N);E<w&&I.push(0),b.push(I.concat(V))}let x=[];for(let E=0;E<b[0].length;E++)b.forEach((R,I)=>{(E!=y-m||I>=w)&&x.push(R[E])});return s(x.length==p),x}drawCodewords(c){if(c.length!=Math.floor(qe.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let f=0;f<this.size;f++)for(let m=0;m<2;m++){const p=d-m,y=(d+1&2)==0?this.size-1-f:f;!this.isFunction[y][p]&&u<c.length*8&&(this.modules[y][p]=n(c[u>>>3],7-(u&7)),u++)}}s(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let d=0;d<this.size;d++){let f;switch(c){case 0:f=(d+u)%2==0;break;case 1:f=u%2==0;break;case 2:f=d%3==0;break;case 3:f=(d+u)%3==0;break;case 4:f=(Math.floor(d/3)+Math.floor(u/2))%2==0;break;case 5:f=d*u%2+d*u%3==0;break;case 6:f=(d*u%2+d*u%3)%2==0;break;case 7:f=((d+u)%2+d*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][d]&&f&&(this.modules[u][d]=!this.modules[u][d])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let p=!1,w=0,y=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[m][b]==p?(w++,w==5?c+=qe.PENALTY_N1:w>5&&c++):(this.finderPenaltyAddHistory(w,y),p||(c+=this.finderPenaltyCountPatterns(y)*qe.PENALTY_N3),p=this.modules[m][b],w=1);c+=this.finderPenaltyTerminateAndCount(p,w,y)*qe.PENALTY_N3}for(let m=0;m<this.size;m++){let p=!1,w=0,y=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][m]==p?(w++,w==5?c+=qe.PENALTY_N1:w>5&&c++):(this.finderPenaltyAddHistory(w,y),p||(c+=this.finderPenaltyCountPatterns(y)*qe.PENALTY_N3),p=this.modules[b][m],w=1);c+=this.finderPenaltyTerminateAndCount(p,w,y)*qe.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let p=0;p<this.size-1;p++){const w=this.modules[m][p];w==this.modules[m][p+1]&&w==this.modules[m+1][p]&&w==this.modules[m+1][p+1]&&(c+=qe.PENALTY_N2)}let u=0;for(const m of this.modules)u=m.reduce((p,w)=>p+(w?1:0),u);const d=this.size*this.size,f=Math.ceil(Math.abs(u*20-d*10)/d)-1;return s(0<=f&&f<=9),c+=f*qe.PENALTY_N4,s(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let d=[6];for(let f=this.size-7;d.length<c;f-=u)d.splice(1,0,f);return d}}static getNumRawDataModules(c){if(c<qe.MIN_VERSION||c>qe.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const d=Math.floor(c/7)+2;u-=(25*d-10)*d-55,c>=7&&(u-=36)}return s(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(qe.getNumRawDataModules(c)/8)-qe.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*qe.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let f=0;f<c-1;f++)u.push(0);u.push(1);let d=1;for(let f=0;f<c;f++){for(let m=0;m<u.length;m++)u[m]=qe.reedSolomonMultiply(u[m],d),m+1<u.length&&(u[m]^=u[m+1]);d=qe.reedSolomonMultiply(d,2)}return u}static reedSolomonComputeRemainder(c,u){let d=u.map(f=>0);for(const f of c){const m=f^d.shift();d.push(0),u.forEach((p,w)=>d[w]^=qe.reedSolomonMultiply(p,m))}return d}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let d=0;for(let f=7;f>=0;f--)d=d<<1^(d>>>7)*285,d^=(u>>>f&1)*c;return s(d>>>8==0),d}finderPenaltyCountPatterns(c){const u=c[1];s(u<=this.size*3);const d=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(d&&c[0]>=u*4&&c[6]>=u?1:0)+(d&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,d){return c&&(this.finderPenaltyAddHistory(u,d),u=0),u+=this.size,this.finderPenaltyAddHistory(u,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let d=c-1;d>=0;d--)u.push(l>>>d&1)}function n(l,c){return(l>>>c&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const i=class jt{constructor(c,u,d){if(this.mode=c,this.numChars=u,this.bitData=d,u<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(c){let u=[];for(const d of c)r(d,8,u);return new jt(jt.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!jt.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let d=0;d<c.length;){const f=Math.min(c.length-d,3);r(parseInt(c.substring(d,d+f),10),f*3+1,u),d+=f}return new jt(jt.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!jt.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],d;for(d=0;d+2<=c.length;d+=2){let f=jt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d))*45;f+=jt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d+1)),r(f,11,u)}return d<c.length&&r(jt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d)),6,u),new jt(jt.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:jt.isNumeric(c)?[jt.makeNumeric(c)]:jt.isAlphanumeric(c)?[jt.makeAlphanumeric(c)]:[jt.makeBytes(jt.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,u);else if(c<16384)r(2,2,u),r(c,14,u);else if(c<1e6)r(6,3,u),r(c,21,u);else throw new RangeError("ECI assignment value out of range");return new jt(jt.Mode.ECI,0,u)}static isNumeric(c){return jt.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return jt.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let d=0;for(const f of c){const m=f.mode.numCharCountBits(u);if(f.numChars>=1<<m)return 1/0;d+=4+m+f.bitData.length}return d}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let d=0;d<c.length;d++)c.charAt(d)!="%"?u.push(c.charCodeAt(d)):(u.push(parseInt(c.substring(d+1,d+3),16)),d+=2);return u}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=i;t.QrSegment=i})(xa||(xa={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(xa||(xa={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(xa||(xa={}));var yl=xa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var iG={L:yl.QrCode.Ecc.LOW,M:yl.QrCode.Ecc.MEDIUM,Q:yl.QrCode.Ecc.QUARTILE,H:yl.QrCode.Ecc.HIGH},f2=128,m2="L",p2="#FFFFFF",g2="#000000",y2=!1,v2=1,oG=4,aG=0,lG=.1;function x2(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(a,l){if(!a&&i!==null){r.push(`M${i+e} ${s+e}h${l-i}v1H${i+e}z`),i=null;return}if(l===n.length-1){if(!a)return;i===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${i+e},${s+e} h${l+1-i}v1H${i+e}z`);return}a&&i===null&&(i=l)})}),r.join("")}function w2(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function cG(t,e,r,n){if(n==null)return null;const s=t.length+r*2,i=Math.floor(e*lG),a=s/e,l=(n.width||i)*a,c=(n.height||i)*a,u=n.x==null?t.length/2-l/2:n.x*a,d=n.y==null?t.length/2-c/2:n.y*a,f=n.opacity==null?1:n.opacity;let m=null;if(n.excavate){let w=Math.floor(u),y=Math.floor(d),b=Math.ceil(l+u-w),N=Math.ceil(c+d-y);m={x:w,y,w:b,h:N}}const p=n.crossOrigin;return{x:u,y:d,h:c,w:l,excavation:m,opacity:f,crossOrigin:p}}function uG(t,e){return e!=null?Math.max(Math.floor(e),0):t?oG:aG}function b2({value:t,level:e,minVersion:r,includeMargin:n,marginSize:s,imageSettings:i,size:a,boostLevel:l}){let c=J.useMemo(()=>{const w=(Array.isArray(t)?t:[t]).reduce((y,b)=>(y.push(...yl.QrSegment.makeSegments(b)),y),[]);return yl.QrCode.encodeSegments(w,iG[e],r,void 0,void 0,l)},[t,e,r,l]);const{cells:u,margin:d,numCells:f,calculatedImageSettings:m}=J.useMemo(()=>{let p=c.getModules();const w=uG(n,s),y=p.length+w*2,b=cG(p,a,w,i);return{cells:p,margin:w,numCells:y,calculatedImageSettings:b}},[c,a,i,n,s]);return{qrcode:c,margin:d,cells:u,numCells:f,calculatedImageSettings:m}}var dG=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),hG=J.forwardRef(function(e,r){const n=e,{value:s,size:i=f2,level:a=m2,bgColor:l=p2,fgColor:c=g2,includeMargin:u=y2,minVersion:d=v2,boostLevel:f,marginSize:m,imageSettings:p}=n,y=fv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:b}=y,N=fv(y,["style"]),x=p==null?void 0:p.src,E=J.useRef(null),R=J.useRef(null),I=J.useCallback(B=>{E.current=B,typeof r=="function"?r(B):r&&(r.current=B)},[r]),[V,j]=J.useState(!1),{margin:T,cells:S,numCells:k,calculatedImageSettings:L}=b2({value:s,level:a,minVersion:d,boostLevel:f,includeMargin:u,marginSize:m,imageSettings:p,size:i});J.useEffect(()=>{if(E.current!=null){const B=E.current,z=B.getContext("2d");if(!z)return;let Y=S;const ee=R.current,U=L!=null&&ee!==null&&ee.complete&&ee.naturalHeight!==0&&ee.naturalWidth!==0;U&&L.excavation!=null&&(Y=w2(S,L.excavation));const H=window.devicePixelRatio||1;B.height=B.width=i*H;const ie=i/k*H;z.scale(ie,ie),z.fillStyle=l,z.fillRect(0,0,k,k),z.fillStyle=c,dG?z.fill(new Path2D(x2(Y,T))):S.forEach(function(ne,le){ne.forEach(function(he,_e){he&&z.fillRect(_e+T,le+T,1,1)})}),L&&(z.globalAlpha=L.opacity),U&&z.drawImage(ee,L.x+T,L.y+T,L.w,L.h)}}),J.useEffect(()=>{j(!1)},[x]);const D=hv({height:i,width:i},b);let P=null;return x!=null&&(P=J.createElement("img",{src:x,key:x,style:{display:"none"},onLoad:()=>{j(!0)},ref:R,crossOrigin:L==null?void 0:L.crossOrigin})),J.createElement(J.Fragment,null,J.createElement("canvas",hv({style:D,height:i,width:i,ref:I,role:"img"},N)),P)});hG.displayName="QRCodeCanvas";var E2=J.forwardRef(function(e,r){const n=e,{value:s,size:i=f2,level:a=m2,bgColor:l=p2,fgColor:c=g2,includeMargin:u=y2,minVersion:d=v2,boostLevel:f,title:m,marginSize:p,imageSettings:w}=n,y=fv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:b,cells:N,numCells:x,calculatedImageSettings:E}=b2({value:s,level:a,minVersion:d,boostLevel:f,includeMargin:u,marginSize:p,imageSettings:w,size:i});let R=N,I=null;w!=null&&E!=null&&(E.excavation!=null&&(R=w2(N,E.excavation)),I=J.createElement("image",{href:w.src,height:E.h,width:E.w,x:E.x+b,y:E.y+b,preserveAspectRatio:"none",opacity:E.opacity,crossOrigin:E.crossOrigin}));const V=x2(R,b);return J.createElement("svg",hv({height:i,width:i,viewBox:`0 0 ${x} ${x}`,ref:r,role:"img"},y),!!m&&J.createElement("title",null,m),J.createElement("path",{fill:l,d:`M0,0 h${x}v${x}H0z`,shapeRendering:"crispEdges"}),J.createElement("path",{fill:c,d:V,shapeRendering:"crispEdges"}),I)});E2.displayName="QRCodeSVG";const C2=({qrData:t,isOpen:e,onClose:r})=>{if(!e)return null;const n=JSON.stringify(t);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-white flex-1 text-center truncate",children:t.offerName}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors ml-4",children:o.jsx(hs,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-6 flex justify-center",children:o.jsx("div",{className:"p-4 bg-white rounded-lg",children:o.jsx(E2,{value:n,size:200,level:"M",includeMargin:!0})})})]})})},fG=({user:t,offers:e})=>{var D,P;const[r,n]=g.useState(!1),[s,i]=g.useState(null),[a,l]=g.useState({inProgress:!0,completed:!0}),[c,u]=g.useState(!1),[d,f]=g.useState(!1),m=t.completedRewards||[],p=m.filter(B=>{var z,Y;return((z=B.scanHistory)==null?void 0:z.length)<((Y=B.offerSnapshot)==null?void 0:Y.stampRequirement)}),w=m.filter(B=>{var z,Y;return((z=B.scanHistory)==null?void 0:z.length)>=((Y=B.offerSnapshot)==null?void 0:Y.stampRequirement)}),y=w.filter(B=>!B.claimedAt),b=w.filter(B=>!!B.claimedAt),N=(B,z)=>{const Y=B.createdAt.toDate().getTime();return z.createdAt.toDate().getTime()-Y},x=[...p].sort(N),E=[...y].sort(N),R=[...b].sort(N),I=3,V=c?x:x.slice(0,I),j=c?E:E.slice(0,I),T=d?R:R.slice(0,I),S=B=>{i(B),n(!0)},k=()=>{n(!1),i(null)},L=B=>{l(z=>({...z,[B]:!z[B]}))};return o.jsxs("div",{className:"space-y-6",children:[p.length>0&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 hover:bg-blue-900/30 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>L("inProgress"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(zr,{className:"w-5 h-5 text-blue-400 mr-2 animate-pulse"}),o.jsxs("h3",{className:"text-lg font-semibold text-blue-300",children:["Rewards in Progress (",p.length,")"]})]}),a.inProgress?o.jsx(ym,{className:"w-5 h-5 text-blue-400"}):o.jsx(Qu,{className:"w-5 h-5 text-blue-400"})]}),a.inProgress&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-4",children:V.map(B=>{var H,ie,ne,le;const z=((H=B.scanHistory)==null?void 0:H.length)||0,Y=((ie=B.offerSnapshot)==null?void 0:ie.stampRequirement)||0,ee=Math.min(z/Y*100,100),U=Math.max(0,Y-z);return o.jsxs("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-4 hover:bg-blue-900/20 hover:border-blue-500/30 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-blue-200 transition-colors duration-200",children:((ne=B.offerSnapshot)==null?void 0:ne.offerName)||"Loyalty Reward"}),o.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((le=B.offerSnapshot)==null?void 0:le.description)||"Collect stamps to earn this reward"}),o.jsx("p",{className:"text-blue-300 text-xs font-medium",children:B.rewardDescription})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm text-white font-medium",children:[z," / ",Y]}),o.jsx("div",{className:"text-xs text-gray-400",children:"stamps collected"})]})]}),o.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3 overflow-hidden",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full transition-all duration-1000 ease-out shadow-sm",style:{width:`${ee}%`}})}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-gray-400",children:U>0?`${U} more stamps needed`:"🎉 Ready to redeem!"}),o.jsxs("span",{className:"text-blue-300 font-medium",children:["Started"," ",B.createdAt.toDate().toLocaleDateString()]})]})]},B.rewardId)})}),p.length>I&&o.jsx("div",{className:"text-center pt-4",children:o.jsx(Te,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${p.length} In-Progress Rewards`})})]})]}),(y.length>0||b.length>0)&&o.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 hover:bg-green-900/30 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-green-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>L("completed"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(_y,{className:"w-5 h-5 text-green-400 mr-2 animate-pulse"}),o.jsxs("h3",{className:"text-lg font-semibold text-green-300",children:["Completed Rewards (",y.length+b.length,")"]})]}),a.completed?o.jsx(ym,{className:"w-5 h-5 text-green-400"}):o.jsx(Qu,{className:"w-5 h-5 text-green-400"})]}),a.completed&&o.jsxs(o.Fragment,{children:[y.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h4",{className:"text-md font-medium text-green-200 mb-3 flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Ready to Redeem (",y.length,")"]}),o.jsx("div",{className:"space-y-4",children:j.map(B=>{var Y,ee,U;const z=!!B.claimedAt;return o.jsxs("div",{className:`border rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group ${z?"bg-gray-800/30 border-gray-600/30":"bg-green-900/10 border-green-600/20 hover:bg-green-900/20 hover:border-green-500/30"}`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-green-200 transition-colors duration-200",children:((Y=B.offerSnapshot)==null?void 0:Y.offerName)||"Loyalty Reward"}),o.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((ee=B.offerSnapshot)==null?void 0:ee.description)||"Reward description"}),o.jsx("p",{className:"text-green-300 text-xs font-medium",children:B.rewardDescription})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${z?"bg-gray-700 text-gray-300":"bg-green-700 text-green-300 animate-pulse"}`,children:z?"REDEEMED":"AVAILABLE"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-400",children:["Earned"," ",B.createdAt.toDate().toLocaleDateString()]}),z&&o.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(U=B.claimedAt)==null?void 0:U.toDate().toLocaleDateString()]})]}),!z&&o.jsx("div",{className:"mt-3",children:o.jsxs(Te,{onClick:()=>S(B),className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-medium py-2 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-green-500/25",children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})})]},B.rewardId)})})]}),b.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-md font-medium text-gray-300 mb-3 flex items-center",children:[o.jsx(_y,{className:"w-4 h-4 mr-2 text-gray-400"}),"Previously Redeemed (",b.length,")"]}),o.jsx("div",{className:"space-y-4",children:T.map(B=>{var z,Y,ee;return o.jsxs("div",{className:"bg-gray-800/30 border border-gray-600/30 rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-gray-200 transition-colors duration-200",children:((z=B.offerSnapshot)==null?void 0:z.offerName)||"Loyalty Reward"}),o.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((Y=B.offerSnapshot)==null?void 0:Y.description)||"Reward description"}),o.jsx("p",{className:"text-gray-400 text-xs font-medium",children:B.rewardDescription})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:"text-xs px-2 py-1 rounded-full font-medium bg-gray-700 text-gray-300",children:"REDEEMED"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-400",children:["Earned"," ",B.createdAt.toDate().toLocaleDateString()]}),o.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(ee=B.claimedAt)==null?void 0:ee.toDate().toLocaleDateString()]})]})]},B.rewardId)})})]}),(y.length>I||b.length>I)&&o.jsx("div",{className:"text-center pt-4",children:o.jsx(Te,{onClick:()=>f(!d),variant:"outline",size:"sm",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-colors duration-200",children:d?"Show Less":`Show All ${y.length+b.length} Completed Rewards`})})]})]}),m.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-xl p-8 hover:bg-gray-800/40 transition-all duration-300",children:[o.jsx(st,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No Rewards Yet"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Start collecting stamps from the Offers tab to earn your first reward!"})]})}),r&&s&&o.jsx(C2,{qrData:{userId:t.id,userEmail:t.email,userName:t.name,offerId:((D=s.offerSnapshot)==null?void 0:D.offerId)||"",offerName:((P=s.offerSnapshot)==null?void 0:P.offerName)||"Reward Redemption",timestamp:new Date().toISOString(),rewardId:s.rewardId,action:"redeem_reward"},isOpen:r,onClose:k})]})},oN=[{key:"profile",label:"Edit Profile",route:"profile",colorClass:"border-cyan-500 text-cyan-400 hover:bg-cyan-500 hover:text-white",roles:["customer","admin","super_admin"],icon:zs},{key:"scan",label:"Scan",route:"/scan",colorClass:"border-green-500 text-green-400 hover:bg-green-500 hover:text-white",roles:["admin","super_admin"],icon:L3},{key:"settings",label:"Settings",route:"/settings",colorClass:"border-blue-500 text-blue-400 hover:bg-blue-500 hover:text-white",roles:["super_admin"],icon:mp},{key:"users",label:"Users",route:"/users",colorClass:"border-purple-500 text-purple-400 hover:bg-purple-500 hover:text-white",roles:["super_admin"],icon:Cn},{key:"logout",label:"Logout",route:"logout",colorClass:"border-red-500 text-red-400 hover:bg-red-500 hover:text-white",roles:["customer","admin","super_admin"],icon:SA}];var mG=g.createContext(void 0);function Kp(t){const e=g.useContext(mG);return t||e||"ltr"}var x0=0;function N2(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??aN()),document.body.insertAdjacentElement("beforeend",t[1]??aN()),x0++,()=>{x0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),x0--}},[])}function aN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var w0="focusScope.autoFocusOnMount",b0="focusScope.autoFocusOnUnmount",lN={bubbles:!1,cancelable:!0},pG="FocusScope",lb=g.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=g.useState(null),u=Nr(s),d=Nr(i),f=g.useRef(null),m=ut(e,y=>c(y)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(n){let y=function(E){if(p.paused||!l)return;const R=E.target;l.contains(R)?f.current=R:Ni(f.current,{select:!0})},b=function(E){if(p.paused||!l)return;const R=E.relatedTarget;R!==null&&(l.contains(R)||Ni(f.current,{select:!0}))},N=function(E){if(document.activeElement===document.body)for(const I of E)I.removedNodes.length>0&&Ni(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const x=new MutationObserver(N);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),x.disconnect()}}},[n,l,p.paused]),g.useEffect(()=>{if(l){uN.add(p);const y=document.activeElement;if(!l.contains(y)){const N=new CustomEvent(w0,lN);l.addEventListener(w0,u),l.dispatchEvent(N),N.defaultPrevented||(gG(bG(T2(l)),{select:!0}),document.activeElement===y&&Ni(l))}return()=>{l.removeEventListener(w0,u),setTimeout(()=>{const N=new CustomEvent(b0,lN);l.addEventListener(b0,d),l.dispatchEvent(N),N.defaultPrevented||Ni(y??document.body,{select:!0}),l.removeEventListener(b0,d),uN.remove(p)},0)}}},[l,u,d,p]);const w=g.useCallback(y=>{if(!r&&!n||p.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,N=document.activeElement;if(b&&N){const x=y.currentTarget,[E,R]=yG(x);E&&R?!y.shiftKey&&N===R?(y.preventDefault(),r&&Ni(E,{select:!0})):y.shiftKey&&N===E&&(y.preventDefault(),r&&Ni(R,{select:!0})):N===x&&y.preventDefault()}},[r,n,p.paused]);return o.jsx($e.div,{tabIndex:-1,...a,ref:m,onKeyDown:w})});lb.displayName=pG;function gG(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ni(n,{select:e}),document.activeElement!==r)return}function yG(t){const e=T2(t),r=cN(e,t),n=cN(e.reverse(),t);return[r,n]}function T2(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function cN(t,e){for(const r of t)if(!vG(r,{upTo:e}))return r}function vG(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function xG(t){return t instanceof HTMLInputElement&&"select"in t}function Ni(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&xG(t)&&e&&t.select()}}var uN=wG();function wG(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=dN(t,e),t.unshift(e)},remove(e){var r;t=dN(t,e),(r=t[0])==null||r.resume()}}}function dN(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function bG(t){return t.filter(e=>e.tagName!=="A")}function EG(t,e=[]){let r=[];function n(i,a){const l=g.createContext(a),c=r.length;r=[...r,a];function u(f){const{scope:m,children:p,...w}=f,y=(m==null?void 0:m[t][c])||l,b=g.useMemo(()=>w,Object.values(w));return o.jsx(y.Provider,{value:b,children:p})}function d(f,m){const p=(m==null?void 0:m[t][c])||l,w=g.useContext(p);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const s=()=>{const i=r.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,CG(s,...e)]}function CG(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var E0="rovingFocusGroup.onEntryFocus",NG={bubbles:!1,cancelable:!0},Jp="RovingFocusGroup",[mv,_2,TG]=Ed(Jp),[_G,Xp]=EG(Jp,[TG]),[AG,SG]=_G(Jp),A2=g.forwardRef((t,e)=>o.jsx(mv.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(mv.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(RG,{...t,ref:e})})}));A2.displayName=Jp;var RG=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,m=g.useRef(null),p=ut(e,m),w=Kp(i),[y=null,b]=Wu({prop:a,defaultProp:l,onChange:c}),[N,x]=g.useState(!1),E=Nr(u),R=_2(r),I=g.useRef(!1),[V,j]=g.useState(0);return g.useEffect(()=>{const T=m.current;if(T)return T.addEventListener(E0,E),()=>T.removeEventListener(E0,E)},[E]),o.jsx(AG,{scope:r,orientation:n,dir:w,loop:s,currentTabStopId:y,onItemFocus:g.useCallback(T=>b(T),[b]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>j(T=>T+1),[]),onFocusableItemRemove:g.useCallback(()=>j(T=>T-1),[]),children:o.jsx($e.div,{tabIndex:N||V===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...t.style},onMouseDown:xe(t.onMouseDown,()=>{I.current=!0}),onFocus:xe(t.onFocus,T=>{const S=!I.current;if(T.target===T.currentTarget&&S&&!N){const k=new CustomEvent(E0,NG);if(T.currentTarget.dispatchEvent(k),!k.defaultPrevented){const L=R().filter(Y=>Y.focusable),D=L.find(Y=>Y.active),P=L.find(Y=>Y.id===y),z=[D,P,...L].filter(Boolean).map(Y=>Y.ref.current);I2(z,d)}}I.current=!1}),onBlur:xe(t.onBlur,()=>x(!1))})})}),S2="RovingFocusGroupItem",R2=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...a}=t,l=sa(),c=i||l,u=SG(S2,r),d=u.currentTabStopId===c,f=_2(r),{onFocusableItemAdd:m,onFocusableItemRemove:p}=u;return g.useEffect(()=>{if(n)return m(),()=>p()},[n,m,p]),o.jsx(mv.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:o.jsx($e.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:xe(t.onMouseDown,w=>{n?u.onItemFocus(c):w.preventDefault()}),onFocus:xe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:xe(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const y=PG(w,u.orientation,u.dir);if(y!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let N=f().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")N.reverse();else if(y==="prev"||y==="next"){y==="prev"&&N.reverse();const x=N.indexOf(w.currentTarget);N=u.loop?kG(N,x+1):N.slice(x+1)}setTimeout(()=>I2(N))}})})})});R2.displayName=S2;var IG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function jG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function PG(t,e,r){const n=jG(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return IG[n]}function I2(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function kG(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var j2=A2,P2=R2,MG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ja=new WeakMap,of=new WeakMap,af={},C0=0,k2=function(t){return t&&(t.host||k2(t.parentNode))},DG=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=k2(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},OG=function(t,e,r,n){var s=DG(e,Array.isArray(t)?t:[t]);af[r]||(af[r]=new WeakMap);var i=af[r],a=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(n),w=p!==null&&p!=="false",y=(Ja.get(m)||0)+1,b=(i.get(m)||0)+1;Ja.set(m,y),i.set(m,b),a.push(m),y===1&&w&&of.set(m,!0),b===1&&m.setAttribute(r,"true"),w||m.setAttribute(n,"true")}catch(N){console.error("aria-hidden: cannot operate on ",m,N)}})};return d(e),l.clear(),C0++,function(){a.forEach(function(f){var m=Ja.get(f)-1,p=i.get(f)-1;Ja.set(f,m),i.set(f,p),m||(of.has(f)||f.removeAttribute(n),of.delete(f)),p||f.removeAttribute(r)}),C0--,C0||(Ja=new WeakMap,Ja=new WeakMap,of=new WeakMap,af={})}},M2=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=MG(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),OG(n,s,r,"aria-hidden")):function(){return null}},Ff="right-scroll-bar-position",Vf="width-before-scroll-bar",LG="with-scroll-bars-hidden",FG="--removed-body-scroll-bar-size";function N0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function VG(t,e){var r=g.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var BG=typeof window<"u"?g.useLayoutEffect:g.useEffect,hN=new WeakMap;function UG(t,e){var r=VG(null,function(n){return t.forEach(function(s){return N0(s,n)})});return BG(function(){var n=hN.get(r);if(n){var s=new Set(n),i=new Set(t),a=r.current;s.forEach(function(l){i.has(l)||N0(l,null)}),i.forEach(function(l){s.has(l)||N0(l,a)})}hN.set(r,t)},[t]),r}function qG(t){return t}function GG(t,e){e===void 0&&(e=qG);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var a=e(i,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(n=!0;r.length;){var a=r;r=[],a.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(i),a=r}var c=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),r}}}};return s}function $G(t){t===void 0&&(t={});var e=GG(null);return e.options=ls({async:!0,ssr:!1},t),e}var D2=function(t){var e=t.sideCar,r=Dd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return g.createElement(n,ls({},r))};D2.isSideCarExport=!0;function zG(t,e){return t.useMedium(e),D2}var O2=$G(),T0=function(){},Zp=g.forwardRef(function(t,e){var r=g.useRef(null),n=g.useState({onScrollCapture:T0,onWheelCapture:T0,onTouchMoveCapture:T0}),s=n[0],i=n[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,m=t.sideCar,p=t.noIsolation,w=t.inert,y=t.allowPinchZoom,b=t.as,N=b===void 0?"div":b,x=t.gapMode,E=Dd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=m,I=UG([r,e]),V=ls(ls({},E),s);return g.createElement(g.Fragment,null,d&&g.createElement(R,{sideCar:O2,removeScrollBar:u,shards:f,noIsolation:p,inert:w,setCallbacks:i,allowPinchZoom:!!y,lockRef:r,gapMode:x}),a?g.cloneElement(g.Children.only(l),ls(ls({},V),{ref:I})):g.createElement(N,ls({},V,{className:c,ref:I}),l))});Zp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zp.classNames={fullWidth:Vf,zeroRight:Ff};var HG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WG(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=HG();return e&&t.setAttribute("nonce",e),t}function QG(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function YG(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var KG=function(){var t=0,e=null;return{add:function(r){t==0&&(e=WG())&&(QG(e,r),YG(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},JG=function(){var t=KG();return function(e,r){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},L2=function(){var t=JG(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},XG={left:0,top:0,right:0,gap:0},_0=function(t){return parseInt(t||"",10)||0},ZG=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[_0(r),_0(n),_0(s)]},e$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return XG;var e=ZG(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},t$=L2(),jl="data-scroll-locked",r$=function(t,e,r,n){var s=t.left,i=t.top,a=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(LG,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(jl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ff,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Vf,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ff," .").concat(Ff,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Vf," .").concat(Vf,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(jl,`] {
    `).concat(FG,": ").concat(l,`px;
  }
`)},fN=function(){var t=parseInt(document.body.getAttribute(jl)||"0",10);return isFinite(t)?t:0},n$=function(){g.useEffect(function(){return document.body.setAttribute(jl,(fN()+1).toString()),function(){var t=fN()-1;t<=0?document.body.removeAttribute(jl):document.body.setAttribute(jl,t.toString())}},[])},s$=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;n$();var i=g.useMemo(function(){return e$(s)},[s]);return g.createElement(t$,{styles:r$(i,!e,s,r?"":"!important")})},pv=!1;if(typeof window<"u")try{var lf=Object.defineProperty({},"passive",{get:function(){return pv=!0,!0}});window.addEventListener("test",lf,lf),window.removeEventListener("test",lf,lf)}catch{pv=!1}var Xa=pv?{passive:!1}:!1,i$=function(t){return t.tagName==="TEXTAREA"},F2=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!i$(t)&&r[e]==="visible")},o$=function(t){return F2(t,"overflowY")},a$=function(t){return F2(t,"overflowX")},mN=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=V2(t,n);if(s){var i=B2(t,n),a=i[1],l=i[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},l$=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},c$=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},V2=function(t,e){return t==="v"?o$(e):a$(e)},B2=function(t,e){return t==="v"?l$(e):c$(e)},u$=function(t,e){return t==="h"&&e==="rtl"?-1:1},d$=function(t,e,r,n,s){var i=u$(t,window.getComputedStyle(e).direction),a=i*n,l=r.target,c=e.contains(l),u=!1,d=a>0,f=0,m=0;do{var p=B2(t,l),w=p[0],y=p[1],b=p[2],N=y-b-i*w;(w||N)&&V2(t,l)&&(f+=N,m+=w),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(f)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},cf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},pN=function(t){return[t.deltaX,t.deltaY]},gN=function(t){return t&&"current"in t?t.current:t},h$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},f$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},m$=0,Za=[];function p$(t){var e=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),s=g.useState(m$++)[0],i=g.useState(L2)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=uV([t.lockRef.current],(t.shards||[]).map(gN),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!a.current.allowPinchZoom;var N=cf(y),x=r.current,E="deltaX"in y?y.deltaX:x[0]-N[0],R="deltaY"in y?y.deltaY:x[1]-N[1],I,V=y.target,j=Math.abs(E)>Math.abs(R)?"h":"v";if("touches"in y&&j==="h"&&V.type==="range")return!1;var T=mN(j,V);if(!T)return!0;if(T?I=j:(I=j==="v"?"h":"v",T=mN(j,V)),!T)return!1;if(!n.current&&"changedTouches"in y&&(E||R)&&(n.current=I),!I)return!0;var S=n.current||I;return d$(S,b,y,S==="h"?E:R,!0)},[]),c=g.useCallback(function(y){var b=y;if(!(!Za.length||Za[Za.length-1]!==i)){var N="deltaY"in b?pN(b):cf(b),x=e.current.filter(function(I){return I.name===b.type&&(I.target===b.target||b.target===I.shadowParent)&&h$(I.delta,N)})[0];if(x&&x.should){b.cancelable&&b.preventDefault();return}if(!x){var E=(a.current.shards||[]).map(gN).filter(Boolean).filter(function(I){return I.contains(b.target)}),R=E.length>0?l(b,E[0]):!a.current.noIsolation;R&&b.cancelable&&b.preventDefault()}}},[]),u=g.useCallback(function(y,b,N,x){var E={name:y,delta:b,target:N,should:x,shadowParent:g$(N)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(R){return R!==E})},1)},[]),d=g.useCallback(function(y){r.current=cf(y),n.current=void 0},[]),f=g.useCallback(function(y){u(y.type,pN(y),y.target,l(y,t.lockRef.current))},[]),m=g.useCallback(function(y){u(y.type,cf(y),y.target,l(y,t.lockRef.current))},[]);g.useEffect(function(){return Za.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Xa),document.addEventListener("touchmove",c,Xa),document.addEventListener("touchstart",d,Xa),function(){Za=Za.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Xa),document.removeEventListener("touchmove",c,Xa),document.removeEventListener("touchstart",d,Xa)}},[]);var p=t.removeScrollBar,w=t.inert;return g.createElement(g.Fragment,null,w?g.createElement(i,{styles:f$(s)}):null,p?g.createElement(s$,{gapMode:t.gapMode}):null)}function g$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const y$=zG(O2,p$);var cb=g.forwardRef(function(t,e){return g.createElement(Zp,ls({},t,{ref:e,sideCar:y$}))});cb.classNames=Zp.classNames;var gv=["Enter"," "],v$=["ArrowDown","PageUp","Home"],U2=["ArrowUp","PageDown","End"],x$=[...v$,...U2],w$={ltr:[...gv,"ArrowRight"],rtl:[...gv,"ArrowLeft"]},b$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ud="Menu",[fd,E$,C$]=Ed(Ud),[Ia,N$]=Cd(Ud,[C$,Ec,Xp]),eg=Ec(),q2=Xp(),[T$,ja]=Ia(Ud),[_$,qd]=Ia(Ud),G2=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:a=!0}=t,l=eg(e),[c,u]=g.useState(null),d=g.useRef(!1),f=Nr(i),m=Kp(s);return g.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),o.jsx(PI,{...l,children:o.jsx(T$,{scope:e,open:r,onOpenChange:f,content:c,onContentChange:u,children:o.jsx(_$,{scope:e,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:a,children:n})})})};G2.displayName=Ud;var A$="MenuAnchor",ub=g.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=eg(r);return o.jsx(Kw,{...s,...n,ref:e})});ub.displayName=A$;var db="MenuPortal",[S$,$2]=Ia(db,{forceMount:void 0}),z2=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=ja(db,e);return o.jsx(S$,{scope:e,forceMount:r,children:o.jsx(Na,{present:r||i.open,children:o.jsx(dp,{asChild:!0,container:s,children:n})})})};z2.displayName=db;var Nn="MenuContent",[R$,hb]=Ia(Nn),H2=g.forwardRef((t,e)=>{const r=$2(Nn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=ja(Nn,t.__scopeMenu),a=qd(Nn,t.__scopeMenu);return o.jsx(fd.Provider,{scope:t.__scopeMenu,children:o.jsx(Na,{present:n||i.open,children:o.jsx(fd.Slot,{scope:t.__scopeMenu,children:a.modal?o.jsx(I$,{...s,ref:e}):o.jsx(j$,{...s,ref:e})})})})}),I$=g.forwardRef((t,e)=>{const r=ja(Nn,t.__scopeMenu),n=g.useRef(null),s=ut(e,n);return g.useEffect(()=>{const i=n.current;if(i)return M2(i)},[]),o.jsx(fb,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:xe(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),j$=g.forwardRef((t,e)=>{const r=ja(Nn,t.__scopeMenu);return o.jsx(fb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),fb=g.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:p,disableOutsideScroll:w,...y}=t,b=ja(Nn,r),N=qd(Nn,r),x=eg(r),E=q2(r),R=E$(r),[I,V]=g.useState(null),j=g.useRef(null),T=ut(e,j,b.onContentChange),S=g.useRef(0),k=g.useRef(""),L=g.useRef(0),D=g.useRef(null),P=g.useRef("right"),B=g.useRef(0),z=w?cb:g.Fragment,Y=w?{as:ua,allowPinchZoom:!0}:void 0,ee=H=>{var Z,de;const ie=k.current+H,ne=R().filter(G=>!G.disabled),le=document.activeElement,he=(Z=ne.find(G=>G.ref.current===le))==null?void 0:Z.textValue,_e=ne.map(G=>G.textValue),Me=G$(_e,ie,he),ue=(de=ne.find(G=>G.textValue===Me))==null?void 0:de.ref.current;(function G(me){k.current=me,window.clearTimeout(S.current),me!==""&&(S.current=window.setTimeout(()=>G(""),1e3))})(ie),ue&&setTimeout(()=>ue.focus())};g.useEffect(()=>()=>window.clearTimeout(S.current),[]),N2();const U=g.useCallback(H=>{var ne,le;return P.current===((ne=D.current)==null?void 0:ne.side)&&z$(H,(le=D.current)==null?void 0:le.area)},[]);return o.jsx(R$,{scope:r,searchRef:k,onItemEnter:g.useCallback(H=>{U(H)&&H.preventDefault()},[U]),onItemLeave:g.useCallback(H=>{var ie;U(H)||((ie=j.current)==null||ie.focus(),V(null))},[U]),onTriggerLeave:g.useCallback(H=>{U(H)&&H.preventDefault()},[U]),pointerGraceTimerRef:L,onPointerGraceIntentChange:g.useCallback(H=>{D.current=H},[]),children:o.jsx(z,{...Y,children:o.jsx(lb,{asChild:!0,trapped:s,onMountAutoFocus:xe(i,H=>{var ie;H.preventDefault(),(ie=j.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:p,children:o.jsx(j2,{asChild:!0,...E,dir:N.dir,orientation:"vertical",loop:n,currentTabStopId:I,onCurrentTabStopIdChange:V,onEntryFocus:xe(c,H=>{N.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Jw,{role:"menu","aria-orientation":"vertical","data-state":lj(b.open),"data-radix-menu-content":"",dir:N.dir,...x,...y,ref:T,style:{outline:"none",...y.style},onKeyDown:xe(y.onKeyDown,H=>{const ne=H.target.closest("[data-radix-menu-content]")===H.currentTarget,le=H.ctrlKey||H.altKey||H.metaKey,he=H.key.length===1;ne&&(H.key==="Tab"&&H.preventDefault(),!le&&he&&ee(H.key));const _e=j.current;if(H.target!==_e||!x$.includes(H.key))return;H.preventDefault();const ue=R().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);U2.includes(H.key)&&ue.reverse(),U$(ue)}),onBlur:xe(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(S.current),k.current="")}),onPointerMove:xe(t.onPointerMove,md(H=>{const ie=H.target,ne=B.current!==H.clientX;if(H.currentTarget.contains(ie)&&ne){const le=H.clientX>B.current?"right":"left";P.current=le,B.current=H.clientX}}))})})})})})})});H2.displayName=Nn;var P$="MenuGroup",mb=g.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx($e.div,{role:"group",...n,ref:e})});mb.displayName=P$;var k$="MenuLabel",W2=g.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx($e.div,{...n,ref:e})});W2.displayName=k$;var zm="MenuItem",yN="menu.itemSelect",tg=g.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=g.useRef(null),a=qd(zm,t.__scopeMenu),l=hb(zm,t.__scopeMenu),c=ut(e,i),u=g.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const m=new CustomEvent(yN,{bubbles:!0,cancelable:!0});f.addEventListener(yN,p=>n==null?void 0:n(p),{once:!0}),Ix(f,m),m.defaultPrevented?u.current=!1:a.onClose()}};return o.jsx(Q2,{...s,ref:c,disabled:r,onClick:xe(t.onClick,d),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:xe(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:xe(t.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||gv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});tg.displayName=zm;var Q2=g.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,a=hb(zm,r),l=q2(r),c=g.useRef(null),u=ut(e,c),[d,f]=g.useState(!1),[m,p]=g.useState("");return g.useEffect(()=>{const w=c.current;w&&p((w.textContent??"").trim())},[i.children]),o.jsx(fd.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:o.jsx(P2,{asChild:!0,...l,focusable:!n,children:o.jsx($e.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:xe(t.onPointerMove,md(w=>{n?a.onItemLeave(w):(a.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xe(t.onPointerLeave,md(w=>a.onItemLeave(w))),onFocus:xe(t.onFocus,()=>f(!0)),onBlur:xe(t.onBlur,()=>f(!1))})})})}),M$="MenuCheckboxItem",Y2=g.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return o.jsx(ej,{scope:t.__scopeMenu,checked:r,children:o.jsx(tg,{role:"menuitemcheckbox","aria-checked":Hm(r)?"mixed":r,...s,ref:e,"data-state":gb(r),onSelect:xe(s.onSelect,()=>n==null?void 0:n(Hm(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Y2.displayName=M$;var K2="MenuRadioGroup",[D$,O$]=Ia(K2,{value:void 0,onValueChange:()=>{}}),J2=g.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=Nr(n);return o.jsx(D$,{scope:t.__scopeMenu,value:r,onValueChange:i,children:o.jsx(mb,{...s,ref:e})})});J2.displayName=K2;var X2="MenuRadioItem",Z2=g.forwardRef((t,e)=>{const{value:r,...n}=t,s=O$(X2,t.__scopeMenu),i=r===s.value;return o.jsx(ej,{scope:t.__scopeMenu,checked:i,children:o.jsx(tg,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":gb(i),onSelect:xe(n.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,r)},{checkForDefaultPrevented:!1})})})});Z2.displayName=X2;var pb="MenuItemIndicator",[ej,L$]=Ia(pb,{checked:!1}),tj=g.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=L$(pb,r);return o.jsx(Na,{present:n||Hm(i.checked)||i.checked===!0,children:o.jsx($e.span,{...s,ref:e,"data-state":gb(i.checked)})})});tj.displayName=pb;var F$="MenuSeparator",rj=g.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx($e.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});rj.displayName=F$;var V$="MenuArrow",nj=g.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=eg(r);return o.jsx(Xw,{...s,...n,ref:e})});nj.displayName=V$;var B$="MenuSub",[tQ,sj]=Ia(B$),lu="MenuSubTrigger",ij=g.forwardRef((t,e)=>{const r=ja(lu,t.__scopeMenu),n=qd(lu,t.__scopeMenu),s=sj(lu,t.__scopeMenu),i=hb(lu,t.__scopeMenu),a=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=g.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(ub,{asChild:!0,...u,children:o.jsx(Q2,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":lj(r.open),...t,ref:Rx(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:xe(t.onPointerMove,md(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!r.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:xe(t.onPointerLeave,md(f=>{var p,w;d();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const y=(w=r.content)==null?void 0:w.dataset.side,b=y==="right",N=b?-5:5,x=m[b?"left":"right"],E=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+N,y:f.clientY},{x,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:xe(t.onKeyDown,f=>{var p;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||w$[n.dir].includes(f.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),f.preventDefault())})})})});ij.displayName=lu;var oj="MenuSubContent",aj=g.forwardRef((t,e)=>{const r=$2(Nn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=ja(Nn,t.__scopeMenu),a=qd(Nn,t.__scopeMenu),l=sj(oj,t.__scopeMenu),c=g.useRef(null),u=ut(e,c);return o.jsx(fd.Provider,{scope:t.__scopeMenu,children:o.jsx(Na,{present:n||i.open,children:o.jsx(fd.Slot,{scope:t.__scopeMenu,children:o.jsx(fb,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:xe(t.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:xe(t.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:xe(t.onKeyDown,d=>{var p;const f=d.currentTarget.contains(d.target),m=b$[a.dir].includes(d.key);f&&m&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});aj.displayName=oj;function lj(t){return t?"open":"closed"}function Hm(t){return t==="indeterminate"}function gb(t){return Hm(t)?"indeterminate":t?"checked":"unchecked"}function U$(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function q$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function G$(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let a=q$(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function $$(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,d=e[a].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function z$(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return $$(r,e)}function md(t){return e=>e.pointerType==="mouse"?t(e):void 0}var H$=G2,W$=ub,Q$=z2,Y$=H2,K$=mb,J$=W2,X$=tg,Z$=Y2,ez=J2,tz=Z2,rz=tj,nz=rj,sz=nj,iz=ij,oz=aj,rg="Menubar",[yv,az,lz]=Ed(rg),[cj,rQ]=Cd(rg,[lz,Xp]),Vr=N$(),uj=Xp(),[cz,yb]=cj(rg),dj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,value:n,onValueChange:s,defaultValue:i,loop:a=!0,dir:l,...c}=t,u=Kp(l),d=uj(r),[f="",m]=Wu({prop:n,onChange:s,defaultProp:i}),[p,w]=g.useState(null);return o.jsx(cz,{scope:r,value:f,onMenuOpen:g.useCallback(y=>{m(y),w(y)},[m]),onMenuClose:g.useCallback(()=>m(""),[m]),onMenuToggle:g.useCallback(y=>{m(b=>b?"":y),w(y)},[m]),dir:u,loop:a,children:o.jsx(yv.Provider,{scope:r,children:o.jsx(yv.Slot,{scope:r,children:o.jsx(j2,{asChild:!0,...d,orientation:"horizontal",loop:a,dir:u,currentTabStopId:p,onCurrentTabStopIdChange:w,children:o.jsx($e.div,{role:"menubar",...c,ref:e})})})})})});dj.displayName=rg;var vb="MenubarMenu",[uz,hj]=cj(vb),fj=t=>{const{__scopeMenubar:e,value:r,...n}=t,s=sa(),i=r||s||"LEGACY_REACT_AUTO_VALUE",a=yb(vb,e),l=Vr(e),c=g.useRef(null),u=g.useRef(!1),d=a.value===i;return g.useEffect(()=>{d||(u.current=!1)},[d]),o.jsx(uz,{scope:e,value:i,triggerId:sa(),triggerRef:c,contentId:sa(),wasKeyboardTriggerOpenRef:u,children:o.jsx(H$,{...l,open:d,onOpenChange:f=>{f||a.onMenuClose()},modal:!1,dir:a.dir,...n})})};fj.displayName=vb;var vv="MenubarTrigger",mj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,disabled:n=!1,...s}=t,i=uj(r),a=Vr(r),l=yb(vv,r),c=hj(vv,r),u=g.useRef(null),d=ut(e,u,c.triggerRef),[f,m]=g.useState(!1),p=l.value===c.value;return o.jsx(yv.ItemSlot,{scope:r,value:c.value,disabled:n,children:o.jsx(P2,{asChild:!0,...i,focusable:!n,tabStopId:c.value,children:o.jsx(W$,{asChild:!0,...a,children:o.jsx($e.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":p,"aria-controls":p?c.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":p?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:d,onPointerDown:xe(t.onPointerDown,w=>{!n&&w.button===0&&w.ctrlKey===!1&&(l.onMenuOpen(c.value),p||w.preventDefault())}),onPointerEnter:xe(t.onPointerEnter,()=>{var y;!!l.value&&!p&&(l.onMenuOpen(c.value),(y=u.current)==null||y.focus())}),onKeyDown:xe(t.onKeyDown,w=>{n||(["Enter"," "].includes(w.key)&&l.onMenuToggle(c.value),w.key==="ArrowDown"&&l.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(w.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,w.preventDefault()))}),onFocus:xe(t.onFocus,()=>m(!0)),onBlur:xe(t.onBlur,()=>m(!1))})})})})});mj.displayName=vv;var dz="MenubarPortal",pj=t=>{const{__scopeMenubar:e,...r}=t,n=Vr(e);return o.jsx(Q$,{...n,...r})};pj.displayName=dz;var xv="MenubarContent",gj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,align:n="start",...s}=t,i=Vr(r),a=yb(xv,r),l=hj(xv,r),c=az(r),u=g.useRef(!1);return o.jsx(Y$,{id:l.contentId,"aria-labelledby":l.triggerId,"data-radix-menubar-content":"",...i,...s,ref:e,align:n,onCloseAutoFocus:xe(t.onCloseAutoFocus,d=>{var m;!!!a.value&&!u.current&&((m=l.triggerRef.current)==null||m.focus()),u.current=!1,d.preventDefault()}),onFocusOutside:xe(t.onFocusOutside,d=>{const f=d.target;c().some(p=>{var w;return(w=p.ref.current)==null?void 0:w.contains(f)})&&d.preventDefault()}),onInteractOutside:xe(t.onInteractOutside,()=>{u.current=!0}),onEntryFocus:d=>{l.wasKeyboardTriggerOpenRef.current||d.preventDefault()},onKeyDown:xe(t.onKeyDown,d=>{if(["ArrowRight","ArrowLeft"].includes(d.key)){const f=d.target,m=f.hasAttribute("data-radix-menubar-subtrigger"),p=f.closest("[data-radix-menubar-content]")!==d.currentTarget,y=(a.dir==="rtl"?"ArrowRight":"ArrowLeft")===d.key;if(!y&&m||p&&y)return;let x=c().filter(I=>!I.disabled).map(I=>I.value);y&&x.reverse();const E=x.indexOf(l.value);x=a.loop?_z(x,E+1):x.slice(E+1);const[R]=x;R&&a.onMenuOpen(R)}},{checkForDefaultPrevented:!1}),style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});gj.displayName=xv;var hz="MenubarGroup",fz=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(K$,{...s,...n,ref:e})});fz.displayName=hz;var mz="MenubarLabel",yj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(J$,{...s,...n,ref:e})});yj.displayName=mz;var pz="MenubarItem",vj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(X$,{...s,...n,ref:e})});vj.displayName=pz;var gz="MenubarCheckboxItem",xj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(Z$,{...s,...n,ref:e})});xj.displayName=gz;var yz="MenubarRadioGroup",vz=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(ez,{...s,...n,ref:e})});vz.displayName=yz;var xz="MenubarRadioItem",wj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(tz,{...s,...n,ref:e})});wj.displayName=xz;var wz="MenubarItemIndicator",bj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(rz,{...s,...n,ref:e})});bj.displayName=wz;var bz="MenubarSeparator",Ej=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(nz,{...s,...n,ref:e})});Ej.displayName=bz;var Ez="MenubarArrow",Cz=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(sz,{...s,...n,ref:e})});Cz.displayName=Ez;var Nz="MenubarSubTrigger",Cj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(iz,{"data-radix-menubar-subtrigger":"",...s,...n,ref:e})});Cj.displayName=Nz;var Tz="MenubarSubContent",Nj=g.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(oz,{...s,"data-radix-menubar-content":"",...n,ref:e,style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Nj.displayName=Tz;function _z(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Tj=dj,Az=fj,_j=mj,Sz=pj,Aj=gj,Sj=yj,Rj=vj,Ij=xj,jj=wj,Pj=bj,kj=Ej,Mj=Cj,Dj=Nj;const Rz=Az,Oj=g.forwardRef(({className:t,...e},r)=>o.jsx(Tj,{ref:r,className:ot("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",t),...e}));Oj.displayName=Tj.displayName;const Lj=g.forwardRef(({className:t,...e},r)=>o.jsx(_j,{ref:r,className:ot("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t),...e}));Lj.displayName=_j.displayName;const Iz=g.forwardRef(({className:t,inset:e,children:r,...n},s)=>o.jsxs(Mj,{ref:s,className:ot("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",t),...n,children:[r,o.jsx(_3,{className:"ml-auto h-4 w-4"})]}));Iz.displayName=Mj.displayName;const jz=g.forwardRef(({className:t,...e},r)=>o.jsx(Dj,{ref:r,className:ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));jz.displayName=Dj.displayName;const Fj=g.forwardRef(({className:t,align:e="start",alignOffset:r=-4,sideOffset:n=8,...s},i)=>o.jsx(Sz,{children:o.jsx(Aj,{ref:i,align:e,alignOffset:r,sideOffset:n,className:ot("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));Fj.displayName=Aj.displayName;const Vj=g.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(Rj,{ref:n,className:ot("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));Vj.displayName=Rj.displayName;const Pz=g.forwardRef(({className:t,children:e,checked:r,...n},s)=>o.jsxs(Ij,{ref:s,className:ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Pj,{children:o.jsx(_A,{className:"h-4 w-4"})})}),e]}));Pz.displayName=Ij.displayName;const kz=g.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(jj,{ref:n,className:ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Pj,{children:o.jsx(A3,{className:"h-2 w-2 fill-current"})})}),e]}));kz.displayName=jj.displayName;const Mz=g.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(Sj,{ref:n,className:ot("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));Mz.displayName=Sj.displayName;const Dz=g.forwardRef(({className:t,...e},r)=>o.jsx(kj,{ref:r,className:ot("-mx-1 my-1 h-px bg-muted",t),...e}));Dz.displayName=kj.displayName;const Oz=({user:t,handleLogout:e,navigate:r})=>{const[n,s]=g.useState(!1),[i,a]=g.useState({name:t.name,mobileNumber:t.mobileNumber||""});g.useEffect(()=>{n&&a({name:t.name,mobileNumber:t.mobileNumber||""})},[n,t.name,t.mobileNumber]);const l=()=>{s(!0)},c=()=>{console.log("Saving profile:",i),s(!1)},u=()=>{a({name:t.name,mobileNumber:t.mobileNumber||""}),s(!1)},d=f=>{if(f==="logout")e();else if(f==="profile")l();else{const m=oN.find(p=>p.key===f);m&&r(m.route)}};return o.jsxs(o.Fragment,{children:[o.jsx(Oj,{children:o.jsxs(Rz,{children:[o.jsx(Lj,{className:"bg-transparent text-black border border-white",children:"Menu"}),o.jsx(Fj,{children:oN.filter(f=>f.roles.includes(t.role)).map(f=>{const m=f.icon;return o.jsxs(Vj,{className:f.colorClass+" flex gap-2 items-center",onClick:()=>d(f.key),children:[o.jsx(m,{className:"w-4 h-4"}),f.label]},f.key)})})]})}),n&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 grid place-items-center p-4",children:o.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[o.jsx("div",{className:"p-6 border-b border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit Profile"}),o.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(hs,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),o.jsx(Se,{value:i.name,onChange:f=>a({...i,name:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter your name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-700/30 border border-gray-600 rounded-md",children:[o.jsx(Tf,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-300 text-sm",children:t.email})]}),o.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Email cannot be changed for security reasons"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),o.jsx(Se,{value:i.mobileNumber,onChange:f=>a({...i,mobileNumber:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter mobile number",type:"tel"})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(Te,{onClick:c,className:"flex-1 bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-700 hover:to-cyan-800",children:"Save Changes"}),o.jsx(Te,{onClick:u,variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"})]})]})]})})]})};function Dr({className:t,...e}){return o.jsx("div",{className:ot("animate-pulse rounded-md bg-muted",t),...e})}const Lz=()=>o.jsxs("div",{className:"flex items-center justify-between px-4 py-4 mb-4",children:[o.jsx(Dr,{className:"h-8 w-32 rounded"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Dr,{className:"h-8 w-20 rounded"}),o.jsx(Dr,{className:"h-8 w-20 rounded"}),o.jsx(Dr,{className:"h-8 w-20 rounded"})]})]}),Fz=()=>o.jsxs("div",{className:"mb-6 bg-gray-900/80 backdrop-blur-sm border border-red-900/30 text-center relative overflow-hidden rounded-2xl",children:[o.jsxs("div",{className:"flex flex-col items-center p-6",children:[o.jsx(Dr,{className:"h-16 w-16 rounded-full mb-2"}),o.jsx(Dr,{className:"h-6 w-40 mb-2"}),o.jsx(Dr,{className:"h-4 w-56 mb-2"})]}),o.jsx("div",{className:"px-6 pb-4",children:o.jsx(Dr,{className:"h-4 w-32 mx-auto"})})]}),Vz=()=>o.jsxs("div",{className:"flex gap-4 mb-6 justify-center",children:[o.jsx(Dr,{className:"h-8 w-24 rounded"}),o.jsx(Dr,{className:"h-8 w-24 rounded"}),o.jsx(Dr,{className:"h-8 w-24 rounded"})]}),Bz=()=>o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-2xl p-6 min-h-[220px] shadow-2xl mb-6",children:[o.jsx(Dr,{className:"h-6 w-40 mb-4"}),o.jsx(Dr,{className:"h-4 w-56 mb-4"}),o.jsx(Dr,{className:"h-4 w-full rounded mb-2"}),o.jsx(Dr,{className:"h-8 w-32 mt-6 mx-auto"})]}),Uz=({reward:t,onClose:e})=>{const r=Xn(),[n,s]=g.useState(!0),[i,a]=g.useState(!0);g.useEffect(()=>{const u=setTimeout(()=>s(!1),5e3),d=setTimeout(()=>a(!1),3e3);return()=>{clearTimeout(u),clearTimeout(d)}},[]);const l=u=>{switch(u){case"percentage":return"💯";case"fixed_amount":return"💰";case"free_item":return"🎁";default:return"🎉"}},c=u=>{switch(u){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:[n&&o.jsx(u2,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:300,recycle:!1,colors:["#ef4444","#fff","#facc15","#ff9800","#a3e635","#8b5cf6"]}),i&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[o.jsx("div",{className:"w-96 h-96 border-4 border-red-500/30 rounded-full animate-ping"}),o.jsx("div",{className:"absolute w-80 h-80 border-4 border-yellow-500/30 rounded-full animate-ping",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"absolute w-64 h-64 border-4 border-green-500/30 rounded-full animate-ping",style:{animationDelay:"1s"}})]})}),o.jsxs("div",{className:"relative z-10 bg-gradient-to-br from-gray-900/95 to-red-900/95 border border-red-800/50 rounded-3xl p-8 max-w-md mx-4 text-center shadow-2xl",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:l(t.rewardType)}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"🎉 Congratulations! 🎉"}),o.jsx("p",{className:"text-gray-300 text-lg",children:"You've earned your reward!"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-800/50 to-red-800/50 border border-red-700/50 rounded-2xl p-6 mb-6",children:[o.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:t.rewardDescription}),o.jsx("div",{className:"text-gray-300 mb-4",children:t.settingsSnapshot.descriptionMessage}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:t.rewardType})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:t.rewardValue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Goal:"}),o.jsxs("span",{className:"text-white",children:[t.settingsSnapshot.purchaseLimit," purchases"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Earned:"}),o.jsx("span",{className:"text-white",children:t.createdAt.toDate().toLocaleDateString()})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(Te,{onClick:()=>r("/rewards"),className:`w-full bg-gradient-to-r ${c(t.rewardType)} hover:opacity-90 text-white font-semibold py-3 text-lg`,children:[o.jsx(st,{className:"w-5 h-5 mr-2"}),"View All Rewards"]}),o.jsx(Te,{onClick:e,variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white",children:"Continue Shopping"})]}),o.jsx("div",{className:"mt-6 flex items-center justify-center",children:o.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-600 to-yellow-700 border border-yellow-500 rounded-full",children:[o.jsx(Ux,{className:"w-4 h-4 mr-2 text-yellow-200"}),o.jsx("span",{className:"text-yellow-100 text-sm font-medium",children:"ACHIEVEMENT UNLOCKED"})]})})]})]})},qz=({totalUsers:t,customers:e,activeUsers:r,totalRewards:n,totalOffers:s,activeOffers:i,recentUsers:a})=>o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"}),o.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"All registered users"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),o.jsx("div",{className:"text-green-300 text-lg",children:"Customers"}),o.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Loyalty program members"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),o.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-yellow-400 mb-2",children:n}),o.jsx("div",{className:"text-yellow-300 text-lg",children:"Total Rewards"}),o.jsx("div",{className:"text-yellow-400 text-sm mt-2",children:"Earned by customers"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-red-400"}),"Offers Status"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Total Offers:"}),o.jsx("span",{className:"text-white font-semibold",children:s})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Active Offers:"}),o.jsx("span",{className:"text-green-400 font-semibold",children:i})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Inactive Offers:"}),o.jsx("span",{className:"text-red-400 font-semibold",children:s-i})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-indigo-800/50 border border-indigo-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Yl,{className:"w-5 h-5 mr-2 text-indigo-400"}),"User Activity"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Active Rate:"}),o.jsxs("span",{className:"text-white font-semibold",children:[e.length>0?Math.round(r/e.length*100):0,"%"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Avg. Rewards:"}),o.jsx("span",{className:"text-white font-semibold",children:e.length>0?(n/e.length).toFixed(1):0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Engagement:"}),o.jsx("span",{className:"text-green-400 font-semibold",children:r>0?"High":"Low"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(qn,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Business Insights"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:[t>0?Math.round(e.length/t*100):0,"%"]}),o.jsx("div",{className:"text-blue-300 text-sm",children:"Customer Conversion"}),o.jsx("div",{className:"text-blue-400 text-xs",children:"Users to Loyalty Members"})]}),o.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-1",children:[e.length>0?Math.round(r/e.length*100):0,"%"]}),o.jsx("div",{className:"text-green-300 text-sm",children:"Customer Engagement"}),o.jsx("div",{className:"text-green-400 text-xs",children:"Active in Last 7 Days"})]}),o.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:[s>0?Math.round(i/s*100):0,"%"]}),o.jsx("div",{className:"text-purple-300 text-sm",children:"Offer Utilization"}),o.jsx("div",{className:"text-purple-400 text-xs",children:"Active vs Total Offers"})]})]})]})]}),Gz=({users:t,searchTerm:e,setSearchTerm:r,statusFilter:n,setStatusFilter:s,roleFilter:i,setRoleFilter:a})=>{var V,j,T;const[l,c]=g.useState(null),[u,d]=g.useState(!1),[f,m]=g.useState(!1),[p,w]=g.useState({name:"",email:"",mobileNumber:""}),y=S=>{c(S),d(!0)},b=S=>{S.role==="customer"&&(w({name:S.name,email:S.email,mobileNumber:S.mobileNumber||""}),c(S),m(!0))},N=()=>{console.log("Saving user:",l==null?void 0:l.id,p),m(!1),c(null)},x=t.length,E=t.filter(S=>S.role==="customer"),R=t.filter(S=>S.role==="admin"||S.role==="super_admin"),I=t.filter(S=>S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3);return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-4 sm:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-4 sm:space-y-0",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Lx,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 sm:space-x-2",children:[o.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-blue-400",children:x}),o.jsx("div",{className:"text-blue-300 text-xs",children:"Users"})]}),o.jsxs("div",{className:"bg-green-900/20 border border-green-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-green-400",children:E.length}),o.jsx("div",{className:"text-green-300 text-xs",children:"Customers"})]}),o.jsxs("div",{className:"bg-purple-900/20 border border-purple-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-purple-400",children:R.length}),o.jsx("div",{className:"text-purple-300 text-xs",children:"Admins"})]}),o.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-yellow-400",children:I.length}),o.jsx("div",{className:"text-yellow-300 text-xs",children:"Active"})]})]})]}),o.jsx(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",onClick:()=>{r(""),s("all"),a("all")},children:"Clear Filters"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Users"}),o.jsxs("div",{className:"relative",children:[o.jsx(Vx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{placeholder:"Search by name or email...",value:e,onChange:S=>r(S.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),o.jsxs("select",{value:n,onChange:S=>s(S.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active (Last 7 days)"}),o.jsx("option",{value:"inactive",children:"Inactive"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role Filter"}),o.jsxs("select",{value:i,onChange:S=>a(S.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Roles"}),o.jsx("option",{value:"customer",children:"Customers"}),o.jsx("option",{value:"admin",children:"Admins"}),o.jsx("option",{value:"super_admin",children:"Super Admins"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50",children:o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(Cn,{className:"w-5 h-5 mr-2 text-blue-400"}),"Users (",t.length,")"]})}),o.jsx("div",{className:"block sm:hidden",children:o.jsx("div",{className:"p-4 space-y-4",children:t.map(S=>{var k;return o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-white text-sm font-bold",children:S.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:S.name}),o.jsxs("div",{className:"text-gray-400 text-sm flex items-center",children:[o.jsx(Tf,{className:"w-3 h-3 mr-1"}),S.email]})]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":S.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:S.role.replace("_"," ").toUpperCase()})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(zr,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"text-white font-medium",children:S.purchases}),o.jsx("span",{className:"text-gray-400",children:"Purchases"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(tu,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{className:"text-white font-medium",children:((k=S.completedRewards)==null?void 0:k.length)||0}),o.jsx("span",{className:"text-gray-400",children:"Rewards"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qn,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-300 text-sm",children:S.lastScanAt?S.lastScanAt.toDate().toLocaleDateString():"Never"})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50":"bg-gradient-to-r from-gray-900/50 to-gray-800/50 text-gray-300 border border-gray-700/50"}`,children:S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})]}),o.jsxs("div",{className:"flex space-x-2 pt-2",children:[o.jsxs(Te,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200 flex-1",onClick:()=>y(S),title:"View user profile",children:[o.jsx(da,{className:"w-4 h-4 mr-1"}),"View"]}),o.jsxs(Te,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200 flex-1",onClick:()=>b(S),disabled:S.role!=="customer",title:S.role!=="customer"?"Only customers can be edited":"Edit customer",children:[o.jsx(Nl,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]},S.id)})})}),o.jsx("div",{className:"hidden sm:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-700/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"User"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Role"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Purchases"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Rewards"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Last Activity"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:t.map(S=>{var k;return o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-colors duration-200",children:[o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-white text-sm font-bold",children:S.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:S.name}),o.jsxs("div",{className:"text-gray-400 text-sm flex items-center",children:[o.jsx(Tf,{className:"w-3 h-3 mr-1"}),S.email]})]})]})}),o.jsx("td",{className:"p-4",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${S.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":S.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:S.role.replace("_"," ").toUpperCase()})}),o.jsx("td",{className:"p-4",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50":"bg-gradient-to-r from-gray-900/50 to-gray-800/50 text-gray-300 border border-gray-700/50"}`,children:S.lastScanAt&&new Date().getTime()-S.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(zr,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"text-white font-medium",children:S.purchases})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(tu,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{className:"text-white font-medium",children:((k=S.completedRewards)==null?void 0:k.length)||0})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qn,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-300",children:S.lastScanAt?S.lastScanAt.toDate().toLocaleDateString():"Never"})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(Te,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>y(S),title:"View user profile",children:o.jsx(da,{className:"w-4 h-4"})}),o.jsx(Te,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200",onClick:()=>b(S),disabled:S.role!=="customer",title:S.role!=="customer"?"Only customers can be edited":"Edit customer",children:o.jsx(Nl,{className:"w-4 h-4"})})]})})]},S.id)})})]})})]}),u&&l&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl w-full max-w-2xl max-h-[95vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[o.jsx(Cn,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-blue-400"}),"User Profile"]}),o.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg mx-auto sm:mx-0",children:o.jsx("span",{className:"text-white text-xl sm:text-2xl font-bold",children:l.name.charAt(0)})}),o.jsxs("div",{className:"text-center sm:text-left",children:[o.jsx("h4",{className:"text-xl sm:text-2xl font-bold text-white",children:l.name}),o.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-2 text-gray-400 mb-2",children:[o.jsx(Tf,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:l.email})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":l.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:l.role.replace("_"," ").toUpperCase()})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-800/30 border border-blue-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-blue-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(zr,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),(()=>{var k;const S=((k=l.completedRewards)==null?void 0:k.reduce((L,D)=>{var P;return L+(((P=D.scanHistory)==null?void 0:P.length)||0)},0))||0;return Math.max(l.purchases||0,S)})()]}),o.jsx("div",{className:"text-blue-300 text-xs sm:text-sm",children:"Lifetime Stamps"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/30 border border-green-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-green-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(tu,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),((V=l.completedRewards)==null?void 0:V.filter(S=>{var k,L;return((k=S.scanHistory)==null?void 0:k.length)>=(((L=S.offerSnapshot)==null?void 0:L.stampRequirement)||0)}).length)||0]}),o.jsx("div",{className:"text-green-300 text-xs sm:text-sm",children:"Completed Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/30 border border-purple-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-purple-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(Yl,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),((j=l.completedRewards)==null?void 0:j.filter(S=>{var k,L;return((k=S.scanHistory)==null?void 0:k.length)<(((L=S.offerSnapshot)==null?void 0:L.stampRequirement)||0)}).length)||0]}),o.jsx("div",{className:"text-purple-300 text-xs sm:text-sm",children:"In-Progress Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 to-yellow-800/30 border border-yellow-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-yellow-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),((T=l.completedRewards)==null?void 0:T.filter(S=>S.claimedAt).length)||0]}),o.jsx("div",{className:"text-yellow-300 text-xs sm:text-sm",children:"Redeemed Rewards"})]})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("h5",{className:"text-base sm:text-lg font-semibold text-white flex items-center",children:[o.jsx(Yl,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-yellow-400"}),"Activity Details"]}),o.jsx("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-3 sm:p-4",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-1 flex items-center",children:[o.jsx(Dx,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Member Since"]}),o.jsx("div",{className:"text-white font-medium text-sm sm:text-base",children:l.createdAt.toDate().toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-1 flex items-center",children:[o.jsx(qn,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Last Activity"]}),o.jsx("div",{className:"text-white font-medium text-sm sm:text-base",children:l.lastScanAt?l.lastScanAt.toDate().toLocaleDateString():"Never"})]})]})}),l.mobileNumber&&o.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-2 flex items-center",children:[o.jsx(k3,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Contact Number"]}),o.jsx("div",{className:"text-white text-sm sm:text-base",children:l.mobileNumber})]}),l.role==="customer"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-700/30 to-blue-800/30 border border-blue-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-3 flex items-center",children:[o.jsx(zr,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Current In-Progress Rewards"]}),l.completedRewards&&l.completedRewards.filter(S=>{var k,L;return((k=S.scanHistory)==null?void 0:k.length)<(((L=S.offerSnapshot)==null?void 0:L.stampRequirement)||0)}).length>0?o.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(S=>{var k,L;return((k=S.scanHistory)==null?void 0:k.length)<(((L=S.offerSnapshot)==null?void 0:L.stampRequirement)||0)}).map((S,k)=>{var B,z,Y;const L=((B=S.scanHistory)==null?void 0:B.length)||0,D=((z=S.offerSnapshot)==null?void 0:z.stampRequirement)||0,P=D>0?Math.min(L/D*100,100):0;return o.jsxs("div",{className:"bg-blue-800/20 rounded p-3 border border-blue-700/30",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("div",{className:"text-white font-medium text-xs sm:text-sm",children:((Y=S.offerSnapshot)==null?void 0:Y.offerName)||"Loyalty Reward"}),o.jsxs("span",{className:"text-blue-300 text-xs",children:[L,"/",D," stamps"]})]}),o.jsx("div",{className:"w-full bg-blue-600/30 rounded-full h-2 mb-2",children:o.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${P}%`}})}),o.jsxs("div",{className:"text-blue-300 text-xs",children:["Started:"," ",S.createdAt.toDate().toLocaleDateString()]})]},k)})}):o.jsx("div",{className:"text-gray-400 text-xs sm:text-sm italic",children:"No rewards in progress"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-700/30 to-green-800/30 border border-green-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-3 flex items-center",children:[o.jsx(st,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Available Rewards to Redeem"]}),(()=>{var L;const k=(((L=l.completedRewards)==null?void 0:L.filter(D=>{var P,B;return((P=D.scanHistory)==null?void 0:P.length)>=((B=D.offerSnapshot)==null?void 0:B.stampRequirement)}))||[]).filter(D=>!D.claimedAt);return console.log(k),k.length>0?o.jsx("div",{className:"space-y-3",children:k.map((D,P)=>{var B;return o.jsxs("div",{className:"bg-green-800/20 rounded p-3 border border-green-700/30",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("div",{className:"text-white font-medium text-xs sm:text-sm",children:((B=D.offerSnapshot)==null?void 0:B.offerName)||"Loyalty Reward"}),o.jsx("span",{className:"text-green-300 text-xs",children:"Ready to Redeem"})]}),o.jsx("div",{className:"text-green-300 text-xs mb-2",children:D.rewardDescription||"No description"}),o.jsxs("div",{className:"text-green-300 text-xs",children:["Completed:"," ",D.createdAt.toDate().toLocaleDateString()]})]},P)})}):o.jsx("div",{className:"text-gray-400 text-xs sm:text-sm italic",children:"No rewards ready to redeem"})})()]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-700/30 to-purple-800/30 border border-purple-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-3 flex items-center",children:[o.jsx(tu,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Already Redeemed Rewards"]}),l.completedRewards&&l.completedRewards.filter(S=>S.claimedAt).length>0?o.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(S=>S.claimedAt).map((S,k)=>{var L,D;return o.jsxs("div",{className:"bg-purple-800/20 rounded p-3 border border-purple-700/30",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("div",{className:"text-white font-medium text-xs sm:text-sm",children:((L=S.offerSnapshot)==null?void 0:L.offerName)||"Loyalty Reward"}),o.jsx("span",{className:"text-purple-300 text-xs",children:"Redeemed"})]}),o.jsx("div",{className:"text-purple-300 text-xs mb-2",children:((D=S.offerSnapshot)==null?void 0:D.rewardDescription)||"No description"}),o.jsxs("div",{className:"text-purple-300 text-xs",children:["Redeemed:"," ",S.claimedAt?S.claimedAt.toDate().toLocaleDateString():"Unknown"]})]},k)})}):o.jsx("div",{className:"text-gray-400 text-xs sm:text-sm italic",children:"No rewards redeemed yet"})]})]}),l.role!=="customer"&&o.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-2 flex items-center",children:[o.jsx(Cn,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Admin Information"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300 text-sm",children:"Role Level:"}),o.jsx("span",{className:"text-white font-medium text-sm",children:l.role==="super_admin"?"Super Administrator":"Administrator"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300 text-sm",children:"Permissions:"}),o.jsx("span",{className:"text-white font-medium text-sm",children:l.role==="super_admin"?"Full system access":"User and offer management"})]})]})]})]})]})]})}),f&&l&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl w-full max-w-md max-h-[95vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[o.jsx(Nl,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-green-400"}),"Edit Customer"]}),o.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),o.jsx(Se,{value:p.name,onChange:S=>w({...p,name:S.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsx(Se,{value:p.email,onChange:S=>w({...p,email:S.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),o.jsx(Se,{value:p.mobileNumber,onChange:S=>w({...p,mobileNumber:S.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 pt-4",children:[o.jsx(Te,{onClick:N,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200",children:"Save Changes"}),o.jsx(Te,{onClick:()=>m(!1),variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200",children:"Cancel"})]})]})]})})]})},ic=g.forwardRef(({className:t,...e},r)=>o.jsx("textarea",{className:ot("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));ic.displayName="Textarea";const $z=({offers:t,userRole:e,onOfferCreated:r,currentUser:n})=>{const[s,i]=g.useState(""),[a,l]=g.useState("all"),[c,u]=g.useState(!1),[d,f]=g.useState(!1),[m,p]=g.useState(""),[w,y]=g.useState(""),[b,N]=g.useState(null),[x,E]=g.useState(!1),[R,I]=g.useState(!1),[V,j]=g.useState(null),[T,S]=g.useState(null),[k,L]=g.useState(!1),[D,P]=g.useState({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),[B,z]=g.useState({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),Y=G=>!G.isActive,ee=t.filter(G=>{const me=G.name.toLowerCase().includes(s.toLowerCase())||G.description.toLowerCase().includes(s.toLowerCase()),Ee=a==="all"||a==="active"&&G.isActive||a==="inactive"&&!G.isActive;return me&&Ee});t.length,t.filter(G=>G.isActive).length,t.filter(G=>!G.isActive).length,t.reduce((G,me)=>G+me.stampRequirement,0),g.useEffect(()=>{const G=me=>{me.key==="Escape"&&c&&H()};return c&&document.addEventListener("keydown",G),()=>{document.removeEventListener("keydown",G)}},[c]);const U=async()=>{try{if(f(!0),p(""),y(""),!D.name.trim()){p("Offer name is required");return}if(!D.description.trim()){p("Description is required");return}if(!D.rewardValue.trim()){p("Reward value is required");return}if(!D.rewardDescription.trim()){p("Reward description is required");return}const G={name:D.name.trim(),description:D.description.trim(),stampRequirement:D.stampRequirement,stampsPerScan:D.stampsPerScan,rewardType:D.rewardType,rewardValue:D.rewardValue.trim(),rewardDescription:D.rewardDescription.trim(),isActive:!1,expiresAt:D.expiryDate?Ve.fromDate(new Date(D.expiryDate)):null};if(!n)throw new Error("User context not available");await i2(n,G),y("Offer created successfully!"),r==null||r(),setTimeout(()=>{y("")},5e3),P({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),p("")}catch(G){p(G instanceof Error?G.message:"Failed to create offer. Please try again."),console.error("Error creating offer:",G)}finally{f(!1)}},H=()=>{P({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),p(""),y(""),f(!1)},ie=async G=>{const me=G.isActive?"deactivate":"activate",Ee=G.isActive?`Are you sure you want to deactivate "${G.name}"? This will hide it from new users, but existing users can continue collecting stamps.`:`Are you sure you want to activate "${G.name}"? This will make it visible to all customers.`;S({type:me,offer:G,message:Ee}),L(!0)},ne=async()=>{if(!(!T||!n))try{const{offer:G}=T,me=!G.isActive;await KC(n,G.offerId,{isActive:me}),y(`Offer ${me?"activated":"deactivated"} successfully!`),r==null||r(),setTimeout(()=>{y("")},5e3)}catch(G){p(G instanceof Error?G.message:`Failed to ${T.type} offer. Please try again.`),console.error("Error toggling offer status:",G)}finally{Z()}},le=G=>{N(G),z({name:G.name,description:G.description,stampRequirement:G.stampRequirement,stampsPerScan:G.stampsPerScan||1,rewardType:G.rewardType,rewardValue:G.rewardValue,rewardDescription:G.rewardDescription,expiryDate:G.expiresAt?G.expiresAt.toDate().toISOString().split("T")[0]:""}),E(!0)},he=async()=>{try{if(!n||!b){p("User context or offer not available");return}if(I(!0),p(""),!B.name.trim()){p("Offer name is required");return}if(!B.description.trim()){p("Description is required");return}if(!B.rewardValue.trim()){p("Reward value is required");return}if(!B.rewardDescription.trim()){p("Reward description is required");return}const G={name:B.name.trim(),description:B.description.trim(),stampRequirement:B.stampRequirement,stampsPerScan:B.stampsPerScan,rewardType:B.rewardType,rewardValue:B.rewardValue.trim(),rewardDescription:B.rewardDescription.trim(),expiresAt:B.expiryDate?Ve.fromDate(new Date(B.expiryDate)):null};await KC(n,b.offerId,G),y("Offer updated successfully!"),r==null||r(),setTimeout(()=>{y("")},5e3),E(!1),N(null),p("")}catch(G){p(G instanceof Error?G.message:"Failed to update offer. Please try again."),console.error("Error updating offer:",G)}finally{I(!1)}},_e=()=>{E(!1),N(null),z({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),p("")},Me=async G=>{const me=`Are you sure you want to delete "${G.name}"? This action cannot be undone and will remove the offer completely.`;S({type:"delete",offer:G,message:me}),L(!0)},ue=async()=>{if(!(!T||!n))try{j(T.offer.offerId),await wq(n,T.offer.offerId),y("Offer deleted successfully!"),r==null||r(),setTimeout(()=>{y("")},5e3)}catch(G){p(G instanceof Error?G.message:"Failed to delete offer. Please try again."),console.error("Error deleting offer:",G)}finally{j(null),Z()}},Z=()=>{L(!1),S(null)},de=()=>{const G=new Date;return G.setFullYear(G.getFullYear()+10),G.toISOString().split("T")[0]};return o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900/20 to-blue-800/20 border border-blue-700/30 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"text-blue-400 mt-1",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-blue-300 mb-2",children:"Offer Lifecycle Management"}),o.jsxs("div",{className:"text-blue-200 text-sm space-y-2",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Active Offers:"})," Visible to all customers, new users can start collecting stamps"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Inactive Offers:"})," Hidden from new users, but existing users can continue collecting stamps"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"User Protection:"})," Users who started collecting stamps can complete their rewards even if the offer becomes inactive"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Admin Control:"})," Use Play button to activate offers, Pause button to deactivate. Only inactive offers can be edited or deleted."]})]})]})]})}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Lx,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]})}),o.jsx(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",onClick:()=>{i(""),l("all")},children:"Clear Filters"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Offers"}),o.jsxs("div",{className:"relative",children:[o.jsx(Vx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{placeholder:"Search by name or description...",value:s,onChange:G=>i(G.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),o.jsxs("select",{value:a,onChange:G=>l(G.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Offers"}),o.jsx("option",{value:"inactive",children:"Inactive Offers"})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs(Te,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 w-full",onClick:()=>u(!0),disabled:e!=="super_admin",title:e!=="super_admin"?"Only super admins can create offers":"Create new loyalty offer",children:[o.jsx(Yh,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50",children:o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-green-400"}),"Loyalty Offers (",ee.length,")"]})}),w&&o.jsx("div",{className:"mx-6 mt-4 bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ds,{className:"w-5 h-5 text-green-400"}),o.jsx("span",{className:"text-green-300 font-medium",children:w})]})}),o.jsx("div",{className:"p-6",children:ee.length>0?o.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:ee.map(G=>o.jsxs("div",{className:`bg-gradient-to-br ${G.isActive?"from-green-900/30 to-green-800/30 border-green-700/50":"from-gray-800/30 to-gray-700/30 border-gray-600/50"} border rounded-xl p-6 hover:shadow-lg transition-all duration-300`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-white truncate",children:G.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[!G.isActive&&Y(G)&&o.jsx("div",{className:"text-xs text-yellow-400 bg-yellow-900/30 px-2 py-1 rounded-full border border-yellow-600/30",children:"⚠️ Users collecting"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${G.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:G.isActive?"ACTIVE":"INACTIVE"})]})]}),o.jsx("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:G.description}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(zr,{className:"w-4 h-4 mr-2"}),"Stamps Required"]}),o.jsx("span",{className:"text-white font-medium",children:G.stampRequirement})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Reward"]}),o.jsx("span",{className:"text-white font-medium",children:G.rewardDescription})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(Yl,{className:"w-4 h-4 mr-2"}),"Type"]}),o.jsx("span",{className:"text-white font-medium capitalize",children:G.rewardType})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(Dx,{className:"w-4 h-4 mr-2"}),"Created"]}),o.jsx("span",{className:"text-white font-medium text-sm",children:G.createdAt.toDate().toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(Te,{size:"sm",variant:"outline",className:`transition-all duration-200 flex-1 ${G.isActive?"border-red-600 text-red-400 hover:bg-red-600 hover:text-white":"border-green-600 text-green-400 hover:bg-green-600 hover:text-white"}`,title:G.isActive?"Deactivate offer":"Activate offer",onClick:()=>ie(G),children:G.isActive?o.jsx(Zg,{className:"w-4 h-4"}):o.jsx(e0,{className:"w-4 h-4"})}),!G.isActive&&o.jsx(Te,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200 flex-1",title:"Edit offer",onClick:()=>le(G),children:o.jsx(Nl,{className:"w-4 h-4"})}),!G.isActive&&o.jsx(Te,{size:"sm",variant:"outline",className:"border-red-600 text-red-400 hover:bg-red-600 hover:text-white transition-all duration-200 flex-1",title:"Delete offer",onClick:()=>Me(G),disabled:V===G.offerId,children:V===G.offerId?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-400"}):o.jsx(t0,{className:"w-4 h-4"})})]})]},G.offerId))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(st,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No offers found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:s||a!=="all"?"Try adjusting your search or filters":"Create your first loyalty offer to get started"}),!s&&a==="all"&&o.jsxs(Te,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",onClick:()=>u(!0),disabled:e!=="super_admin",children:[o.jsx(Yh,{className:"w-4 h-4 mr-2"}),"Create First Offer"]})]})})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(Yh,{className:"w-5 h-5 mr-2 text-green-400"}),"Create New Loyalty Offer"]}),o.jsx("button",{onClick:H,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[m&&o.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(U1,{className:"w-5 h-5 text-red-400"}),o.jsx("span",{className:"text-red-300 font-medium",children:m})]})}),w&&o.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ds,{className:"w-5 h-5 text-green-400"}),o.jsx("span",{className:"text-green-300 font-medium",children:w})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Basic Information"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Name *"}),o.jsx(Se,{value:D.name,onChange:G=>P({...D,name:G.target.value}),placeholder:"Enter offer name...",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),o.jsx(ic,{value:D.description,onChange:G=>P({...D,description:G.target.value}),placeholder:"Describe the offer...",rows:3,className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 mr-2 text-blue-400"}),"Stamp Requirements"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Stamps Required *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{type:"number",min:"1",value:D.stampRequirement,onChange:G=>P({...D,stampRequirement:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stamps Per Scan *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{type:"number",min:"1",value:D.stampsPerScan,onChange:G=>P({...D,stampsPerScan:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 stamp per scan. Can be increased for special promotions."})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-purple-400"}),"Reward Details"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Type *"}),o.jsxs("select",{value:D.rewardType,onChange:G=>P({...D,rewardType:G.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"}),o.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Value *"}),o.jsx(Se,{value:D.rewardValue,onChange:G=>P({...D,rewardValue:G.target.value}),placeholder:D.rewardType==="percentage"?"20":D.rewardType==="fixed_amount"?"5.00":"Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Description *"}),o.jsx(Se,{value:D.rewardDescription,onChange:G=>P({...D,rewardDescription:G.target.value}),placeholder:"e.g., 20% OFF, $5.00 OFF, Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(qn,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Expiry Settings"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),o.jsx(Se,{type:"date",value:D.expiryDate||de(),onChange:G=>P({...D,expiryDate:G.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 10 years from creation date"})]})]}),o.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(M3,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"text-blue-300 text-sm font-medium",children:"Offer Status: Inactive by Default"})]}),o.jsx("p",{className:"text-blue-200 text-xs mt-1",children:"New offers are created as inactive. Use the Play button to activate them when ready. Only inactive offers can be edited or deleted."})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(Te,{onClick:U,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 flex-1",disabled:!D.name||!D.description||!D.rewardValue||!D.rewardDescription||d,children:d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Yh,{className:"w-4 h-4 mr-2"}),"Create Offer"]})}),o.jsx(Te,{onClick:H,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200 flex-1",disabled:d,children:"Cancel"})]})]})]})}),x&&b&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(Nl,{className:"w-5 h-5 mr-2 text-blue-400"}),"Edit Loyalty Offer"]}),o.jsx("button",{onClick:_e,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[m&&o.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(U1,{className:"w-5 h-5 text-red-400"}),o.jsx("span",{className:"text-red-300 font-medium",children:m})]})}),w&&o.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ds,{className:"w-5 h-5 text-green-400"}),o.jsx("span",{className:"text-green-300 font-medium",children:w})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Basic Information"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Name *"}),o.jsx(Se,{value:B.name,onChange:G=>z({...B,name:G.target.value}),placeholder:"Enter offer name...",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),o.jsx(ic,{value:B.description,onChange:G=>z({...B,description:G.target.value}),placeholder:"Describe the offer...",rows:3,className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 mr-2 text-blue-400"}),"Stamp Requirements"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Stamps Required *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{type:"number",min:"1",value:B.stampRequirement,onChange:G=>z({...B,stampRequirement:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stamps Per Scan *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{type:"number",min:"1",value:B.stampsPerScan,onChange:G=>z({...B,stampsPerScan:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 stamp per scan. Can be increased for special promotions."})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-purple-400"}),"Reward Details"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Type *"}),o.jsxs("select",{value:B.rewardType,onChange:G=>z({...B,rewardType:G.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"}),o.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Value *"}),o.jsx(Se,{value:B.rewardValue,onChange:G=>z({...B,rewardValue:G.target.value}),placeholder:B.rewardType==="percentage"?"20":B.rewardType==="fixed_amount"?"5.00":"Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Description *"}),o.jsx(Se,{value:B.rewardDescription,onChange:G=>z({...B,rewardDescription:G.target.value}),placeholder:"e.g., 20% OFF, $5.00 OFF, Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(qn,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Expiry Settings"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),o.jsx(Se,{type:"date",value:B.expiryDate||de(),onChange:G=>z({...B,expiryDate:G.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 year from creation date"})]})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(Te,{onClick:he,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex-1",disabled:!B.name||!B.description||!B.rewardValue||!B.rewardDescription||R,children:R?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Nl,{className:"w-4 h-4 mr-2"}),"Update Offer"]})}),o.jsx(Te,{onClick:_e,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200 flex-1",disabled:R,children:"Cancel"})]})]})]})}),k&&T&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-md w-full max-h-[80vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[T.type==="delete"?o.jsx(t0,{className:"w-5 h-5 mr-2 text-red-400"}):T.type==="activate"?o.jsx(e0,{className:"w-5 h-5 mr-2 text-green-400"}):o.jsx(Zg,{className:"w-5 h-5 mr-2 text-yellow-400"}),T.type==="delete"?"Delete Offer":T.type==="activate"?"Activate Offer":"Deactivate Offer"]}),o.jsx("button",{onClick:Z,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("p",{className:"text-gray-300 text-sm",children:T.message}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(Te,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200",onClick:Z,children:"Cancel"}),o.jsxs(Te,{className:`transition-all duration-200 ${T.type==="delete"?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800":T.type==="activate"?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800":"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800"}`,onClick:T.type==="delete"?ue:ne,disabled:d||R,children:[d||R?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):T.type==="delete"?o.jsx(t0,{className:"w-4 h-4 mr-2"}):T.type==="activate"?o.jsx(e0,{className:"w-4 h-4 mr-2"}):o.jsx(Zg,{className:"w-4 h-4 mr-2"}),T.type==="delete"?"Delete Offer":T.type==="activate"?"Activate Offer":"Deactivate Offer"]})]})]})]})})]})},zz=({allUsers:t})=>{var w,y,b,N,x,E;const[e,r]=g.useState(""),[n,s]=g.useState("all"),[i,a]=g.useState(null),[l,c]=g.useState(!1),u=g.useMemo(()=>t.flatMap(R=>(R.completedRewards||[]).map(I=>({...I,userName:R.name,userEmail:R.email,userId:R.id}))),[t]),d=g.useMemo(()=>u.filter(R=>{var j,T;const I=R.userName.toLowerCase().includes(e.toLowerCase())||R.userEmail.toLowerCase().includes(e.toLowerCase())||R.rewardDescription.toLowerCase().includes(e.toLowerCase())||((T=(j=R.offerSnapshot)==null?void 0:j.offerName)==null?void 0:T.toLowerCase().includes(e.toLowerCase())),V=n==="all"||n==="active"&&!R.claimedAt||n==="claimed"&&R.claimedAt;return I&&V}),[u,e,n]),f=R=>{a(R),c(!0)},m=()=>{c(!1),a(null)},p=()=>{r(""),s("all")};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-4 sm:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-4 sm:space-y-0",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Lx,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]})}),o.jsx(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",onClick:p,children:"Clear Filters"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Rewards"}),o.jsxs("div",{className:"relative",children:[o.jsx(Vx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{placeholder:"Search by user, reward, or offer...",value:e,onChange:R=>r(R.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),o.jsxs("select",{value:n,onChange:R=>s(R.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Rewards"}),o.jsx("option",{value:"claimed",children:"Claimed Rewards"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-green-400"}),"Rewards (",d.length,")"]}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[o.jsxs(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",onClick:()=>window.location.reload(),children:[o.jsx(RA,{className:"w-4 h-4 mr-2"}),"Refresh"]}),o.jsxs(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",children:[o.jsx(S3,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})}),o.jsx("div",{className:"block sm:hidden",children:o.jsx("div",{className:"p-4 space-y-4",children:d.map(R=>{var I,V;return o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(zs,{className:"h-5 w-5 text-white"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:R.userName}),o.jsx("div",{className:"text-gray-400 text-sm flex items-center",children:o.jsx("span",{className:"truncate",children:R.userEmail})})]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.claimedAt?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50"}`,children:R.claimedAt?o.jsxs(o.Fragment,{children:[o.jsx(ds,{className:"w-3 h-3 mr-1"}),"Claimed"]}):o.jsxs(o.Fragment,{children:[o.jsx(qn,{className:"w-3 h-3 mr-1"}),"Active"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium text-sm",children:R.rewardDescription}),o.jsxs("div",{className:"text-gray-400 text-xs capitalize",children:[R.rewardType," • ",R.rewardValue]})]}),o.jsx("div",{className:"text-gray-300 text-sm",children:((I=R.offerSnapshot)==null?void 0:I.offerName)||"Unknown Offer"}),o.jsxs("div",{className:"text-xs text-gray-500",children:[((V=R.scanHistory)==null?void 0:V.length)||0," stamps collected"]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("div",{className:"text-gray-300",children:R.createdAt.toDate().toLocaleDateString()}),o.jsxs(Te,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>f(R),title:"View reward details and scan history",children:[o.jsx(da,{className:"w-4 h-4 mr-1"}),"View"]})]})]},R.rewardId)})})}),o.jsx("div",{className:"hidden sm:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-800/50 border-b border-gray-700/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Reward"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Offer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Earned"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-700/50",children:d.map(R=>{var I,V;return o.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:o.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:o.jsx(zs,{className:"h-5 w-5 text-white"})})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-white",children:R.userName}),o.jsx("div",{className:"text-sm text-gray-400",children:R.userEmail})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-white",children:R.rewardDescription}),o.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[R.rewardType," • ",R.rewardValue]})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-gray-300",children:((I=R.offerSnapshot)==null?void 0:I.offerName)||"Unknown Offer"}),o.jsxs("div",{className:"text-xs text-gray-500",children:[((V=R.scanHistory)==null?void 0:V.length)||0," stamps collected"]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.claimedAt?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50"}`,children:R.claimedAt?o.jsxs(o.Fragment,{children:[o.jsx(ds,{className:"w-3 h-3 mr-1"}),"Claimed"]}):o.jsxs(o.Fragment,{children:[o.jsx(qn,{className:"w-3 h-3 mr-1"}),"Active"]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:R.createdAt.toDate().toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs(Te,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>f(R),title:"View reward details and scan history",children:[o.jsx(da,{className:"w-4 h-4 mr-2"}),"View"]})})]},R.rewardId)})})]})}),d.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(st,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No rewards found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:e||n!=="all"?"Try adjusting your search or filters":"No rewards have been earned yet"}),(e||n!=="all")&&o.jsx(Te,{className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",onClick:p,children:"Clear All Filters"})]})]}),l&&i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl w-full max-w-4xl max-h-[95vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-green-400"}),"Reward Details"]}),o.jsx("button",{onClick:m,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(zs,{className:"w-4 h-4 mr-2 text-blue-400"}),"User Information"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Name:"}),o.jsx("span",{className:"text-white",children:i.userName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Email:"}),o.jsx("span",{className:"text-white",children:i.userEmail})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"User ID:"}),o.jsx("span",{className:"text-white font-mono text-xs",children:i.userId})]})]})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Reward Details"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Description:"}),o.jsx("span",{className:"text-white",children:i.rewardDescription})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:i.rewardType})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:i.rewardValue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Status:"}),o.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${i.claimedAt?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50"}`,children:i.claimedAt?"Claimed":"Active"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 mr-2 text-purple-400"}),"Offer Information"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Offer Name:"}),o.jsx("span",{className:"text-white",children:((w=i.offerSnapshot)==null?void 0:w.offerName)||"Unknown"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Description:"}),o.jsx("span",{className:"text-white",children:((y=i.offerSnapshot)==null?void 0:y.description)||"No description"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Stamps Required:"}),o.jsx("span",{className:"text-white",children:((b=i.offerSnapshot)==null?void 0:b.stampRequirement)||"Unknown"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Created:"}),o.jsx("span",{className:"text-white",children:i.createdAt.toDate().toLocaleDateString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Claimed:"}),o.jsx("span",{className:"text-white",children:i.claimedAt?i.claimedAt.toDate().toLocaleDateString():"Not claimed yet"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white",children:[((N=i.scanHistory)==null?void 0:N.length)||0," /"," ",((x=i.offerSnapshot)==null?void 0:x.stampRequirement)||"?"," ","stamps"]})]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(qn,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Scan History (",((E=i.scanHistory)==null?void 0:E.length)||0," scans)"]}),i.scanHistory&&i.scanHistory.length>0?o.jsx("div",{className:"space-y-3",children:i.scanHistory.map((R,I)=>o.jsx("div",{className:"bg-gray-700/30 rounded-lg p-3 border border-gray-600/30",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-medium",children:I+1})}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-white",children:["Scanned by: ",R.scannedBy||"Unknown Admin"]}),o.jsx("div",{className:"text-xs text-gray-400",children:R.timestamp.toDate().toLocaleString()})]})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Stamp #",I+1]})]})},I))}):o.jsxs("div",{className:"text-center py-6 text-gray-400",children:[o.jsx(qn,{className:"w-8 h-8 mx-auto mb-2"}),o.jsx("p",{children:"No scan history available"})]})]})]})]})})]})},Hz=({allUsers:t,offers:e})=>{var c,u;const r=g.useMemo(()=>{const d=t.filter(B=>B.role==="customer");t.filter(B=>B.role==="admin"||B.role==="super_admin");const f=d.length,m=d.filter(B=>{var ee;const z=(ee=B.createdAt)==null?void 0:ee.toDate();if(!z)return!1;const Y=new Date;return z.getMonth()===Y.getMonth()&&z.getFullYear()===Y.getFullYear()}).length,p=d.filter(B=>B.lastScanAt&&new Date().getTime()-B.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,w=d.filter(B=>B.lastScanAt&&new Date().getTime()-B.lastScanAt.toDate().getTime()<24*60*60*1e3).length,y=d.flatMap(B=>B.completedRewards||[]),b=y.length,N=y.filter(B=>B.claimedAt).length,x=b-N,E=b>0?(N/b*100).toFixed(1):0,R=e.filter(B=>B.isActive).length,I=e.length>0?(R/e.length*100).toFixed(1):0,V=y.reduce((B,z)=>{var Y;return B+(((Y=z.scanHistory)==null?void 0:Y.length)||0)},0),j=f>0?(V/f).toFixed(1):0,T=new Date,S=new Date(T.getFullYear(),T.getMonth()-1,1),k=new Date(T.getFullYear(),T.getMonth(),1),L=y.filter(B=>{var Y;const z=(Y=B.createdAt)==null?void 0:Y.toDate();return z?z>=k:!1}).length,D=y.filter(B=>{var Y;const z=(Y=B.createdAt)==null?void 0:Y.toDate();return z?z>=S&&z<k:!1}).length,P=D>0?((L-D)/D*100).toFixed(1):L>0?100:0;return{customers:{total:f,newThisMonth:m},activity:{active:p,veryActive:w},rewards:{total:b,claimed:N,active:x,redemptionRate:parseFloat(E)},offers:{total:e.length,active:R,utilization:parseFloat(I)},engagement:{totalStamps:V,avgPerCustomer:parseFloat(j)},growth:{thisMonth:L,lastMonth:D,monthOverMonth:parseFloat(P)}}},[t,e]),n=g.useMemo(()=>e.map(f=>{const m=t.flatMap(b=>(b.completedRewards||[]).filter(N=>{var x;return((x=N.offerSnapshot)==null?void 0:x.offerId)===f.offerId})),p=m.length,w=m.filter(b=>b.claimedAt).length,y=m.reduce((b,N)=>{var x;return b+(((x=N.scanHistory)==null?void 0:x.length)||0)},0);return{...f,totalRewards:p,claimedRewards:w,totalStamps:y,conversionRate:y>0?(p/y*100).toFixed(1):0}}).filter(f=>f.totalStamps>0).sort((f,m)=>m.totalStamps-f.totalStamps).slice(0,5),[e,t]),s=g.useMemo(()=>{const d=t.filter(m=>m.role==="customer");return{new:d.filter(m=>{var y;const p=(y=m.createdAt)==null?void 0:y.toDate();return p?(new Date().getTime()-p.getTime())/(1e3*60*60*24)<=30:!1}).length,active:d.filter(m=>m.lastScanAt&&new Date().getTime()-m.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,returning:d.filter(m=>m.lastScanAt&&new Date().getTime()-m.lastScanAt.toDate().getTime()>=7*24*60*60*1e3&&new Date().getTime()-m.lastScanAt.toDate().getTime()<30*24*60*60*1e3).length,dormant:d.filter(m=>!m.lastScanAt||new Date().getTime()-m.lastScanAt.toDate().getTime()>=30*24*60*60*1e3).length}},[t]),i=d=>d>0?o.jsx(N3,{className:"w-4 h-4 text-green-400"}):d<0?o.jsx(C3,{className:"w-4 h-4 text-red-400"}):o.jsx(j3,{className:"w-4 h-4 text-gray-400"}),a=d=>d>0?"text-green-400":d<0?"text-red-400":"text-gray-400",l=d=>typeof d=="number"?d:parseFloat(d)||0;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:o.jsx(Cn,{className:"w-6 h-6 text-blue-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-blue-300",children:"This Month"}),o.jsxs("div",{className:"text-sm font-medium text-blue-400",children:["+",r.customers.newThisMonth]})]})]}),o.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:r.customers.total.toLocaleString()}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-green-600/20 rounded-lg",children:o.jsx(st,{className:"w-6 h-6 text-green-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-green-300",children:"Redemption Rate"}),o.jsxs("div",{className:"text-sm font-medium text-green-400",children:[r.rewards.redemptionRate,"%"]})]})]}),o.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:r.rewards.total.toLocaleString()}),o.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-purple-600/20 rounded-lg",children:o.jsx(Yl,{className:"w-6 h-6 text-purple-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-purple-300",children:"Active Users"}),o.jsx("div",{className:"text-sm font-medium text-purple-400",children:r.activity.active})]})]}),o.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:r.engagement.avgPerCustomer}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Avg Stamps/Customer"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-yellow-600/20 rounded-lg",children:o.jsx(qx,{className:"w-6 h-6 text-yellow-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-yellow-300",children:"Month over Month"}),o.jsxs("div",{className:`text-sm font-medium ${a(r.growth.monthOverMonth)}`,children:[i(r.growth.monthOverMonth),Math.abs(parseFloat(r.growth.monthOverMonth)),"%"]})]})]}),o.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:r.growth.thisMonth}),o.jsx("div",{className:"text-yellow-300 text-lg",children:"Rewards This Month"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Cn,{className:"w-5 h-5 mr-2 text-blue-400"}),"Customer Segments"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"New (30 days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.new})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"Active (7 days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.active})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"Returning (30 days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.returning})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"Dormant (30+ days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.dormant})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700/50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:r.customers.total}),o.jsx("div",{className:"text-gray-400 text-sm",children:"Total Customers"})]})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Ux,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Top Performing Offers"]}),o.jsx("div",{className:"space-y-3",children:n.map((d,f)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-full flex items-center justify-center text-xs font-bold text-white",children:f+1}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium text-sm",children:d.name}),o.jsxs("div",{className:"text-gray-400 text-xs",children:[d.totalStamps," stamps collected"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-white font-medium text-sm",children:d.totalRewards}),o.jsxs("div",{className:"text-gray-400 text-xs",children:[d.conversionRate,"% conversion"]})]})]},d.offerId))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-green-800/30 border border-green-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Reward Redemption"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Total Earned:"}),o.jsx("span",{className:"text-white font-medium",children:r.rewards.total})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Claimed:"}),o.jsx("span",{className:"text-white font-medium",children:r.rewards.claimed})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Active:"}),o.jsx("span",{className:"text-white font-medium",children:r.rewards.active})]}),o.jsx("div",{className:"pt-2 border-t border-green-700/30",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[r.rewards.redemptionRate,"%"]}),o.jsx("div",{className:"text-green-300 text-sm",children:"Redemption Rate"})]})})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/30 to-blue-800/30 border border-blue-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(Yl,{className:"w-4 h-4 mr-2 text-blue-400"}),"Customer Engagement"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Total Stamps:"}),o.jsx("span",{className:"text-white font-medium",children:r.engagement.totalStamps.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Avg per Customer:"}),o.jsx("span",{className:"text-white font-medium",children:r.engagement.avgPerCustomer})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Very Active:"}),o.jsx("span",{className:"text-white font-medium",children:r.activity.veryActive})]}),o.jsx("div",{className:"pt-2 border-t border-blue-700/30",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.activity.active}),o.jsx("div",{className:"text-blue-300 text-sm",children:"Active This Week"})]})})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/30 to-purple-800/30 border border-purple-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 mr-2 text-purple-400"}),"Offer Utilization"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Total Offers:"}),o.jsx("span",{className:"text-white font-medium",children:r.offers.total})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Active Offers:"}),o.jsx("span",{className:"text-white font-medium",children:r.offers.active})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Utilization:"}),o.jsxs("span",{className:"text-white font-medium",children:[r.offers.utilization,"%"]})]}),o.jsx("div",{className:"pt-2 border-t border-purple-700/30",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-400",children:r.growth.thisMonth}),o.jsx("div",{className:"text-purple-300 text-sm",children:"Rewards This Month"})]})})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Ox,{className:"w-5 h-5 mr-2 text-blue-400"}),"Actionable Business Insights"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-white",children:"Customer Retention"}),o.jsxs("div",{className:"space-y-3",children:[s.dormant>s.active&&o.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-700/50 rounded-lg",children:[o.jsx("div",{className:"text-red-300 font-medium",children:"⚠️ High Dormant Customer Rate"}),o.jsxs("div",{className:"text-red-200 text-sm mt-1",children:[s.dormant," customers haven't been active in 30+ days. Consider re-engagement campaigns."]})]}),r.rewards.redemptionRate<50&&o.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-700/50 rounded-lg",children:[o.jsx("div",{className:"text-yellow-300 font-medium",children:"📊 Low Reward Redemption"}),o.jsxs("div",{className:"text-yellow-200 text-sm mt-1",children:["Only ",r.rewards.redemptionRate,"% of rewards are being claimed. Review reward attractiveness and communication."]})]}),r.offers.utilization<50&&o.jsxs("div",{className:"p-3 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:[o.jsx("div",{className:"text-blue-300 font-medium",children:"🎯 Low Offer Utilization"}),o.jsxs("div",{className:"text-blue-200 text-sm mt-1",children:["Only ",r.offers.utilization,"% of offers are active. Consider deactivating underperforming offers."]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-white",children:"Growth Opportunities"}),o.jsxs("div",{className:"space-y-3",children:[l(r.growth.monthOverMonth)>0&&o.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-700/50 rounded-lg",children:[o.jsx("div",{className:"text-green-300 font-medium",children:"🚀 Positive Growth Trend"}),o.jsxs("div",{className:"text-green-200 text-sm mt-1",children:["Rewards increased by ",r.growth.monthOverMonth,"% this month. Current strategies are working well."]})]}),r.customers.newThisMonth>0&&o.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-700/50 rounded-lg",children:[o.jsx("div",{className:"text-green-300 font-medium",children:"👥 New Customer Acquisition"}),o.jsxs("div",{className:"text-green-200 text-sm mt-1",children:[r.customers.newThisMonth," new customers this month. Focus on converting them to active users."]})]}),n.length>0&&o.jsxs("div",{className:"p-3 bg-purple-900/20 border border-purple-700/50 rounded-lg",children:[o.jsx("div",{className:"text-purple-300 font-medium",children:"⭐ Top Performing Offer"}),o.jsxs("div",{className:"text-purple-200 text-sm mt-1",children:['"',(c=n[0])==null?void 0:c.name,'" is your best performer with'," ",(u=n[0])==null?void 0:u.totalStamps," stamps. Consider similar offers or promotions."]})]})]})]})]})]})]})},Wz=({user:t})=>{g.useState(!1);const[e,r]=g.useState(!1),[n,s]=g.useState({businessName:"Vape Master",businessDescription:"Premium Vape & E-Liquid Loyalty Program",supportEmail:"support@vapemaster.com",supportPhone:"+1 (555) 123-4567",businessHours:"Mon-Fri: 9AM-9PM, Sat-Sun: 10AM-8PM",timezone:"America/New_York"}),[i,a]=g.useState({defaultStampsPerScan:1,maxStampsPerScan:5,defaultStampRequirement:5,maxStampRequirement:50,allowMultipleRewards:!0,rewardExpiryDays:365,autoAssignDefaultOffer:!0}),[l,c]=g.useState({defaultRewardType:"percentage",defaultRewardValue:"20",defaultRewardDescription:"20% OFF",allowCustomRewards:!0,maxRewardValue:"100",requireApproval:!1}),[u,d]=g.useState({sessionTimeoutHours:24,allowMultiDeviceLogin:!0,requireEmailVerification:!0,maxLoginAttempts:5,lockoutDurationMinutes:30,enableAuditLog:!0}),[f,m]=g.useState({emailNotifications:!0,pushNotifications:!0,rewardReminders:!0,inactivityAlerts:!0,adminAlerts:!0,customerUpdates:!0}),[p,w]=g.useState({primaryColor:"#ef4444",secondaryColor:"#1f2937",accentColor:"#f59e0b",logoUrl:"/logo.png",faviconUrl:"/favicon.ico",enableAnimations:!0,enableDarkMode:!0,customCSS:""}),[y,b]=g.useState({dataRetentionDays:2555,allowDataExport:!0,allowDataDeletion:!0,anonymizeOldData:!1,backupFrequency:"daily",enableAnalytics:!0});g.useEffect(()=>{N()},[]);const N=()=>{try{const I=localStorage.getItem("vm_business_settings");if(I){const V=JSON.parse(I);s(V.system||n),a(V.loyalty||i),c(V.rewards||l),d(V.security||u),m(V.notifications||f),w(V.ui||p),b(V.data||y)}}catch(I){console.error("Error loading settings:",I)}},x=async()=>{r(!0);try{const I={system:n,loyalty:i,rewards:l,security:u,notifications:f,ui:p,data:y,lastUpdated:new Date().toISOString(),updatedBy:t.email};localStorage.setItem("vm_business_settings",JSON.stringify(I)),await dq(t,i.defaultStampRequirement,l.defaultRewardDescription,l.defaultRewardType,l.defaultRewardValue,l.defaultRewardDescription),Ye({title:"Settings Saved",description:"All business settings have been updated successfully!"})}catch{Ye({title:"Save Failed",description:"Failed to save some settings. Please try again.",variant:"destructive"})}finally{r(!1)}},E=()=>{window.confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(s({businessName:"Vape Master",businessDescription:"Premium Vape & E-Liquid Loyalty Program",supportEmail:"support@vapemaster.com",supportPhone:"+1 (555) 123-4567",businessHours:"Mon-Fri: 9AM-9PM, Sat-Sun: 10AM-8PM",timezone:"America/New_York"}),a({defaultStampsPerScan:1,maxStampsPerScan:5,defaultStampRequirement:5,maxStampRequirement:50,allowMultipleRewards:!0,rewardExpiryDays:365,autoAssignDefaultOffer:!0}),c({defaultRewardType:"percentage",defaultRewardValue:"20",defaultRewardDescription:"20% OFF",allowCustomRewards:!0,maxRewardValue:"100",requireApproval:!1}),d({sessionTimeoutHours:24,allowMultiDeviceLogin:!0,requireEmailVerification:!0,maxLoginAttempts:5,lockoutDurationMinutes:30,enableAuditLog:!0}),m({emailNotifications:!0,pushNotifications:!0,rewardReminders:!0,inactivityAlerts:!0,adminAlerts:!0,customerUpdates:!0}),w({primaryColor:"#ef4444",secondaryColor:"#1f2937",accentColor:"#f59e0b",logoUrl:"/logo.png",faviconUrl:"/favicon.ico",enableAnimations:!0,enableDarkMode:!0,customCSS:""}),b({dataRetentionDays:2555,allowDataExport:!0,allowDataDeletion:!0,anonymizeOldData:!1,backupFrequency:"daily",enableAnalytics:!0}),Ye({title:"Settings Reset",description:"All settings have been reset to defaults."}))},R=()=>{const I={system:n,loyalty:i,rewards:l,security:u,notifications:f,ui:p,data:y,exportedAt:new Date().toISOString(),exportedBy:t.email},V=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),j=URL.createObjectURL(V),T=document.createElement("a");T.href=j,T.download=`vm_business_settings_${new Date().toISOString().split("T")[0]}.json`,T.click(),URL.revokeObjectURL(j),Ye({title:"Settings Exported",description:"Business settings have been exported successfully!"})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:o.jsx(mp,{className:"w-6 h-6 text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Business Settings"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Configure your loyalty program and business preferences"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Te,{variant:"outline",onClick:R,className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",children:[o.jsx(q1,{className:"w-4 h-4 mr-2"}),"Export"]}),o.jsxs(Te,{variant:"outline",onClick:E,className:"border-yellow-600 text-yellow-400 hover:bg-yellow-600 hover:text-white",children:[o.jsx(RA,{className:"w-4 h-4 mr-2"}),"Reset"]}),o.jsx(Te,{onClick:x,disabled:e,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:e?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O3,{className:"w-4 h-4 mr-2"}),"Save All Settings"]})})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(AA,{className:"w-5 h-5 mr-2 text-blue-400"}),"Business Information"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Business Name"}),o.jsx(Se,{value:n.businessName,onChange:I=>s({...n,businessName:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Your Business Name"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Business Description"}),o.jsx(ic,{value:n.businessDescription,onChange:I=>s({...n,businessDescription:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Describe your business and loyalty program",rows:3})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Support Email"}),o.jsx(Se,{value:n.supportEmail,onChange:I=>s({...n,supportEmail:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"email"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Support Phone"}),o.jsx(Se,{value:n.supportPhone,onChange:I=>s({...n,supportPhone:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Business Hours"}),o.jsx(Se,{value:n.businessHours,onChange:I=>s({...n,businessHours:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"e.g., Mon-Fri: 9AM-9PM, Sat-Sun: 10AM-8PM"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-green-400"}),"Loyalty Program"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Stamps/Scan"}),o.jsx(Se,{value:i.defaultStampsPerScan,onChange:I=>a({...i,defaultStampsPerScan:parseInt(I.target.value)||1}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"10"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Max Stamps/Scan"}),o.jsx(Se,{value:i.maxStampsPerScan,onChange:I=>a({...i,maxStampsPerScan:parseInt(I.target.value)||5}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"20"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Stamp Requirement"}),o.jsx(Se,{value:i.defaultStampRequirement,onChange:I=>a({...i,defaultStampRequirement:parseInt(I.target.value)||5}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"100"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Max Stamp Requirement"}),o.jsx(Se,{value:i.maxStampRequirement,onChange:I=>a({...i,maxStampRequirement:parseInt(I.target.value)||50}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"10",max:"200"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowMultipleRewards",checked:i.allowMultipleRewards,onChange:I=>a({...i,allowMultipleRewards:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowMultipleRewards",className:"text-gray-300 text-sm",children:"Allow multiple rewards per offer"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"autoAssignDefaultOffer",checked:i.autoAssignDefaultOffer,onChange:I=>a({...i,autoAssignDefaultOffer:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"autoAssignDefaultOffer",className:"text-gray-300 text-sm",children:"Auto-assign default offer to new users"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Reward Expiry (Days)"}),o.jsx(Se,{value:i.rewardExpiryDays,onChange:I=>a({...i,rewardExpiryDays:parseInt(I.target.value)||365}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"30",max:"3650"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-purple-400"}),"Reward Configuration"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Reward Type"}),o.jsxs("select",{value:l.defaultRewardType,onChange:I=>c({...l,defaultRewardType:I.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"}),o.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Reward Value"}),o.jsx(Se,{value:l.defaultRewardValue,onChange:I=>c({...l,defaultRewardValue:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"20"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Max Reward Value"}),o.jsx(Se,{value:l.maxRewardValue,onChange:I=>c({...l,maxRewardValue:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"100"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Default Reward Description"}),o.jsx(Se,{value:l.defaultRewardDescription,onChange:I=>c({...l,defaultRewardDescription:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"20% OFF"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowCustomRewards",checked:l.allowCustomRewards,onChange:I=>c({...l,allowCustomRewards:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowCustomRewards",className:"text-gray-300 text-sm",children:"Allow custom reward creation"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"requireApproval",checked:l.requireApproval,onChange:I=>c({...l,requireApproval:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"requireApproval",className:"text-gray-300 text-sm",children:"Require admin approval for rewards"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(Bx,{className:"w-5 h-5 mr-2 text-red-400"}),"Security & Access"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Session Timeout (Hours)"}),o.jsx(Se,{value:u.sessionTimeoutHours,onChange:I=>d({...u,sessionTimeoutHours:parseInt(I.target.value)||24}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"168"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Max Login Attempts"}),o.jsx(Se,{value:u.maxLoginAttempts,onChange:I=>d({...u,maxLoginAttempts:parseInt(I.target.value)||5}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"3",max:"10"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Lockout Duration (Min)"}),o.jsx(Se,{value:u.lockoutDurationMinutes,onChange:I=>d({...u,lockoutDurationMinutes:parseInt(I.target.value)||30}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"15",max:"1440"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowMultiDeviceLogin",checked:u.allowMultiDeviceLogin,onChange:I=>d({...u,allowMultiDeviceLogin:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowMultiDeviceLogin",className:"text-gray-300 text-sm",children:"Allow multi-device login"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"requireEmailVerification",checked:u.requireEmailVerification,onChange:I=>d({...u,requireEmailVerification:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"requireEmailVerification",className:"text-gray-300 text-sm",children:"Require email verification"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableAuditLog",checked:u.enableAuditLog,onChange:I=>d({...u,enableAuditLog:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"enableAuditLog",className:"text-gray-300 text-sm",children:"Enable audit logging"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(T3,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Notifications"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"emailNotifications",checked:f.emailNotifications,onChange:I=>m({...f,emailNotifications:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"emailNotifications",className:"text-gray-300 text-sm",children:"Email notifications"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"pushNotifications",checked:f.pushNotifications,onChange:I=>m({...f,pushNotifications:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"pushNotifications",className:"text-gray-300 text-sm",children:"Push notifications"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"rewardReminders",checked:f.rewardReminders,onChange:I=>m({...f,rewardReminders:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"rewardReminders",className:"text-gray-300 text-sm",children:"Reward reminders"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"inactivityAlerts",checked:f.inactivityAlerts,onChange:I=>m({...f,inactivityAlerts:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"inactivityAlerts",className:"text-gray-300 text-sm",children:"Inactivity alerts"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"adminAlerts",checked:f.adminAlerts,onChange:I=>m({...f,adminAlerts:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"adminAlerts",className:"text-gray-300 text-sm",children:"Admin alerts"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"customerUpdates",checked:f.customerUpdates,onChange:I=>m({...f,customerUpdates:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"customerUpdates",className:"text-gray-300 text-sm",children:"Customer updates"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(P3,{className:"w-5 h-5 mr-2 text-pink-400"}),"UI & Branding"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Primary Color"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(Se,{value:p.primaryColor,onChange:I=>w({...p,primaryColor:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white w-20",type:"color"}),o.jsx(Se,{value:p.primaryColor,onChange:I=>w({...p,primaryColor:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white flex-1",placeholder:"#ef4444"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Secondary Color"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(Se,{value:p.secondaryColor,onChange:I=>w({...p,secondaryColor:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white w-20",type:"color"}),o.jsx(Se,{value:p.secondaryColor,onChange:I=>w({...p,secondaryColor:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white flex-1",placeholder:"#1f2937"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Accent Color"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(Se,{value:p.accentColor,onChange:I=>w({...p,accentColor:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white w-20",type:"color"}),o.jsx(Se,{value:p.accentColor,onChange:I=>w({...p,accentColor:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white flex-1",placeholder:"#f59e0b"})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableAnimations",checked:p.enableAnimations,onChange:I=>w({...p,enableAnimations:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"enableAnimations",className:"text-gray-300 text-sm",children:"Enable animations"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableDarkMode",checked:p.enableDarkMode,onChange:I=>w({...p,enableDarkMode:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"enableDarkMode",className:"text-gray-300 text-sm",children:"Enable dark mode"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Custom CSS"}),o.jsx(ic,{value:p.customCSS,onChange:I=>w({...p,customCSS:I.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"/* Custom CSS styles */",rows:3})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(q1,{className:"w-5 h-5 mr-2 text-indigo-400"}),"Data & Privacy"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Data Retention (Days)"}),o.jsx(Se,{value:y.dataRetentionDays,onChange:I=>b({...y,dataRetentionDays:parseInt(I.target.value)||2555}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"365",max:"3650"})]}),o.jsxs("div",{children:[o.jsx(Ne,{className:"text-gray-300 text-sm",children:"Backup Frequency"}),o.jsxs("select",{value:y.backupFrequency,onChange:I=>b({...y,backupFrequency:I.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[o.jsx("option",{value:"hourly",children:"Hourly"}),o.jsx("option",{value:"daily",children:"Daily"}),o.jsx("option",{value:"weekly",children:"Weekly"}),o.jsx("option",{value:"monthly",children:"Monthly"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowDataExport",checked:y.allowDataExport,onChange:I=>b({...y,allowDataExport:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowDataExport",className:"text-gray-300 text-sm",children:"Allow data export"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowDataDeletion",checked:y.allowDataDeletion,onChange:I=>b({...y,allowDataDeletion:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"allowDataDeletion",className:"text-gray-300 text-sm",children:"Allow data deletion"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"anonymizeOldData",checked:y.anonymizeOldData,onChange:I=>b({...y,anonymizeOldData:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"anonymizeOldData",className:"text-gray-300 text-sm",children:"Anonymize old data"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableAnalytics",checked:y.enableAnalytics,onChange:I=>b({...y,enableAnalytics:I.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(Ne,{htmlFor:"enableAnalytics",className:"text-gray-300 text-sm",children:"Enable analytics"})]})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(ds,{className:"w-5 h-5 mr-2 text-green-400"}),"Settings Summary"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Business:"}),o.jsx("span",{className:"text-white",children:n.businessName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Default Stamps:"}),o.jsx("span",{className:"text-white",children:i.defaultStampRequirement})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Default Reward:"}),o.jsx("span",{className:"text-white",children:l.defaultRewardDescription})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Session Timeout:"}),o.jsxs("span",{className:"text-white",children:[u.sessionTimeoutHours,"h"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Multi-Device:"}),o.jsx("span",{className:"text-white",children:u.allowMultiDeviceLogin?"Enabled":"Disabled"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Audit Log:"}),o.jsx("span",{className:"text-white",children:u.enableAuditLog?"Enabled":"Disabled"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Notifications:"}),o.jsx("span",{className:"text-white",children:f.emailNotifications?"Email":"Disabled"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Data Retention:"}),o.jsxs("span",{className:"text-white",children:[y.dataRetentionDays," days"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Backup:"}),o.jsx("span",{className:"text-white",children:y.backupFrequency})]})]})]})]})]})},Qz=({user:t,allUsers:e,offers:r,onLogout:n,onScan:s})=>{var D;const[i,a]=g.useState(()=>localStorage.getItem("adminActiveTab")||"overview"),[l,c]=g.useState(""),[u,d]=g.useState("all"),[f,m]=g.useState("all"),[p,w]=g.useState(!1),[y,b]=g.useState(r),N=Xn();g.useEffect(()=>{b(r)},[r]),g.useEffect(()=>{if((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="super_admin"){const P=Aa(ft,"offers"),B=Md(P,jw("createdAt","desc")),z=Fp(B,Y=>{const ee=[];Y.forEach(U=>{ee.push({...U.data(),offerId:U.id})}),b(ee)},Y=>{console.error("Error listening to offers:",Y)});return()=>z()}},[t==null?void 0:t.role]);const x=async()=>{try{const P=await s2();b(P),console.log("Offers refreshed successfully. New offers count:",P.length)}catch(P){console.error("Failed to refresh offers:",P)}},E=e.filter(P=>{const B=P.name.toLowerCase().includes(l.toLowerCase())||P.email.toLowerCase().includes(l.toLowerCase()),z=u==="all"||u==="active"&&P.lastScanAt&&new Date().getTime()-P.lastScanAt.toDate().getTime()<7*24*60*60*1e3||u==="inactive"&&(!P.lastScanAt||new Date().getTime()-P.lastScanAt.toDate().getTime()>=7*24*60*60*1e3),Y=f==="all"||P.role===f;return B&&z&&Y}),R=e.length,I=e.filter(P=>P.role==="customer"),V=I.filter(P=>P.lastScanAt&&new Date().getTime()-P.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,j=I.reduce((P,B)=>{var z;return P+(((z=B.completedRewards)==null?void 0:z.length)||0)},0),T=y.length,S=y.filter(P=>P.isActive).length;g.useEffect(()=>{Nt("admin_dashboard_view",{tab:i,user_id:t.id})},[i,t.id]);const k=[{id:"overview",label:"Overview",icon:Ox,color:"text-blue-400"},{id:"users",label:"Users",icon:Cn,color:"text-green-400"},{id:"offers",label:"Offers",icon:st,color:"text-purple-400"},{id:"rewards",label:"Rewards",icon:zr,color:"text-yellow-400"},{id:"analytics",label:"Analytics",icon:qx,color:"text-indigo-400"},{id:"settings",label:"Settings",icon:mp,color:"text-red-400"}],L=P=>{a(P),localStorage.setItem("adminActiveTab",P),w(!1)};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[p&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>w(!1)}),o.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 bg-gray-900/95 backdrop-blur-sm border-r border-red-800/50 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${p?"translate-x-0":"-translate-x-full"}`,children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-red-800/30",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"}),o.jsx("p",{className:"text-red-300 text-sm",children:"Vape Master"})]}),o.jsx("button",{onClick:()=>w(!1),className:"lg:hidden text-gray-400 hover:text-white",children:o.jsx(hs,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"p-6 border-b border-red-800/30",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-lg font-bold",children:t.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:t.name}),o.jsx("div",{className:"text-gray-400 text-sm capitalize",children:t.role.replace("_"," ")})]})]})}),o.jsx("nav",{className:"flex-1 p-4 space-y-2",children:k.map(P=>{const B=P.icon;return o.jsxs("button",{onClick:()=>L(P.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ${i===P.id?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-800/50"}`,children:[o.jsx(B,{className:`w-5 h-5 ${i===P.id?"text-white":P.color}`}),o.jsx("span",{className:"font-medium",children:P.label})]},P.id)})}),o.jsxs("div",{className:"p-4 space-y-3 border-t border-red-800/30",children:[o.jsxs(Te,{onClick:s,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:[o.jsx(D3,{className:"w-4 h-4 mr-2"}),"Scan QR"]}),o.jsxs(Te,{onClick:()=>N("/dashboard"),variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",children:[o.jsx(R3,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),o.jsxs(Te,{onClick:n,variant:"outline",className:"w-full border-red-600 text-red-300 hover:bg-red-700/20",children:[o.jsx(SA,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),o.jsxs("div",{className:"lg:pl-80",children:[o.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50 sticky top-0 z-30",children:o.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>w(!0),className:"lg:hidden text-gray-400 hover:text-white",children:o.jsx(I3,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:(D=k.find(P=>P.id===i))==null?void 0:D.label}),o.jsxs("p",{className:"text-red-300 text-sm",children:[i==="overview"&&"System overview and key metrics",i==="users"&&"Manage users and permissions",i==="offers"&&"Create and manage loyalty offers",i==="rewards"&&"Track rewards and redemptions",i==="analytics"&&"Performance insights and reports",i==="settings"&&"System configuration and preferences"]})]})]}),o.jsxs("div",{className:"hidden md:flex items-center space-x-6 text-sm",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white font-semibold",children:R}),o.jsx("div",{className:"text-gray-400",children:"Users"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white font-semibold",children:T}),o.jsx("div",{className:"text-gray-400",children:"Offers"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white font-semibold",children:j}),o.jsx("div",{className:"text-gray-400",children:"Rewards"})]})]})]})}),o.jsxs("div",{className:"p-6",children:[i==="overview"&&o.jsx(qz,{totalUsers:R,customers:I,activeUsers:V,totalRewards:j,totalOffers:T,activeOffers:S,recentUsers:e.slice(0,5)}),i==="users"&&o.jsx(Gz,{users:E,searchTerm:l,setSearchTerm:c,statusFilter:u,setStatusFilter:d,roleFilter:f,setRoleFilter:m}),i==="offers"&&o.jsx($z,{offers:y,userRole:t.role,onOfferCreated:x,currentUser:t}),i==="rewards"&&o.jsx(zz,{allUsers:e}),i==="analytics"&&o.jsx(Hz,{allUsers:e,offers:y}),i==="settings"&&o.jsx(Wz,{user:t})]})]})]})},Yz=()=>{const{user:t,loading:e,settings:r,allUsers:n,allUsersLoading:s,offers:i,showConfetti:a,confettiKey:l,lastUpdateTime:c,activeTab:u,setActiveTab:d,userPurchaseLimit:f,purchasesRemaining:m,handleLogout:p,navigate:w,handleOfferSelection:y}=qq(),[b,N]=g.useState(!1),[x,E]=g.useState(null),[R,I]=g.useState(!1),[V,j]=g.useState(null);if(e)return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsx(Lz,{}),o.jsx("div",{className:"flex-1 px-6 pb-6",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(Fz,{}),o.jsx(Vz,{}),o.jsx(Bz,{})]})})]});if(!t)return null;const T=u==="progress",S=u==="offers",k=t.role==="customer";return t.role==="admin"||t.role==="super_admin"?o.jsx(Qz,{user:t,allUsers:n,offers:i,onLogout:p,onScan:()=>w("/scan")}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a&&o.jsx(u2,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:200,recycle:!1},l),o.jsx(Jq,{title:"Dashboard",onBack:()=>w("/"),actions:o.jsx(Oz,{user:t,handleLogout:p,navigate:w})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(rG,{activeTab:u,onTabChange:d,userRole:t.role}),S&&k&&o.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-green-300 mb-2 flex items-center",children:[o.jsx(st,{className:"w-6 h-6 mr-2 text-green-400"}),"Available Offers"]}),o.jsx("p",{className:"text-green-200/80 text-sm",children:"Choose an offer and start collecting stamps to earn rewards"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:i&&i.length>0?o.jsx("div",{className:"grid gap-4",children:i.filter(D=>{var B;return D.isActive?!0:((B=t.completedRewards)==null?void 0:B.find(z=>{var Y,ee,U;return((Y=z.offerSnapshot)==null?void 0:Y.offerId)===D.offerId&&((ee=z.scanHistory)==null?void 0:ee.length)<((U=z.offerSnapshot)==null?void 0:U.stampRequirement)&&!z.claimedAt}))!==void 0}).map(D=>{var z,Y;const P=(z=t.completedRewards)==null?void 0:z.find(ee=>{var U,H,ie;return((U=ee.offerSnapshot)==null?void 0:U.offerId)===D.offerId&&((H=ee.scanHistory)==null?void 0:H.length)>=((ie=ee.offerSnapshot)==null?void 0:ie.stampRequirement)&&!ee.claimedAt}),B=(Y=t.completedRewards)==null?void 0:Y.find(ee=>{var U,H,ie;return((U=ee.offerSnapshot)==null?void 0:U.offerId)===D.offerId&&((H=ee.scanHistory)==null?void 0:H.length)<((ie=ee.offerSnapshot)==null?void 0:ie.stampRequirement)&&!ee.claimedAt});return o.jsxs("div",{className:`bg-gradient-to-br ${B?"from-green-900/40 to-green-800/40 border-green-600/50 hover:from-green-900/50 hover:to-green-800/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50 hover:from-gray-800/50 hover:to-gray-700/50"} border rounded-xl p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-lg`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-white mb-1",children:D.name}),o.jsx("p",{className:"text-gray-300 text-sm",children:D.description}),!D.isActive&&o.jsx("div",{className:"mt-2 text-xs text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded-full inline-block",children:"⚠️ Offer is inactive - you can continue collecting stamps"})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${B?D.isActive?"bg-green-600/80 text-white border border-green-500/50 shadow-lg":"bg-yellow-600/80 text-white border border-yellow-500/50 shadow-lg":"bg-gray-600/80 text-gray-200 border border-gray-500/50"}`,children:B?D.isActive?"ACTIVE":"CONTINUING":"AVAILABLE"})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Required Stamps:"}),o.jsx("span",{className:"text-white font-medium",children:D.stampRequirement})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Reward:"}),o.jsx("span",{className:"text-white font-medium",children:D.rewardDescription})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white font-medium capitalize",children:D.rewardType})]})]}),o.jsx("div",{className:"flex justify-center",children:B?o.jsx("button",{onClick:()=>{const ee={userId:t.id,userEmail:t.email,userName:t.name,offerId:D.offerId,offerName:D.name,stampsPerScan:D.stampsPerScan||1,timestamp:new Date().toISOString()};j(ee),I(!0)},className:`w-full px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg ${D.isActive?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white":"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white"}`,children:D.isActive?"Continue Collecting":"Continue Collecting (Inactive)"}):o.jsx("button",{onClick:()=>{const ee={userId:t.id,userEmail:t.email,userName:t.name,offerId:D.offerId,offerName:D.name,stampsPerScan:D.stampsPerScan||1,timestamp:new Date().toISOString()};j(ee),I(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg",children:P?"Start New Reward":"Start Collecting"})})]},D.offerId)})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(st,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),o.jsx("div",{className:"text-gray-300 text-lg font-medium mb-2",children:"No active offers available"}),o.jsx("div",{className:"text-gray-500 text-sm",children:"Check back later for new offers"})]})})]}),T&&o.jsx(o.Fragment,{children:k?o.jsx("div",{className:"h-[720px] overflow-hidden",children:o.jsx(nG,{user:t,userPurchaseLimit:f,settings:r,purchasesRemaining:m,onViewReward:()=>w("/scan"),currentOffer:i==null?void 0:i.find(D=>D.offerId===t.currentOfferId)})}):o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-blue-300 mb-2 flex items-center",children:[o.jsx(zr,{className:"w-6 h-6 mr-2 text-blue-400"}),"User Progress Tracking"]}),o.jsx("p",{className:"text-blue-200/80 text-sm",children:"Real-time updates of all user loyalty progress"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:o.jsx(tG,{users:n.filter(D=>D.role==="customer"),loading:s})})]})}),u==="card"&&(t.role==="super_admin"?o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[o.jsx(zs,{className:"w-6 h-6 mr-2 text-purple-400"}),"Rewards History"]}),o.jsx("p",{className:"text-purple-200/80 text-sm",children:"Complete overview of all user rewards and redemptions"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:o.jsx(eG,{allUsers:n})})]}):o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[o.jsx(zs,{className:"w-6 h-6 mr-2 text-purple-400"}),"Your Rewards"]}),o.jsx("p",{className:"text-purple-200/80 text-sm",children:"Track your progress and manage your earned rewards"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:o.jsx(fG,{user:t,offers:i})})]}))]})}),b&&x&&o.jsx(Uz,{reward:x,onClose:()=>{N(!1),E(null)}}),R&&V&&o.jsx(C2,{qrData:V,isOpen:R,onClose:()=>{I(!1),j(null)}})]})},Kz=()=>{var m,p,w,y;const{user:t,loading:e,redeemReward:r}=Es(),n=Xn(),[s,i]=g.useState(null);if(g.useEffect(()=>{Nt("page_view",{page:"Rewards"})},[]),g.useEffect(()=>{!e&&!t&&n("/login")},[t,e,n]),e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t)return null;const a=async b=>{i(b);try{await r(b),Ye({title:"Reward Redeemed!",description:"Your reward has been successfully redeemed."}),Nt("reward_redeemed",{reward_id:b,user_id:t.id}),window.location.reload()}catch{Ye({title:"Error",description:"Failed to redeem reward. Please try again.",variant:"destructive"})}finally{i(null)}},l=b=>{switch(b){case"percentage":return"💯";case"fixed_amount":return"💰";case"free_item":return"🎁";default:return"🎉"}},c=b=>{switch(b){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}},u=((m=t.completedRewards)==null?void 0:m.filter(b=>!b.claimedAt))||[],d=((p=t.completedRewards)==null?void 0:p.filter(b=>b.claimedAt))||[],f=t.currentReward;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[o.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50",children:o.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(Te,{variant:"ghost",size:"sm",onClick:()=>n("/dashboard"),className:"text-red-300 hover:text-white hover:bg-red-900/30",children:[o.jsx(cc,{className:"w-5 h-5 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:"My Rewards"}),o.jsx("p",{className:"text-red-300 text-sm",children:"Manage and redeem your earned rewards"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-white text-sm",children:"Total Rewards"}),o.jsx("div",{className:"text-2xl font-bold text-red-400",children:((w=t.completedRewards)==null?void 0:w.length)||0})]})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[f&&o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(qn,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Current Progress"]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:t.purchases}),o.jsxs("div",{className:"text-sm text-gray-400",children:["of ",f.settingsSnapshot.purchaseLimit," ","purchases"]})]})]}),o.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 mb-4",children:o.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 h-3 rounded-full transition-all duration-500",style:{width:`${t.purchases/f.settingsSnapshot.purchaseLimit*100}%`}})}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-lg font-semibold text-white mb-2",children:[l(f.rewardType)," ",f.rewardDescription]}),o.jsx("p",{className:"text-gray-300 text-sm",children:f.settingsSnapshot.descriptionMessage})]})]})}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-green-400"}),"Available Rewards (",u.length,")"]}),u.length===0?o.jsxs("div",{className:"text-center py-12 bg-gradient-to-r from-gray-900/50 to-red-900/50 border border-gray-700/50 rounded-xl",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),o.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Available Rewards"}),o.jsx("p",{className:"text-gray-400 mb-4",children:"Complete your purchase goal to earn your first reward!"}),o.jsx(Te,{onClick:()=>n("/dashboard"),className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800",children:"Go to Dashboard"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(b=>o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6 hover:border-red-600/70 transition-all duration-300 hover:shadow-lg hover:shadow-red-500/20",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"text-4xl mb-2",children:l(b.rewardType)}),o.jsx("div",{className:"text-xl font-bold text-white mb-1",children:b.rewardDescription}),o.jsxs("div",{className:"text-sm text-gray-400",children:["Earned on ",b.createdAt.toDate().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:b.rewardType})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:b.rewardValue})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Goal:"}),o.jsxs("span",{className:"text-white",children:[b.settingsSnapshot.purchaseLimit," purchases"]})]})]}),o.jsxs(Te,{onClick:()=>a(b.rewardId),disabled:s===b.rewardId,className:`w-full bg-gradient-to-r ${c(b.rewardType)} hover:opacity-90 transition-all duration-300`,children:[s===b.rewardId?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):o.jsx(ds,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})]},b.rewardId))})]}),d.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(ds,{className:"w-5 h-5 mr-2 text-green-400"}),"Claimed Rewards (",d.length,")"]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(b=>{var N;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border border-gray-700/50 rounded-xl p-6 opacity-75",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"text-4xl mb-2",children:l(b.rewardType)}),o.jsx("div",{className:"text-xl font-bold text-gray-300 mb-1",children:b.rewardDescription}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Claimed on"," ",(N=b.claimedAt)==null?void 0:N.toDate().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Type:"}),o.jsx("span",{className:"text-gray-300 capitalize",children:b.rewardType})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Value:"}),o.jsx("span",{className:"text-gray-300",children:b.rewardValue})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Goal:"}),o.jsxs("span",{className:"text-gray-300",children:[b.settingsSnapshot.purchaseLimit," purchases"]})]})]}),o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-green-900/50 border border-green-600/50 rounded-full",children:[o.jsx(ds,{className:"w-4 h-4 mr-2 text-green-400"}),o.jsx("span",{className:"text-green-300 text-sm font-medium",children:"REDEEMED"})]})})]},b.rewardId)})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(Ux,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Reward Statistics"]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:((y=t.completedRewards)==null?void 0:y.length)||0}),o.jsx("div",{className:"text-sm text-gray-400",children:"Total Earned"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-400",children:d.length}),o.jsx("div",{className:"text-sm text-gray-400",children:"Redeemed"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:u.length}),o.jsx("div",{className:"text-sm text-gray-400",children:"Available"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.purchases}),o.jsx("div",{className:"text-sm text-gray-400",children:"Current Progress"})]})]})]})]})]})},Jz=()=>{const{user:t,loading:e,allUsers:r}=Es(),n=Xn(),[s,i]=g.useState([]),[a,l]=g.useState(!0);g.useState(!1),g.useState(!1);const[c,u]=g.useState("offers");return g.useEffect(()=>{Nt("page_view",{page:"Settings"})},[]),g.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),g.useEffect(()=>{t&&(async()=>{try{l(!0);const f=await Su();if(f.length===0){await XC(t);const m=await Su();i(m)}else i(f)}catch(f){console.error("Error loading offers:",f);try{await XC(t);const m=await Su();i(m)}catch(m){console.error("Error creating default offer:",m)}}finally{l(!1)}})()},[t]),e||a?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):!t||t.role!=="admin"&&t.role!=="super_admin"?null:o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(si,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Settings"})]}),o.jsxs("div",{className:"flex items-center text-gray-400",children:[o.jsx(mp,{className:"w-6 h-6 mr-2"}),o.jsx("span",{className:"text-sm",children:"Admin Panel"})]})]})}),o.jsx("div",{className:"flex-1 px-6 py-8",children:o.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex space-x-1 mb-8 bg-gray-800/50 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>u("offers"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="offers"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Manage Offers"]}),o.jsxs("button",{onClick:()=>u("rewards"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="rewards"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Rewards History"]}),o.jsxs("button",{onClick:()=>u("analytics"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="analytics"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(Ox,{className:"w-4 h-4 mr-2"}),"Analytics"]}),o.jsxs("button",{onClick:()=>u("users"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="users"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(Cn,{className:"w-4 h-4 mr-2"}),"User Management"]})]}),c==="offers"&&o.jsx(Xz,{offers:s,onOffersChange:i,user:t}),c==="rewards"&&o.jsx(Zz,{allUsers:r}),c==="analytics"&&o.jsx(eH,{allUsers:r}),c==="users"&&o.jsx(tH,{allUsers:r})]})})]})]})},Xz=({offers:t,onOffersChange:e,user:r})=>{const[n,s]=g.useState(!1),[i,a]=g.useState(!1),[l,c]=g.useState(""),[u,d]=g.useState(""),[f,m]=g.useState(5),[p,w]=g.useState("percentage"),[y,b]=g.useState("20"),[N,x]=g.useState("20% OFF"),E=async()=>{if(!l.trim()||!u.trim()||!y.trim()||!N.trim()){Ye({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});return}s(!0);try{await Iq(r,{name:l.trim(),description:u.trim(),stampRequirement:f,stampsPerScan:1,rewardType:p,rewardValue:y.trim(),rewardDescription:N.trim(),isActive:!0});const R=await Su();e(R),a(!1),c(""),d(""),m(5),w("percentage"),b("20"),x("20% OFF"),Ye({title:"Offer Created",description:"New offer has been created successfully!"})}catch{Ye({title:"Creation Failed",description:"Failed to create offer. Please try again.",variant:"destructive"})}finally{s(!1)}};return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Offers"}),o.jsx("p",{className:"text-gray-400",children:"Create and manage loyalty program offers for customers"})]}),o.jsx("div",{className:"mb-8 text-center",children:o.jsxs(Te,{onClick:()=>a(!0),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold px-6 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300",children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})}),i&&o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6 mb-8",children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create New Offer"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"offerName",className:"text-white font-medium",children:"Offer Name"}),o.jsx(Se,{id:"offerName",value:l,onChange:R=>c(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"e.g., Welcome Offer, Summer Special"})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"offerDescription",className:"text-white font-medium",children:"Description"}),o.jsx(ic,{id:"offerDescription",value:u,onChange:R=>d(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Describe what customers need to do to earn this reward"})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"stampRequirement",className:"text-white font-medium",children:"Stamps Required"}),o.jsx(Se,{id:"stampRequirement",type:"number",min:"1",max:"50",value:f,onChange:R=>m(parseInt(R.target.value)||1),className:"bg-gray-700/50 border-gray-600 text-white mt-1"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"rewardType",className:"text-white font-medium",children:"Reward Type"}),o.jsxs("select",{id:"rewardType",value:p,onChange:R=>w(R.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"rewardValue",className:"text-white font-medium",children:"Reward Value"}),o.jsx(Se,{id:"rewardValue",value:y,onChange:R=>b(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:p==="percentage"?"20":p==="fixed_amount"?"5.00":"Free Coffee"})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"rewardDescription",className:"text-white font-medium",children:"Reward Description"}),o.jsx(Se,{id:"rewardDescription",value:N,onChange:R=>x(R.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:p==="percentage"?"20% OFF":p==="fixed_amount"?"$5.00 OFF":"Free Coffee"})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(Te,{variant:"outline",onClick:()=>a(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),o.jsx(Te,{onClick:E,disabled:n,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Offer"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Current Offers"}),t.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),o.jsx("h4",{className:"text-xl font-semibold text-white mb-2",children:"No Offers Yet"}),o.jsx("p",{className:"text-gray-400",children:"Create your first offer to get started!"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(R=>o.jsxs("div",{className:`bg-gradient-to-br ${R.isActive?"from-green-900/40 to-green-800/40 border-green-700/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50"} border rounded-xl p-4`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"text-lg font-semibold text-white",children:R.name}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:R.isActive?"ACTIVE":"INACTIVE"})]}),o.jsx("p",{className:"text-gray-300 text-sm mb-3",children:R.description}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Stamps:"}),o.jsx("span",{className:"text-white",children:R.stampRequirement})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Reward:"}),o.jsx("span",{className:"text-white",children:R.rewardDescription})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:R.rewardType})]})]})]},R.offerId))})]})]})},Zz=({allUsers:t})=>{const e=a=>{var c,u;if((c=a.offerSnapshot)!=null&&c.stampRequirement)return a.offerSnapshot.stampRequirement;const l=a;return(u=l.settingsSnapshot)!=null&&u.purchaseLimit?l.settingsSnapshot.purchaseLimit:"Unknown"},r=t.flatMap(a=>(a.completedRewards||[]).map(l=>({...l,userName:a.name,userEmail:a.email,userId:a.id}))),n=r.filter(a=>!a.claimedAt),s=r.filter(a=>a.claimedAt),i=r.filter(a=>a.expiresAt?new Date>a.expiresAt.toDate():!1);return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Rewards History & Status"}),o.jsx("p",{className:"text-gray-400",children:"Monitor all rewards across the system"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.length}),o.jsx("div",{className:"text-blue-300 text-sm",children:"Total Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-400",children:n.length}),o.jsx("div",{className:"text-green-300 text-sm",children:"Active Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:s.length}),o.jsx("div",{className:"text-yellow-300 text-sm",children:"Claimed Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-400",children:i.length}),o.jsx("div",{className:"text-red-300 text-sm",children:"Expired Rewards"})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(da,{className:"w-5 h-5 mr-2 text-green-400"}),"Active Rewards (",n.length,")"]}),n.length===0?o.jsxs("div",{className:"text-center py-8 bg-gray-800/30 rounded-xl",children:[o.jsx("div",{className:"text-4xl mb-2",children:"🎯"}),o.jsx("p",{className:"text-gray-400",children:"No active rewards at the moment"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(a=>o.jsxs("div",{className:"bg-gradient-to-br from-green-900/40 to-green-800/40 border border-green-700/50 rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-lg font-semibold text-white",children:a.rewardDescription}),o.jsx("div",{className:"text-xs text-green-300 bg-green-900/50 px-2 py-1 rounded-full",children:"ACTIVE"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"User:"}),o.jsx("span",{className:"text-white",children:a.userName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:a.rewardType})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:a.rewardValue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Goal:"}),o.jsxs("span",{className:"text-white",children:[e(a)," purchases"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Earned:"}),o.jsx("span",{className:"text-white",children:a.createdAt.toDate().toLocaleDateString()})]})]})]},a.rewardId))})]}),s.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(ds,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Claimed Rewards (",s.length,")"]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.slice(0,6).map(a=>{var l;return o.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 border border-yellow-700/50 rounded-xl p-4 opacity-75",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-lg font-semibold text-white",children:a.rewardDescription}),o.jsx("div",{className:"text-xs text-yellow-300 bg-yellow-900/50 px-2 py-1 rounded-full",children:"CLAIMED"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"User:"}),o.jsx("span",{className:"text-white",children:a.userName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Claimed:"}),o.jsx("span",{className:"text-white",children:(l=a.claimedAt)==null?void 0:l.toDate().toLocaleDateString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:a.rewardType})]})]})]},a.rewardId)})}),s.length>6&&o.jsx("div",{className:"text-center mt-4",children:o.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 6 of ",s.length," claimed rewards"]})})]})]})},eH=({allUsers:t})=>{const e=t.filter(s=>s.role==="customer"),r=e.reduce((s,i)=>{var a;return s+(((a=i.completedRewards)==null?void 0:a.length)||0)},0),n=e.filter(s=>s.lastScanAt&&new Date().getTime()-s.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length;return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"System Analytics"}),o.jsx("p",{className:"text-gray-400",children:"Overview of loyalty program performance"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:e.length}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"}),o.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"Active loyalty members"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:r}),o.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"}),o.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Earned by customers"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:n}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),o.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]})]}),o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(qx,{className:"w-5 h-5 mr-2 text-green-400"}),"Recent Activity"]}),o.jsx("div",{className:"space-y-3",children:e.slice(0,5).map(s=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-bold",children:s.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:s.name}),o.jsx("div",{className:"text-gray-400 text-sm",children:s.email})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-white font-medium",children:[s.purchases," purchases"]}),o.jsx("div",{className:"text-gray-400 text-sm",children:s.lastScanAt?s.lastScanAt.toDate().toLocaleDateString():"Never"})]})]},s.id))})]})]})},tH=({allUsers:t})=>{const e=t.filter(n=>n.role==="customer"),r=t.filter(n=>n.role==="admin"||n.role==="super_admin");return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),o.jsx("p",{className:"text-gray-400",children:"Overview of all system users"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t.length}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),o.jsx("div",{className:"text-green-300 text-lg",children:"Customers"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r.length}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Administrators"})]})]}),o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Cn,{className:"w-5 h-5 mr-2 text-blue-400"}),"Customer Overview"]}),o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-700",children:[o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Name"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Email"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Purchases"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Rewards"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Last Scan"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Status"})]})}),o.jsx("tbody",{children:e.slice(0,10).map(n=>{var s;return o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[o.jsx("td",{className:"p-3 text-white",children:n.name}),o.jsx("td",{className:"p-3 text-gray-300",children:n.email}),o.jsx("td",{className:"p-3 text-white",children:n.purchases}),o.jsx("td",{className:"p-3 text-white",children:((s=n.completedRewards)==null?void 0:s.length)||0}),o.jsx("td",{className:"p-3 text-gray-300",children:n.lastScanAt?n.lastScanAt.toDate().toLocaleDateString():"Never"}),o.jsx("td",{className:"p-3",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-700/50"}`,children:n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})})]},n.id)})})]}),e.length>10&&o.jsx("div",{className:"text-center mt-4",children:o.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 10 of ",e.length," customers"]})})]})]})]})};function vN(t,[e,r]){return Math.min(r,Math.max(e,t))}function rH(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var nH=[" ","Enter","ArrowUp","ArrowDown"],sH=[" ","Enter"],Gd="Select",[ng,sg,iH]=Ed(Gd),[Tc,nQ]=Cd(Gd,[iH,Ec]),ig=Ec(),[oH,Ro]=Tc(Gd),[aH,lH]=Tc(Gd),Bj=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:p,form:w}=t,y=ig(e),[b,N]=g.useState(null),[x,E]=g.useState(null),[R,I]=g.useState(!1),V=Kp(u),[j=!1,T]=Wu({prop:n,defaultProp:s,onChange:i}),[S,k]=Wu({prop:a,defaultProp:l,onChange:c}),L=g.useRef(null),D=b?w||!!b.closest("form"):!0,[P,B]=g.useState(new Set),z=Array.from(P).map(Y=>Y.props.value).join(";");return o.jsx(PI,{...y,children:o.jsxs(oH,{required:p,scope:e,trigger:b,onTriggerChange:N,valueNode:x,onValueNodeChange:E,valueNodeHasChildren:R,onValueNodeHasChildrenChange:I,contentId:sa(),value:S,onValueChange:k,open:j,onOpenChange:T,dir:V,triggerPointerDownPosRef:L,disabled:m,children:[o.jsx(ng.Provider,{scope:e,children:o.jsx(aH,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(Y=>{B(ee=>new Set(ee).add(Y))},[]),onNativeOptionRemove:g.useCallback(Y=>{B(ee=>{const U=new Set(ee);return U.delete(Y),U})},[]),children:r})}),D?o.jsxs(dP,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:S,onChange:Y=>k(Y.target.value),disabled:m,form:w,children:[S===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},z):null]})})};Bj.displayName=Gd;var Uj="SelectTrigger",qj=g.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=ig(r),a=Ro(Uj,r),l=a.disabled||n,c=ut(e,a.onTriggerChange),u=sg(r),d=g.useRef("touch"),[f,m,p]=hP(y=>{const b=u().filter(E=>!E.disabled),N=b.find(E=>E.value===a.value),x=fP(b,y,N);x!==void 0&&a.onValueChange(x.value)}),w=y=>{l||(a.onOpenChange(!0),p()),y&&(a.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return o.jsx(Kw,{asChild:!0,...i,children:o.jsx($e.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":uP(a.value)?"":void 0,...s,ref:c,onClick:xe(s.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&w(y)}),onPointerDown:xe(s.onPointerDown,y=>{d.current=y.pointerType;const b=y.target;b.hasPointerCapture(y.pointerId)&&b.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(w(y),y.preventDefault())}),onKeyDown:xe(s.onKeyDown,y=>{const b=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(b&&y.key===" ")&&nH.includes(y.key)&&(w(),y.preventDefault())})})})});qj.displayName=Uj;var Gj="SelectValue",$j=g.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:a="",...l}=t,c=Ro(Gj,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=ut(e,c.onValueNodeChange);return Tr(()=>{u(d)},[u,d]),o.jsx($e.span,{...l,ref:f,style:{pointerEvents:"none"},children:uP(c.value)?o.jsx(o.Fragment,{children:a}):i})});$j.displayName=Gj;var cH="SelectIcon",zj=g.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return o.jsx($e.span,{"aria-hidden":!0,...s,ref:e,children:n||"▼"})});zj.displayName=cH;var uH="SelectPortal",Hj=t=>o.jsx(dp,{asChild:!0,...t});Hj.displayName=uH;var wa="SelectContent",Wj=g.forwardRef((t,e)=>{const r=Ro(wa,t.__scopeSelect),[n,s]=g.useState();if(Tr(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?Ca.createPortal(o.jsx(Qj,{scope:t.__scopeSelect,children:o.jsx(ng.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(Yj,{...t,ref:e})});Wj.displayName=wa;var On=10,[Qj,Io]=Tc(wa),dH="SelectContentImpl",Yj=g.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:y,avoidCollisions:b,...N}=t,x=Ro(wa,r),[E,R]=g.useState(null),[I,V]=g.useState(null),j=ut(e,Z=>R(Z)),[T,S]=g.useState(null),[k,L]=g.useState(null),D=sg(r),[P,B]=g.useState(!1),z=g.useRef(!1);g.useEffect(()=>{if(E)return M2(E)},[E]),N2();const Y=g.useCallback(Z=>{const[de,...G]=D().map(Ce=>Ce.ref.current),[me]=G.slice(-1),Ee=document.activeElement;for(const Ce of Z)if(Ce===Ee||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===de&&I&&(I.scrollTop=0),Ce===me&&I&&(I.scrollTop=I.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==Ee))return},[D,I]),ee=g.useCallback(()=>Y([T,E]),[Y,T,E]);g.useEffect(()=>{P&&ee()},[P,ee]);const{onOpenChange:U,triggerPointerDownPosRef:H}=x;g.useEffect(()=>{if(E){let Z={x:0,y:0};const de=me=>{var Ee,Ce;Z={x:Math.abs(Math.round(me.pageX)-(((Ee=H.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(me.pageY)-(((Ce=H.current)==null?void 0:Ce.y)??0))}},G=me=>{Z.x<=10&&Z.y<=10?me.preventDefault():E.contains(me.target)||U(!1),document.removeEventListener("pointermove",de),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",G,{capture:!0})}}},[E,U,H]),g.useEffect(()=>{const Z=()=>U(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[U]);const[ie,ne]=hP(Z=>{const de=D().filter(Ee=>!Ee.disabled),G=de.find(Ee=>Ee.ref.current===document.activeElement),me=fP(de,Z,G);me&&setTimeout(()=>me.ref.current.focus())}),le=g.useCallback((Z,de,G)=>{const me=!z.current&&!G;(x.value!==void 0&&x.value===de||me)&&(S(Z),me&&(z.current=!0))},[x.value]),he=g.useCallback(()=>E==null?void 0:E.focus(),[E]),_e=g.useCallback((Z,de,G)=>{const me=!z.current&&!G;(x.value!==void 0&&x.value===de||me)&&L(Z)},[x.value]),Me=n==="popper"?wv:Kj,ue=Me===wv?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:y,avoidCollisions:b}:{};return o.jsx(Qj,{scope:r,content:E,viewport:I,onViewportChange:V,itemRefCallback:le,selectedItem:T,onItemLeave:he,itemTextRefCallback:_e,focusSelectedItem:ee,selectedItemText:k,position:n,isPositioned:P,searchRef:ie,children:o.jsx(cb,{as:ua,allowPinchZoom:!0,children:o.jsx(lb,{asChild:!0,trapped:x.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:xe(s,Z=>{var de;(de=x.trigger)==null||de.focus({preventScroll:!0}),Z.preventDefault()}),children:o.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:o.jsx(Me,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Z=>Z.preventDefault(),...N,...ue,onPlaced:()=>B(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:xe(N.onKeyDown,Z=>{const de=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!de&&Z.key.length===1&&ne(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let me=D().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const Ee=Z.target,Ce=me.indexOf(Ee);me=me.slice(Ce+1)}setTimeout(()=>Y(me)),Z.preventDefault()}})})})})})})});Yj.displayName=dH;var hH="SelectItemAlignedPosition",Kj=g.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=Ro(wa,r),a=Io(wa,r),[l,c]=g.useState(null),[u,d]=g.useState(null),f=ut(e,j=>d(j)),m=sg(r),p=g.useRef(!1),w=g.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:N,focusSelectedItem:x}=a,E=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&y&&b&&N){const j=i.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),S=i.valueNode.getBoundingClientRect(),k=N.getBoundingClientRect();if(i.dir!=="rtl"){const Ee=k.left-T.left,Ce=S.left-Ee,pe=j.left-Ce,ve=j.width+pe,at=Math.max(ve,T.width),ht=window.innerWidth-On,Ft=vN(Ce,[On,Math.max(On,ht-at)]);l.style.minWidth=ve+"px",l.style.left=Ft+"px"}else{const Ee=T.right-k.right,Ce=window.innerWidth-S.right-Ee,pe=window.innerWidth-j.right-Ce,ve=j.width+pe,at=Math.max(ve,T.width),ht=window.innerWidth-On,Ft=vN(Ce,[On,Math.max(On,ht-at)]);l.style.minWidth=ve+"px",l.style.right=Ft+"px"}const L=m(),D=window.innerHeight-On*2,P=y.scrollHeight,B=window.getComputedStyle(u),z=parseInt(B.borderTopWidth,10),Y=parseInt(B.paddingTop,10),ee=parseInt(B.borderBottomWidth,10),U=parseInt(B.paddingBottom,10),H=z+Y+P+U+ee,ie=Math.min(b.offsetHeight*5,H),ne=window.getComputedStyle(y),le=parseInt(ne.paddingTop,10),he=parseInt(ne.paddingBottom,10),_e=j.top+j.height/2-On,Me=D-_e,ue=b.offsetHeight/2,Z=b.offsetTop+ue,de=z+Y+Z,G=H-de;if(de<=_e){const Ee=L.length>0&&b===L[L.length-1].ref.current;l.style.bottom="0px";const Ce=u.clientHeight-y.offsetTop-y.offsetHeight,pe=Math.max(Me,ue+(Ee?he:0)+Ce+ee),ve=de+pe;l.style.height=ve+"px"}else{const Ee=L.length>0&&b===L[0].ref.current;l.style.top="0px";const pe=Math.max(_e,z+y.offsetTop+(Ee?le:0)+ue)+G;l.style.height=pe+"px",y.scrollTop=de-_e+y.offsetTop}l.style.margin=`${On}px 0`,l.style.minHeight=ie+"px",l.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,u,y,b,N,i.dir,n]);Tr(()=>E(),[E]);const[R,I]=g.useState();Tr(()=>{u&&I(window.getComputedStyle(u).zIndex)},[u]);const V=g.useCallback(j=>{j&&w.current===!0&&(E(),x==null||x(),w.current=!1)},[E,x]);return o.jsx(mH,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:V,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:o.jsx($e.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Kj.displayName=hH;var fH="SelectPopperPosition",wv=g.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=On,...i}=t,a=ig(r);return o.jsx(Jw,{...a,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wv.displayName=fH;var[mH,xb]=Tc(wa,{}),bv="SelectViewport",Jj=g.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=Io(bv,r),a=xb(bv,r),l=ut(e,i.onViewportChange),c=g.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(ng.Slot,{scope:r,children:o.jsx($e.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:xe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const p=Math.abs(c.current-d.scrollTop);if(p>0){const w=window.innerHeight-On*2,y=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),N=Math.max(y,b);if(N<w){const x=N+p,E=Math.min(w,x),R=x-E;f.style.height=E+"px",f.style.bottom==="0px"&&(d.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});Jj.displayName=bv;var Xj="SelectGroup",[pH,gH]=Tc(Xj),yH=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=sa();return o.jsx(pH,{scope:r,id:s,children:o.jsx($e.div,{role:"group","aria-labelledby":s,...n,ref:e})})});yH.displayName=Xj;var Zj="SelectLabel",eP=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=gH(Zj,r);return o.jsx($e.div,{id:s.id,...n,ref:e})});eP.displayName=Zj;var Wm="SelectItem",[vH,tP]=Tc(Wm),rP=g.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...a}=t,l=Ro(Wm,r),c=Io(Wm,r),u=l.value===n,[d,f]=g.useState(i??""),[m,p]=g.useState(!1),w=ut(e,x=>{var E;return(E=c.itemRefCallback)==null?void 0:E.call(c,x,n,s)}),y=sa(),b=g.useRef("touch"),N=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(vH,{scope:r,value:n,disabled:s,textId:y,isSelected:u,onItemTextChange:g.useCallback(x=>{f(E=>E||((x==null?void 0:x.textContent)??"").trim())},[]),children:o.jsx(ng.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:o.jsx($e.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:w,onFocus:xe(a.onFocus,()=>p(!0)),onBlur:xe(a.onBlur,()=>p(!1)),onClick:xe(a.onClick,()=>{b.current!=="mouse"&&N()}),onPointerUp:xe(a.onPointerUp,()=>{b.current==="mouse"&&N()}),onPointerDown:xe(a.onPointerDown,x=>{b.current=x.pointerType}),onPointerMove:xe(a.onPointerMove,x=>{var E;b.current=x.pointerType,s?(E=c.onItemLeave)==null||E.call(c):b.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xe(a.onPointerLeave,x=>{var E;x.currentTarget===document.activeElement&&((E=c.onItemLeave)==null||E.call(c))}),onKeyDown:xe(a.onKeyDown,x=>{var R;((R=c.searchRef)==null?void 0:R.current)!==""&&x.key===" "||(sH.includes(x.key)&&N(),x.key===" "&&x.preventDefault())})})})})});rP.displayName=Wm;var cu="SelectItemText",nP=g.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,a=Ro(cu,r),l=Io(cu,r),c=tP(cu,r),u=lH(cu,r),[d,f]=g.useState(null),m=ut(e,N=>f(N),c.onItemTextChange,N=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,N,c.value,c.disabled)}),p=d==null?void 0:d.textContent,w=g.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=u;return Tr(()=>(y(w),()=>b(w)),[y,b,w]),o.jsxs(o.Fragment,{children:[o.jsx($e.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ca.createPortal(i.children,a.valueNode):null]})});nP.displayName=cu;var sP="SelectItemIndicator",iP=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return tP(sP,r).isSelected?o.jsx($e.span,{"aria-hidden":!0,...n,ref:e}):null});iP.displayName=sP;var Ev="SelectScrollUpButton",oP=g.forwardRef((t,e)=>{const r=Io(Ev,t.__scopeSelect),n=xb(Ev,t.__scopeSelect),[s,i]=g.useState(!1),a=ut(e,n.onScrollButtonChange);return Tr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(lP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});oP.displayName=Ev;var Cv="SelectScrollDownButton",aP=g.forwardRef((t,e)=>{const r=Io(Cv,t.__scopeSelect),n=xb(Cv,t.__scopeSelect),[s,i]=g.useState(!1),a=ut(e,n.onScrollButtonChange);return Tr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(lP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});aP.displayName=Cv;var lP=g.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=Io("SelectScrollButton",r),a=g.useRef(null),l=sg(r),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),Tr(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),o.jsx($e.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:xe(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:xe(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:xe(s.onPointerLeave,()=>{c()})})}),xH="SelectSeparator",cP=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return o.jsx($e.div,{"aria-hidden":!0,...n,ref:e})});cP.displayName=xH;var Nv="SelectArrow",wH=g.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ig(r),i=Ro(Nv,r),a=Io(Nv,r);return i.open&&a.position==="popper"?o.jsx(Xw,{...s,...n,ref:e}):null});wH.displayName=Nv;function uP(t){return t===""||t===void 0}var dP=g.forwardRef((t,e)=>{const{value:r,...n}=t,s=g.useRef(null),i=ut(e,s),a=rH(r);return g.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==r&&d){const f=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(f)}},[a,r]),o.jsx(Td,{asChild:!0,children:o.jsx("select",{...n,ref:i,defaultValue:r})})});dP.displayName="BubbleSelect";function hP(t){const e=Nr(t),r=g.useRef(""),n=g.useRef(0),s=g.useCallback(a=>{const l=r.current+a;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function fP(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let a=bH(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function bH(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var EH=Bj,mP=qj,CH=$j,NH=zj,TH=Hj,pP=Wj,_H=Jj,gP=eP,yP=rP,AH=nP,SH=iP,vP=oP,xP=aP,wP=cP;const RH=EH,IH=CH,bP=g.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(mP,{ref:n,className:ot("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,o.jsx(NH,{asChild:!0,children:o.jsx(Qu,{className:"h-4 w-4 opacity-50"})})]}));bP.displayName=mP.displayName;const EP=g.forwardRef(({className:t,...e},r)=>o.jsx(vP,{ref:r,className:ot("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(ym,{className:"h-4 w-4"})}));EP.displayName=vP.displayName;const CP=g.forwardRef(({className:t,...e},r)=>o.jsx(xP,{ref:r,className:ot("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(Qu,{className:"h-4 w-4"})}));CP.displayName=xP.displayName;const NP=g.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>o.jsx(TH,{children:o.jsxs(pP,{ref:s,className:ot("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[o.jsx(EP,{}),o.jsx(_H,{className:ot("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(CP,{})]})}));NP.displayName=pP.displayName;const jH=g.forwardRef(({className:t,...e},r)=>o.jsx(gP,{ref:r,className:ot("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));jH.displayName=gP.displayName;const Bf=g.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(yP,{ref:n,className:ot("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(SH,{children:o.jsx(_A,{className:"h-4 w-4"})})}),o.jsx(AH,{children:e})]}));Bf.displayName=yP.displayName;const PH=g.forwardRef(({className:t,...e},r)=>o.jsx(wP,{ref:r,className:ot("-mx-1 my-1 h-px bg-muted",t),...e}));PH.displayName=wP.displayName;const kH=()=>{const{user:t,loading:e,updateUserRole:r}=Es(),n=Xn(),[s,i]=g.useState([]),[a,l]=g.useState(!0),[c,u]=g.useState(null),[d,f]=g.useState(null),[m,p]=g.useState(null);if(g.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),g.useEffect(()=>{const x=async()=>{if(!(!t||t.role!=="super_admin"))try{const E=Aa(ft,"users"),R=Md(E,jw("createdAt","desc")),I=await Op(R),V=[];I.forEach(j=>{const T=j.data();V.push({id:j.id,name:T.name,email:T.email,role:T.role||"customer",purchases:T.purchases||0,createdAt:T.createdAt})}),i(V)}catch(E){console.error("Error loading users:",E),Ye({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{l(!1)}};(t==null?void 0:t.role)==="super_admin"&&x()},[t]),e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t||t.role!=="super_admin")return null;const w=async(x,E)=>{if(x===t.id){Ye({title:"Cannot Update Own Role",description:"You cannot change your own role",variant:"destructive"});return}u(x);try{await r(x,E),Ye({title:"Role Updated",description:"User role has been updated successfully!"}),i(R=>R.map(I=>I.id===x?{...I,role:E}:I))}catch(R){console.error("Error updating role:",R),Ye({title:"Update Failed",description:"Failed to update user role. Please try again.",variant:"destructive"})}finally{u(null)}},y=async x=>{f(x);try{await TR($t(ft,"users",x)),i(E=>E.filter(R=>R.id!==x)),Ye({title:"User Deleted",description:"The user has been deleted successfully."})}catch(E){console.error("Error deleting user:",E),Ye({title:"Delete Failed",description:"Failed to delete user. Please try again.",variant:"destructive"})}finally{f(null),p(null)}},b=x=>{switch(x){case"super_admin":return o.jsx(Ty,{className:"w-4 h-4 text-yellow-500"});case"admin":return o.jsx(Bx,{className:"w-4 h-4 text-blue-500"});case"customer":return o.jsx(zs,{className:"w-4 h-4 text-gray-500"});default:return o.jsx(zs,{className:"w-4 h-4 text-gray-500"})}},N=x=>{switch(x){case"super_admin":return"text-yellow-500 bg-yellow-500/10 border-yellow-500/20";case"admin":return"text-blue-500 bg-blue-500/10 border-blue-500/20";case"customer":return"text-gray-500 bg-gray-500/10 border-gray-500/20";default:return"text-gray-500 bg-gray-500/10 border-gray-500/20"}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(si,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"User Management"})]}),o.jsxs("div",{className:"flex items-center text-gray-400",children:[o.jsx(Ty,{className:"w-6 h-6 mr-2 text-yellow-500"}),o.jsx("span",{className:"text-sm",children:"Super Admin Panel"})]})]})}),o.jsx("div",{className:"flex-1 px-6 py-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Users"}),o.jsx("p",{className:"text-gray-400",children:"Update user roles and permissions"})]}),a?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white",children:"Loading users..."})]}):o.jsx("div",{className:"space-y-4",children:s.map(x=>o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[b(x.role),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold",children:x.name}),o.jsx("p",{className:"text-gray-400 text-sm",children:x.email}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${N(x.role)}`,children:x.role.replace("_"," ").toUpperCase()}),o.jsxs("span",{className:"text-gray-500 text-xs",children:[x.purchases," purchases"]})]})]})]})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[x.id!==t.id&&o.jsx(o.Fragment,{children:o.jsxs(RH,{value:x.role,onValueChange:E=>w(x.id,E),disabled:c===x.id,children:[o.jsx(bP,{className:"w-32 bg-gray-700 border-gray-600 text-white",children:o.jsx(IH,{})}),o.jsxs(NP,{className:"bg-gray-800 border-gray-700",children:[o.jsx(Bf,{value:"customer",children:"Customer"}),o.jsx(Bf,{value:"admin",children:"Admin"}),o.jsx(Bf,{value:"super_admin",children:"Super Admin"})]})]})}),x.id===t.id&&o.jsx("span",{className:"text-gray-500 text-sm",children:"Current User"})]})]},x.id))}),s.length===0&&!a&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Cn,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No users found"})]})]})})})]}),m&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:o.jsxs("div",{className:"bg-gray-900 rounded-lg p-8 border border-red-700 shadow-xl w-full max-w-sm",children:[o.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Confirm Delete"}),o.jsxs("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to delete"," ",o.jsx("span",{className:"font-semibold text-red-400",children:m.name}),"? This action cannot be undone."]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(Te,{variant:"ghost",onClick:()=>p(null),className:"text-gray-300 hover:text-white",children:"Cancel"}),o.jsx(Te,{variant:"destructive",onClick:()=>y(m.id),disabled:d===m.id,children:d===m.id?"Deleting...":"Delete"})]})]})})]})},MH=()=>{const t=ai();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};let TP=!0,_P=!0;function uu(t,e,r){const n=t.match(e);return n&&n.length>=r&&parseFloat(n[r],10)}function Pa(t,e,r){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype,s=n.addEventListener;n.addEventListener=function(a,l){if(a!==e)return s.apply(this,arguments);const c=u=>{const d=r(u);d&&(l.handleEvent?l.handleEvent(d):l(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,c),s.apply(this,[a,c])};const i=n.removeEventListener;n.removeEventListener=function(a,l){if(a!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(l))return i.apply(this,arguments);const c=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[a,c])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function DH(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(TP=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function OH(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(_P=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function AP(){if(typeof window=="object"){if(TP)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function wb(t,e){_P&&console.warn(t+" is deprecated, please use "+e+" instead.")}function LH(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=t;if(r.userAgentData&&r.userAgentData.brands){const n=r.userAgentData.brands.find(s=>s.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(r.mozGetUserMedia)e.browser="firefox",e.version=parseInt(uu(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(uu(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(uu(r.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=uu(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function xN(t){return Object.prototype.toString.call(t)==="[object Object]"}function SP(t){return xN(t)?Object.keys(t).reduce(function(e,r){const n=xN(t[r]),s=n?SP(t[r]):t[r],i=n&&!Object.keys(s).length;return s===void 0||i?e:Object.assign(e,{[r]:s})},{}):t}function Tv(t,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?Tv(t,t.get(e[n]),r):n.endsWith("Ids")&&e[n].forEach(s=>{Tv(t,t.get(s),r)})}))}function wN(t,e,r){const n=r?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const i=[];return t.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&i.push(a)}),i.forEach(a=>{t.forEach(l=>{l.type===n&&l.trackId===a.id&&Tv(t,l,s)})}),s}const bN=AP;function RP(t,e){const r=t&&t.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const c={};return Object.keys(l).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const d=typeof l[u]=="object"?l[u]:{ideal:l[u]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const f=function(m,p){return m?m+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(d.ideal!==void 0){c.optional=c.optional||[];let m={};typeof d.ideal=="number"?(m[f("min",u)]=d.ideal,c.optional.push(m),m={},m[f("max",u)]=d.ideal,c.optional.push(m)):(m[f("",u)]=d.ideal,c.optional.push(m))}d.exact!==void 0&&typeof d.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[f("",u)]=d.exact):["min","max"].forEach(m=>{d[m]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[f(m,u)]=d[m])})}),l.advanced&&(c.optional=(c.optional||[]).concat(l.advanced)),c},s=function(l,c){if(e.version>=61)return c(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const u=function(d,f,m){f in d&&!(m in d)&&(d[m]=d[f],delete d[f])};l=JSON.parse(JSON.stringify(l)),u(l.audio,"autoGainControl","googAutoGainControl"),u(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let u=l.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const d=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete l.video.facingMode;let f;if(u.exact==="environment"||u.ideal==="environment"?f=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(f=["front"]),f)return r.mediaDevices.enumerateDevices().then(m=>{m=m.filter(w=>w.kind==="videoinput");let p=m.find(w=>f.some(y=>w.label.toLowerCase().includes(y)));return!p&&m.length&&f.includes("back")&&(p=m[m.length-1]),p&&(l.video.deviceId=u.exact?{exact:p.deviceId}:{ideal:p.deviceId}),l.video=n(l.video),bN("chrome: "+JSON.stringify(l)),c(l)})}l.video=n(l.video)}return bN("chrome: "+JSON.stringify(l)),c(l)},i=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(l,c,u){s(l,d=>{r.webkitGetUserMedia(d,c,f=>{u&&u(i(f))})})};if(r.getUserMedia=a.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(c){return s(c,u=>l(u).then(d=>{if(u.audio&&!d.getAudioTracks().length||u.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(i(d))))}}}function IP(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function jP(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.track.id):i={track:s.track};const a=new Event("track");a.track=s.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[n.stream],this.dispatchEvent(a)}),n.stream.getTracks().forEach(s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.id):i={track:s};const a=new Event("track");a.track=s,a.receiver=i,a.transceiver={receiver:i},a.streams=[n.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Pa(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function PP(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=s.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,c){let u=s.apply(this,arguments);return u||(u=e(this,l),this._senders.push(u)),u};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){i.apply(this,arguments);const c=this._senders.indexOf(l);c!==-1&&this._senders.splice(c,1)}}const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(a=>{this._senders.push(e(this,a))})};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(a=>{const l=this._senders.find(c=>c.track===a);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function kP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(a=>a._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(a=>wN(a,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=r.apply(this,[]);return s.forEach(i=>i._pc=this),s}),Pa(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>wN(i,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const n=arguments[0];let s,i,a;return this.getSenders().forEach(l=>{l.track===n&&(s?a=!0:s=l)}),this.getReceivers().forEach(l=>(l.track===n&&(i?a=!0:i=l),l.track===n)),a||s&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function MP(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(c)===-1&&this._shimmedLocalStreams[l.id].push(c):this._shimmedLocalStreams[l.id]=[l,c],c};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(u=>{if(this.getSenders().find(f=>f.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const c=this.getSenders().filter(u=>l.indexOf(u)===-1);this._shimmedLocalStreams[a.id]=[a].concat(c)};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],n.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const c=this._shimmedLocalStreams[l].indexOf(a);c!==-1&&this._shimmedLocalStreams[l].splice(c,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),s.apply(this,arguments)}}function DP(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return MP(t);const r=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const d=r.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(f=>this._reverseStreams[f.id])};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(f=>{if(this.getSenders().find(p=>p.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const f=new t.MediaStream(d.getTracks());this._streams[d.id]=f,this._reverseStreams[f.id]=d,d=f}n.apply(this,[d])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},t.RTCPeerConnection.prototype.addTrack=function(d,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const m=[].slice.call(arguments,1);if(m.length!==1||!m[0].getTracks().find(y=>y===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const w=this._streams[f.id];if(w)w.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new t.MediaStream([d]);this._streams[f.id]=y,this._reverseStreams[y.id]=f,this.addStream(y)}return this.getSenders().find(y=>y.track===d)};function i(u,d){let f=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const p=u._reverseStreams[m],w=u._streams[p.id];f=f.replace(new RegExp(w.id,"g"),p.id)}),new RTCSessionDescription({type:d.type,sdp:f})}function a(u,d){let f=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const p=u._reverseStreams[m],w=u._streams[p.id];f=f.replace(new RegExp(p.id,"g"),w.id)}),new RTCSessionDescription({type:d.type,sdp:f})}["createOffer","createAnswer"].forEach(function(u){const d=t.RTCPeerConnection.prototype[u],f={[u](){const m=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[w=>{const y=i(this,w);m[0].apply(null,[y])},w=>{m[1]&&m[1].apply(null,w)},arguments[2]]):d.apply(this,arguments).then(w=>i(this,w))}};t.RTCPeerConnection.prototype[u]=f[u]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=a(this,arguments[0]),l.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=c.get.apply(this);return u.type===""?u:i(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let m;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(y=>d.track===y)&&(m=this._streams[p])}),m&&(m.getTracks().length===1?this.removeStream(this._reverseStreams[m.id]):m.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function _v(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=t.RTCPeerConnection.prototype[r],s={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=s[r]})}function OP(t,e){Pa(t,"negotiationneeded",r=>{const n=r.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const EN=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:OP,shimAddTrackRemoveTrack:DP,shimAddTrackRemoveTrackWithNative:MP,shimGetSendersWithDtmf:PP,shimGetUserMedia:RP,shimMediaStream:IP,shimOnTrack:jP,shimPeerConnection:_v,shimSenderReceiverGetStats:kP},Symbol.toStringTag,{value:"Module"}));function LP(t,e){const r=t&&t.navigator,n=t&&t.MediaStreamTrack;if(r.getUserMedia=function(s,i,a){wb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(s).then(i,a)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const s=function(a,l,c){l in a&&!(c in a)&&(a[c]=a[l],delete a[l])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),s(a.audio,"autoGainControl","mozAutoGainControl"),s(a.audio,"noiseSuppression","mozNoiseSuppression")),i(a)},n&&n.prototype.getSettings){const a=n.prototype.getSettings;n.prototype.getSettings=function(){const l=a.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[l])}}}}function FH(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}function FP(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Av(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const i=t.RTCPeerConnection.prototype[s],a={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=a[s]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,a,l]=arguments;return n.apply(this,[i||null]).then(c=>{if(e.version<53&&!a)try{c.forEach(u=>{u.type=r[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;c.forEach((d,f)=>{c.set(f,Object.assign({},d,{type:r[d.type]||d.type}))})}return c}).then(a,l)}}function VP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(i=>i._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function BP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n}),Pa(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function UP(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){wb("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function qP(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function GP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const s=n.length>0;s&&n.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=e.apply(this,arguments);if(s){const{sender:a}=i,l=a.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n,a.sendEncodings=n,this.setParametersPromises.push(a.setParameters(l).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return i})}function $P(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function zP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function HP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const CN=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:GP,shimCreateAnswer:HP,shimCreateOffer:zP,shimGetDisplayMedia:FH,shimGetParameters:$P,shimGetUserMedia:LP,shimOnTrack:FP,shimPeerConnection:Av,shimRTCDataChannel:qP,shimReceiverGetStats:BP,shimRemoveStream:UP,shimSenderGetStats:VP},Symbol.toStringTag,{value:"Module"}));function WP(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(s=>e.call(this,s,n)),n.getVideoTracks().forEach(s=>e.call(this,s,n))},t.RTCPeerConnection.prototype.addTrack=function(n,...s){return s&&s.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const s=r.getTracks();this.getSenders().forEach(i=>{s.includes(i.track)&&this.removeTrack(i)})})}}function QP(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,this.dispatchEvent(i)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(i=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(i)>=0)return;n._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,n.dispatchEvent(a)})}),e.apply(n,arguments)}}}function YP(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,r=e.createOffer,n=e.createAnswer,s=e.setLocalDescription,i=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(u,d){const f=arguments.length>=2?arguments[2]:arguments[0],m=r.apply(this,[f]);return d?(m.then(u,d),Promise.resolve()):m},e.createAnswer=function(u,d){const f=arguments.length>=2?arguments[2]:arguments[0],m=n.apply(this,[f]);return d?(m.then(u,d),Promise.resolve()):m};let l=function(c,u,d){const f=s.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f};e.setLocalDescription=l,l=function(c,u,d){const f=i.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f},e.setRemoteDescription=l,l=function(c,u,d){const f=a.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f},e.addIceCandidate=l}function KP(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,n=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=s=>n(JP(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(n,s,i){e.mediaDevices.getUserMedia(n).then(s,i)}).bind(e))}function JP(t){return t&&t.video!==void 0?Object.assign({},t,{video:SP(t.video)}):t}function XP(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,s){if(n&&n.iceServers){const i=[];for(let a=0;a<n.iceServers.length;a++){let l=n.iceServers[a];l.urls===void 0&&l.url?(wb("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,i.push(l)):i.push(n.iceServers[a])}n.iceServers=i}return new e(n,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function ZP(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ek(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function tk(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const NN=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:tk,shimCallbacksAPI:YP,shimConstraints:JP,shimCreateOfferLegacy:ek,shimGetUserMedia:KP,shimLocalStreamsAPI:WP,shimRTCIceServerUrls:XP,shimRemoteStreamsAPI:QP,shimTrackEventTransceiver:ZP},Symbol.toStringTag,{value:"Module"}));var rk={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(r){return r.split(`
m=`).map((s,i)=>(i>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(r){const n=e.splitSections(r);return n&&n[0]},e.getMediaSections=function(r){const n=e.splitSections(r);return n.shift(),n},e.matchPrefix=function(r,n){return e.splitLines(r).filter(s=>s.indexOf(n)===0)},e.parseCandidate=function(r){let n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");const s={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let i=8;i<n.length;i+=2)switch(n[i]){case"raddr":s.relatedAddress=n[i+1];break;case"rport":s.relatedPort=parseInt(n[i+1],10);break;case"tcptype":s.tcpType=n[i+1];break;case"ufrag":s.ufrag=n[i+1],s.usernameFragment=n[i+1];break;default:s[n[i]]===void 0&&(s[n[i]]=n[i+1]);break}return s},e.writeCandidate=function(r){const n=[];n.push(r.foundation);const s=r.component;s==="rtp"?n.push(1):s==="rtcp"?n.push(2):n.push(s),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);const i=r.type;return n.push("typ"),n.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let n=r.substring(9).split(" ");const s={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),s.name=n[0],s.clockRate=parseInt(n[1],10),s.channels=n.length===3?parseInt(n[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);const s=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(r){const n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const n={};let s;const i=r.substring(r.indexOf(" ")+1).split(";");for(let a=0;a<i.length;a++)s=i[a].trim().split("="),n[s[0].trim()]=s[1];return n},e.writeFmtp=function(r){let n="",s=r.payloadType;if(r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const i=[];Object.keys(r.parameters).forEach(a=>{r.parameters[a]!==void 0?i.push(a+"="+r.parameters[a]):i.push(a)}),n+="a=fmtp:"+s+" "+i.join(";")+`\r
`}return n},e.parseRtcpFb=function(r){const n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(r){let n="",s=r.payloadType;return r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(i=>{n+="a=rtcp-fb:"+s+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(r){const n=r.indexOf(" "),s={ssrc:parseInt(r.substring(7,n),10)},i=r.indexOf(":",n);return i>-1?(s.attribute=r.substring(n+1,i),s.value=r.substring(i+1)):s.attribute=r.substring(n+1),s},e.parseSsrcGroup=function(r){const n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(s=>parseInt(s,10))}},e.getMid=function(r){const n=e.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(r){const n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:e.matchPrefix(r+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,n){let s="a=setup:"+n+`\r
`;return r.fingerprints.forEach(i=>{s+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),s},e.parseCryptoLine=function(r){const n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,n){return e.matchPrefix(r+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,n){const s=e.matchPrefix(r+n,"a=ice-ufrag:")[0],i=e.matchPrefix(r+n,"a=ice-pwd:")[0];return s&&i?{usernameFragment:s.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(r){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(r)[0].split(" ");n.profile=i[2];for(let l=3;l<i.length;l++){const c=i[l],u=e.matchPrefix(r,"a=rtpmap:"+c+" ")[0];if(u){const d=e.parseRtpMap(u),f=e.matchPrefix(r,"a=fmtp:"+c+" ");switch(d.parameters=f.length?e.parseFmtp(f[0]):{},d.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),n.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(d.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(l=>{n.headerExtensions.push(e.parseExtmap(l))});const a=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(l=>{a.forEach(c=>{l.rtcpFeedback.find(d=>d.type===c.type&&d.parameter===c.parameter)||l.rtcpFeedback.push(c)})}),n},e.writeRtpDescription=function(r,n){let s="";s+="m="+r+" ",s+=n.codecs.length>0?"9":"0",s+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=n.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(a=>{s+=e.writeRtpMap(a),s+=e.writeFmtp(a),s+=e.writeRtcpFb(a)});let i=0;return n.codecs.forEach(a=>{a.maxptime>i&&(i=a.maxptime)}),i>0&&(s+="a=maxptime:"+i+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(a=>{s+=e.writeExtmap(a)}),s},e.parseRtpEncodingParameters=function(r){const n=[],s=e.parseRtpParameters(r),i=s.fecMechanisms.indexOf("RED")!==-1,a=s.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(r,"a=ssrc:").map(m=>e.parseSsrcMedia(m)).filter(m=>m.attribute==="cname"),c=l.length>0&&l[0].ssrc;let u;const d=e.matchPrefix(r,"a=ssrc-group:FID").map(m=>m.substring(17).split(" ").map(w=>parseInt(w,10)));d.length>0&&d[0].length>1&&d[0][0]===c&&(u=d[0][1]),s.codecs.forEach(m=>{if(m.name.toUpperCase()==="RTX"&&m.parameters.apt){let p={ssrc:c,codecPayloadType:parseInt(m.parameters.apt,10)};c&&u&&(p.rtx={ssrc:u}),n.push(p),i&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(p))}}),n.length===0&&c&&n.push({ssrc:c});let f=e.matchPrefix(r,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,n.forEach(m=>{m.maxBitrate=f})),n},e.parseRtcpParameters=function(r){const n={},s=e.matchPrefix(r,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];s&&(n.cname=s.value,n.ssrc=s.ssrc);const i=e.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=i.length===0;const a=e.matchPrefix(r,"a=rtcp-mux");return n.mux=a.length>0,n},e.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},e.parseMsid=function(r){let n;const s=e.matchPrefix(r,"a=msid:");if(s.length===1)return n=s[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=e.matchPrefix(r,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(i.length>0)return n=i[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(r){const n=e.parseMLine(r),s=e.matchPrefix(r,"a=max-message-size:");let i;s.length>0&&(i=parseInt(s[0].substring(19),10)),isNaN(i)&&(i=65536);const a=e.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const l=e.matchPrefix(r,"a=sctpmap:");if(l.length>0){const c=l[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:i}}},e.writeSctpDescription=function(r,n){let s=[];return r.protocol!=="DTLS/SCTP"?s=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:s=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&s.push("a=max-message-size:"+n.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,n,s){let i;const a=n!==void 0?n:2;return r?i=r:i=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+i+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,n){const s=e.splitLines(r);for(let i=0;i<s.length;i++)switch(s[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[i].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const s=e.splitLines(r)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(r){const s=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const n=e.splitLines(r);for(let s=0;s<n.length;s++)if(n[s].length<2||n[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(rk);var nk=rk.exports;const Pl=Mv(nk),VH=FN({__proto__:null,default:Pl},[nk]);function Uf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const s=new e(n),i=Pl.parseCandidate(n.candidate);for(const a in i)a in s||Object.defineProperty(s,a,{value:i[a]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(n)},t.RTCIceCandidate.prototype=e.prototype,Pa(t,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Sv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Pa(t,"icecandidate",e=>{if(e.candidate){const r=Pl.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function qf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const c=Pl.splitSections(l.sdp);return c.shift(),c.some(u=>{const d=Pl.parseMLine(u);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},n=function(l){const c=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const u=parseInt(c[1],10);return u!==u?-1:u},s=function(l){let c=65536;return e.browser==="firefox"&&(e.version<57?l===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},i=function(l,c){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const d=Pl.matchPrefix(l.sdp,"a=max-message-size:");return d.length>0?u=parseInt(d[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(u=2147483637),u},a=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const c=n(arguments[0]),u=s(c),d=i(arguments[0],c);let f;u===0&&d===0?f=Number.POSITIVE_INFINITY:u===0||d===0?f=Math.max(u,d):f=Math.min(u,d);const m={};Object.defineProperty(m,"maxMessageSize",{get(){return f}}),this._sctp=m}return a.apply(this,arguments)}}function Gf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(n,s){const i=n.send;n.send=function(){const l=arguments[0],c=l.length||l.size||l.byteLength;if(n.readyState==="open"&&s.sctp&&c>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return i.apply(n,arguments)}}const r=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=r.apply(this,arguments);return e(s,this),s},Pa(t,"datachannel",n=>(e(n.channel,n.target),n))}function Rv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const i=s.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const a=new Event("connectionstatechange",s);i.dispatchEvent(a)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Iv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=s.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:i}):s.sdp=i}return r.apply(this,arguments)}}function $f(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function zf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return r.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?r.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>r.apply(this,[a]))})}const BH=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Iv,shimAddIceCandidateNullOrEmpty:$f,shimConnectionState:Rv,shimMaxMessageSize:qf,shimParameterlessSetLocalDescription:zf,shimRTCIceCandidate:Uf,shimRTCIceCandidateRelayProtocol:Sv,shimSendThrowTypeError:Gf},Symbol.toStringTag,{value:"Module"}));function UH({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=AP,n=LH(t),s={browserDetails:n,commonShim:BH,extractVersion:uu,disableLog:DH,disableWarnings:OH,sdp:VH};switch(n.browser){case"chrome":if(!EN||!_v||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),s;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),s;r("adapter.js shimming chrome."),s.browserShim=EN,$f(t,n),zf(t),RP(t,n),IP(t),_v(t,n),jP(t),DP(t,n),PP(t),kP(t),OP(t,n),Uf(t),Sv(t),Rv(t),qf(t,n),Gf(t),Iv(t,n);break;case"firefox":if(!CN||!Av||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),s;r("adapter.js shimming firefox."),s.browserShim=CN,$f(t,n),zf(t),LP(t,n),Av(t,n),FP(t),UP(t),VP(t),BP(t),qP(t),GP(t),$P(t),zP(t),HP(t),Uf(t),Rv(t),qf(t,n),Gf(t);break;case"safari":if(!NN||!e.shimSafari)return r("Safari shim is not included in this adapter release."),s;r("adapter.js shimming safari."),s.browserShim=NN,$f(t,n),zf(t),XP(t),ek(t),YP(t),WP(t),QP(t),ZP(t),KP(t),tk(t),Uf(t),Sv(t),qf(t,n),Gf(t),Iv(t,n);break;default:r("Unsupported browser!");break}return s}UH({window:typeof window>"u"?void 0:window});var sk=t=>{throw TypeError(t)},ik=(t,e,r)=>e.has(t)||sk("Cannot "+r),qH=(t,e,r)=>(ik(t,e,"read from private field"),r?r.call(t):e.get(t)),GH=(t,e,r)=>e.has(t)?sk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),$H=(t,e,r,n)=>(ik(t,e,"write to private field"),e.set(t,r),r);const og=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],ag=og.map(([t])=>t),zH=ag.filter((t,e)=>og[e][1]==="L"),HH=ag.filter((t,e)=>og[e][1]==="M");function jv(t){switch(t){case"Linear-Codes":return zH.reduce((e,r)=>e|jv(r),0);case"Matrix-Codes":return HH.reduce((e,r)=>e|jv(r),0);case"Any":return(1<<og.length)-1;case"None":return 0;default:return 1<<ag.indexOf(t)}}function WH(t){if(t===0)return"None";const e=31-Math.clz32(t);return ag[e]}function QH(t){return t.reduce((e,r)=>e|jv(r),0)}const YH=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function KH(t){return YH.indexOf(t)}const TN=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function JH(t){return t==="UnicodeBig"?TN.indexOf("UTF16BE"):TN.indexOf(t)}const XH=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function ZH(t){return XH[t]}const eW=["Ignore","Read","Require"];function tW(t){return eW.indexOf(t)}const rW=["Plain","ECI","HRI","Hex","Escaped"];function nW(t){return rW.indexOf(t)}const Qm={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function _N(t){return{...t,formats:QH(t.formats),binarizer:KH(t.binarizer),eanAddOnSymbol:tW(t.eanAddOnSymbol),textMode:nW(t.textMode),characterSet:JH(t.characterSet)}}function sW(t){return{...t,format:WH(t.format),contentType:ZH(t.contentType),eccLevel:t.ecLevel}}const iW={locateFile:(t,e)=>{const r=t.match(/_(.+?)\.wasm$/);return r?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.1.2/dist/${r[1]}/${t}`:e+t}},A0=new WeakMap;function oW(t,e){return Object.is(t,e)||Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>Object.prototype.hasOwnProperty.call(e,r)&&t[r]===e[r])}function ok(t,{overrides:e,equalityFn:r=oW,fireImmediately:n=!1}={}){var s;const[i,a]=(s=A0.get(t))!=null?s:[iW],l=e??i;let c;if(n){if(a&&(c=r(i,l)))return a;const u=t({...l});return A0.set(t,[l,u]),u}(c??r(i,l))||A0.set(t,[l])}async function aW(t,e,r=Qm){const n={...Qm,...r},s=await ok(t,{fireImmediately:!0});let i,a;if("width"in e&&"height"in e&&"data"in e){const{data:c,data:{byteLength:u},width:d,height:f}=e;a=s._malloc(u),s.HEAPU8.set(c,a),i=s.readBarcodesFromPixmap(a,d,f,_N(n))}else{let c,u;if("buffer"in e)[c,u]=[e.byteLength,e];else if("byteLength"in e)[c,u]=[e.byteLength,new Uint8Array(e)];else if("size"in e)[c,u]=[e.size,new Uint8Array(await e.arrayBuffer())];else throw new TypeError("Invalid input type");a=s._malloc(c),s.HEAPU8.set(u,a),i=s.readBarcodesFromImage(a,c,_N(n))}s._free(a);const l=[];for(let c=0;c<i.size();++c)l.push(sW(i.get(c)));return l}({...Qm,formats:[...Qm.formats]});var ak=async function(t={}){var e,r=t,n,s,i=new Promise((_,C)=>{n=_,s=C}),a=typeof window=="object",l=typeof Bun<"u",c=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var u="./this.program",d="";function f(_){return r.locateFile?r.locateFile(_,d):d+_}var m,p;(a||c||l)&&(c?d=self.location.href:typeof document<"u"&&document.currentScript&&(d=document.currentScript.src),d.startsWith("blob:")?d="":d=d.slice(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1),c&&(p=_=>{var C=new XMLHttpRequest;return C.open("GET",_,!1),C.responseType="arraybuffer",C.send(null),new Uint8Array(C.response)}),m=async _=>{var C=await fetch(_,{credentials:"same-origin"});if(C.ok)return C.arrayBuffer();throw new Error(C.status+" : "+C.url)});var w=console.log.bind(console),y=console.error.bind(console),b,N,x=!1,E,R,I,V,j,T,S,k;function L(){var _=N.buffer;E=new Int8Array(_),I=new Int16Array(_),r.HEAPU8=R=new Uint8Array(_),V=new Uint16Array(_),j=new Int32Array(_),T=new Uint32Array(_),S=new Float32Array(_),k=new Float64Array(_)}function D(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Ce(r.preRun.shift());de(Ee)}function P(){v.ya()}function B(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)me(r.postRun.shift());de(G)}var z=0,Y=null;function ee(_){var C;z++,(C=r.monitorRunDependencies)===null||C===void 0||C.call(r,z)}function U(_){var C;if(z--,(C=r.monitorRunDependencies)===null||C===void 0||C.call(r,z),z==0&&Y){var M=Y;Y=null,M()}}function H(_){var C;(C=r.onAbort)===null||C===void 0||C.call(r,_),_="Aborted("+_+")",y(_),x=!0,_+=". Build with -sASSERTIONS for more info.";var M=new WebAssembly.RuntimeError(_);throw s(M),M}var ie;function ne(){return f("zxing_reader.wasm")}function le(_){if(_==ie&&b)return new Uint8Array(b);if(p)return p(_);throw"both async and sync fetching of the wasm failed"}async function he(_){if(!b)try{var C=await m(_);return new Uint8Array(C)}catch{}return le(_)}async function _e(_,C){try{var M=await he(_),F=await WebAssembly.instantiate(M,C);return F}catch(q){y(`failed to asynchronously prepare wasm: ${q}`),H(q)}}async function Me(_,C,M){if(!_&&typeof WebAssembly.instantiateStreaming=="function")try{var F=fetch(C,{credentials:"same-origin"}),q=await WebAssembly.instantiateStreaming(F,M);return q}catch($){y(`wasm streaming compile failed: ${$}`),y("falling back to ArrayBuffer instantiation")}return _e(C,M)}function ue(){return{a:h}}async function Z(){function _($,K){return v=$.exports,N=v.xa,L(),Fa=v.Ba,U(),v}ee();function C($){return _($.instance)}var M=ue();if(r.instantiateWasm)return new Promise(($,K)=>{r.instantiateWasm(M,(Q,ae)=>{$(_(Q))})});ie!=null||(ie=ne());try{var F=await Me(b,ie,M),q=C(F);return q}catch($){return s($),Promise.reject($)}}var de=_=>{for(;_.length>0;)_.shift()(r)},G=[],me=_=>G.push(_),Ee=[],Ce=_=>Ee.push(_),pe=_=>Ht(_),ve=()=>Ke(),at=[],ht=0,Ft=_=>{var C=new hr(_);return C.get_caught()||(C.set_caught(!0),ht--),C.set_rethrown(!1),at.push(C),Zt(_),X(_)},rt=0,wt=()=>{te(0,0);var _=at.pop();Xt(_.excPtr),rt=0};class hr{constructor(C){this.excPtr=C,this.ptr=C-24}set_type(C){T[this.ptr+4>>2]=C}get_type(){return T[this.ptr+4>>2]}set_destructor(C){T[this.ptr+8>>2]=C}get_destructor(){return T[this.ptr+8>>2]}set_caught(C){C=C?1:0,E[this.ptr+12]=C}get_caught(){return E[this.ptr+12]!=0}set_rethrown(C){C=C?1:0,E[this.ptr+13]=C}get_rethrown(){return E[this.ptr+13]!=0}init(C,M){this.set_adjusted_ptr(0),this.set_type(C),this.set_destructor(M)}set_adjusted_ptr(C){T[this.ptr+16>>2]=C}get_adjusted_ptr(){return T[this.ptr+16>>2]}}var An=_=>lt(_),Cs=_=>{var C=rt;if(!C)return An(0),0;var M=new hr(C);M.set_adjusted_ptr(C);var F=M.get_type();if(!F)return An(0),C;for(var q of _){if(q===0||q===F)break;var $=M.ptr+16;if(yi(q,F,$))return An(q),C}return An(F),C},hn=()=>Cs([]),Ns=_=>Cs([_]),jo=(_,C)=>Cs([_,C]),It=()=>{var _=at.pop();_||H("no exception to throw");var C=_.excPtr;throw _.get_rethrown()||(at.push(_),_.set_rethrown(!0),_.set_caught(!1),ht++),rt=C,rt},bt=(_,C,M)=>{var F=new hr(_);throw F.init(C,M),rt=_,ht++,rt},Ts=()=>ht,Sn=_=>{throw rt||(rt=_),rt},Po=()=>H(""),li={},fn=_=>{for(;_.length;){var C=_.pop(),M=_.pop();M(C)}};function Rn(_){return this.fromWireType(T[_>>2])}var In={},Ar={},Sr={},_c=r.InternalError=class extends Error{constructor(_){super(_),this.name="InternalError"}},je=_=>{throw new _c(_)},ze=(_,C,M)=>{_.forEach(Q=>Sr[Q]=C);function F(Q){var ae=M(Q);ae.length!==_.length&&je("Mismatched type converter count");for(var fe=0;fe<_.length;++fe)mr(_[fe],ae[fe])}var q=new Array(C.length),$=[],K=0;C.forEach((Q,ae)=>{Ar.hasOwnProperty(Q)?q[ae]=Ar[Q]:($.push(Q),In.hasOwnProperty(Q)||(In[Q]=[]),In[Q].push(()=>{q[ae]=Ar[Q],++K,K===$.length&&F(q)}))}),$.length===0&&F(q)},et=_=>{var C=li[_];delete li[_];var M=C.rawConstructor,F=C.rawDestructor,q=C.fields,$=q.map(K=>K.getterReturnType).concat(q.map(K=>K.setterArgumentType));ze([_],$,K=>{var Q={};return q.forEach((ae,fe)=>{var ge=ae.fieldName,Ie=K[fe],Xe=K[fe].optional,tt=ae.getter,Ct=ae.getterContext,Wt=K[fe+q.length],Vt=ae.setter,er=ae.setterContext;Q[ge]={read:Ms=>Ie.fromWireType(tt(Ct,Ms)),write:(Ms,Br)=>{var pn=[];Vt(er,Ms,Wt.toWireType(pn,Br)),fn(pn)},optional:Xe}}),[{name:C.name,fromWireType:ae=>{var fe={};for(var ge in Q)fe[ge]=Q[ge].read(ae);return F(ae),fe},toWireType:(ae,fe)=>{for(var ge in Q)if(!(ge in fe)&&!Q[ge].optional)throw new TypeError(`Missing field: "${ge}"`);var Ie=M();for(ge in Q)Q[ge].write(Ie,fe[ge]);return ae!==null&&ae.push(F,Ie),Ie},argPackAdvance:mn,readValueFromPointer:Rn,destructorFunction:F}]})},Jt=(_,C,M,F,q)=>{},fr=()=>{for(var _=new Array(256),C=0;C<256;++C)_[C]=String.fromCharCode(C);jn=_},jn,gt=_=>{for(var C="",M=_;R[M];)C+=jn[R[M++]];return C},ci=r.BindingError=class extends Error{constructor(_){super(_),this.name="BindingError"}},Qe=_=>{throw new ci(_)};function $d(_,C){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var F=C.name;if(_||Qe(`type "${F}" must have a positive integer typeid pointer`),Ar.hasOwnProperty(_)){if(M.ignoreDuplicateRegistrations)return;Qe(`Cannot register type '${F}' twice`)}if(Ar[_]=C,delete Sr[_],In.hasOwnProperty(_)){var q=In[_];delete In[_],q.forEach($=>$())}}function mr(_,C){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $d(_,C,M)}var mn=8,ir=(_,C,M,F)=>{C=gt(C),mr(_,{name:C,fromWireType:function(q){return!!q},toWireType:function(q,$){return $?M:F},argPackAdvance:mn,readValueFromPointer:function(q){return this.fromWireType(R[q])},destructorFunction:null})},zd=_=>({count:_.count,deleteScheduled:_.deleteScheduled,preservePointerOnDelete:_.preservePointerOnDelete,ptr:_.ptr,ptrType:_.ptrType,smartPtr:_.smartPtr,smartPtrType:_.smartPtrType}),_s=_=>{function C(M){return M.$$.ptrType.registeredClass.name}Qe(C(_)+" instance already deleted")},As=!1,Hd=_=>{},lg=_=>{_.smartPtr?_.smartPtrType.rawDestructor(_.smartPtr):_.ptrType.registeredClass.rawDestructor(_.ptr)},Ss=_=>{_.count.value-=1;var C=_.count.value===0;C&&lg(_)},ko=_=>typeof FinalizationRegistry>"u"?(ko=C=>C,_):(As=new FinalizationRegistry(C=>{Ss(C.$$)}),ko=C=>{var M=C.$$,F=!!M.smartPtr;if(F){var q={$$:M};As.register(C,q,C)}return C},Hd=C=>As.unregister(C),ko(_)),cg=()=>{let _=Rs.prototype;Object.assign(_,{isAliasOf(M){if(!(this instanceof Rs)||!(M instanceof Rs))return!1;var F=this.$$.ptrType.registeredClass,q=this.$$.ptr;M.$$=M.$$;for(var $=M.$$.ptrType.registeredClass,K=M.$$.ptr;F.baseClass;)q=F.upcast(q),F=F.baseClass;for(;$.baseClass;)K=$.upcast(K),$=$.baseClass;return F===$&&q===K},clone(){if(this.$$.ptr||_s(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var M=ko(Object.create(Object.getPrototypeOf(this),{$$:{value:zd(this.$$)}}));return M.$$.count.value+=1,M.$$.deleteScheduled=!1,M},delete(){this.$$.ptr||_s(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Qe("Object already scheduled for deletion"),Hd(this),Ss(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||_s(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Qe("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const C=Symbol.dispose;C&&(_[C]=_.delete)};function Rs(){}var ka=(_,C)=>Object.defineProperty(C,"name",{value:_}),Ma={},Mo=(_,C,M)=>{if(_[C].overloadTable===void 0){var F=_[C];_[C]=function(){for(var q=arguments.length,$=new Array(q),K=0;K<q;K++)$[K]=arguments[K];return _[C].overloadTable.hasOwnProperty($.length)||Qe(`Function '${M}' called with an invalid number of arguments (${$.length}) - expects one of (${_[C].overloadTable})!`),_[C].overloadTable[$.length].apply(this,$)},_[C].overloadTable=[],_[C].overloadTable[F.argCount]=F}},Pn=(_,C,M)=>{r.hasOwnProperty(_)?((M===void 0||r[_].overloadTable!==void 0&&r[_].overloadTable[M]!==void 0)&&Qe(`Cannot register public name '${_}' twice`),Mo(r,_,_),r[_].overloadTable.hasOwnProperty(M)&&Qe(`Cannot register multiple overloads of a function with the same number of arguments (${M})!`),r[_].overloadTable[M]=C):(r[_]=C,r[_].argCount=M)},Wd=48,Qd=57,Ac=_=>{_=_.replace(/[^a-zA-Z0-9_]/g,"$");var C=_.charCodeAt(0);return C>=Wd&&C<=Qd?`_${_}`:_};function Sc(_,C,M,F,q,$,K,Q){this.name=_,this.constructor=C,this.instancePrototype=M,this.rawDestructor=F,this.baseClass=q,this.getActualType=$,this.upcast=K,this.downcast=Q,this.pureVirtualFunctions=[]}var Da=(_,C,M)=>{for(;C!==M;)C.upcast||Qe(`Expected null or instance of ${M.name}, got an instance of ${C.name}`),_=C.upcast(_),C=C.baseClass;return _};function Yd(_,C){if(C===null)return this.isReference&&Qe(`null is not a valid ${this.name}`),0;C.$$||Qe(`Cannot pass "${embindRepr(C)}" as a ${this.name}`),C.$$.ptr||Qe(`Cannot pass deleted object as a pointer of type ${this.name}`);var M=C.$$.ptrType.registeredClass,F=Da(C.$$.ptr,M,this.registeredClass);return F}function ug(_,C){var M;if(C===null)return this.isReference&&Qe(`null is not a valid ${this.name}`),this.isSmartPointer?(M=this.rawConstructor(),_!==null&&_.push(this.rawDestructor,M),M):0;(!C||!C.$$)&&Qe(`Cannot pass "${embindRepr(C)}" as a ${this.name}`),C.$$.ptr||Qe(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&C.$$.ptrType.isConst&&Qe(`Cannot convert argument of type ${C.$$.smartPtrType?C.$$.smartPtrType.name:C.$$.ptrType.name} to parameter type ${this.name}`);var F=C.$$.ptrType.registeredClass;if(M=Da(C.$$.ptr,F,this.registeredClass),this.isSmartPointer)switch(C.$$.smartPtr===void 0&&Qe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:C.$$.smartPtrType===this?M=C.$$.smartPtr:Qe(`Cannot convert argument of type ${C.$$.smartPtrType?C.$$.smartPtrType.name:C.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:M=C.$$.smartPtr;break;case 2:if(C.$$.smartPtrType===this)M=C.$$.smartPtr;else{var q=C.clone();M=this.rawShare(M,kn.toHandle(()=>q.delete())),_!==null&&_.push(this.rawDestructor,M)}break;default:Qe("Unsupporting sharing policy")}return M}function Oa(_,C){if(C===null)return this.isReference&&Qe(`null is not a valid ${this.name}`),0;C.$$||Qe(`Cannot pass "${embindRepr(C)}" as a ${this.name}`),C.$$.ptr||Qe(`Cannot pass deleted object as a pointer of type ${this.name}`),C.$$.ptrType.isConst&&Qe(`Cannot convert argument of type ${C.$$.ptrType.name} to parameter type ${this.name}`);var M=C.$$.ptrType.registeredClass,F=Da(C.$$.ptr,M,this.registeredClass);return F}var Rc=(_,C,M)=>{if(C===M)return _;if(M.baseClass===void 0)return null;var F=Rc(_,C,M.baseClass);return F===null?null:M.downcast(F)},Ic={},Do=(_,C)=>{for(C===void 0&&Qe("ptr should not be undefined");_.baseClass;)C=_.upcast(C),_=_.baseClass;return C},Is=(_,C)=>(C=Do(_,C),Ic[C]),ui=(_,C)=>{(!C.ptrType||!C.ptr)&&je("makeClassHandle requires ptr and ptrType");var M=!!C.smartPtrType,F=!!C.smartPtr;return M!==F&&je("Both smartPtrType and smartPtr must be specified"),C.count={value:1},ko(Object.create(_,{$$:{value:C,writable:!0}}))};function dg(_){var C=this.getPointee(_);if(!C)return this.destructor(_),null;var M=Is(this.registeredClass,C);if(M!==void 0){if(M.$$.count.value===0)return M.$$.ptr=C,M.$$.smartPtr=_,M.clone();var F=M.clone();return this.destructor(_),F}function q(){return this.isSmartPointer?ui(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:C,smartPtrType:this,smartPtr:_}):ui(this.registeredClass.instancePrototype,{ptrType:this,ptr:_})}var $=this.registeredClass.getActualType(C),K=Ma[$];if(!K)return q.call(this);var Q;this.isConst?Q=K.constPointerType:Q=K.pointerType;var ae=Rc(C,this.registeredClass,Q.registeredClass);return ae===null?q.call(this):this.isSmartPointer?ui(Q.registeredClass.instancePrototype,{ptrType:Q,ptr:ae,smartPtrType:this,smartPtr:_}):ui(Q.registeredClass.instancePrototype,{ptrType:Q,ptr:ae})}var Kd=()=>{Object.assign(Oo.prototype,{getPointee(_){return this.rawGetPointee&&(_=this.rawGetPointee(_)),_},destructor(_){var C;(C=this.rawDestructor)===null||C===void 0||C.call(this,_)},argPackAdvance:mn,readValueFromPointer:Rn,fromWireType:dg})};function Oo(_,C,M,F,q,$,K,Q,ae,fe,ge){this.name=_,this.registeredClass=C,this.isReference=M,this.isConst=F,this.isSmartPointer=q,this.pointeeType=$,this.sharingPolicy=K,this.rawGetPointee=Q,this.rawConstructor=ae,this.rawShare=fe,this.rawDestructor=ge,!q&&C.baseClass===void 0?F?(this.toWireType=Yd,this.destructorFunction=null):(this.toWireType=Oa,this.destructorFunction=null):this.toWireType=ug}var jc=(_,C,M)=>{r.hasOwnProperty(_)||je("Replacing nonexistent public symbol"),r[_].overloadTable!==void 0&&M!==void 0?r[_].overloadTable[M]=C:(r[_]=C,r[_].argCount=M)},La=[],Fa,Ue=_=>{var C=La[_];return C||(La[_]=C=Fa.get(_)),C},Jd=function(_,C){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(_.includes("j"))return dynCallLegacy(_,C,M);var F=Ue(C),q=F(...M);return q},hg=function(_,C){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var F=arguments.length,q=new Array(F),$=0;$<F;$++)q[$]=arguments[$];return Jd(_,C,q,M)}},Yr=function(_,C){_=gt(_);function M(){if(_.includes("j"))return hg(_,C);var q=Ue(C);return q}var F=M();return typeof F!="function"&&Qe(`unknown function pointer with signature ${_}: ${C}`),F};class Xd extends Error{}var Pc=_=>{var C=A(_),M=gt(C);return O(C),M},Va=(_,C)=>{var M=[],F={};function q($){if(!F[$]&&!Ar[$]){if(Sr[$]){Sr[$].forEach(q);return}M.push($),F[$]=!0}}throw C.forEach(q),new Xd(`${_}: `+M.map(Pc).join([", "]))},js=(_,C,M,F,q,$,K,Q,ae,fe,ge,Ie,Xe)=>{ge=gt(ge),$=Yr(q,$),Q&&(Q=Yr(K,Q)),fe&&(fe=Yr(ae,fe)),Xe=Yr(Ie,Xe);var tt=Ac(ge);Pn(tt,function(){Va(`Cannot construct ${ge} due to unbound types`,[F])}),ze([_,C,M],F?[F]:[],Ct=>{Ct=Ct[0];var Wt,Vt;F?(Wt=Ct.registeredClass,Vt=Wt.instancePrototype):Vt=Rs.prototype;var er=ka(ge,function(){if(Object.getPrototypeOf(this)!==Ms)throw new ci(`Use 'new' to construct ${ge}`);if(Br.constructor_body===void 0)throw new ci(`${ge} has no accessible constructor`);for(var Cb=arguments.length,_h=new Array(Cb),Ah=0;Ah<Cb;Ah++)_h[Ah]=arguments[Ah];var Nb=Br.constructor_body[_h.length];if(Nb===void 0)throw new ci(`Tried to invoke ctor of ${ge} with invalid number of parameters (${_h.length}) - expected (${Object.keys(Br.constructor_body).toString()}) parameters instead!`);return Nb.apply(this,_h)}),Ms=Object.create(Vt,{constructor:{value:er}});er.prototype=Ms;var Br=new Sc(ge,er,Ms,Xe,Wt,$,Q,fe);if(Br.baseClass){var pn,Th;(Th=(pn=Br.baseClass).__derivedClasses)!==null&&Th!==void 0||(pn.__derivedClasses=[]),Br.baseClass.__derivedClasses.push(Br)}var t4=new Oo(ge,Br,!0,!1,!1),bb=new Oo(ge+"*",Br,!1,!1,!1),Eb=new Oo(ge+" const*",Br,!1,!0,!1);return Ma[_]={pointerType:bb,constPointerType:Eb},jc(tt,er),[t4,bb,Eb]})},Kr=(_,C)=>{for(var M=[],F=0;F<_;F++)M.push(T[C+F*4>>2]);return M};function Ba(_){for(var C=1;C<_.length;++C)if(_[C]!==null&&_[C].destructorFunction===void 0)return!0;return!1}function di(_,C,M,F,q,$){var K=C.length;K<2&&Qe("argTypes array size mismatch! Must at least get return value and 'this' types!");var Q=C[1]!==null&&M!==null,ae=Ba(C),fe=C[0].name!=="void",ge=K-2,Ie=new Array(ge),Xe=[],tt=[],Ct=function(){tt.length=0;var Wt;Xe.length=Q?2:1,Xe[0]=q,Q&&(Wt=C[1].toWireType(tt,this),Xe[1]=Wt);for(var Vt=0;Vt<ge;++Vt)Ie[Vt]=C[Vt+2].toWireType(tt,Vt<0||arguments.length<=Vt?void 0:arguments[Vt]),Xe.push(Ie[Vt]);var er=F(...Xe);function Ms(Br){if(ae)fn(tt);else for(var pn=Q?1:2;pn<C.length;pn++){var Th=pn===1?Wt:Ie[pn-2];C[pn].destructorFunction!==null&&C[pn].destructorFunction(Th)}if(fe)return C[0].fromWireType(Br)}return Ms(er)};return ka(_,Ct)}var Zd=(_,C,M,F,q,$)=>{var K=Kr(C,M);q=Yr(F,q),ze([],[_],Q=>{Q=Q[0];var ae=`constructor ${Q.name}`;if(Q.registeredClass.constructor_body===void 0&&(Q.registeredClass.constructor_body=[]),Q.registeredClass.constructor_body[C-1]!==void 0)throw new ci(`Cannot register multiple constructors with identical number of parameters (${C-1}) for class '${Q.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Q.registeredClass.constructor_body[C-1]=()=>{Va(`Cannot construct ${Q.name} due to unbound types`,K)},ze([],K,fe=>(fe.splice(1,0,null),Q.registeredClass.constructor_body[C-1]=di(ae,fe,null,q,$),[])),[]})},dt=_=>{_=_.trim();const C=_.indexOf("(");return C===-1?_:_.slice(0,C)},Ua=(_,C,M,F,q,$,K,Q,ae,fe)=>{var ge=Kr(M,F);C=gt(C),C=dt(C),$=Yr(q,$),ze([],[_],Ie=>{Ie=Ie[0];var Xe=`${Ie.name}.${C}`;C.startsWith("@@")&&(C=Symbol[C.substring(2)]),Q&&Ie.registeredClass.pureVirtualFunctions.push(C);function tt(){Va(`Cannot call ${Xe} due to unbound types`,ge)}var Ct=Ie.registeredClass.instancePrototype,Wt=Ct[C];return Wt===void 0||Wt.overloadTable===void 0&&Wt.className!==Ie.name&&Wt.argCount===M-2?(tt.argCount=M-2,tt.className=Ie.name,Ct[C]=tt):(Mo(Ct,C,Xe),Ct[C].overloadTable[M-2]=tt),ze([],ge,Vt=>{var er=di(Xe,Vt,Ie,$,K);return Ct[C].overloadTable===void 0?(er.argCount=M-2,Ct[C]=er):Ct[C].overloadTable[M-2]=er,[]}),[]})},Ps=[],Rr=[],kc=_=>{_>9&&--Rr[_+1]===0&&(Rr[_]=void 0,Ps.push(_))},eh=()=>Rr.length/2-5-Ps.length,fg=()=>{Rr.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=eh},kn={toValue:_=>(_||Qe(`Cannot use deleted val. handle = ${_}`),Rr[_]),toHandle:_=>{switch(_){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const C=Ps.pop()||Rr.length;return Rr[C]=_,Rr[C+1]=1,C}}}},th={name:"emscripten::val",fromWireType:_=>{var C=kn.toValue(_);return kc(_),C},toWireType:(_,C)=>kn.toHandle(C),argPackAdvance:mn,readValueFromPointer:Rn,destructorFunction:null},mg=_=>mr(_,th),Lo=(_,C)=>{switch(C){case 4:return function(M){return this.fromWireType(S[M>>2])};case 8:return function(M){return this.fromWireType(k[M>>3])};default:throw new TypeError(`invalid float width (${C}): ${_}`)}},Zn=(_,C,M)=>{C=gt(C),mr(_,{name:C,fromWireType:F=>F,toWireType:(F,q)=>q,argPackAdvance:mn,readValueFromPointer:Lo(C,M),destructorFunction:null})},rh=(_,C,M,F,q,$,K,Q)=>{var ae=Kr(C,M);_=gt(_),_=dt(_),q=Yr(F,q),Pn(_,function(){Va(`Cannot call ${_} due to unbound types`,ae)},C-1),ze([],ae,fe=>{var ge=[fe[0],null].concat(fe.slice(1));return jc(_,di(_,ge,null,q,$),C-1),[]})},nh=(_,C,M)=>{switch(C){case 1:return M?F=>E[F]:F=>R[F];case 2:return M?F=>I[F>>1]:F=>V[F>>1];case 4:return M?F=>j[F>>2]:F=>T[F>>2];default:throw new TypeError(`invalid integer width (${C}): ${_}`)}},sh=(_,C,M,F,q)=>{C=gt(C);var $=ge=>ge;if(F===0){var K=32-8*M;$=ge=>ge<<K>>>K}var Q=C.includes("unsigned"),ae=(ge,Ie)=>{},fe;Q?fe=function(ge,Ie){return ae(Ie,this.name),Ie>>>0}:fe=function(ge,Ie){return ae(Ie,this.name),Ie},mr(_,{name:C,fromWireType:$,toWireType:fe,argPackAdvance:mn,readValueFromPointer:nh(C,M,F!==0),destructorFunction:null})},hi=(_,C,M)=>{var F=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],q=F[C];function $(K){var Q=T[K>>2],ae=T[K+4>>2];return new q(E.buffer,ae,Q)}M=gt(M),mr(_,{name:M,fromWireType:$,argPackAdvance:mn,readValueFromPointer:$},{ignoreDuplicateRegistrations:!0})},pg=Object.assign({optional:!0},th),gg=(_,C)=>{mr(_,pg)},yg=(_,C,M,F)=>{if(!(F>0))return 0;for(var q=M,$=M+F-1,K=0;K<_.length;++K){var Q=_.charCodeAt(K);if(Q>=55296&&Q<=57343){var ae=_.charCodeAt(++K);Q=65536+((Q&1023)<<10)|ae&1023}if(Q<=127){if(M>=$)break;C[M++]=Q}else if(Q<=2047){if(M+1>=$)break;C[M++]=192|Q>>6,C[M++]=128|Q&63}else if(Q<=65535){if(M+2>=$)break;C[M++]=224|Q>>12,C[M++]=128|Q>>6&63,C[M++]=128|Q&63}else{if(M+3>=$)break;C[M++]=240|Q>>18,C[M++]=128|Q>>12&63,C[M++]=128|Q>>6&63,C[M++]=128|Q&63}}return C[M]=0,M-q},Ir=(_,C,M)=>yg(_,R,C,M),ih=_=>{for(var C=0,M=0;M<_.length;++M){var F=_.charCodeAt(M);F<=127?C++:F<=2047?C+=2:F>=55296&&F<=57343?(C+=4,++M):C+=3}return C},oh=typeof TextDecoder<"u"?new TextDecoder:void 0,Fo=function(_){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var F=C+M,q=C;_[q]&&!(q>=F);)++q;if(q-C>16&&_.buffer&&oh)return oh.decode(_.subarray(C,q));for(var $="";C<q;){var K=_[C++];if(!(K&128)){$+=String.fromCharCode(K);continue}var Q=_[C++]&63;if((K&224)==192){$+=String.fromCharCode((K&31)<<6|Q);continue}var ae=_[C++]&63;if((K&240)==224?K=(K&15)<<12|Q<<6|ae:K=(K&7)<<18|Q<<12|ae<<6|_[C++]&63,K<65536)$+=String.fromCharCode(K);else{var fe=K-65536;$+=String.fromCharCode(55296|fe>>10,56320|fe&1023)}}return $},qa=(_,C)=>_?Fo(R,_,C):"",ah=(_,C)=>{C=gt(C),mr(_,{name:C,fromWireType(M){for(var F=T[M>>2],q=M+4,$,Q,K=q,Q=0;Q<=F;++Q){var ae=q+Q;if(Q==F||R[ae]==0){var fe=ae-K,ge=qa(K,fe);$===void 0?$=ge:($+="\0",$+=ge),K=ae+1}}return O(M),$},toWireType(M,F){F instanceof ArrayBuffer&&(F=new Uint8Array(F));var q,$=typeof F=="string";$||ArrayBuffer.isView(F)&&F.BYTES_PER_ELEMENT==1||Qe("Cannot pass non-string to std::string"),$?q=ih(F):q=F.length;var K=W(4+q+1),Q=K+4;return T[K>>2]=q,$?Ir(F,Q,q+1):R.set(F,Q),M!==null&&M.push(O,K),K},argPackAdvance:mn,readValueFromPointer:Rn,destructorFunction(M){O(M)}})},fi=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Vo=(_,C)=>{for(var M=_,F=M>>1,q=F+C/2;!(F>=q)&&V[F];)++F;if(M=F<<1,M-_>32&&fi)return fi.decode(R.subarray(_,M));for(var $="",K=0;!(K>=C/2);++K){var Q=I[_+K*2>>1];if(Q==0)break;$+=String.fromCharCode(Q)}return $},lh=(_,C,M)=>{if(M!=null||(M=2147483647),M<2)return 0;M-=2;for(var F=C,q=M<_.length*2?M/2:_.length,$=0;$<q;++$){var K=_.charCodeAt($);I[C>>1]=K,C+=2}return I[C>>1]=0,C-F},Mc=_=>_.length*2,Et=(_,C)=>{for(var M=0,F="";!(M>=C/4);){var q=j[_+M*4>>2];if(q==0)break;if(++M,q>=65536){var $=q-65536;F+=String.fromCharCode(55296|$>>10,56320|$&1023)}else F+=String.fromCharCode(q)}return F},vg=(_,C,M)=>{if(M!=null||(M=2147483647),M<4)return 0;for(var F=C,q=F+M-4,$=0;$<_.length;++$){var K=_.charCodeAt($);if(K>=55296&&K<=57343){var Q=_.charCodeAt(++$);K=65536+((K&1023)<<10)|Q&1023}if(j[C>>2]=K,C+=4,C+4>q)break}return j[C>>2]=0,C-F},xg=_=>{for(var C=0,M=0;M<_.length;++M){var F=_.charCodeAt(M);F>=55296&&F<=57343&&++M,C+=4}return C},ch=(_,C,M)=>{M=gt(M);var F,q,$,K;C===2?(F=Vo,q=lh,K=Mc,$=Q=>V[Q>>1]):C===4&&(F=Et,q=vg,K=xg,$=Q=>T[Q>>2]),mr(_,{name:M,fromWireType:Q=>{for(var ae=T[Q>>2],fe,ge=Q+4,Ie=0;Ie<=ae;++Ie){var Xe=Q+4+Ie*C;if(Ie==ae||$(Xe)==0){var tt=Xe-ge,Ct=F(ge,tt);fe===void 0?fe=Ct:(fe+="\0",fe+=Ct),ge=Xe+C}}return O(Q),fe},toWireType:(Q,ae)=>{typeof ae!="string"&&Qe(`Cannot pass non-string to C++ string type ${M}`);var fe=K(ae),ge=W(4+fe+C);return T[ge>>2]=fe/C,q(ae,ge+4,fe+C),Q!==null&&Q.push(O,ge),ge},argPackAdvance:mn,readValueFromPointer:Rn,destructorFunction(Q){O(Q)}})},uh=(_,C,M,F,q,$)=>{li[_]={name:gt(C),rawConstructor:Yr(M,F),rawDestructor:Yr(q,$),fields:[]}},dh=(_,C,M,F,q,$,K,Q,ae,fe)=>{li[_].fields.push({fieldName:gt(C),getterReturnType:M,getter:Yr(F,q),getterContext:$,setterArgumentType:K,setter:Yr(Q,ae),setterContext:fe})},Ga=(_,C)=>{C=gt(C),mr(_,{isVoid:!0,name:C,argPackAdvance:0,fromWireType:()=>{},toWireType:(M,F)=>{}})},$a=[],Mn=(_,C,M,F)=>(_=$a[_],C=kn.toValue(C),_(null,C,M,F)),hh={},wg=_=>{var C=hh[_];return C===void 0?gt(_):C},mi=()=>{if(typeof globalThis=="object")return globalThis;function _(C){C.$$$embind_global$$$=C;var M=typeof $$$embind_global$$$=="object"&&C.$$$embind_global$$$==C;return M||delete C.$$$embind_global$$$,M}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&_(global)?$$$embind_global$$$=global:typeof self=="object"&&_(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},fh=_=>_===0?kn.toHandle(mi()):(_=wg(_),kn.toHandle(mi()[_])),Dc=_=>{var C=$a.length;return $a.push(_),C},Bo=(_,C)=>{var M=Ar[_];return M===void 0&&Qe(`${C} has unknown type ${Pc(_)}`),M},mh=(_,C)=>{for(var M=new Array(_),F=0;F<_;++F)M[F]=Bo(T[C+F*4>>2],`parameter ${F}`);return M},za=(_,C,M)=>{var F=[],q=_.toWireType(F,M);return F.length&&(T[C>>2]=kn.toHandle(F)),q},bg=Reflect.construct,ph=(_,C,M)=>{var F=mh(_,C),q=F.shift();_--;var $=new Array(_),K=(ae,fe,ge,Ie)=>{for(var Xe=0,tt=0;tt<_;++tt)$[tt]=F[tt].readValueFromPointer(Ie+Xe),Xe+=F[tt].argPackAdvance;var Ct=M===1?bg(fe,$):fe.apply(ae,$);return za(q,ge,Ct)},Q=`methodCaller<(${F.map(ae=>ae.name).join(", ")}) => ${q.name}>`;return Dc(ka(Q,K))},Uo=_=>{_>9&&(Rr[_+1]+=1)},gh=_=>{var C=kn.toValue(_);fn(C),kc(_)},yh=(_,C)=>{_=Bo(_,"_emval_take_value");var M=_.readValueFromPointer(C);return kn.toHandle(M)},Oc=(_,C,M,F)=>{var q=new Date().getFullYear(),$=new Date(q,0,1),K=new Date(q,6,1),Q=$.getTimezoneOffset(),ae=K.getTimezoneOffset(),fe=Math.max(Q,ae);T[_>>2]=fe*60,j[C>>2]=+(Q!=ae);var ge=tt=>{var Ct=tt>=0?"-":"+",Wt=Math.abs(tt),Vt=String(Math.floor(Wt/60)).padStart(2,"0"),er=String(Wt%60).padStart(2,"0");return`UTC${Ct}${Vt}${er}`},Ie=ge(Q),Xe=ge(ae);ae<Q?(Ir(Ie,M,17),Ir(Xe,F,17)):(Ir(Ie,F,17),Ir(Xe,M,17))},Lc=()=>2147483648,vh=(_,C)=>Math.ceil(_/C)*C,Ha=_=>{var C=N.buffer,M=(_-C.byteLength+65535)/65536|0;try{return N.grow(M),L(),1}catch{}},xh=_=>{var C=R.length;_>>>=0;var M=Lc();if(_>M)return!1;for(var F=1;F<=4;F*=2){var q=C*(1+.2/F);q=Math.min(q,_+100663296);var $=Math.min(M,vh(Math.max(_,q),65536)),K=Ha($);if(K)return!0}return!1},Wa={},ks=()=>u||"./this.program",pi=()=>{if(!pi.strings){var _=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",C={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:_,_:ks()};for(var M in Wa)Wa[M]===void 0?delete C[M]:C[M]=Wa[M];var F=[];for(var M in C)F.push(`${M}=${C[M]}`);pi.strings=F}return pi.strings},wh=(_,C)=>{var M=0,F=0;for(var q of pi()){var $=C+M;T[_+F>>2]=$,M+=Ir(q,$,1/0)+1,F+=4}return 0},bh=(_,C)=>{var M=pi();T[_>>2]=M.length;var F=0;for(var q of M)F+=ih(q)+1;return T[C>>2]=F,0},Eh=_=>52;function Qa(_,C,M,F,q){return 70}var jr=[null,[],[]],Ch=(_,C)=>{var M=jr[_];C===0||C===10?((_===1?w:y)(Fo(M)),M.length=0):M.push(C)},Nh=(_,C,M,F)=>{for(var q=0,$=0;$<M;$++){var K=T[C>>2],Q=T[C+4>>2];C+=8;for(var ae=0;ae<Q;ae++)Ch(_,R[K+ae]);q+=Q}return T[F>>2]=q,0},gi=_=>_;fr(),cg(),Kd(),fg(),r.noExitRuntime&&r.noExitRuntime,r.print&&(w=r.print),r.printErr&&(y=r.printErr),r.wasmBinary&&(b=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&(u=r.thisProgram);var h={s:Ft,w:wt,a:hn,j:Ns,m:jo,N:It,p:bt,da:Ts,d:Sn,_:Po,sa:et,Z:Jt,na:ir,qa:js,pa:Zd,F:Ua,la:mg,R:Zn,S:rh,y:sh,t:hi,ra:gg,ma:ah,O:ch,K:uh,ta:dh,oa:Ga,V:Mn,ua:kc,wa:fh,$:ph,T:Uo,va:gh,ka:yh,aa:Oc,ea:xh,ba:wh,ca:bh,fa:Eh,X:Qa,Q:Nh,I:Bk,C:qk,U:Nk,P:Yk,q:Ok,b:wk,D:Vk,ia:$k,c:Ek,ha:zk,h:Ck,i:Rk,r:jk,M:Fk,v:kk,E:Dk,J:Lk,A:Gk,H:Kk,W:Zk,k:_k,f:Tk,e:bk,g:Fc,L:Qk,l:Sk,ja:Uk,o:Pk,x:Ik,u:Mk,ga:Wk,B:Hk,n:Ak,G:Jk,Y:Xk,z:gi},v=await Z();v.ya;var A=v.za,O=r._free=v.Aa,W=r._malloc=v.Ca,X=v.Da,te=v.Ea,lt=v.Fa,Ht=v.Ga,Ke=v.Ha,Xt=v.Ia,Zt=v.Ja,yi=v.Ka;r.dynCall_viijii=v.La;var Jr=r.dynCall_vij=v.Ma;r.dynCall_jiji=v.Na;var Ya=r.dynCall_jiiii=v.Oa;r.dynCall_iiiiij=v.Pa,r.dynCall_iiiiijj=v.Qa,r.dynCall_iiiiiijj=v.Ra;function Fc(_,C,M,F){var q=ve();try{Ue(_)(C,M,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function wk(_,C){var M=ve();try{return Ue(_)(C)}catch(F){if(pe(M),F!==F+0)throw F;te(1,0)}}function bk(_,C,M){var F=ve();try{Ue(_)(C,M)}catch(q){if(pe(F),q!==q+0)throw q;te(1,0)}}function Ek(_,C,M){var F=ve();try{return Ue(_)(C,M)}catch(q){if(pe(F),q!==q+0)throw q;te(1,0)}}function Ck(_,C,M,F){var q=ve();try{return Ue(_)(C,M,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function Nk(_,C,M,F,q){var $=ve();try{return Ue(_)(C,M,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function Tk(_,C){var M=ve();try{Ue(_)(C)}catch(F){if(pe(M),F!==F+0)throw F;te(1,0)}}function _k(_){var C=ve();try{Ue(_)()}catch(M){if(pe(C),M!==M+0)throw M;te(1,0)}}function Ak(_,C,M,F,q,$,K,Q,ae,fe,ge){var Ie=ve();try{Ue(_)(C,M,F,q,$,K,Q,ae,fe,ge)}catch(Xe){if(pe(Ie),Xe!==Xe+0)throw Xe;te(1,0)}}function Sk(_,C,M,F,q){var $=ve();try{Ue(_)(C,M,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function Rk(_,C,M,F,q){var $=ve();try{return Ue(_)(C,M,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function Ik(_,C,M,F,q,$,K){var Q=ve();try{Ue(_)(C,M,F,q,$,K)}catch(ae){if(pe(Q),ae!==ae+0)throw ae;te(1,0)}}function jk(_,C,M,F,q,$){var K=ve();try{return Ue(_)(C,M,F,q,$)}catch(Q){if(pe(K),Q!==Q+0)throw Q;te(1,0)}}function Pk(_,C,M,F,q,$){var K=ve();try{Ue(_)(C,M,F,q,$)}catch(Q){if(pe(K),Q!==Q+0)throw Q;te(1,0)}}function kk(_,C,M,F,q,$,K){var Q=ve();try{return Ue(_)(C,M,F,q,$,K)}catch(ae){if(pe(Q),ae!==ae+0)throw ae;te(1,0)}}function Mk(_,C,M,F,q,$,K,Q){var ae=ve();try{Ue(_)(C,M,F,q,$,K,Q)}catch(fe){if(pe(ae),fe!==fe+0)throw fe;te(1,0)}}function Dk(_,C,M,F,q,$,K,Q){var ae=ve();try{return Ue(_)(C,M,F,q,$,K,Q)}catch(fe){if(pe(ae),fe!==fe+0)throw fe;te(1,0)}}function Ok(_){var C=ve();try{return Ue(_)()}catch(M){if(pe(C),M!==M+0)throw M;te(1,0)}}function Lk(_,C,M,F,q,$,K,Q,ae){var fe=ve();try{return Ue(_)(C,M,F,q,$,K,Q,ae)}catch(ge){if(pe(fe),ge!==ge+0)throw ge;te(1,0)}}function Fk(_,C,M,F,q,$,K){var Q=ve();try{return Ue(_)(C,M,F,q,$,K)}catch(ae){if(pe(Q),ae!==ae+0)throw ae;te(1,0)}}function Vk(_,C,M,F){var q=ve();try{return Ue(_)(C,M,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function Bk(_,C,M,F){var q=ve();try{return Ue(_)(C,M,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function Uk(_,C,M,F,q,$,K,Q){var ae=ve();try{Ue(_)(C,M,F,q,$,K,Q)}catch(fe){if(pe(ae),fe!==fe+0)throw fe;te(1,0)}}function qk(_,C,M,F,q,$){var K=ve();try{return Ue(_)(C,M,F,q,$)}catch(Q){if(pe(K),Q!==Q+0)throw Q;te(1,0)}}function Gk(_,C,M,F,q,$,K,Q,ae,fe){var ge=ve();try{return Ue(_)(C,M,F,q,$,K,Q,ae,fe)}catch(Ie){if(pe(ge),Ie!==Ie+0)throw Ie;te(1,0)}}function $k(_,C,M){var F=ve();try{return Ue(_)(C,M)}catch(q){if(pe(F),q!==q+0)throw q;te(1,0)}}function zk(_,C,M,F,q){var $=ve();try{return Ue(_)(C,M,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function Hk(_,C,M,F,q,$,K,Q,ae,fe){var ge=ve();try{Ue(_)(C,M,F,q,$,K,Q,ae,fe)}catch(Ie){if(pe(ge),Ie!==Ie+0)throw Ie;te(1,0)}}function Wk(_,C,M,F,q,$,K,Q,ae){var fe=ve();try{Ue(_)(C,M,F,q,$,K,Q,ae)}catch(ge){if(pe(fe),ge!==ge+0)throw ge;te(1,0)}}function Qk(_,C,M,F,q,$,K){var Q=ve();try{Ue(_)(C,M,F,q,$,K)}catch(ae){if(pe(Q),ae!==ae+0)throw ae;te(1,0)}}function Yk(_,C,M,F){var q=ve();try{return Ue(_)(C,M,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function Kk(_,C,M,F,q,$,K,Q,ae,fe,ge,Ie){var Xe=ve();try{return Ue(_)(C,M,F,q,$,K,Q,ae,fe,ge,Ie)}catch(tt){if(pe(Xe),tt!==tt+0)throw tt;te(1,0)}}function Jk(_,C,M,F,q,$,K,Q,ae,fe,ge,Ie,Xe,tt,Ct,Wt){var Vt=ve();try{Ue(_)(C,M,F,q,$,K,Q,ae,fe,ge,Ie,Xe,tt,Ct,Wt)}catch(er){if(pe(Vt),er!==er+0)throw er;te(1,0)}}function Xk(_,C,M,F){var q=ve();try{Jr(_,C,M,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function Zk(_,C,M,F,q){var $=ve();try{return Ya(_,C,M,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function Eg(){if(z>0){Y=Eg;return}if(D(),z>0){Y=Eg;return}function _(){var C;r.calledRun=!0,!x&&(P(),n(r),(C=r.onRuntimeInitialized)===null||C===void 0||C.call(r),B())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),_()},1)):_()}function e4(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return e4(),Eg(),e=i,e};function lW(t){return ok(ak,t)}async function cW(t,e){return aW(ak,t,e)}const lk=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],uW=[...lk,["unknown"]].map(t=>t[0]),Pv=new Map(lk);function dW(t){for(const[e,r]of Pv)if(t===r)return e;return"unknown"}function hW(t){if(ck(t))return{width:t.naturalWidth,height:t.naturalHeight};if(uk(t))return{width:t.width.baseVal.value,height:t.height.baseVal.value};if(dk(t))return{width:t.videoWidth,height:t.videoHeight};if(fk(t))return{width:t.width,height:t.height};if(pk(t))return{width:t.displayWidth,height:t.displayHeight};if(hk(t))return{width:t.width,height:t.height};if(mk(t))return{width:t.width,height:t.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function ck(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLImageElement)}catch{return!1}}function uk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.SVGImageElement)}catch{return!1}}function dk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLVideoElement)}catch{return!1}}function hk(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLCanvasElement)}catch{return!1}}function fk(t){try{return t instanceof ImageBitmap||Object.prototype.toString.call(t)==="[object ImageBitmap]"}catch{return!1}}function mk(t){try{return t instanceof OffscreenCanvas||Object.prototype.toString.call(t)==="[object OffscreenCanvas]"}catch{return!1}}function pk(t){try{return t instanceof VideoFrame||Object.prototype.toString.call(t)==="[object VideoFrame]"}catch{return!1}}function fW(t){try{return t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"}catch{return!1}}function mW(t){try{return t instanceof ImageData||Object.prototype.toString.call(t)==="[object ImageData]"}catch{return!1}}function pW(t,e){try{const r=new OffscreenCanvas(t,e);if(r.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return r;throw void 0}catch{const r=document.createElement("canvas");return r.width=t,r.height=e,r}}async function gk(t){if(ck(t)&&!await xW(t))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(uk(t)&&!await wW(t))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(pk(t)&&bW(t))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(dk(t)&&(t.readyState===0||t.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(fk(t)&&CW(t))throw new DOMException("The image source is detached.","InvalidStateError");const{width:e,height:r}=hW(t);if(e===0||r===0)return null;const n=pW(e,r).getContext("2d");n.drawImage(t,0,0);try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function gW(t){let e;try{e=await createImageBitmap(t)}catch{try{if(globalThis.Image){e=new Image;let r="";try{r=URL.createObjectURL(t),e.src=r,await e.decode()}finally{URL.revokeObjectURL(r)}}else return t}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await gk(e)}function yW(t){const{width:e,height:r}=t;if(e===0||r===0)return null;const n=t.getContext("2d");try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function vW(t){if(fW(t))return await gW(t);if(mW(t)){if(EW(t))throw new DOMException("The image data has been detached.","InvalidStateError");return t}return hk(t)||mk(t)?yW(t):await gk(t)}async function xW(t){try{return await t.decode(),!0}catch{return!1}}async function wW(t){var e;try{return await((e=t.decode)==null?void 0:e.call(t)),!0}catch{return!1}}function bW(t){return t.format===null}function EW(t){return t.data.buffer.byteLength===0}function CW(t){return t.width===0&&t.height===0}function AN(t,e){return NW(t)?new DOMException(`${e}: ${t.message}`,t.name):TW(t)?new t.constructor(`${e}: ${t.message}`):new Error(`${e}: ${t}`)}function NW(t){return t instanceof DOMException||Object.prototype.toString.call(t)==="[object DOMException]"}function TW(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}var Hf;class kv{constructor(e={}){GH(this,Hf);var r;try{const n=(r=e==null?void 0:e.formats)==null?void 0:r.filter(s=>s!=="unknown");if((n==null?void 0:n.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const s of n??[])if(!Pv.has(s))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${s}' is not a valid enum value of type BarcodeFormat.`);$H(this,Hf,n??[]),lW({fireImmediately:!0}).catch(()=>{})}catch(n){throw AN(n,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return uW.filter(e=>e!=="unknown")}async detect(e){try{const r=await vW(e);if(r===null)return[];let n;const s={tryCode39ExtendedMode:!1,textMode:"Plain",formats:qH(this,Hf).map(i=>Pv.get(i))};try{n=await cW(r,s)}catch(i){throw console.error(i),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return n.map(i=>{const{topLeft:{x:a,y:l},topRight:{x:c,y:u},bottomLeft:{x:d,y:f},bottomRight:{x:m,y:p}}=i.position,w=Math.min(a,c,d,m),y=Math.min(l,u,f,p),b=Math.max(a,c,d,m),N=Math.max(l,u,f,p);return{boundingBox:new DOMRectReadOnly(w,y,b-w,N-y),rawValue:i.text,format:dW(i.format),cornerPoints:[{x:a,y:l},{x:c,y:u},{x:m,y:p},{x:d,y:f}]}})}catch(r){throw AN(r,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Hf=new WeakMap;globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=kv);function _W(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return J.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M3 3L6.00007 6.00007M21 21L19.8455 19.8221M9.74194 4.06811C9.83646 4.04279 9.93334 4.02428 10.0319 4.01299C10.1453 4 10.2683 4 10.5141 4H13.5327C13.7786 4 13.9015 4 14.015 4.01299C14.6068 4.08078 15.1375 4.40882 15.4628 4.90782C15.5252 5.00345 15.5802 5.11345 15.6901 5.33333C15.7451 5.44329 15.7726 5.49827 15.8037 5.54609C15.9664 5.79559 16.2318 5.95961 16.5277 5.9935C16.5844 6 16.6459 6 16.7688 6H17.8234C18.9435 6 19.5036 6 19.9314 6.21799C20.3077 6.40973 20.6137 6.71569 20.8055 7.09202C21.0234 7.51984 21.0234 8.0799 21.0234 9.2V15.3496M19.8455 19.8221C19.4278 20 18.8702 20 17.8234 20H6.22344C5.10333 20 4.54328 20 4.11546 19.782C3.73913 19.5903 3.43317 19.2843 3.24142 18.908C3.02344 18.4802 3.02344 17.9201 3.02344 16.8V9.2C3.02344 8.0799 3.02344 7.51984 3.24142 7.09202C3.43317 6.71569 3.73913 6.40973 4.11546 6.21799C4.51385 6.015 5.0269 6.00103 6.00007 6.00007M19.8455 19.8221L14.5619 14.5619M14.5619 14.5619C14.0349 15.4243 13.0847 16 12 16C10.3431 16 9 14.6569 9 13C9 11.9153 9.57566 10.9651 10.4381 10.4381M14.5619 14.5619L10.4381 10.4381M10.4381 10.4381L6.00007 6.00007"}))}function AW(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return J.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M12 16C13.6569 16 15 14.6569 15 13C15 11.3431 13.6569 10 12 10C10.3431 10 9 11.3431 9 13C9 14.6569 10.3431 16 12 16Z"}),J.createElement("path",{d:"M3 16.8V9.2C3 8.0799 3 7.51984 3.21799 7.09202C3.40973 6.71569 3.71569 6.40973 4.09202 6.21799C4.51984 6 5.0799 6 6.2 6H7.25464C7.37758 6 7.43905 6 7.49576 5.9935C7.79166 5.95961 8.05705 5.79559 8.21969 5.54609C8.25086 5.49827 8.27836 5.44328 8.33333 5.33333C8.44329 5.11342 8.49827 5.00346 8.56062 4.90782C8.8859 4.40882 9.41668 4.08078 10.0085 4.01299C10.1219 4 10.2448 4 10.4907 4H13.5093C13.7552 4 13.8781 4 13.9915 4.01299C14.5833 4.08078 15.1141 4.40882 15.4394 4.90782C15.5017 5.00345 15.5567 5.11345 15.6667 5.33333C15.7216 5.44329 15.7491 5.49827 15.7803 5.54609C15.943 5.79559 16.2083 5.95961 16.5042 5.9935C16.561 6 16.6224 6 16.7454 6H17.8C18.9201 6 19.4802 6 19.908 6.21799C20.2843 6.40973 20.5903 6.71569 20.782 7.09202C21 7.51984 21 8.0799 21 9.2V16.8C21 17.9201 21 18.4802 20.782 18.908C20.5903 19.2843 20.2843 19.5903 19.908 19.782C19.4802 20 18.9201 20 17.8 20H6.2C5.0799 20 4.51984 20 4.09202 19.782C3.71569 19.5903 3.40973 19.2843 3.21799 18.908C3 18.4802 3 17.9201 3 16.8Z"}))}function SW(t){const{scanning:e,startScanning:r,stopScanning:n}=t,[s,i]=g.useState(!1);function a(){i(!0),e?n():r(),setTimeout(()=>i(!1),1e3)}return J.createElement("div",{style:{bottom:85,right:8,position:"absolute",zIndex:2,cursor:s?"default":"pointer"}},e?J.createElement(_W,{disabled:s,onClick:a}):J.createElement(AW,{disabled:s,onClick:a}))}function RW(t){const{onClick:e,className:r,style:n}=t;return J.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M13.225 9l5.025-7h-7.972l-3.3 11h5.359l-2.452 8.648.75.364L20.374 9zm.438 3H8.322l2.7-9H16.3l-5.025 7h7.101l-6.7 8.953z"}))}function IW(t){const{onClick:e,className:r,style:n}=t;return J.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M14.516 15.158l.714.714-4.595 6.14-.75-.364L12.337 13H6.978L8.22 8.861l.803.803L8.322 12h3.036l1.793 1.792-1.475 5.16zm5.984 4.05L4.793 3.5l.707-.707 3.492 3.492L10.278 2h7.972l-5.025 7h7.149l-3.71 4.957 4.543 4.543zM12.707 10l3.243 3.243L18.376 10zM9.795 7.088l2.079 2.079L16.3 3h-5.278z"}))}function jW(t){const{status:e,scanning:r,torchToggle:n}=t;function s(i){n(i)}return r&&n?J.createElement("div",{style:{bottom:35,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},e?J.createElement(IW,{onClick:()=>s(!1)}):J.createElement(RW,{onClick:()=>s(!0)})):null}function PW(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return J.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-7.46,0.5l-1.5,0c-0.645,0 -0.643,-1 -0,-1l1.5,0l-0,-1.5c-0,-0.645 1,-0.643 1,0l-0,1.5l1.5,0c0.645,0 0.643,1 -0,1l-1.5,0l-0,1.5c-0,0.645 -1,0.643 -1,0l-0,-1.5Z"}))}function kW(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return J.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-4.96,-0.5c0.645,0 0.643,1 -0,1l-4,0c-0.645,0 -0.643,-1 -0,-1l4,0Z"}))}function MW(t){const{scanning:e,capabilities:r,onZoom:n,value:s}=t;if(!e||!n)return null;const i=(r.max-r.min)/3;return J.createElement(g.Fragment,null,J.createElement("div",{style:{bottom:130,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},J.createElement(kW,{disabled:s<=r.min,onClick:function(){n(Math.max(s-i,r.min))}})),J.createElement("div",{style:{bottom:180,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},J.createElement(PW,{disabled:s>=r.max,onClick:function(){n(Math.min(s+i,r.max))}})))}const Ei={fullContainer:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},innerContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},borderBox:{position:"relative",width:"70%",aspectRatio:"1 / 1",border:"2px dashed rgba(239, 68, 68, 0.4)",borderRadius:"0.5rem"},cornerTopLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,left:0,borderBottomColor:"transparent",borderRightColor:"transparent",borderTopLeftRadius:"0.5rem"},cornerTopRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,right:0,borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopRightRadius:"0.5rem"},cornerBottomLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,left:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomLeftRadius:"0.5rem"},cornerBottomRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,right:0,borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomRightRadius:"0.5rem"}};function DW(t){const{scanning:e,capabilities:r,onOff:n,torch:s,zoom:i,startScanning:a,stopScanning:l}=t;return J.createElement("div",{style:Ei.fullContainer},J.createElement("div",{style:Ei.innerContainer},J.createElement("div",{style:Ei.overlay},J.createElement("div",{style:Ei.borderBox},J.createElement("div",{style:Ei.cornerTopLeft}),J.createElement("div",{style:Ei.cornerTopRight}),J.createElement("div",{style:Ei.cornerBottomLeft}),J.createElement("div",{style:Ei.cornerBottomRight}))),n&&J.createElement(SW,{scanning:e,startScanning:a,stopScanning:l}),s&&r.torch&&J.createElement(jW,{scanning:e,status:s.status,torchToggle:s.toggle}),i&&r.zoom&&J.createElement(MW,{scanning:e,capabilities:r.zoom,value:i.value,onZoom:i.onChange})))}const OW="data:audio/mp3;base64,//PkZAAhghE0AKToAJra/n0FQygAAAGIkYJgmCYXBMAAGCTJz3zhCEM//z//1hz//8MMMMN08ssV6e5DDWIQreAgCvFKy8bXgIKMkUDDBgzJwIBtkRMQAocxIFdxghQGKDoEziAzQxOBOdH92i/iGi+zDCAEIX46a73HrSybZw1x3JZjXp7dSNy/P68rjcbt7p7fakMP5LVMyzCaj1pjvejYYAIDgDGzECjEAk1Jl3559HIon8hzlfPVTCvGJZzfcKSxXfyMWM88//9VKSxXdtnb9vomOuuRyiWVYbf+X8zp6fKGHIdycuWMMMMMMKSnp+6wsYc/9f/7z7rPPWHN556p6fP8MMMP///PPP/7+GHK9PT6p7f/unldP2np7YeHjweiYA4GLNAgAiI7u57n5//oc5/yfk6znOcPhwOBwggHCMpA4HA4KEyHOc5znO+hPIc5//+fqJh8XQPh90JU5xQinOf//87/zvP+ggAYuhCKHxdA+Hxd0EA4KKHA4ciB3kOXfXB/gmf8p/B96lAMKAgAADU+BujARHgwdisgHMfAUHAiceBg4ASBgZBiBIBH4ZaHOJsLhf8R+HYEciIgYSwj/+Bi7EqBh+AcBn5P6Bh4TuBmrAMBiZH7gaLEWgew//PkZFMlyek60MpYAShzqqZhm6gCUWeEUWAewEWYGN4X4GDEPwGE8S4GDoOIGAYKgIQOkz//gGARAUB+CwGxTwMAACAEgyAwdAlAxKhzAxXiZ///AxcEwAwJjDAziCAAwQgdAwRgdAsJQDAmAcGzYDwAhZIAKAcIQB4GT9TQMJ9/4Gi1Fv/AcAYUqKBAwGgNAwVBAAwGhwAwdBlAxFg1AwlgzAwNBuAkJQDBgEEDEqGECgChFgBgL//CIswYYH//+HKCpk4K0C9AaKKCAOBeMcR4X9C44BwABCgGAsGYCgTwHAcAwXAiAwSAQV///CJP9lwMBQAwAAAWGo5lVLCcaeneVhJAVGai3//ioaUEf//gaTAYGCj8BnEwfrIqDcsIQb/vmhU/8fAs0G8YGGwKST8Igj4GCATipksVzY8p//90FWJwh45AkX//4fCF9wMEgkL3uQc+gbGJ8t4MBAMBP/hEXf9FRuWBcAfIFjYzQdoLCBwh7IWVlxaX/w8oMCP/+EQT5poGB1Ir90DhiV6af/jFYBpT2BgoQyyt2M0ToBdEaZyzt8nTo3xdNDCTSd//o6F06CjooxRr4jVF/0bOKD6OMUNDRxiMUVFR0FFQPhGXRjDpr4MAEA4wIQUhYOIw//PkZE4nrg08sOx4ACQ0CopD2aAAlwTTBxQeMcwd8w8gZTAgABXwGABOkzpI0wAQAExnWfP4x8ZjKunWdZ1o1Qe6lFGKCNULORQCELAAPnRUf/GIx/0FHGfo3SdZ0qP2cukXKLlRtBKFgAQwCkwJgFRYBEEATmDsLSY2QiQYCEnEra+UZo6F1aKMRr6GhoaP/+j//ov+i+hjLqBgMkYoqChoo1GqCjoY06TpRqjjLOYzRRmMuizmgdKhdF8kjTAAAPMCwGswzglgwAJfzqxmioKH/////////////+ijLOAwFmN0f/////////Q///8ZjP/9DGYyFwIDBeB3MA4AlBWidKM5spykAUAQOCakK+udGqN8VDYjTRuN//0bVX//6Kio4xQFv//nf//kKOoAEIB6SY6hcxenp85///4/DEPf/84Xvl4vF4dwtxfEJgCYQHMSgKCROp4+fn////L4tQf0unz89OecLxeL0ul09y6enzp4dIhKAQFA5hKfLu1nU7/Wr71rRKJUBQSUVt////l08GUPVWgAAYAeNKsxbQNAAhQx3/oKGMM6dZ1Yy6sajMbfKio7lNcv0sScZ47lNcw32ekVFMP9fp/f+mklI6at6u/dBMQuW6y+C5BcgwAA//PkZEomGg1HYGe0riWsCqbEwiY0BJFJMxrCcxGgQ2VK8xxCF1wsABgQBBgQBAYAFCkYCgALkK4fJ00E5ctJN1Uxy5au3XoGcM4dSN0EYZwzhW0WCh1PZwzhnFFQxtnbO2d0Kt6CdXbruggkTEX5Rs4TEQUVsdVXaCcuWXIBQUGmwmgoAGcJiM4dSioHQdBnEY+hjcbov//jcb/43G43G/jCRibfxugdBnDqULO2duvQumztncbo4xGKKNxugooxGIxQULoOgFgUMTA/jbrxiMDmETL+eLhcPThzOeeOZfL5fIcBYuXD/OHv8t//LJFxjxQYHHKDGFkZMtlmKM0RgQfbVtxFIHbQBDRuzRguEI1c9XZ/rWmrZfVU3Oc/9utNNygRQkCoHlAYstNN6DJ1IINpoINppv+WG/+g2mmnUmmmpBAoJIJhnwB5xkymn606Df/t000xhU03UXC5Ol8uFyXy+Xy/l8v5w4cLk4XAvwAYUvl/QL5fTdlKZkEEEEGumaKaX00zIOemf6CH///ywI3LKpiQ2Ef4xYWMSDyI0XwzikpL0ajVHZ3j9DGIjeuXcNfjn96/S/TUz/X/vX////5K/r+v7Jn+LlAoGZOIQIwMKBQM/yppKYURmhGZkR2b//PkZE0mHg1HEG8wyiD7mlwAyDU8nJHi5htakZmZGNiRcpkJhBmUmZYQcM1VDEEBggNDV/ASEZRYKFZIhkXKLlKmk7IVTKmZNJ5KhiqVUqpX+k7+qlVKyV/ZIqZDFDWTJlFyi5TJpKhiXKBQyZzIS5JhBoayV/AQWVpGWkcYTV5O/rIVSv8/0nkr+v6/vyR/X9f1/ZN8kf5/n99/n+f5/lTKmf9/mRP8yFUqpWSv4yJUqpX9kj/MmZNJ5K/z/P9J5P/v6yFUz/CEoywgUMqZkz/FssECIsVq0aPRrRRatFFFykQZJ2Ukl///5KjmksOaA7ALROJLDnEsLbq3GTMVrwb/0dGzmM0DlfBlHQOmrdR0MYi92TX6b/cmDHLclyUVYO/4O8sFTKFTKFf8yhUyhUyhXzKlDKlCsr/+ZUoVlSsr/+ZQqZUoZUoceMfcoZUoZUoVlfOPGcmDHKcpynKg9yXJcr3JclyXJclyYO+DXJclyfgxFZVb3KcqD/g2MxzsY72L9LubPR0dCyf5K5NNd+Tv9GXRdV0XJclyfcl/n+k8kf6SX/iVynvXf///4Mg/1OkxguYzmM5jMcLHMxwwGhgNCwXMLAcwMXTLi1MD7w7tmTdBvMmE0xQFzCwHMDAd//PkZGMpigkmAGOUvCfTgcgAuC+ITswMFzC4oMLhYMByn0xvU+p9Tr0xUxf/0xv///1PBYDhgNTFTFTGTGTGTGTGTGTGTGC4GTFMDAcLAdMVMVMULAcMBpgYDhcDGFwsYXFBikLGFwMGA4MBxgcDKfTEMUoAx2BisD+mKp5Tv1OkxkxkxkxkxkxkxkxlO0xVPJi/6nv////U7CwHTFTFTGTGTGTGU+p71PpjJipihYDpipi/6n1Ov//C4GC4GTGTGTGTFU8WBSZdLhWB//yKlotyLZFiLf8tyyRUipFSKkVGRBZQMiWC3yx//wxUGKsSvDFQGHUAL3QMsHDFIYpCYy2Bmagy6BjLgy6Bh3od58DCLAizBgRb+EQiyEQiwGBFuDAi3/////20QqSBJf/qcumv/////wMZdGXAYMu1gYy6MuBEZdBgy4BjLgy6BjLgy6BjLgy6BjLQy6DBlz2cJDLgRGXAMZdGXAYMuhMZcCIy6sJGaoGMuppwNRl3WBjLgy63wiEWAwIt/+EQi0IhFsDCLAi0GBFkGBFgMJCqaqYAgAYIhBBvwf7kwcqRq7V3IctacvlN6NxqgooxRRuNRiijEZjMGRuMvz9FGozQ+1X2qe1T1S//+VhaWAtKwtML//PkZEIkbgcaAHc1xCJrjeAAtfuUAtLAWf///mWePH95ZFgsyssvM88+jzO6K+z7OM48sH+WDiweZx5YOK+zxWLGJWsa6xadAv02fTZLSpsFpvLSga0tMgWgUgWmwgUmyWl8tMgWWmLSoFJsoFlpSwsmyBg4HhEdgwHAYPBwGDgeBg8HwMHg4DB4PBgOAwcOwMHLwDn5lAwcDgiDgYDwMHA/4MB3//+EQeDAdwiDwYLPhEWQYLODBYERZBgt8Ii34GLBaB5pfAZ0FvEAQ/UfwxULlx+IXx+8f5CELH8fxKhAIDFoHBEDRc3////gwHgaRXgMHYMB2EU/gwZ/gYbw3gY3QbgYNgbgYiAbgwN3/+EQbBEG4MBuDAbAwG4RBtAwbg2////+B9B6F//////////hEdD//////////8DRahEQGCInMNg3LBElgNjDciCwG/lgNiwGxWG///mG4bf/+WA3Kw3KyIMNw2Kw3MNg3MNg3MNiIMiQ2OK0xMiA3KyJLAEZgRARmBEDEYFwBBgEgEeomowol5YAJKwCDAIAJ8sAE+gGBgCJYAQUZ/13LubMu5dyiYOAhKwEFGf9AOoz/g4CFAIol/lgAjysAgsAElYBP////lgJksBM//lgRUxF//PkZGApggsIAHt2wiNLoggAqCz8RFSwIqYioipkjEjHCCSN/+WJg5iYOYmPK5krmTmZk5mZ8sTJYmf8yJiNiIisi/ywRmRkZkZGZGRmRERkREZERGRERkREZERGxEf///hETIMEyBiZEyBiZEzwiJgDEwU4DV2gQGFOBgmP8GAiAwRAiBgIgYCIGAi/4MBHAwRgjAwRgjwMEQIgMcgY8DBGCMDBGCMDEyJn///+BiYQIBlObj4eYLIwsjAOBGFkYBoEQ84eULIw88LIA88PKHnw8sPKFkeHlANAiAaFUDAiMYPIHmDzBZBhZB///8GBOA1sH/Awni7AwnhPCITwYE/CKzBgt8Ig8GA4Ig6EQdww4Yb+F1sIgtwYCwGAsAwWAsBgLAYCwDBYCwDBaHUDF+VEDKgC2BgtBaDAWgYLQW////gYLAWQMFgLAMFoLcGAt////4RMABmBSj4NgwMOGHBsHhdcLrwbB4XXC6+F14YcLrww4Ng8MOGHBsHww4Ng8AUC4AoMQMC4fgw3wutV4QIsAgFYIBWCCVgHeVgHeWABCwAIVgH+YBwB5aRAstKgV6Ba1oMg9avtUVN/qdLWciD/cqD3Jg6DFPuTB/////lYAn//mC8C+YLwL5gvgvGC//PkZFEpLgMKYXt2xB5LogAArbdc+C8VgvlYL/mC8C+YLwL5YBfMNgNkwXixDWoHPMc4VUxVA2TBeDZPYXzXl815fK14sLxYXvK1//NeXzXl815fMtdDLSw3UsMtLCstMtLDLSwsFhWWlgt//8sFhW6f/////+WF7zXl8sL5ry+Vrxry+WF/wMLwX4MC+EQv/AwvBfAxsjYAyqpKA0lpLAwvBfBgXv///4RA2DANAYGgNgYGgNgYGwN+EQvf/BgXwYF//8DC+F4Dd6NgGBf4AgFwbB0MMF1wuuDYMBsGwusDYOBsHA2Dvg2DQuuDYOhdcMMF14YYDGYDEGwfhhgbB0MN///4RBaEQWgZByoYRWYMFvwiDsGwaF1gbB34GDwdC64XW/w1aKxDVgatir4YcLrQbBwNg7////////////+ESfgZPyff/////////4MFmBvvMAERZ8CC5adNj02E2S0qbCBSBZaYtN///oFlpU2QMXIFAYuQK9AtAo7IxLTpsIFJs/5aZRxQawaxGfIg9CsrI+PUqkWdOHp7ODsOl6cOHZ4dsulfLI9/8BAAgMBACsBLACVgBjoAWAE5OTM6WDAR0zodMdHCsJLASWAjzCQgsBJhASWAjysI8wkJMICU//PkZFkeqgcaYDd1th6DogAAqCuIxQwtDA5MdMULgyY6YqnXqdep5TpMdMVRNRL/UT9AN6jCiSjKAZRNRhAMomgFQDfCIJwYCQiCAiCMGAkGAgDBJUA3eVAMEgj////8SrDFIYqh5g8kPMHkDzB5OFkYeYPJ+HlDzB5+AYVQDibCyIPLLEZIsjIliWS0WywWyyWuWCyWJaLZbLJYDHgLAItFvy3///4eYPKBlQTh5QYEODBb//hhoNg7/C62DYPFUKwKsVgNWBq8VkVcVkVUVYrH//hGff/8Iz8GT7//////wiX4ML3gwvgwvf4ML3gZeqoHVGyBl4vgZfL2F1oNg4Lrg2DcLrg2DQw0Lrhh8Lr4YcMNBsGhdcGBcMOGGAFGAGMQsF1guuGG4XXV/4uQXOLmF1kL/8lCXkuSk4O8/FzHzuP0hIucf/CIFAMCgFPgYFAKAwCgGBQCgGHYO4GBVM4GgQI4RCMEQKQOtQjUI1CNcI14MqDKwDIAGQDzh5wsjDyw8uHmDzYeUPN+DEYRRhFEIowYgDQgIhWDApgwKAwKQYFAYFQMKkYDOxHAzsRgMKBUGBX/h5v+Hm4ecPNh5A8wBwjhZHhZAHlDzBZAFkAeQPKHnCyILIAsih5QsgDz//PkZLQgIgsMAFp1xCGLogAAA2rkB5w8oeYLIQ8kPMHkCyGHnAMKoGmAgFkUPMHmDYAtfHPHNkr/JYl8c8lCWHPHMkqSo5onMAkBDnfJX//8IgDBgBhEdAaxSQMHUGAEIgAV4risCcipBOMVRVBO////hEvAxsAwvf////8MPDDww4XWC64XXDDww4YcMPC6wYb/wYGgiGwMplMDYhTCIaCIaBga/////8GA+EQdgYPB4MB4GDwdhEH8Ig8Ig8GA6EQcEQf8DBxlBjoAweDuFwgCQXiL//iLiKCKCL4XCiKRFwEgoRT4iqpMQU1FMy4xMDCqqqqqqqr////xuDd8fv/DVwrArEIg6EQdhEHAYPBwMB+ERYBi0WAwWAZ0FoGLYOB+JfgZ0FoGdBaDBYbn+WHm9xW7/Nzzc83PLDzc8reWlA7S0oHamx//6BflpU2C0qbBaf/8yk/ysn+VkMhTKQrKVk8yE8rIVkKyYsAn/5WC+YICmCApWCGTkxtKMcVWlgFMEBTBAX////0C0C0C/////////LTFpvTZLTlpv/0Ci0xaYtOgWmymyWkAxcWmTZTYTY8tMmygUWmLTIFpsFpv9NnywLmLCx2RgWmQKTZ98UjnzZ1/++D4M6/////3//PkZOgjIg8IAFcbxCaTogAAoCuIzfJ8vfJ8Wcs5fBnD5//++L5f////////6nCKv//+o0o0FUYwqDNGCwgUMKC0VVGkVv//4Yf8LrxVCriqDVoasDVuKsNWw1bisBqwVkVkVX//gy/4YYMMGGhhgwwNg4LrhdcLrAYWGAA0zBsH4Ng3C6/////4MAoGBQIDAKBgUCAwCgYEAsDAoEAwKBAYBYMAoGBQIBgUCYGBQIBgUCwiBAYBYMAoRAgRAoGBBMBooCAYFAkIgTEUxFv/EWxFxFhFoi0LhQuFiLCL/EWqTEFNRTMuMTAwqqqq//////8TWJriV/hERAwRgYiEYGIhGBmIRgYiEYMEQMEcDMSiA1GYwMR+UDMTkA7KIgMRGIGGM0SIrRGjRlhEV4jxov8rR/5YRFhEdQSViCsR5iRJWIKxPlgQYgSViSsR5WJMQJLC78IiKERF4REeERGEREERHwMRGOBmIRhERhERAwRAYiEQGIhGBmIRAajkgG5TEEREDBHwYIwYI4REXCIV/4MCmDArgwKAYUO/gYVCkGBUGBTgYUCsGBUIhUDCoUCIVBgVBgVBgUhEKQMKhUDCoUBgVAwoFAYFcGBQDI6oA5+qQiFAMjBUGBXCyEPIFkOH//PkZPMj6gr6AFdVwifkBdwAoC2Ilh5/8PPh5Qsih5IeUA0TAZrE8PP////wMRiIIqID8piAxEIwMxCMDEQjCIj//BiIDRo8Iogii/4MKwYVhEoESkDEiIGJEgYlfBgmDBIMEAYgSBiBIREAwSERH/8I7wPfuCO4I7v/8GBvAw3Bv/////gwN34RBuBg2BuBg2BuBg2BuEQbhEG+EQbAwG4MBtwiDaDAbhEGwMBuDAbAwG4GDYG8DBsDcDBuNwDRWDcIg2AwbA34RBv///CINvCINgMRIN/////wiG4DDeG+TEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq/zB4OLAP8rBxWDisHlYOKxb5WLTFgsMWiw18LDOnjPxZoxadDOgsLAtLAbKymVhsrDZWG/LAb8w2GywGysNlgNFgNGFwuBQuWnTZLToFFpisLJsFp0Cy0voFAQLFZkMCAQwIBCsC/5WBCwBCwBCwBCsCeVgUwIBCwBDEwEMCAQrAhgUClgCFgTlgCGJgJ5gQTGJwKWAKYFApgQTGBQL5kY0HMjQYnAhWJvKwIWAIVgQrApYAhWBPBgECIEBgE/8IgXhECQiBAMCkcDEwEwMCAQGAQIhoIhsGBsIhvgwN//PkZN4irgr2AAOVqiUThegAnCtMgwNwiG/8IhuDA1hENhENgYbKYHb2IBhoNhENAwN////8IhsDKZS////8IhuBhspgc0KQRDWEQ3///CNf4GAIMDAwgAwAAwhAwAwYAIgwiHBgAMAYGAAGHv///CIBqBqESDEIgRYGoGHBiDEIgGoGgMAYgxgwgxCIETwYFYMCoMCuDApBgU8DCoU//gY3G//wYFOBhUKBEKQYFfBgV8IhSEQoBkYK8IhT/wMKhXBgUCIU4RCoRCvgYVCsDCp3A1SqAYFAiFP////gY3G1TEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVgwCAwCBEC///////8IgUIgWEQIBgUCAwTQMCAQDAoEhECAYFIwGaRMBotWAasdwH/KqBmhFgaKI4GRgKVpjCBTCBPMJHNMFMIFKwnlgJ5hUxhUwGWlpAMuMuWLTFpvQKQLQKLTIFJsoFIFFZb/8woQwoT///MIF8rC+WAphAphAppgpYClgsmwBC6bHoFFpUCi0wGXFguWCwFLgUsgX6BZaVNj0Ci03//+EQKEQKEQLCIFAxMBcDAgFAwIBQYBODAKBgUCAYEAuDAKBgUCAYFAgRAngwCgwCwiBIRAmE//PkZN4iogj2AFdVxiUrhewAhOkwQIBgQ0gbOI4GRhOBiYCgYEAv////CIFAyMBQYBf///CIF8IgUDAgFBgEAwIRwMCCcDEwFAwIBf///CIEQGMDGEXCKBpCIDCEQDCAsYInDFQMMAuYSoTQMVfBlf//+DKfBgAiGDAQMIMIgCIQYADAEGAgwP////8ItgNu2/8DAAAiABgHhECBgQGEQARA8GAeEQIMABECEQIMAwYBBgCDAARA4GAAgYACDAARAwiAgwDhED4RABEBCIGBgDoH2dgZwCBgAP//BhX/+DCiTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqF1ww////////hdeGGDDBhwjeF102E2fTYAowMLjE0zTDfyyMYjEDJTwMLSwFi0/gQLoFIFpsegWmyBQsWlQL9ApNgtIWn8tMgX6BaBX+WmQL9Nn02f9NktIgUgWmwWl9Avy06bCBSbJaUtImyWkQKLTIFgYWoFFpAKFwMLzZgwAwvLTIFlpU2fQLQK///4Yf4YaF1sLrg2DAuuDYNDDQw4NgwLrhh4XXC64Ng3C60MNwbB4XWC64YcMODYPCJYDlMQBlwRLg2DOF1v/////PkZM0eKgz0AE+UuCnLFfAAk3Fsg2DAYX/ww//4YaGGDDhdbDDACFwMuXA2DADlygusDYOBsGhhv//wNU/CKQusF1oXX+F1wuuGGC6wXWDDBdbC6wXXhHv//4AHIFgC0BZAA4Ba4FkADwFsC3AtQAOcC0BYAtgAcAA9+BYAsgW4FvgWOABwC1oq+it4RT0VVG0VFGkVywo1/RWU4U59TlFb1GvRX////QK9Nj/9AtNn02fTY9NhNlAr/QK//TYTZLSJsIFemx///oF/5aZNj02U2C0yBaBfoFAS6bKBfoFVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQiA8GAO/4RAf//////wYA4GAO+EQHAwB4GDoB4GA4HQRB0BhlDIBpEAcBgPDIBgPAeDAHIFAYuLTpspsJsFpi0haRApAtAstIYKClgF/ysF/ysE/ysF//LAJ6plTlYC1ZUypmqtWVK1VqyplSFgBaqqcwAAVIqcrEBAAKmMBERCQhwD5iICIQEyABMAABBVGXF4gIA4DLAAWAEQgLVSsBaq1ZUv+YKClgELAJ////5YBP//LAL5WC+Vgn+WAX/LT+gW//PkZMIhLgrsAFt1yiD7FiB6A9qwmwViybCbCbCBSBabCBSBabPpsegWmwWn9ApApApNgCGBmEwWlLSpsf////hEHgYOB3////4GDkiBxMHhEdgYOB4GDwcBg4HW23gooFYHd/+BnAz8O8Vv//FaBm4rBWh38es2zbAtD1m2PVBqBrBqBrAF7AF3/5el84MkuHTgyy+dL0dRnEajMIyOn8RsZ5HGG/kbIpHIkYUiD0y2WctlZaWSwrKx6FZbxnL54ul04eLhw9Ol84dl86cOHT3Ipb5Z8qKpVx6/j0EkLctVTEFNRTMuMTAwgWQLQAHgLf/////4Fn+EQESEcIgInCIRW9TkrCzH0YIjjWtI+YeCD0woLCBQwsKRWUaRVCBZFZRtRtFRTlTlThRtAr0C0C//02E2fTZQK/0Ck2f9TlFRTlTlFT/9TlFVFRFb/9ThThynIQbWkAREue5S11rKdlkDEVABh61ExYPU+tOD4MQgcn4iwigivxFRFoXDcRQLhoiwioXCeAkFBcNiL8RURQBIKEVEWiLBcKIqIpEXC4QReIoIpCIKAQMxFAFAsIuIr/4YYLr//ww4XWBgwC64XX/hhgw3hhwuv8MNhhguvhdcAUYgaYTAAoWDDg2DQbBg//PkZPYe6gzuADd1uDKsBhBAe89cYYdGjtDT2hDmlD2leaOv9oX0OX/0NNLplNf8ewakNWGrTfTRpphNJtfaeh7T1/tStdtTpqN532lpX/1/kmQ5eaf2hoaV9paGleJAvd0rer2pWu1ar2vk56vVrV5Hj1Nop+/lfv5Zpkem5kX/2vtata2rq783nbvtbW6VjW6a2rq13+rO6VysV58K7tbp0ru6Vrtqa1a67tr6sau1ulYrnfa2v927Vrt21NSuN5X927/D4diAQANh4gEIfxB+IQG/D/4gDw/iGIRD+HRATEFNRTMuMTAwqqqqqqqqqqqqqqqqqiIEK/ititFX///8VcVuK38VsVhXBOQTpq/qm8QCAcBmIxgdfFZCHECpxFBFAuFEUC4cLhsRTEVEUDVoDQD+KrFYirFX+KwKoVgVUVUVeKwGrhWRWBViqFYDV4rMViKyGroauBg/A0YThVgNAEVQqw1fisis4quKxxWYrAatxWIqoqg1dFYxVxWIrAavAaAArIrAqoqhWYrIqvxWMVYrARCADhcKoVYavDVgqhV4qorIrHFWKuKxFViscVUVYasAaAfFY/4YcMNhdfwuuGGC64YfDDA2DwusANygbBwAxhAECwNg8MOF1hD4//PkZOkc4g7yBjd1sDNkDhgqYwtcYoUyiQ0NCkxQ0NCQkSIbGKIyRGEo5mUaNEhGKEHMmaGhI0UokORvMmZmZSZSiMZQkRnKKZkzRoSNCQpQ0NEZoaNFJkhh3KOUJEhIcoSJCQkIzlDlEjMDMyMpQ0JCQzNCRGaNCRISEZoZihoaIwlEHKNGiMzFEjRmSIwlHMyZmcyiGyMxRyhIkIxRSZokSEYGBkiRojAPESNGjQxvKHMmMoSKTJCQkIwlFKLDYWGhoZhYWAAUGBsAwsMDYUAcK4XDPhQVwwLAH/DfgHC6TEFNRaqqBgjwYI//wYI/8GCL///+DBFhERgwRcIiPAzGYgMRKIDcskBgjAxEIwYI4GiRwNEjhFH4MRwYjA0aOEUf8Io/BiLgxGEUYRRQij/BiKDEYMR+DBGBiMRQiIgYIwiIwYIgiIgMRGIDUSjhEReEREBiIRAwR/wYI/8IiP4MEcGCIIiOERH8GCIIiMIiIIiODBHBgjBgjwiIoREcIiOEREDBFCKiAxHJcIiMGCMGCLwYI8IiPhERgwRAwRAYjEUIiIGCP/AxGIgiIsGCL//4REYMEXhERBERhExhExAzyAZiEWDBGERGeKsVsVRVFcVwTnFcVxVgnYqipFUV//PkZPkcfgzeAFaVxDgUBgAgatvIYrgnYqgnQJyK4riqK4rwTsVor4rQAjABAgnQritFSKoqQTsE5C1haxfF7F4XQtULSFqC1i4LwWkXIWkXRdF+LwqAnME4iqCdwToVuK+HAERWAkAlgJB0OB3Doc8OYc8VCsVgIB3DuHAERUAkAkHMOBwOAIisO4dwEAEAEg6AkAl4CeHA4AkKhXioBIOiv8OB3F+LgWkXxeF8XouxcF0XBeF8XBdF8XhdAdouC8AEsXYWsXOKsVBU/FaKmK/FTxXFbFUVPiv/8VfxXitVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVAXX/8MN/wwwYf//DDBh4Yf/+DYODDfCIFAwKBQiaANFgUDAgFAwIBcADwFuBY/At8C1wLfgAdAtwLGBawLcC3AsgWeBYwLX4XW8LrBhgiFgMlhYLrhh4XWhdb8MOGGhdcMP4YaF1gw8LrwuvhhoYYLrYXWDDBdcGwfC60MN/ww8GwZ4XXC64GZQsF1wbBnDD4XXg2DcLrBdaDYPhhgusF1uGGC64YfhhoNg0LrQwwYcMNC62F1/g2DYXW4XXC6+GH8DTIW4YeB/wR/wjwR+DP/y06bJaRAtAtAtAs//PkZNwY2grqBFW1xDhTRegABLBstL6BRaVAstN5aYtN/psIFf5aQtIgWgUWk8tImyWkQL9Avy0qbKbKbJaf02f/0CkCy05adAsC3K7+mx5aVAv0C/TZ8tOmymwB2pspsFpPLSlpy0qbCBSBXlpk2E2E2C0paUtP6Bfpslp0CkCy0ibJaZAosWQLLTJsemwgUmz6BZaYtOgUWmLTpsJsoFJslpPLT+mwmz//6Bfpsf6BSBSbCBXoFeWk9NhNhAr0Cy0/+WnTZ8tJ/oFf6bP+myWn//8tMmz/lpf//////8sPTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBgJwiCYMBP//gwE//////wiCAMEgkIggIqIDKpUCIIgwE8IzA4j+EYhGAZMIyDJA5gGRhGcIyDIhEQiIGAgwIRDwiAGAAwYMHBghGAZMGRCMhGYRgGRA5gIyDIwZPBk/wZIRmEY/gyOBxIMgIzCMgcTgwRBgjwYJBgngwTwYJhEQBiBGERMIrwOouAxAgGCQYIhERhEQDBGDBAREgwTCIgGCQYJgwSDBHwiI4MEAwSBiRHCIkGCYGJEQiI/Bgn4REYREeBiBIH6XhERhETwogoy04mpZibFmJuWYmx8n//PkZN4ZrgrkAFZUyDcjofgAA9qc0HafZ8HwNrjaG3xtjaDtJwTo+D55Ow7fxNRNSyLPlqJsAr/lmA/FmWYm5acTQVgTkVQTnBOQTgVxVBOBVFWK4J3FUE7gBABOwToVQTsVhUFcVRXBOhUBORWiuKkVYrCqK+KoqgnQrAnEV+K8E7FQE5xWBOQToVQTsVRW8V4qRUFYVgTsVhXioKgrCqKwqAnYqCtBOhUioK+CcisK8VRUFSKnirFQVBVFcE6FcVoJwKoqCrFXFUE7gnAqiuCcQTsE7xU8VP8VYrgnYrCuTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqn3/l/J/8vHL5f/BhwCETgGpIDOATgEIOFoDcHzgEIDgC+pG7eve1S/6tat7rXupDXSStWoIpGS4TSMQNIySMwpIyAaRkkZ8GJGdBtbwYkZ63tCKRkoIpGWDEjLCKRmEkjOvsEUjJOsIpGa6bOrgxIzsEkjIGJGYUkZVKCKRmqoDkgEjMJJGSYMSMAikZJ3qhp0dq9ru3X1I36FujPbXuxwKbr//waABfg0AC6DUDUDXBqBoAmQawJiGrhqDUGoN//PkZL8USgKcAAblrroTgfQAbhtQAag1QawaYNIAuQa12Lv9si7F2NnXa2Vsi7i/DZl2tlL9l+vL8tlUTUTUTUYQDIBlGUAyifqJKJqJ+p5Mf/U7TETEU7CxkxVO1PKdqeU8u4vq2ddnrsbM2Zs/tl9s67V2NlbIu5sgaA1Q14ExAmAaA0BrDVDXhpgTPDQGuBMA0gTKGgCYgTHDQGrDUGgNcNQaw1hoAmcNIaRIAtALVEgC1gteI8FpBaBIAtcRwkAWgFpBaILVBaIkAWgRwjhIiPEeDXwa/4NUGr+DRwaKBgX/8IhP//wiF8GBMGBP/wYEhEKEQmEQuDAoGFTAwLgwLhG/4MvCM8GSDJCNwZQOXg2DwbB8MPDDhhuGGBsHhh8Lrf4MCQYFCIUGJgiE8GBQMIFhELDDhdaGHhdYGwaGGDDhhuDYMBsHg2D8MMGHBsH8GwYDYMhEKEQgMCeDAsIhAiFBgQIhAYFhEKDAkGBMIhYGEC4GFCBELgYUKDAuEQsGBQMKEwiEBgUGBcIhQYFwYFAwgWDAoRC8GBAYE4RCgwKEQvhEJgYUIBhQkIhAiECIUGBIMC4RCgwJCIUGBAiFgaYLwiEA5cGXCNhGBGwZAw4Ng0MPBkqNqcoqorlh//PkZP8cygrkAFI0wjo7lfAAjhq4SnPor//psoFemygWmwWm/0C0Ci05adApNn/TZQLU5RU9FRFVFdTn1OFG1Gywv/UbUa9Ff0VoFgCwBbAtQLUCzAtgAchHAN8ImAbgBvwDd4RwjQDeAN8I0ImEQEQAbwRgiQjBHhHAN0A3vgG6Ab/CIhEgG5AN6EQESAbmEYI4RABvYRoRABuYRgDehEQiAiIRABvcA3QiQDfwjwDfCICPCJCJCJ4RwiYRwjBEwDehEYRgDfCNCOEQEQEcI+BagAd4FrAscCxAswLfwLAFgC1wLNVMQU1FMy4xMDBVVVVVVVVVBlBkwO3wZAZMIz//////+DJwO0IwI0DsA7cGUI34Rn4RgMuEZgywZQjAZP/hGAcmDKEYDIB28GQGQGXhGgcgRoMgRoHYBywZAZYMmBygyQYFCIUDChQYE4MCgaYJ/gwKEQsGBAiEBgXAwgQLrhdcGwcGHBsGA2Dgw4YYGwZC6/hdYMMF14YcLrYYcMPDDhdYGweF1oYb4MCwYEwYEgwJBgTCIQGBIRC/BgQDCBcIhAMKFhEKDAsGBQYFAwgTgwKDAoMCQiEgwIBhAnCIUGBQiFwiEBicIhAiFhEIgIoBooGieDPA+4GeDPCP//PkZOobXgrkAEY0jjazieQgBKKIBGgyBGhGhGgyAdoMmEaDIB2gyhGwZYMsI0GSDIEaDKB2QOWEaDKB2hGgygcoHYBygdkDtgygcngyAyhG4MgMgRgRmDJCNBkA7QjAZIRoRoMuByhGgyAyAyhGwZYHKByAcgMgRoHIEbCNCNA7fCNA7AZAO0GSEYEaDLA7cDthGgyAyAyQjAOwGUIyDKEYEaEYEYEaEbA5AZQZAZAZIMgRkGXBlBkCMgyAyQZYMngcmEb8GUGQIyDIBywZAZOEZhGBGwO2EbwjcI3hGYMqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqquDqz8GMDQIvBj///+DGDEGAMAifBj8IuEThFCIEQGPCLwiQYBFCKESDCETBhhGAZGEZ4MjgcSEY4GoRQigxCIEQGPCKBiBrgxwiBEwMIRAY4MQNMIkImDEGIRYMIRYRAYhFBjwYwNQYgwBgBh4GAMQiwYgxA0gahFBgBjgYBFhFhFCKEWBgEWEUGEIgMQYQMYRAMQigxhFBh4GkIgRIRYRAY4RIMQYgYhFA18IoMQYQihFhEgwhFCIDEGIRQieBiEUIoRQYhEwYDAFwGrBog0waAaQawacGsGiDQp9MZMVT3piJjJjK//PkZOYZBgjoaUJQ0DprofQgbhq0dep71PqeU69TpMdMVT6n1OlPKdJjpiKdFZkxlPKdJiJj+mKp/0xFPBoAmYaw0BpwJhDSBMQ1BqAmIEzDSGgNXDRDRhp+GsNMNAEyAmYagJkBMA1BpDXAmECZhoDXhqAmYawJjgTICZBrDSGsNAExDVDQGqGgNHDWBMIaQ0BrAmcCYgTHAmIEzDWGgNYaOBMw0BqDSBMYaA04aA1hqwJhw0ATKGqBM8NYEz4aQJkGoNMNIag1+GsCY+BMQJlDVw0cCYfDXw1ho4aQ0gTCTEFNRTMuMTAwqqoD37wjuhHf/////hGf////hHf/gycEZwRn4MnYMncIzsGTwOdOA507A507hGeEZ8GTuDJ4Rn4HPn4Mn4RnhGcDJwM3YM3gzdBm6DNwR3QjvA927Bm//Bm7Bm/Bm8GbgZvBm4GboR3gzeEd+DN8GbvBm6EZ+Bzp4Mn4HOnBGfA588IzsDnTgZPCM8Iz+EZ/CM4DnTgOdPBk8Iz4RJwGTidBi7AycTgiT4RJ8GE6ESdhEngZPJwGTieDCcESfwYToMJ3AycTwiTsDJ5OhEnwibwYb+ETdwibwibvCJuwYb/4RN/Btf/jYGyNv8bHLUtSzE0/LQBW//PkZPQcHgjQAFKVrjfDmgAge1eMLITcshNy1LX8si0LUTQtCyLQTUteWQmvLItSz4mgmnTJops0umEymDSPsnR9HwfB8k7Pvn0fAvwtcLXF/F+L4vQtQWuFoC0BaReF7AeBfwtcXBdF4XheFwXAtAui9C1haRdi6LwvirgnUE6FcVBVisKgrCvioK+KoqiqAhh3AQFXhwVYrFYCWHMOioVAI4dFWHPDgCAdDgdDmHcBIBEO+HRWAiKsBMO4dFQCAdATw6HBWHBWAgHBUHMOf/gICsOCoV4qw7+KxWHA6KhVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVC11Fz1+NP+/Xkqpr9OfuhQ6lZNWf+XsZc/si+KNoOj/Ntai9j7IISgZAklTqQhjToNTeQoreRdaSDODWvYAVFaWWkQmVuZPP8bRUzq896vc+XS6mm5gnnW7JLnV4z9N5XnW4k86x+uyHyxnWkmdborzraff2SvOtvljOtjd/5XRW8MivOsry/K3gUzrFPS1eFTOttTsul1+lLGdbV3c53h51mdbK7xPOr1SpnWlM63kedZnV4XPK86onnW7myrnWTmRTOqascoabXd/L+yuzS95dv1efjhl92ntYyTuIb6wuWRZFmWRa//PkZOcb/gqMACDf1LTLofggA9qc/gKRZiblqWYm3E24moSQnR9BJj6JwfBaFqWZZFoWvLUshNPxNuWn6bTZHgozRTSaNAY5oGjFQVgTkE6FUVorioK8VBXBO8VRUioAhxVioK4qAnIrYrCqKsVRVBORXBORVFcVcVwTgVBUBORUisK4rCoKwrxXFYE4FYVATjFcVhX4rcVBVFQV4rxVFSKwqCpFcV+K8VhXFYV4qivFUE4FaCdivBORUBOfBOgToE6FUVYqisKgqCtxWFbFQVxXisKgqRU4qioKuKwqCvxVBkH/4Mgf4Rg4RgfgxZBizhFYEVuDFvhFbBi3CKyEVsGLf/4MgAxaDFoGsWYMWgaxYBrFngxaDFnCKwIrAYswNas+DFgRWYGtWYMWBFZgxbgaxbgxZCKwGLIRWgxZCK2EVmDFmDFgMW4GtW8IrAYtBi3Bi0GLAYsCK0IrQit4MWeEVgRW+DFsI9cDW9AYtgxZhFaBrVgMWgxaDFvCKwIrIGtWhFaBrFuEVvBi3hFZA1i0IrYMWYMWAxaEVkGLAisCKzBizCK0DWrIRg+EYIRgQjABkHwODABkDhGDwODBgyAEYIRoRvww4YcKILYKILfhRg5htjY4OQbQ2hNAH8su//PkZP8cRgjWAFAUYjwDofQAi9pcJry1E1LUsuWvE2E0LQTcB+E2LMTctQFEEcWnFYVwTkAI4rRWFYE6BOhWwToBBAQgnIrisETANwIiAb/COEQEbgG+EcA38A3wjhGCMEeEaEeKoJwK4J2KoARBVBOIJ1FWKoJ0CcCuCdRWFcV4rioK4rAnYJ2K0V8VYr8E4xWFUVBVFQE6FXBORWFSKorxVFcVwToE5wTvBOoqwToVIJziuKwJxAQgnUVBUgnAqQCaCdxWirFaKwrRWFcE7FfFeK4rgnIrAnYrCoKoqgnAqCrip4qgnCr/////8Iu8BjvP4Ry5/8Izggc4Zw4RnD/hGcP8GThBk4eDJwgycIMnDwjOD4MnBA3eu9hF3kGO8gx3vBjvAN3jvMGO8CLvAY72DHeAbvXe+DHehF3kGO8gbvHeBF3oG713gG713vgx3oMd5BjvAi7wGO9A3eu8BjvMDd470Iu9wN3jvQY7wGO9wN3jvIRd4Bu9d6Bu9d6DHeAbvHewi7yEXecGO9BjvQN3rvIG7zykGO9A3eO9CLvYMd6EXegx3gG7x3kDd470Dd472DHewY7yDHeAKomwmhZFkAof8tCy4m5aCbcTUswFYsy0/LQTX9NBqBgJgYaY//PkZPcaTdCuAFgWlkI0DfQAe9r8Jxz6CShr8++JsArgjxNBNC0LQsyyLMsgRxallyyLIsi0LUTUtS0AVwFPia8si0LMTXiacsxNizLMTYTcsi1LMsy0E2LUsuJqJvxNyy/E1LMteWgm4mpZlkJuWRZFmWnLQTfgncVATkVcVQTsVIqQToVxWFeK4rwTmATCsCcAnQJyKoriqKwrxWiqKoqwToVRWBORWBOBVFSKgq4qAnAqAnArRVgnIJ3FYVQAgCriqK4qYqivBOsVoJwKgJ3FYVBWFfBOIqCoCcivipxUFSCd4qRV4rCvFaCc/BOhW8VxWFUVhX4r1eX/+DHgaYMOEX/CJgwwYQY8GODH/wYf4RAiQiAxCKBj4GAMYRQiwYcGEGMIoMfhECIBgEXAwCJhEA1BjhF+BhCIDEGARYGoRAYgxCLwYeESEUGMDEIoGAMAiAwBiBrCJ8GMGGEWEUGIRYMAYAxCKBiBgBqDDA1wiBEBiDAIsGIMANANMIoMAYhEBh4GMGMGARfAxBj8GAMANYRAYBFAwCIBhgYhEwNQMYGIRAMAiwNYRQi4RQYwYgahEBiBqBgESEUIqa6Z6bTBpGkmUwmkwaZpJlNCkifmkaaaBymgm0wmRPxSDTTa//PkZOYYTgboZUAQIkCEFgAAe898YTZpJtMJhNilphNdMJhMGgmemDSNJNmkaX6aNJN9MJhMc0E2mzSNJMpg0umU2mDS5oJlNJtNJnpg0DSTBoml0wmzTE8TRpGgm00mkzzRNNMJg0jQTSb/NFNdNGl02KTzRTfTPTSbTKZNLphNJpNmgmUymkwaaaTKZ/TSYTBoJr/ifptMpr9MJlNptMpg0kymumEwmf+mEwmOmkymTT5ppv80eaHTCYTHTSaNBNJtN80/0yaBoJo0k2aPTPNA0OaSaTJoplMJv9MgBAB4MBUGwbwVwUBkFAYDAU4NBoMBqhAELk//h/y1/vz6/6zMnEglwqnIsVSHBzAMMIqXiLgxS8ucoLCKl7VwipeupwYpeAxS8Z22hSl4U+qE1L2goKUva1GUJqXqwkpeAxS81IQpS8smBqXql6E1LyEVLxdEJqXoSUvAmpeJhFS8rpH3CKl6EVLxPWFKXgDUvVL1LCal4kuDFL2EVLxFlPClLyEVL2FKXhdwYpeswGpeqXkGKXqLAxS8wYpeqWk8KUvATUvQYpehJS9Bil6yoUpegipeZT2x1vN5NR2X3KrRuXjFmaS0AUCyE1BHflmWZacTYsvy05ZgAIs+WQCqJoWZ//PkZOwZ+gaYBgbm6EQMAfQAe9r8ZCbiaFkWv5ZibialoArlryyDtCSnyfR8hrE7PpNmiaIxDTGKafTJalqJoJoWQm4mnLUtSzE1LUsxNyy4mpZlqJpy14mgD8WpagKvLIEcJuWnLItBNhNhNxNgH8tSyLMTflmA/iaCaFqJqWf4mxZFmCdCvFWKwqivgnQJzFfwToAIwqgnOKgqCoK4J2KwqisKwJwKwqCqKgJwK4rYqirgnIJ2K8VhVwTmKorYrioK4JwKwrRWFQE5FUE6BOwTgV4qYqiuCdAnYqAnMVBVFUVATkVBVirioKoqCviuK8VwTjxWFfivFUVxXBOcVuKvFaKoqiuCdeEW3Bjb/gxvhFvCLYGN8GNwi3CLf8DbtuEW//CM7+DG+EW+DG8DbNgi3CLfA2zYItwY3gbZuDG8GT/Bk+DJ+DJ/hGdCM+EZwMnQZP8GT8GToRngc6dBk4IzwZOBk8GTvhGdBk+DG8Dbt8DbtgY2CLbBjYGNwi2A2zYDbN4RbhFtA2zcDbNwNu3CLaEW4RbeEW2DG8DbNwY3BjYDbNgY3A2zYItwi3CLbgbdvA27YGN/CLaDG4RbgxsDG4Rb8ItsI7oR3cGb00m0wmTT6aTZoJgUpMc0kwaa//PkZNcYqeLUAAAUHjw8DgQAe88cYTXTXNBpXiQdfLVpLJoaCSJs0TQNAbRpJpDWleaGlDmlfQ9fQ7tBZoa0IeOw3Ccq44TcHgrufDVzQNA0Om0wmDTNE0EymkymumU2mU0aSY6ZE8NFMmiaaYNDptMGn+aJpdNptNps0OmU0J50wNtMGmmEz/zQTJpppNplMJlM9M8FAYCoKAAApgqDIMACwAQbBsAMGQAQaCkGg0GgyCkGeCgNABwAAUgrwA+CoAQNAeHCAOAeAyIQHBwgDg4QYDAGgMEEOEAeA0Q4DxAHh0PEMGYMBsFQYDPgoDMGQV4NBqryAZfhGfwjMDl4Rv/wjcGT/4R/CPBH//hH4H3gzv4M7A+/gzoR4GdBnAf+DPBnwj4M7BnwivA1QIpCKcIpgaqDFgaqBogMWBqgGqgxQinA0XBi8IqEUCKBFcD7/CPwj0I+DPA/8GfBnQZ8I+EeCPwZ4R6EfhGcI0GSDIDJCNCMBkgdsIwGQDkBk4HIEZgy4RoHZwZQjcDtCMgcoRgRoRgHKDJBl4RgHIDKDIEYEaEZgyYMoRsIwGQGQIwGUGUI3A5AZMI2EaDLBlwjQZQjAjAZQoqIqqN+pypx/qNIqoqqNKNKcqchwGrCAPqN//PkZOsaCgjiBUZRnkhEBfAgw9tw+iu1RUqp2qNUNalOVG1GkV/U58sLU48sLLCiwFU4hAYA+qQQgasVhVIYQNWKwmAKpvasNoHIDm4OQHIDlGwNgbH4D+JuWQm4mhZFoJsWgm4I4TcbA2xtA5ODnGyNoHJ+NgHKDl/LMBXLUtS04mvLQteAqCaCbFoWQmha8bQ2Acg2ht8bI2RsjaGyNrjYGwNvjbByja/GxFYE4ipBOIrwTiK4J2KuK8BAK4rAnAJwKkE4FYE7FUVgEIqgIRVBO4qRXFQVBVBOMVwCcE5itBOoqAnQqCpBOIrxVBOoJ0KwJxgnQrCuKsVBXioCcCqCdAnYJyKsVYqipBOgjwiAj/8InhH4RMIkIioAC4RiJCMRP////CNk//Blkv4M6F8I9C/8GWT/8I2SwjZOEbJQZZIGWShGyYMsnwj0P///CPQ/hGyQRsn8I2SCNkgOyVkoMsnhGyQMslCNkoMsl4MsnhGyXCNk4MsmEbJ/wZZP8I2SA7JWTgyyQMiKDIieEYiAcRIihGIkIxFwZEUIxEA4iREgcRYihGIoHESIkDiJEUIxFwjEQIxEwZEWDIihGIoRiKEYiHcYJRIr9kzDmO5cIaApXE/NA0TTTKZGym/0//PkZMQWjdCsAwAWCsQ8Cfwoe89cyaXTKZACgKxsmybQFQCyPQPUbRtA9x6QAoegHKmRtClpk0RSkwaCYE/GyaaZ6ZFJTaaTCbTabTBomgmk2mxS0x0waSaTI2gcgOcT0T5MiedM9M9NCfCeGgNhMJlNJoT1MdNJhMjaNPptNGkmhtpnmgmv+KQmRSE0aaY6ZTKZTRoJg0U0aBopg0emU1/xPzTTaa5o80DRTZoJs0TRNEUhMikJs0P0x0wmkwmUymkwaKb5pppNJg0OaInhpGgmeaSbTBp9N/ptNJo0DTNAbOCkGAwGABgA4NgwAAAMAPBgAQKAyDAZgoCkFINAABWAEDAUBTAABgMBTgqACDcGAAQYDAUqLUlVt///+Bj4MIRcGH/hE//hEwY/wi8GPBj8GH8IgRcIv4RYMQi+DAIsIsIn8GHCLCJCJ/BhBgBpgwwifhFhEhF/gwCIDAGIMIMAMQYBFhFBgDH4GAMQiQNAYAwwYBECIAMIAMAAiHBgAMIAiAIg4MABgABhADAhEAGAARCBhCEQhEIMABh6EQAwIMABgCEQwMAQYD4MDCIcGACIQiHwYGDAhEOEQ4MAENB8hJD7PsnXJ0fZ98+D6LItQR3PgnZHmgPYYRopk0xj//PkZMkU/gLsKkITrkL0CfzIetvgJtNdNGkmkwCPLITf8s+WpaFmApAjgFUsyz49jSTCaGMmkyaRZlkJsWpaiagKBZlmWomh8c+CdcnROj4Pk+Akh9E6DsJ0fJ8c+OTs+idk4J2Tg+j7Pr8nB9nwfAa59k7598+D74Sk+eEkFQdDmKsOhwBEVYCeAiAmAiHcBEV4CYCIWmCHF6FqC0haRcF4XYvxfF2LwvC+FqC0xcC0C/FwLSFoF0XBfi7C0xei8LwvcLQLoWoXheC0BaIWoXBdiNiMY6cZ8RkZxnjqOojAz4zx0HUdBGozjoMw6iMjpxdi+L4uC5F/xd/haIui/bZ/+DGBp4RYMQYgw8Ivgw/CJ4RfBh/hECKBgEUGODH8InhFwY4GoMcIgRIMcInCIBrBhCIESESBp+DEGARfhEA1gxBjBj4RAYQYgxgYwiYRcIgMAiAwBjCJgYAawYYRQMQMAYhFgagYhEA0AxA1A1CJBhBgEXwMQNAihFhFAxwYAwgaYMPCJA1hEBiBrwYQiwYwiBFwYhFgxgawihFCLA0gYAwCKESBoBpCJ4MIRcGOEVB9ALR8BJj7/PonB9HyEoJwfZ9E4Dt5OeTnlqJtxNAH7nwfHPonJ8E759E6PoJI//PkZOAWKgjoZUAQYka0Ffgge9VcfZOCdE7J0To+Cc8JWTo+D7J0EqPoO0+T5PsJSfJ9n0TkJUfJOeTknPPo+z6J2Ts+ycE759/k7Pg+z5J2TonBOeTkJUTg+T5DtJ0Tvk5Pjk5DXPg+idH2HYfR9E6PgnR9k5JyfZ9cnR9cNYJSfROidE6Ps+Cdn0fB8E6DtPs+CdHwfH5OAlR8nyfB98+SdE4J0ff5OidH2TknfPkJMfYSg+Cd8+D6PsnP/JwTk++fYSQO0+D5J0fZ8HwTjn2AWDgdAL8ApALQCkO8GACwMgyAVBiAVhzwY4BeDIMgFMOh0ArDgc4BeAV4cgFsOhz/wP225HGw7wCsO4M8AqHP/+DEGQ7/8OgzgFoM4Bf4MhwO4BT4cDmHcGfDnw78GcVhUFTFXFeKoqYJ3isKuKkVgTsVoqCsKwrCoKsVQTqKorYWoXhfxeF/xdi58XOL4WmLnFYVQToE4FXiuK0VwTnFQVRVFcVhU4JzFfDgdhzBnDuHfALgyDAMQZBgGQCgBUAoDAMh3BkAsDMGcGAYgxBn+HAC0ArwCwMAS5adAry0yBSBfoFBVaKqKwVUVrRXUa9FUOEqVUjV3ySPLkvkzlNlNn02E2S06pvVKWACECpW//PkZN8VDgj+zymq5krb1ewAxJvkqe1XysDVFSqlVIo2o0ispyFVoqKNIrKcqNKcKcFhSjaKiKyKhYWiv6nCnCKijajSnPorKNKcKcqcIrqNoqKNqcKNoqKNKNqNKcIqKN//orf6BSbKbKBSBXlp0CvQKTYTZ/0C/LTxFxFoigioigCLC4cRYRWItEXC4cRcI0IoFwwXCiKwjQXC8LhRFcRcRQRSFwoikRcLhxFRFguHiKRF8E7FYVhVBOgCYVRUACKKgqgE0E6ACJFYVoJ0CcgnQrAnMVwTgE6ioKoRwDdhHhG4RARgDcCMEaEYIiAbwRIRuESEcIwRwiYRwjQjBEgWoFuBa4FngWkIQQigwhEwigx/CL/4RfCKEQGP/wYiEUwYHwYGDAwYAGA4RCEQBEGB0rCNcGU4RrBlcIsGGDCESBiEWDCBhCIEWBiDAGHCKEUGEGEGMIgMAiwigxCIDADQGIRfCIEQDXgYYRfBgBoESEXwY/CJCKEQIsGIRODEGIRQYgw8IgRYMMGAGGDEDGDAIoMcDQIkGMGGBrgwCKDAIsIkDUDWDGDDA1hE4RQMQYgwBhhFBhBh4MAMYRMIoRAiAxBjhF4mhZFpxNBNy0LQTUTXhKglR9FqWpaAP5Zi//PkZNYXkgTkGEJwlkXcDfQAe9r8bCa/k5JwTriacsizBHE6CSH1w7efHLPgjuJqWnLITYTX8tRNAH/ialqJuJuWZaFkCO4m5aE7J2TonB8E559nyEnJyfB8FmJrxNxNhNS1E3LT8sxNC0E0LTlqJuWQm3E15ZiaFqWRZiaCagP5aCblkKoqCsCdioKoqwToE6FcVwAhRWBOIrCpFbgnEVRVFUVIJ2K4rAnIqioKgrcV4riuK0E4FcVQTsVxUBOoJ3FUE7itFYE7FYVRXFUVwTkVoqAnYJxBO4rReF4XYWsLWLoui4LwuC9AdsLQL0LQA9C8Lgvi6LguBahfFwXAtIvQQ4vCqKwrxX/8E5xXit4JwKzBnwj+DF+F1guvBiQYkDRIR8I/gz8Gd4R/wYsGLBi8I8DPBneDPBnwZ/8I8DP8I8B/0Gd+DPA+8I/+Ef+DOgzvwj4R/hHoM+Ee4M4D74M+Ef/A/7gfcDPBn4R7BnfCPgz4M7Bngf8DPwjwR6B/3CPwj0Gfgz+EfBnhH8GfwioRQGIBqgRUDVAYoGiBFcIoBqoMWEUA1UDRYRUIqEUA1WBooGiAaqBogRUGJwigM8I/gz+DOCPwj/Bnwj3BnBHgZ4M4I+DOhHhNCz5aiaCb//PkZM0YugrgAAASBEUEBfQAe9rclmWompZ8shNyzLMsy1LMBUAfhNxNicBJCcE5J0JpyyLMTcBVLXloCO5aCagKACiAqflqWYmvE3E3BHlmArFnxNRNC1LUBS5aFoWhZFmWR8k5CTnxz4PonZ8E5Pg+j4LUshNQH4TYtSzLMshNBNhNSyAViyE0FQE4FYVoJ0CcRUgnYqisKoJxFWAhiuKgrCtFUE7FQE5iqKgqRVFWKorwTsVxVFYE7FTFTBOxVgnAqRXBOPisK4BOK0VoriuK0E5BOxUivFcE5FYE5FQVBXFQE6FQVBVFYVxWioCcCoLovi4LoWiL0LSL+LouBaIvBahdi6LoWgEMFoC1hacXxdC14uipiqKn8VPFbiqKsVb//Bm/+EXgx4RdhFb///hE1/8GLP//CKwIrQjoGa/wPewZqEdYM1wZqDNAetgzWEd8GagzYM2DN4M1wjoI7Bm+DNhHcD3rA9awZuEdwZvCOwjsGaA964M1A978I7hHQR0DNge98I6hHYR1wZrBmwPWgPWwZsI7wjqB63COvgzQR3BmwZsGaget8D3rCOgZoGa4R1gzYM0EdwZsI6CO+DN4R1wZsD3oGaBmwjqEdAzXCO/4R0DNAzYR0WgI8TQT//PkZL4XFgTcAE6Tekf8EfQAe9t8YTXiagKwCsJuWXLMTUtC1LMTT8TYTUJP+fAdomomoD8JuWoCgWoI7iaFkJqJqfZ8hrk4CSE5Pk+Cdk5PgnBOT7JwTg+uWZaiaCbcsgFAsy0LPlmJsWYmom5ZFmWpaibiaAjy15ZFkWQm5Zll+JsJqJvy1E0CThJz65OQlJ8H2TknZOT759k6J3z4PgTQTcsy0LITflmWfLUsiyLITYTcTT8syzLQsi0LMEcWZa8tSyE1LTibibFqWYI/8shNCyE1LQsy1LUTUBTLLloWXLUsiyLUtBN+JqJvy1E05Z8TcsxNeWn/LTnxydHwfZ9n1ydk4PsnHJyfR9E4JwTgnB8k4588nB9cnR8c+D7PjxV4q4r8VsVgTgE4/itFShX/xV4rirxVFWKoq4qfxX8E6xVxUBOYrCtwTvwTj/xV8E5/irBOsVuKwqRXFTFQVorCrFf/xWioKwrCtioCcxUFUVAToE4FUVxWFQVhUBO4rgnUVIJyKkVgToE4ipFUVoq4qisKsE64qCoCdxUFUVxXFUE78VxWFQV4qiuKgqiuK4CCK2KoqirBOATsE4FWK4qxVFUVhVFYE4gnIriuCcQTiK4rCoCdCtirBORUiqK2//PkZLAWsgzuADQNNkZj/fjIe9r8K/FXFUVwSE5aiaAKgmhaFpxNQkp8n3z5PsJOGsffLQsyyE1LItS1E1Af+CPLMTUTfibFmJoWQmxanzydHwTsnASknBaCalqWom5ZcsxNyc8nASsnHDt59BrhJgkpOicBKg7D7JyfZ8E5Pk+Cd8EeWXE0LQsiyLQtSyLIsi0LUTYsy0E3LITQshNiyLUsiy4I78shNy0LMVcE6ipgnArRVgncE4wTsVIrCqCcCtBOYrwTgE7iuKwqCoKwrcE7BOQTqKgqiqFpBEC1gPYD3F0X4WoLTF0Xxei6FqC0BaAtQWgXxdwtWFqC0haBW/FQVRUBOBUFcE6ioCcAnEVRX4rYrxWFUVBViuLsXgtAuC6FoBDBaYvi7F8XxexdF8XhcFyI//gx//CJBhgxhEwY/+EXwYgx8ImDH8GPhE8GPhEwigwhFwNQNQNfhE+DGDAGHCIBrhEhEBh4RQMAY/gYBFBhhEAxCIDCEUDEDHBiEUIoRQY+DCBp4McGEIgGgMcGIGMGIGIGgRQYgxCKBiBjBgDGESDADWBgEUDEIuDADWBpBiEUDEDDgYgwBgDEDQDUGIGgRAYQYAxCKBhCKEThEBgBiEUGIRQMQiQiwNAY//PkZKwWNgjoZUAQREakFfQAe9t8YMfwi4GBaFoJsWpaFlyyBHctCzE25ZiaFoAocsy1E24Sk+idk6LMTYTYTQsyyLUtCyLQTUswFYJMGuTg+CdHwErPotAFAsuJtxNCz4m4mvBHiafloWZZ8YppBqzTNI0jTNBMpg0jTTZZFqWfE3Af/xNf+WomhZ8suWZZCb8tC1LQtS14m/LQtBNhNOfR8hKCc8nHJ2EqCUE5CSHxydk6Pg+D7Ps+Sdk6LUTQTcTcTctSz4mwmha8TXlmJvyy5ZiaFl+WpZFoWZa8TQshNCz4mhalmJsWfLQsuWRactBNRNC1E1LLlly0E2PgJWfR8h2H2fJOSdnx+fXPs+T5PgNbnzz6Po+T7JwTk+z4PonROglJ84qCvxXxUirFX4q4qeCd1f8InCI/4R/CP//4RMI/CMEYI4RAR8I8IjCJ4REI/gG8ESEfCOERCP4R/+EaERCPCNCNCI4BvQjYRMHINobIOfjZBzDZG3xtja42gcw2PwcvG2Nng5+NgbY2wcn42htDYGwNrjYGwNsbX42vxscbI2gc3Bzg5Qcg2uNvjaGwNgbI2+Dl4OUbI2Qc42RsjbBy//g5eAboR4RwjQDeCP+EcI8IwBuwjwjBEBEA//PkZKoZMgrqADXt9EV8FfQAe9scG+EThEBGCMESESEbhEQjwjwjwjBHCIwiQDcCNCI/hHE0/LQBSLITf/lqWoSvk7LT8BWLMtRNAk58E7Po+CyLQTcsyyLUsi0Afi1LUTUTUtBNS05aFkWpZHzwkoSgnB9HwfQSsTYsizLQtRNRNgFf/8NcJWEmAWCdn0To+T4CUHyGtxNiyLT/lmJqJqJqWgmpZFqJsWgmwmwmwmv5ZiaibiactBNv/yyLTiaFkWZagKgCmJqWQmgmom3E0LTibAKfE0LLiuKgrYqipBO4JzFUE5BORXBOhVioKwqRWBOYJyKkE6BOIrYqCqCcxVxVFUV8E4FSCdcVgAgCuKkLTBDC6CHi+LwuRfha4uC+FpF8XQtAWgB2wtAWoXBchaBfwtQWnFSCdxVxXFUVhUFYV4rgnOK3wTiKir//1eDCsf//7/+wOYd///ei/f6lmiqGXpyOlCSRm+yP3UtDhFIzqBhwCFHAGFHABYGcAnAAMOAAYcAAw4BYKOAIROANgicAQYcABE4AAzgE4B+1wmcAwYcAK+sDOADgFLCJwAlWBnABwABnABwDWraETgEDOADgDBiRkgoJpGaP+64RSMoRSMGBiRkkwMSMlq7AxIy4//PkZJUYEgieBFw3fkL8FgAied8AROAAicA8DOATgAGHAAROAFwM4BOAGBhwADDgAGHANQUcAgicAYROAfgw4AIkbPNNNpo0TSNBNJgUs0l7lomEwmRSOaRp80zQFK4nvTInnTEGgwGwAwYmOmkyaInppJpMJg0k1+KUaaaTCb42U0mBsGiaSaNNNpo0OaKZNE0jTTSY5oGmaZpJrphM9MGkmDQTCZBzpg0OKR+mBtdMJobfTSbTfG2KSaBpGgaZomiaBomn02mOmkwmjSNPpjmmaKZNA0zSNFNCeClJkT40DTTCY5oJk0kyaJpdMppMdMdN80TR6ZTXTfNJNmimumem+aKZTKaTaaTRops0kwaZppk0+aSa6ZTKYTfTfTPTHTKa5omgmEyaJo9NmkaRp/pnmmaf6aNNMplMplMdMpv8TxMJlNplNJn9MdM1OM6hWa/EjiRiRiO/xIcSP+GgCZQ1+GvDRDV//4aP///4I8EwTwTBLwS/4AHgnBHBHgiwR4JgAgS4IwAYPA8ADg+AAAAFwfB4L4WADC2AGAGFwsFwuD2FgAcAPC+F/B8L4X/B7B4L4WwuD+AGDwXACAAC2D2AEFgfCwAAAAXB8LhcLeDwXCwPYPA+ACACD+AH4XwA//PkZJMVIgb2ejVLxkBMEgTIe898vwv4X/ACB/C4WwtgBg/gA4PA9gBeFhLRTXTRomkmP0yJ6J+mPy0NA0OvibNDQmfzTNNMjaFKNATxMiemiaRoGkmE2mkwmTRTHNBMGiaCZTSZTZomh0PaV9fX2hoX14kzSmOaCY5pJr80U0aPTfNFMps0jSNJMmiaSaTKb6aTKYNLphMpg0eaJoGkJ8aBoppMppMJg00xzTTabNFNJpNJpNpnpg0DT6bTRoppoJMWrSh/690NQ5paV5D2le/LND2hoQxDF/rzR1/r/aWhfaWleQxfXmheaevNDS0tLQ0ryGoch/X15D+vLy+0oc0ry/19DUOXuvIc0oav9oXkNX1/r3X18QCGHQGQHB8PiAPAaHgPDsBgcH+Hqv//+DJ0GNuEW4MbQY2wZO4Rn///4R34R3Qjv//8Gbv//8GbgZuwZvCO4GbsD37+Ed3A586DJ4Rn8DnToRn8GTsGT8GToRn4HOngyf4HOnBGeDJ0IzgjOCM8DnTwjOgydwOdP4RnYMncDbtwY2A27cItgNs3CLeDGwMbwY3CLaEWwRbQi3A27eDG0GN4G2bBFvA2zcItgY3A27YGN4G2bAxtA58/gc6eDJwHOnAyfCM7A588//PkZLMYngTSAFAUhEYcDfggw9V8DnzwOdOBk8IzuEZ4MnAyfgychsy7F3oE13Nl9sy7myrsL6qqOU5anCqkHqNDI3KVUTEU8GNU7U6gxyHKchyVV/Xa2Zspfds3rubK2VsjZmztk9djZi/TZV2NnXYu0vsm0yaBoDZNEbA2k0aKZNjmwbH/Nvm2bRtGyBVArD1G0bQPUevg9h6/+PRzZNkCrzZNgesegesermyPQPXzbHpNvm0PQPUPSbJs82TaHqAtj082h6DaNn8eo2DbHrHpNjj1m1zYHqNo2jYNnmwbPNgek2ja5sj0D1m0bJs80xtJlMdMCeps0U0meaaa6b5p/mmmU3zRTfNFN/pgHPzQNPmkaaaTXTKbTRoJk0zS6b/NBNdNJlNGj02aH6Z4IgAEEYJ4I+CMEQJcEUEXBOpHDX/w1Q0Q1Q1cNWGvw0Q0/hp/AmIaA0cCYhow0w1/w0hoDRhpw1w1BrgTLDXw1BrhrDQGgNQEzAmOGuGiGgNfgTHDQGoCZw1w0BrDWBMIEzDVDTDUGgNfAFwGjBrg1A1YNcGsAXAaQaABcBqg1g1QagaINYaoEyw1Bow1YaA1hoDSBMw1gTICYQJkGrDQGoNGGmGsNcNQawJkGuBM4aIa//PkZKAYngTsATQNQkKMFgDifh7AYagJkGsCZ+GkNWGiGsNAaYaOGgCYgTENQaw0Yaw1Q1Q0/hqw1BkAfmkaCb6ZTCY6bNBNLwmqGA5fzSTCb/lgwXOmMmMmTQ5pmkmUwmkymfzRTaZFJ6aNM002NrppMpg0kwKQmE2m0yKUaKaE95o9MJj9N9NJk0UymOaSaE/TabNNNmmmk2mU2aHTKZTCaNDjaTJoGimkyNvpk0TRTHTf6bTRopg001+mU0aXNBMjYNA0k2mjR5pfps0U100mUz0ym02mDRTHTaaTRpplMc0kz0ySA000mDSTKbNI002mzQTHTaYTf//NA0zQTBodNJk0UyKSaaZNJMprmkaP5oGmKUmEymUyaCbTHNBMJlN80DRNBMmkm/00mUwaZpprplNpvmiaJo80+aSa//TaY/6ZaH//wY4ReEX4RIMfwiAxBh/BhCJ/+ESDDwYcIn+EQIoMAiQYAw8IsGIGGETBj4MP4MQiAxhEAwAxAxBjBiEUIgMIMcDCDAGIMcGMDEGGBgEUDTwNfAx4MAiwiQYgwBgEUIgMIRAiQYhFwYAwBhA1CKDEIoGoGgMQi4MeDADGEQIkIgGMDCDAIoMAiQiAYwYYMQNQigwCJBiDEGAR//PkZJwV+gzoZUAQRkZsCfQAe9tcQYgx8GEGIMQiwMAY4MANAMcIoMSyE1E1/LMTUtCz5OD5PkJJz5Pk+uA/FqWRaib8TUTUTQtC05alqWYm4momgI8TYsxNCzE3LUtQFEsgFM+z6J0fB8nz+TsNcnB9BK+Tk+g7CdhJT6LTiaFqWYI7lqWoCvy05ZlnxNy0/LUshNBNvwR4moCj+Wv5ZlkJqWpalkCOE1E1LQsiyLITUBULLlqWZZlmJsWhZcsi1/4CiWpalkJqJuWvLXlkJsJpyy4mwm5ZlmJuWXLUTQteWgmgmwCsJoWfE3LMsiyLP8TTlkJuAolqJryzE1LTibCbloJuWhZFoWYmxZ8TcXIvxeC0i+FrF0B2i4L8LSL4uBaIDyCHF8XRfF6FqgiwtIuYWoXIrYqAncVvxVip8VIqCvUxPqtFbFf/4q/8V/8V/iririr8VATjxXipxWgnYq+KwqfFTFQVoq+KsVBW8VhUisKuK0VRXivFYE4FTBOhVFcVRV4riuCdCuCdCtwTiCcCqCcgnYqxWFcVIJwKsVxWisK8VxVgnArYqRWFeK0V4qgnQrgnYrfBOoqAnAq4J0CciqKviuK3BOoJyKsE4FUVoqisK2KwrAnArgBAFSK4//PkZJ0VagjyJgGtbkOkFfwAbh4AqRViuK4J0KgrCrFUVxVjOEeDQgjlcT4T40xtjaNI0uaI2QciGNJIl4kJZtCGIaSckIm6GL3TQ2zRTY2UwmjSNE0fxS02aY2BsJs0/+mzSE8TQpHTKZTaaG0aQpApZp/mmm+aHTfTCZGwNgUk0E0aRp/ilJlNJgT5MmkJ9zQNA0TQTH6ZG2mk0mk0mk3zQTKY/G3zQTHTabTBpGgmU0aKaTJpJpNJtMphNjYTfNE0emkymE2mEyaCbNBNfmkaJpdNJnpg0k0mDTTCbTaZTBp80k2aCbTfNE00yaCb6bTZoplMmmaKZTKaTJpmiaHTXNJNdMDbTab6Y6Z6ZNNMJhMJhN9NJrmim02m0ymU300aPTSa6Y//5pJpNdN/9NppxWxU4Jx/xWxU/xU4qcV/ipiuKwqxWFbioK/8VIqivFTwTkVgTkVor4JxFXxX8VcVxUFQE4FaCcwTvBOIqwToVuKwqCtFUVYqxXxWFeK0E7FQVYrwTnwTsV4rCqCcfFaCcRVFQE5gnAr4JyK4r4Jz4J0Koqip4rCvisKoJ3xWBOME7iuKgriuKgrAnAqgnArxXiqCcgnYJzFQVQTmAEIVYrwToAIYrwTiKkVQTkE5//PkZK4XGgzsADQNAkIcCfwAe898FXFTFYVxXxUFQVkzzS5oilg5TTTY2kyaJpJtNGgJ8aKaTQ2k2aCaNI0eaSYNJM/tKHEiQxfJG09MmgaSYTRppg0TRNNMJlMptMCfppNprmiaA2jQNLmmaRppk0jRFLNP9NJhMGmaQpZpJhNCkGkmE0J+mxSk0m0x02mjRTKbTCZ42EwaQpJpptNprmgaRpmim00J4mzSNM0kymkyKWmE0muaKYGwNjmgafTPNE0U0mUwJ7+mem01+J8mhSk2mjRTSb6aTCbNBM9MpjpjppMpk0E2mE2mE2mjSTfTaZ6YNFMcT1MpnprptNmim0wmE100aSaTRo9MGjzTTHTaaTfTSaNLpoFMAAFYNBQGwAvwAYM4NgqqkjaAN3d3d3etERNK5CZ/3Ctf8AaiAc/u7vaIn/+8XPv//+GDKv8W1/+AC8K4Yw+94xe940jgceOBwOcRaxGwH4EuNIjBfxazB8HhkwVjIAII/vDkjG/wAcJPeF5e98hNgSYLWMFvhZ73pX06aoehpmh01hMJtM9K3TKY9E10x+memvlIpZM9MUTCbShbUrtM+n5ophNZuXK+0wmemumMCemkmvc0Uwm/lJJlLe5oJZI0SyW6R0mE//PkZLcXlgrzECFvrEmMEfgAfh7k2aORpbTYUo9SBNsekGYNVKgqg6hrUXK4Q42DOwPWbILEzBSumEgkWJPU8S72G5wUuGDwguEKa1Q0UykS3Bn7FJNgg5qoEgpsGabBtGabZt7NrKCNgLYes1idmabBtm2bZsBRm0PQbF9mwPSPUBbMwzB6QojYM42ePTzbMwzR6TaNs1eBVNv81yDUJ2QYhJtD0m0PVe+x6T2M8HsbFwsh6B6D7HpugT2uZhO6HqZhmE7ISZhhkFNcghtmybBnnsD1Ho49ZtG2bZs5PVBc2EEepCaEHNjj1EJHq5smabZtmwbNEEPR+bJse9z2PY2T1SN0rdNJq6yXI06COvNJj9MGmkkGmUj7pI0TToNGlEsNEnCW10ymi5FtNFKpvps0kz0uW3aaTF00mTSzdNJu0KFYz1KjaGAhyoQCFGM//zFARgIUZ/oZpdCttay6M5drW1joSj6Ekk1b7J7R7aoQNlPrWBKLTTzOsGT5yYxLrtHTy2iUxEkES0HIBVD066VjGj31odPkkSjJtbWs6OIjKmlXHR9K5MTv5pdZolE10kk2lly74TFx5KTXeTGLrS6ExiucvJSSDUdXZm3NLn1rtYBCUEoRj77WOhCPc+g5//PkZJ8XPgzoAABMTrz8BfQyY9ONGxJULutaa1TE5LHxWEo+XecmMa3p0kqBCR6qOFaFUGpNJIIjqVi0ylBqJIkiSJIkmJj605EkSRJPetWAyVacmodBUVhGfrAZPF0AUrgRLNiqDU4VHo8h6HRObJJNdqlRBMFT0qdNE0WZhmay2tCuOY6oieWieianCnVSbzjd7SGhrLi6eUSeLcZTWqdML5PM50uOGJms9VqtYU6hrgrm4V0frUzTvYsiegR2FOkqUxSKdVCpmRCSkIAUZ4VPhqEKgFDU2VhUiIhUaIg0RAkTBYEjYBUbBMuCJgLAkCUBUinABgBE3/9EQqFRM0s0qzktk9ZFqqFC6RULE11JVDkd8Y1vVFOx9oUIpZ8Vnq5klkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";var du=t=>t instanceof Date,yk=t=>t==null;const vk=t=>typeof t=="object";var SN=t=>!yk(t)&&!Array.isArray(t)&&vk(t)&&!du(t),RN=t=>yk(t)||!vk(t);function xk(t,e){if(RN(t)||RN(e))return t===e;if(du(t)&&du(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const i=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const a=e[s];if(du(i)&&du(a)||SN(i)&&SN(a)||Array.isArray(i)&&Array.isArray(a)?!xk(i,a):i!==a)return!1}}return!0}const LW={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},FW={finder:!0,torch:!0,tracker:void 0,onOff:!1,zoom:!1},VW={width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",aspectRatio:"1/1"},BW={width:"100%",height:"100%",objectFit:"cover",overflow:"hidden"};function uf(t){if(t===null)throw new Error("Canvas should always be defined when component is mounted.");const e=t.getContext("2d");if(e===null)throw new Error("Canvas 2D context should be non-null");e.clearRect(0,0,t.width,t.height)}function UW(t){var e;const{onScan:r,constraints:n,formats:s=["qr_code"],paused:i=!1,components:a,children:l,styles:c,classNames:u,allowMultiple:d,scanDelay:f,onError:m,sound:p}=t,w=g.useRef(null),y=g.useRef(null),b=g.useRef(null),N=g.useMemo(()=>({...LW,...n}),[n]),x=g.useMemo(()=>({...FW,...a}),[a]),[E,R]=g.useState(!1),[I,V]=g.useState(!0),[j,T]=g.useState(N),S=function(){const z=g.useRef(Promise.resolve({type:"stop",data:{}})),Y=g.useRef(null),ee=g.useRef(null),[U,H]=g.useState({}),[ie,ne]=g.useState({}),le=g.useCallback(async(Z,de)=>{var G,me,Ee;if(!window.isSecureContext)throw new Error("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.");if(((G=navigator==null?void 0:navigator.mediaDevices)===null||G===void 0?void 0:G.getUserMedia)===void 0)throw new Error("this browser has no Stream API support");const Ce=await navigator.mediaDevices.getUserMedia({audio:!1,video:de});Z.srcObject!==void 0?Z.srcObject=Ce:Z.mozSrcObject!==void 0?Z.mozSrcObject=Ce:window.URL.createObjectURL?Z.src=window.URL.createObjectURL(Ce):window.webkitURL?Z.src=window.webkitURL.createObjectURL(Ce):Z.src=Ce.id,await Promise.race([Z.play(),new Promise(ve=>setTimeout(ve,3e3)).then(()=>{throw new Error("Loading camera stream timed out after 3 seconds.")})]),await new Promise(ve=>setTimeout(ve,500));const[pe]=Ce.getVideoTracks();return ne(pe.getSettings()),H((Ee=(me=pe==null?void 0:pe.getCapabilities)===null||me===void 0?void 0:me.call(pe))!==null&&Ee!==void 0?Ee:{}),Y.current=Ce,ee.current=pe,{type:"start",data:{videoEl:Z,stream:Ce,constraints:de}}},[]),he=g.useCallback(async(Z,de)=>{Z.src="",Z.srcObject=null,Z.load();for(const G of de.getTracks())de.removeTrack(G),G.stop();return Y.current=null,ee.current=null,ne({}),{type:"stop",data:{}}},[]),_e=g.useCallback(async(Z,{constraints:de,restart:G=!1})=>{if(z.current=z.current.then(me=>{if(me.type==="start"){const{data:{videoEl:Ee,stream:Ce,constraints:pe}}=me;return G||Z!==Ee||de!==pe?he(Ee,Ce).then(()=>le(Z,de)):me}return le(Z,de)}),(await z.current).type==="stop")throw new Error("Something went wrong with the camera task queue (start task).")},[le,he]),Me=g.useCallback(async()=>{if(z.current=z.current.then(Z=>{if(Z.type==="stop")return Z;const{data:{videoEl:de,stream:G}}=Z;return he(de,G)}),(await z.current).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")},[he]),ue=g.useCallback(async Z=>{const de=ee.current;if(!de)throw new Error("No active video track found.");{Z.advanced&&Z.advanced[0].zoom&&de.getCapabilities().torch&&await de.applyConstraints({advanced:[{torch:!1}]}),await de.applyConstraints(Z);const G=de.getCapabilities(),me=de.getSettings();H(G),ne(me)}},[]);return g.useEffect(()=>()=>{(async()=>await Me())()},[Me]),{capabilities:U,settings:ie,startCamera:_e,stopCamera:Me,updateConstraints:ue}}(),{startScanning:k,stopScanning:L}=function(z){const{videoElementRef:Y,onScan:ee,onFound:U,retryDelay:H=100,scanDelay:ie=0,formats:ne=[],allowMultiple:le=!1,sound:he=!0}=z,_e=g.useRef(new kv({formats:ne})),Me=g.useRef(null),ue=g.useRef(null);g.useEffect(()=>{_e.current=new kv({formats:ne})},[ne]),g.useEffect(()=>{typeof window<"u"&&he&&(Me.current=new Audio(typeof he=="string"?he:OW))},[he]);const Z=g.useCallback(de=>async G=>{if(Y.current!==null&&Y.current.readyState>1){const{lastScan:me,contentBefore:Ee,lastScanHadContent:Ce}=de;if(G-me<H)ue.current=window.requestAnimationFrame(Z(de));else{const pe=await _e.current.detect(Y.current),ve=pe.some(rt=>!Ee.includes(rt.rawValue)),at=pe.length>0;let ht=de.lastOnScan;(ve||le&&at&&G-ht>=ie)&&(he&&Me.current&&Me.current.paused&&Me.current.play().catch(rt=>console.error("Error playing the sound",rt)),ht=G,ee(pe)),at&&U(pe),!at&&Ce&&U(pe);const Ft={lastScan:G,lastOnScan:ht,lastScanHadContent:at,contentBefore:ve?pe.map(rt=>rt.rawValue):Ee};ue.current=window.requestAnimationFrame(Z(Ft))}}},[Y.current,ee,U,H]);return{startScanning:g.useCallback(()=>{const de=performance.now(),G={lastScan:de,lastOnScan:de,contentBefore:[],lastScanHadContent:!1};ue.current=window.requestAnimationFrame(Z(G))},[Z]),stopScanning:g.useCallback(()=>{ue.current!==null&&(window.cancelAnimationFrame(ue.current),ue.current=null)},[])}}({videoElementRef:w,onScan:r,onFound:z=>function(Y,ee,U,H){const ie=U;if(ie==null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas is always defined.");const ne=ee;if(ne==null)throw new Error("onFound handler should only be called when component is mounted. Thus video element is always defined.");if(Y.length===0||H===void 0)uf(ie);else{const le=ne.offsetWidth,he=ne.offsetHeight,_e=ne.videoWidth,Me=ne.videoHeight,ue=Math.max(le/_e,he/Me),Z=_e*ue,de=Me*ue,G=Z/_e,me=de/Me,Ee=(le-Z)/2,Ce=(he-de)/2,pe=({x:Ft,y:rt})=>({x:Math.floor(Ft*G),y:Math.floor(rt*me)}),ve=({x:Ft,y:rt})=>({x:Math.floor(Ft+Ee),y:Math.floor(rt+Ce)}),at=Y.map(Ft=>{const{boundingBox:rt,cornerPoints:wt}=Ft,{x:hr,y:An}=ve(pe({x:rt.x,y:rt.y})),{x:Cs,y:hn}=pe({x:rt.width,y:rt.height});return{...Ft,cornerPoints:wt.map(Ns=>ve(pe(Ns))),boundingBox:DOMRectReadOnly.fromRect({x:hr,y:An,width:Cs,height:hn})}});ie.width=ne.offsetWidth,ie.height=ne.offsetHeight;const ht=ie.getContext("2d");if(ht===null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas 2D context is always defined.");H(at,ht)}}(z,w.current,b.current,x.tracker),formats:s,retryDelay:x.tracker===void 0?500:10,scanDelay:f,allowMultiple:d,sound:p});g.useEffect(()=>(R(!0),()=>{R(!1)}),[]),g.useEffect(()=>{E&&(L(),k())},[a==null?void 0:a.tracker]),g.useEffect(()=>{if(!xk(N,j)){const z=N;n!=null&&n.deviceId&&delete z.facingMode,T(z)}},[n]);const D=g.useMemo(()=>({constraints:j,shouldStream:E&&!i}),[j,E,i]),P=async()=>{const z=w.current;if(z==null)throw new Error("Video should be defined when component is mounted.");const Y=y.current;if(Y==null)throw new Error("Canvas should be defined when component is mounted.");const ee=Y.getContext("2d");if(ee==null)throw new Error("Canvas should be defined when component is mounted.");if(D.shouldStream){await S.stopCamera(),V(!1);try{await S.startCamera(z,D),z?V(!0):await S.stopCamera()}catch(U){m==null||m(U),console.error("error",U)}}else Y.width=z.videoWidth,Y.height=z.videoHeight,ee.drawImage(z,0,0,z.videoWidth,z.videoHeight),await S.stopCamera(),V(!1)};g.useEffect(()=>{(async()=>await P())()},[D]);const B=g.useMemo(()=>D.shouldStream&&I,[D.shouldStream,I]);return g.useEffect(()=>{if(B){if(y.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus pause frame canvas is defined");if(uf(y.current),b.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus tracking canvas is defined");if(uf(b.current),w.current==null)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus video element is defined");k()}},[B]),J.createElement("div",{style:{...VW,...c==null?void 0:c.container},className:u==null?void 0:u.container},J.createElement("video",{ref:w,style:{...BW,...c==null?void 0:c.video,visibility:i?"hidden":"visible"},className:u==null?void 0:u.video,autoPlay:!0,muted:!0,playsInline:!0}),J.createElement("canvas",{ref:y,style:{display:i?"block":"none",position:"absolute",width:"100%",height:"100%"}}),J.createElement("canvas",{ref:b,style:{position:"absolute",width:"100%",height:"100%"}}),J.createElement("div",{style:{position:"absolute",width:"100%",height:"100%"}},x.finder&&J.createElement(DW,{scanning:I,capabilities:S.capabilities,onOff:x.onOff,zoom:x.zoom&&S.settings.zoom?{value:S.settings.zoom,onChange:async z=>{const Y={...j,advanced:[{zoom:z}]};await S.updateConstraints(Y)}}:void 0,torch:x.torch?{status:(e=S.settings.torch)!==null&&e!==void 0&&e,toggle:async z=>{const Y={...j,advanced:[{torch:z}]};await S.updateConstraints(Y)}}:void 0,startScanning:async()=>await P(),stopScanning:async()=>{await S.stopCamera(),uf(b.current),V(!1)}}),l))}const qW=()=>{const[t,e]=g.useState(null),[r,n]=g.useState(null),[s,i]=g.useState(!1),[a,l]=g.useState(null),c=Xn();ai();const{addPurchase:u}=Es();g.useEffect(()=>{Nt("page_view",{page:"Scan"})},[]);const d=async p=>{var w,y,b;if(!s){i(!0),e(null),n(null);try{if(!Array.isArray(p)||!p[0]||typeof p[0].rawValue!="string")throw new Error("Invalid QR scan result format");const N=p[0].rawValue;Nt("scan_qr_attempt",{rawValue:N});let x;try{x=JSON.parse(N)}catch{const T=N.split(":");if(T.length<3||T[0]!=="LOYALTY")throw Nt("scan_qr_invalid",{rawValue:N}),new Error("Invalid QR code format");x={userEmail:T[1],userId:T[2],offerId:"default_offer"}}if(!x.userEmail||!x.userId)throw new Error("Invalid QR code data - missing user information");const E=$t(ft,"users",x.userId),R=await Op(Md(Aa(ft,"users"),Jy("email","==",x.userEmail),Jy("id","==",x.userId)));if(R.empty)throw Nt("scan_qr_no_user",{email:x.userEmail,uid:x.userId}),new Error("No user found for this QR code");const V=R.docs[0].data();Nt("scan_qr_success",{scanned_user:x.userEmail,scanned_uid:x.userId,offer_id:x.offerId}),x.action==="redeem_reward"&&x.rewardId?(console.log("Processing reward redemption for:",x.rewardId),await Sq(null,x.userEmail,x.userId,x.rewardId)):(console.log("Processing stamp collection for offer:",x.offerId),console.log("QR Data:",x),await u(x.userEmail,x.userId,x.offerId)),n(x.userEmail),e(!0),l(x);const j=await mo(E);if(j.exists()){const S=j.data().purchases||0;let k="";if(x.action==="redeem_reward")k=`Reward redeemed for ${x.userName}! 🎉`,Nt("reward_redeemed",{scanned_user:x.userEmail,reward_id:x.rewardId});else{const L=x.stampsPerScan||1;k=`${L} ${L===1?"stamp":"stamps"} added for ${x.offerName||"loyalty program"}!`;const P=await mo(E);if(P.exists()){const B=P.data(),z=B.purchases||0;if(k+=` Total stamps: ${z}`,x.offerId&&x.offerId!=="default_offer"){const Y=(w=B.completedRewards)==null?void 0:w.find(ee=>{var U;return((U=ee.offerSnapshot)==null?void 0:U.offerId)===x.offerId});if(Y){const ee=((y=Y.scanHistory)==null?void 0:y.length)||0,U=((b=Y.offerSnapshot)==null?void 0:b.stampRequirement)||5,H=Math.max(0,U-ee);console.log(`Offer progress: ${ee}/${U}, remaining: ${H}`),ee>=U?(k+=" - Offer completed! 🎉",Nt("offer_completed",{scanned_user:x.userEmail,offer_id:x.offerId})):k+=` - Progress: ${ee}/${U} (${H} more needed)`}}else{const Y=B.purchaseLimit||5;if(z>=Y)k+=" - Reward ready! 🎉",Nt("reward_ready",{scanned_user:x.userEmail,scanned_uid:x.userId});else{const ee=Y-z;k+=` - ${ee} more to earn reward`}}}}Ye({title:"Success",description:k})}setTimeout(()=>{c("/dashboard")},1500)}catch(N){console.error("Error processing QR scan:",N);let x="Failed to process loyalty point";N instanceof Error&&(x=N.message),e(!1),Ye({title:"Error",description:x,variant:"destructive"}),Nt("scan_qr_error",{error:N.message})}finally{i(!1)}}},f=p=>{console.error("Scanner error:",p),e(!1),Ye({title:"Scanner Error",description:"Camera error - please check permissions",variant:"destructive"}),Nt("scan_qr_scanner_error",{error:String(p)})},m=()=>{e(null),n(null),i(!1),l(null)};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsx("div",{className:"p-6 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(si,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Scan Loyalty QR"})]})})}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6",children:o.jsxs("div",{className:"w-full max-w-md bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl flex flex-col items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Scan a User's QR Code"}),!t&&o.jsxs("div",{className:"relative w-full flex flex-col items-center",children:[o.jsx("div",{style:{width:300,height:300,margin:"20px auto"},children:o.jsx(UW,{onScan:d,onError:f})}),s&&o.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"Processing..."})]}),t===!0&&o.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-green-900/50 to-emerald-900/50 border border-green-700 rounded-xl text-center shadow-2xl animate-pulse",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),o.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:"Stamp Added Successfully!"}),o.jsxs("div",{className:"text-lg text-green-300 mb-3",children:[r&&o.jsxs("div",{className:"mb-3",children:[o.jsx("span",{className:"text-green-400 font-semibold",children:r}),o.jsxs("span",{className:"text-green-300",children:[" ","has earned ",(a==null?void 0:a.stampsPerScan)||1," ",(a==null?void 0:a.stampsPerScan)===1?"stamp":"stamps","!"]})]}),(a==null?void 0:a.offerName)&&o.jsxs("div",{className:"text-sm text-green-400 bg-green-900/30 px-3 py-1 rounded-full inline-block mb-2",children:["Offer: ",a.offerName]}),(a==null?void 0:a.stampsPerScan)&&a.stampsPerScan>1&&o.jsxs("div",{className:"text-xs text-green-400 bg-green-900/20 px-2 py-1 rounded-full inline-block",children:[a.stampsPerScan,"x Multiplier Active"]})]}),o.jsx("div",{className:"mt-4 text-xs text-green-500",children:"Redirecting to dashboard..."})]}),t===!1&&o.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700 rounded-xl text-center shadow-2xl",children:[o.jsx("div",{className:"text-6xl mb-4",children:"❌"}),o.jsx("div",{className:"text-2xl font-bold text-red-400 mb-2",children:"Scan Failed"}),o.jsx("div",{className:"text-lg text-red-300 mb-3",children:"There was an error processing the QR code"}),o.jsx("div",{className:"text-sm text-red-400 bg-red-900/30 px-3 py-1 rounded-full inline-block",children:"Please try scanning again"})]}),!t&&o.jsx("div",{className:"mt-6 flex gap-3",children:o.jsx(Te,{onClick:m,disabled:!t,variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500/20",children:"Reset Scanner"})})]})})]})]})},GW=new e7,$W=()=>o.jsx(r7,{client:GW,children:o.jsx(jU,{children:o.jsxs(jq,{children:[o.jsx(R8,{}),o.jsx(s9,{}),o.jsx(J7,{children:o.jsxs($7,{children:[o.jsx(ts,{path:"/",element:o.jsx(Dq,{})}),o.jsx(ts,{path:"/register",element:o.jsx(ZC,{children:o.jsx(Bq,{})})}),o.jsx(ts,{path:"/login",element:o.jsx(ZC,{children:o.jsx(Uq,{})})}),o.jsx(ts,{path:"/dashboard",element:o.jsx(Kc,{children:o.jsx(Yz,{})})}),o.jsx(ts,{path:"/rewards",element:o.jsx(Kc,{children:o.jsx(Kz,{})})}),o.jsx(ts,{path:"/settings",element:o.jsx(Kc,{children:o.jsx(Jz,{})})}),o.jsx(ts,{path:"/scan",element:o.jsx(Kc,{children:o.jsx(qW,{})})}),o.jsx(ts,{path:"/users",element:o.jsx(Kc,{requiredRole:"admin",children:o.jsx(kH,{})})}),o.jsx(ts,{path:"*",element:o.jsx(MH,{})})]})})]})})});Z_(document.getElementById("root")).render(o.jsx($W,{}));
