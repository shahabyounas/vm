var _b=t=>{throw TypeError(t)};var Cg=(t,e,r)=>e.has(t)||_b("Cannot "+r);var oe=(t,e,r)=>(Cg(t,e,"read from private field"),r?r.call(t):e.get(t)),nt=(t,e,r)=>e.has(t)?_b("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Fe=(t,e,r,n)=>(Cg(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),pr=(t,e,r)=>(Cg(t,e,"access private method"),r);var Sh=(t,e,r,n)=>({set _(s){Fe(t,e,s,r)},get _(){return oe(t,e,n)}});function FN(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Mv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VN={exports:{}},Ym={},BN={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=Symbol.for("react.element"),nk=Symbol.for("react.portal"),sk=Symbol.for("react.fragment"),ik=Symbol.for("react.strict_mode"),ok=Symbol.for("react.profiler"),ak=Symbol.for("react.provider"),lk=Symbol.for("react.context"),ck=Symbol.for("react.forward_ref"),uk=Symbol.for("react.suspense"),dk=Symbol.for("react.memo"),hk=Symbol.for("react.lazy"),Tb=Symbol.iterator;function fk(t){return t===null||typeof t!="object"?null:(t=Tb&&t[Tb]||t["@@iterator"],typeof t=="function"?t:null)}var UN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qN=Object.assign,GN={};function oc(t,e,r){this.props=t,this.context=e,this.refs=GN,this.updater=r||UN}oc.prototype.isReactComponent={};oc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $N(){}$N.prototype=oc.prototype;function Dv(t,e,r){this.props=t,this.context=e,this.refs=GN,this.updater=r||UN}var Ov=Dv.prototype=new $N;Ov.constructor=Dv;qN(Ov,oc.prototype);Ov.isPureReactComponent=!0;var Ab=Array.isArray,zN=Object.prototype.hasOwnProperty,Lv={current:null},HN={key:!0,ref:!0,__self:!0,__source:!0};function WN(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)zN.call(e,n)&&!HN.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:yd,type:t,key:i,ref:a,props:s,_owner:Lv.current}}function mk(t,e){return{$$typeof:yd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fv(t){return typeof t=="object"&&t!==null&&t.$$typeof===yd}function pk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Sb=/\/+/g;function Ng(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pk(""+t.key):e.toString(36)}function df(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case yd:case nk:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Ng(a,0):n,Ab(s)?(r="",t!=null&&(r=t.replace(Sb,"$&/")+"/"),df(s,e,r,"",function(u){return u})):s!=null&&(Fv(s)&&(s=mk(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Sb,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Ab(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Ng(i,l);a+=df(i,e,r,c,s)}else if(c=fk(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Ng(i,l++),a+=df(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Rh(t,e,r){if(t==null)return t;var n=[],s=0;return df(t,n,"","",function(i){return e.call(r,i,s++)}),n}function gk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lr={current:null},hf={transition:null},yk={ReactCurrentDispatcher:Lr,ReactCurrentBatchConfig:hf,ReactCurrentOwner:Lv};function QN(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Rh,forEach:function(t,e,r){Rh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Rh(t,function(){e++}),e},toArray:function(t){return Rh(t,function(e){return e})||[]},only:function(t){if(!Fv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=oc;Ge.Fragment=sk;Ge.Profiler=ok;Ge.PureComponent=Dv;Ge.StrictMode=ik;Ge.Suspense=uk;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yk;Ge.act=QN;Ge.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=qN({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Lv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)zN.call(e,c)&&!HN.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:yd,type:t.type,key:s,ref:i,props:n,_owner:a}};Ge.createContext=function(t){return t={$$typeof:lk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ak,_context:t},t.Consumer=t};Ge.createElement=WN;Ge.createFactory=function(t){var e=WN.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:ck,render:t}};Ge.isValidElement=Fv;Ge.lazy=function(t){return{$$typeof:hk,_payload:{_status:-1,_result:t},_init:gk}};Ge.memo=function(t,e){return{$$typeof:dk,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=hf.transition;hf.transition={};try{t()}finally{hf.transition=e}};Ge.unstable_act=QN;Ge.useCallback=function(t,e){return Lr.current.useCallback(t,e)};Ge.useContext=function(t){return Lr.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return Lr.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return Lr.current.useEffect(t,e)};Ge.useId=function(){return Lr.current.useId()};Ge.useImperativeHandle=function(t,e,r){return Lr.current.useImperativeHandle(t,e,r)};Ge.useInsertionEffect=function(t,e){return Lr.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return Lr.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return Lr.current.useMemo(t,e)};Ge.useReducer=function(t,e,r){return Lr.current.useReducer(t,e,r)};Ge.useRef=function(t){return Lr.current.useRef(t)};Ge.useState=function(t){return Lr.current.useState(t)};Ge.useSyncExternalStore=function(t,e,r){return Lr.current.useSyncExternalStore(t,e,r)};Ge.useTransition=function(){return Lr.current.useTransition()};Ge.version="18.3.1";BN.exports=Ge;var y=BN.exports;const J=Mv(y),YN=FN({__proto__:null,default:J},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk=y,xk=Symbol.for("react.element"),wk=Symbol.for("react.fragment"),bk=Object.prototype.hasOwnProperty,Ek=vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ck={key:!0,ref:!0,__self:!0,__source:!0};function KN(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)bk.call(e,n)&&!Ck.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:xk,type:t,key:i,ref:a,props:s,_owner:Ek.current}}Ym.Fragment=wk;Ym.jsx=KN;Ym.jsxs=KN;VN.exports=Ym;var o=VN.exports,JN={exports:{}},un={},XN={exports:{}},ZN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,H){var ie=U.length;U.push(H);e:for(;0<ie;){var ne=ie-1>>>1,le=U[ne];if(0<s(le,H))U[ne]=H,U[ie]=le,ie=ne;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var H=U[0],ie=U.pop();if(ie!==H){U[0]=ie;e:for(var ne=0,le=U.length,he=le>>>1;ne<he;){var Ne=2*(ne+1)-1,Me=U[Ne],ue=Ne+1,ee=U[ue];if(0>s(Me,ie))ue<le&&0>s(ee,Me)?(U[ne]=ee,U[ue]=ie,ne=ue):(U[ne]=Me,U[Ne]=ie,ne=Ne);else if(ue<le&&0>s(ee,ie))U[ne]=ee,U[ue]=ie,ne=ue;else break e}}return H}function s(U,H){var ie=U.sortIndex-H.sortIndex;return ie!==0?ie:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,m=3,g=!1,x=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=U)n(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=r(u)}}function I(U){if(p=!1,C(U),!x)if(r(c)!==null)x=!0,Q(j);else{var H=r(u);H!==null&&Z(I,H.startTime-U)}}function j(U,H){x=!1,p&&(p=!1,E(_),_=-1),g=!0;var ie=m;try{for(C(H),f=r(c);f!==null&&(!(f.expirationTime>H)||U&&!L());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,m=f.priorityLevel;var le=ne(f.expirationTime<=H);H=t.unstable_now(),typeof le=="function"?f.callback=le:f===r(c)&&n(c),C(H)}else n(c);f=r(c)}if(f!==null)var he=!0;else{var Ne=r(u);Ne!==null&&Z(I,Ne.startTime-H),he=!1}return he}finally{f=null,m=ie,g=!1}}var V=!1,R=null,_=-1,A=5,k=-1;function L(){return!(t.unstable_now()-k<A)}function M(){if(R!==null){var U=t.unstable_now();k=U;var H=!0;try{H=R(!0,U)}finally{H?P():(V=!1,R=null)}}else V=!1}var P;if(typeof w=="function")P=function(){w(M)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=M,P=function(){z.postMessage(null)}}else P=function(){b(M,0)};function Q(U){R=U,V||(V=!0,P())}function Z(U,H){_=b(function(){U(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,Q(j))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var ie=m;m=H;try{return U()}finally{m=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=m;m=U;try{return H()}finally{m=ie}},t.unstable_scheduleCallback=function(U,H,ie){var ne=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,U){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=ie+le,U={id:d++,callback:H,priorityLevel:U,startTime:ie,expirationTime:le,sortIndex:-1},ie>ne?(U.sortIndex=ie,e(u,U),r(c)===null&&U===r(u)&&(p?(E(_),_=-1):p=!0,Z(I,ie-ne))):(U.sortIndex=le,e(c,U),x||g||(x=!0,Q(j))),U},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(U){var H=m;return function(){var ie=m;m=H;try{return U.apply(this,arguments)}finally{m=ie}}}})(ZN);XN.exports=ZN;var Nk=XN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _k=y,cn=Nk;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e_=new Set,Iu={};function ba(t,e){ql(t,e),ql(t+"Capture",e)}function ql(t,e){for(Iu[t]=e,t=0;t<e.length;t++)e_.add(e[t])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S0=Object.prototype.hasOwnProperty,Tk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rb={},Ib={};function Ak(t){return S0.call(Ib,t)?!0:S0.call(Rb,t)?!1:Tk.test(t)?Ib[t]=!0:(Rb[t]=!0,!1)}function Sk(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Rk(t,e,r,n){if(e===null||typeof e>"u"||Sk(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fr(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ur[t]=new Fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ur[e]=new Fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ur[t]=new Fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ur[t]=new Fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ur[t]=new Fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ur[t]=new Fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ur[t]=new Fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ur[t]=new Fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ur[t]=new Fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vv=/[\-:]([a-z])/g;function Bv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vv,Bv);ur[e]=new Fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vv,Bv);ur[e]=new Fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vv,Bv);ur[e]=new Fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ur[t]=new Fr(t,1,!1,t.toLowerCase(),null,!1,!1)});ur.xlinkHref=new Fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ur[t]=new Fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uv(t,e,r,n){var s=ur.hasOwnProperty(e)?ur[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Rk(e,r,s,n)&&(r=null),n||s===null?Ak(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ii=_k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ih=Symbol.for("react.element"),sl=Symbol.for("react.portal"),il=Symbol.for("react.fragment"),qv=Symbol.for("react.strict_mode"),R0=Symbol.for("react.profiler"),t_=Symbol.for("react.provider"),r_=Symbol.for("react.context"),Gv=Symbol.for("react.forward_ref"),I0=Symbol.for("react.suspense"),j0=Symbol.for("react.suspense_list"),$v=Symbol.for("react.memo"),_i=Symbol.for("react.lazy"),n_=Symbol.for("react.offscreen"),jb=Symbol.iterator;function Vc(t){return t===null||typeof t!="object"?null:(t=jb&&t[jb]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,_g;function Jc(t){if(_g===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);_g=e&&e[1]||""}return`
`+_g+t}var Tg=!1;function Ag(t,e){if(!t||Tg)return"";Tg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Tg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Jc(t):""}function Ik(t){switch(t.tag){case 5:return Jc(t.type);case 16:return Jc("Lazy");case 13:return Jc("Suspense");case 19:return Jc("SuspenseList");case 0:case 2:case 15:return t=Ag(t.type,!1),t;case 11:return t=Ag(t.type.render,!1),t;case 1:return t=Ag(t.type,!0),t;default:return""}}function P0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case il:return"Fragment";case sl:return"Portal";case R0:return"Profiler";case qv:return"StrictMode";case I0:return"Suspense";case j0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r_:return(t.displayName||"Context")+".Consumer";case t_:return(t._context.displayName||"Context")+".Provider";case Gv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $v:return e=t.displayName||null,e!==null?e:P0(t.type)||"Memo";case _i:e=t._payload,t=t._init;try{return P0(t(e))}catch{}}return null}function jk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P0(e);case 8:return e===qv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function no(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function s_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pk(t){var e=s_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jh(t){t._valueTracker||(t._valueTracker=Pk(t))}function i_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=s_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Wf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function k0(t,e){var r=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Pb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=no(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o_(t,e){e=e.checked,e!=null&&Uv(t,"checked",e,!1)}function M0(t,e){o_(t,e);var r=no(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?D0(t,e.type,r):e.hasOwnProperty("defaultValue")&&D0(t,e.type,no(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function D0(t,e,r){(e!=="number"||Wf(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Xc=Array.isArray;function vl(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+no(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function O0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ce(92));if(Xc(r)){if(1<r.length)throw Error(ce(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:no(r)}}function a_(t,e){var r=no(e.value),n=no(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Db(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function l_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?l_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ph,c_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ph=Ph||document.createElement("div"),Ph.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ph.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ju(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var hu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kk=["Webkit","ms","Moz","O"];Object.keys(hu).forEach(function(t){kk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hu[e]=hu[t]})});function u_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||hu.hasOwnProperty(t)&&hu[t]?(""+e).trim():e+"px"}function d_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=u_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Mk=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function F0(t,e){if(e){if(Mk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function V0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B0=null;function zv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var U0=null,xl=null,wl=null;function Ob(t){if(t=wd(t)){if(typeof U0!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=ep(e),U0(t.stateNode,t.type,e))}}function h_(t){xl?wl?wl.push(t):wl=[t]:xl=t}function f_(){if(xl){var t=xl,e=wl;if(wl=xl=null,Ob(t),e)for(t=0;t<e.length;t++)Ob(e[t])}}function m_(t,e){return t(e)}function p_(){}var Sg=!1;function g_(t,e,r){if(Sg)return t(e,r);Sg=!0;try{return m_(t,e,r)}finally{Sg=!1,(xl!==null||wl!==null)&&(p_(),f_())}}function Pu(t,e){var r=t.stateNode;if(r===null)return null;var n=ep(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ce(231,e,typeof r));return r}var q0=!1;if(Qs)try{var Bc={};Object.defineProperty(Bc,"passive",{get:function(){q0=!0}}),window.addEventListener("test",Bc,Bc),window.removeEventListener("test",Bc,Bc)}catch{q0=!1}function Dk(t,e,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var fu=!1,Qf=null,Yf=!1,G0=null,Ok={onError:function(t){fu=!0,Qf=t}};function Lk(t,e,r,n,s,i,a,l,c){fu=!1,Qf=null,Dk.apply(Ok,arguments)}function Fk(t,e,r,n,s,i,a,l,c){if(Lk.apply(this,arguments),fu){if(fu){var u=Qf;fu=!1,Qf=null}else throw Error(ce(198));Yf||(Yf=!0,G0=u)}}function Ea(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function y_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lb(t){if(Ea(t)!==t)throw Error(ce(188))}function Vk(t){var e=t.alternate;if(!e){if(e=Ea(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Lb(s),t;if(i===n)return Lb(s),e;i=i.sibling}throw Error(ce(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?t:e}function v_(t){return t=Vk(t),t!==null?x_(t):null}function x_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=x_(t);if(e!==null)return e;t=t.sibling}return null}var w_=cn.unstable_scheduleCallback,Fb=cn.unstable_cancelCallback,Bk=cn.unstable_shouldYield,Uk=cn.unstable_requestPaint,Ot=cn.unstable_now,qk=cn.unstable_getCurrentPriorityLevel,Hv=cn.unstable_ImmediatePriority,b_=cn.unstable_UserBlockingPriority,Kf=cn.unstable_NormalPriority,Gk=cn.unstable_LowPriority,E_=cn.unstable_IdlePriority,Km=null,cs=null;function $k(t){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Km,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:Wk,zk=Math.log,Hk=Math.LN2;function Wk(t){return t>>>=0,t===0?32:31-(zk(t)/Hk|0)|0}var kh=64,Mh=4194304;function Zc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jf(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Zc(l):(i&=a,i!==0&&(n=Zc(i)))}else a=r&~s,a!==0?n=Zc(a):i!==0&&(n=Zc(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-$n(e),s=1<<r,n|=t[r],e&=~s;return n}function Qk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-$n(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=Qk(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function $0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function C_(){var t=kh;return kh<<=1,!(kh&4194240)&&(kh=64),t}function Rg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function vd(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=r}function Kk(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-$n(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Wv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-$n(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var ct=0;function N_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var __,Qv,T_,A_,S_,z0=!1,Dh=[],Gi=null,$i=null,zi=null,ku=new Map,Mu=new Map,Si=[],Jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vb(t,e){switch(t){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":ku.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(e.pointerId)}}function Uc(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=wd(e),e!==null&&Qv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Xk(t,e,r,n,s){switch(e){case"focusin":return Gi=Uc(Gi,t,e,r,n,s),!0;case"dragenter":return $i=Uc($i,t,e,r,n,s),!0;case"mouseover":return zi=Uc(zi,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return ku.set(i,Uc(ku.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Mu.set(i,Uc(Mu.get(i)||null,t,e,r,n,s)),!0}return!1}function R_(t){var e=Ho(t.target);if(e!==null){var r=Ea(e);if(r!==null){if(e=r.tag,e===13){if(e=y_(r),e!==null){t.blockedOn=e,S_(t.priority,function(){T_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ff(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=H0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);B0=n,r.target.dispatchEvent(n),B0=null}else return e=wd(r),e!==null&&Qv(e),t.blockedOn=r,!1;e.shift()}return!0}function Bb(t,e,r){ff(t)&&r.delete(e)}function Zk(){z0=!1,Gi!==null&&ff(Gi)&&(Gi=null),$i!==null&&ff($i)&&($i=null),zi!==null&&ff(zi)&&(zi=null),ku.forEach(Bb),Mu.forEach(Bb)}function qc(t,e){t.blockedOn===e&&(t.blockedOn=null,z0||(z0=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,Zk)))}function Du(t){function e(s){return qc(s,t)}if(0<Dh.length){qc(Dh[0],t);for(var r=1;r<Dh.length;r++){var n=Dh[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Gi!==null&&qc(Gi,t),$i!==null&&qc($i,t),zi!==null&&qc(zi,t),ku.forEach(e),Mu.forEach(e),r=0;r<Si.length;r++)n=Si[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Si.length&&(r=Si[0],r.blockedOn===null);)R_(r),r.blockedOn===null&&Si.shift()}var bl=ii.ReactCurrentBatchConfig,Xf=!0;function eM(t,e,r,n){var s=ct,i=bl.transition;bl.transition=null;try{ct=1,Yv(t,e,r,n)}finally{ct=s,bl.transition=i}}function tM(t,e,r,n){var s=ct,i=bl.transition;bl.transition=null;try{ct=4,Yv(t,e,r,n)}finally{ct=s,bl.transition=i}}function Yv(t,e,r,n){if(Xf){var s=H0(t,e,r,n);if(s===null)Vg(t,e,n,Zf,r),Vb(t,n);else if(Xk(s,t,e,r,n))n.stopPropagation();else if(Vb(t,n),e&4&&-1<Jk.indexOf(t)){for(;s!==null;){var i=wd(s);if(i!==null&&__(i),i=H0(t,e,r,n),i===null&&Vg(t,e,n,Zf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Vg(t,e,n,null,r)}}var Zf=null;function H0(t,e,r,n){if(Zf=null,t=zv(n),t=Ho(t),t!==null)if(e=Ea(t),e===null)t=null;else if(r=e.tag,r===13){if(t=y_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zf=t,null}function I_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qk()){case Hv:return 1;case b_:return 4;case Kf:case Gk:return 16;case E_:return 536870912;default:return 16}default:return 16}}var Vi=null,Kv=null,mf=null;function j_(){if(mf)return mf;var t,e=Kv,r=e.length,n,s="value"in Vi?Vi.value:Vi.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return mf=s.slice(t,1<n?1-n:void 0)}function pf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oh(){return!0}function Ub(){return!1}function dn(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oh:Ub,this.isPropagationStopped=Ub,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Oh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Oh)},persist:function(){},isPersistent:Oh}),e}var ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jv=dn(ac),xd=St({},ac,{view:0,detail:0}),rM=dn(xd),Ig,jg,Gc,Jm=St({},xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gc&&(Gc&&t.type==="mousemove"?(Ig=t.screenX-Gc.screenX,jg=t.screenY-Gc.screenY):jg=Ig=0,Gc=t),Ig)},movementY:function(t){return"movementY"in t?t.movementY:jg}}),qb=dn(Jm),nM=St({},Jm,{dataTransfer:0}),sM=dn(nM),iM=St({},xd,{relatedTarget:0}),Pg=dn(iM),oM=St({},ac,{animationName:0,elapsedTime:0,pseudoElement:0}),aM=dn(oM),lM=St({},ac,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cM=dn(lM),uM=St({},ac,{data:0}),Gb=dn(uM),dM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fM[t])?!!e[t]:!1}function Xv(){return mM}var pM=St({},xd,{key:function(t){if(t.key){var e=dM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xv,charCode:function(t){return t.type==="keypress"?pf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gM=dn(pM),yM=St({},Jm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$b=dn(yM),vM=St({},xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xv}),xM=dn(vM),wM=St({},ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),bM=dn(wM),EM=St({},Jm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CM=dn(EM),NM=[9,13,27,32],Zv=Qs&&"CompositionEvent"in window,mu=null;Qs&&"documentMode"in document&&(mu=document.documentMode);var _M=Qs&&"TextEvent"in window&&!mu,P_=Qs&&(!Zv||mu&&8<mu&&11>=mu),zb=" ",Hb=!1;function k_(t,e){switch(t){case"keyup":return NM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ol=!1;function TM(t,e){switch(t){case"compositionend":return M_(e);case"keypress":return e.which!==32?null:(Hb=!0,zb);case"textInput":return t=e.data,t===zb&&Hb?null:t;default:return null}}function AM(t,e){if(ol)return t==="compositionend"||!Zv&&k_(t,e)?(t=j_(),mf=Kv=Vi=null,ol=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return P_&&e.locale!=="ko"?null:e.data;default:return null}}var SM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SM[t.type]:e==="textarea"}function D_(t,e,r,n){h_(n),e=em(e,"onChange"),0<e.length&&(r=new Jv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var pu=null,Ou=null;function RM(t){H_(t,0)}function Xm(t){var e=cl(t);if(i_(e))return t}function IM(t,e){if(t==="change")return e}var O_=!1;if(Qs){var kg;if(Qs){var Mg="oninput"in document;if(!Mg){var Qb=document.createElement("div");Qb.setAttribute("oninput","return;"),Mg=typeof Qb.oninput=="function"}kg=Mg}else kg=!1;O_=kg&&(!document.documentMode||9<document.documentMode)}function Yb(){pu&&(pu.detachEvent("onpropertychange",L_),Ou=pu=null)}function L_(t){if(t.propertyName==="value"&&Xm(Ou)){var e=[];D_(e,Ou,t,zv(t)),g_(RM,e)}}function jM(t,e,r){t==="focusin"?(Yb(),pu=e,Ou=r,pu.attachEvent("onpropertychange",L_)):t==="focusout"&&Yb()}function PM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xm(Ou)}function kM(t,e){if(t==="click")return Xm(e)}function MM(t,e){if(t==="input"||t==="change")return Xm(e)}function DM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:DM;function Lu(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!S0.call(e,s)||!Wn(t[s],e[s]))return!1}return!0}function Kb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jb(t,e){var r=Kb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kb(r)}}function F_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function V_(){for(var t=window,e=Wf();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Wf(t.document)}return e}function ex(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OM(t){var e=V_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&F_(r.ownerDocument.documentElement,r)){if(n!==null&&ex(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Jb(r,i);var a=Jb(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LM=Qs&&"documentMode"in document&&11>=document.documentMode,al=null,W0=null,gu=null,Q0=!1;function Xb(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Q0||al==null||al!==Wf(n)||(n=al,"selectionStart"in n&&ex(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),gu&&Lu(gu,n)||(gu=n,n=em(W0,"onSelect"),0<n.length&&(e=new Jv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=al)))}function Lh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ll={animationend:Lh("Animation","AnimationEnd"),animationiteration:Lh("Animation","AnimationIteration"),animationstart:Lh("Animation","AnimationStart"),transitionend:Lh("Transition","TransitionEnd")},Dg={},B_={};Qs&&(B_=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function Zm(t){if(Dg[t])return Dg[t];if(!ll[t])return t;var e=ll[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in B_)return Dg[t]=e[r];return t}var U_=Zm("animationend"),q_=Zm("animationiteration"),G_=Zm("animationstart"),$_=Zm("transitionend"),z_=new Map,Zb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wo(t,e){z_.set(t,e),ba(e,[t])}for(var Og=0;Og<Zb.length;Og++){var Lg=Zb[Og],FM=Lg.toLowerCase(),VM=Lg[0].toUpperCase()+Lg.slice(1);wo(FM,"on"+VM)}wo(U_,"onAnimationEnd");wo(q_,"onAnimationIteration");wo(G_,"onAnimationStart");wo("dblclick","onDoubleClick");wo("focusin","onFocus");wo("focusout","onBlur");wo($_,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BM=new Set("cancel close invalid load scroll toggle".split(" ").concat(eu));function e1(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Fk(n,e,void 0,t),t.currentTarget=null}function H_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;e1(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;e1(s,l,u),i=c}}}if(Yf)throw t=G0,Yf=!1,G0=null,t}function vt(t,e){var r=e[Z0];r===void 0&&(r=e[Z0]=new Set);var n=t+"__bubble";r.has(n)||(W_(e,t,2,!1),r.add(n))}function Fg(t,e,r){var n=0;e&&(n|=4),W_(r,t,n,e)}var Fh="_reactListening"+Math.random().toString(36).slice(2);function Fu(t){if(!t[Fh]){t[Fh]=!0,e_.forEach(function(r){r!=="selectionchange"&&(BM.has(r)||Fg(r,!1,t),Fg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fh]||(e[Fh]=!0,Fg("selectionchange",!1,e))}}function W_(t,e,r,n){switch(I_(e)){case 1:var s=eM;break;case 4:s=tM;break;default:s=Yv}r=s.bind(null,e,r,t),s=void 0,!q0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Vg(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ho(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}g_(function(){var u=i,d=zv(r),f=[];e:{var m=z_.get(t);if(m!==void 0){var g=Jv,x=t;switch(t){case"keypress":if(pf(r)===0)break e;case"keydown":case"keyup":g=gM;break;case"focusin":x="focus",g=Pg;break;case"focusout":x="blur",g=Pg;break;case"beforeblur":case"afterblur":g=Pg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=qb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=sM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=xM;break;case U_:case q_:case G_:g=aM;break;case $_:g=bM;break;case"scroll":g=rM;break;case"wheel":g=CM;break;case"copy":case"cut":case"paste":g=cM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=$b}var p=(e&4)!==0,b=!p&&t==="scroll",E=p?m!==null?m+"Capture":null:m;p=[];for(var w=u,C;w!==null;){C=w;var I=C.stateNode;if(C.tag===5&&I!==null&&(C=I,E!==null&&(I=Pu(w,E),I!=null&&p.push(Vu(w,I,C)))),b)break;w=w.return}0<p.length&&(m=new g(m,x,null,r,d),f.push({event:m,listeners:p}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==B0&&(x=r.relatedTarget||r.fromElement)&&(Ho(x)||x[Ys]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=r.relatedTarget||r.toElement,g=u,x=x?Ho(x):null,x!==null&&(b=Ea(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(p=qb,I="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(p=$b,I="onPointerLeave",E="onPointerEnter",w="pointer"),b=g==null?m:cl(g),C=x==null?m:cl(x),m=new p(I,w+"leave",g,r,d),m.target=b,m.relatedTarget=C,I=null,Ho(d)===u&&(p=new p(E,w+"enter",x,r,d),p.target=C,p.relatedTarget=b,I=p),b=I,g&&x)t:{for(p=g,E=x,w=0,C=p;C;C=Ka(C))w++;for(C=0,I=E;I;I=Ka(I))C++;for(;0<w-C;)p=Ka(p),w--;for(;0<C-w;)E=Ka(E),C--;for(;w--;){if(p===E||E!==null&&p===E.alternate)break t;p=Ka(p),E=Ka(E)}p=null}else p=null;g!==null&&t1(f,m,g,p,!1),x!==null&&b!==null&&t1(f,b,x,p,!0)}}e:{if(m=u?cl(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=IM;else if(Wb(m))if(O_)j=MM;else{j=PM;var V=jM}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=kM);if(j&&(j=j(t,u))){D_(f,j,r,d);break e}V&&V(t,m,u),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&D0(m,"number",m.value)}switch(V=u?cl(u):window,t){case"focusin":(Wb(V)||V.contentEditable==="true")&&(al=V,W0=u,gu=null);break;case"focusout":gu=W0=al=null;break;case"mousedown":Q0=!0;break;case"contextmenu":case"mouseup":case"dragend":Q0=!1,Xb(f,r,d);break;case"selectionchange":if(LM)break;case"keydown":case"keyup":Xb(f,r,d)}var R;if(Zv)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ol?k_(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(P_&&r.locale!=="ko"&&(ol||_!=="onCompositionStart"?_==="onCompositionEnd"&&ol&&(R=j_()):(Vi=d,Kv="value"in Vi?Vi.value:Vi.textContent,ol=!0)),V=em(u,_),0<V.length&&(_=new Gb(_,t,null,r,d),f.push({event:_,listeners:V}),R?_.data=R:(R=M_(r),R!==null&&(_.data=R)))),(R=_M?TM(t,r):AM(t,r))&&(u=em(u,"onBeforeInput"),0<u.length&&(d=new Gb("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=R))}H_(f,e)})}function Vu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function em(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pu(t,r),i!=null&&n.unshift(Vu(t,i,s)),i=Pu(t,e),i!=null&&n.push(Vu(t,i,s))),t=t.return}return n}function Ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t1(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Pu(r,i),c!=null&&a.unshift(Vu(r,c,l))):s||(c=Pu(r,i),c!=null&&a.push(Vu(r,c,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var UM=/\r\n?/g,qM=/\u0000|\uFFFD/g;function r1(t){return(typeof t=="string"?t:""+t).replace(UM,`
`).replace(qM,"")}function Vh(t,e,r){if(e=r1(e),r1(t)!==e&&r)throw Error(ce(425))}function tm(){}var Y0=null,K0=null;function J0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var X0=typeof setTimeout=="function"?setTimeout:void 0,GM=typeof clearTimeout=="function"?clearTimeout:void 0,n1=typeof Promise=="function"?Promise:void 0,$M=typeof queueMicrotask=="function"?queueMicrotask:typeof n1<"u"?function(t){return n1.resolve(null).then(t).catch(zM)}:X0;function zM(t){setTimeout(function(){throw t})}function Bg(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Du(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Du(e)}function Hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var lc=Math.random().toString(36).slice(2),as="__reactFiber$"+lc,Bu="__reactProps$"+lc,Ys="__reactContainer$"+lc,Z0="__reactEvents$"+lc,HM="__reactListeners$"+lc,WM="__reactHandles$"+lc;function Ho(t){var e=t[as];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ys]||r[as]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=s1(t);t!==null;){if(r=t[as])return r;t=s1(t)}return e}t=r,r=t.parentNode}return null}function wd(t){return t=t[as]||t[Ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function ep(t){return t[Bu]||null}var ey=[],ul=-1;function bo(t){return{current:t}}function xt(t){0>ul||(t.current=ey[ul],ey[ul]=null,ul--)}function pt(t,e){ul++,ey[ul]=t.current,t.current=e}var so={},Cr=bo(so),Hr=bo(!1),oa=so;function Gl(t,e){var r=t.type.contextTypes;if(!r)return so;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Wr(t){return t=t.childContextTypes,t!=null}function rm(){xt(Hr),xt(Cr)}function i1(t,e,r){if(Cr.current!==so)throw Error(ce(168));pt(Cr,e),pt(Hr,r)}function Q_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ce(108,jk(t)||"Unknown",s));return St({},r,n)}function nm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||so,oa=Cr.current,pt(Cr,t),pt(Hr,Hr.current),!0}function o1(t,e,r){var n=t.stateNode;if(!n)throw Error(ce(169));r?(t=Q_(t,e,oa),n.__reactInternalMemoizedMergedChildContext=t,xt(Hr),xt(Cr),pt(Cr,t)):xt(Hr),pt(Hr,r)}var Vs=null,tp=!1,Ug=!1;function Y_(t){Vs===null?Vs=[t]:Vs.push(t)}function QM(t){tp=!0,Y_(t)}function Eo(){if(!Ug&&Vs!==null){Ug=!0;var t=0,e=ct;try{var r=Vs;for(ct=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Vs=null,tp=!1}catch(s){throw Vs!==null&&(Vs=Vs.slice(t+1)),w_(Hv,Eo),s}finally{ct=e,Ug=!1}}return null}var dl=[],hl=0,sm=null,im=0,yn=[],vn=0,aa=null,Bs=1,Us="";function Go(t,e){dl[hl++]=im,dl[hl++]=sm,sm=t,im=e}function K_(t,e,r){yn[vn++]=Bs,yn[vn++]=Us,yn[vn++]=aa,aa=t;var n=Bs;t=Us;var s=32-$n(n)-1;n&=~(1<<s),r+=1;var i=32-$n(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Bs=1<<32-$n(e)+s|r<<s|n,Us=i+t}else Bs=1<<i|r<<s|n,Us=t}function tx(t){t.return!==null&&(Go(t,1),K_(t,1,0))}function rx(t){for(;t===sm;)sm=dl[--hl],dl[hl]=null,im=dl[--hl],dl[hl]=null;for(;t===aa;)aa=yn[--vn],yn[vn]=null,Us=yn[--vn],yn[vn]=null,Bs=yn[--vn],yn[vn]=null}var on=null,nn=null,_t=!1,Un=null;function J_(t,e){var r=bn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function a1(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,nn=Hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=aa!==null?{id:Bs,overflow:Us}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=bn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,on=t,nn=null,!0):!1;default:return!1}}function ty(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ry(t){if(_t){var e=nn;if(e){var r=e;if(!a1(t,e)){if(ty(t))throw Error(ce(418));e=Hi(r.nextSibling);var n=on;e&&a1(t,e)?J_(n,r):(t.flags=t.flags&-4097|2,_t=!1,on=t)}}else{if(ty(t))throw Error(ce(418));t.flags=t.flags&-4097|2,_t=!1,on=t}}}function l1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function Bh(t){if(t!==on)return!1;if(!_t)return l1(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!J0(t.type,t.memoizedProps)),e&&(e=nn)){if(ty(t))throw X_(),Error(ce(418));for(;e;)J_(t,e),e=Hi(e.nextSibling)}if(l1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){nn=Hi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=on?Hi(t.stateNode.nextSibling):null;return!0}function X_(){for(var t=nn;t;)t=Hi(t.nextSibling)}function $l(){nn=on=null,_t=!1}function nx(t){Un===null?Un=[t]:Un.push(t)}var YM=ii.ReactCurrentBatchConfig;function $c(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,t))}return t}function Uh(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c1(t){var e=t._init;return e(t._payload)}function Z_(t){function e(E,w){if(t){var C=E.deletions;C===null?(E.deletions=[w],E.flags|=16):C.push(w)}}function r(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function n(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=Ki(E,w),E.index=0,E.sibling=null,E}function i(E,w,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<w?(E.flags|=2,w):C):(E.flags|=2,w)):(E.flags|=1048576,w)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,C,I){return w===null||w.tag!==6?(w=Qg(C,E.mode,I),w.return=E,w):(w=s(w,C),w.return=E,w)}function c(E,w,C,I){var j=C.type;return j===il?d(E,w,C.props.children,I,C.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===_i&&c1(j)===w.type)?(I=s(w,C.props),I.ref=$c(E,w,C),I.return=E,I):(I=Ef(C.type,C.key,C.props,null,E.mode,I),I.ref=$c(E,w,C),I.return=E,I)}function u(E,w,C,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Yg(C,E.mode,I),w.return=E,w):(w=s(w,C.children||[]),w.return=E,w)}function d(E,w,C,I,j){return w===null||w.tag!==7?(w=ta(C,E.mode,I,j),w.return=E,w):(w=s(w,C),w.return=E,w)}function f(E,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Qg(""+w,E.mode,C),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ih:return C=Ef(w.type,w.key,w.props,null,E.mode,C),C.ref=$c(E,null,w),C.return=E,C;case sl:return w=Yg(w,E.mode,C),w.return=E,w;case _i:var I=w._init;return f(E,I(w._payload),C)}if(Xc(w)||Vc(w))return w=ta(w,E.mode,C,null),w.return=E,w;Uh(E,w)}return null}function m(E,w,C,I){var j=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return j!==null?null:l(E,w,""+C,I);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ih:return C.key===j?c(E,w,C,I):null;case sl:return C.key===j?u(E,w,C,I):null;case _i:return j=C._init,m(E,w,j(C._payload),I)}if(Xc(C)||Vc(C))return j!==null?null:d(E,w,C,I,null);Uh(E,C)}return null}function g(E,w,C,I,j){if(typeof I=="string"&&I!==""||typeof I=="number")return E=E.get(C)||null,l(w,E,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ih:return E=E.get(I.key===null?C:I.key)||null,c(w,E,I,j);case sl:return E=E.get(I.key===null?C:I.key)||null,u(w,E,I,j);case _i:var V=I._init;return g(E,w,C,V(I._payload),j)}if(Xc(I)||Vc(I))return E=E.get(C)||null,d(w,E,I,j,null);Uh(w,I)}return null}function x(E,w,C,I){for(var j=null,V=null,R=w,_=w=0,A=null;R!==null&&_<C.length;_++){R.index>_?(A=R,R=null):A=R.sibling;var k=m(E,R,C[_],I);if(k===null){R===null&&(R=A);break}t&&R&&k.alternate===null&&e(E,R),w=i(k,w,_),V===null?j=k:V.sibling=k,V=k,R=A}if(_===C.length)return r(E,R),_t&&Go(E,_),j;if(R===null){for(;_<C.length;_++)R=f(E,C[_],I),R!==null&&(w=i(R,w,_),V===null?j=R:V.sibling=R,V=R);return _t&&Go(E,_),j}for(R=n(E,R);_<C.length;_++)A=g(R,E,_,C[_],I),A!==null&&(t&&A.alternate!==null&&R.delete(A.key===null?_:A.key),w=i(A,w,_),V===null?j=A:V.sibling=A,V=A);return t&&R.forEach(function(L){return e(E,L)}),_t&&Go(E,_),j}function p(E,w,C,I){var j=Vc(C);if(typeof j!="function")throw Error(ce(150));if(C=j.call(C),C==null)throw Error(ce(151));for(var V=j=null,R=w,_=w=0,A=null,k=C.next();R!==null&&!k.done;_++,k=C.next()){R.index>_?(A=R,R=null):A=R.sibling;var L=m(E,R,k.value,I);if(L===null){R===null&&(R=A);break}t&&R&&L.alternate===null&&e(E,R),w=i(L,w,_),V===null?j=L:V.sibling=L,V=L,R=A}if(k.done)return r(E,R),_t&&Go(E,_),j;if(R===null){for(;!k.done;_++,k=C.next())k=f(E,k.value,I),k!==null&&(w=i(k,w,_),V===null?j=k:V.sibling=k,V=k);return _t&&Go(E,_),j}for(R=n(E,R);!k.done;_++,k=C.next())k=g(R,E,_,k.value,I),k!==null&&(t&&k.alternate!==null&&R.delete(k.key===null?_:k.key),w=i(k,w,_),V===null?j=k:V.sibling=k,V=k);return t&&R.forEach(function(M){return e(E,M)}),_t&&Go(E,_),j}function b(E,w,C,I){if(typeof C=="object"&&C!==null&&C.type===il&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ih:e:{for(var j=C.key,V=w;V!==null;){if(V.key===j){if(j=C.type,j===il){if(V.tag===7){r(E,V.sibling),w=s(V,C.props.children),w.return=E,E=w;break e}}else if(V.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===_i&&c1(j)===V.type){r(E,V.sibling),w=s(V,C.props),w.ref=$c(E,V,C),w.return=E,E=w;break e}r(E,V);break}else e(E,V);V=V.sibling}C.type===il?(w=ta(C.props.children,E.mode,I,C.key),w.return=E,E=w):(I=Ef(C.type,C.key,C.props,null,E.mode,I),I.ref=$c(E,w,C),I.return=E,E=I)}return a(E);case sl:e:{for(V=C.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){r(E,w.sibling),w=s(w,C.children||[]),w.return=E,E=w;break e}else{r(E,w);break}else e(E,w);w=w.sibling}w=Yg(C,E.mode,I),w.return=E,E=w}return a(E);case _i:return V=C._init,b(E,w,V(C._payload),I)}if(Xc(C))return x(E,w,C,I);if(Vc(C))return p(E,w,C,I);Uh(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(r(E,w.sibling),w=s(w,C),w.return=E,E=w):(r(E,w),w=Qg(C,E.mode,I),w.return=E,E=w),a(E)):r(E,w)}return b}var zl=Z_(!0),eT=Z_(!1),om=bo(null),am=null,fl=null,sx=null;function ix(){sx=fl=am=null}function ox(t){var e=om.current;xt(om),t._currentValue=e}function ny(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function El(t,e){am=t,sx=fl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($r=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(sx!==t)if(t={context:t,memoizedValue:e,next:null},fl===null){if(am===null)throw Error(ce(308));fl=t,am.dependencies={lanes:0,firstContext:t}}else fl=fl.next=t;return e}var Wo=null;function ax(t){Wo===null?Wo=[t]:Wo.push(t)}function tT(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,ax(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ks(t,n)}function Ks(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ti=!1;function lx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wi(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ze&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ks(t,r)}return s=n.interleaved,s===null?(e.next=e,ax(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ks(t,r)}function gf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wv(t,r)}}function u1(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function lm(t,e,r,n){var s=t.updateQueue;Ti=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,p=l;switch(m=e,g=r,p.tag){case 1:if(x=p.payload,typeof x=="function"){f=x.call(g,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,m=typeof x=="function"?x.call(g,f,m):x,m==null)break e;f=St({},f,m);break e;case 2:Ti=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=f):d=d.next=g,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ca|=a,t.lanes=a,t.memoizedState=f}}function d1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ce(191,s));s.call(n)}}}var bd={},us=bo(bd),Uu=bo(bd),qu=bo(bd);function Qo(t){if(t===bd)throw Error(ce(174));return t}function cx(t,e){switch(pt(qu,e),pt(Uu,t),pt(us,bd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:L0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=L0(e,t)}xt(us),pt(us,e)}function Hl(){xt(us),xt(Uu),xt(qu)}function nT(t){Qo(qu.current);var e=Qo(us.current),r=L0(e,t.type);e!==r&&(pt(Uu,t),pt(us,r))}function ux(t){Uu.current===t&&(xt(us),xt(Uu))}var Tt=bo(0);function cm(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qg=[];function dx(){for(var t=0;t<qg.length;t++)qg[t]._workInProgressVersionPrimary=null;qg.length=0}var yf=ii.ReactCurrentDispatcher,Gg=ii.ReactCurrentBatchConfig,la=0,At=null,Qt=null,rr=null,um=!1,yu=!1,Gu=0,KM=0;function gr(){throw Error(ce(321))}function hx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Wn(t[r],e[r]))return!1;return!0}function fx(t,e,r,n,s,i){if(la=i,At=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yf.current=t===null||t.memoizedState===null?eD:tD,t=r(n,s),yu){i=0;do{if(yu=!1,Gu=0,25<=i)throw Error(ce(301));i+=1,rr=Qt=null,e.updateQueue=null,yf.current=rD,t=r(n,s)}while(yu)}if(yf.current=dm,e=Qt!==null&&Qt.next!==null,la=0,rr=Qt=At=null,um=!1,e)throw Error(ce(300));return t}function mx(){var t=Gu!==0;return Gu=0,t}function rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?At.memoizedState=rr=t:rr=rr.next=t,rr}function Tn(){if(Qt===null){var t=At.alternate;t=t!==null?t.memoizedState:null}else t=Qt.next;var e=rr===null?At.memoizedState:rr.next;if(e!==null)rr=e,Qt=t;else{if(t===null)throw Error(ce(310));Qt=t,t={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},rr===null?At.memoizedState=rr=t:rr=rr.next=t}return rr}function $u(t,e){return typeof e=="function"?e(t):e}function $g(t){var e=Tn(),r=e.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=t;var n=Qt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((la&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,At.lanes|=d,ca|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,Wn(n,e.memoizedState)||($r=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,At.lanes|=i,ca|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function zg(t){var e=Tn(),r=e.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Wn(i,e.memoizedState)||($r=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function sT(){}function iT(t,e){var r=At,n=Tn(),s=e(),i=!Wn(n.memoizedState,s);if(i&&(n.memoizedState=s,$r=!0),n=n.queue,px(lT.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||rr!==null&&rr.memoizedState.tag&1){if(r.flags|=2048,zu(9,aT.bind(null,r,n,s,e),void 0,null),sr===null)throw Error(ce(349));la&30||oT(r,e,s)}return s}function oT(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function aT(t,e,r,n){e.value=r,e.getSnapshot=n,cT(e)&&uT(t)}function lT(t,e,r){return r(function(){cT(e)&&uT(t)})}function cT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Wn(t,r)}catch{return!0}}function uT(t){var e=Ks(t,1);e!==null&&zn(e,t,1,-1)}function h1(t){var e=rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:t},e.queue=t,t=t.dispatch=ZM.bind(null,At,t),[e.memoizedState,t]}function zu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function dT(){return Tn().memoizedState}function vf(t,e,r,n){var s=rs();At.flags|=t,s.memoizedState=zu(1|e,r,void 0,n===void 0?null:n)}function rp(t,e,r,n){var s=Tn();n=n===void 0?null:n;var i=void 0;if(Qt!==null){var a=Qt.memoizedState;if(i=a.destroy,n!==null&&hx(n,a.deps)){s.memoizedState=zu(e,r,i,n);return}}At.flags|=t,s.memoizedState=zu(1|e,r,i,n)}function f1(t,e){return vf(8390656,8,t,e)}function px(t,e){return rp(2048,8,t,e)}function hT(t,e){return rp(4,2,t,e)}function fT(t,e){return rp(4,4,t,e)}function mT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pT(t,e,r){return r=r!=null?r.concat([t]):null,rp(4,4,mT.bind(null,e,t),r)}function gx(){}function gT(t,e){var r=Tn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&hx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function yT(t,e){var r=Tn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&hx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function vT(t,e,r){return la&21?(Wn(r,e)||(r=C_(),At.lanes|=r,ca|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$r=!0),t.memoizedState=r)}function JM(t,e){var r=ct;ct=r!==0&&4>r?r:4,t(!0);var n=Gg.transition;Gg.transition={};try{t(!1),e()}finally{ct=r,Gg.transition=n}}function xT(){return Tn().memoizedState}function XM(t,e,r){var n=Yi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},wT(t))bT(e,r);else if(r=tT(t,e,r,n),r!==null){var s=Or();zn(r,t,n,s),ET(r,e,n)}}function ZM(t,e,r){var n=Yi(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(wT(t))bT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Wn(l,a)){var c=e.interleaved;c===null?(s.next=s,ax(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=tT(t,e,s,n),r!==null&&(s=Or(),zn(r,t,n,s),ET(r,e,n))}}function wT(t){var e=t.alternate;return t===At||e!==null&&e===At}function bT(t,e){yu=um=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function ET(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wv(t,r)}}var dm={readContext:_n,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},eD={readContext:_n,useCallback:function(t,e){return rs().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:f1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,vf(4194308,4,mT.bind(null,e,t),r)},useLayoutEffect:function(t,e){return vf(4194308,4,t,e)},useInsertionEffect:function(t,e){return vf(4,2,t,e)},useMemo:function(t,e){var r=rs();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=rs();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=XM.bind(null,At,t),[n.memoizedState,t]},useRef:function(t){var e=rs();return t={current:t},e.memoizedState=t},useState:h1,useDebugValue:gx,useDeferredValue:function(t){return rs().memoizedState=t},useTransition:function(){var t=h1(!1),e=t[0];return t=JM.bind(null,t[1]),rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=At,s=rs();if(_t){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=e(),sr===null)throw Error(ce(349));la&30||oT(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,f1(lT.bind(null,n,i,t),[t]),n.flags|=2048,zu(9,aT.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=rs(),e=sr.identifierPrefix;if(_t){var r=Us,n=Bs;r=(n&~(1<<32-$n(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=KM++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tD={readContext:_n,useCallback:gT,useContext:_n,useEffect:px,useImperativeHandle:pT,useInsertionEffect:hT,useLayoutEffect:fT,useMemo:yT,useReducer:$g,useRef:dT,useState:function(){return $g($u)},useDebugValue:gx,useDeferredValue:function(t){var e=Tn();return vT(e,Qt.memoizedState,t)},useTransition:function(){var t=$g($u)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:sT,useSyncExternalStore:iT,useId:xT,unstable_isNewReconciler:!1},rD={readContext:_n,useCallback:gT,useContext:_n,useEffect:px,useImperativeHandle:pT,useInsertionEffect:hT,useLayoutEffect:fT,useMemo:yT,useReducer:zg,useRef:dT,useState:function(){return zg($u)},useDebugValue:gx,useDeferredValue:function(t){var e=Tn();return Qt===null?e.memoizedState=t:vT(e,Qt.memoizedState,t)},useTransition:function(){var t=zg($u)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:sT,useSyncExternalStore:iT,useId:xT,unstable_isNewReconciler:!1};function Ln(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function sy(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:St({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var np={isMounted:function(t){return(t=t._reactInternals)?Ea(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Or(),s=Yi(t),i=$s(n,s);i.payload=e,r!=null&&(i.callback=r),e=Wi(t,i,s),e!==null&&(zn(e,t,s,n),gf(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Or(),s=Yi(t),i=$s(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Wi(t,i,s),e!==null&&(zn(e,t,s,n),gf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Or(),n=Yi(t),s=$s(r,n);s.tag=2,e!=null&&(s.callback=e),e=Wi(t,s,n),e!==null&&(zn(e,t,n,r),gf(e,t,n))}};function m1(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Lu(r,n)||!Lu(s,i):!0}function CT(t,e,r){var n=!1,s=so,i=e.contextType;return typeof i=="object"&&i!==null?i=_n(i):(s=Wr(e)?oa:Cr.current,n=e.contextTypes,i=(n=n!=null)?Gl(t,s):so),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=np,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function p1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&np.enqueueReplaceState(e,e.state,null)}function iy(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},lx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=_n(i):(i=Wr(e)?oa:Cr.current,s.context=Gl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sy(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&np.enqueueReplaceState(s,s.state,null),lm(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wl(t,e){try{var r="",n=e;do r+=Ik(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function oy(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var nD=typeof WeakMap=="function"?WeakMap:Map;function NT(t,e,r){r=$s(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){fm||(fm=!0,gy=n),oy(t,e)},r}function _T(t,e,r){r=$s(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){oy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){oy(t,e),typeof n!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function g1(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new nD;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=yD.bind(null,t,e,r),e.then(t,t))}function y1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v1(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=$s(-1,1),e.tag=2,Wi(r,e,1))),r.lanes|=1),t)}var sD=ii.ReactCurrentOwner,$r=!1;function kr(t,e,r,n){e.child=t===null?eT(e,null,r,n):zl(e,t.child,r,n)}function x1(t,e,r,n,s){r=r.render;var i=e.ref;return El(e,s),n=fx(t,e,r,n,i,s),r=mx(),t!==null&&!$r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Js(t,e,s)):(_t&&r&&tx(e),e.flags|=1,kr(t,e,n,s),e.child)}function w1(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Nx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,TT(t,e,i,n,s)):(t=Ef(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Lu,r(a,n)&&t.ref===e.ref)return Js(t,e,s)}return e.flags|=1,t=Ki(i,n),t.ref=e.ref,t.return=e,e.child=t}function TT(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Lu(i,n)&&t.ref===e.ref)if($r=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&($r=!0);else return e.lanes=t.lanes,Js(t,e,s)}return ay(t,e,r,n,s)}function AT(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(pl,tn),tn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(pl,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,pt(pl,tn),tn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,pt(pl,tn),tn|=n;return kr(t,e,s,r),e.child}function ST(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ay(t,e,r,n,s){var i=Wr(r)?oa:Cr.current;return i=Gl(e,i),El(e,s),r=fx(t,e,r,n,i,s),n=mx(),t!==null&&!$r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Js(t,e,s)):(_t&&n&&tx(e),e.flags|=1,kr(t,e,r,s),e.child)}function b1(t,e,r,n,s){if(Wr(r)){var i=!0;nm(e)}else i=!1;if(El(e,s),e.stateNode===null)xf(t,e),CT(e,r,n),iy(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=_n(u):(u=Wr(r)?oa:Cr.current,u=Gl(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&p1(e,a,n,u),Ti=!1;var m=e.memoizedState;a.state=m,lm(e,n,a,s),c=e.memoizedState,l!==n||m!==c||Hr.current||Ti?(typeof d=="function"&&(sy(e,r,d,n),c=e.memoizedState),(l=Ti||m1(e,r,l,n,m,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,rT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ln(e.type,l),a.props=u,f=e.pendingProps,m=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=_n(c):(c=Wr(r)?oa:Cr.current,c=Gl(e,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&p1(e,a,n,c),Ti=!1,m=e.memoizedState,a.state=m,lm(e,n,a,s);var x=e.memoizedState;l!==f||m!==x||Hr.current||Ti?(typeof g=="function"&&(sy(e,r,g,n),x=e.memoizedState),(u=Ti||m1(e,r,u,n,m,x,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),a.props=n,a.state=x,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return ly(t,e,r,n,i,s)}function ly(t,e,r,n,s,i){ST(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&o1(e,r,!1),Js(t,e,i);n=e.stateNode,sD.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=zl(e,t.child,null,i),e.child=zl(e,null,l,i)):kr(t,e,l,i),e.memoizedState=n.state,s&&o1(e,r,!0),e.child}function RT(t){var e=t.stateNode;e.pendingContext?i1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i1(t,e.context,!1),cx(t,e.containerInfo)}function E1(t,e,r,n,s){return $l(),nx(s),e.flags|=256,kr(t,e,r,n),e.child}var cy={dehydrated:null,treeContext:null,retryLane:0};function uy(t){return{baseLanes:t,cachePool:null,transitions:null}}function IT(t,e,r){var n=e.pendingProps,s=Tt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pt(Tt,s&1),t===null)return ry(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=op(a,n,0,null),t=ta(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uy(r),e.memoizedState=cy,t):yx(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return iD(t,e,a,n,l,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Ki(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ki(l,i):(i=ta(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?uy(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=cy,n}return i=t.child,t=i.sibling,n=Ki(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function yx(t,e){return e=op({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qh(t,e,r,n){return n!==null&&nx(n),zl(e,t.child,null,r),t=yx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iD(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=Hg(Error(ce(422))),qh(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=op({mode:"visible",children:n.children},s,0,null),i=ta(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&zl(e,t.child,null,a),e.child.memoizedState=uy(a),e.memoizedState=cy,i);if(!(e.mode&1))return qh(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ce(419)),n=Hg(i,n,void 0),qh(t,e,a,n)}if(l=(a&t.childLanes)!==0,$r||l){if(n=sr,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ks(t,s),zn(n,t,s,-1))}return Cx(),n=Hg(Error(ce(421))),qh(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=vD.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,nn=Hi(s.nextSibling),on=e,_t=!0,Un=null,t!==null&&(yn[vn++]=Bs,yn[vn++]=Us,yn[vn++]=aa,Bs=t.id,Us=t.overflow,aa=e),e=yx(e,n.children),e.flags|=4096,e)}function C1(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ny(t.return,e,r)}function Wg(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function jT(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(kr(t,e,n.children,r),n=Tt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&C1(t,r,e);else if(t.tag===19)C1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(pt(Tt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&cm(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Wg(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&cm(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Wg(e,!0,r,null,i);break;case"together":Wg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Js(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ca|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,r=Ki(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ki(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function oD(t,e,r){switch(e.tag){case 3:RT(e),$l();break;case 5:nT(e);break;case 1:Wr(e.type)&&nm(e);break;case 4:cx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;pt(om,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(pt(Tt,Tt.current&1),e.flags|=128,null):r&e.child.childLanes?IT(t,e,r):(pt(Tt,Tt.current&1),t=Js(t,e,r),t!==null?t.sibling:null);pt(Tt,Tt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return jT(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pt(Tt,Tt.current),n)break;return null;case 22:case 23:return e.lanes=0,AT(t,e,r)}return Js(t,e,r)}var PT,dy,kT,MT;PT=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};dy=function(){};kT=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Qo(us.current);var i=null;switch(r){case"input":s=k0(t,s),n=k0(t,n),i=[];break;case"select":s=St({},s,{value:void 0}),n=St({},n,{value:void 0}),i=[];break;case"textarea":s=O0(t,s),n=O0(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=tm)}F0(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Iu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Iu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&vt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};MT=function(t,e,r,n){r!==n&&(e.flags|=4)};function zc(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function yr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function aD(t,e,r){var n=e.pendingProps;switch(rx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(e),null;case 1:return Wr(e.type)&&rm(),yr(e),null;case 3:return n=e.stateNode,Hl(),xt(Hr),xt(Cr),dx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Bh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&(xy(Un),Un=null))),dy(t,e),yr(e),null;case 5:ux(e);var s=Qo(qu.current);if(r=e.type,t!==null&&e.stateNode!=null)kT(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ce(166));return yr(e),null}if(t=Qo(us.current),Bh(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[as]=e,n[Bu]=i,t=(e.mode&1)!==0,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(s=0;s<eu.length;s++)vt(eu[s],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":Pb(n,i),vt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},vt("invalid",n);break;case"textarea":Mb(n,i),vt("invalid",n)}F0(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Vh(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Vh(n.textContent,l,t),s=["children",""+l]):Iu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&vt("scroll",n)}switch(r){case"input":jh(n),kb(n,i,!0);break;case"textarea":jh(n),Db(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=tm)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=l_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[as]=e,t[Bu]=n,PT(t,e,!1,!1),e.stateNode=t;e:{switch(a=V0(r,n),r){case"dialog":vt("cancel",t),vt("close",t),s=n;break;case"iframe":case"object":case"embed":vt("load",t),s=n;break;case"video":case"audio":for(s=0;s<eu.length;s++)vt(eu[s],t);s=n;break;case"source":vt("error",t),s=n;break;case"img":case"image":case"link":vt("error",t),vt("load",t),s=n;break;case"details":vt("toggle",t),s=n;break;case"input":Pb(t,n),s=k0(t,n),vt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=St({},n,{value:void 0}),vt("invalid",t);break;case"textarea":Mb(t,n),s=O0(t,n),vt("invalid",t);break;default:s=n}F0(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?d_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&c_(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ju(t,c):typeof c=="number"&&ju(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Iu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&vt("scroll",t):c!=null&&Uv(t,i,c,a))}switch(r){case"input":jh(t),kb(t,n,!1);break;case"textarea":jh(t),Db(t);break;case"option":n.value!=null&&t.setAttribute("value",""+no(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?vl(t,!!n.multiple,i,!1):n.defaultValue!=null&&vl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=tm)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yr(e),null;case 6:if(t&&e.stateNode!=null)MT(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ce(166));if(r=Qo(qu.current),Qo(us.current),Bh(e)){if(n=e.stateNode,r=e.memoizedProps,n[as]=e,(i=n.nodeValue!==r)&&(t=on,t!==null))switch(t.tag){case 3:Vh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vh(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[as]=e,e.stateNode=n}return yr(e),null;case 13:if(xt(Tt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&nn!==null&&e.mode&1&&!(e.flags&128))X_(),$l(),e.flags|=98560,i=!1;else if(i=Bh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[as]=e}else $l(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yr(e),i=!1}else Un!==null&&(xy(Un),Un=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Tt.current&1?Yt===0&&(Yt=3):Cx())),e.updateQueue!==null&&(e.flags|=4),yr(e),null);case 4:return Hl(),dy(t,e),t===null&&Fu(e.stateNode.containerInfo),yr(e),null;case 10:return ox(e.type._context),yr(e),null;case 17:return Wr(e.type)&&rm(),yr(e),null;case 19:if(xt(Tt),i=e.memoizedState,i===null)return yr(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)zc(i,!1);else{if(Yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=cm(t),a!==null){for(e.flags|=128,zc(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return pt(Tt,Tt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ot()>Ql&&(e.flags|=128,n=!0,zc(i,!1),e.lanes=4194304)}else{if(!n)if(t=cm(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),zc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!_t)return yr(e),null}else 2*Ot()-i.renderingStartTime>Ql&&r!==1073741824&&(e.flags|=128,n=!0,zc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ot(),e.sibling=null,r=Tt.current,pt(Tt,n?r&1|2:r&1),e):(yr(e),null);case 22:case 23:return Ex(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?tn&1073741824&&(yr(e),e.subtreeFlags&6&&(e.flags|=8192)):yr(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function lD(t,e){switch(rx(e),e.tag){case 1:return Wr(e.type)&&rm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hl(),xt(Hr),xt(Cr),dx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ux(e),null;case 13:if(xt(Tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));$l()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(Tt),null;case 4:return Hl(),null;case 10:return ox(e.type._context),null;case 22:case 23:return Ex(),null;case 24:return null;default:return null}}var Gh=!1,br=!1,cD=typeof WeakSet=="function"?WeakSet:Set,be=null;function ml(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){kt(t,e,n)}else r.current=null}function hy(t,e,r){try{r()}catch(n){kt(t,e,n)}}var N1=!1;function uD(t,e){if(Y0=Xf,t=V_(),ex(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==i||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===r&&++u===s&&(l=a),m===i&&++d===n&&(c=a),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(K0={focusedElem:t,selectionRange:r},Xf=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,b=x.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?p:Ln(e.type,p),b);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(I){kt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return x=N1,N1=!1,x}function vu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hy(e,r,i)}s=s.next}while(s!==n)}}function sp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function fy(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function DT(t){var e=t.alternate;e!==null&&(t.alternate=null,DT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[as],delete e[Bu],delete e[Z0],delete e[HM],delete e[WM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OT(t){return t.tag===5||t.tag===3||t.tag===4}function _1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function my(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=tm));else if(n!==4&&(t=t.child,t!==null))for(my(t,e,r),t=t.sibling;t!==null;)my(t,e,r),t=t.sibling}function py(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(py(t,e,r),t=t.sibling;t!==null;)py(t,e,r),t=t.sibling}var or=null,Bn=!1;function vi(t,e,r){for(r=r.child;r!==null;)LT(t,e,r),r=r.sibling}function LT(t,e,r){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Km,r)}catch{}switch(r.tag){case 5:br||ml(r,e);case 6:var n=or,s=Bn;or=null,vi(t,e,r),or=n,Bn=s,or!==null&&(Bn?(t=or,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):or.removeChild(r.stateNode));break;case 18:or!==null&&(Bn?(t=or,r=r.stateNode,t.nodeType===8?Bg(t.parentNode,r):t.nodeType===1&&Bg(t,r),Du(t)):Bg(or,r.stateNode));break;case 4:n=or,s=Bn,or=r.stateNode.containerInfo,Bn=!0,vi(t,e,r),or=n,Bn=s;break;case 0:case 11:case 14:case 15:if(!br&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&hy(r,e,a),s=s.next}while(s!==n)}vi(t,e,r);break;case 1:if(!br&&(ml(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){kt(r,e,l)}vi(t,e,r);break;case 21:vi(t,e,r);break;case 22:r.mode&1?(br=(n=br)||r.memoizedState!==null,vi(t,e,r),br=n):vi(t,e,r);break;default:vi(t,e,r)}}function T1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new cD),e.forEach(function(n){var s=xD.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Dn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:or=l.stateNode,Bn=!1;break e;case 3:or=l.stateNode.containerInfo,Bn=!0;break e;case 4:or=l.stateNode.containerInfo,Bn=!0;break e}l=l.return}if(or===null)throw Error(ce(160));LT(i,a,s),or=null,Bn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){kt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FT(e,t),e=e.sibling}function FT(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),es(t),n&4){try{vu(3,t,t.return),sp(3,t)}catch(p){kt(t,t.return,p)}try{vu(5,t,t.return)}catch(p){kt(t,t.return,p)}}break;case 1:Dn(e,t),es(t),n&512&&r!==null&&ml(r,r.return);break;case 5:if(Dn(e,t),es(t),n&512&&r!==null&&ml(r,r.return),t.flags&32){var s=t.stateNode;try{ju(s,"")}catch(p){kt(t,t.return,p)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&o_(s,i),V0(l,a);var u=V0(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?d_(s,f):d==="dangerouslySetInnerHTML"?c_(s,f):d==="children"?ju(s,f):Uv(s,d,f,u)}switch(l){case"input":M0(s,i);break;case"textarea":a_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?vl(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?vl(s,!!i.multiple,i.defaultValue,!0):vl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bu]=i}catch(p){kt(t,t.return,p)}}break;case 6:if(Dn(e,t),es(t),n&4){if(t.stateNode===null)throw Error(ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){kt(t,t.return,p)}}break;case 3:if(Dn(e,t),es(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Du(e.containerInfo)}catch(p){kt(t,t.return,p)}break;case 4:Dn(e,t),es(t);break;case 13:Dn(e,t),es(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wx=Ot())),n&4&&T1(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(br=(u=br)||d,Dn(e,t),br=u):Dn(e,t),es(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(f=be=d;be!==null;){switch(m=be,g=m.child,m.tag){case 0:case 11:case 14:case 15:vu(4,m,m.return);break;case 1:ml(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(p){kt(n,r,p)}}break;case 5:ml(m,m.return);break;case 22:if(m.memoizedState!==null){S1(f);continue}}g!==null?(g.return=m,be=g):S1(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=u_("display",a))}catch(p){kt(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){kt(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Dn(e,t),es(t),n&4&&T1(t);break;case 21:break;default:Dn(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(OT(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ju(s,""),n.flags&=-33);var i=_1(t);py(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=_1(t);my(t,l,a);break;default:throw Error(ce(161))}}catch(c){kt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dD(t,e,r){be=t,VT(t)}function VT(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var s=be,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Gh;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||br;l=Gh;var u=br;if(Gh=a,(br=c)&&!u)for(be=s;be!==null;)a=be,c=a.child,a.tag===22&&a.memoizedState!==null?R1(s):c!==null?(c.return=a,be=c):R1(s);for(;i!==null;)be=i,VT(i),i=i.sibling;be=s,Gh=l,br=u}A1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,be=i):A1(t)}}function A1(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:br||sp(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!br)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ln(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&d1(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}d1(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Du(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}br||e.flags&512&&fy(e)}catch(m){kt(e,e.return,m)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function S1(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function R1(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{sp(4,e)}catch(c){kt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){kt(e,s,c)}}var i=e.return;try{fy(e)}catch(c){kt(e,i,c)}break;case 5:var a=e.return;try{fy(e)}catch(c){kt(e,a,c)}}}catch(c){kt(e,e.return,c)}if(e===t){be=null;break}var l=e.sibling;if(l!==null){l.return=e.return,be=l;break}be=e.return}}var hD=Math.ceil,hm=ii.ReactCurrentDispatcher,vx=ii.ReactCurrentOwner,En=ii.ReactCurrentBatchConfig,Ze=0,sr=null,Ut=null,cr=0,tn=0,pl=bo(0),Yt=0,Hu=null,ca=0,ip=0,xx=0,xu=null,qr=null,wx=0,Ql=1/0,Fs=null,fm=!1,gy=null,Qi=null,$h=!1,Bi=null,mm=0,wu=0,yy=null,wf=-1,bf=0;function Or(){return Ze&6?Ot():wf!==-1?wf:wf=Ot()}function Yi(t){return t.mode&1?Ze&2&&cr!==0?cr&-cr:YM.transition!==null?(bf===0&&(bf=C_()),bf):(t=ct,t!==0||(t=window.event,t=t===void 0?16:I_(t.type)),t):1}function zn(t,e,r,n){if(50<wu)throw wu=0,yy=null,Error(ce(185));vd(t,r,n),(!(Ze&2)||t!==sr)&&(t===sr&&(!(Ze&2)&&(ip|=r),Yt===4&&Ri(t,cr)),Qr(t,n),r===1&&Ze===0&&!(e.mode&1)&&(Ql=Ot()+500,tp&&Eo()))}function Qr(t,e){var r=t.callbackNode;Yk(t,e);var n=Jf(t,t===sr?cr:0);if(n===0)r!==null&&Fb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Fb(r),e===1)t.tag===0?QM(I1.bind(null,t)):Y_(I1.bind(null,t)),$M(function(){!(Ze&6)&&Eo()}),r=null;else{switch(N_(n)){case 1:r=Hv;break;case 4:r=b_;break;case 16:r=Kf;break;case 536870912:r=E_;break;default:r=Kf}r=WT(r,BT.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function BT(t,e){if(wf=-1,bf=0,Ze&6)throw Error(ce(327));var r=t.callbackNode;if(Cl()&&t.callbackNode!==r)return null;var n=Jf(t,t===sr?cr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=pm(t,n);else{e=n;var s=Ze;Ze|=2;var i=qT();(sr!==t||cr!==e)&&(Fs=null,Ql=Ot()+500,ea(t,e));do try{pD();break}catch(l){UT(t,l)}while(!0);ix(),hm.current=i,Ze=s,Ut!==null?e=0:(sr=null,cr=0,e=Yt)}if(e!==0){if(e===2&&(s=$0(t),s!==0&&(n=s,e=vy(t,s))),e===1)throw r=Hu,ea(t,0),Ri(t,n),Qr(t,Ot()),r;if(e===6)Ri(t,n);else{if(s=t.current.alternate,!(n&30)&&!fD(s)&&(e=pm(t,n),e===2&&(i=$0(t),i!==0&&(n=i,e=vy(t,i))),e===1))throw r=Hu,ea(t,0),Ri(t,n),Qr(t,Ot()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ce(345));case 2:$o(t,qr,Fs);break;case 3:if(Ri(t,n),(n&130023424)===n&&(e=wx+500-Ot(),10<e)){if(Jf(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Or(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=X0($o.bind(null,t,qr,Fs),e);break}$o(t,qr,Fs);break;case 4:if(Ri(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-$n(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=Ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hD(n/1960))-n,10<n){t.timeoutHandle=X0($o.bind(null,t,qr,Fs),n);break}$o(t,qr,Fs);break;case 5:$o(t,qr,Fs);break;default:throw Error(ce(329))}}}return Qr(t,Ot()),t.callbackNode===r?BT.bind(null,t):null}function vy(t,e){var r=xu;return t.current.memoizedState.isDehydrated&&(ea(t,e).flags|=256),t=pm(t,e),t!==2&&(e=qr,qr=r,e!==null&&xy(e)),t}function xy(t){qr===null?qr=t:qr.push.apply(qr,t)}function fD(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Wn(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ri(t,e){for(e&=~xx,e&=~ip,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-$n(e),n=1<<r;t[r]=-1,e&=~n}}function I1(t){if(Ze&6)throw Error(ce(327));Cl();var e=Jf(t,0);if(!(e&1))return Qr(t,Ot()),null;var r=pm(t,e);if(t.tag!==0&&r===2){var n=$0(t);n!==0&&(e=n,r=vy(t,n))}if(r===1)throw r=Hu,ea(t,0),Ri(t,e),Qr(t,Ot()),r;if(r===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$o(t,qr,Fs),Qr(t,Ot()),null}function bx(t,e){var r=Ze;Ze|=1;try{return t(e)}finally{Ze=r,Ze===0&&(Ql=Ot()+500,tp&&Eo())}}function ua(t){Bi!==null&&Bi.tag===0&&!(Ze&6)&&Cl();var e=Ze;Ze|=1;var r=En.transition,n=ct;try{if(En.transition=null,ct=1,t)return t()}finally{ct=n,En.transition=r,Ze=e,!(Ze&6)&&Eo()}}function Ex(){tn=pl.current,xt(pl)}function ea(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,GM(r)),Ut!==null)for(r=Ut.return;r!==null;){var n=r;switch(rx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&rm();break;case 3:Hl(),xt(Hr),xt(Cr),dx();break;case 5:ux(n);break;case 4:Hl();break;case 13:xt(Tt);break;case 19:xt(Tt);break;case 10:ox(n.type._context);break;case 22:case 23:Ex()}r=r.return}if(sr=t,Ut=t=Ki(t.current,null),cr=tn=e,Yt=0,Hu=null,xx=ip=ca=0,qr=xu=null,Wo!==null){for(e=0;e<Wo.length;e++)if(r=Wo[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Wo=null}return t}function UT(t,e){do{var r=Ut;try{if(ix(),yf.current=dm,um){for(var n=At.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}um=!1}if(la=0,rr=Qt=At=null,yu=!1,Gu=0,vx.current=null,r===null||r.return===null){Yt=1,Hu=e,Ut=null;break}e:{var i=t,a=r.return,l=r,c=e;if(e=cr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=y1(a);if(g!==null){g.flags&=-257,v1(g,a,l,i,e),g.mode&1&&g1(i,u,e),e=g,c=u;var x=e.updateQueue;if(x===null){var p=new Set;p.add(c),e.updateQueue=p}else x.add(c);break e}else{if(!(e&1)){g1(i,u,e),Cx();break e}c=Error(ce(426))}}else if(_t&&l.mode&1){var b=y1(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),v1(b,a,l,i,e),nx(Wl(c,l));break e}}i=c=Wl(c,l),Yt!==4&&(Yt=2),xu===null?xu=[i]:xu.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=NT(i,c,e);u1(i,E);break e;case 1:l=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Qi===null||!Qi.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=_T(i,l,e);u1(i,I);break e}}i=i.return}while(i!==null)}$T(r)}catch(j){e=j,Ut===r&&r!==null&&(Ut=r=r.return);continue}break}while(!0)}function qT(){var t=hm.current;return hm.current=dm,t===null?dm:t}function Cx(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),sr===null||!(ca&268435455)&&!(ip&268435455)||Ri(sr,cr)}function pm(t,e){var r=Ze;Ze|=2;var n=qT();(sr!==t||cr!==e)&&(Fs=null,ea(t,e));do try{mD();break}catch(s){UT(t,s)}while(!0);if(ix(),Ze=r,hm.current=n,Ut!==null)throw Error(ce(261));return sr=null,cr=0,Yt}function mD(){for(;Ut!==null;)GT(Ut)}function pD(){for(;Ut!==null&&!Bk();)GT(Ut)}function GT(t){var e=HT(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?$T(t):Ut=e,vx.current=null}function $T(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=lD(r,e),r!==null){r.flags&=32767,Ut=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,Ut=null;return}}else if(r=aD(r,e,tn),r!==null){Ut=r;return}if(e=e.sibling,e!==null){Ut=e;return}Ut=e=t}while(e!==null);Yt===0&&(Yt=5)}function $o(t,e,r){var n=ct,s=En.transition;try{En.transition=null,ct=1,gD(t,e,r,n)}finally{En.transition=s,ct=n}return null}function gD(t,e,r,n){do Cl();while(Bi!==null);if(Ze&6)throw Error(ce(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Kk(t,i),t===sr&&(Ut=sr=null,cr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$h||($h=!0,WT(Kf,function(){return Cl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=En.transition,En.transition=null;var a=ct;ct=1;var l=Ze;Ze|=4,vx.current=null,uD(t,r),FT(r,t),OM(K0),Xf=!!Y0,K0=Y0=null,t.current=r,dD(r),Uk(),Ze=l,ct=a,En.transition=i}else t.current=r;if($h&&($h=!1,Bi=t,mm=s),i=t.pendingLanes,i===0&&(Qi=null),$k(r.stateNode),Qr(t,Ot()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(fm)throw fm=!1,t=gy,gy=null,t;return mm&1&&t.tag!==0&&Cl(),i=t.pendingLanes,i&1?t===yy?wu++:(wu=0,yy=t):wu=0,Eo(),null}function Cl(){if(Bi!==null){var t=N_(mm),e=En.transition,r=ct;try{if(En.transition=null,ct=16>t?16:t,Bi===null)var n=!1;else{if(t=Bi,Bi=null,mm=0,Ze&6)throw Error(ce(331));var s=Ze;for(Ze|=4,be=t.current;be!==null;){var i=be,a=i.child;if(be.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(be=u;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:vu(8,d,i)}var f=d.child;if(f!==null)f.return=d,be=f;else for(;be!==null;){d=be;var m=d.sibling,g=d.return;if(DT(d),d===u){be=null;break}if(m!==null){m.return=g,be=m;break}be=g}}}var x=i.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}be=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,be=a;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vu(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,be=E;break e}be=i.return}}var w=t.current;for(be=w;be!==null;){a=be;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,be=C;else e:for(a=w;be!==null;){if(l=be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sp(9,l)}}catch(j){kt(l,l.return,j)}if(l===a){be=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,be=I;break e}be=l.return}}if(Ze=s,Eo(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Km,t)}catch{}n=!0}return n}finally{ct=r,En.transition=e}}return!1}function j1(t,e,r){e=Wl(r,e),e=NT(t,e,1),t=Wi(t,e,1),e=Or(),t!==null&&(vd(t,1,e),Qr(t,e))}function kt(t,e,r){if(t.tag===3)j1(t,t,r);else for(;e!==null;){if(e.tag===3){j1(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qi===null||!Qi.has(n))){t=Wl(r,t),t=_T(e,t,1),e=Wi(e,t,1),t=Or(),e!==null&&(vd(e,1,t),Qr(e,t));break}}e=e.return}}function yD(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Or(),t.pingedLanes|=t.suspendedLanes&r,sr===t&&(cr&r)===r&&(Yt===4||Yt===3&&(cr&130023424)===cr&&500>Ot()-wx?ea(t,0):xx|=r),Qr(t,e)}function zT(t,e){e===0&&(t.mode&1?(e=Mh,Mh<<=1,!(Mh&130023424)&&(Mh=4194304)):e=1);var r=Or();t=Ks(t,e),t!==null&&(vd(t,e,r),Qr(t,r))}function vD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),zT(t,r)}function xD(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(e),zT(t,r)}var HT;HT=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Hr.current)$r=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return $r=!1,oD(t,e,r);$r=!!(t.flags&131072)}else $r=!1,_t&&e.flags&1048576&&K_(e,im,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;xf(t,e),t=e.pendingProps;var s=Gl(e,Cr.current);El(e,r),s=fx(null,e,n,t,s,r);var i=mx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wr(n)?(i=!0,nm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lx(e),s.updater=np,e.stateNode=s,s._reactInternals=e,iy(e,n,t,r),e=ly(null,e,n,!0,i,r)):(e.tag=0,_t&&i&&tx(e),kr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(xf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=bD(n),t=Ln(n,t),s){case 0:e=ay(null,e,n,t,r);break e;case 1:e=b1(null,e,n,t,r);break e;case 11:e=x1(null,e,n,t,r);break e;case 14:e=w1(null,e,n,Ln(n.type,t),r);break e}throw Error(ce(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ln(n,s),ay(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ln(n,s),b1(t,e,n,s,r);case 3:e:{if(RT(e),t===null)throw Error(ce(387));n=e.pendingProps,i=e.memoizedState,s=i.element,rT(t,e),lm(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Wl(Error(ce(423)),e),e=E1(t,e,n,r,s);break e}else if(n!==s){s=Wl(Error(ce(424)),e),e=E1(t,e,n,r,s);break e}else for(nn=Hi(e.stateNode.containerInfo.firstChild),on=e,_t=!0,Un=null,r=eT(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if($l(),n===s){e=Js(t,e,r);break e}kr(t,e,n,r)}e=e.child}return e;case 5:return nT(e),t===null&&ry(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,J0(n,s)?a=null:i!==null&&J0(n,i)&&(e.flags|=32),ST(t,e),kr(t,e,a,r),e.child;case 6:return t===null&&ry(e),null;case 13:return IT(t,e,r);case 4:return cx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=zl(e,null,n,r):kr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ln(n,s),x1(t,e,n,s,r);case 7:return kr(t,e,e.pendingProps,r),e.child;case 8:return kr(t,e,e.pendingProps.children,r),e.child;case 12:return kr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,pt(om,n._currentValue),n._currentValue=a,i!==null)if(Wn(i.value,a)){if(i.children===s.children&&!Hr.current){e=Js(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=$s(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ny(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ce(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),ny(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}kr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,El(e,r),s=_n(s),n=n(s),e.flags|=1,kr(t,e,n,r),e.child;case 14:return n=e.type,s=Ln(n,e.pendingProps),s=Ln(n.type,s),w1(t,e,n,s,r);case 15:return TT(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ln(n,s),xf(t,e),e.tag=1,Wr(n)?(t=!0,nm(e)):t=!1,El(e,r),CT(e,n,s),iy(e,n,s,r),ly(null,e,n,!0,t,r);case 19:return jT(t,e,r);case 22:return AT(t,e,r)}throw Error(ce(156,e.tag))};function WT(t,e){return w_(t,e)}function wD(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,r,n){return new wD(t,e,r,n)}function Nx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bD(t){if(typeof t=="function")return Nx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gv)return 11;if(t===$v)return 14}return 2}function Ki(t,e){var r=t.alternate;return r===null?(r=bn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ef(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")Nx(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case il:return ta(r.children,s,i,e);case qv:a=8,s|=8;break;case R0:return t=bn(12,r,e,s|2),t.elementType=R0,t.lanes=i,t;case I0:return t=bn(13,r,e,s),t.elementType=I0,t.lanes=i,t;case j0:return t=bn(19,r,e,s),t.elementType=j0,t.lanes=i,t;case n_:return op(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case t_:a=10;break e;case r_:a=9;break e;case Gv:a=11;break e;case $v:a=14;break e;case _i:a=16,n=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=bn(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function ta(t,e,r,n){return t=bn(7,t,n,e),t.lanes=r,t}function op(t,e,r,n){return t=bn(22,t,n,e),t.elementType=n_,t.lanes=r,t.stateNode={isHidden:!1},t}function Qg(t,e,r){return t=bn(6,t,null,e),t.lanes=r,t}function Yg(t,e,r){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ED(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rg(0),this.expirationTimes=Rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _x(t,e,r,n,s,i,a,l,c){return t=new ED(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},lx(i),t}function CD(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function QT(t){if(!t)return so;t=t._reactInternals;e:{if(Ea(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var r=t.type;if(Wr(r))return Q_(t,r,e)}return e}function YT(t,e,r,n,s,i,a,l,c){return t=_x(r,n,!0,t,s,i,a,l,c),t.context=QT(null),r=t.current,n=Or(),s=Yi(r),i=$s(n,s),i.callback=e??null,Wi(r,i,s),t.current.lanes=s,vd(t,s,n),Qr(t,n),t}function ap(t,e,r,n){var s=e.current,i=Or(),a=Yi(s);return r=QT(r),e.context===null?e.context=r:e.pendingContext=r,e=$s(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Wi(s,e,a),t!==null&&(zn(t,s,a,i),gf(t,s,a)),a}function gm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Tx(t,e){P1(t,e),(t=t.alternate)&&P1(t,e)}function ND(){return null}var KT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ax(t){this._internalRoot=t}lp.prototype.render=Ax.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));ap(t,e,null,null)};lp.prototype.unmount=Ax.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ua(function(){ap(null,t,null,null)}),e[Ys]=null}};function lp(t){this._internalRoot=t}lp.prototype.unstable_scheduleHydration=function(t){if(t){var e=A_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Si.length&&e!==0&&e<Si[r].priority;r++);Si.splice(r,0,t),r===0&&R_(t)}};function Sx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k1(){}function _D(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=gm(a);i.call(u)}}var a=YT(e,n,t,0,null,!1,!1,"",k1);return t._reactRootContainer=a,t[Ys]=a.current,Fu(t.nodeType===8?t.parentNode:t),ua(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=gm(c);l.call(u)}}var c=_x(t,0,!1,null,null,!1,!1,"",k1);return t._reactRootContainer=c,t[Ys]=c.current,Fu(t.nodeType===8?t.parentNode:t),ua(function(){ap(e,c,r,n)}),c}function up(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=gm(a);l.call(c)}}ap(e,a,t,s)}else a=_D(r,e,t,s,n);return gm(a)}__=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Zc(e.pendingLanes);r!==0&&(Wv(e,r|1),Qr(e,Ot()),!(Ze&6)&&(Ql=Ot()+500,Eo()))}break;case 13:ua(function(){var n=Ks(t,1);if(n!==null){var s=Or();zn(n,t,1,s)}}),Tx(t,1)}};Qv=function(t){if(t.tag===13){var e=Ks(t,134217728);if(e!==null){var r=Or();zn(e,t,134217728,r)}Tx(t,134217728)}};T_=function(t){if(t.tag===13){var e=Yi(t),r=Ks(t,e);if(r!==null){var n=Or();zn(r,t,e,n)}Tx(t,e)}};A_=function(){return ct};S_=function(t,e){var r=ct;try{return ct=t,e()}finally{ct=r}};U0=function(t,e,r){switch(e){case"input":if(M0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=ep(n);if(!s)throw Error(ce(90));i_(n),M0(n,s)}}}break;case"textarea":a_(t,r);break;case"select":e=r.value,e!=null&&vl(t,!!r.multiple,e,!1)}};m_=bx;p_=ua;var TD={usingClientEntryPoint:!1,Events:[wd,cl,ep,h_,f_,bx]},Hc={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AD={bundleType:Hc.bundleType,version:Hc.version,rendererPackageName:Hc.rendererPackageName,rendererConfig:Hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v_(t),t===null?null:t.stateNode},findFiberByHostInstance:Hc.findFiberByHostInstance||ND,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zh.isDisabled&&zh.supportsFiber)try{Km=zh.inject(AD),cs=zh}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TD;un.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sx(e))throw Error(ce(200));return CD(t,e,null,r)};un.createRoot=function(t,e){if(!Sx(t))throw Error(ce(299));var r=!1,n="",s=KT;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_x(t,1,!1,null,null,r,!1,n,s),t[Ys]=e.current,Fu(t.nodeType===8?t.parentNode:t),new Ax(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=v_(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return ua(t)};un.hydrate=function(t,e,r){if(!cp(e))throw Error(ce(200));return up(null,t,e,!0,r)};un.hydrateRoot=function(t,e,r){if(!Sx(t))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=KT;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=YT(e,null,t,1,r??null,s,!1,i,a),t[Ys]=e.current,Fu(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new lp(e)};un.render=function(t,e,r){if(!cp(e))throw Error(ce(200));return up(null,t,e,!1,r)};un.unmountComponentAtNode=function(t){if(!cp(t))throw Error(ce(40));return t._reactRootContainer?(ua(function(){up(null,null,t,!1,function(){t._reactRootContainer=null,t[Ys]=null})}),!0):!1};un.unstable_batchedUpdates=bx;un.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!cp(r))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return up(t,e,r,!1,n)};un.version="18.3.1-next-f1338f8080-20240426";function JT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JT)}catch(t){console.error(t)}}JT(),JN.exports=un;var Ca=JN.exports;const XT=Mv(Ca);var ZT,M1=Ca;ZT=M1.createRoot,M1.hydrateRoot;const SD=1,RD=1e6;let Kg=0;function ID(){return Kg=(Kg+1)%Number.MAX_SAFE_INTEGER,Kg.toString()}const Jg=new Map,D1=t=>{if(Jg.has(t))return;const e=setTimeout(()=>{Jg.delete(t),bu({type:"REMOVE_TOAST",toastId:t})},RD);Jg.set(t,e)},jD=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,SD)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?D1(r):t.toasts.forEach(n=>{D1(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Cf=[];let Nf={toasts:[]};function bu(t){Nf=jD(Nf,t),Cf.forEach(e=>{e(Nf)})}function Ye({...t}){const e=ID(),r=s=>bu({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>bu({type:"DISMISS_TOAST",toastId:e});return bu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function PD(){const[t,e]=y.useState(Nf);return y.useEffect(()=>(Cf.push(e),()=>{const r=Cf.indexOf(e);r>-1&&Cf.splice(r,1)}),[t]),{...t,toast:Ye,dismiss:r=>bu({type:"DISMISS_TOAST",toastId:r})}}function xe(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function kD(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Rx(...t){return e=>t.forEach(r=>kD(r,e))}function ut(...t){return y.useCallback(Rx(...t),t)}function MD(t,e=[]){let r=[];function n(i,a){const l=y.createContext(a),c=r.length;r=[...r,a];function u(f){const{scope:m,children:g,...x}=f,p=(m==null?void 0:m[t][c])||l,b=y.useMemo(()=>x,Object.values(x));return o.jsx(p.Provider,{value:b,children:g})}function d(f,m){const g=(m==null?void 0:m[t][c])||l,x=y.useContext(g);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const s=()=>{const i=r.map(a=>y.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,DD(s,...e)]}function DD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var da=y.forwardRef((t,e)=>{const{children:r,...n}=t,s=y.Children.toArray(r),i=s.find(OD);if(i){const a=i.props.children,l=s.map(c=>c===i?y.Children.count(a)>1?y.Children.only(null):y.isValidElement(a)?a.props.children:null:c);return o.jsx(wy,{...n,ref:e,children:y.isValidElement(a)?y.cloneElement(a,void 0,l):null})}return o.jsx(wy,{...n,ref:e,children:r})});da.displayName="Slot";var wy=y.forwardRef((t,e)=>{const{children:r,...n}=t;if(y.isValidElement(r)){const s=FD(r);return y.cloneElement(r,{...LD(n,r.props),ref:e?Rx(e,s):s})}return y.Children.count(r)>1?y.Children.only(null):null});wy.displayName="SlotClone";var eA=({children:t})=>o.jsx(o.Fragment,{children:t});function OD(t){return y.isValidElement(t)&&t.type===eA}function LD(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{i(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function FD(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Ed(t){const e=t+"CollectionProvider",[r,n]=MD(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:x,children:p}=g,b=J.useRef(null),E=J.useRef(new Map).current;return o.jsx(s,{scope:x,itemMap:E,collectionRef:b,children:p})};a.displayName=e;const l=t+"CollectionSlot",c=J.forwardRef((g,x)=>{const{scope:p,children:b}=g,E=i(l,p),w=ut(x,E.collectionRef);return o.jsx(da,{ref:w,children:b})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=J.forwardRef((g,x)=>{const{scope:p,children:b,...E}=g,w=J.useRef(null),C=ut(x,w),I=i(u,p);return J.useEffect(()=>(I.itemMap.set(w,{ref:w,...E}),()=>void I.itemMap.delete(w))),o.jsx(da,{[d]:"",ref:C,children:b})});f.displayName=u;function m(g){const x=i(t+"CollectionConsumer",g);return J.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const E=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((I,j)=>E.indexOf(I.ref.current)-E.indexOf(j.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:c,ItemSlot:f},m,n]}function Cd(t,e=[]){let r=[];function n(i,a){const l=y.createContext(a),c=r.length;r=[...r,a];const u=f=>{var E;const{scope:m,children:g,...x}=f,p=((E=m==null?void 0:m[t])==null?void 0:E[c])||l,b=y.useMemo(()=>x,Object.values(x));return o.jsx(p.Provider,{value:b,children:g})};u.displayName=i+"Provider";function d(f,m){var p;const g=((p=m==null?void 0:m[t])==null?void 0:p[c])||l,x=y.useContext(g);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=r.map(a=>y.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,VD(s,...e)]}function VD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var BD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$e=BD.reduce((t,e)=>{const r=y.forwardRef((n,s)=>{const{asChild:i,...a}=n,l=i?da:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Ix(t,e){t&&Ca.flushSync(()=>t.dispatchEvent(e))}function Nr(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function UD(t,e=globalThis==null?void 0:globalThis.document){const r=Nr(t);y.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var qD="DismissableLayer",by="dismissableLayer.update",GD="dismissableLayer.pointerDownOutside",$D="dismissableLayer.focusOutside",O1,tA=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nd=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=y.useContext(tA),[d,f]=y.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=y.useState({}),x=ut(e,R=>f(R)),p=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),E=p.indexOf(b),w=d?p.indexOf(d):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,I=w>=E,j=HD(R=>{const _=R.target,A=[...u.branches].some(k=>k.contains(_));!I||A||(s==null||s(R),a==null||a(R),R.defaultPrevented||l==null||l())},m),V=WD(R=>{const _=R.target;[...u.branches].some(k=>k.contains(_))||(i==null||i(R),a==null||a(R),R.defaultPrevented||l==null||l())},m);return UD(R=>{w===u.layers.size-1&&(n==null||n(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},m),y.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(O1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),L1(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=O1)}},[d,m,r,u]),y.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),L1())},[d,u]),y.useEffect(()=>{const R=()=>g({});return document.addEventListener(by,R),()=>document.removeEventListener(by,R)},[]),o.jsx($e.div,{...c,ref:x,style:{pointerEvents:C?I?"auto":"none":void 0,...t.style},onFocusCapture:xe(t.onFocusCapture,V.onFocusCapture),onBlurCapture:xe(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:xe(t.onPointerDownCapture,j.onPointerDownCapture)})});Nd.displayName=qD;var zD="DismissableLayerBranch",rA=y.forwardRef((t,e)=>{const r=y.useContext(tA),n=y.useRef(null),s=ut(e,n);return y.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),o.jsx($e.div,{...t,ref:s})});rA.displayName=zD;function HD(t,e=globalThis==null?void 0:globalThis.document){const r=Nr(t),n=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){nA(GD,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function WD(t,e=globalThis==null?void 0:globalThis.document){const r=Nr(t),n=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!n.current&&nA($D,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function L1(){const t=new CustomEvent(by);document.dispatchEvent(t)}function nA(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Ix(s,i):s.dispatchEvent(i)}var QD=Nd,YD=rA,_r=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},KD="Portal",dp=y.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,i]=y.useState(!1);_r(()=>i(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?XT.createPortal(o.jsx($e.div,{...n,ref:e}),a):null});dp.displayName=KD;function JD(t,e){return y.useReducer((r,n)=>e[r][n]??r,t)}var Na=t=>{const{present:e,children:r}=t,n=XD(e),s=typeof r=="function"?r({present:n.isPresent}):y.Children.only(r),i=ut(n.ref,ZD(s));return typeof r=="function"||n.isPresent?y.cloneElement(s,{ref:i}):null};Na.displayName="Presence";function XD(t){const[e,r]=y.useState(),n=y.useRef({}),s=y.useRef(t),i=y.useRef("none"),a=t?"mounted":"unmounted",[l,c]=JD(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Hh(n.current);i.current=l==="mounted"?u:"none"},[l]),_r(()=>{const u=n.current,d=s.current;if(d!==t){const m=i.current,g=Hh(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),_r(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=g=>{const p=Hh(n.current).includes(g.animationName);if(g.target===e&&p&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(i.current=Hh(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Hh(t){return(t==null?void 0:t.animationName)||"none"}function ZD(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Wu({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,s]=e3({defaultProp:e,onChange:r}),i=t!==void 0,a=i?t:n,l=Nr(r),c=y.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[a,c]}function e3({defaultProp:t,onChange:e}){const r=y.useState(t),[n]=r,s=y.useRef(n),i=Nr(e);return y.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var t3="VisuallyHidden",_d=y.forwardRef((t,e)=>o.jsx($e.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));_d.displayName=t3;var r3=_d,jx="ToastProvider",[Px,n3,s3]=Ed("Toast"),[sA,zW]=Cd("Toast",[s3]),[i3,hp]=sA(jx),iA=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=y.useState(null),[u,d]=y.useState(0),f=y.useRef(!1),m=y.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${jx}\`. Expected non-empty \`string\`.`),o.jsx(Px.Provider,{scope:e,children:o.jsx(i3,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:y.useCallback(()=>d(g=>g+1),[]),onToastRemove:y.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};iA.displayName=jx;var oA="ToastViewport",o3=["F8"],Ey="toast.viewportPause",Cy="toast.viewportResume",aA=y.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=o3,label:s="Notifications ({hotkey})",...i}=t,a=hp(oA,r),l=n3(r),c=y.useRef(null),u=y.useRef(null),d=y.useRef(null),f=y.useRef(null),m=ut(e,f,a.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=a.toastCount>0;y.useEffect(()=>{const b=E=>{var C;n.length!==0&&n.every(I=>E[I]||E.code===I)&&((C=f.current)==null||C.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),y.useEffect(()=>{const b=c.current,E=f.current;if(x&&b&&E){const w=()=>{if(!a.isClosePausedRef.current){const V=new CustomEvent(Ey);E.dispatchEvent(V),a.isClosePausedRef.current=!0}},C=()=>{if(a.isClosePausedRef.current){const V=new CustomEvent(Cy);E.dispatchEvent(V),a.isClosePausedRef.current=!1}},I=V=>{!b.contains(V.relatedTarget)&&C()},j=()=>{b.contains(document.activeElement)||C()};return b.addEventListener("focusin",w),b.addEventListener("focusout",I),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",j),window.addEventListener("blur",w),window.addEventListener("focus",C),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",I),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",j),window.removeEventListener("blur",w),window.removeEventListener("focus",C)}}},[x,a.isClosePausedRef]);const p=y.useCallback(({tabbingDirection:b})=>{const w=l().map(C=>{const I=C.ref.current,j=[I,...x3(I)];return b==="forwards"?j:j.reverse()});return(b==="forwards"?w.reverse():w).flat()},[l]);return y.useEffect(()=>{const b=f.current;if(b){const E=w=>{var j,V,R;const C=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!C){const _=document.activeElement,A=w.shiftKey;if(w.target===b&&A){(j=u.current)==null||j.focus();return}const M=p({tabbingDirection:A?"backwards":"forwards"}),P=M.findIndex(B=>B===_);Xg(M.slice(P+1))?w.preventDefault():A?(V=u.current)==null||V.focus():(R=d.current)==null||R.focus()}};return b.addEventListener("keydown",E),()=>b.removeEventListener("keydown",E)}},[l,p]),o.jsxs(YD,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&o.jsx(Ny,{ref:u,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"forwards"});Xg(b)}}),o.jsx(Px.Slot,{scope:r,children:o.jsx($e.ol,{tabIndex:-1,...i,ref:m})}),x&&o.jsx(Ny,{ref:d,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"backwards"});Xg(b)}})]})});aA.displayName=oA;var lA="ToastFocusProxy",Ny=y.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,i=hp(lA,r);return o.jsx(_d,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});Ny.displayName=lA;var fp="Toast",a3="toast.swipeStart",l3="toast.swipeMove",c3="toast.swipeCancel",u3="toast.swipeEnd",cA=y.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=Wu({prop:n,defaultProp:s,onChange:i});return o.jsx(Na,{present:r||l,children:o.jsx(f3,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:Nr(t.onPause),onResume:Nr(t.onResume),onSwipeStart:xe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xe(t.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:xe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xe(t.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});cA.displayName=fp;var[d3,h3]=sA(fp,{onClose(){}}),f3=y.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:g,...x}=t,p=hp(fp,r),[b,E]=y.useState(null),w=ut(e,B=>E(B)),C=y.useRef(null),I=y.useRef(null),j=s||p.duration,V=y.useRef(0),R=y.useRef(j),_=y.useRef(0),{onToastAdd:A,onToastRemove:k}=p,L=Nr(()=>{var z;(b==null?void 0:b.contains(document.activeElement))&&((z=p.viewport)==null||z.focus()),a()}),M=y.useCallback(B=>{!B||B===1/0||(window.clearTimeout(_.current),V.current=new Date().getTime(),_.current=window.setTimeout(L,B))},[L]);y.useEffect(()=>{const B=p.viewport;if(B){const z=()=>{M(R.current),u==null||u()},Q=()=>{const Z=new Date().getTime()-V.current;R.current=R.current-Z,window.clearTimeout(_.current),c==null||c()};return B.addEventListener(Ey,Q),B.addEventListener(Cy,z),()=>{B.removeEventListener(Ey,Q),B.removeEventListener(Cy,z)}}},[p.viewport,j,c,u,M]),y.useEffect(()=>{i&&!p.isClosePausedRef.current&&M(j)},[i,j,p.isClosePausedRef,M]),y.useEffect(()=>(A(),()=>k()),[A,k]);const P=y.useMemo(()=>b?gA(b):null,[b]);return p.viewport?o.jsxs(o.Fragment,{children:[P&&o.jsx(m3,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),o.jsx(d3,{scope:r,onClose:L,children:Ca.createPortal(o.jsx(Px.ItemSlot,{scope:r,children:o.jsx(QD,{asChild:!0,onEscapeKeyDown:xe(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||L(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx($e.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...x,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:xe(t.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:xe(t.onPointerDown,B=>{B.button===0&&(C.current={x:B.clientX,y:B.clientY})}),onPointerMove:xe(t.onPointerMove,B=>{if(!C.current)return;const z=B.clientX-C.current.x,Q=B.clientY-C.current.y,Z=!!I.current,U=["left","right"].includes(p.swipeDirection),H=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,ie=U?H(0,z):0,ne=U?0:H(0,Q),le=B.pointerType==="touch"?10:2,he={x:ie,y:ne},Ne={originalEvent:B,delta:he};Z?(I.current=he,Wh(l3,f,Ne,{discrete:!1})):F1(he,p.swipeDirection,le)?(I.current=he,Wh(a3,d,Ne,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(z)>le||Math.abs(Q)>le)&&(C.current=null)}),onPointerUp:xe(t.onPointerUp,B=>{const z=I.current,Q=B.target;if(Q.hasPointerCapture(B.pointerId)&&Q.releasePointerCapture(B.pointerId),I.current=null,C.current=null,z){const Z=B.currentTarget,U={originalEvent:B,delta:z};F1(z,p.swipeDirection,p.swipeThreshold)?Wh(u3,g,U,{discrete:!0}):Wh(c3,m,U,{discrete:!0}),Z.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),m3=t=>{const{__scopeToast:e,children:r,...n}=t,s=hp(fp,e),[i,a]=y.useState(!1),[l,c]=y.useState(!1);return y3(()=>a(!0)),y.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(dp,{asChild:!0,children:o.jsx(_d,{...n,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",r]})})})},p3="ToastTitle",uA=y.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return o.jsx($e.div,{...n,ref:e})});uA.displayName=p3;var g3="ToastDescription",dA=y.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return o.jsx($e.div,{...n,ref:e})});dA.displayName=g3;var hA="ToastAction",fA=y.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?o.jsx(pA,{altText:r,asChild:!0,children:o.jsx(kx,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${hA}\`. Expected non-empty \`string\`.`),null)});fA.displayName=hA;var mA="ToastClose",kx=y.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=h3(mA,r);return o.jsx(pA,{asChild:!0,children:o.jsx($e.button,{type:"button",...n,ref:e,onClick:xe(t.onClick,s.onClose)})})});kx.displayName=mA;var pA=y.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return o.jsx($e.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function gA(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),v3(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...gA(n))}}),e}function Wh(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Ix(s,i):s.dispatchEvent(i)}var F1=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),i=n>s;return e==="left"||e==="right"?i&&n>r:!i&&s>r};function y3(t=()=>{}){const e=Nr(t);_r(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function v3(t){return t.nodeType===t.ELEMENT_NODE}function x3(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Xg(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var w3=iA,yA=aA,vA=cA,xA=uA,wA=dA,bA=fA,EA=kx;function CA(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=CA(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function NA(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=CA(t))&&(n&&(n+=" "),n+=e);return n}const V1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,B1=NA,Mx=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return B1(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const m=V1(d)||V1(f);return s[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...g}=d;return Object.entries(g).every(x=>{let[p,b]=x;return Array.isArray(b)?b.includes({...i,...l}[p]):{...i,...l}[p]===b})?[...u,f,m]:u},[]);return B1(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_A=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},c)=>y.createElement("svg",{ref:c,...E3,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:_A("lucide",s),...l},[...a.map(([u,d])=>y.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,e)=>{const r=y.forwardRef(({className:n,...s},i)=>y.createElement(C3,{ref:i,iconNode:e,className:_A(`lucide-${b3(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=Re("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=Re("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=Re("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=Re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=Re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=Re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=Re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Re("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=Re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Re("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=Re("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=Re("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=Re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=Re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=Re("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=Re("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=Re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=Re("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=Re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Re("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=Re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Gx="-",F3=t=>{const e=B3(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const l=a.split(Gx);return l[0]===""&&l.length!==1&&l.shift(),IA(l,e)||V3(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},IA=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?IA(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Gx);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},$1=/^\[(.+)\]$/,V3=t=>{if($1.test(t)){const e=$1.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},B3=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return q3(Object.entries(t.classGroups),r).forEach(([i,a])=>{Ay(a,n,i,e)}),n},Ay=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:z1(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(U3(s)){Ay(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,a])=>{Ay(a,z1(e,i),r,n)})})},z1=(t,e)=>{let r=t;return e.split(Gx).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},U3=t=>t.isThemeGetter,q3=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[r,s]}):t,G3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,a)=>{r.set(i,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){r.has(i)?r.set(i,a):s(i,a)}}},jA="!",$3=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let u=0,d=0,f;for(let b=0;b<l.length;b++){let E=l[b];if(u===0){if(E===s&&(n||l.slice(b,b+i)===e)){c.push(l.slice(d,b)),d=b+i;continue}if(E==="/"){f=b;continue}}E==="["?u++:E==="]"&&u--}const m=c.length===0?l:l.substring(d),g=m.startsWith(jA),x=g?m.substring(1):m,p=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:a}):a},z3=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},H3=t=>({cache:G3(t.cacheSize),parseClassName:$3(t),...F3(t)}),W3=/\s+/,Q3=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(W3);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}=r(u);let x=!!g,p=n(x?m.substring(0,g):m);if(!p){if(!x){l=u+(l.length>0?" "+l:l);continue}if(p=n(m),!p){l=u+(l.length>0?" "+l:l);continue}x=!1}const b=z3(d).join(":"),E=f?b+jA:b,w=E+p;if(i.includes(w))continue;i.push(w);const C=s(p,x);for(let I=0;I<C.length;++I){const j=C[I];i.push(E+j)}l=u+(l.length>0?" "+l:l)}return l};function Y3(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=PA(e))&&(n&&(n+=" "),n+=r);return n}const PA=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=PA(t[n]))&&(r&&(r+=" "),r+=e);return r};function K3(t,...e){let r,n,s,i=a;function a(c){const u=e.reduce((d,f)=>f(d),t());return r=H3(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=Q3(c,r);return s(c,d),d}return function(){return i(Y3.apply(null,arguments))}}const yt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},kA=/^\[(?:([a-z-]+):)?(.+)\]$/i,J3=/^\d+\/\d+$/,X3=new Set(["px","full","screen"]),Z3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,rO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ds=t=>_l(t)||X3.has(t)||J3.test(t),xi=t=>uc(t,"length",dO),_l=t=>!!t&&!Number.isNaN(Number(t)),r0=t=>uc(t,"number",_l),Qc=t=>!!t&&Number.isInteger(Number(t)),sO=t=>t.endsWith("%")&&_l(t.slice(0,-1)),Le=t=>kA.test(t),wi=t=>Z3.test(t),iO=new Set(["length","size","percentage"]),oO=t=>uc(t,iO,MA),aO=t=>uc(t,"position",MA),lO=new Set(["image","url"]),cO=t=>uc(t,lO,fO),uO=t=>uc(t,"",hO),Yc=()=>!0,uc=(t,e,r)=>{const n=kA.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},dO=t=>eO.test(t)&&!tO.test(t),MA=()=>!1,hO=t=>rO.test(t),fO=t=>nO.test(t),mO=()=>{const t=yt("colors"),e=yt("spacing"),r=yt("blur"),n=yt("brightness"),s=yt("borderColor"),i=yt("borderRadius"),a=yt("borderSpacing"),l=yt("borderWidth"),c=yt("contrast"),u=yt("grayscale"),d=yt("hueRotate"),f=yt("invert"),m=yt("gap"),g=yt("gradientColorStops"),x=yt("gradientColorStopPositions"),p=yt("inset"),b=yt("margin"),E=yt("opacity"),w=yt("padding"),C=yt("saturate"),I=yt("scale"),j=yt("sepia"),V=yt("skew"),R=yt("space"),_=yt("translate"),A=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Le,e],M=()=>[Le,e],P=()=>["",Ds,xi],B=()=>["auto",_l,Le],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Le],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[_l,Le];return{cacheSize:500,separator:":",theme:{colors:[Yc],spacing:[Ds,xi],blur:["none","",wi,Le],brightness:ne(),borderColor:[t],borderRadius:["none","","full",wi,Le],borderSpacing:M(),borderWidth:P(),contrast:ne(),grayscale:H(),hueRotate:ne(),invert:H(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[sO,xi],inset:L(),margin:L(),opacity:ne(),padding:M(),saturate:ne(),scale:ne(),sepia:H(),skew:ne(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Le]}],container:["container"],columns:[{columns:[wi]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Le]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qc,Le]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Le]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Qc,Le]}],"grid-cols":[{"grid-cols":[Yc]}],"col-start-end":[{col:["auto",{span:["full",Qc,Le]},Le]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Yc]}],"row-start-end":[{row:["auto",{span:[Qc,Le]},Le]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Le]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Le,e]}],"min-w":[{"min-w":[Le,e,"min","max","fit"]}],"max-w":[{"max-w":[Le,e,"none","full","min","max","fit","prose",{screen:[wi]},wi]}],h:[{h:[Le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",wi,xi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",r0]}],"font-family":[{font:[Yc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Le]}],"line-clamp":[{"line-clamp":["none",_l,r0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ds,Le]}],"list-image":[{"list-image":["none",Le]}],"list-style-type":[{list:["none","disc","decimal",Le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ds,xi]}],"underline-offset":[{"underline-offset":["auto",Ds,Le]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),aO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Ds,Le]}],"outline-w":[{outline:[Ds,xi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Ds,xi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wi,uO]}],"shadow-color":[{shadow:[Yc]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",wi,Le]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Le]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",Le]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",Le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Qc,Le]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Le]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ds,xi,r0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pO=K3(mO),gO=()=>{};var H1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},yO=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],l=t[r++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},OA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,a||(m=64)),n.push(r[d],r[f],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new vO;const m=i<<2|l>>4;if(n.push(m),u!==64){const g=l<<4&240|u>>2;if(n.push(g),f!==64){const x=u<<6&192|f;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xO=function(t){const e=DA(t);return OA.encodeByteArray(e,!0)},vm=function(t){return xO(t).replace(/\./g,"")},LA=function(t){try{return OA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=()=>wO().__FIREBASE_DEFAULTS__,EO=()=>{if(typeof process>"u"||typeof H1>"u")return;const t=H1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LA(t[1]);return e&&JSON.parse(e)},pp=()=>{try{return gO()||bO()||EO()||CO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},FA=t=>{var e,r;return(r=(e=pp())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},NO=t=>{const e=FA(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},VA=()=>{var t;return(t=pp())===null||t===void 0?void 0:t.config},BA=t=>{var e;return(e=pp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vm(JSON.stringify(r)),vm(JSON.stringify(a)),""].join(".")}const Eu={};function AO(){const t={prod:[],emulator:[]};for(const e of Object.keys(Eu))Eu[e]?t.emulator.push(e):t.prod.push(e);return t}function SO(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let W1=!1;function qA(t,e){if(typeof window>"u"||typeof document>"u"||!dc(window.location.host)||Eu[t]===e||Eu[t]||W1)return;Eu[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",i=AO().prod.length>0;function a(){const m=document.getElementById(n);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{W1=!0,a()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=SO(n),g=r("text"),x=document.getElementById(g)||document.createElement("span"),p=r("learnmore"),b=document.getElementById(p)||document.createElement("a"),E=r("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),d(b,p);const I=u();c(w,E),C.append(w,x,b,I),document.body.appendChild(C)}i?(x.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tr())}function IO(){var t;const e=(t=pp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MO(){const t=Tr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DO(){return!IO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OO(){try{return typeof indexedDB=="object"}catch{return!1}}function LO(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="FirebaseError";class oi extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=FO,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Td.prototype.create)}}class Td{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?VO(i,n):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new oi(s,l,n)}}function VO(t,e){return t.replace(BO,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const BO=/\{\$([^}]+)}/g;function UO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ha(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(Q1(i)&&Q1(a)){if(!ha(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Q1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ru(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function nu(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function qO(t,e){const r=new GO(t,e);return r.subscribe.bind(r)}class GO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");$O(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=n0),s.error===void 0&&(s.error=n0),s.complete===void 0&&(s.complete=n0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $O(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function n0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class fa{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zO=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new _O;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WO(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:HO(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function HO(t){return t===zo?void 0:t}function WO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new zO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const YO={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},KO=He.INFO,JO={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},XO=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=JO[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $x{constructor(e){this.name=e,this._logLevel=KO,this._logHandler=XO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const ZO=(t,e)=>e.some(r=>t instanceof r);let Y1,K1;function e5(){return Y1||(Y1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t5(){return K1||(K1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GA=new WeakMap,Sy=new WeakMap,$A=new WeakMap,s0=new WeakMap,zx=new WeakMap;function r5(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(Ji(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&GA.set(r,t)}).catch(()=>{}),zx.set(e,t),e}function n5(t){if(Sy.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Sy.set(t,e)}let Ry={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Sy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$A.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ji(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s5(t){Ry=t(Ry)}function i5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(i0(this),e,...r);return $A.set(n,e.sort?e.sort():[e]),Ji(n)}:t5().includes(t)?function(...e){return t.apply(i0(this),e),Ji(GA.get(this))}:function(...e){return Ji(t.apply(i0(this),e))}}function o5(t){return typeof t=="function"?i5(t):(t instanceof IDBTransaction&&n5(t),ZO(t,e5())?new Proxy(t,Ry):t)}function Ji(t){if(t instanceof IDBRequest)return r5(t);if(s0.has(t))return s0.get(t);const e=o5(t);return e!==t&&(s0.set(t,e),zx.set(e,t)),e}const i0=t=>zx.get(t);function a5(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Ji(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Ji(a.result),c.oldVersion,c.newVersion,Ji(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const l5=["get","getKey","getAll","getAllKeys","count"],c5=["put","add","delete","clear"],o0=new Map;function J1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(o0.get(e))return o0.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=c5.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||l5.includes(r)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return o0.set(e,i),i}s5(t=>({...t,get:(e,r,n)=>J1(e,r)||t.get(e,r,n),has:(e,r)=>!!J1(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(d5(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function d5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iy="@firebase/app",X1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new $x("@firebase/app"),h5="@firebase/app-compat",f5="@firebase/analytics-compat",m5="@firebase/analytics",p5="@firebase/app-check-compat",g5="@firebase/app-check",y5="@firebase/auth",v5="@firebase/auth-compat",x5="@firebase/database",w5="@firebase/data-connect",b5="@firebase/database-compat",E5="@firebase/functions",C5="@firebase/functions-compat",N5="@firebase/installations",_5="@firebase/installations-compat",T5="@firebase/messaging",A5="@firebase/messaging-compat",S5="@firebase/performance",R5="@firebase/performance-compat",I5="@firebase/remote-config",j5="@firebase/remote-config-compat",P5="@firebase/storage",k5="@firebase/storage-compat",M5="@firebase/firestore",D5="@firebase/ai",O5="@firebase/firestore-compat",L5="firebase",F5="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="[DEFAULT]",V5={[Iy]:"fire-core",[h5]:"fire-core-compat",[m5]:"fire-analytics",[f5]:"fire-analytics-compat",[g5]:"fire-app-check",[p5]:"fire-app-check-compat",[y5]:"fire-auth",[v5]:"fire-auth-compat",[x5]:"fire-rtdb",[w5]:"fire-data-connect",[b5]:"fire-rtdb-compat",[E5]:"fire-fn",[C5]:"fire-fn-compat",[N5]:"fire-iid",[_5]:"fire-iid-compat",[T5]:"fire-fcm",[A5]:"fire-fcm-compat",[S5]:"fire-perf",[R5]:"fire-perf-compat",[I5]:"fire-rc",[j5]:"fire-rc-compat",[P5]:"fire-gcs",[k5]:"fire-gcs-compat",[M5]:"fire-fst",[O5]:"fire-fst-compat",[D5]:"fire-vertex","fire-js":"fire-js",[L5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Map,B5=new Map,Py=new Map;function Z1(t,e){try{t.container.addComponent(e)}catch(r){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Kl(t){const e=t.name;if(Py.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;Py.set(e,t);for(const r of Yu.values())Z1(r,t);for(const r of B5.values())Z1(r,t);return!0}function Hx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xi=new Td("app","Firebase",U5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=F5;function zA(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:jy,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw Xi.create("bad-app-name",{appName:String(s)});if(r||(r=VA()),!r)throw Xi.create("no-options");const i=Yu.get(s);if(i){if(ha(r,i.options)&&ha(n,i.config))return i;throw Xi.create("duplicate-app",{appName:s})}const a=new QO(s);for(const c of Py.values())a.addComponent(c);const l=new q5(r,n,a);return Yu.set(s,l),l}function Wx(t=jy){const e=Yu.get(t);if(!e&&t===jy&&VA())return zA();if(!e)throw Xi.create("no-app",{appName:t});return e}function G5(){return Array.from(Yu.values())}function Zi(t,e,r){var n;let s=(n=V5[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(l.join(" "));return}Kl(new fa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="firebase-heartbeat-database",z5=1,Ku="firebase-heartbeat-store";let a0=null;function HA(){return a0||(a0=a5($5,z5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ku)}catch(r){console.warn(r)}}}}).catch(t=>{throw Xi.create("idb-open",{originalErrorMessage:t.message})})),a0}async function H5(t){try{const r=(await HA()).transaction(Ku),n=await r.objectStore(Ku).get(WA(t));return await r.done,n}catch(e){if(e instanceof oi)Xs.warn(e.message);else{const r=Xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xs.warn(r.message)}}}async function eE(t,e){try{const n=(await HA()).transaction(Ku,"readwrite");await n.objectStore(Ku).put(e,WA(t)),await n.done}catch(r){if(r instanceof oi)Xs.warn(r.message);else{const n=Xi.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Xs.warn(n.message)}}}function WA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5=1024,Q5=30;class Y5{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new J5(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Q5){const a=X5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Xs.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=tE(),{heartbeatsToSend:n,unsentEntries:s}=K5(this._heartbeatsCache.heartbeats),i=vm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Xs.warn(r),""}}}function tE(){return new Date().toISOString().substring(0,10)}function K5(t,e=W5){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),rE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),rE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class J5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OO()?LO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await H5(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return eE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return eE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rE(t){return vm(JSON.stringify({version:2,heartbeats:t})).length}function X5(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(t){Kl(new fa("platform-logger",e=>new u5(e),"PRIVATE")),Kl(new fa("heartbeat",e=>new Y5(e),"PRIVATE")),Zi(Iy,X1,t),Zi(Iy,X1,"esm2017"),Zi("fire-js","")}Z5("");var eL="firebase",tL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi(eL,tL,"app");var nE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eo,QA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,_){function A(){}A.prototype=_.prototype,R.D=_.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(k,L,M){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return _.prototype[L].apply(k,P)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,_,A){A||(A=0);var k=Array(16);if(typeof _=="string")for(var L=0;16>L;++L)k[L]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(L=0;16>L;++L)k[L]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=R.g[0],A=R.g[1],L=R.g[2];var M=R.g[3],P=_+(M^A&(L^M))+k[0]+3614090360&4294967295;_=A+(P<<7&4294967295|P>>>25),P=M+(L^_&(A^L))+k[1]+3905402710&4294967295,M=_+(P<<12&4294967295|P>>>20),P=L+(A^M&(_^A))+k[2]+606105819&4294967295,L=M+(P<<17&4294967295|P>>>15),P=A+(_^L&(M^_))+k[3]+3250441966&4294967295,A=L+(P<<22&4294967295|P>>>10),P=_+(M^A&(L^M))+k[4]+4118548399&4294967295,_=A+(P<<7&4294967295|P>>>25),P=M+(L^_&(A^L))+k[5]+1200080426&4294967295,M=_+(P<<12&4294967295|P>>>20),P=L+(A^M&(_^A))+k[6]+2821735955&4294967295,L=M+(P<<17&4294967295|P>>>15),P=A+(_^L&(M^_))+k[7]+4249261313&4294967295,A=L+(P<<22&4294967295|P>>>10),P=_+(M^A&(L^M))+k[8]+1770035416&4294967295,_=A+(P<<7&4294967295|P>>>25),P=M+(L^_&(A^L))+k[9]+2336552879&4294967295,M=_+(P<<12&4294967295|P>>>20),P=L+(A^M&(_^A))+k[10]+4294925233&4294967295,L=M+(P<<17&4294967295|P>>>15),P=A+(_^L&(M^_))+k[11]+2304563134&4294967295,A=L+(P<<22&4294967295|P>>>10),P=_+(M^A&(L^M))+k[12]+1804603682&4294967295,_=A+(P<<7&4294967295|P>>>25),P=M+(L^_&(A^L))+k[13]+4254626195&4294967295,M=_+(P<<12&4294967295|P>>>20),P=L+(A^M&(_^A))+k[14]+2792965006&4294967295,L=M+(P<<17&4294967295|P>>>15),P=A+(_^L&(M^_))+k[15]+1236535329&4294967295,A=L+(P<<22&4294967295|P>>>10),P=_+(L^M&(A^L))+k[1]+4129170786&4294967295,_=A+(P<<5&4294967295|P>>>27),P=M+(A^L&(_^A))+k[6]+3225465664&4294967295,M=_+(P<<9&4294967295|P>>>23),P=L+(_^A&(M^_))+k[11]+643717713&4294967295,L=M+(P<<14&4294967295|P>>>18),P=A+(M^_&(L^M))+k[0]+3921069994&4294967295,A=L+(P<<20&4294967295|P>>>12),P=_+(L^M&(A^L))+k[5]+3593408605&4294967295,_=A+(P<<5&4294967295|P>>>27),P=M+(A^L&(_^A))+k[10]+38016083&4294967295,M=_+(P<<9&4294967295|P>>>23),P=L+(_^A&(M^_))+k[15]+3634488961&4294967295,L=M+(P<<14&4294967295|P>>>18),P=A+(M^_&(L^M))+k[4]+3889429448&4294967295,A=L+(P<<20&4294967295|P>>>12),P=_+(L^M&(A^L))+k[9]+568446438&4294967295,_=A+(P<<5&4294967295|P>>>27),P=M+(A^L&(_^A))+k[14]+3275163606&4294967295,M=_+(P<<9&4294967295|P>>>23),P=L+(_^A&(M^_))+k[3]+4107603335&4294967295,L=M+(P<<14&4294967295|P>>>18),P=A+(M^_&(L^M))+k[8]+1163531501&4294967295,A=L+(P<<20&4294967295|P>>>12),P=_+(L^M&(A^L))+k[13]+2850285829&4294967295,_=A+(P<<5&4294967295|P>>>27),P=M+(A^L&(_^A))+k[2]+4243563512&4294967295,M=_+(P<<9&4294967295|P>>>23),P=L+(_^A&(M^_))+k[7]+1735328473&4294967295,L=M+(P<<14&4294967295|P>>>18),P=A+(M^_&(L^M))+k[12]+2368359562&4294967295,A=L+(P<<20&4294967295|P>>>12),P=_+(A^L^M)+k[5]+4294588738&4294967295,_=A+(P<<4&4294967295|P>>>28),P=M+(_^A^L)+k[8]+2272392833&4294967295,M=_+(P<<11&4294967295|P>>>21),P=L+(M^_^A)+k[11]+1839030562&4294967295,L=M+(P<<16&4294967295|P>>>16),P=A+(L^M^_)+k[14]+4259657740&4294967295,A=L+(P<<23&4294967295|P>>>9),P=_+(A^L^M)+k[1]+2763975236&4294967295,_=A+(P<<4&4294967295|P>>>28),P=M+(_^A^L)+k[4]+1272893353&4294967295,M=_+(P<<11&4294967295|P>>>21),P=L+(M^_^A)+k[7]+4139469664&4294967295,L=M+(P<<16&4294967295|P>>>16),P=A+(L^M^_)+k[10]+3200236656&4294967295,A=L+(P<<23&4294967295|P>>>9),P=_+(A^L^M)+k[13]+681279174&4294967295,_=A+(P<<4&4294967295|P>>>28),P=M+(_^A^L)+k[0]+3936430074&4294967295,M=_+(P<<11&4294967295|P>>>21),P=L+(M^_^A)+k[3]+3572445317&4294967295,L=M+(P<<16&4294967295|P>>>16),P=A+(L^M^_)+k[6]+76029189&4294967295,A=L+(P<<23&4294967295|P>>>9),P=_+(A^L^M)+k[9]+3654602809&4294967295,_=A+(P<<4&4294967295|P>>>28),P=M+(_^A^L)+k[12]+3873151461&4294967295,M=_+(P<<11&4294967295|P>>>21),P=L+(M^_^A)+k[15]+530742520&4294967295,L=M+(P<<16&4294967295|P>>>16),P=A+(L^M^_)+k[2]+3299628645&4294967295,A=L+(P<<23&4294967295|P>>>9),P=_+(L^(A|~M))+k[0]+4096336452&4294967295,_=A+(P<<6&4294967295|P>>>26),P=M+(A^(_|~L))+k[7]+1126891415&4294967295,M=_+(P<<10&4294967295|P>>>22),P=L+(_^(M|~A))+k[14]+2878612391&4294967295,L=M+(P<<15&4294967295|P>>>17),P=A+(M^(L|~_))+k[5]+4237533241&4294967295,A=L+(P<<21&4294967295|P>>>11),P=_+(L^(A|~M))+k[12]+1700485571&4294967295,_=A+(P<<6&4294967295|P>>>26),P=M+(A^(_|~L))+k[3]+2399980690&4294967295,M=_+(P<<10&4294967295|P>>>22),P=L+(_^(M|~A))+k[10]+4293915773&4294967295,L=M+(P<<15&4294967295|P>>>17),P=A+(M^(L|~_))+k[1]+2240044497&4294967295,A=L+(P<<21&4294967295|P>>>11),P=_+(L^(A|~M))+k[8]+1873313359&4294967295,_=A+(P<<6&4294967295|P>>>26),P=M+(A^(_|~L))+k[15]+4264355552&4294967295,M=_+(P<<10&4294967295|P>>>22),P=L+(_^(M|~A))+k[6]+2734768916&4294967295,L=M+(P<<15&4294967295|P>>>17),P=A+(M^(L|~_))+k[13]+1309151649&4294967295,A=L+(P<<21&4294967295|P>>>11),P=_+(L^(A|~M))+k[4]+4149444226&4294967295,_=A+(P<<6&4294967295|P>>>26),P=M+(A^(_|~L))+k[11]+3174756917&4294967295,M=_+(P<<10&4294967295|P>>>22),P=L+(_^(M|~A))+k[2]+718787259&4294967295,L=M+(P<<15&4294967295|P>>>17),P=A+(M^(L|~_))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+_&4294967295,R.g[1]=R.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+M&4294967295}n.prototype.u=function(R,_){_===void 0&&(_=R.length);for(var A=_-this.blockSize,k=this.B,L=this.h,M=0;M<_;){if(L==0)for(;M<=A;)s(this,R,M),M+=this.blockSize;if(typeof R=="string"){for(;M<_;)if(k[L++]=R.charCodeAt(M++),L==this.blockSize){s(this,k),L=0;break}}else for(;M<_;)if(k[L++]=R[M++],L==this.blockSize){s(this,k),L=0;break}}this.h=L,this.o+=_},n.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var _=1;_<R.length-8;++_)R[_]=0;var A=8*this.o;for(_=R.length-8;_<R.length;++_)R[_]=A&255,A/=256;for(this.u(R),R=Array(16),_=A=0;4>_;++_)for(var k=0;32>k;k+=8)R[A++]=this.g[_]>>>k&255;return R};function i(R,_){var A=l;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=_(R)}function a(R,_){this.h=_;for(var A=[],k=!0,L=R.length-1;0<=L;L--){var M=R[L]|0;k&&M==_||(A[L]=M,k=!1)}this.g=A}var l={};function c(R){return-128<=R&&128>R?i(R,function(_){return new a([_|0],0>_?-1:0)}):new a([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return b(u(-R));for(var _=[],A=1,k=0;R>=A;k++)_[k]=R/A|0,A*=4294967296;return new a(_,0)}function d(R,_){if(R.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(R.charAt(0)=="-")return b(d(R.substring(1),_));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(_,8)),k=f,L=0;L<R.length;L+=8){var M=Math.min(8,R.length-L),P=parseInt(R.substring(L,L+M),_);8>M?(M=u(Math.pow(_,M)),k=k.j(M).add(u(P))):(k=k.j(A),k=k.add(u(P)))}return k}var f=c(0),m=c(1),g=c(16777216);t=a.prototype,t.m=function(){if(p(this))return-b(this).m();for(var R=0,_=1,A=0;A<this.g.length;A++){var k=this.i(A);R+=(0<=k?k:4294967296+k)*_,_*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x(this))return"0";if(p(this))return"-"+b(this).toString(R);for(var _=u(Math.pow(R,6)),A=this,k="";;){var L=I(A,_).g;A=E(A,L.j(_));var M=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=L,x(A))return M+k;for(;6>M.length;)M="0"+M;k=M+k}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function x(R){if(R.h!=0)return!1;for(var _=0;_<R.g.length;_++)if(R.g[_]!=0)return!1;return!0}function p(R){return R.h==-1}t.l=function(R){return R=E(this,R),p(R)?-1:x(R)?0:1};function b(R){for(var _=R.g.length,A=[],k=0;k<_;k++)A[k]=~R.g[k];return new a(A,~R.h).add(m)}t.abs=function(){return p(this)?b(this):this},t.add=function(R){for(var _=Math.max(this.g.length,R.g.length),A=[],k=0,L=0;L<=_;L++){var M=k+(this.i(L)&65535)+(R.i(L)&65535),P=(M>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);k=P>>>16,M&=65535,P&=65535,A[L]=P<<16|M}return new a(A,A[A.length-1]&-2147483648?-1:0)};function E(R,_){return R.add(b(_))}t.j=function(R){if(x(this)||x(R))return f;if(p(this))return p(R)?b(this).j(b(R)):b(b(this).j(R));if(p(R))return b(this.j(b(R)));if(0>this.l(g)&&0>R.l(g))return u(this.m()*R.m());for(var _=this.g.length+R.g.length,A=[],k=0;k<2*_;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<R.g.length;L++){var M=this.i(k)>>>16,P=this.i(k)&65535,B=R.i(L)>>>16,z=R.i(L)&65535;A[2*k+2*L]+=P*z,w(A,2*k+2*L),A[2*k+2*L+1]+=M*z,w(A,2*k+2*L+1),A[2*k+2*L+1]+=P*B,w(A,2*k+2*L+1),A[2*k+2*L+2]+=M*B,w(A,2*k+2*L+2)}for(k=0;k<_;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=_;k<2*_;k++)A[k]=0;return new a(A,0)};function w(R,_){for(;(R[_]&65535)!=R[_];)R[_+1]+=R[_]>>>16,R[_]&=65535,_++}function C(R,_){this.g=R,this.h=_}function I(R,_){if(x(_))throw Error("division by zero");if(x(R))return new C(f,f);if(p(R))return _=I(b(R),_),new C(b(_.g),b(_.h));if(p(_))return _=I(R,b(_)),new C(b(_.g),_.h);if(30<R.g.length){if(p(R)||p(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,k=_;0>=k.l(R);)A=j(A),k=j(k);var L=V(A,1),M=V(k,1);for(k=V(k,2),A=V(A,2);!x(k);){var P=M.add(k);0>=P.l(R)&&(L=L.add(A),M=P),k=V(k,1),A=V(A,1)}return _=E(R,L.j(_)),new C(L,_)}for(L=f;0<=R.l(_);){for(A=Math.max(1,Math.floor(R.m()/_.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),M=u(A),P=M.j(_);p(P)||0<P.l(R);)A-=k,M=u(A),P=M.j(_);x(M)&&(M=m),L=L.add(M),R=E(R,P)}return new C(L,R)}t.A=function(R){return I(this,R).h},t.and=function(R){for(var _=Math.max(this.g.length,R.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)&R.i(k);return new a(A,this.h&R.h)},t.or=function(R){for(var _=Math.max(this.g.length,R.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)|R.i(k);return new a(A,this.h|R.h)},t.xor=function(R){for(var _=Math.max(this.g.length,R.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)^R.i(k);return new a(A,this.h^R.h)};function j(R){for(var _=R.g.length+1,A=[],k=0;k<_;k++)A[k]=R.i(k)<<1|R.i(k-1)>>>31;return new a(A,R.h)}function V(R,_){var A=_>>5;_%=32;for(var k=R.g.length-A,L=[],M=0;M<k;M++)L[M]=0<_?R.i(M+A)>>>_|R.i(M+A+1)<<32-_:R.i(M+A);return new a(L,R.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,QA=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,eo=a}).apply(typeof nE<"u"?nE:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YA,su,KA,Tf,ky,JA,XA,ZA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,S){return h==Array.prototype||h==Object.prototype||(h[v]=S.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var v=0;v<h.length;++v){var S=h[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var n=r(this);function s(h,v){if(v)e:{var S=n;h=h.split(".");for(var O=0;O<h.length-1;O++){var W=h[O];if(!(W in S))break e;S=S[W]}h=h[h.length-1],O=S[h],v=v(O),v!=O&&v!=null&&e(S,h,{configurable:!0,writable:!0,value:v})}}function i(h,v){h instanceof String&&(h+="");var S=0,O=!1,W={next:function(){if(!O&&S<h.length){var X=S++;return{value:v(X,h[X]),done:!1}}return O=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(h){return h||function(){return i(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function u(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function d(h,v,S){return h.call.apply(h.bind,arguments)}function f(h,v,S){if(!h)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,O),h.apply(v,W)}}return function(){return h.apply(v,arguments)}}function m(h,v,S){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function g(h,v){var S=Array.prototype.slice.call(arguments,1);return function(){var O=S.slice();return O.push.apply(O,arguments),h.apply(this,O)}}function x(h,v){function S(){}S.prototype=v.prototype,h.aa=v.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(O,W,X){for(var te=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)te[lt-2]=arguments[lt];return v.prototype[W].apply(O,te)}}function p(h){const v=h.length;if(0<v){const S=Array(v);for(let O=0;O<v;O++)S[O]=h[O];return S}return[]}function b(h,v){for(let S=1;S<arguments.length;S++){const O=arguments[S];if(c(O)){const W=h.length||0,X=O.length||0;h.length=W+X;for(let te=0;te<X;te++)h[W+te]=O[te]}else h.push(O)}}class E{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function w(h){return/^[\s\xa0]*$/.test(h)}function C(){var h=l.navigator;return h&&(h=h.userAgent)?h:""}function I(h){return I[" "](h),h}I[" "]=function(){};var j=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function V(h,v,S){for(const O in h)v.call(S,h[O],O,h)}function R(h,v){for(const S in h)v.call(void 0,h[S],S,h)}function _(h){const v={};for(const S in h)v[S]=h[S];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,v){let S,O;for(let W=1;W<arguments.length;W++){O=arguments[W];for(S in O)h[S]=O[S];for(let X=0;X<A.length;X++)S=A[X],Object.prototype.hasOwnProperty.call(O,S)&&(h[S]=O[S])}}function L(h){var v=1;h=h.split(":");const S=[];for(;0<v&&h.length;)S.push(h.shift()),v--;return h.length&&S.push(h.join(":")),S}function M(h){l.setTimeout(()=>{throw h},0)}function P(){var h=H;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class B{constructor(){this.h=this.g=null}add(v,S){const O=z.get();O.set(v,S),this.h?this.h.next=O:this.g=O,this.h=O}}var z=new E(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,U=!1,H=new B,ie=()=>{const h=l.Promise.resolve(void 0);Z=()=>{h.then(ne)}};var ne=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(S){M(S)}var v=z;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}U=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};l.addEventListener("test",S,v),l.removeEventListener("test",S,v)}catch{}return h}();function Me(h,v){if(he.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,O=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(j){e:{try{I(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else S=="mouseover"?v=h.fromElement:S=="mouseout"&&(v=h.toElement);this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ue[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Me.aa.h.call(this)}}x(Me,he);var ue={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),de=0;function G(h,v,S,O,W){this.listener=h,this.proxy=null,this.src=v,this.type=S,this.capture=!!O,this.ha=W,this.key=++de,this.da=this.fa=!1}function me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h){this.src=h,this.g={},this.h=0}Ee.prototype.add=function(h,v,S,O,W){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var te=pe(h,v,O,W);return-1<te?(v=h[te],S||(v.fa=!1)):(v=new G(v,this.src,X,!!O,W),v.fa=S,h.push(v)),v};function Ce(h,v){var S=v.type;if(S in h.g){var O=h.g[S],W=Array.prototype.indexOf.call(O,v,void 0),X;(X=0<=W)&&Array.prototype.splice.call(O,W,1),X&&(me(v),h.g[S].length==0&&(delete h.g[S],h.h--))}}function pe(h,v,S,O){for(var W=0;W<h.length;++W){var X=h[W];if(!X.da&&X.listener==v&&X.capture==!!S&&X.ha==O)return W}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),at={};function ht(h,v,S,O,W){if(Array.isArray(v)){for(var X=0;X<v.length;X++)ht(h,v[X],S,O,W);return null}return S=Po(S),h&&h[ee]?h.K(v,S,u(O)?!!O.capture:!!O,W):Ft(h,v,S,!1,O,W)}function Ft(h,v,S,O,W,X){if(!v)throw Error("Invalid event type");var te=u(W)?!!W.capture:!!W,lt=hn(h);if(lt||(h[ve]=lt=new Ee(h)),S=lt.add(v,S,O,te,X),S.proxy)return S;if(O=rt(),S.proxy=O,O.src=h,O.listener=S,h.addEventListener)Ne||(W=te),W===void 0&&(W=!1),h.addEventListener(v.toString(),O,W);else if(h.attachEvent)h.attachEvent(An(v.toString()),O);else if(h.addListener&&h.removeListener)h.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return S}function rt(){function h(S){return v.call(h.src,h.listener,S)}const v=Cs;return h}function wt(h,v,S,O,W){if(Array.isArray(v))for(var X=0;X<v.length;X++)wt(h,v[X],S,O,W);else O=u(O)?!!O.capture:!!O,S=Po(S),h&&h[ee]?(h=h.i,v=String(v).toString(),v in h.g&&(X=h.g[v],S=pe(X,S,O,W),-1<S&&(me(X[S]),Array.prototype.splice.call(X,S,1),X.length==0&&(delete h.g[v],h.h--)))):h&&(h=hn(h))&&(v=h.g[v.toString()],h=-1,v&&(h=pe(v,S,O,W)),(S=-1<h?v[h]:null)&&hr(S))}function hr(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[ee])Ce(v.i,h);else{var S=h.type,O=h.proxy;v.removeEventListener?v.removeEventListener(S,O,h.capture):v.detachEvent?v.detachEvent(An(S),O):v.addListener&&v.removeListener&&v.removeListener(O),(S=hn(v))?(Ce(S,h),S.h==0&&(S.src=null,v[ve]=null)):me(h)}}}function An(h){return h in at?at[h]:at[h]="on"+h}function Cs(h,v){if(h.da)h=!0;else{v=new Me(v,this);var S=h.listener,O=h.ha||h.src;h.fa&&hr(h),h=S.call(O,v)}return h}function hn(h){return h=h[ve],h instanceof Ee?h:null}var Ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function Po(h){return typeof h=="function"?h:(h[Ns]||(h[Ns]=function(v){return h.handleEvent(v)}),h[Ns])}function It(){le.call(this),this.i=new Ee(this),this.M=this,this.F=null}x(It,le),It.prototype[ee]=!0,It.prototype.removeEventListener=function(h,v,S,O){wt(this,h,v,S,O)};function bt(h,v){var S,O=h.F;if(O)for(S=[];O;O=O.F)S.push(O);if(h=h.M,O=v.type||v,typeof v=="string")v=new he(v,h);else if(v instanceof he)v.target=v.target||h;else{var W=v;v=new he(O,h),k(v,W)}if(W=!0,S)for(var X=S.length-1;0<=X;X--){var te=v.g=S[X];W=_s(te,O,!0,v)&&W}if(te=v.g=h,W=_s(te,O,!0,v)&&W,W=_s(te,O,!1,v)&&W,S)for(X=0;X<S.length;X++)te=v.g=S[X],W=_s(te,O,!1,v)&&W}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var S=h.g[v],O=0;O<S.length;O++)me(S[O]);delete h.g[v],h.h--}}this.F=null},It.prototype.K=function(h,v,S,O){return this.i.add(String(h),v,!1,S,O)},It.prototype.L=function(h,v,S,O){return this.i.add(String(h),v,!0,S,O)};function _s(h,v,S,O){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,X=0;X<v.length;++X){var te=v[X];if(te&&!te.da&&te.capture==S){var lt=te.listener,Ht=te.ha||te.src;te.fa&&Ce(h.i,te),W=lt.call(Ht,O)!==!1&&W}}return W&&!O.defaultPrevented}function Sn(h,v,S){if(typeof h=="function")S&&(h=m(h,S));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(h,v||0)}function ko(h){h.g=Sn(()=>{h.g=null,h.i&&(h.i=!1,ko(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class li extends le{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ko(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fn(h){le.call(this),this.h=h,this.g={}}x(fn,le);var Rn=[];function In(h){V(h.g,function(v,S){this.g.hasOwnProperty(S)&&hr(v)},h),h.g={}}fn.prototype.N=function(){fn.aa.N.call(this),In(this)},fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ar=l.JSON.stringify,Sr=l.JSON.parse,Tc=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function je(){}je.prototype.h=null;function ze(h){return h.h||(h.h=h.i())}function et(){}var Jt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fr(){he.call(this,"d")}x(fr,he);function jn(){he.call(this,"c")}x(jn,he);var gt={},ci=null;function Qe(){return ci=ci||new It}gt.La="serverreachability";function $d(h){he.call(this,gt.La,h)}x($d,he);function mr(h){const v=Qe();bt(v,new $d(v))}gt.STAT_EVENT="statevent";function mn(h,v){he.call(this,gt.STAT_EVENT,h),this.stat=v}x(mn,he);function ir(h){const v=Qe();bt(v,new mn(v,h))}gt.Ma="timingevent";function zd(h,v){he.call(this,gt.Ma,h),this.size=v}x(zd,he);function Ts(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},v)}function As(){this.g=!0}As.prototype.xa=function(){this.g=!1};function Hd(h,v,S,O,W,X){h.info(function(){if(h.g)if(X)for(var te="",lt=X.split("&"),Ht=0;Ht<lt.length;Ht++){var Ke=lt[Ht].split("=");if(1<Ke.length){var Xt=Ke[0];Ke=Ke[1];var Zt=Xt.split("_");te=2<=Zt.length&&Zt[1]=="type"?te+(Xt+"="+Ke+"&"):te+(Xt+"=redacted&")}}else te=null;else te=X;return"XMLHTTP REQ ("+O+") [attempt "+W+"]: "+v+`
`+S+`
`+te})}function lg(h,v,S,O,W,X,te){h.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+W+"]: "+v+`
`+S+`
`+X+" "+te})}function Ss(h,v,S,O){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+cg(h,S)+(O?" "+O:"")})}function Mo(h,v){h.info(function(){return"TIMEOUT: "+v})}As.prototype.info=function(){};function cg(h,v){if(!h.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var O=S[h];if(!(2>O.length)){var W=O[1];if(Array.isArray(W)&&!(1>W.length)){var X=W[0];if(X!="noop"&&X!="stop"&&X!="close")for(var te=1;te<W.length;te++)W[te]=""}}}}return Ar(S)}catch{return v}}var Rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ka={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ma;function Do(){}x(Do,je),Do.prototype.g=function(){return new XMLHttpRequest},Do.prototype.i=function(){return{}},Ma=new Do;function Pn(h,v,S,O){this.j=h,this.i=v,this.l=S,this.R=O||1,this.U=new fn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wd}function Wd(){this.i=null,this.g="",this.h=!1}var Qd={},Ac={};function Sc(h,v,S){h.L=1,h.v=Ua(Kr(v)),h.m=S,h.P=!0,Da(h,null)}function Da(h,v){h.F=Date.now(),Oa(h),h.A=Kr(h.v);var S=h.A,O=h.R;Array.isArray(O)||(O=[String(O)]),sh(S.i,"t",O),h.C=0,S=h.j.J,h.h=new Wd,h.g=bh(h.j,S?v:null,!h.m),0<h.O&&(h.M=new li(m(h.Y,h,h.g),h.O)),v=h.U,S=h.g,O=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(Rn[0]=W.toString()),W=Rn);for(var X=0;X<W.length;X++){var te=ht(S,W[X],O||v.handleEvent,!1,v.h||v);if(!te)break;v.g[te.key]=te}v=h.H?_(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),mr(),Hd(h.i,h.u,h.A,h.l,h.R,h.m)}Pn.prototype.ca=function(h){h=h.target;const v=this.M;v&&Mn(h)==3?v.j():this.Y(h)},Pn.prototype.Y=function(h){try{if(h==this.g)e:{const Zt=Mn(this.g);var v=this.g.Ba();const yi=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||hh(this.g)))){this.J||Zt!=4||v==7||(v==8||0>=yi?mr(3):mr(2)),Ic(this);var S=this.g.Z();this.X=S;t:if(Yd(this)){var O=hh(this.g);h="";var W=O.length,X=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),Oo(this);var te="";break t}this.h.i=new l.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,h+=this.h.i.decode(O[v],{stream:!(X&&v==W-1)});O.length=0,this.h.g+=h,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=S==200,lg(this.i,this.u,this.A,this.l,this.R,Zt,S),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,Ht=this.g;if((lt=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(lt)){var Ke=lt;break t}}Ke=null}if(S=Ke)Ss(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ui(this,S);else{this.o=!1,this.s=3,ir(12),Is(this),Oo(this);break e}}if(this.P){S=!0;let Jr;for(;!this.J&&this.C<te.length;)if(Jr=ug(this,te),Jr==Ac){Zt==4&&(this.s=4,ir(14),S=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Jr==Qd){this.s=4,ir(15),Ss(this.i,this.l,te,"[Invalid Chunk]"),S=!1;break}else Ss(this.i,this.l,Jr,null),ui(this,Jr);if(Yd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||te.length!=0||this.h.h||(this.s=1,ir(16),S=!1),this.o=this.o&&S,!S)Ss(this.i,this.l,te,"[Invalid Chunked Response]"),Is(this),Oo(this);else if(0<te.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Lc(Xt),Xt.M=!0,ir(11))}}else Ss(this.i,this.l,te,null),ui(this,te);Zt==4&&Is(this),this.o&&!this.J&&(Zt==4?xh(this.j,this):(this.o=!1,Oa(this)))}else wg(this.g),S==400&&0<te.indexOf("Unknown SID")?(this.s=3,ir(12)):(this.s=0,ir(13)),Is(this),Oo(this)}}}catch{}finally{}};function Yd(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ug(h,v){var S=h.C,O=v.indexOf(`
`,S);return O==-1?Ac:(S=Number(v.substring(S,O)),isNaN(S)?Qd:(O+=1,O+S>v.length?Ac:(v=v.slice(O,O+S),h.C=O+S,v)))}Pn.prototype.cancel=function(){this.J=!0,Is(this)};function Oa(h){h.S=Date.now()+h.I,Rc(h,h.I)}function Rc(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ts(m(h.ba,h),v)}function Ic(h){h.B&&(l.clearTimeout(h.B),h.B=null)}Pn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Mo(this.i,this.A),this.L!=2&&(mr(),ir(17)),Is(this),this.s=2,Oo(this)):Rc(this,this.S-h)};function Oo(h){h.j.G==0||h.J||xh(h.j,h)}function Is(h){Ic(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,In(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function ui(h,v){try{var S=h.j;if(S.G!=0&&(S.g==h||La(S.h,h))){if(!h.K&&La(S.h,h)&&S.G==3){try{var O=S.Da.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var W=O;if(W[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)Ha(S),Uo(S);else break e;Oc(S),ir(18)}}else S.za=W[1],0<S.za-S.T&&37500>W[2]&&S.F&&S.v==0&&!S.C&&(S.C=Ts(m(S.Za,S),6e3));if(1>=jc(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else ks(S,11)}else if((h.K||S.g==h)&&Ha(S),!w(v))for(W=S.Da.g.parse(v),v=0;v<W.length;v++){let Ke=W[v];if(S.T=Ke[0],Ke=Ke[1],S.G==2)if(Ke[0]=="c"){S.K=Ke[1],S.ia=Ke[2];const Xt=Ke[3];Xt!=null&&(S.la=Xt,S.j.info("VER="+S.la));const Zt=Ke[4];Zt!=null&&(S.Aa=Zt,S.j.info("SVER="+S.Aa));const yi=Ke[5];yi!=null&&typeof yi=="number"&&0<yi&&(O=1.5*yi,S.L=O,S.j.info("backChannelRequestTimeoutMs_="+O)),O=S;const Jr=h.g;if(Jr){const Ya=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ya){var X=O.h;X.g||Ya.indexOf("spdy")==-1&&Ya.indexOf("quic")==-1&&Ya.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Fa(X,X.h),X.h=null))}if(O.D){const Fc=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Fc&&(O.ya=Fc,dt(O.I,O.D,Fc))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),O=S;var te=h;if(O.qa=wh(O,O.J?O.ia:null,O.W),te.K){Ue(O.h,te);var lt=te,Ht=O.L;Ht&&(lt.I=Ht),lt.B&&(Ic(lt),Oa(lt)),O.g=te}else yh(O);0<S.i.length&&za(S)}else Ke[0]!="stop"&&Ke[0]!="close"||ks(S,7);else S.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?ks(S,7):Dc(S):Ke[0]!="noop"&&S.l&&S.l.ta(Ke),S.v=0)}}mr(4)}catch{}}var dg=class{constructor(h,v){this.g=h,this.map=v}};function Kd(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function jc(h){return h.h?1:h.g?h.g.size:0}function La(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Fa(h,v){h.g?h.g.add(v):h.h=v}function Ue(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Kd.prototype.cancel=function(){if(this.i=Jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Jd(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const S of h.g.values())v=v.concat(S.D);return v}return p(h.i)}function hg(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var v=[],S=h.length,O=0;O<S;O++)v.push(h[O]);return v}v=[],S=0;for(O in h)v[S++]=h[O];return v}function Yr(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var v=[];h=h.length;for(var S=0;S<h;S++)v.push(S);return v}v=[],S=0;for(const O in h)v[S++]=O;return v}}}function Xd(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var S=Yr(h),O=hg(h),W=O.length,X=0;X<W;X++)v.call(void 0,O[X],S&&S[X],h)}var Pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Va(h,v){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var O=h[S].indexOf("="),W=null;if(0<=O){var X=h[S].substring(0,O);W=h[S].substring(O+1)}else X=h[S];v(X,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function js(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof js){this.h=h.h,Ba(this,h.j),this.o=h.o,this.g=h.g,di(this,h.s),this.l=h.l;var v=h.i,S=new Fo;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),Zd(this,S),this.m=h.m}else h&&(v=String(h).match(Pc))?(this.h=!1,Ba(this,v[1]||"",!0),this.o=Ps(v[2]||""),this.g=Ps(v[3]||"",!0),di(this,v[4]),this.l=Ps(v[5]||"",!0),Zd(this,v[6]||"",!0),this.m=Ps(v[7]||"")):(this.h=!1,this.i=new Fo(null,this.h))}js.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Rr(v,eh,!0),":");var S=this.g;return(S||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Rr(v,eh,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Rr(S,S.charAt(0)=="/"?kn:fg,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Rr(S,mg)),h.join("")};function Kr(h){return new js(h)}function Ba(h,v,S){h.j=S?Ps(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function di(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Zd(h,v,S){v instanceof Fo?(h.i=v,pg(h.i,h.h)):(S||(v=Rr(v,th)),h.i=new Fo(v,h.h))}function dt(h,v,S){h.i.set(v,S)}function Ua(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ps(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Rr(h,v,S){return typeof h=="string"?(h=encodeURI(h).replace(v,kc),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function kc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var eh=/[#\/\?@]/g,fg=/[#\?:]/g,kn=/[#\?]/g,th=/[#\?@]/g,mg=/#/g;function Fo(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Zn(h){h.g||(h.g=new Map,h.h=0,h.i&&Va(h.i,function(v,S){h.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}t=Fo.prototype,t.add=function(h,v){Zn(this),this.i=null,h=hi(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(v),this.h+=1,this};function rh(h,v){Zn(h),v=hi(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function nh(h,v){return Zn(h),v=hi(h,v),h.g.has(v)}t.forEach=function(h,v){Zn(this),this.g.forEach(function(S,O){S.forEach(function(W){h.call(v,W,O,this)},this)},this)},t.na=function(){Zn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let O=0;O<v.length;O++){const W=h[O];for(let X=0;X<W.length;X++)S.push(v[O])}return S},t.V=function(h){Zn(this);let v=[];if(typeof h=="string")nh(this,h)&&(v=v.concat(this.g.get(hi(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)v=v.concat(h[S])}return v},t.set=function(h,v){return Zn(this),this.i=null,h=hi(this,h),nh(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function sh(h,v,S){rh(h,v),0<S.length&&(h.i=null,h.g.set(hi(h,v),p(S)),h.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var O=v[S];const X=encodeURIComponent(String(O)),te=this.V(O);for(O=0;O<te.length;O++){var W=X;te[O]!==""&&(W+="="+encodeURIComponent(String(te[O]))),h.push(W)}}return this.i=h.join("&")};function hi(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function pg(h,v){v&&!h.j&&(Zn(h),h.i=null,h.g.forEach(function(S,O){var W=O.toLowerCase();O!=W&&(rh(this,O),sh(this,W,S))},h)),h.j=v}function gg(h,v){const S=new As;if(l.Image){const O=new Image;O.onload=g(Ir,S,"TestLoadImage: loaded",!0,v,O),O.onerror=g(Ir,S,"TestLoadImage: error",!1,v,O),O.onabort=g(Ir,S,"TestLoadImage: abort",!1,v,O),O.ontimeout=g(Ir,S,"TestLoadImage: timeout",!1,v,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=h}else v(!1)}function yg(h,v){const S=new As,O=new AbortController,W=setTimeout(()=>{O.abort(),Ir(S,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:O.signal}).then(X=>{clearTimeout(W),X.ok?Ir(S,"TestPingServer: ok",!0,v):Ir(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),Ir(S,"TestPingServer: error",!1,v)})}function Ir(h,v,S,O,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),O(S)}catch{}}function ih(){this.g=new Tc}function oh(h,v,S){const O=S||"";try{Xd(h,function(W,X){let te=W;u(W)&&(te=Ar(W)),v.push(O+X+"="+encodeURIComponent(te))})}catch(W){throw v.push(O+"type="+encodeURIComponent("_badmap")),W}}function Vo(h){this.l=h.Ub||null,this.j=h.eb||!1}x(Vo,je),Vo.prototype.g=function(){return new qa(this.l,this.j)},Vo.prototype.i=function(h){return function(){return h}}({});function qa(h,v){It.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(qa,It),t=qa.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Bo(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Bo(this)),this.g&&(this.readyState=3,Bo(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ah(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ah(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?fi(this):Bo(this),this.readyState==3&&ah(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,fi(this))},t.Qa=function(h){this.g&&(this.response=h,fi(this))},t.ga=function(){this.g&&fi(this)};function fi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Bo(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=v.next();return h.join(`\r
`)};function Bo(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function lh(h){let v="";return V(h,function(S,O){v+=O,v+=":",v+=S,v+=`\r
`}),v}function Mc(h,v,S){e:{for(O in S){var O=!1;break e}O=!0}O||(S=lh(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):dt(h,v,S))}function Et(h){It.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Et,It);var vg=/^https?$/i,xg=["POST","PUT"];t=Et.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,S,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ma.g(),this.v=this.o?ze(this.o):ze(Ma),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(X){ch(this,X);return}if(h=S||"",S=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var W in O)S.set(W,O[W]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const X of O.keys())S.set(X,O.get(X));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(S.keys()).find(X=>X.toLowerCase()=="content-type"),W=l.FormData&&h instanceof l.FormData,!(0<=Array.prototype.indexOf.call(xg,v,void 0))||O||W||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,te]of S)this.g.setRequestHeader(X,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$a(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){ch(this,X)}};function ch(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,uh(h),Ga(h)}function uh(h){h.A||(h.A=!0,bt(h,"complete"),bt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,bt(this,"complete"),bt(this,"abort"),Ga(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ga(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dh(this):this.bb())},t.bb=function(){dh(this)};function dh(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Mn(h)!=4||h.Z()!=2)){if(h.u&&Mn(h)==4)Sn(h.Ea,0,h);else if(bt(h,"readystatechange"),Mn(h)==4){h.h=!1;try{const te=h.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var O;if(O=te===0){var W=String(h.D).match(Pc)[1]||null;!W&&l.self&&l.self.location&&(W=l.self.location.protocol.slice(0,-1)),O=!vg.test(W?W.toLowerCase():"")}S=O}if(S)bt(h,"complete"),bt(h,"success");else{h.m=6;try{var X=2<Mn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",uh(h)}}finally{Ga(h)}}}}function Ga(h,v){if(h.g){$a(h);const S=h.g,O=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||bt(h,"ready");try{S.onreadystatechange=O}catch{}}}function $a(h){h.I&&(l.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Mn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Sr(v)}};function hh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function wg(h){const v={};h=(h.g&&2<=Mn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<h.length;O++){if(w(h[O]))continue;var S=L(h[O]);const W=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const X=v[W]||[];v[W]=X,X.push(S)}R(v,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(h,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||v}function fh(h){this.Aa=0,this.i=[],this.j=new As,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mi("baseRetryDelayMs",5e3,h),this.cb=mi("retryDelaySeedMs",1e4,h),this.Wa=mi("forwardChannelMaxRetries",2,h),this.wa=mi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Kd(h&&h.concurrentRequestLimit),this.Da=new ih,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fh.prototype,t.la=8,t.G=1,t.connect=function(h,v,S,O){ir(0),this.W=h,this.H=v||{},S&&O!==void 0&&(this.H.OSID=S,this.H.OAID=O),this.F=this.X,this.I=wh(this,null,this.W),za(this)};function Dc(h){if(mh(h),h.G==3){var v=h.U++,S=Kr(h.I);if(dt(S,"SID",h.K),dt(S,"RID",v),dt(S,"TYPE","terminate"),qo(h,S),v=new Pn(h,h.j,v),v.L=2,v.v=Ua(Kr(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&l.Image&&(new Image().src=v.v,S=!0),S||(v.g=bh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Oa(v)}pi(h)}function Uo(h){h.g&&(Lc(h),h.g.cancel(),h.g=null)}function mh(h){Uo(h),h.u&&(l.clearTimeout(h.u),h.u=null),Ha(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&l.clearTimeout(h.s),h.s=null)}function za(h){if(!Lo(h.h)&&!h.s){h.s=!0;var v=h.Ga;Z||ie(),U||(Z(),U=!0),H.add(v,h),h.B=0}}function bg(h,v){return jc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ts(m(h.Ga,h,v),Wa(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new Pn(this,this.j,h);let X=this.o;if(this.S&&(X?(X=_(X),k(X,this.S)):X=this.S),this.m!==null||this.O||(W.H=X,X=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var O=this.i[S];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=gh(this,W,v),S=Kr(this.I),dt(S,"RID",h),dt(S,"CVER",22),this.D&&dt(S,"X-HTTP-Session-Id",this.D),qo(this,S),X&&(this.O?v="headers="+encodeURIComponent(String(lh(X)))+"&"+v:this.m&&Mc(S,this.m,X)),Fa(this.h,W),this.Ua&&dt(S,"TYPE","init"),this.P?(dt(S,"$req",v),dt(S,"SID","null"),W.T=!0,Sc(W,S,null)):Sc(W,S,v),this.G=2}}else this.G==3&&(h?ph(this,h):this.i.length==0||Lo(this.h)||ph(this))};function ph(h,v){var S;v?S=v.l:S=h.U++;const O=Kr(h.I);dt(O,"SID",h.K),dt(O,"RID",S),dt(O,"AID",h.T),qo(h,O),h.m&&h.o&&Mc(O,h.m,h.o),S=new Pn(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),v&&(h.i=v.D.concat(h.i)),v=gh(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Fa(h.h,S),Sc(S,O,v)}function qo(h,v){h.H&&V(h.H,function(S,O){dt(v,O,S)}),h.l&&Xd({},function(S,O){dt(v,O,S)})}function gh(h,v,S){S=Math.min(h.i.length,S);var O=h.l?m(h.l.Na,h.l,h):null;e:{var W=h.i;let X=-1;for(;;){const te=["count="+S];X==-1?0<S?(X=W[0].g,te.push("ofs="+X)):X=0:te.push("ofs="+X);let lt=!0;for(let Ht=0;Ht<S;Ht++){let Ke=W[Ht].g;const Xt=W[Ht].map;if(Ke-=X,0>Ke)X=Math.max(0,W[Ht].g-100),lt=!1;else try{oh(Xt,te,"req"+Ke+"_")}catch{O&&O(Xt)}}if(lt){O=te.join("&");break e}}}return h=h.i.splice(0,S),v.D=h,O}function yh(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;Z||ie(),U||(Z(),U=!0),H.add(v,h),h.v=0}}function Oc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ts(m(h.Fa,h),Wa(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,vh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ts(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ir(10),Uo(this),vh(this))};function Lc(h){h.A!=null&&(l.clearTimeout(h.A),h.A=null)}function vh(h){h.g=new Pn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Kr(h.qa);dt(v,"RID","rpc"),dt(v,"SID",h.K),dt(v,"AID",h.T),dt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(v,"TO",h.ja),dt(v,"TYPE","xmlhttp"),qo(h,v),h.m&&h.o&&Mc(v,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=Ua(Kr(v)),S.m=null,S.P=!0,Da(S,h)}t.Za=function(){this.C!=null&&(this.C=null,Uo(this),Oc(this),ir(19))};function Ha(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function xh(h,v){var S=null;if(h.g==v){Ha(h),Lc(h),h.g=null;var O=2}else if(La(h.h,v))S=v.D,Ue(h.h,v),O=1;else return;if(h.G!=0){if(v.o)if(O==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var W=h.B;O=Qe(),bt(O,new zd(O,S)),za(h)}else yh(h);else if(W=v.s,W==3||W==0&&0<v.X||!(O==1&&bg(h,v)||O==2&&Oc(h)))switch(S&&0<S.length&&(v=h.h,v.i=v.i.concat(S)),W){case 1:ks(h,5);break;case 4:ks(h,10);break;case 3:ks(h,6);break;default:ks(h,2)}}}function Wa(h,v){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*v}function ks(h,v){if(h.j.info("Error code "+v),v==2){var S=m(h.fb,h),O=h.Xa;const W=!O;O=new js(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ba(O,"https"),Ua(O),W?gg(O.toString(),S):yg(O.toString(),S)}else ir(2);h.G=0,h.l&&h.l.sa(v),pi(h),mh(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ir(2)):(this.j.info("Failed to ping google.com"),ir(1))};function pi(h){if(h.G=0,h.ka=[],h.l){const v=Jd(h.h);(v.length!=0||h.i.length!=0)&&(b(h.ka,v),b(h.ka,h.i),h.h.i.length=0,p(h.i),h.i.length=0),h.l.ra()}}function wh(h,v,S){var O=S instanceof js?Kr(S):new js(S);if(O.g!="")v&&(O.g=v+"."+O.g),di(O,O.s);else{var W=l.location;O=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var X=new js(null);O&&Ba(X,O),v&&(X.g=v),W&&di(X,W),S&&(X.l=S),O=X}return S=h.D,v=h.ya,S&&v&&dt(O,S,v),dt(O,"VER",h.la),qo(h,O),O}function bh(h,v,S){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Et(new Vo({eb:S})):new Et(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eh(){}t=Eh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qa(){}Qa.prototype.g=function(h,v){return new jr(h,v)};function jr(h,v){It.call(this),this.g=new fh(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!w(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!w(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new gi(this)}x(jr,It),jr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jr.prototype.close=function(){Dc(this.g)},jr.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=Ar(h),h=S);v.i.push(new dg(v.Ya++,h)),v.G==3&&za(v)},jr.prototype.N=function(){this.g.l=null,delete this.j,Dc(this.g),delete this.g,jr.aa.N.call(this)};function Ch(h){fr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const S in v){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}x(Ch,fr);function Nh(){jn.call(this),this.status=1}x(Nh,jn);function gi(h){this.g=h}x(gi,Eh),gi.prototype.ua=function(){bt(this.g,"a")},gi.prototype.ta=function(h){bt(this.g,new Ch(h))},gi.prototype.sa=function(h){bt(this.g,new Nh)},gi.prototype.ra=function(){bt(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,jr.prototype.send=jr.prototype.o,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,ZA=function(){return new Qa},XA=function(){return Qe()},JA=gt,ky={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,Tf=Rs,ka.COMPLETE="complete",KA=ka,et.EventType=Jt,Jt.OPEN="a",Jt.CLOSE="b",Jt.ERROR="c",Jt.MESSAGE="d",It.prototype.listen=It.prototype.K,su=et,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,YA=Et}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});const sE="@firebase/firestore",iE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new $x("@firebase/firestore");function el(){return ma.logLevel}function we(t,...e){if(ma.logLevel<=He.DEBUG){const r=e.map(Qx);ma.debug(`Firestore (${fc}): ${t}`,...r)}}function Zs(t,...e){if(ma.logLevel<=He.ERROR){const r=e.map(Qx);ma.error(`Firestore (${fc}): ${t}`,...r)}}function oo(t,...e){if(ma.logLevel<=He.WARN){const r=e.map(Qx);ma.warn(`Firestore (${fc}): ${t}`,...r)}}function Qx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,eS(t,n,r)}function eS(t,e,r){let n=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Zs(n),new Error(n)}function it(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||eS(e,s,n)}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends oi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(wr.UNAUTHENTICATED))}shutdown(){}}class nL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class sL{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){it(this.o===void 0,42304);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let i=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hs)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(it(typeof n.accessToken=="string",31837,{l:n}),new tS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new wr(e)}}class iL{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=wr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oL{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new iL(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aL{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){it(this.o===void 0,3512);const n=i=>{i.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,we("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(it(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new oE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=lL(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function Be(t,e){return t<e?-1:t>e?1:0}function My(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),s=e.codePointAt(r);if(n!==s){if(n<128&&s<128)return Be(n,s);{const i=rS(),a=cL(i.encode(aE(t,r)),i.encode(aE(e,r)));return a!==0?a:Be(n,s)}}r+=n>65535?2:1}return Be(t.length,e.length)}function aE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function cL(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return Be(t[r],e[r]);return Be(t.length,e.length)}function Jl(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="__name__";class ns{constructor(e,r,n){r===void 0?r=0:r>e.length&&ke(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&ke(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ns.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ns?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=ns.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return Be(e.length,r.length)}static compareSegments(e,r){const n=ns.isNumericId(e),s=ns.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?ns.extractNumericId(e).compare(ns.extractNumericId(r)):My(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return eo.fromString(e.substring(4,e.length-2))}}class mt extends ns{construct(e,r,n){return new mt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new mt(r)}static emptyPath(){return new mt([])}}const uL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends ns{construct(e,r,n){return new lr(e,r,n)}static isValidIdentifier(e){return uL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lE}static keyField(){return new lr([lE])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(n+=l,s++):(i(),s++)}if(i(),a)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(r)}static emptyPath(){return new lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(mt.fromString(e))}static fromName(e){return new Ae(mt.fromString(e).popFirst(5))}static empty(){return new Ae(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return mt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e,r){if(!r)throw new ye(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dL(t,e,r,n){if(e===!0&&n===!0)throw new ye(re.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function cE(t){if(!Ae.isDocumentKey(t))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uE(t){if(Ae.isDocumentKey(t))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function an(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=gp(t);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t,e){const r={typeString:t};return e&&(r.value=e),r}function Sd(t,e){if(!sS(t))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(s&&typeof a!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new ye(re.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=-62135596800,hE=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*hE);return new Ve(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<dE)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hE}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sd(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:Gt("string",Ve._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Ve(0,0))}static max(){return new De(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=-1;function hL(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=De.fromTimestamp(n===1e9?new Ve(r+1,0):new Ve(r,n));return new ao(s,Ae.empty(),e)}function fL(t){return new ao(t.readTime,t.key,Ju)}class ao{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ao(De.min(),Ae.empty(),Ju)}static max(){return new ao(De.max(),Ae.empty(),Ju)}}function mL(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ae.comparator(t.documentKey,e.documentKey),r!==0?r:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==pL)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new se((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof se?r:se.resolve(r)}catch(r){return se.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):se.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):se.reject(r)}static resolve(e){return new se((r,n)=>{r(e)})}static reject(e){return new se((r,n)=>{n(e)})}static waitFor(e){return new se((r,n)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&r()},c=>n(c))}),a=!0,i===s&&r()})}static or(e){let r=se.resolve(!1);for(const n of e)r=r.next(s=>s?se.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new se((n,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;r(e[u]).next(d=>{a[u]=d,++l,l===i&&n(a)},d=>s(d))}})}static doWhile(e,r){return new se((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function yL(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function pc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this._e(n),this.ae=n=>r.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}yp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=-1;function vp(t){return t==null}function xm(t){return t===0&&1/t==-1/0}function vL(t){return typeof t=="number"&&Number.isInteger(t)&&!xm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="";function xL(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=fE(e)),e=wL(t.get(r),e);return fE(e)}function wL(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case iS:r+="";break;default:r+=i}}return r}function fE(t){return t+iS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Co(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function oS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,r){this.comparator=e,this.root=r||ar.EMPTY}insert(e,r){return new Rt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jh(this.root,e,this.comparator,!0)}}class Jh{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ar{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ar.RED,this.left=s??ar.EMPTY,this.right=i??ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ar(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ar.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new ar(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(e){return new pE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Kt(this.comparator);return r.data=e,r}}class pE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new sn([])}unionWith(e){let r=new Kt(lr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new sn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new aS("Invalid base64 string: "+i):i}}(e);return new dr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new dr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const bL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lo(t){if(it(!!t,39018),typeof t=="string"){let e=0;const r=bL.exec(t);if(it(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function co(t){return typeof t=="string"?dr.fromBase64String(t):dr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="server_timestamp",cS="__type__",uS="__previous_value__",dS="__local_write_time__";function Jx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[cS])===null||r===void 0?void 0:r.stringValue)===lS}function xp(t){const e=t.mapValue.fields[uS];return Jx(e)?xp(e):e}function Xu(t){const e=lo(t.mapValue.fields[dS].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,r,n,s,i,a,l,c,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const wm="(default)";class Zu{constructor(e,r){this.projectId=e,this.database=r||wm}static empty(){return new Zu("","")}get isDefaultDatabase(){return this.database===wm}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="__type__",fS="__max__",Xh={mapValue:{fields:{__type__:{stringValue:fS}}}},mS="__vector__",bm="value";function uo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jx(t)?4:NL(t)?9007199254740991:CL(t)?10:11:ke(28295,{value:t})}function xs(t,e){if(t===e)return!0;const r=uo(t);if(r!==uo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xu(t).isEqual(Xu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=lo(s.timestampValue),l=lo(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return co(s.bytesValue).isEqual(co(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Dt(s.geoPointValue.latitude)===Dt(i.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Dt(s.integerValue)===Dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Dt(s.doubleValue),l=Dt(i.doubleValue);return a===l?xm(a)===xm(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],xs);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(mE(a)!==mE(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!xs(a[c],l[c])))return!1;return!0}(t,e);default:return ke(52216,{left:t})}}function ed(t,e){return(t.values||[]).find(r=>xs(r,e))!==void 0}function Xl(t,e){if(t===e)return 0;const r=uo(t),n=uo(e);if(r!==n)return Be(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Dt(i.integerValue||i.doubleValue),c=Dt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return gE(t.timestampValue,e.timestampValue);case 4:return gE(Xu(t),Xu(e));case 5:return My(t.stringValue,e.stringValue);case 6:return function(i,a){const l=co(i),c=co(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Be(l[u],c[u]);if(d!==0)return d}return Be(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Be(Dt(i.latitude),Dt(a.latitude));return l!==0?l:Be(Dt(i.longitude),Dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yE(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,c,u,d;const f=i.fields||{},m=a.fields||{},g=(l=f[bm])===null||l===void 0?void 0:l.arrayValue,x=(c=m[bm])===null||c===void 0?void 0:c.arrayValue,p=Be(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:yE(g,x)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Xh.mapValue&&a===Xh.mapValue)return 0;if(i===Xh.mapValue)return 1;if(a===Xh.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=My(c[f],d[f]);if(m!==0)return m;const g=Xl(l[c[f]],u[d[f]]);if(g!==0)return g}return Be(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ke(23264,{le:r})}}function gE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const r=lo(t),n=lo(e),s=Be(r.seconds,n.seconds);return s!==0?s:Be(r.nanos,n.nanos)}function yE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Xl(r[s],n[s]);if(i)return i}return Be(r.length,n.length)}function Zl(t){return Dy(t)}function Dy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=lo(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return co(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ae.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Dy(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Dy(r.fields[a])}`;return s+"}"}(t.mapValue):ke(61005,{value:t})}function Af(t){switch(uo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xp(t);return e?16+Af(e):16;case 5:return 2*t.stringValue.length;case 6:return co(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+Af(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Co(n.fields,(i,a)=>{s+=i.length+Af(a)}),s}(t.mapValue);default:throw ke(13486,{value:t})}}function vE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Oy(t){return!!t&&"integerValue"in t}function Xx(t){return!!t&&"arrayValue"in t}function xE(t){return!!t&&"nullValue"in t}function wE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sf(t){return!!t&&"mapValue"in t}function CL(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[hS])===null||r===void 0?void 0:r.stringValue)===mS}function Cu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Co(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Cu(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Cu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function NL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.value=e}static empty(){return new Gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Sf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cu(r)}setAll(e){let r=lr.emptyPath(),n={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}a?n[l.lastSegment()]=Cu(a):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Sf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return xs(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Sf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Co(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Gr(Cu(this.value))}}function pS(t){const e=[];return Co(t.fields,(r,n)=>{const s=new lr([r]);if(Sf(n)){const i=pS(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,r,n,s,i,a,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Er(e,0,De.min(),De.min(),De.min(),Gr.empty(),0)}static newFoundDocument(e,r,n,s){return new Er(e,1,r,De.min(),n,s,0)}static newNoDocument(e,r){return new Er(e,2,r,De.min(),De.min(),Gr.empty(),0)}static newUnknownDocument(e,r){return new Er(e,3,r,De.min(),De.min(),Gr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,r){this.position=e,this.inclusive=r}}function bE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=Ae.comparator(Ae.fromName(a.referenceValue),r.key):n=Xl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function EE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!xs(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,r="asc"){this.field=e,this.dir=r}}function _L(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{}class qt extends gS{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new AL(e,r,n):r==="array-contains"?new IL(e,n):r==="in"?new jL(e,n):r==="not-in"?new PL(e,n):r==="array-contains-any"?new kL(e,n):new qt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new SL(e,n):new RL(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Xl(r,this.value)):r!==null&&uo(this.value)===uo(r)&&this.matchesComparison(Xl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends gS{constructor(e,r){super(),this.filters=e,this.op=r,this.he=null}static create(e,r){return new Qn(e,r)}matches(e){return yS(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function yS(t){return t.op==="and"}function vS(t){return TL(t)&&yS(t)}function TL(t){for(const e of t.filters)if(e instanceof Qn)return!1;return!0}function Ly(t){if(t instanceof qt)return t.field.canonicalString()+t.op.toString()+Zl(t.value);if(vS(t))return t.filters.map(e=>Ly(e)).join(",");{const e=t.filters.map(r=>Ly(r)).join(",");return`${t.op}(${e})`}}function xS(t,e){return t instanceof qt?function(n,s){return s instanceof qt&&n.op===s.op&&n.field.isEqual(s.field)&&xs(n.value,s.value)}(t,e):t instanceof Qn?function(n,s){return s instanceof Qn&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,l)=>i&&xS(a,s.filters[l]),!0):!1}(t,e):void ke(19439)}function wS(t){return t instanceof qt?function(r){return`${r.field.canonicalString()} ${r.op} ${Zl(r.value)}`}(t):t instanceof Qn?function(r){return r.op.toString()+" {"+r.getFilters().map(wS).join(" ,")+"}"}(t):"Filter"}class AL extends qt{constructor(e,r,n){super(e,r,n),this.key=Ae.fromName(n.referenceValue)}matches(e){const r=Ae.comparator(e.key,this.key);return this.matchesComparison(r)}}class SL extends qt{constructor(e,r){super(e,"in",r),this.keys=bS("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class RL extends qt{constructor(e,r){super(e,"not-in",r),this.keys=bS("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function bS(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ae.fromName(n.referenceValue))}class IL extends qt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Xx(r)&&ed(r.arrayValue,this.value)}}class jL extends qt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ed(this.value.arrayValue,r)}}class PL extends qt{constructor(e,r){super(e,"not-in",r)}matches(e){if(ed(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!ed(this.value.arrayValue,r)}}class kL extends qt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Xx(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ed(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,r=null,n=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function CE(t,e=null,r=[],n=[],s=null,i=null,a=null){return new ML(t,e,r,n,s,i,a)}function Zx(t){const e=Oe(t);if(e.Pe===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Ly(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),vp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Zl(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Zl(n)).join(",")),e.Pe=r}return e.Pe}function ew(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!_L(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!xS(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!EE(t.startAt,e.startAt)&&EE(t.endAt,e.endAt)}function Fy(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,r=null,n=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function DL(t,e,r,n,s,i,a,l){return new gc(t,e,r,n,s,i,a,l)}function wp(t){return new gc(t)}function NE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ES(t){return t.collectionGroup!==null}function Nu(t){const e=Oe(t);if(e.Te===null){e.Te=[];const r=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Kt(lr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Te.push(new td(i,n))}),r.has(lr.keyField().canonicalString())||e.Te.push(new td(lr.keyField(),n))}return e.Te}function fs(t){const e=Oe(t);return e.Ie||(e.Ie=OL(e,Nu(t))),e.Ie}function OL(t,e){if(t.limitType==="F")return CE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new td(s.field,i)});const r=t.endAt?new Em(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Em(t.startAt.position,t.startAt.inclusive):null;return CE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Vy(t,e){const r=t.filters.concat([e]);return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function By(t,e,r){return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function bp(t,e){return ew(fs(t),fs(e))&&t.limitType===e.limitType}function CS(t){return`${Zx(fs(t))}|lt:${t.limitType}`}function tl(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>wS(s)).join(", ")}]`),vp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Zl(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Zl(s)).join(",")),`Target(${n})`}(fs(t))}; limitType=${t.limitType})`}function Ep(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ae.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Nu(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,l,c){const u=bE(a,l,c);return a.inclusive?u<=0:u<0}(n.startAt,Nu(n),s)||n.endAt&&!function(a,l,c){const u=bE(a,l,c);return a.inclusive?u>=0:u>0}(n.endAt,Nu(n),s))}(t,e)}function LL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NS(t){return(e,r)=>{let n=!1;for(const s of Nu(t)){const i=FL(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function FL(t,e,r){const n=t.field.isKeyField()?Ae.comparator(e.key,r.key):function(i,a,l){const c=a.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Xl(c,u):ke(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ke(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return oS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=new Rt(Ae.comparator);function ei(){return VL}const _S=new Rt(Ae.comparator);function iu(...t){let e=_S;for(const r of t)e=e.insert(r.key,r);return e}function TS(t){let e=_S;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Yo(){return _u()}function AS(){return _u()}function _u(){return new _a(t=>t.toString(),(t,e)=>t.isEqual(e))}const BL=new Rt(Ae.comparator),UL=new Kt(Ae.comparator);function We(...t){let e=UL;for(const r of t)e=e.add(r);return e}const qL=new Kt(Be);function GL(){return qL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xm(e)?"-0":e}}function SS(t){return{integerValue:""+t}}function RS(t,e){return vL(e)?SS(e):tw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(){this._=void 0}}function $L(t,e,r){return t instanceof Cm?function(s,i){const a={fields:{[cS]:{stringValue:lS},[dS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Jx(i)&&(i=xp(i)),i&&(a.fields[uS]=i),{mapValue:a}}(r,e):t instanceof rd?jS(t,e):t instanceof nd?PS(t,e):function(s,i){const a=IS(s,i),l=_E(a)+_E(s.Ee);return Oy(a)&&Oy(s.Ee)?SS(l):tw(s.serializer,l)}(t,e)}function zL(t,e,r){return t instanceof rd?jS(t,e):t instanceof nd?PS(t,e):r}function IS(t,e){return t instanceof sd?function(n){return Oy(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Cm extends Cp{}class rd extends Cp{constructor(e){super(),this.elements=e}}function jS(t,e){const r=kS(e);for(const n of t.elements)r.some(s=>xs(s,n))||r.push(n);return{arrayValue:{values:r}}}class nd extends Cp{constructor(e){super(),this.elements=e}}function PS(t,e){let r=kS(e);for(const n of t.elements)r=r.filter(s=>!xs(s,n));return{arrayValue:{values:r}}}class sd extends Cp{constructor(e,r){super(),this.serializer=e,this.Ee=r}}function _E(t){return Dt(t.integerValue||t.doubleValue)}function kS(t){return Xx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,r){this.field=e,this.transform=r}}function WL(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof rd&&s instanceof rd||n instanceof nd&&s instanceof nd?Jl(n.elements,s.elements,xs):n instanceof sd&&s instanceof sd?xs(n.Ee,s.Ee):n instanceof Cm&&s instanceof Cm}(t.transform,e.transform)}class QL{constructor(e,r){this.version=e,this.transformResults=r}}class Hn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let Np=class{};function MS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rw(t.key,Hn.none()):new Rd(t.key,t.data,Hn.none());{const r=t.data,n=Gr.empty();let s=new Kt(lr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new No(t.key,n,new sn(s.toArray()),Hn.none())}}function YL(t,e,r){t instanceof Rd?function(s,i,a){const l=s.value.clone(),c=AE(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):t instanceof No?function(s,i,a){if(!Rf(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=AE(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(DS(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Tu(t,e,r,n){return t instanceof Rd?function(i,a,l,c){if(!Rf(i.precondition,a))return l;const u=i.value.clone(),d=SE(i.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof No?function(i,a,l,c){if(!Rf(i.precondition,a))return l;const u=SE(i.fieldTransforms,c,a),d=a.data;return d.setAll(DS(i)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,l){return Rf(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,r)}function KL(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=IS(n.transform,s||null);i!=null&&(r===null&&(r=Gr.empty()),r.set(n.field,i))}return r||null}function TE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Jl(n,s,(i,a)=>WL(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rd extends Np{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class No extends Np{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function DS(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function AE(t,e,r){const n=new Map;it(t.length===r.length,32656,{Ae:r.length,Re:t.length});for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);n.set(i.field,zL(a,l,r[s]))}return n}function SE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,$L(i,a,e))}return n}class rw extends Np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JL extends Np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&YL(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Tu(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Tu(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=AS();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=r.has(s.key)?null:l;const c=MS(a,l);c!==null&&n.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(De.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),We())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(r,n)=>TE(r,n))&&Jl(this.baseMutations,e.baseMutations,(r,n)=>TE(r,n))}}class nw{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){it(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let s=function(){return BL}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new nw(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Je;function tF(t){switch(t){case re.OK:return ke(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function OS(t){if(t===void 0)return Zs("GRPC error has no .code"),re.UNKNOWN;switch(t){case Bt.OK:return re.OK;case Bt.CANCELLED:return re.CANCELLED;case Bt.UNKNOWN:return re.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return re.INTERNAL;case Bt.UNAVAILABLE:return re.UNAVAILABLE;case Bt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Bt.NOT_FOUND:return re.NOT_FOUND;case Bt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Bt.ABORTED:return re.ABORTED;case Bt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Bt.DATA_LOSS:return re.DATA_LOSS;default:return ke(39323,{code:t})}}(Je=Bt||(Bt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=new eo([4294967295,4294967295],0);function RE(t){const e=rS().encode(t),r=new QA;return r.update(e),new Uint8Array(r.digest())}function IE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new eo([r,n],0),new eo([s,i],0)]}class sw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ou(`Invalid padding: ${r}`);if(n<0)throw new ou(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ou(`Invalid padding when bitmap length is 0: ${r}`);this.fe=8*e.length-r,this.ge=eo.fromNumber(this.fe)}pe(e,r,n){let s=e.add(r.multiply(eo.fromNumber(n)));return s.compare(rF)===1&&(s=new eo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const r=RE(e),[n,s]=IE(r);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);if(!this.ye(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new sw(i,s,r);return n.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const r=RE(e),[n,s]=IE(r);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);this.we(a)}}we(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Id.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new _p(De.min(),s,new Rt(Be),ei(),We())}}class Id{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Id(n,r,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,r,n,s){this.Se=e,this.removedTargetIds=r,this.key=n,this.be=s}}class LS{constructor(e,r){this.targetId=e,this.De=r}}class FS{constructor(e,r,n=dr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class jE{constructor(){this.ve=0,this.Ce=PE(),this.Fe=dr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=We(),r=We(),n=We();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:ke(38017,{changeType:i})}}),new Id(this.Fe,this.Me,e,r,n)}ke(){this.xe=!1,this.Ce=PE()}qe(e,r){this.xe=!0,this.Ce=this.Ce.insert(e,r)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class nF{constructor(e){this.We=e,this.Ge=new Map,this.ze=ei(),this.je=Zh(),this.Je=Zh(),this.He=new Rt(Be)}Ye(e){for(const r of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(r,e.be):this.Xe(r,e.key,e.be);for(const r of e.removedTargetIds)this.Xe(r,e.key,e.be)}et(e){this.forEachTarget(e,r=>{const n=this.tt(r);switch(e.state){case 0:this.nt(r)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(r);break;case 3:this.nt(r)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(r)&&(this.rt(r),n.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Ge.forEach((n,s)=>{this.nt(s)&&r(s)})}it(e){const r=e.targetId,n=e.De.count,s=this.st(r);if(s){const i=s.target;if(Fy(i))if(n===0){const a=new Ae(i.path);this.Xe(r,a,Er.newNoDocument(a,De.min()))}else it(n===1,20013,{expectedCount:n});else{const a=this.ot(r);if(a!==n){const l=this._t(e),c=l?this.ut(l,e,a):1;if(c!==0){this.rt(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(r,u)}}}}}_t(e){const r=e.De.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,l;try{a=co(n).toUint8Array()}catch(c){if(c instanceof aS)return oo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new sw(a,s,i)}catch(c){return oo(c instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,r,n){return r.De.count===n-this.ht(e,r.targetId)?0:2}ht(e,r){const n=this.We.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(r,i,null),s++)}),s}Pt(e){const r=new Map;this.Ge.forEach((i,a)=>{const l=this.st(a);if(l){if(i.current&&Fy(l.target)){const c=new Ae(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,Er.newNoDocument(c,e))}i.Ne&&(r.set(a,i.Le()),i.ke())}});let n=We();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.ze.forEach((i,a)=>a.setReadTime(e));const s=new _p(e,r,this.He,this.ze,n);return this.ze=ei(),this.je=Zh(),this.Je=Zh(),this.He=new Rt(Be),s}Ze(e,r){if(!this.nt(e))return;const n=this.It(e,r.key)?2:0;this.tt(e).qe(r.key,n),this.ze=this.ze.insert(r.key,r),this.je=this.je.insert(r.key,this.Tt(r.key).add(e)),this.Je=this.Je.insert(r.key,this.dt(r.key).add(e))}Xe(e,r,n){if(!this.nt(e))return;const s=this.tt(e);this.It(e,r)?s.qe(r,1):s.Qe(r),this.Je=this.Je.insert(r,this.dt(r).delete(e)),this.Je=this.Je.insert(r,this.dt(r).add(e)),n&&(this.ze=this.ze.insert(r,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const r=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let r=this.Ge.get(e);return r||(r=new jE,this.Ge.set(e,r)),r}dt(e){let r=this.Je.get(e);return r||(r=new Kt(Be),this.Je=this.Je.insert(e,r)),r}Tt(e){let r=this.je.get(e);return r||(r=new Kt(Be),this.je=this.je.insert(e,r)),r}nt(e){const r=this.st(e)!==null;return r||we("WatchChangeAggregator","Detected inactive target",e),r}st(e){const r=this.Ge.get(e);return r&&r.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jE),this.We.getRemoteKeysForTarget(e).forEach(r=>{this.Xe(e,r,null)})}It(e,r){return this.We.getRemoteKeysForTarget(e).has(r)}}function Zh(){return new Rt(Ae.comparator)}function PE(){return new Rt(Ae.comparator)}const sF={asc:"ASCENDING",desc:"DESCENDING"},iF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oF={and:"AND",or:"OR"};class aF{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Uy(t,e){return t.useProto3Json||vp(e)?e:{value:e}}function Nm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lF(t,e){return Nm(t,e.toTimestamp())}function ms(t){return it(!!t,49232),De.fromTimestamp(function(r){const n=lo(r);return new Ve(n.seconds,n.nanos)}(t))}function iw(t,e){return qy(t,e).canonicalString()}function qy(t,e){const r=function(s){return new mt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function BS(t){const e=mt.fromString(t);return it(zS(e),10190,{key:e.toString()}),e}function Gy(t,e){return iw(t.databaseId,e.path)}function l0(t,e){const r=BS(e);if(r.get(1)!==t.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ae(qS(r))}function US(t,e){return iw(t.databaseId,e)}function cF(t){const e=BS(t);return e.length===4?mt.emptyPath():qS(e)}function $y(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qS(t){return it(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kE(t,e,r){return{name:Gy(t,e),fields:r.value.mapValue.fields}}function uF(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ke(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(it(d===void 0||typeof d=="string",58123),dr.fromBase64String(d||"")):(it(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),dr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const d=u.code===void 0?re.UNKNOWN:OS(u.code);return new ye(d,u.message||"")}(a);r=new FS(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=l0(t,n.document.name),i=ms(n.document.updateTime),a=n.document.createTime?ms(n.document.createTime):De.min(),l=new Gr({mapValue:{fields:n.document.fields}}),c=Er.newFoundDocument(s,i,a,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new If(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=l0(t,n.document),i=n.readTime?ms(n.readTime):De.min(),a=Er.newNoDocument(s,i),l=n.removedTargetIds||[];r=new If([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=l0(t,n.document),i=n.removedTargetIds||[];r=new If([],i,s,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new eF(s,i),l=n.targetId;r=new LS(l,a)}}return r}function dF(t,e){let r;if(e instanceof Rd)r={update:kE(t,e.key,e.value)};else if(e instanceof rw)r={delete:Gy(t,e.key)};else if(e instanceof No)r={update:kE(t,e.key,e.data),updateMask:wF(e.fieldMask)};else{if(!(e instanceof JL))return ke(16599,{Rt:e.type});r={verify:Gy(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const l=a.transform;if(l instanceof Cm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof rd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof nd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sd)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw ke(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:lF(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ke(27497)}(t,e.precondition)),r}function hF(t,e){return t&&t.length>0?(it(e!==void 0,14353),t.map(r=>function(s,i){let a=s.updateTime?ms(s.updateTime):ms(i);return a.isEqual(De.min())&&(a=ms(i)),new QL(a,s.transformResults||[])}(r,e))):[]}function fF(t,e){return{documents:[US(t,e.path)]}}function mF(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=US(t,s);const i=function(u){if(u.length!==0)return $S(Qn.create(u,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:rl(m.field),direction:yF(m.dir)}}(d))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=Uy(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:r,parent:s}}function pF(t){let e=cF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){it(n===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];r.where&&(i=function(f){const m=GS(f);return m instanceof Qn&&vS(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(m=>function(x){return new td(nl(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,vp(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new Em(g,m)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new Em(g,m)}(r.endAt)),DL(e,s,a,i,l,"F",c,u)}function gF(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function GS(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=nl(r.unaryFilter.field);return qt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=nl(r.unaryFilter.field);return qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=nl(r.unaryFilter.field);return qt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=nl(r.unaryFilter.field);return qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}}(t):t.fieldFilter!==void 0?function(r){return qt.create(nl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Qn.create(r.compositeFilter.filters.map(n=>GS(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}}(r.compositeFilter.op))}(t):ke(30097,{filter:t})}function yF(t){return sF[t]}function vF(t){return iF[t]}function xF(t){return oF[t]}function rl(t){return{fieldPath:t.canonicalString()}}function nl(t){return lr.fromServerFormat(t.fieldPath)}function $S(t){return t instanceof qt?function(r){if(r.op==="=="){if(wE(r.value))return{unaryFilter:{field:rl(r.field),op:"IS_NAN"}};if(xE(r.value))return{unaryFilter:{field:rl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(wE(r.value))return{unaryFilter:{field:rl(r.field),op:"IS_NOT_NAN"}};if(xE(r.value))return{unaryFilter:{field:rl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(r.field),op:vF(r.op),value:r.value}}}(t):t instanceof Qn?function(r){const n=r.getFilters().map(s=>$S(s));return n.length===1?n[0]:{compositeFilter:{op:xF(r.op),filters:n}}}(t):ke(54877,{filter:t})}function wF(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function zS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,r,n,s,i=De.min(),a=De.min(),l=dr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e){this.gt=e}}function EF(t){const e=pF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?By(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.Dn=new NF}addToCollectionParentIndex(e,r){return this.Dn.add(r),se.resolve()}getCollectionParents(e,r){return se.resolve(this.Dn.getEntries(r))}addFieldIndex(e,r){return se.resolve()}deleteFieldIndex(e,r){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,r){return se.resolve()}getDocumentsMatchingTarget(e,r){return se.resolve(null)}getIndexType(e,r){return se.resolve(0)}getFieldIndexes(e,r){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,r){return se.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,r){return se.resolve(ao.min())}updateCollectionGroup(e,r,n){return se.resolve()}updateIndexEntries(e,r){return se.resolve()}}class NF{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Kt(mt.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Kt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HS=41943040;class Ur{static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(HS,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ec(0)}static ur(){return new ec(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="LruGarbageCollector",_F=1048576;function OE([t,e],[r,n]){const s=Be(t,r);return s===0?Be(e,n):s}class TF{constructor(e){this.Tr=e,this.buffer=new Kt(OE),this.Ir=0}dr(){return++this.Ir}Er(e){const r=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();OE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class AF{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){we(DE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){pc(r)?we(DE,"Ignoring IndexedDB error during garbage collection: ",r):await mc(r)}await this.Rr(3e5)})}}class SF{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.mr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return se.resolve(yp.ue);const n=new TF(r);return this.Vr.forEachTarget(e,s=>n.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>n.Er(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Vr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(ME)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ME):this.pr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,r){let n,s,i,a,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),el()<=He.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function RF(t,e){return new SF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(){this.changes=new _a(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?se.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Tu(n.mutation,s,sn.empty(),Ve.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,We()).next(()=>n))}getLocalViewOfDocuments(e,r,n=We()){const s=Yo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=iu();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Yo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,We()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,n,s){let i=ei();const a=_u(),l=function(){return _u()}();return r.forEach((c,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof No)?i=i.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),Tu(d.mutation,u,d.mutation.getFieldMask(),Ve.now())):a.set(u.key,sn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>a.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new jF(d,(f=a.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=_u();let s=new Rt((a,l)=>a-l),i=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||sn.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(s.get(l.batchId)||We()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=AS();d.forEach(m=>{if(!i.has(m)){const g=MS(r.get(m),n.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return se.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return Ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):ES(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):se.resolve(Yo());let l=Ju,c=i;return a.next(u=>se.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(d)?se.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,We())).next(d=>({batchId:l,changes:TS(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ae(r)).next(n=>{let s=iu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=iu();return this.indexManager.getCollectionParents(e,i).next(l=>se.forEach(l,c=>{const u=function(f,m){return new gc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(d=>{d.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,Er.newInvalidDocument(d)))});let l=iu();return a.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Tu(d.mutation,u,sn.empty(),Ve.now()),Ep(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,r){return se.resolve(this.Br.get(r))}saveBundleMetadata(e,r){return this.Br.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ms(s.createTime)}}(r)),se.resolve()}getNamedQuery(e,r){return se.resolve(this.Lr.get(r))}saveNamedQuery(e,r){return this.Lr.set(r.name,function(s){return{name:s.name,query:EF(s.bundledQuery),readTime:ms(s.readTime)}}(r)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(){this.overlays=new Rt(Ae.comparator),this.kr=new Map}getOverlay(e,r){return se.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Yo();return se.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.wt(e,r,i)}),se.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.kr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(n)),se.resolve()}getOverlaysForCollection(e,r,n){const s=Yo(),i=r.length+1,a=new Ae(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>n&&s.set(c.getKey(),c)}return se.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Rt((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=i.get(u.largestBatchId);d===null&&(d=Yo(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Yo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return se.resolve(l)}wt(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(n.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new ZL(r,n));let i=this.kr.get(r);i===void 0&&(i=We(),this.kr.set(r,i)),this.kr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(){this.sessionToken=dr.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.qr=new Kt(tr.Qr),this.$r=new Kt(tr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,r){const n=new tr(e,r);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Wr(new tr(e,r))}Gr(e,r){e.forEach(n=>this.removeReference(n,r))}zr(e){const r=new Ae(new mt([])),n=new tr(r,e),s=new tr(r,e+1),i=[];return this.$r.forEachInRange([n,s],a=>{this.Wr(a),i.push(a.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const r=new Ae(new mt([])),n=new tr(r,e),s=new tr(r,e+1);let i=We();return this.$r.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new tr(e,0),n=this.qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class tr{constructor(e,r){this.key=e,this.Hr=r}static Qr(e,r){return Ae.comparator(e.key,r.key)||Be(e.Hr,r.Hr)}static Ur(e,r){return Be(e.Hr,r.Hr)||Ae.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.er=1,this.Yr=new Kt(tr.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XL(i,r,n,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new tr(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return se.resolve(a)}lookupMutationBatch(e,r){return se.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.Xr(n),i=s<0?0:s;return se.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Kx:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new tr(r,0),s=new tr(r,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),se.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Kt(Be);return r.forEach(s=>{const i=new tr(s,0),a=new tr(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],l=>{n=n.add(l.Hr)})}),se.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Ae.isDocumentKey(i)||(i=i.child(""));const a=new tr(new Ae(i),0);let l=new Kt(Be);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},a),se.resolve(this.ei(l))}ei(e){const r=[];return e.forEach(n=>{const s=this.Zr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){it(this.ti(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return se.forEach(r.mutations,s=>{const i=new tr(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,r){const n=new tr(r,0),s=this.Yr.firstAfterOrEqual(n);return se.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.ni=e,this.docs=function(){return new Rt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.ni(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return se.resolve(n?n.document.mutableCopy():Er.newInvalidDocument(r))}getEntries(e,r){let n=ei();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Er.newInvalidDocument(s))}),se.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=ei();const a=r.path,l=new Ae(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||mL(fL(d),n)<=0||(s.has(d.key)||Ep(r,d))&&(i=i.insert(d.key,d.mutableCopy()))}return se.resolve(i)}getAllFromCollectionGroup(e,r,n,s){ke(9500)}ri(e,r){return se.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new FF(this)}getSize(e){return se.resolve(this.size)}}class FF extends IF{constructor(e){super(),this.Or=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Or.addEntry(e,s)):this.Or.removeEntry(n)}),se.waitFor(r)}getFromCache(e,r){return this.Or.getEntry(e,r)}getAllFromCache(e,r){return this.Or.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.persistence=e,this.ii=new _a(r=>Zx(r),ew),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new ow,this.targetCount=0,this._i=ec.ar()}forEachTarget(e,r){return this.ii.forEach((n,s)=>r(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.si&&(this.si=r),se.resolve()}hr(e){this.ii.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this._i=new ec(r),this.highestTargetId=r),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,r){return this.hr(r),this.targetCount+=1,se.resolve()}updateTargetData(e,r){return this.hr(r),se.resolve()}removeTargetData(e,r){return this.ii.delete(r.target),this.oi.zr(r.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),se.waitFor(i).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,r){const n=this.ii.get(r)||null;return se.resolve(n)}addMatchingKeys(e,r,n){return this.oi.Kr(r,n),se.resolve()}removeMatchingKeys(e,r,n){this.oi.Gr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),se.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.oi.zr(r),se.resolve()}getMatchingKeysForTargetId(e,r){const n=this.oi.Jr(r);return se.resolve(n)}containsKey(e,r){return se.resolve(this.oi.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,r){this.ai={},this.overlays={},this.ui=new yp(0),this.ci=!1,this.ci=!0,this.li=new DF,this.referenceDelegate=e(this),this.hi=new VF(this),this.indexManager=new CF,this.remoteDocumentCache=function(s){return new LF(s)}(n=>this.referenceDelegate.Pi(n)),this.serializer=new bF(r),this.Ti=new kF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new MF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ai[e.toKey()];return n||(n=new OF(r,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,r,n){we("MemoryPersistence","Starting transaction:",e);const s=new BF(this.ui.next());return this.referenceDelegate.Ii(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,r){return se.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,r)))}}class BF extends gL{constructor(e){super(),this.currentSequenceNumber=e}}class aw{constructor(e){this.persistence=e,this.Ai=new ow,this.Ri=null}static Vi(e){return new aw(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,r,n){return this.Ai.addReference(n,r),this.mi.delete(n.toString()),se.resolve()}removeReference(e,r,n){return this.Ai.removeReference(n,r),this.mi.add(n.toString()),se.resolve()}markPotentiallyOrphaned(e,r){return this.mi.add(r.toString()),se.resolve()}removeTarget(e,r){this.Ai.zr(r.targetId).forEach(s=>this.mi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ii(){this.Ri=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,n=>{const s=Ae.fromPath(n);return this.fi(e,s).next(i=>{i||r.removeEntry(s,De.min())})}).next(()=>(this.Ri=null,r.apply(e)))}updateLimboDocument(e,r){return this.fi(e,r).next(n=>{n?this.mi.delete(r.toString()):this.mi.add(r.toString())})}Pi(e){return 0}fi(e,r){return se.or([()=>se.resolve(this.Ai.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class _m{constructor(e,r){this.persistence=e,this.gi=new _a(n=>xL(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=RF(this,r)}static Vi(e,r){return new _m(e,r)}Ii(){}di(e){return se.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}mr(e){const r=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}yr(e){let r=0;return this.gr(e,n=>{r++}).next(()=>r)}gr(e,r){return se.forEach(this.gi,(n,s)=>this.Sr(e,n,s).next(i=>i?se.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,a=>this.Sr(e,a,r).next(l=>{l||(n++,i.removeEntry(a,De.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.gi.set(r,e.currentSequenceNumber),se.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),se.resolve()}removeReference(e,r,n){return this.gi.set(n,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,r){return this.gi.set(r,e.currentSequenceNumber),se.resolve()}Pi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Af(e.data.value)),r}Sr(e,r,n){return se.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.gi.get(r);return se.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Is=n,this.ds=s}static Es(e,r){let n=We(),s=We();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new lw(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return DO()?8:yL(Tr())>0?6:4}()}initialize(e,r){this.gs=e,this.indexManager=r,this.As=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ps(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ys(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new UF;return this.ws(e,r,a).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,r,a,l.size)})}).next(()=>i.result)}Ss(e,r,n,s){return n.documentReadCount<this.Vs?(el()<=He.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",tl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(el()<=He.DEBUG&&we("QueryEngine","Query:",tl(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.fs*s?(el()<=He.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",tl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fs(r))):se.resolve())}ps(e,r){if(NE(r))return se.resolve(null);let n=fs(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=By(r,null,"F"),n=fs(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=We(...i);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.bs(r,l);return this.Ds(r,u,a,c.readTime)?this.ps(e,By(r,null,"F")):this.vs(e,u,r,c)}))})))}ys(e,r,n,s){return NE(r)||s.isEqual(De.min())?se.resolve(null):this.gs.getDocuments(e,n).next(i=>{const a=this.bs(r,i);return this.Ds(r,a,n,s)?se.resolve(null):(el()<=He.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tl(r)),this.vs(e,a,r,hL(s,Ju)).next(l=>l))})}bs(e,r){let n=new Kt(NS(e));return r.forEach((s,i)=>{Ep(e,i)&&(n=n.add(i))}),n}Ds(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,r,n){return el()<=He.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",tl(r)),this.gs.getDocumentsMatchingQuery(e,r,ao.min(),n)}vs(e,r,n,s){return this.gs.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="LocalStore",GF=3e8;class $F{constructor(e,r,n,s){this.persistence=e,this.Cs=r,this.serializer=s,this.Fs=new Rt(Be),this.Ms=new _a(i=>Zx(i),ew),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Fs))}}function zF(t,e,r,n){return new $F(t,e,r,n)}async function QS(t,e){const r=Oe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Ns(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],l=[];let c=We();for(const u of s){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Bs:u,removedBatchIds:a,addedBatchIds:l}))})})}function HF(t,e){const r=Oe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,m=f.keys();let g=se.resolve();return m.forEach(x=>{g=g.next(()=>d.getEntry(c,x)).next(p=>{const b=u.docVersions.get(x);it(b!==null,48541),p.version.compareTo(b)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=We();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function YS(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.hi.getLastRemoteSnapshotVersion(r))}function WF(t,e){const r=Oe(t),n=e.snapshotVersion;let s=r.Fs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.Os.newChangeBuffer({trackRemovals:!0});s=r.Fs;const l=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;l.push(r.hi.removeMatchingKeys(i,d.removedDocuments,f).next(()=>r.hi.addMatchingKeys(i,d.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(dr.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),s=s.insert(f,g),function(p,b,E){return p.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=GF?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,g,d)&&l.push(r.hi.updateTargetData(i,g))});let c=ei(),u=We();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(QF(i,a,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!n.isEqual(De.min())){const d=r.hi.getLastRemoteSnapshotVersion(i).next(f=>r.hi.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(d)}return se.waitFor(l).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(r.Fs=s,i))}function QF(t,e,r){let n=We(),s=We();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=ei();return r.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):we(cw,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ls:a,ks:s}})}function YF(t,e){const r=Oe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Kx),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function KF(t,e){const r=Oe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.hi.getTargetData(n,e).next(i=>i?(s=i,se.resolve(s)):r.hi.allocateTargetId(n).next(a=>(s=new Ui(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.hi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Fs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Fs=r.Fs.insert(n.targetId,n),r.Ms.set(e,n.targetId)),n})}async function zy(t,e,r){const n=Oe(t),s=n.Fs.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!pc(a))throw a;we(cw,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(s.target)}function LE(t,e,r){const n=Oe(t);let s=De.min(),i=We();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const f=Oe(c),m=f.Ms.get(d);return m!==void 0?se.resolve(f.Fs.get(m)):f.hi.getTargetData(u,d)}(n,a,fs(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>n.Cs.getDocumentsMatchingQuery(a,e,r?s:De.min(),r?i:We())).next(l=>(JF(n,LL(e),l),{documents:l,qs:i})))}function JF(t,e,r){let n=t.xs.get(e)||De.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.xs.set(e,n)}class FE{constructor(){this.activeTargetIds=GL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XF{constructor(){this.Fo=new FE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,r,n){this.Mo[e]=r}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new FE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="ConnectivityMonitor";class BE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){we(VE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){we(VE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function Hy(){return ef===null?ef=function(){return 268435456+Math.round(2147483648*Math.random())}():ef++,"0x"+ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="RestConnection",e6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=r+"://"+e.host,this.Uo=`projects/${n}/databases/${s}`,this.Ko=this.databaseId.database===wm?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(e,r,n,s,i){const a=Hy(),l=this.Go(e,r.toUriEncodedString());we(c0,`Sending RPC '${e}' ${a}:`,l,n);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:u}=new URL(l),d=dc(u);return this.jo(e,l,c,n,d).then(f=>(we(c0,`Received RPC '${e}' ${a}: `,f),f),f=>{throw oo(c0,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",n),f})}Jo(e,r,n,s,i,a){return this.Wo(e,r,n,s,i)}zo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}Go(e,r){const n=e6[e];return`${this.$o}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="WebChannelConnection";class n6 extends t6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,r,n,s,i){const a=Hy();return new Promise((l,c)=>{const u=new YA;u.setWithCredentials(!0),u.listenOnce(KA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Tf.NO_ERROR:const f=u.getResponseJson();we(vr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Tf.TIMEOUT:we(vr,`RPC '${e}' ${a} timed out`),c(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const m=u.getStatus();if(we(vr,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const p=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(w)>=0?w:re.UNKNOWN}(x.status);c(new ye(p,x.message))}else c(new ye(re.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ye(re.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:a,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{we(vr,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);we(vr,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",d,n,15)})}P_(e,r,n){const s=Hy(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ZA(),l=XA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=i.join("");we(vr,`Creating RPC '${e}' stream ${s}: ${d}`,c);const f=a.createWebChannel(d,c);this.T_(f);let m=!1,g=!1;const x=new r6({Ho:b=>{g?we(vr,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(we(vr,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),we(vr,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Yo:()=>f.close()}),p=(b,E,w)=>{b.listen(E,C=>{try{w(C)}catch(I){setTimeout(()=>{throw I},0)}})};return p(f,su.EventType.OPEN,()=>{g||(we(vr,`RPC '${e}' stream ${s} transport opened.`),x.s_())}),p(f,su.EventType.CLOSE,()=>{g||(g=!0,we(vr,`RPC '${e}' stream ${s} transport closed`),x.__(),this.I_(f))}),p(f,su.EventType.ERROR,b=>{g||(g=!0,oo(vr,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),x.__(new ye(re.UNAVAILABLE,"The operation could not be completed")))}),p(f,su.EventType.MESSAGE,b=>{var E;if(!g){const w=b.data[0];it(!!w,16349);const C=w,I=(C==null?void 0:C.error)||((E=C[0])===null||E===void 0?void 0:E.error);if(I){we(vr,`RPC '${e}' stream ${s} received error:`,I);const j=I.status;let V=function(A){const k=Bt[A];if(k!==void 0)return OS(k)}(j),R=I.message;V===void 0&&(V=re.INTERNAL,R="Unknown error status: "+j+" with message "+I.message),g=!0,x.__(new ye(V,R)),f.close()}else we(vr,`RPC '${e}' stream ${s} received:`,w),x.a_(w)}}),p(l,JA.STAT_EVENT,b=>{b.stat===ky.PROXY?we(vr,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===ky.NOPROXY&&we(vr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(r=>r===e)}}function u0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t){return new aF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=r,this.d_=n,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const r=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),s=Math.max(0,r-n);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="PersistentStream";class JS{constructor(e,r,n,s,i,a,l,c){this.Fi=e,this.w_=n,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new KS(e,r)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():r&&r.code===re.RESOURCE_EXHAUSTED?(Zs(r.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):r&&r.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(r)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),r=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.b_===r&&this.W_(n,s)},n=>{e(()=>{const s=new ye(re.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(s)})})}W_(e,r){const n=this.K_(this.b_);this.stream=this.z_(e,r),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{n(()=>this.G_(s))}),this.stream.onMessage(s=>{n(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return we(UE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return r=>{this.Fi.enqueueAndForget(()=>this.b_===e?r():(we(UE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s6 extends JS{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}z_(e,r){return this.connection.P_("Listen",e,r)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const r=uF(this.serializer,e),n=function(i){if(!("targetChange"in i))return De.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?De.min():a.readTime?ms(a.readTime):De.min()}(e);return this.listener.J_(r,n)}H_(e){const r={};r.database=$y(this.serializer),r.addTarget=function(i,a){let l;const c=a.target;if(l=Fy(c)?{documents:fF(i,c)}:{query:mF(i,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=VS(i,a.resumeToken);const u=Uy(i,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(De.min())>0){l.readTime=Nm(i,a.snapshotVersion.toTimestamp());const u=Uy(i,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=gF(this.serializer,e);n&&(r.labels=n),this.k_(r)}Y_(e){const r={};r.database=$y(this.serializer),r.removeTarget=e,this.k_(r)}}class i6 extends JS{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,r){return this.connection.P_("Write",e,r)}j_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const r=hF(e.writeResults,e.commitTime),n=ms(e.commitTime);return this.listener.ta(n,r)}na(){const e={};e.database=$y(this.serializer),this.k_(e)}X_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>dF(this.serializer,n))};this.k_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{}class a6 extends o6{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,n,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,qy(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ye(re.UNKNOWN,i.toString())})}Jo(e,r,n,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,qy(r,n),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(re.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class l6{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Zs(r),this._a=!1):we("OnlineStateTracker",r)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class c6{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(a=>{n.enqueueAndForget(async()=>{Ta(this)&&(we(pa,"Restarting streams for network reachability change."),await async function(c){const u=Oe(c);u.Ia.add(4),await jd(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Ap(u)}(this))})}),this.Aa=new l6(n,s)}}async function Ap(t){if(Ta(t))for(const e of t.da)await e(!0)}async function jd(t){for(const e of t.da)await e(!1)}function XS(t,e){const r=Oe(t);r.Ta.has(e.targetId)||(r.Ta.set(e.targetId,e),fw(r)?hw(r):yc(r).x_()&&dw(r,e))}function uw(t,e){const r=Oe(t),n=yc(r);r.Ta.delete(e),n.x_()&&ZS(r,e),r.Ta.size===0&&(n.x_()?n.B_():Ta(r)&&r.Aa.set("Unknown"))}function dw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}yc(t).H_(e)}function ZS(t,e){t.Ra.$e(e),yc(t).Y_(e)}function hw(t){t.Ra=new nF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),yc(t).start(),t.Aa.aa()}function fw(t){return Ta(t)&&!yc(t).M_()&&t.Ta.size>0}function Ta(t){return Oe(t).Ia.size===0}function eR(t){t.Ra=void 0}async function u6(t){t.Aa.set("Online")}async function d6(t){t.Ta.forEach((e,r)=>{dw(t,e)})}async function h6(t,e){eR(t),fw(t)?(t.Aa.la(e),hw(t)):t.Aa.set("Unknown")}async function f6(t,e,r){if(t.Aa.set("Online"),e instanceof FS&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(n){we(pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Tm(t,n)}else if(e instanceof If?t.Ra.Ye(e):e instanceof LS?t.Ra.it(e):t.Ra.et(e),!r.isEqual(De.min()))try{const n=await YS(t.localStore);r.compareTo(n)>=0&&await function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ta.get(u);d&&i.Ta.set(u,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ta.get(c);if(!d)return;i.Ta.set(c,d.withResumeToken(dr.EMPTY_BYTE_STRING,d.snapshotVersion)),ZS(i,c);const f=new Ui(d.target,c,u,d.sequenceNumber);dw(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){we(pa,"Failed to raise snapshot:",n),await Tm(t,n)}}async function Tm(t,e,r){if(!pc(e))throw e;t.Ia.add(1),await jd(t),t.Aa.set("Offline"),r||(r=()=>YS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(pa,"Retrying IndexedDB access"),await r(),t.Ia.delete(1),await Ap(t)})}function tR(t,e){return e().catch(r=>Tm(t,r,e))}async function Sp(t){const e=Oe(t),r=ho(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Kx;for(;m6(e);)try{const s=await YF(e.localStore,n);if(s===null){e.Pa.length===0&&r.B_();break}n=s.batchId,p6(e,s)}catch(s){await Tm(e,s)}rR(e)&&nR(e)}function m6(t){return Ta(t)&&t.Pa.length<10}function p6(t,e){t.Pa.push(e);const r=ho(t);r.x_()&&r.Z_&&r.X_(e.mutations)}function rR(t){return Ta(t)&&!ho(t).M_()&&t.Pa.length>0}function nR(t){ho(t).start()}async function g6(t){ho(t).na()}async function y6(t){const e=ho(t);for(const r of t.Pa)e.X_(r.mutations)}async function v6(t,e,r){const n=t.Pa.shift(),s=nw.from(n,e,r);await tR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sp(t)}async function x6(t,e){e&&ho(t).Z_&&await async function(n,s){if(function(a){return tF(a)&&a!==re.ABORTED}(s.code)){const i=n.Pa.shift();ho(n).N_(),await tR(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sp(n)}}(t,e),rR(t)&&nR(t)}async function qE(t,e){const r=Oe(t);r.asyncQueue.verifyOperationInProgress(),we(pa,"RemoteStore received new credentials");const n=Ta(r);r.Ia.add(3),await jd(r),n&&r.Aa.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ia.delete(3),await Ap(r)}async function w6(t,e){const r=Oe(t);e?(r.Ia.delete(2),await Ap(r)):e||(r.Ia.add(2),await jd(r),r.Aa.set("Unknown"))}function yc(t){return t.Va||(t.Va=function(r,n,s){const i=Oe(r);return i.ia(),new s6(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:u6.bind(null,t),e_:d6.bind(null,t),n_:h6.bind(null,t),J_:f6.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),fw(t)?hw(t):t.Aa.set("Unknown")):(await t.Va.stop(),eR(t))})),t.Va}function ho(t){return t.ma||(t.ma=function(r,n,s){const i=Oe(r);return i.ia(),new i6(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:g6.bind(null,t),n_:x6.bind(null,t),ea:y6.bind(null,t),ta:v6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Sp(t)):(await t.ma.stop(),t.Pa.length>0&&(we(pa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,l=new mw(e,r,a,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pw(t,e){if(Zs("AsyncQueue",`${e}: ${t}`),pc(t))return new ye(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ae.comparator(r.key,n.key):(r,n)=>Ae.comparator(r.key,n.key),this.keyedMap=iu(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Tl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.fa=new Rt(Ae.comparator)}track(e){const r=e.doc.key,n=this.fa.get(r);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(r,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(r):e.type===1&&n.type===2?this.fa=this.fa.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(r,{type:2,doc:e.doc}):ke(63341,{At:e,ga:n}):this.fa=this.fa.insert(r,e)}pa(){const e=[];return this.fa.inorderTraversal((r,n)=>{e.push(n)}),e}}class tc{constructor(e,r,n,s,i,a,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new tc(e,r,Tl.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class E6{constructor(){this.queries=$E(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(r,n){const s=Oe(r),i=s.queries;s.queries=$E(),i.forEach((a,l)=>{for(const c of l.wa)c.onError(n)})})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function $E(){return new _a(t=>CS(t),bp)}async function gw(t,e){const r=Oe(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.Sa()&&e.ba()&&(n=2):(i=new b6,n=e.ba()?0:1);try{switch(n){case 0:i.ya=await r.onListen(s,!0);break;case 1:i.ya=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=pw(a,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.wa.push(e),e.va(r.onlineState),i.ya&&e.Ca(i.ya)&&vw(r)}async function yw(t,e){const r=Oe(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.wa.indexOf(e);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function C6(t,e){const r=Oe(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(n=!0);a.ya=s}}n&&vw(r)}function N6(t,e,r){const n=Oe(t),s=n.queries.get(e);if(s)for(const i of s.wa)i.onError(r);n.queries.delete(e)}function vw(t){t.Da.forEach(e=>{e.next()})}var Wy,zE;(zE=Wy||(Wy={})).Fa="default",zE.Cache="cache";class xw{constructor(e,r,n){this.query=e,this.Ma=r,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new tc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),r=!0):this.Ba(e,this.onlineState)&&(this.La(e),r=!0),this.Oa=e,r}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let r=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),r=!0),r}Ba(e,r){if(!e.fromCache||!this.ba())return!0;const n=r!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const r=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}La(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Wy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.key=e}}class iR{constructor(e){this.key=e}}class _6{constructor(e,r){this.query=e,this.Ha=r,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=We(),this.mutatedKeys=We(),this.Xa=NS(e),this.eu=new Tl(this.Xa)}get tu(){return this.Ha}nu(e,r){const n=r?r.ru:new GE,s=r?r.eu:this.eu;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),g=Ep(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),p=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;m&&g?m.data.isEqual(g.data)?x!==p&&(n.track({type:3,doc:g}),b=!0):this.iu(m,g)||(n.track({type:2,doc:g}),b=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(l=!0)):!m&&g?(n.track({type:0,doc:g}),b=!0):m&&!g&&(n.track({type:1,doc:m}),b=!0,(c||u)&&(l=!0)),b&&(g?(a=a.add(g),i=p?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),n.track({type:1,doc:d})}return{eu:a,ru:n,Ds:l,mutatedKeys:i}}iu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((d,f)=>function(g,x){const p=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:b})}};return p(g)-p(x)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(n),s=s!=null&&s;const l=r&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,u=c!==this.Ya;return this.Ya=c,a.length!==0||u?{snapshot:new tc(this.query,e.eu,i,a,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new GE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(r=>this.Ha=this.Ha.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ha=this.Ha.delete(r)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=We(),this.eu.forEach(n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))});const r=[];return e.forEach(n=>{this.Za.has(n)||r.push(new iR(n))}),this.Za.forEach(n=>{e.has(n)||r.push(new sR(n))}),r}uu(e){this.Ha=e.qs,this.Za=We();const r=this.nu(e.documents);return this.applyChanges(r,!0)}cu(){return tc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ww="SyncEngine";class T6{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class A6{constructor(e){this.key=e,this.lu=!1}}class S6{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new _a(l=>CS(l),bp),this.Tu=new Map,this.Iu=new Set,this.du=new Rt(Ae.comparator),this.Eu=new Map,this.Au=new ow,this.Ru={},this.Vu=new Map,this.mu=ec.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function R6(t,e,r=!0){const n=dR(t);let s;const i=n.Pu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await oR(n,e,r,!0),s}async function I6(t,e){const r=dR(t);await oR(r,e,!0,!1)}async function oR(t,e,r,n){const s=await KF(t.localStore,fs(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await j6(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&XS(t.remoteStore,s),l}async function j6(t,e,r,n,s){t.gu=(f,m,g)=>async function(p,b,E,w){let C=b.view.nu(E);C.Ds&&(C=await LE(p.localStore,b.query,!1).then(({documents:R})=>b.view.nu(R,C)));const I=w&&w.targetChanges.get(b.targetId),j=w&&w.targetMismatches.get(b.targetId)!=null,V=b.view.applyChanges(C,p.isPrimaryClient,I,j);return WE(p,b.targetId,V._u),V.snapshot}(t,f,m,g);const i=await LE(t.localStore,e,!0),a=new _6(e,i.qs),l=a.nu(i.documents),c=Id.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);WE(t,r,u._u);const d=new T6(e,r,a);return t.Pu.set(e,d),t.Tu.has(r)?t.Tu.get(r).push(e):t.Tu.set(r,[e]),u.snapshot}async function P6(t,e,r){const n=Oe(t),s=n.Pu.get(e),i=n.Tu.get(s.targetId);if(i.length>1)return n.Tu.set(s.targetId,i.filter(a=>!bp(a,e))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await zy(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&uw(n.remoteStore,s.targetId),Qy(n,s.targetId)}).catch(mc)):(Qy(n,s.targetId),await zy(n.localStore,s.targetId,!0))}async function k6(t,e){const r=Oe(t),n=r.Pu.get(e),s=r.Tu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),uw(r.remoteStore,n.targetId))}async function M6(t,e,r){const n=U6(t);try{const s=await function(a,l){const c=Oe(a),u=Ve.now(),d=l.reduce((g,x)=>g.add(x.key),We());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=ei(),p=We();return c.Os.getEntries(g,d).next(b=>{x=b,x.forEach((E,w)=>{w.isValidDocument()||(p=p.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,x)).next(b=>{f=b;const E=[];for(const w of l){const C=KL(w,f.get(w.key).overlayedDocument);C!=null&&E.push(new No(w.key,C,pS(C.value.mapValue),Hn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,E,l)}).next(b=>{m=b;const E=b.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(g,b.batchId,E)})}).then(()=>({batchId:m.batchId,changes:TS(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Ru[a.currentUser.toKey()];u||(u=new Rt(Be)),u=u.insert(l,c),a.Ru[a.currentUser.toKey()]=u}(n,s.batchId,r),await Pd(n,s.changes),await Sp(n.remoteStore)}catch(s){const i=pw(s,"Failed to persist write");r.reject(i)}}async function aR(t,e){const r=Oe(t);try{const n=await WF(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Eu.get(i);a&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?it(a.lu,14607):s.removedDocuments.size>0&&(it(a.lu,42227),a.lu=!1))}),await Pd(r,n,e)}catch(n){await mc(n)}}function HE(t,e,r){const n=Oe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Pu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Oe(a);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.wa)m.va(l)&&(u=!0)}),u&&vw(c)}(n.eventManager,e),s.length&&n.hu.J_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function D6(t,e,r){const n=Oe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Eu.get(e),i=s&&s.key;if(i){let a=new Rt(Ae.comparator);a=a.insert(i,Er.newNoDocument(i,De.min()));const l=We().add(i),c=new _p(De.min(),new Map,new Rt(Be),a,l);await aR(n,c),n.du=n.du.remove(i),n.Eu.delete(e),bw(n)}else await zy(n.localStore,e,!1).then(()=>Qy(n,e,r)).catch(mc)}async function O6(t,e){const r=Oe(t),n=e.batch.batchId;try{const s=await HF(r.localStore,e);cR(r,n,null),lR(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Pd(r,s)}catch(s){await mc(s)}}async function L6(t,e,r){const n=Oe(t);try{const s=await function(a,l){const c=Oe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(it(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);cR(n,e,r),lR(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Pd(n,s)}catch(s){await mc(s)}}function lR(t,e){(t.Vu.get(e)||[]).forEach(r=>{r.resolve()}),t.Vu.delete(e)}function cR(t,e,r){const n=Oe(t);let s=n.Ru[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ru[n.currentUser.toKey()]=s}}function Qy(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Tu.get(e))t.Pu.delete(n),r&&t.hu.pu(n,r);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(n=>{t.Au.containsKey(n)||uR(t,n)})}function uR(t,e){t.Iu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(uw(t.remoteStore,r),t.du=t.du.remove(e),t.Eu.delete(r),bw(t))}function WE(t,e,r){for(const n of r)n instanceof sR?(t.Au.addReference(n.key,e),F6(t,n)):n instanceof iR?(we(ww,"Document no longer in limbo: "+n.key),t.Au.removeReference(n.key,e),t.Au.containsKey(n.key)||uR(t,n.key)):ke(19791,{yu:n})}function F6(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Iu.has(n)||(we(ww,"New document in limbo: "+r),t.Iu.add(n),bw(t))}function bw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const r=new Ae(mt.fromString(e)),n=t.mu.next();t.Eu.set(n,new A6(r)),t.du=t.du.insert(r,n),XS(t.remoteStore,new Ui(fs(wp(r.path)),n,"TargetPurposeLimboResolution",yp.ue))}}async function Pd(t,e,r){const n=Oe(t),s=[],i=[],a=[];n.Pu.isEmpty()||(n.Pu.forEach((l,c)=>{a.push(n.gu(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=lw.Es(c.targetId,u);i.push(f)}}))}),await Promise.all(a),n.hu.J_(s),await async function(c,u){const d=Oe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>se.forEach(u,m=>se.forEach(m.Is,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>se.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!pc(f))throw f;we(cw,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=d.Fs.get(m),x=g.snapshotVersion,p=g.withLastLimboFreeSnapshotVersion(x);d.Fs=d.Fs.insert(m,p)}}}(n.localStore,i))}async function V6(t,e){const r=Oe(t);if(!r.currentUser.isEqual(e)){we(ww,"User change. New user:",e.toKey());const n=await QS(r.localStore,e);r.currentUser=e,function(i,a){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new ye(re.CANCELLED,a))})}),i.Vu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Pd(r,n.Bs)}}function B6(t,e){const r=Oe(t),n=r.Eu.get(e);if(n&&n.lu)return We().add(n.key);{let s=We();const i=r.Tu.get(e);if(!i)return s;for(const a of i){const l=r.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function dR(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D6.bind(null,e),e.hu.J_=C6.bind(null,e.eventManager),e.hu.pu=N6.bind(null,e.eventManager),e}function U6(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L6.bind(null,e),e}class Am{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,r){return null}Fu(e,r){return null}vu(e){return zF(this.persistence,new qF,e.initialUser,this.serializer)}Du(e){return new WS(aw.Vi,this.serializer)}bu(e){return new XF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Am.provider={build:()=>new Am};class q6 extends Am{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,r){it(this.persistence.referenceDelegate instanceof _m,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new AF(n,e.asyncQueue,r)}Du(e){const r=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new WS(n=>_m.Vi(n,r),this.serializer)}}class Yy{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>HE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=V6.bind(null,this.syncEngine),await w6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E6}()}createDatastore(e){const r=Tp(e.databaseInfo.databaseId),n=function(i){return new n6(i)}(e.databaseInfo);return function(i,a,l,c){return new a6(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,l){return new c6(n,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>HE(this.syncEngine,r,0),function(){return BE.C()?new BE:new ZF}())}createSyncEngine(e,r){return function(s,i,a,l,c,u,d){const f=new S6(s,i,a,l,c,u);return d&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Oe(s);we(pa,"RemoteStore shutting down."),i.Ia.add(5),await jd(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Yy.provider={build:()=>new Yy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Zs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="FirestoreClient";class G6{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=wr.UNAUTHENTICATED,this.clientId=Yx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{we(fo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(we(fo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=pw(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function d0(t,e){t.asyncQueue.verifyOperationInProgress(),we(fo,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await QS(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>{oo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{we("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{oo("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function QE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await $6(t);we(fo,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>qE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>qE(e.remoteStore,s)),t._onlineComponents=e}async function $6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(fo,"Using user provided OfflineComponentProvider");try{await d0(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;oo("Error using user provided cache. Falling back to memory cache: "+r),await d0(t,new Am)}}else we(fo,"Using default OfflineComponentProvider"),await d0(t,new q6(void 0));return t._offlineComponents}async function hR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(fo,"Using user provided OnlineComponentProvider"),await QE(t,t._uninitializedComponentsProvider._online)):(we(fo,"Using default OnlineComponentProvider"),await QE(t,new Yy))),t._onlineComponents}function z6(t){return hR(t).then(e=>e.syncEngine)}async function Sm(t){const e=await hR(t),r=e.eventManager;return r.onListen=R6.bind(null,e.syncEngine),r.onUnlisten=P6.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=I6.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=k6.bind(null,e.syncEngine),r}function H6(t,e,r={}){const n=new Hs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const d=new Ew({next:m=>{d.Ou(),a.enqueueAndForget(()=>yw(i,f));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new ye(re.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new ye(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new xw(wp(l.path),d,{includeMetadataChanges:!0,ka:!0});return gw(i,f)}(await Sm(t),t.asyncQueue,e,r,n)),n.promise}function W6(t,e,r={}){const n=new Hs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const d=new Ew({next:m=>{d.Ou(),a.enqueueAndForget(()=>yw(i,f)),m.fromCache&&c.source==="server"?u.reject(new ye(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new xw(l,d,{includeMetadataChanges:!0,ka:!0});return gw(i,f)}(await Sm(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="firestore.googleapis.com",KE=!0;class JE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mR,this.ssl=KE}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:KE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_F)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fR((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new rL;switch(n.type){case"firstParty":return new oL(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=YE.get(r);n&&(we("ComponentProvider","Removing Datastore"),YE.delete(r),n.terminate())}(this),Promise.resolve()}}function Q6(t,e,r,n={}){var s;t=an(t,Rp);const i=dc(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${r}`;i&&(UA(`https://${c}`),qA("Firestore",!0)),a.host!==mR&&a.host!==c&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:n});if(!ha(u,l)&&(t._setSettings(u),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=wr.MOCK_USER;else{d=TO(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new wr(m)}t._authCredentials=new nL(new tS(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=class pR{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pR(this.firestore,e,this._query)}};class Mt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new to(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Sd(r,Mt._jsonSchema))return new Mt(e,n||null,new Ae(mt.fromString(r.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Gt("string",Mt._jsonSchemaVersion),referencePath:Gt("string")};class to extends vc{constructor(e,r,n){super(e,r,wp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Ae(e))}withConverter(e){return new to(this.firestore,e,this._path)}}function Aa(t,e,...r){if(t=zt(t),nS("collection","path",e),t instanceof Rp){const n=mt.fromString(e,...r);return uE(n),new to(t,null,n)}{if(!(t instanceof Mt||t instanceof to))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return uE(n),new to(t.firestore,null,n)}}function $t(t,e,...r){if(t=zt(t),arguments.length===1&&(e=Yx.newId()),nS("doc","path",e),t instanceof Rp){const n=mt.fromString(e,...r);return cE(n),new Mt(t,null,new Ae(n))}{if(!(t instanceof Mt||t instanceof to))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return cE(n),new Mt(t.firestore,t instanceof to?t.converter:null,new Ae(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="AsyncQueue";class ZE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new KS(this,"async_queue_retry"),this.oc=()=>{const n=u0();n&&we(XE,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const r=u0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const r=u0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const r=new Hs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pc(e))throw e;we(XE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const r=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,Zs("INTERNAL UNHANDLED ERROR: ",eC(n)),n}).then(n=>(this.nc=!1,n))));return this._c=r,r}enqueueAfterDelay(e,r,n){this.ac(),this.sc.indexOf(e)>-1&&(r=0);const s=mw.createAndSchedule(this,e,r,n,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&ke(47125,{hc:eC(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const r of this.ec)if(r.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.ec)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const r=this.ec.indexOf(e);this.ec.splice(r,1)}}function eC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class mo extends Rp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new ZE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ZE(e),this._firestoreClient=void 0,await e}}}function Y6(t,e){const r=typeof t=="object"?t:Wx(),n=typeof t=="string"?t:wm,s=Hx(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=NO("firestore");i&&Q6(s,...i)}return s}function Ip(t){if(t._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K6(t),t._firestoreClient}function K6(t){var e,r,n;const s=t._freezeSettings(),i=function(l,c,u,d){return new EL(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fR(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new G6(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(dr.fromBase64String(e))}catch(r){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new wn(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sd(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:Gt("string",wn._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ps._jsonSchemaVersion}}static fromJSON(e){if(Sd(e,ps._jsonSchema))return new ps(e.latitude,e.longitude)}}ps._jsonSchemaVersion="firestore/geoPoint/1.0",ps._jsonSchema={type:Gt("string",ps._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sd(e,gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new gs(e.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gs._jsonSchemaVersion="firestore/vectorValue/1.0",gs._jsonSchema={type:Gt("string",gs._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=/^__.*__$/;class X6{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,r,this.fieldTransforms):new Rd(e,this.data,r,this.fieldTransforms)}}class gR{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new No(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function yR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:t})}}class Cw{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Cw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.fc(e),s}gc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Rc({path:n,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(yR(this.Ec)&&J6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Z6{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Tp(e)}Dc(e,r,n,s=!1){return new Cw({Ec:e,methodName:r,bc:n,path:lr.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nw(t){const e=t._freezeSettings(),r=Tp(t._databaseId);return new Z6(t._databaseId,!!e.ignoreUndefinedProperties,r)}function eV(t,e,r,n,s,i={}){const a=t.Dc(i.merge||i.mergeFields?2:0,e,r,s);Tw("Data must be an object, but it was:",a,n);const l=vR(n,a);let c,u;if(i.merge)c=new sn(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=Ky(e,f,r);if(!a.contains(m))throw new ye(re.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wR(d,m)||d.push(m)}c=new sn(d),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new X6(new Gr(l),c,u)}class kp extends Pp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kp}}class _w extends Pp{constructor(e,r){super(e),this.Cc=r}_toFieldTransform(e){const r=new sd(e.serializer,RS(e.serializer,this.Cc));return new HL(e.path,r)}isEqual(e){return e instanceof _w&&this.Cc===e.Cc}}function tV(t,e,r,n){const s=t.Dc(1,e,r);Tw("Data must be an object, but it was:",s,n);const i=[],a=Gr.empty();Co(n,(c,u)=>{const d=Aw(e,c,r);u=zt(u);const f=s.gc(d);if(u instanceof kp)i.push(d);else{const m=kd(u,f);m!=null&&(i.push(d),a.set(d,m))}});const l=new sn(i);return new gR(a,l,s.fieldTransforms)}function rV(t,e,r,n,s,i){const a=t.Dc(1,e,r),l=[Ky(e,n,r)],c=[s];if(i.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Ky(e,i[m])),c.push(i[m+1]);const u=[],d=Gr.empty();for(let m=l.length-1;m>=0;--m)if(!wR(u,l[m])){const g=l[m];let x=c[m];x=zt(x);const p=a.gc(g);if(x instanceof kp)u.push(g);else{const b=kd(x,p);b!=null&&(u.push(g),d.set(g,b))}}const f=new sn(u);return new gR(d,f,a.fieldTransforms)}function nV(t,e,r,n=!1){return kd(r,t.Dc(n?4:3,e))}function kd(t,e){if(xR(t=zt(t)))return Tw("Unsupported field value:",e,t),vR(t,e);if(t instanceof Pp)return function(n,s){if(!yR(s.Ec))throw s.wc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const l of n){let c=kd(l,s.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=zt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return RS(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ve.fromDate(n);return{timestampValue:Nm(s.serializer,i)}}if(n instanceof Ve){const i=new Ve(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Nm(s.serializer,i)}}if(n instanceof ps)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wn)return{bytesValue:VS(s.serializer,n._byteString)};if(n instanceof Mt){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof gs)return function(a,l){return{mapValue:{fields:{[hS]:{stringValue:mS},[bm]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.wc("VectorValues must only contain numeric values.");return tw(l.serializer,u)})}}}}}}(n,s);throw s.wc(`Unsupported field value: ${gp(n)}`)}(t,e)}function vR(t,e){const r={};return oS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(t,(n,s)=>{const i=kd(s,e.Vc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function xR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof ps||t instanceof wn||t instanceof Mt||t instanceof Pp||t instanceof gs)}function Tw(t,e,r){if(!xR(r)||!sS(r)){const n=gp(r);throw n==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+n)}}function Ky(t,e,r){if((e=zt(e))instanceof jp)return e._internalPath;if(typeof e=="string")return Aw(t,e);throw Rm("Field path arguments must be of type string or ",t,!1,void 0,r)}const sV=new RegExp("[~\\*/\\[\\]]");function Aw(t,e,r){if(e.search(sV)>=0)throw Rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new jp(...e.split("."))._internalPath}catch{throw Rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Rm(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${n}`),a&&(c+=` in document ${s}`),c+=")"),new ye(re.INVALID_ARGUMENT,l+t+c)}function wR(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Mp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class iV extends bR{data(){return super.data()}}function Mp(t,e){return typeof e=="string"?Aw(t,e):e instanceof jp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sw{}class CR extends Sw{}function Md(t,e,...r){let n=[];e instanceof Sw&&n.push(e),n=n.concat(r),function(i){const a=i.filter(c=>c instanceof Rw).length,l=i.filter(c=>c instanceof Dp).length;if(a>1||a>0&&l>0)throw new ye(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Dp extends CR{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Dp(e,r,n)}_apply(e){const r=this._parse(e);return NR(e._query,r),new vc(e.firestore,e.converter,Vy(e._query,r))}_parse(e){const r=Nw(e.firestore);return function(i,a,l,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ye(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nC(f,d);const x=[];for(const p of f)x.push(rC(c,i,p));m={arrayValue:{values:x}}}else m=rC(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nC(f,d),m=nV(l,a,f,d==="in"||d==="not-in");return qt.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Jy(t,e,r){const n=e,s=Mp("where",t);return Dp._create(s,n,r)}class Rw extends Sw{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Rw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Qn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)NR(a,c),a=Vy(a,c)}(e._query,r),new vc(e.firestore,e.converter,Vy(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Iw extends CR{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Iw(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new td(i,a)}(e._query,this._field,this._direction);return new vc(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new gc(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function jw(t,e="asc"){const r=e,n=Mp("orderBy",t);return Iw._create(n,r)}function rC(t,e,r){if(typeof(r=zt(r))=="string"){if(r==="")throw new ye(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ES(e)&&r.indexOf("/")!==-1)throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(mt.fromString(r));if(!Ae.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return vE(t,new Ae(n))}if(r instanceof Mt)return vE(t,r._key);throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gp(r)}.`)}function nC(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NR(t,e){const r=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class oV{convertValue(e,r="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Co(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r[bm].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Dt(a.doubleValue));return new gs(i)}convertGeoPoint(e){return new ps(Dt(e.latitude),Dt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=xp(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){const r=lo(e);return new Ve(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=mt.fromString(e);it(zS(n),9688,{name:e});const s=new Zu(n.get(1),n.get(3)),i=new Ae(n.popFirst(5));return s.isEqual(r)||Zs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class au{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ra extends bR{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Mp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=ra._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ra._jsonSchemaVersion="firestore/documentSnapshot/1.0",ra._jsonSchema={type:Gt("string",ra._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class jf extends ra{data(e={}){return super.data(e)}}class na{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new au(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new jf(this._firestore,this._userDataWriter,n.key,n,new au(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new jf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new au(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new jf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new au(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:lV(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=na._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t){t=an(t,Mt);const e=an(t.firestore,mo);return H6(Ip(e),t._key).then(r=>TR(e,t,r))}na._jsonSchemaVersion="firestore/querySnapshot/1.0",na._jsonSchema={type:Gt("string",na._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Pw extends oV{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,r)}}function Op(t){t=an(t,vc);const e=an(t.firestore,mo),r=Ip(e),n=new Pw(e);return ER(t._query),W6(r,t._query).then(s=>new na(e,n,t,s))}function Lp(t,e,r){t=an(t,Mt);const n=an(t.firestore,mo),s=aV(t.converter,e);return kw(n,[eV(Nw(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Hn.none())])}function Sa(t,e,r,...n){t=an(t,Mt);const s=an(t.firestore,mo),i=Nw(s);let a;return a=typeof(e=zt(e))=="string"||e instanceof jp?rV(i,"updateDoc",t._key,e,r,n):tV(i,"updateDoc",t._key,e),kw(s,[a.toMutation(t._key,Hn.exists(!0))])}function _R(t){return kw(an(t.firestore,mo),[new rw(t._key,Hn.none())])}function Fp(t,...e){var r,n,s;t=zt(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||tC(e[a])||(i=e[a++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(tC(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,d;if(t instanceof Mt)u=an(t.firestore,mo),d=wp(t._key.path),c={next:f=>{e[a]&&e[a](TR(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=an(t,vc);u=an(f.firestore,mo),d=f._query;const m=new Pw(u);c={next:g=>{e[a]&&e[a](new na(u,m,f,g))},error:e[a+1],complete:e[a+2]},ER(t._query)}return function(m,g,x,p){const b=new Ew(p),E=new xw(g,b,x);return m.asyncQueue.enqueueAndForget(async()=>gw(await Sm(m),E)),()=>{b.Ou(),m.asyncQueue.enqueueAndForget(async()=>yw(await Sm(m),E))}}(Ip(u),d,l,c)}function kw(t,e){return function(n,s){const i=new Hs;return n.asyncQueue.enqueueAndForget(async()=>M6(await z6(n),s,i)),i.promise}(Ip(t),e)}function TR(t,e,r){const n=r.docs.get(e._key),s=new Pw(t);return new ra(t,s,e._key,n,new au(r.hasPendingWrites,r.fromCache),e.converter)}function cV(t){return new _w("increment",t)}(function(e,r=!0){(function(s){fc=s})(hc),Kl(new fa("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),l=new mo(new sL(n.getProvider("auth-internal")),new aL(a,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(u.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Zi(sE,iE,e),Zi(sE,iE,"esm2017")})();var ls=function(){return ls=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ls.apply(this,arguments)};function Dd(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function uV(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function AR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dV=AR,SR=new Td("auth","Firebase",AR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=new $x("@firebase/auth");function hV(t,...e){Im.logLevel<=He.WARN&&Im.warn(`Auth (${hc}): ${t}`,...e)}function Pf(t,...e){Im.logLevel<=He.ERROR&&Im.error(`Auth (${hc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,...e){throw Mw(t,...e)}function ys(t,...e){return Mw(t,...e)}function RR(t,e,r){const n=Object.assign(Object.assign({},dV()),{[e]:r});return new Td("auth","Firebase",n).create(e,{appName:t.name})}function Ws(t){return RR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mw(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return SR.create(t,...e)}function Pe(t,e,...r){if(!t)throw Mw(e,...r)}function qs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pf(e),new Error(e)}function ti(t,e){t||qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fV(){return sC()==="http:"||sC()==="https:"}function sC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fV()||PO()||"connection"in navigator)?navigator.onLine:!0}function pV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,r){this.shortDelay=e,this.longDelay=r,ti(r>e,"Short delay should be less than long delay!"),this.isMobile=RO()||kO()}get(){return mV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e){ti(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vV=new Od(3e4,6e4);function _o(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function To(t,e,r,n,s={}){return jR(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const l=Ad(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return jO()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&dc(t.emulatorConfig.host)&&(u.credentials="include"),IR.fetch()(await PR(t,t.config.apiHost,r,l),u)})}async function jR(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},gV),e);try{const s=new wV(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw tf(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw tf(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw tf(t,"user-disabled",a);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw RR(t,d,u);Yn(t,d)}}catch(s){if(s instanceof oi)throw s;Yn(t,"network-request-failed",{message:String(s)})}}async function Ld(t,e,r,n,s={}){const i=await To(t,e,r,n,s);return"mfaPendingCredential"in i&&Yn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function PR(t,e,r,n){const s=`${e}${r}?${n}`,i=t,a=i.config.emulator?Dw(t.config,s):`${t.config.apiScheme}://${s}`;return yV.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function xV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ys(this.auth,"network-request-failed")),vV.get())})}}function tf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=ys(t,e,n);return s.customData._tokenResponse=r,s}function iC(t){return t!==void 0&&t.enterprise!==void 0}class bV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return xV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EV(t,e){return To(t,"GET","/v2/recaptchaConfig",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(t,e){return To(t,"POST","/v1/accounts:delete",e)}async function jm(t,e){return To(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NV(t,e=!1){const r=zt(t),n=await r.getIdToken(e),s=Ow(n);Pe(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Au(h0(s.auth_time)),issuedAtTime:Au(h0(s.iat)),expirationTime:Au(h0(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function h0(t){return Number(t)*1e3}function Ow(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=LA(r);return s?JSON.parse(s):(Pf("Failed to decode base64 JWT payload"),null)}catch(s){return Pf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oC(t){const e=Ow(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof oi&&_V(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function _V({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(t){var e;const r=t.auth,n=await t.getIdToken(),s=await id(t,jm(r,{idToken:n}));Pe(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?kR(i.providerUserInfo):[],l=SV(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Zy(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function AV(t){const e=zt(t);await Pm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SV(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function kR(t){return t.map(e=>{var{providerId:r}=e,n=Dd(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e){const r=await jR(t,{},async()=>{const n=Ad({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await PR(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&dc(t.emulatorConfig.host)&&(c.credentials="include"),IR.fetch()(a,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function IV(t,e){return To(t,"POST","/v2/accounts:revokeToken",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const r=oC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await RV(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Al;return n&&(Pe(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Pe(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Pe(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Al,this.toJSON())}_performRefresh(){return qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gn{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Dd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new TV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await id(this,this.stsTokenManager.getToken(this.auth,e));return Pe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return NV(this,e)}reload(){return AV(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Pm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await id(this,CV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,g=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,x=(a=r.photoURL)!==null&&a!==void 0?a:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,b=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,E=(u=r.createdAt)!==null&&u!==void 0?u:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:C,emailVerified:I,isAnonymous:j,providerData:V,stsTokenManager:R}=r;Pe(C&&R,e,"internal-error");const _=Al.fromJSON(this.name,R);Pe(typeof C=="string",e,"internal-error"),bi(f,e.name),bi(m,e.name),Pe(typeof I=="boolean",e,"internal-error"),Pe(typeof j=="boolean",e,"internal-error"),bi(g,e.name),bi(x,e.name),bi(p,e.name),bi(b,e.name),bi(E,e.name),bi(w,e.name);const A=new Gn({uid:C,auth:e,email:m,emailVerified:I,displayName:f,isAnonymous:j,photoURL:x,phoneNumber:g,tenantId:p,stsTokenManager:_,createdAt:E,lastLoginAt:w});return V&&Array.isArray(V)&&(A.providerData=V.map(k=>Object.assign({},k))),b&&(A._redirectEventId=b),A}static async _fromIdTokenResponse(e,r,n=!1){const s=new Al;s.updateFromServerResponse(r);const i=new Gn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Pm(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?kR(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Al;l.updateFromIdToken(n);const c=new Gn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Map;function Gs(t){ti(t instanceof Function,"Expected a class definition");let e=aC.get(t);return e?(ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,aC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}MR.type="NONE";const lC=MR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t,e,r){return`firebase:${t}:${e}:${r}`}class Sl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=kf(this.userKey,s.apiKey,i),this.fullPersistenceKey=kf("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await jm(this.auth,{idToken:e}).catch(()=>{});return r?Gn._fromGetAccountInfoResponse(this.auth,r,e):null}return Gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Sl(Gs(lC),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Gs(lC);const a=kf(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(a);if(d){let f;if(typeof d=="string"){const m=await jm(e,{idToken:d}).catch(()=>{});if(!m)break;f=await Gn._fromGetAccountInfoResponse(e,m,d)}else f=Gn._fromJSON(e,d);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Sl(i,e,n):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Sl(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BR(e))return"Blackberry";if(UR(e))return"Webos";if(OR(e))return"Safari";if((e.includes("chrome/")||LR(e))&&!e.includes("edge/"))return"Chrome";if(VR(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function DR(t=Tr()){return/firefox\//i.test(t)}function OR(t=Tr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LR(t=Tr()){return/crios\//i.test(t)}function FR(t=Tr()){return/iemobile/i.test(t)}function VR(t=Tr()){return/android/i.test(t)}function BR(t=Tr()){return/blackberry/i.test(t)}function UR(t=Tr()){return/webos/i.test(t)}function Lw(t=Tr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jV(t=Tr()){var e;return Lw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PV(){return MO()&&document.documentMode===10}function qR(t=Tr()){return Lw(t)||VR(t)||UR(t)||BR(t)||/windows phone/i.test(t)||FR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e=[]){let r;switch(t){case"Browser":r=cC(Tr());break;case"Worker":r=`${cC(Tr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${hc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(t,e={}){return To(t,"GET","/v2/passwordPolicy",_o(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=6;class OV{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:DV,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uC(this),this.idTokenSubscription=new uC(this),this.beforeStateQueue=new kV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Gs(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await Sl.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await jm(this,{idToken:e}),n=await Gn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(xn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Pm(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Ws(this));const r=e?zt(e):null;return r&&Pe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MV(this),r=new OV(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Td("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await IV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Gs(e)||this._popupRedirectResolver;Pe(r,this,"argument-error"),this.redirectPersistenceManager=await Sl.create(this,[Gs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{a=!0,c()}}else{const c=e.addObserver(r);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&hV(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ra(t){return zt(t)}class uC{constructor(e){this.auth=e,this.observer=null,this.addObserver=qO(r=>this.observer=r)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FV(t){Vp=t}function $R(t){return Vp.loadJS(t)}function VV(){return Vp.recaptchaEnterpriseScript}function BV(){return Vp.gapiScript}function UV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class qV{constructor(){this.enterprise=new GV}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class GV{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const $V="recaptcha-enterprise",zR="NO_RECAPTCHA";class zV{constructor(e){this.type=$V,this.auth=Ra(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{EV(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new bV(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;iC(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(zR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qV().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{n(this.auth).then(l=>{if(!r&&iC(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=VV();c.length!==0&&(c+=l),$R(c).then(()=>{s(l,i,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function dC(t,e,r,n=!1,s=!1){const i=new zV(t);let a;if(s)a=zR;else try{a=await i.verify(r)}catch{a=await i.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ev(t,e,r,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await dC(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await dC(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(t,e){const r=Hx(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(ha(i,e??{}))return s;Yn(s,"already-initialized")}return r.initialize({options:e})}function WV(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Gs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function QV(t,e,r){const n=Ra(t);Pe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=HR(e),{host:a,port:l}=YV(e),c=l===null?"":`:${l}`,u={url:`${i}//${a}${c}/`},d=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Pe(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Pe(ha(u,n.config.emulator)&&ha(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,dc(a)?(UA(`${i}//${a}${c}`),qA("Auth",!0)):KV()}function HR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YV(t){const e=HR(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:hC(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:hC(a)}}}function hC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function KV(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return qs("not implemented")}_getIdTokenResponse(e){return qs("not implemented")}_linkToIdToken(e,r){return qs("not implemented")}_getReauthenticationResolver(e){return qs("not implemented")}}async function JV(t,e){return To(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(t,e){return Ld(t,"POST","/v1/accounts:signInWithPassword",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV(t,e){return Ld(t,"POST","/v1/accounts:signInWithEmailLink",_o(t,e))}async function eB(t,e){return Ld(t,"POST","/v1/accounts:signInWithEmailLink",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends Fw{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new od(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new od(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ev(e,r,"signInWithPassword",XV);case"emailLink":return ZV(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ev(e,n,"signUpPassword",JV);case"emailLink":return eB(e,{idToken:r,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(t,e){return Ld(t,"POST","/v1/accounts:signInWithIdp",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="http://localhost";class ga extends Fw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Yn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Dd(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new ga(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Rl(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Rl(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Rl(e,r)}buildRequest(){const e={requestUri:tB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ad(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nB(t){const e=ru(nu(t)).link,r=e?ru(nu(e)).deep_link_id:null,n=ru(nu(t)).deep_link_id;return(n?ru(nu(n)).link:null)||n||r||e||t}class Vw{constructor(e){var r,n,s,i,a,l;const c=ru(nu(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=rB((s=c.mode)!==null&&s!==void 0?s:null);Pe(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=c.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=nB(e);try{return new Vw(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.providerId=xc.PROVIDER_ID}static credential(e,r){return od._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Vw.parseLink(r);return Pe(n,"argument-error"),od._fromEmailAndCode(e,n.code,n.tenantId)}}xc.PROVIDER_ID="password";xc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends WR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Fd{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ga._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ji.credential(r,n)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Fd{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com";Pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Fd{constructor(){super("twitter.com")}static credential(e,r){return ga._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ki.credential(r,n)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e){return Ld(t,"POST","/v1/accounts:signUp",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Gn._fromIdTokenResponse(e,n,s),a=fC(n);return new ya({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=fC(n);return new ya({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function fC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends oi{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,km.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new km(e,r,n,s)}}function QR(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(t,i,e,n):i})}async function iB(t,e,r=!1){const n=await id(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ya._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oB(t,e,r=!1){const{auth:n}=t;if(xn(n.app))return Promise.reject(Ws(n));const s="reauthenticate";try{const i=await id(t,QR(n,s,e,t),r);Pe(i.idToken,n,"internal-error");const a=Ow(i.idToken);Pe(a,n,"internal-error");const{sub:l}=a;return Pe(t.uid===l,n,"user-mismatch"),ya._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Yn(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(t,e,r=!1){if(xn(t.app))return Promise.reject(Ws(t));const n="signIn",s=await QR(t,n,e),i=await ya._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function aB(t,e){return YR(Ra(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t){const e=Ra(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lB(t,e,r){if(xn(t.app))return Promise.reject(Ws(t));const n=Ra(t),a=await ev(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sB).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&KR(t),c}),l=await ya._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(l.user),l}function cB(t,e,r){return xn(t.app)?Promise.reject(Ws(t)):aB(zt(t),xc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&KR(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t,e){return zt(t).setPersistence(e)}function dB(t,e,r,n){return zt(t).onIdTokenChanged(e,r,n)}function hB(t,e,r){return zt(t).beforeAuthStateChanged(e,r)}function fB(t,e,r,n){return zt(t).onAuthStateChanged(e,r,n)}function mC(t){return zt(t).signOut()}const Mm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Mm,"1"),this.storage.removeItem(Mm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=1e3,pB=10;class XR extends JR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);PV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pB):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},mB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}XR.type="LOCAL";const ZR=XR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI extends JR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}eI.type="SESSION";const tI=eI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Bp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(a).map(async u=>u(r.origin,i)),c=await gB(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const u=Bw("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(){return window}function vB(t){vs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){return typeof vs().WorkerGlobalScope<"u"&&typeof vs().importScripts=="function"}async function xB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function bB(){return rI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebaseLocalStorageDb",EB=1,Dm="firebaseLocalStorage",sI="fbase_key";class Vd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Up(t,e){return t.transaction([Dm],e?"readwrite":"readonly").objectStore(Dm)}function CB(){const t=indexedDB.deleteDatabase(nI);return new Vd(t).toPromise()}function tv(){const t=indexedDB.open(nI,EB);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Dm,{keyPath:sI})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Dm)?e(n):(n.close(),await CB(),e(await tv()))})})}async function pC(t,e,r){const n=Up(t,!0).put({[sI]:e,value:r});return new Vd(n).toPromise()}async function NB(t,e){const r=Up(t,!1).get(e),n=await new Vd(r).toPromise();return n===void 0?null:n.value}function gC(t,e){const r=Up(t,!0).delete(e);return new Vd(r).toPromise()}const _B=800,TB=3;class iI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>TB)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bp._getInstance(bB()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await xB(),!this.activeServiceWorker)return;this.sender=new yB(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tv();return await pC(e,Mm,"1"),await gC(e,Mm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>pC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>NB(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>gC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Up(s,!1).getAll();return new Vd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_B)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iI.type="LOCAL";const AB=iI;new Od(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t,e){return e?Gs(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw extends Fw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Rl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function RB(t){return YR(t.auth,new Uw(t),t.bypassAuthState)}function IB(t){const{auth:e,user:r}=t;return Pe(r,e,"internal-error"),oB(r,new Uw(t),t.bypassAuthState)}async function jB(t){const{auth:e,user:r}=t;return Pe(r,e,"internal-error"),iB(r,new Uw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RB;case"linkViaPopup":case"linkViaRedirect":return jB;case"reauthViaPopup":case"reauthViaRedirect":return IB;default:Yn(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=new Od(2e3,1e4);class gl extends oI{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,gl.currentPopupAction&&gl.currentPopupAction.cancel(),gl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=Bw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ys(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ys(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ys(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PB.get())};e()}}gl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB="pendingRedirect",Mf=new Map;class MB extends oI{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Mf.get(this.auth._key());if(!e){try{const n=await DB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Mf.set(this.auth._key(),e)}return this.bypassAuthState||Mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DB(t,e){const r=FB(e),n=LB(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function OB(t,e){Mf.set(t._key(),e)}function LB(t){return Gs(t._redirectPersistence)}function FB(t){return kf(kB,t.config.apiKey,t.name)}async function VB(t,e,r=!1){if(xn(t.app))return Promise.reject(Ws(t));const n=Ra(t),s=SB(n,e),a=await new MB(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=10*60*1e3;class UB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qB(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!aI(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ys(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BB&&this.cachedEventUids.clear(),this.cachedEventUids.has(yC(e))}saveEventToCache(e){this.cachedEventUids.add(yC(e)),this.lastProcessedEventTime=Date.now()}}function yC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e={}){return To(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zB=/^https?/;async function HB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await GB(t);for(const r of e)try{if(WB(r))return}catch{}Yn(t,"unauthorized-domain")}function WB(t){const e=Xy(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!zB.test(r))return!1;if($B.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB=new Od(3e4,6e4);function vC(){const t=vs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function YB(t){return new Promise((e,r)=>{var n,s,i;function a(){vC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vC(),r(ys(t,"network-request-failed"))},timeout:QB.get()})}if(!((s=(n=vs().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vs().gapi)===null||i===void 0)&&i.load)a();else{const l=UV("iframefcb");return vs()[l]=()=>{gapi.load?a():r(ys(t,"network-request-failed"))},$R(`${BV()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Df=null,e})}let Df=null;function KB(t){return Df=Df||YB(t),Df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB=new Od(5e3,15e3),XB="__/auth/iframe",ZB="emulator/auth/iframe",e8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r8(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Dw(e,ZB):`https://${t.config.authDomain}/${XB}`,n={apiKey:e.apiKey,appName:t.name,v:hc},s=t8.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Ad(n).slice(1)}`}async function n8(t){const e=await KB(t),r=vs().gapi;return Pe(r,t,"internal-error"),e.open({where:document.body,url:r8(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e8,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=ys(t,"network-request-failed"),l=vs().setTimeout(()=>{i(a)},JB.get());function c(){vs().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i8=500,o8=600,a8="_blank",l8="http://localhost";class xC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c8(t,e,r,n=i8,s=o8){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},s8),{width:n.toString(),height:s.toString(),top:i,left:a}),u=Tr().toLowerCase();r&&(l=LR(u)?a8:r),DR(u)&&(e=e||l8,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(jV(u)&&l!=="_self")return u8(e||"",l),new xC(null);const f=window.open(e||"",l,d);Pe(f,t,"popup-blocked");try{f.focus()}catch{}return new xC(f)}function u8(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8="__/auth/handler",h8="emulator/auth/handler",f8=encodeURIComponent("fac");async function wC(t,e,r,n,s,i){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:hc,eventId:s};if(e instanceof WR){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",UO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof Fd){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${f8}=${encodeURIComponent(c)}`:"";return`${m8(t)}?${Ad(l).slice(1)}${u}`}function m8({config:t}){return t.emulator?Dw(t,h8):`https://${t.authDomain}/${d8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="webStorageSupport";class p8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tI,this._completeRedirectFn=VB,this._overrideRedirectResult=OB}async _openPopup(e,r,n,s){var i;ti((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await wC(e,r,n,Xy(),s);return c8(e,a,Bw())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await wC(e,r,n,Xy(),s);return vB(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(ti(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await n8(e),n=new UB(e);return r.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(f0,{type:f0},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[f0];a!==void 0&&r(!!a),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=HB(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return qR()||OR()||Lw()}}const g8=p8;var bC="@firebase/auth",EC="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x8(t){Kl(new fa("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;Pe(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GR(t)},u=new LV(n,s,i,c);return WV(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Kl(new fa("auth-internal",e=>{const r=Ra(e.getProvider("auth").getImmediate());return(n=>new y8(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zi(bC,EC,v8(t)),Zi(bC,EC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=5*60,b8=BA("authIdTokenMaxAge")||w8;let CC=null;const E8=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>b8)return;const s=r==null?void 0:r.token;CC!==s&&(CC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function C8(t=Wx()){const e=Hx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=HV(t,{popupRedirectResolver:g8,persistence:[AB,ZR,tI]}),n=BA("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=E8(i.toString());hB(r,a,()=>a(r.currentUser)),dB(r,l=>a(l))}}const s=FA("auth");return s&&QV(r,`http://${s}`),r}function N8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FV({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=ys("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",N8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x8("Browser");const _8={apiKey:"AIzaSyBUftmUEX4_zgW-7daz3Yq9Md7QJQWTDOM",authDomain:"vmaster-fcdff.firebaseapp.com",projectId:"vmaster-fcdff",storageBucket:"vmaster-fcdff.firebasestorage.app",messagingSenderId:"44584686885",appId:"1:44584686885:web:1aa7941cebb2ad30bf76cc",measurementId:"G-FH5MHDJ62K"},lI=G5().length?Wx():zA(_8),ft=Y6(lI),sa=C8(lI);uB(sa,ZR);function ot(...t){return pO(NA(t))}const T8=w3,cI=y.forwardRef(({className:t,...e},r)=>o.jsx(yA,{ref:r,className:ot("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));cI.displayName=yA.displayName;const A8=Mx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),uI=y.forwardRef(({className:t,variant:e,...r},n)=>o.jsx(vA,{ref:n,className:ot(A8({variant:e}),t),...r}));uI.displayName=vA.displayName;const S8=y.forwardRef(({className:t,...e},r)=>o.jsx(bA,{ref:r,className:ot("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));S8.displayName=bA.displayName;const dI=y.forwardRef(({className:t,...e},r)=>o.jsx(EA,{ref:r,className:ot("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(hs,{className:"h-4 w-4"})}));dI.displayName=EA.displayName;const hI=y.forwardRef(({className:t,...e},r)=>o.jsx(xA,{ref:r,className:ot("text-sm font-semibold",t),...e}));hI.displayName=xA.displayName;const fI=y.forwardRef(({className:t,...e},r)=>o.jsx(wA,{ref:r,className:ot("text-sm opacity-90",t),...e}));fI.displayName=wA.displayName;function R8(){const{toasts:t}=PD();return o.jsxs(T8,{children:[t.map(function({id:e,title:r,description:n,action:s,...i}){return o.jsxs(uI,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(hI,{children:r}),n&&o.jsx(fI,{children:n})]}),s,o.jsx(dI,{})]},e)}),o.jsx(cI,{})]})}var NC=["light","dark"],I8="(prefers-color-scheme: dark)",j8=y.createContext(void 0),P8={setTheme:t=>{},themes:[]},k8=()=>{var t;return(t=y.useContext(j8))!=null?t:P8};y.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=s?NC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,p=!1,b=!0)=>{let E=a?a[x]:x,w=p?x+"|| ''":`'${E}'`,C="";return s&&b&&!p&&NC.includes(x)&&(C+=`d.style.colorScheme = '${x}';`),r==="class"?p||E?C+=`c.add(${w})`:C+="null":E&&(C+=`d[s](n,${w})`),C},g=t?`!function(){${d}${m(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${I8}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return y.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var M8=t=>{switch(t){case"success":return L8;case"info":return V8;case"warning":return F8;case"error":return B8;default:return null}},D8=Array(12).fill(0),O8=({visible:t})=>J.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},J.createElement("div",{className:"sonner-spinner"},D8.map((e,r)=>J.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),L8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),F8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),V8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),B8=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),U8=()=>{let[t,e]=J.useState(document.hidden);return J.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},rv=1,q8=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:rv++,i=this.toasts.find(l=>l.id===s),a=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:r}),{...l,...t,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...n,dismissible:a,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0;return n.then(async i=>{if($8(i)&&!i.ok){s=!1;let a=typeof e.error=="function"?await e.error(`HTTP error! status: ${i.status}`):e.error,l=typeof e.description=="function"?await e.description(`HTTP error! status: ${i.status}`):e.description;this.create({id:r,type:"error",message:a,description:l})}else if(e.success!==void 0){s=!1;let a=typeof e.success=="function"?await e.success(i):e.success,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"success",message:a,description:l})}}).catch(async i=>{if(e.error!==void 0){s=!1;let a=typeof e.error=="function"?await e.error(i):e.error,l=typeof e.description=="function"?await e.description(i):e.description;this.create({id:r,type:"error",message:a,description:l})}}).finally(()=>{var i;s&&(this.dismiss(r),r=void 0),(i=e.finally)==null||i.call(e)}),r},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||rv++;return this.create({jsx:t(r),id:r,...e}),r},this.subscribers=[],this.toasts=[]}},en=new q8,G8=(t,e)=>{let r=(e==null?void 0:e.id)||rv++;return en.addToast({title:t,...e,id:r}),r},$8=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",z8=G8,H8=()=>en.toasts;Object.assign(z8,{success:en.success,info:en.info,warning:en.warning,error:en.error,custom:en.custom,message:en.message,promise:en.promise,dismiss:en.dismiss,loading:en.loading},{getHistory:H8});function W8(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}W8(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function rf(t){return t.label!==void 0}var Q8=3,Y8="32px",K8=4e3,J8=356,X8=14,Z8=20,e9=200;function t9(...t){return t.filter(Boolean).join(" ")}var r9=t=>{var e,r,n,s,i,a,l,c,u,d;let{invert:f,toast:m,unstyled:g,interacting:x,setHeights:p,visibleToasts:b,heights:E,index:w,toasts:C,expanded:I,removeToast:j,defaultRichColors:V,closeButton:R,style:_,cancelButtonStyle:A,actionButtonStyle:k,className:L="",descriptionClassName:M="",duration:P,position:B,gap:z,loadingIcon:Q,expandByDefault:Z,classNames:U,icons:H,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:ne,cn:le}=t,[he,Ne]=J.useState(!1),[Me,ue]=J.useState(!1),[ee,de]=J.useState(!1),[G,me]=J.useState(!1),[Ee,Ce]=J.useState(0),[pe,ve]=J.useState(0),at=J.useRef(null),ht=J.useRef(null),Ft=w===0,rt=w+1<=b,wt=m.type,hr=m.dismissible!==!1,An=m.className||"",Cs=m.descriptionClassName||"",hn=J.useMemo(()=>E.findIndex(je=>je.toastId===m.id)||0,[E,m.id]),Ns=J.useMemo(()=>{var je;return(je=m.closeButton)!=null?je:R},[m.closeButton,R]),Po=J.useMemo(()=>m.duration||P||K8,[m.duration,P]),It=J.useRef(0),bt=J.useRef(0),_s=J.useRef(0),Sn=J.useRef(null),[ko,li]=B.split("-"),fn=J.useMemo(()=>E.reduce((je,ze,et)=>et>=hn?je:je+ze.height,0),[E,hn]),Rn=U8(),In=m.invert||f,Ar=wt==="loading";bt.current=J.useMemo(()=>hn*z+fn,[hn,fn]),J.useEffect(()=>{Ne(!0)},[]),J.useLayoutEffect(()=>{if(!he)return;let je=ht.current,ze=je.style.height;je.style.height="auto";let et=je.getBoundingClientRect().height;je.style.height=ze,ve(et),p(Jt=>Jt.find(fr=>fr.toastId===m.id)?Jt.map(fr=>fr.toastId===m.id?{...fr,height:et}:fr):[{toastId:m.id,height:et,position:m.position},...Jt])},[he,m.title,m.description,p,m.id]);let Sr=J.useCallback(()=>{ue(!0),Ce(bt.current),p(je=>je.filter(ze=>ze.toastId!==m.id)),setTimeout(()=>{j(m)},e9)},[m,j,p,bt]);J.useEffect(()=>{if(m.promise&&wt==="loading"||m.duration===1/0||m.type==="loading")return;let je,ze=Po;return I||x||ne&&Rn?(()=>{if(_s.current<It.current){let et=new Date().getTime()-It.current;ze=ze-et}_s.current=new Date().getTime()})():ze!==1/0&&(It.current=new Date().getTime(),je=setTimeout(()=>{var et;(et=m.onAutoClose)==null||et.call(m,m),Sr()},ze)),()=>clearTimeout(je)},[I,x,Z,m,Po,Sr,m.promise,wt,ne,Rn]),J.useEffect(()=>{let je=ht.current;if(je){let ze=je.getBoundingClientRect().height;return ve(ze),p(et=>[{toastId:m.id,height:ze,position:m.position},...et]),()=>p(et=>et.filter(Jt=>Jt.toastId!==m.id))}},[p,m.id]),J.useEffect(()=>{m.delete&&Sr()},[Sr,m.delete]);function Tc(){return H!=null&&H.loading?J.createElement("div",{className:"sonner-loader","data-visible":wt==="loading"},H.loading):Q?J.createElement("div",{className:"sonner-loader","data-visible":wt==="loading"},Q):J.createElement(O8,{visible:wt==="loading"})}return J.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ht,className:le(L,An,U==null?void 0:U.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[wt],(r=m==null?void 0:m.classNames)==null?void 0:r[wt]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:V,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":he,"data-promise":!!m.promise,"data-removed":Me,"data-visible":rt,"data-y-position":ko,"data-x-position":li,"data-index":w,"data-front":Ft,"data-swiping":ee,"data-dismissible":hr,"data-type":wt,"data-invert":In,"data-swipe-out":G,"data-expanded":!!(I||Z&&he),style:{"--index":w,"--toasts-before":w,"--z-index":C.length-w,"--offset":`${Me?Ee:bt.current}px`,"--initial-height":Z?"auto":`${pe}px`,..._,...m.style},onPointerDown:je=>{Ar||!hr||(at.current=new Date,Ce(bt.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(de(!0),Sn.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,ze,et,Jt;if(G||!hr)return;Sn.current=null;let fr=Number(((je=ht.current)==null?void 0:je.style.getPropertyValue("--swipe-amount").replace("px",""))||0),jn=new Date().getTime()-((ze=at.current)==null?void 0:ze.getTime()),gt=Math.abs(fr)/jn;if(Math.abs(fr)>=Z8||gt>.11){Ce(bt.current),(et=m.onDismiss)==null||et.call(m,m),Sr(),me(!0);return}(Jt=ht.current)==null||Jt.style.setProperty("--swipe-amount","0px"),de(!1)},onPointerMove:je=>{var ze;if(!Sn.current||!hr)return;let et=je.clientY-Sn.current.y,Jt=je.clientX-Sn.current.x,fr=(ko==="top"?Math.min:Math.max)(0,et),jn=je.pointerType==="touch"?10:2;Math.abs(fr)>jn?(ze=ht.current)==null||ze.style.setProperty("--swipe-amount",`${et}px`):Math.abs(Jt)>jn&&(Sn.current=null)}},Ns&&!m.jsx?J.createElement("button",{"aria-label":ie,"data-disabled":Ar,"data-close-button":!0,onClick:Ar||!hr?()=>{}:()=>{var je;Sr(),(je=m.onDismiss)==null||je.call(m,m)},className:le(U==null?void 0:U.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},J.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),J.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||J.isValidElement(m.title)?m.jsx||m.title:J.createElement(J.Fragment,null,wt||m.icon||m.promise?J.createElement("div",{"data-icon":"",className:le(U==null?void 0:U.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Tc():null,m.type!=="loading"?m.icon||(H==null?void 0:H[wt])||M8(wt):null):null,J.createElement("div",{"data-content":"",className:le(U==null?void 0:U.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},J.createElement("div",{"data-title":"",className:le(U==null?void 0:U.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?J.createElement("div",{"data-description":"",className:le(M,Cs,U==null?void 0:U.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),J.isValidElement(m.cancel)?m.cancel:m.cancel&&rf(m.cancel)?J.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:je=>{var ze,et;rf(m.cancel)&&hr&&((et=(ze=m.cancel).onClick)==null||et.call(ze,je),Sr())},className:le(U==null?void 0:U.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,J.isValidElement(m.action)?m.action:m.action&&rf(m.action)?J.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||k,onClick:je=>{var ze,et;rf(m.action)&&(je.defaultPrevented||((et=(ze=m.action).onClick)==null||et.call(ze,je),Sr()))},className:le(U==null?void 0:U.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function _C(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var n9=t=>{let{invert:e,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:a,offset:l,theme:c="light",richColors:u,duration:d,style:f,visibleToasts:m=Q8,toastOptions:g,dir:x=_C(),gap:p=X8,loadingIcon:b,icons:E,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:C,cn:I=t9}=t,[j,V]=J.useState([]),R=J.useMemo(()=>Array.from(new Set([r].concat(j.filter(ne=>ne.position).map(ne=>ne.position)))),[j,r]),[_,A]=J.useState([]),[k,L]=J.useState(!1),[M,P]=J.useState(!1),[B,z]=J.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=J.useRef(null),Z=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=J.useRef(null),H=J.useRef(!1),ie=J.useCallback(ne=>{var le;(le=j.find(he=>he.id===ne.id))!=null&&le.delete||en.dismiss(ne.id),V(he=>he.filter(({id:Ne})=>Ne!==ne.id))},[j]);return J.useEffect(()=>en.subscribe(ne=>{if(ne.dismiss){V(le=>le.map(he=>he.id===ne.id?{...he,delete:!0}:he));return}setTimeout(()=>{XT.flushSync(()=>{V(le=>{let he=le.findIndex(Ne=>Ne.id===ne.id);return he!==-1?[...le.slice(0,he),{...le[he],...ne},...le.slice(he+1)]:[ne,...le]})})})}),[]),J.useEffect(()=>{if(c!=="system"){z(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:ne})=>{z(ne?"dark":"light")})},[c]),J.useEffect(()=>{j.length<=1&&L(!1)},[j]),J.useEffect(()=>{let ne=le=>{var he,Ne;n.every(Me=>le[Me]||le.code===Me)&&(L(!0),(he=Q.current)==null||he.focus()),le.code==="Escape"&&(document.activeElement===Q.current||(Ne=Q.current)!=null&&Ne.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[n]),J.useEffect(()=>{if(Q.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,H.current=!1)}},[Q.current]),j.length?J.createElement("section",{"aria-label":`${w} ${Z}`,tabIndex:-1},R.map((ne,le)=>{var he;let[Ne,Me]=ne.split("-");return J.createElement("ol",{key:ne,dir:x==="auto"?_C():x,tabIndex:-1,ref:Q,className:a,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":Ne,"data-x-position":Me,style:{"--front-toast-height":`${((he=_[0])==null?void 0:he.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||Y8,"--width":`${J8}px`,"--gap":`${p}px`,...f},onBlur:ue=>{H.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(H.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||H.current||(H.current=!0,U.current=ue.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{M||L(!1)},onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},j.filter(ue=>!ue.position&&le===0||ue.position===ne).map((ue,ee)=>{var de,G;return J.createElement(r9,{key:ue.id,icons:E,index:ee,toast:ue,defaultRichColors:u,duration:(de=g==null?void 0:g.duration)!=null?de:d,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:e,visibleToasts:m,closeButton:(G=g==null?void 0:g.closeButton)!=null?G:i,interacting:M,position:ne,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ie,toasts:j.filter(me=>me.position==ue.position),heights:_.filter(me=>me.position==ue.position),setHeights:A,expandByDefault:s,gap:p,loadingIcon:b,expanded:k,pauseWhenPageIsHidden:C,cn:I})}))})):null};const s9=({...t})=>{const{theme:e="system"}=k8();return o.jsx(n9,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var i9=YN.useId||(()=>{}),o9=0;function ia(t){const[e,r]=y.useState(i9());return _r(()=>{r(n=>n??String(o9++))},[t]),e?`radix-${e}`:""}const a9=["top","right","bottom","left"],go=Math.min,rn=Math.max,Om=Math.round,nf=Math.floor,yo=t=>({x:t,y:t}),l9={left:"right",right:"left",bottom:"top",top:"bottom"},c9={start:"end",end:"start"};function nv(t,e,r){return rn(t,go(e,r))}function ri(t,e){return typeof t=="function"?t(e):t}function ni(t){return t.split("-")[0]}function wc(t){return t.split("-")[1]}function qw(t){return t==="x"?"y":"x"}function Gw(t){return t==="y"?"height":"width"}function vo(t){return["top","bottom"].includes(ni(t))?"y":"x"}function $w(t){return qw(vo(t))}function u9(t,e,r){r===void 0&&(r=!1);const n=wc(t),s=$w(t),i=Gw(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Lm(a)),[a,Lm(a)]}function d9(t){const e=Lm(t);return[sv(t),e,sv(e)]}function sv(t){return t.replace(/start|end/g,e=>c9[e])}function h9(t,e,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?i:a;default:return[]}}function f9(t,e,r,n){const s=wc(t);let i=h9(ni(t),r==="start",n);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(sv)))),i}function Lm(t){return t.replace(/left|right|bottom|top/g,e=>l9[e])}function m9(t){return{top:0,right:0,bottom:0,left:0,...t}}function mI(t){return typeof t!="number"?m9(t):{top:t,right:t,bottom:t,left:t}}function Fm(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function TC(t,e,r){let{reference:n,floating:s}=t;const i=vo(e),a=$w(e),l=Gw(a),c=ni(e),u=i==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let g;switch(c){case"top":g={x:d,y:n.y-s.height};break;case"bottom":g={x:d,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:f};break;case"left":g={x:n.x-s.width,y:f};break;default:g={x:n.x,y:n.y}}switch(wc(e)){case"start":g[a]-=m*(r&&u?-1:1);break;case"end":g[a]+=m*(r&&u?-1:1);break}return g}const p9=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:a}=r,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=TC(u,n,c),m=n,g={},x=0;for(let p=0;p<l.length;p++){const{name:b,fn:E}=l[p],{x:w,y:C,data:I,reset:j}=await E({x:d,y:f,initialPlacement:n,placement:m,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});d=w??d,f=C??f,g={...g,[b]:{...g[b],...I}},j&&x<=50&&(x++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:d,y:f}=TC(u,m,c)),p=-1)}return{x:d,y:f,placement:m,strategy:s,middlewareData:g}};async function ad(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=ri(e,t),x=mI(g),b=l[m?f==="floating"?"reference":"floating":f],E=Fm(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=f==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},j=Fm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:C,strategy:c}):w);return{top:(E.top-j.top+x.top)/I.y,bottom:(j.bottom-E.bottom+x.bottom)/I.y,left:(E.left-j.left+x.left)/I.x,right:(j.right-E.right+x.right)/I.x}}const g9=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ri(t,e)||{};if(u==null)return{};const f=mI(d),m={x:r,y:n},g=$w(s),x=Gw(g),p=await a.getDimensions(u),b=g==="y",E=b?"top":"left",w=b?"bottom":"right",C=b?"clientHeight":"clientWidth",I=i.reference[x]+i.reference[g]-m[g]-i.floating[x],j=m[g]-i.reference[g],V=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let R=V?V[C]:0;(!R||!await(a.isElement==null?void 0:a.isElement(V)))&&(R=l.floating[C]||i.floating[x]);const _=I/2-j/2,A=R/2-p[x]/2-1,k=go(f[E],A),L=go(f[w],A),M=k,P=R-p[x]-L,B=R/2-p[x]/2+_,z=nv(M,B,P),Q=!c.arrow&&wc(s)!=null&&B!==z&&i.reference[x]/2-(B<M?k:L)-p[x]/2<0,Z=Q?B<M?B-M:B-P:0;return{[g]:m[g]+Z,data:{[g]:z,centerOffset:B-z-Z,...Q&&{alignmentOffset:Z}},reset:Q}}}),y9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:p=!0,...b}=ri(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const E=ni(s),w=vo(l),C=ni(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(C||!p?[Lm(l)]:d9(l)),V=x!=="none";!m&&V&&j.push(...f9(l,p,x,I));const R=[l,...j],_=await ad(e,b),A=[];let k=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&A.push(_[E]),f){const B=u9(s,a,I);A.push(_[B[0]],_[B[1]])}if(k=[...k,{placement:s,overflows:A}],!A.every(B=>B<=0)){var L,M;const B=(((L=i.flip)==null?void 0:L.index)||0)+1,z=R[B];if(z)return{data:{index:B,overflows:k},reset:{placement:z}};let Q=(M=k.filter(Z=>Z.overflows[0]<=0).sort((Z,U)=>Z.overflows[1]-U.overflows[1])[0])==null?void 0:M.placement;if(!Q)switch(g){case"bestFit":{var P;const Z=(P=k.filter(U=>{if(V){const H=vo(U.placement);return H===w||H==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(H=>H>0).reduce((H,ie)=>H+ie,0)]).sort((U,H)=>U[1]-H[1])[0])==null?void 0:P[0];Z&&(Q=Z);break}case"initialPlacement":Q=l;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function AC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function SC(t){return a9.some(e=>t[e]>=0)}const v9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=ri(t,e);switch(n){case"referenceHidden":{const i=await ad(e,{...s,elementContext:"reference"}),a=AC(i,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:SC(a)}}}case"escaped":{const i=await ad(e,{...s,altBoundary:!0}),a=AC(i,r.floating);return{data:{escapedOffsets:a,escaped:SC(a)}}}default:return{}}}}};async function x9(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=ni(r),l=wc(r),c=vo(r)==="y",u=["left","top"].includes(a)?-1:1,d=i&&c?-1:1,f=ri(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const w9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await x9(e,t);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},b9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:E,y:w}=b;return{x:E,y:w}}},...c}=ri(t,e),u={x:r,y:n},d=await ad(e,c),f=vo(ni(s)),m=qw(f);let g=u[m],x=u[f];if(i){const b=m==="y"?"top":"left",E=m==="y"?"bottom":"right",w=g+d[b],C=g-d[E];g=nv(w,g,C)}if(a){const b=f==="y"?"top":"left",E=f==="y"?"bottom":"right",w=x+d[b],C=x-d[E];x=nv(w,x,C)}const p=l.fn({...e,[m]:g,[f]:x});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[m]:i,[f]:a}}}}}},E9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ri(t,e),d={x:r,y:n},f=vo(s),m=qw(f);let g=d[m],x=d[f];const p=ri(l,e),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const C=m==="y"?"height":"width",I=i.reference[m]-i.floating[C]+b.mainAxis,j=i.reference[m]+i.reference[C]-b.mainAxis;g<I?g=I:g>j&&(g=j)}if(u){var E,w;const C=m==="y"?"width":"height",I=["top","left"].includes(ni(s)),j=i.reference[f]-i.floating[C]+(I&&((E=a.offset)==null?void 0:E[f])||0)+(I?0:b.crossAxis),V=i.reference[f]+i.reference[C]+(I?0:((w=a.offset)==null?void 0:w[f])||0)-(I?b.crossAxis:0);x<j?x=j:x>V&&(x=V)}return{[m]:g,[f]:x}}}},C9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=ri(t,e),d=await ad(e,u),f=ni(s),m=wc(s),g=vo(s)==="y",{width:x,height:p}=i.floating;let b,E;f==="top"||f==="bottom"?(b=f,E=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(E=f,b=m==="end"?"top":"bottom");const w=p-d.top-d.bottom,C=x-d.left-d.right,I=go(p-d[b],w),j=go(x-d[E],C),V=!e.middlewareData.shift;let R=I,_=j;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(_=C),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(R=w),V&&!m){const k=rn(d.left,0),L=rn(d.right,0),M=rn(d.top,0),P=rn(d.bottom,0);g?_=x-2*(k!==0||L!==0?k+L:rn(d.left,d.right)):R=p-2*(M!==0||P!==0?M+P:rn(d.top,d.bottom))}await c({...e,availableWidth:_,availableHeight:R});const A=await a.getDimensions(l.floating);return x!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function qp(){return typeof window<"u"}function bc(t){return pI(t)?(t.nodeName||"").toLowerCase():"#document"}function ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function bs(t){var e;return(e=(pI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function pI(t){return qp()?t instanceof Node||t instanceof ln(t).Node:!1}function Kn(t){return qp()?t instanceof Element||t instanceof ln(t).Element:!1}function ws(t){return qp()?t instanceof HTMLElement||t instanceof ln(t).HTMLElement:!1}function RC(t){return!qp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ln(t).ShadowRoot}function Bd(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=Jn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function N9(t){return["table","td","th"].includes(bc(t))}function Gp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function zw(t){const e=Hw(),r=Kn(t)?Jn(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function _9(t){let e=xo(t);for(;ws(e)&&!rc(e);){if(zw(e))return e;if(Gp(e))return null;e=xo(e)}return null}function Hw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rc(t){return["html","body","#document"].includes(bc(t))}function Jn(t){return ln(t).getComputedStyle(t)}function $p(t){return Kn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function xo(t){if(bc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||RC(t)&&t.host||bs(t);return RC(e)?e.host:e}function gI(t){const e=xo(t);return rc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ws(e)&&Bd(e)?e:gI(e)}function ld(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=gI(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),a=ln(s);if(i){const l=iv(a);return e.concat(a,a.visualViewport||[],Bd(s)?s:[],l&&r?ld(l):[])}return e.concat(s,ld(s,[],r))}function iv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yI(t){const e=Jn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=ws(t),i=s?t.offsetWidth:r,a=s?t.offsetHeight:n,l=Om(r)!==i||Om(n)!==a;return l&&(r=i,n=a),{width:r,height:n,$:l}}function Ww(t){return Kn(t)?t:t.contextElement}function Il(t){const e=Ww(t);if(!ws(e))return yo(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=yI(e);let a=(i?Om(r.width):r.width)/n,l=(i?Om(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const T9=yo(0);function vI(t){const e=ln(t);return!Hw()||!e.visualViewport?T9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function A9(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ln(t)?!1:e}function va(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=Ww(t);let a=yo(1);e&&(n?Kn(n)&&(a=Il(n)):a=Il(t));const l=A9(i,r,n)?vI(i):yo(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,f=s.height/a.y;if(i){const m=ln(i),g=n&&Kn(n)?ln(n):n;let x=m,p=iv(x);for(;p&&n&&g!==x;){const b=Il(p),E=p.getBoundingClientRect(),w=Jn(p),C=E.left+(p.clientLeft+parseFloat(w.paddingLeft))*b.x,I=E.top+(p.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=C,u+=I,x=ln(p),p=iv(x)}}return Fm({width:d,height:f,x:c,y:u})}function S9(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",a=bs(n),l=e?Gp(e.floating):!1;if(n===a||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=yo(1);const d=yo(0),f=ws(n);if((f||!f&&!i)&&((bc(n)!=="body"||Bd(a))&&(c=$p(n)),ws(n))){const m=va(n);u=Il(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x,y:r.y*u.y-c.scrollTop*u.y+d.y}}function R9(t){return Array.from(t.getClientRects())}function ov(t,e){const r=$p(t).scrollLeft;return e?e.left+r:va(bs(t)).left+r}function I9(t){const e=bs(t),r=$p(t),n=t.ownerDocument.body,s=rn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=rn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+ov(t);const l=-r.scrollTop;return Jn(n).direction==="rtl"&&(a+=rn(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:a,y:l}}function j9(t,e){const r=ln(t),n=bs(t),s=r.visualViewport;let i=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Hw();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function P9(t,e){const r=va(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=ws(t)?Il(t):yo(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:a,height:l,x:c,y:u}}function IC(t,e,r){let n;if(e==="viewport")n=j9(t,r);else if(e==="document")n=I9(bs(t));else if(Kn(e))n=P9(e,r);else{const s=vI(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return Fm(n)}function xI(t,e){const r=xo(t);return r===e||!Kn(r)||rc(r)?!1:Jn(r).position==="fixed"||xI(r,e)}function k9(t,e){const r=e.get(t);if(r)return r;let n=ld(t,[],!1).filter(l=>Kn(l)&&bc(l)!=="body"),s=null;const i=Jn(t).position==="fixed";let a=i?xo(t):t;for(;Kn(a)&&!rc(a);){const l=Jn(a),c=zw(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Bd(a)&&!c&&xI(t,a))?n=n.filter(d=>d!==a):s=l,a=xo(a)}return e.set(t,n),n}function M9(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const a=[...r==="clippingAncestors"?Gp(e)?[]:k9(e,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,d)=>{const f=IC(e,d,s);return u.top=rn(f.top,u.top),u.right=go(f.right,u.right),u.bottom=go(f.bottom,u.bottom),u.left=rn(f.left,u.left),u},IC(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function D9(t){const{width:e,height:r}=yI(t);return{width:e,height:r}}function O9(t,e,r){const n=ws(e),s=bs(e),i=r==="fixed",a=va(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=yo(0);if(n||!n&&!i)if((bc(e)!=="body"||Bd(s))&&(l=$p(e)),n){const g=va(e,!0,i,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&(c.x=ov(s));let u=0,d=0;if(s&&!n&&!i){const g=s.getBoundingClientRect();d=g.top+l.scrollTop,u=g.left+l.scrollLeft-ov(s,g)}const f=a.left+l.scrollLeft-c.x-u,m=a.top+l.scrollTop-c.y-d;return{x:f,y:m,width:a.width,height:a.height}}function m0(t){return Jn(t).position==="static"}function jC(t,e){if(!ws(t)||Jn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return bs(t)===r&&(r=r.ownerDocument.body),r}function wI(t,e){const r=ln(t);if(Gp(t))return r;if(!ws(t)){let s=xo(t);for(;s&&!rc(s);){if(Kn(s)&&!m0(s))return s;s=xo(s)}return r}let n=jC(t,e);for(;n&&N9(n)&&m0(n);)n=jC(n,e);return n&&rc(n)&&m0(n)&&!zw(n)?r:n||_9(t)||r}const L9=async function(t){const e=this.getOffsetParent||wI,r=this.getDimensions,n=await r(t.floating);return{reference:O9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function F9(t){return Jn(t).direction==="rtl"}const V9={convertOffsetParentRelativeRectToViewportRelativeRect:S9,getDocumentElement:bs,getClippingRect:M9,getOffsetParent:wI,getElementRects:L9,getClientRects:R9,getDimensions:D9,getScale:Il,isElement:Kn,isRTL:F9};function B9(t,e){let r=null,n;const s=bs(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:u,top:d,width:f,height:m}=t.getBoundingClientRect();if(l||e(),!f||!m)return;const g=nf(d),x=nf(s.clientWidth-(u+f)),p=nf(s.clientHeight-(d+m)),b=nf(u),w={rootMargin:-g+"px "+-x+"px "+-p+"px "+-b+"px",threshold:rn(0,go(1,c))||1};let C=!0;function I(j){const V=j[0].intersectionRatio;if(V!==c){if(!C)return a();V?a(!1,V):n=setTimeout(()=>{a(!1,1e-7)},1e3)}C=!1}try{r=new IntersectionObserver(I,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(I,w)}r.observe(t)}return a(!0),i}function U9(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Ww(t),d=s||i?[...u?ld(u):[],...ld(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",r,{passive:!0}),i&&E.addEventListener("resize",r)});const f=u&&l?B9(u,r):null;let m=-1,g=null;a&&(g=new ResizeObserver(E=>{let[w]=E;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(e)})),r()}),u&&!c&&g.observe(u),g.observe(e));let x,p=c?va(t):null;c&&b();function b(){const E=va(t);p&&(E.x!==p.x||E.y!==p.y||E.width!==p.width||E.height!==p.height)&&r(),p=E,x=requestAnimationFrame(b)}return r(),()=>{var E;d.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),f==null||f(),(E=g)==null||E.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const q9=w9,G9=b9,$9=y9,z9=C9,H9=v9,PC=g9,W9=E9,Q9=(t,e,r)=>{const n=new Map,s={platform:V9,...r},i={...s.platform,_c:n};return p9(t,e,{...s,platform:i})};var Of=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Vm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Vm(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!Vm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function bI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kC(t,e){const r=bI(t);return Math.round(e*r)/r}function p0(t){const e=y.useRef(t);return Of(()=>{e.current=t}),e}function Y9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=y.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=y.useState(n);Vm(m,n)||g(n);const[x,p]=y.useState(null),[b,E]=y.useState(null),w=y.useCallback(U=>{U!==V.current&&(V.current=U,p(U))},[]),C=y.useCallback(U=>{U!==R.current&&(R.current=U,E(U))},[]),I=i||x,j=a||b,V=y.useRef(null),R=y.useRef(null),_=y.useRef(d),A=c!=null,k=p0(c),L=p0(s),M=p0(u),P=y.useCallback(()=>{if(!V.current||!R.current)return;const U={placement:e,strategy:r,middleware:m};L.current&&(U.platform=L.current),Q9(V.current,R.current,U).then(H=>{const ie={...H,isPositioned:M.current!==!1};B.current&&!Vm(_.current,ie)&&(_.current=ie,Ca.flushSync(()=>{f(ie)}))})},[m,e,r,L,M]);Of(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[u]);const B=y.useRef(!1);Of(()=>(B.current=!0,()=>{B.current=!1}),[]),Of(()=>{if(I&&(V.current=I),j&&(R.current=j),I&&j){if(k.current)return k.current(I,j,P);P()}},[I,j,P,k,A]);const z=y.useMemo(()=>({reference:V,floating:R,setReference:w,setFloating:C}),[w,C]),Q=y.useMemo(()=>({reference:I,floating:j}),[I,j]),Z=y.useMemo(()=>{const U={position:r,left:0,top:0};if(!Q.floating)return U;const H=kC(Q.floating,d.x),ie=kC(Q.floating,d.y);return l?{...U,transform:"translate("+H+"px, "+ie+"px)",...bI(Q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:ie}},[r,l,Q.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:P,refs:z,elements:Q,floatingStyles:Z}),[d,P,z,Q,Z])}const K9=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?PC({element:n.current,padding:s}).fn(r):{}:n?PC({element:n,padding:s}).fn(r):{}}}},J9=(t,e)=>({...q9(t),options:[t,e]}),X9=(t,e)=>({...G9(t),options:[t,e]}),Z9=(t,e)=>({...W9(t),options:[t,e]}),eU=(t,e)=>({...$9(t),options:[t,e]}),tU=(t,e)=>({...z9(t),options:[t,e]}),rU=(t,e)=>({...H9(t),options:[t,e]}),nU=(t,e)=>({...K9(t),options:[t,e]});var sU="Arrow",EI=y.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return o.jsx($e.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});EI.displayName=sU;var iU=EI;function oU(t,e=[]){let r=[];function n(i,a){const l=y.createContext(a),c=r.length;r=[...r,a];function u(f){const{scope:m,children:g,...x}=f,p=(m==null?void 0:m[t][c])||l,b=y.useMemo(()=>x,Object.values(x));return o.jsx(p.Provider,{value:b,children:g})}function d(f,m){const g=(m==null?void 0:m[t][c])||l,x=y.useContext(g);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const s=()=>{const i=r.map(a=>y.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,aU(s,...e)]}function aU(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}function lU(t){const[e,r]=y.useState(void 0);return _r(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;r({width:a,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Qw="Popper",[CI,Ec]=oU(Qw),[cU,NI]=CI(Qw),_I=t=>{const{__scopePopper:e,children:r}=t,[n,s]=y.useState(null);return o.jsx(cU,{scope:e,anchor:n,onAnchorChange:s,children:r})};_I.displayName=Qw;var TI="PopperAnchor",AI=y.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=NI(TI,r),a=y.useRef(null),l=ut(e,a);return y.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx($e.div,{...s,ref:l})});AI.displayName=TI;var Yw="PopperContent",[uU,dU]=CI(Yw),SI=y.forwardRef((t,e)=>{var ee,de,G,me,Ee,Ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:x,...p}=t,b=NI(Yw,r),[E,w]=y.useState(null),C=ut(e,pe=>w(pe)),[I,j]=y.useState(null),V=lU(I),R=(V==null?void 0:V.width)??0,_=(V==null?void 0:V.height)??0,A=n+(i!=="center"?"-"+i:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},L=Array.isArray(u)?u:[u],M=L.length>0,P={padding:k,boundary:L.filter(fU),altBoundary:M},{refs:B,floatingStyles:z,placement:Q,isPositioned:Z,middlewareData:U}=Y9({strategy:"fixed",placement:A,whileElementsMounted:(...pe)=>U9(...pe,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[J9({mainAxis:s+_,alignmentAxis:a}),c&&X9({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Z9():void 0,...P}),c&&eU({...P}),tU({...P,apply:({elements:pe,rects:ve,availableWidth:at,availableHeight:ht})=>{const{width:Ft,height:rt}=ve.reference,wt=pe.floating.style;wt.setProperty("--radix-popper-available-width",`${at}px`),wt.setProperty("--radix-popper-available-height",`${ht}px`),wt.setProperty("--radix-popper-anchor-width",`${Ft}px`),wt.setProperty("--radix-popper-anchor-height",`${rt}px`)}}),I&&nU({element:I,padding:l}),mU({arrowWidth:R,arrowHeight:_}),m&&rU({strategy:"referenceHidden",...P})]}),[H,ie]=jI(Q),ne=Nr(x);_r(()=>{Z&&(ne==null||ne())},[Z,ne]);const le=(ee=U.arrow)==null?void 0:ee.x,he=(de=U.arrow)==null?void 0:de.y,Ne=((G=U.arrow)==null?void 0:G.centerOffset)!==0,[Me,ue]=y.useState();return _r(()=>{E&&ue(window.getComputedStyle(E).zIndex)},[E]),o.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:Z?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(me=U.transformOrigin)==null?void 0:me.x,(Ee=U.transformOrigin)==null?void 0:Ee.y].join(" "),...((Ce=U.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(uU,{scope:r,placedSide:H,onArrowChange:j,arrowX:le,arrowY:he,shouldHideArrow:Ne,children:o.jsx($e.div,{"data-side":H,"data-align":ie,...p,ref:C,style:{...p.style,animation:Z?void 0:"none"}})})})});SI.displayName=Yw;var RI="PopperArrow",hU={top:"bottom",right:"left",bottom:"top",left:"right"},II=y.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=dU(RI,n),a=hU[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(iU,{...s,ref:r,style:{...s.style,display:"block"}})})});II.displayName=RI;function fU(t){return t!==null}var mU=t=>({name:"transformOrigin",options:t,fn(e){var b,E,w;const{placement:r,rects:n,middlewareData:s}=e,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,d]=jI(r),f={start:"0%",center:"50%",end:"100%"}[d],m=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let x="",p="";return u==="bottom"?(x=a?f:`${m}px`,p=`${-c}px`):u==="top"?(x=a?f:`${m}px`,p=`${n.floating.height+c}px`):u==="right"?(x=`${-c}px`,p=a?f:`${g}px`):u==="left"&&(x=`${n.floating.width+c}px`,p=a?f:`${g}px`),{data:{x,y:p}}}});function jI(t){const[e,r="center"]=t.split("-");return[e,r]}var PI=_I,Kw=AI,Jw=SI,Xw=II,[zp,YW]=Cd("Tooltip",[Ec]),Zw=Ec(),kI="TooltipProvider",pU=700,MC="tooltip.open",[gU,MI]=zp(kI),DI=t=>{const{__scopeTooltip:e,delayDuration:r=pU,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,[a,l]=y.useState(!0),c=y.useRef(!1),u=y.useRef(0);return y.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),o.jsx(gU,{scope:e,isOpenDelayed:a,delayDuration:r,onOpen:y.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:y.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:y.useCallback(d=>{c.current=d},[]),disableHoverableContent:s,children:i})};DI.displayName=kI;var OI="Tooltip",[KW,Hp]=zp(OI),av="TooltipTrigger",yU=y.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Hp(av,r),i=MI(av,r),a=Zw(r),l=y.useRef(null),c=ut(e,l,s.onTriggerChange),u=y.useRef(!1),d=y.useRef(!1),f=y.useCallback(()=>u.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(Kw,{asChild:!0,...a,children:o.jsx($e.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:xe(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:xe(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:xe(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:xe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:xe(t.onBlur,s.onClose),onClick:xe(t.onClick,s.onClose)})})});yU.displayName=av;var vU="TooltipPortal",[JW,xU]=zp(vU,{forceMount:void 0}),nc="TooltipContent",LI=y.forwardRef((t,e)=>{const r=xU(nc,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,a=Hp(nc,t.__scopeTooltip);return o.jsx(Na,{present:n||a.open,children:a.disableHoverableContent?o.jsx(FI,{side:s,...i,ref:e}):o.jsx(wU,{side:s,...i,ref:e})})}),wU=y.forwardRef((t,e)=>{const r=Hp(nc,t.__scopeTooltip),n=MI(nc,t.__scopeTooltip),s=y.useRef(null),i=ut(e,s),[a,l]=y.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:f}=n,m=y.useCallback(()=>{l(null),f(!1)},[f]),g=y.useCallback((x,p)=>{const b=x.currentTarget,E={x:x.clientX,y:x.clientY},w=NU(E,b.getBoundingClientRect()),C=_U(E,w),I=TU(p.getBoundingClientRect()),j=SU([...C,...I]);l(j),f(!0)},[f]);return y.useEffect(()=>()=>m(),[m]),y.useEffect(()=>{if(c&&d){const x=b=>g(b,d),p=b=>g(b,c);return c.addEventListener("pointerleave",x),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",p)}}},[c,d,g,m]),y.useEffect(()=>{if(a){const x=p=>{const b=p.target,E={x:p.clientX,y:p.clientY},w=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),C=!AU(E,a);w?m():C&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,d,a,u,m]),o.jsx(FI,{...t,ref:i})}),[bU,EU]=zp(OI,{isInside:!1}),FI=y.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=Hp(nc,r),u=Zw(r),{onClose:d}=c;return y.useEffect(()=>(document.addEventListener(MC,d),()=>document.removeEventListener(MC,d)),[d]),y.useEffect(()=>{if(c.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),o.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:o.jsxs(Jw,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(eA,{children:n}),o.jsx(bU,{scope:r,isInside:!0,children:o.jsx(r3,{id:c.contentId,role:"tooltip",children:s||n})})]})})});LI.displayName=nc;var VI="TooltipArrow",CU=y.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Zw(r);return EU(VI,r).isInside?null:o.jsx(Xw,{...s,...n,ref:e})});CU.displayName=VI;function NU(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function _U(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function TU(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function AU(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,d=e[a].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function SU(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),RU(e)}function RU(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],a=r[r.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var IU=DI,BI=LI;const jU=IU,PU=y.forwardRef(({className:t,sideOffset:e=4,...r},n)=>o.jsx(BI,{ref:n,sideOffset:e,className:ot("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));PU.displayName=BI.displayName;var Wp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qp=typeof window>"u"||"Deno"in globalThis;function Fn(){}function kU(t,e){return typeof t=="function"?t(e):t}function MU(t){return typeof t=="number"&&t>=0&&t!==1/0}function DU(t,e){return Math.max(t+(e||0)-Date.now(),0)}function DC(t,e){return typeof t=="function"?t(e):t}function OU(t,e){return typeof t=="function"?t(e):t}function OC(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(n){if(e.queryHash!==eb(a,e.options))return!1}else if(!ud(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function LC(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(cd(e.options.mutationKey)!==cd(i))return!1}else if(!ud(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function eb(t,e){return((e==null?void 0:e.queryKeyHashFn)||cd)(t)}function cd(t){return JSON.stringify(t,(e,r)=>lv(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function ud(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!ud(t[r],e[r])):!1}function UI(t,e){if(t===e)return t;const r=FC(t)&&FC(e);if(r||lv(t)&&lv(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),a=i.length,l=r?[]:{};let c=0;for(let u=0;u<a;u++){const d=r?u:i[u];(!r&&n.includes(d)||r)&&t[d]===void 0&&e[d]===void 0?(l[d]=void 0,c++):(l[d]=UI(t[d],e[d]),l[d]===t[d]&&t[d]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function FC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function lv(t){if(!VC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!VC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function VC(t){return Object.prototype.toString.call(t)==="[object Object]"}function LU(t){return new Promise(e=>{setTimeout(e,t)})}function FU(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?UI(t,e):e}function VU(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function BU(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var tb=Symbol();function qI(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===tb?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ko,Mi,kl,IN,UU=(IN=class extends Wp{constructor(){super();nt(this,Ko);nt(this,Mi);nt(this,kl);Fe(this,kl,e=>{if(!Qp&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){oe(this,Mi)||this.setEventListener(oe(this,kl))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,Mi))==null||e.call(this),Fe(this,Mi,void 0))}setEventListener(e){var r;Fe(this,kl,e),(r=oe(this,Mi))==null||r.call(this),Fe(this,Mi,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){oe(this,Ko)!==e&&(Fe(this,Ko,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof oe(this,Ko)=="boolean"?oe(this,Ko):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ko=new WeakMap,Mi=new WeakMap,kl=new WeakMap,IN),GI=new UU,Ml,Di,Dl,jN,qU=(jN=class extends Wp{constructor(){super();nt(this,Ml,!0);nt(this,Di);nt(this,Dl);Fe(this,Dl,e=>{if(!Qp&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){oe(this,Di)||this.setEventListener(oe(this,Dl))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,Di))==null||e.call(this),Fe(this,Di,void 0))}setEventListener(e){var r;Fe(this,Dl,e),(r=oe(this,Di))==null||r.call(this),Fe(this,Di,e(this.setOnline.bind(this)))}setOnline(e){oe(this,Ml)!==e&&(Fe(this,Ml,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return oe(this,Ml)}},Ml=new WeakMap,Di=new WeakMap,Dl=new WeakMap,jN),Bm=new qU;function GU(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function $U(t){return Math.min(1e3*2**t,3e4)}function $I(t){return(t??"online")==="online"?Bm.isOnline():!0}var zI=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function g0(t){return t instanceof zI}function HI(t){let e=!1,r=0,n=!1,s;const i=GU(),a=p=>{var b;n||(m(new zI(p)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>GI.isFocused()&&(t.networkMode==="always"||Bm.isOnline())&&t.canRun(),d=()=>$I(t.networkMode)&&t.canRun(),f=p=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,p),s==null||s(),i.resolve(p))},m=p=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,p),s==null||s(),i.reject(p))},g=()=>new Promise(p=>{var b;s=E=>{(n||u())&&p(E)},(b=t.onPause)==null||b.call(t)}).then(()=>{var p;s=void 0,n||(p=t.onContinue)==null||p.call(t)}),x=()=>{if(n)return;let p;const b=r===0?t.initialPromise:void 0;try{p=b??t.fn()}catch(E){p=Promise.reject(E)}Promise.resolve(p).then(f).catch(E=>{var V;if(n)return;const w=t.retry??(Qp?0:3),C=t.retryDelay??$U,I=typeof C=="function"?C(r,E):C,j=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,E);if(e||!j){m(E);return}r++,(V=t.onFail)==null||V.call(t,r,E),LU(I).then(()=>u()?void 0:g()).then(()=>{e?m(E):x()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():g().then(x),i)}}function zU(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{r(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Mr=zU(),Jo,PN,WI=(PN=class{constructor(){nt(this,Jo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),MU(this.gcTime)&&Fe(this,Jo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Qp?1/0:5*60*1e3))}clearGcTimeout(){oe(this,Jo)&&(clearTimeout(oe(this,Jo)),Fe(this,Jo,void 0))}},Jo=new WeakMap,PN),Ol,Ll,gn,xr,pd,Xo,Vn,Ls,kN,HU=(kN=class extends WI{constructor(e){super();nt(this,Vn);nt(this,Ol);nt(this,Ll);nt(this,gn);nt(this,xr);nt(this,pd);nt(this,Xo);Fe(this,Xo,!1),Fe(this,pd,e.defaultOptions),this.setOptions(e.options),this.observers=[],Fe(this,gn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Fe(this,Ol,QU(this.options)),this.state=e.state??oe(this,Ol),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=oe(this,xr))==null?void 0:e.promise}setOptions(e){this.options={...oe(this,pd),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,gn).remove(this)}setData(e,r){const n=FU(this.state.data,e,this.options);return pr(this,Vn,Ls).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){pr(this,Vn,Ls).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=oe(this,xr))==null?void 0:n.promise;return(s=oe(this,xr))==null||s.cancel(e),r?r.then(Fn).catch(Fn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,Ol))}isActive(){return this.observers.some(e=>OU(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===tb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!DU(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=oe(this,xr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=oe(this,xr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),oe(this,gn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(oe(this,xr)&&(oe(this,Xo)?oe(this,xr).cancel({revert:!0}):oe(this,xr).cancelRetry()),this.scheduleGc()),oe(this,gn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pr(this,Vn,Ls).call(this,{type:"invalidate"})}fetch(e,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,xr))return oe(this,xr).continueRetry(),oe(this,xr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Fe(this,Xo,!0),n.signal)})},i=()=>{const f=qI(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return s(m),Fe(this,Xo,!1),this.options.persister?this.options.persister(f,m,this):f(m)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),Fe(this,Ll,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&pr(this,Vn,Ls).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var m,g,x,p;g0(f)&&f.silent||pr(this,Vn,Ls).call(this,{type:"error",error:f}),g0(f)||((g=(m=oe(this,gn).config).onError)==null||g.call(m,f,this),(p=(x=oe(this,gn).config).onSettled)==null||p.call(x,this.state.data,f,this)),this.scheduleGc()};return Fe(this,xr,HI({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,g,x,p;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(b){l(b);return}(g=(m=oe(this,gn).config).onSuccess)==null||g.call(m,f,this),(p=(x=oe(this,gn).config).onSettled)==null||p.call(x,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{pr(this,Vn,Ls).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{pr(this,Vn,Ls).call(this,{type:"pause"})},onContinue:()=>{pr(this,Vn,Ls).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),oe(this,xr).start()}},Ol=new WeakMap,Ll=new WeakMap,gn=new WeakMap,xr=new WeakMap,pd=new WeakMap,Xo=new WeakMap,Vn=new WeakSet,Ls=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...WU(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return g0(s)&&s.revert&&oe(this,Ll)?{...oe(this,Ll),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Mr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),oe(this,gn).notify({query:this,type:"updated",action:e})})},kN);function WU(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$I(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function QU(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ss,MN,YU=(MN=class extends Wp{constructor(e={}){super();nt(this,ss);this.config=e,Fe(this,ss,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??eb(s,r);let a=this.get(i);return a||(a=new HU({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){oe(this,ss).has(e.queryHash)||(oe(this,ss).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=oe(this,ss).get(e.queryHash);r&&(e.destroy(),r===e&&oe(this,ss).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Mr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return oe(this,ss).get(e)}getAll(){return[...oe(this,ss).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>OC(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>OC(e,n)):r}notify(e){Mr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Mr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Mr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ss=new WeakMap,MN),is,Pr,Zo,os,Ci,DN,KU=(DN=class extends WI{constructor(e){super();nt(this,os);nt(this,is);nt(this,Pr);nt(this,Zo);this.mutationId=e.mutationId,Fe(this,Pr,e.mutationCache),Fe(this,is,[]),this.state=e.state||JU(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){oe(this,is).includes(e)||(oe(this,is).push(e),this.clearGcTimeout(),oe(this,Pr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Fe(this,is,oe(this,is).filter(r=>r!==e)),this.scheduleGc(),oe(this,Pr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){oe(this,is).length||(this.state.status==="pending"?this.scheduleGc():oe(this,Pr).remove(this))}continue(){var e;return((e=oe(this,Zo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,a,l,c,u,d,f,m,g,x,p,b,E,w,C,I,j,V,R;Fe(this,Zo,HI({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,A)=>{pr(this,os,Ci).call(this,{type:"failed",failureCount:_,error:A})},onPause:()=>{pr(this,os,Ci).call(this,{type:"pause"})},onContinue:()=>{pr(this,os,Ci).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,Pr).canRun(this)}));const r=this.state.status==="pending",n=!oe(this,Zo).canStart();try{if(!r){pr(this,os,Ci).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(s=oe(this,Pr).config).onMutate)==null?void 0:i.call(s,e,this));const A=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));A!==this.state.context&&pr(this,os,Ci).call(this,{type:"pending",context:A,variables:e,isPaused:n})}const _=await oe(this,Zo).start();return await((u=(c=oe(this,Pr).config).onSuccess)==null?void 0:u.call(c,_,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,_,e,this.state.context)),await((g=(m=oe(this,Pr).config).onSettled)==null?void 0:g.call(m,_,null,this.state.variables,this.state.context,this)),await((p=(x=this.options).onSettled)==null?void 0:p.call(x,_,null,e,this.state.context)),pr(this,os,Ci).call(this,{type:"success",data:_}),_}catch(_){try{throw await((E=(b=oe(this,Pr).config).onError)==null?void 0:E.call(b,_,e,this.state.context,this)),await((C=(w=this.options).onError)==null?void 0:C.call(w,_,e,this.state.context)),await((j=(I=oe(this,Pr).config).onSettled)==null?void 0:j.call(I,void 0,_,this.state.variables,this.state.context,this)),await((R=(V=this.options).onSettled)==null?void 0:R.call(V,void 0,_,e,this.state.context)),_}finally{pr(this,os,Ci).call(this,{type:"error",error:_})}}finally{oe(this,Pr).runNext(this)}}},is=new WeakMap,Pr=new WeakMap,Zo=new WeakMap,os=new WeakSet,Ci=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Mr.batch(()=>{oe(this,is).forEach(n=>{n.onMutationUpdate(e)}),oe(this,Pr).notify({mutation:this,type:"updated",action:e})})},DN);function JU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zr,gd,ON,XU=(ON=class extends Wp{constructor(e={}){super();nt(this,Zr);nt(this,gd);this.config=e,Fe(this,Zr,new Map),Fe(this,gd,Date.now())}build(e,r,n){const s=new KU({mutationCache:this,mutationId:++Sh(this,gd)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){const r=sf(e),n=oe(this,Zr).get(r)??[];n.push(e),oe(this,Zr).set(r,n),this.notify({type:"added",mutation:e})}remove(e){var n;const r=sf(e);if(oe(this,Zr).has(r)){const s=(n=oe(this,Zr).get(r))==null?void 0:n.filter(i=>i!==e);s&&(s.length===0?oe(this,Zr).delete(r):oe(this,Zr).set(r,s))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const r=(n=oe(this,Zr).get(sf(e)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===e}runNext(e){var n;const r=(n=oe(this,Zr).get(sf(e)))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Mr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...oe(this,Zr).values()].flat()}find(e){const r={exact:!0,...e};return this.getAll().find(n=>LC(r,n))}findAll(e={}){return this.getAll().filter(r=>LC(e,r))}notify(e){Mr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Mr.batch(()=>Promise.all(e.map(r=>r.continue().catch(Fn))))}},Zr=new WeakMap,gd=new WeakMap,ON);function sf(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function BC(t){return{onFetch:(e,r)=>{var d,f,m,g,x;const n=e.options,s=(m=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],a=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const b=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},E=qI(e.options,e.fetchOptions),w=async(C,I,j)=>{if(p)return Promise.reject();if(I==null&&C.pages.length)return Promise.resolve(C);const V={queryKey:e.queryKey,pageParam:I,direction:j?"backward":"forward",meta:e.options.meta};b(V);const R=await E(V),{maxPages:_}=e.options,A=j?BU:VU;return{pages:A(C.pages,R,_),pageParams:A(C.pageParams,I,_)}};if(s&&i.length){const C=s==="backward",I=C?ZU:UC,j={pages:i,pageParams:a},V=I(n,j);l=await w(j,V,C)}else{const C=t??i.length;do{const I=c===0?a[0]??n.initialPageParam:UC(n,l);if(c>0&&I==null)break;l=await w(l,I),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var p,b;return(b=(p=e.options).persister)==null?void 0:b.call(p,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function UC(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function ZU(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Pt,Oi,Li,Fl,Vl,Fi,Bl,Ul,LN,e7=(LN=class{constructor(t={}){nt(this,Pt);nt(this,Oi);nt(this,Li);nt(this,Fl);nt(this,Vl);nt(this,Fi);nt(this,Bl);nt(this,Ul);Fe(this,Pt,t.queryCache||new YU),Fe(this,Oi,t.mutationCache||new XU),Fe(this,Li,t.defaultOptions||{}),Fe(this,Fl,new Map),Fe(this,Vl,new Map),Fe(this,Fi,0)}mount(){Sh(this,Fi)._++,oe(this,Fi)===1&&(Fe(this,Bl,GI.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,Pt).onFocus())})),Fe(this,Ul,Bm.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,Pt).onOnline())})))}unmount(){var t,e;Sh(this,Fi)._--,oe(this,Fi)===0&&((t=oe(this,Bl))==null||t.call(this),Fe(this,Bl,void 0),(e=oe(this,Ul))==null||e.call(this),Fe(this,Ul,void 0))}isFetching(t){return oe(this,Pt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return oe(this,Oi).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=oe(this,Pt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=oe(this,Pt).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(DC(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return oe(this,Pt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=oe(this,Pt).get(n.queryHash),i=s==null?void 0:s.state.data,a=kU(e,i);if(a!==void 0)return oe(this,Pt).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return Mr.batch(()=>oe(this,Pt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=oe(this,Pt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=oe(this,Pt);Mr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=oe(this,Pt),n={type:"active",...t};return Mr.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Mr.batch(()=>oe(this,Pt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Fn).catch(Fn)}invalidateQueries(t={},e={}){return Mr.batch(()=>{if(oe(this,Pt).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Mr.batch(()=>oe(this,Pt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Fn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Fn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=oe(this,Pt).build(this,e);return r.isStaleByTime(DC(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Fn).catch(Fn)}fetchInfiniteQuery(t){return t.behavior=BC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Fn).catch(Fn)}ensureInfiniteQueryData(t){return t.behavior=BC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Bm.isOnline()?oe(this,Oi).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,Pt)}getMutationCache(){return oe(this,Oi)}getDefaultOptions(){return oe(this,Li)}setDefaultOptions(t){Fe(this,Li,t)}setQueryDefaults(t,e){oe(this,Fl).set(cd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...oe(this,Fl).values()];let r={};return e.forEach(n=>{ud(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){oe(this,Vl).set(cd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...oe(this,Vl).values()];let r={};return e.forEach(n=>{ud(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...oe(this,Li).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=eb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===tb&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...oe(this,Li).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){oe(this,Pt).clear(),oe(this,Oi).clear()}},Pt=new WeakMap,Oi=new WeakMap,Li=new WeakMap,Fl=new WeakMap,Vl=new WeakMap,Fi=new WeakMap,Bl=new WeakMap,Ul=new WeakMap,LN),t7=y.createContext(void 0),r7=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(t7.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dd.apply(this,arguments)}var qi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qi||(qi={}));const qC="popstate";function n7(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:l}=n.location;return cv("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Um(s)}return i7(e,r,null,t)}function Lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s7(){return Math.random().toString(36).substr(2,8)}function GC(t,e){return{usr:t.state,key:t.key,idx:e}}function cv(t,e,r,n){return r===void 0&&(r=null),dd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Cc(e):e,{state:r,key:e&&e.key||n||s7()})}function Um(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Cc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function i7(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=qi.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(dd({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=qi.Pop;let b=d(),E=b==null?null:b-u;u=b,c&&c({action:l,location:p.location,delta:E})}function m(b,E){l=qi.Push;let w=cv(p.location,b,E);u=d()+1;let C=GC(w,u),I=p.createHref(w);try{a.pushState(C,"",I)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(I)}i&&c&&c({action:l,location:p.location,delta:1})}function g(b,E){l=qi.Replace;let w=cv(p.location,b,E);u=d();let C=GC(w,u),I=p.createHref(w);a.replaceState(C,"",I),i&&c&&c({action:l,location:p.location,delta:0})}function x(b){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:Um(b);return w=w.replace(/ $/,"%20"),Lt(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let p={get action(){return l},get location(){return t(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(qC,f),c=b,()=>{s.removeEventListener(qC,f),c=null}},createHref(b){return e(s,b)},createURL:x,encodeLocation(b){let E=x(b);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:g,go(b){return a.go(b)}};return p}var $C;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($C||($C={}));function o7(t,e,r){return r===void 0&&(r="/"),a7(t,e,r,!1)}function a7(t,e,r,n){let s=typeof e=="string"?Cc(e):e,i=rb(s.pathname||"/",r);if(i==null)return null;let a=YI(t);l7(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=x7(i);l=y7(a[c],u,n)}return l}function YI(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Lt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ro([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Lt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),YI(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:p7(u,i.index),routesMeta:d})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of KI(i.path))s(i,a,c)}),e}function KI(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=KI(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function l7(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:g7(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const c7=/^:[\w-]+$/,u7=3,d7=2,h7=1,f7=10,m7=-2,zC=t=>t==="*";function p7(t,e){let r=t.split("/"),n=r.length;return r.some(zC)&&(n+=m7),e&&(n+=d7),r.filter(s=>!zC(s)).reduce((s,i)=>s+(c7.test(i)?u7:i===""?h7:f7),n)}function g7(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function y7(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=HC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=HC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:ro([i,f.pathname]),pathnameBase:C7(ro([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=ro([i,f.pathnameBase]))}return a}function HC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=v7(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let p=l[f]||"";a=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const x=l[f];return g&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function v7(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),QI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function x7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return QI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function w7(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Cc(t):t;return{pathname:r?r.startsWith("/")?r:b7(r,e):e,search:N7(n),hash:_7(s)}}function b7(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function y0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function E7(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function nb(t,e){let r=E7(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function sb(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Cc(t):(s=dd({},t),Lt(!s.pathname||!s.pathname.includes("?"),y0("?","pathname","search",s)),Lt(!s.pathname||!s.pathname.includes("#"),y0("#","pathname","hash",s)),Lt(!s.search||!s.search.includes("#"),y0("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=w7(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ro=t=>t.join("/").replace(/\/\/+/g,"/"),C7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),N7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function T7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JI=["post","put","patch","delete"];new Set(JI);const A7=["get",...JI];new Set(A7);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hd(){return hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hd.apply(this,arguments)}const ib=y.createContext(null),S7=y.createContext(null),Ao=y.createContext(null),Yp=y.createContext(null),So=y.createContext({outlet:null,matches:[],isDataRoute:!1}),XI=y.createContext(null);function R7(t,e){let{relative:r}=e===void 0?{}:e;Nc()||Lt(!1);let{basename:n,navigator:s}=y.useContext(Ao),{hash:i,pathname:a,search:l}=e2(t,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:ro([n,a])),s.createHref({pathname:c,search:l,hash:i})}function Nc(){return y.useContext(Yp)!=null}function ai(){return Nc()||Lt(!1),y.useContext(Yp).location}function ZI(t){y.useContext(Ao).static||y.useLayoutEffect(t)}function Xn(){let{isDataRoute:t}=y.useContext(So);return t?q7():I7()}function I7(){Nc()||Lt(!1);let t=y.useContext(ib),{basename:e,future:r,navigator:n}=y.useContext(Ao),{matches:s}=y.useContext(So),{pathname:i}=ai(),a=JSON.stringify(nb(s,r.v7_relativeSplatPath)),l=y.useRef(!1);return ZI(()=>{l.current=!0}),y.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=sb(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ro([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,a,i,t])}function e2(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=y.useContext(Ao),{matches:s}=y.useContext(So),{pathname:i}=ai(),a=JSON.stringify(nb(s,n.v7_relativeSplatPath));return y.useMemo(()=>sb(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function j7(t,e){return P7(t,e)}function P7(t,e,r,n){Nc()||Lt(!1);let{navigator:s}=y.useContext(Ao),{matches:i}=y.useContext(So),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=ai(),d;if(e){var f;let b=typeof e=="string"?Cc(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Lt(!1),d=b}else d=u;let m=d.pathname||"/",g=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=o7(t,{pathname:g}),p=L7(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:ro([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:ro([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return e&&p?y.createElement(Yp.Provider,{value:{location:hd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:qi.Pop}},p):p}function k7(){let t=U7(),e=T7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),r?y.createElement("pre",{style:s},r):null,null)}const M7=y.createElement(k7,null);class D7 extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?y.createElement(So.Provider,{value:this.props.routeContext},y.createElement(XI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function O7(t){let{routeContext:e,match:r,children:n}=t,s=y.useContext(ib);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(So.Provider,{value:e},n)}function L7(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Lt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:g}=r,x=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,m)=>{let g,x=!1,p=null,b=null;r&&(g=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||M7,c&&(u<0&&m===0?(x=!0,b=null):u===m&&(x=!0,b=f.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,m+1)),w=()=>{let C;return g?C=p:x?C=b:f.route.Component?C=y.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=d,y.createElement(O7,{match:f,routeContext:{outlet:d,matches:E,isDataRoute:r!=null},children:C})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?y.createElement(D7,{location:r.location,revalidation:r.revalidation,component:p,error:g,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var t2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(t2||{}),qm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qm||{});function F7(t){let e=y.useContext(ib);return e||Lt(!1),e}function V7(t){let e=y.useContext(S7);return e||Lt(!1),e}function B7(t){let e=y.useContext(So);return e||Lt(!1),e}function r2(t){let e=B7(),r=e.matches[e.matches.length-1];return r.route.id||Lt(!1),r.route.id}function U7(){var t;let e=y.useContext(XI),r=V7(qm.UseRouteError),n=r2(qm.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function q7(){let{router:t}=F7(t2.UseNavigateStable),e=r2(qm.UseNavigateStable),r=y.useRef(!1);return ZI(()=>{r.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,hd({fromRouteId:e},i)))},[t,e])}function Gm(t){let{to:e,replace:r,state:n,relative:s}=t;Nc()||Lt(!1);let{future:i,static:a}=y.useContext(Ao),{matches:l}=y.useContext(So),{pathname:c}=ai(),u=Xn(),d=sb(e,nb(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return y.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function ts(t){Lt(!1)}function G7(t){let{basename:e="/",children:r=null,location:n,navigationType:s=qi.Pop,navigator:i,static:a=!1,future:l}=t;Nc()&&Lt(!1);let c=e.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:i,static:a,future:hd({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=Cc(n));let{pathname:d="/",search:f="",hash:m="",state:g=null,key:x="default"}=n,p=y.useMemo(()=>{let b=rb(d,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:g,key:x},navigationType:s}},[c,d,f,m,g,x,s]);return p==null?null:y.createElement(Ao.Provider,{value:u},y.createElement(Yp.Provider,{children:r,value:p}))}function $7(t){let{children:e,location:r}=t;return j7(uv(e),r)}new Promise(()=>{});function uv(t,e){e===void 0&&(e=[]);let r=[];return y.Children.forEach(t,(n,s)=>{if(!y.isValidElement(n))return;let i=[...e,s];if(n.type===y.Fragment){r.push.apply(r,uv(n.props.children,i));return}n.type!==ts&&Lt(!1),!n.props.index||!n.props.children||Lt(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=uv(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dv(){return dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dv.apply(this,arguments)}function z7(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function H7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function W7(t,e){return t.button===0&&(!e||e==="_self")&&!H7(t)}const Q7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Y7="6";try{window.__reactRouterVersion=Y7}catch{}const K7="startTransition",WC=YN[K7];function J7(t){let{basename:e,children:r,future:n,window:s}=t,i=y.useRef();i.current==null&&(i.current=n7({window:s,v5Compat:!0}));let a=i.current,[l,c]=y.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=y.useCallback(f=>{u&&WC?WC(()=>c(f)):c(f)},[c,u]);return y.useLayoutEffect(()=>a.listen(d),[a,d]),y.createElement(G7,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const X7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,si=y.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,m=z7(e,Q7),{basename:g}=y.useContext(Ao),x,p=!1;if(typeof u=="string"&&Z7.test(u)&&(x=u,X7))try{let C=new URL(window.location.href),I=u.startsWith("//")?new URL(C.protocol+u):new URL(u),j=rb(I.pathname,g);I.origin===C.origin&&j!=null?u=j+I.search+I.hash:p=!0}catch{}let b=R7(u,{relative:s}),E=eq(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function w(C){n&&n(C),C.defaultPrevented||E(C)}return y.createElement("a",dv({},m,{href:x||b,onClick:p||i?n:w,ref:r,target:c}))});var QC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(QC||(QC={}));var YC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(YC||(YC={}));function eq(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=Xn(),u=ai(),d=e2(t,{relative:a});return y.useCallback(f=>{if(W7(f,r)){f.preventDefault();let m=n!==void 0?n:Um(u)===Um(d);c(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,n,s,r,t,i,a,l])}const n2=()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,tq=async(t,e)=>{try{console.log("loginUser: Starting login process for email:",t);const r=await cB(sa,t,e);console.log("loginUser: Firebase Auth successful for UID:",r.user.uid);const n=await po($t(ft,"users",r.user.uid));if(console.log("loginUser: User document exists:",n.exists()),n.exists()){const s=n.data();console.log("loginUser: User data retrieved, current session status:",s.isSessionValid);const i=n2(),a=Ve.now();console.log("loginUser: Updating user document with new session"),await Sa($t(ft,"users",r.user.uid),{sessionToken:i,lastLoginAt:a,isSessionValid:!0}),console.log("loginUser: User document updated with new session");const l={...s,sessionToken:i,lastLoginAt:a,isSessionValid:!0};return console.log("loginUser: Returning updated user data with session:",l.isSessionValid),l}return console.log("loginUser: User document not found, returning null"),null}catch(r){throw console.error("loginUser error:",r),r}},rq=async(t,e,r,n,s)=>{try{const i=await lB(sa,e,r),a=n2(),l=Ve.now(),c={id:i.user.uid,name:t,email:e,mobileNumber:n,purchases:0,isRewardReady:!1,createdAt:l,rewards:[],role:"customer",currentOfferId:"default_offer",currentOfferProgress:0,sessionToken:a,lastLoginAt:l,isSessionValid:!0};try{await Lp($t(ft,"users",i.user.uid),c),(await po($t(ft,"users",i.user.uid))).exists()?console.log(" User document verified in Firestore"):console.error(" User document not found after creation!")}catch(u){throw console.error("Firestore error during user creation:",u),u}return c}catch(i){throw console.error("registerUser error:",i),i}},nq=async()=>{try{const t=sa.currentUser;t&&await Sa($t(ft,"users",t.uid),{isSessionValid:!1,sessionToken:null}),await mC(sa)}catch(t){console.error("Logout error:",t),await mC(sa)}},sq=t=>fB(sa,t),iq=(t,e)=>{const r=Aa(ft,"users"),n=Md(r,jw("createdAt","desc"));return Fp(n,s=>{const i=[];s.forEach(a=>{const l=a.data();i.push({...l,id:a.id})}),t(i)},e)},oq=(t,e,r)=>{const n=$t(ft,"users",t);return Fp(n,s=>{s.exists()?e(s.data()):e(null)},r)},aq=async(t,e,r)=>{if(!t||t.role!=="super_admin")throw new Error("Only super admins can update user roles");const n=$t(ft,"users",e);await Sa(n,{role:r})},lq=async(t,e,r,n)=>{var V,R;const s=e&&r;if(!t&&!s)return;const i=s?$t(ft,"users",r):$t(ft,"users",t.id),a=await po(i);if(!a.exists())throw new Error("User not found");const l=a.data(),c=n||l.currentOfferId;if(!c)throw new Error("No offer specified and user has no active offer assigned");const u=$t(ft,"offers",c),d=await po(u);if(!d.exists())throw new Error("Specified offer not found");const f=d.data(),m=f.stampRequirement,g=(V=l.completedRewards)==null?void 0:V.find(_=>{var A,k,L;return((A=_.offerSnapshot)==null?void 0:A.offerId)===c&&((k=_.scanHistory)==null?void 0:k.length)<((L=_.offerSnapshot)==null?void 0:L.stampRequirement)&&!_.claimedAt});let x=0,p=g;if(g){if(x=((R=g.scanHistory)==null?void 0:R.length)||0,x>=m)throw new Error("User has already completed this offer");console.log(`User continuing existing offer: ${c}, current progress: ${x}/${m}`)}else{if(!f.isActive)throw new Error("This offer is no longer active for new users. Only users who have already started collecting stamps can continue.");p={rewardId:`reward_${Date.now()}`,claimedAt:null,scanHistory:[],rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription,offerSnapshot:{offerId:f.offerId,offerName:f.name,description:f.description,stampRequirement:f.stampRequirement,rewardType:f.rewardType,rewardValue:f.rewardValue,rewardDescription:f.rewardDescription},createdAt:Ve.now()}}const b=x+(f.stampsPerScan||1),E=f.stampsPerScan||1,w={scannedBy:t?`${t.name} (${t.email})`:"Unknown Admin",scannedByEmail:(t==null?void 0:t.email)||"unknown",scannedByName:(t==null?void 0:t.name)||"Unknown",timestamp:Ve.now(),stampsEarned:E,scanId:`scan_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},C={...p,scanHistory:[...p.scanHistory||[],w]};let I=l.completedRewards||[];g?I=I.map(_=>_.rewardId===g.rewardId?C:_):I=[...I,C];const j=f.stampsPerScan||1;console.log(`Adding ${j} stamps for offer ${c}. Progress: ${x} -> ${b}/${m}`),console.log(`Created scan event with ${j} stamps for user ${l.email}`),await Sa(i,{lastScanAt:Ve.now(),completedRewards:I,purchases:cV(j)})},cq=async(t,e,r,n)=>{const s=e&&r;if(!t&&!s)return;const i=s?$t(ft,"users",r):$t(ft,"users",t.id),a=await po(i);if(!a.exists())throw new Error("User not found");const c=a.data().completedRewards||[],u=c.find(f=>f.rewardId===n);if(!u)throw new Error("Reward not found");if(u.claimedAt)throw new Error("Reward has already been redeemed");const d=c.map(f=>f.rewardId===n?{...f,claimedAt:Ve.now()}:f);await Sa(i,{completedRewards:d})},uq=(t,e)=>{const r=$t(ft,"settings","global");return Fp(r,n=>{if(n.exists())t(n.data());else{const s={purchaseLimit:5,descriptionMessage:"Complete purchases to unlock your reward!",rewardType:"percentage",rewardValue:"20",rewardDescription:"20% OFF",updatedAt:Ve.now(),updatedBy:"system"};Lp(r,s),t(s)}},e)},dq=async(t,e,r,n,s,i)=>{if(!t||t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can update settings");const a=$t(ft,"settings","global");await Sa(a,{purchaseLimit:e,descriptionMessage:r,rewardType:n,rewardValue:s,rewardDescription:i,updatedAt:Ve.now(),updatedBy:t.email})},hq=5,fq="Welcome Offer",mq="Complete purchases to unlock your reward!",pq=5,gq="percentage",yq="20",vq="20% OFF",xq=async t=>{Aa(ft,"offers");const e={offerId:"default_offer",name:fq,description:mq,stampRequirement:pq,stampsPerScan:1,rewardType:gq,rewardValue:yq,rewardDescription:vq,isActive:!0,createdAt:Ve.now(),updatedAt:Ve.now(),createdBy:t.email||"system",expiresAt:null};await Lp($t(ft,"offers","default_offer"),e)},s2=async()=>{const t=Aa(ft,"offers"),e=await Op(t);return e.empty?[]:e.docs.map(r=>r.data())},i2=async(t,e)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can create offers");if(!e.name||!e.description||!e.rewardValue||!e.rewardDescription)throw new Error("Missing required fields");if(e.stampRequirement<1||e.stampsPerScan<1)throw new Error("Stamp requirements must be at least 1");const r=`offer_${Date.now()}`,n={...e,offerId:r,createdAt:Ve.now(),updatedAt:Ve.now(),createdBy:t.email||"system",stampsPerScan:e.stampsPerScan||1,expiresAt:e.expiresAt||null};await Lp($t(ft,"offers",r),n)},KC=async(t,e,r)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can update offers");const n=$t(ft,"offers",e);if(!(await po(n)).exists())throw new Error("Offer not found");await Sa(n,{...r,updatedAt:Ve.now()})},wq=async(t,e)=>{if(t.role!=="admin"&&t.role!=="super_admin")throw new Error("Only admins can delete offers");const r=Aa(ft,"users"),n=Md(r,Jy("completedRewards","array-contains",{"offerSnapshot.offerId":e})),s=await Op(n);let i=!1;if(s.forEach(a=>{var u;((u=a.data().completedRewards)==null?void 0:u.find(d=>{var f,m,g;return((f=d.offerSnapshot)==null?void 0:f.offerId)===e&&((m=d.scanHistory)==null?void 0:m.length)<((g=d.offerSnapshot)==null?void 0:g.stampRequirement)&&!d.claimedAt}))&&(i=!0)}),i)throw new Error("Cannot delete offer - users are actively collecting stamps. Deactivate the offer instead to hide it from new users while allowing existing users to complete their rewards.");await _R($t(ft,"offers",e))};function Ro(t,e){return async(...r)=>{try{return await t(...r)}catch(n){throw console.error(`${e} error:`,n),n}}}const bq=Ro(tq,"loginUser"),Eq=Ro(rq,"registerUser"),JC=Ro(nq,"logoutUser"),Cq=sq,Nq=iq,_q=oq,Tq=Ro(aq,"updateUserRole"),Aq=Ro(lq,"addPurchase"),o2=Ro(cq,"redeemReward"),Sq=uq,Su=s2,Rq=Ro(i2,"createOffer"),XC=Ro(xq,"createDefaultOffer"),a2=y.createContext(null),Iq=({children:t})=>{const[e,r]=y.useState(null),[n,s]=y.useState(!0),[i,a]=y.useState(null),[l,c]=y.useState(!0),[u,d]=y.useState([]),[f,m]=y.useState(!1);y.useEffect(()=>{const C=Sq(I=>{a(I),c(!1)},I=>{console.error("Error listening to settings:",I),c(!1)});return()=>C()},[]),y.useEffect(()=>{if(!e||e.role!=="admin"&&e.role!=="super_admin"){d([]);return}m(!0);const C=Nq(I=>{d(I),m(!1)},I=>{console.error("Error listening to all users:",I),m(!1)});return()=>C()},[e==null?void 0:e.role]),y.useEffect(()=>{let C=null,I=!1;const j=Cq(async R=>{I||(I=!0),R&&typeof R=="object"&&R!==null&&"uid"in R?(console.log("Firebase Auth user detected, setting up real-time listener for:",R.uid),setTimeout(()=>{C=_q(R.uid,_=>{console.log("Real-time user data received:",{uid:_.id,isSessionValid:_.isSessionValid,hasSessionToken:!!_.sessionToken}),_.isSessionValid===!1?(console.log("Session explicitly invalidated, signing out user"),r(null),s(!1),JC()):(console.log("Accepting user data during login, session status:",_.isSessionValid),r(_),s(!1))},_=>{console.error("Error listening to user data:",_),r(null),s(!1)})},500)):(r(null),s(!1),C&&(C(),C=null))}),V=setTimeout(()=>{I||s(!1)},1e4);return()=>{j&&j(),C&&C(),clearTimeout(V)}},[]);const g=async(C,I)=>{console.log("Login attempt started for:",C);try{const j=await bq(C,I);return console.log("Login successful, user data received:",!!j),j}catch(j){throw console.error("Login failed:",j),j}},x=(C,I,j,V)=>Eq(C,I,j,V,null),p=(C,I,j)=>Aq(e,C,I,j),b=C=>o2(e,void 0,void 0,C),E=(C,I)=>Tq(e,C,I),w=async()=>{console.log("Logout called from useAuth hook"),await JC(),r(null)};return o.jsx(a2.Provider,{value:{user:e,loading:n,settings:i,settingsLoading:l,allUsers:u,allUsersLoading:f,login:g,register:x,addPurchase:p,redeemReward:b,logout:w,updateUserRole:E},children:t})},Es=()=>{const t=y.useContext(a2);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Kc=({children:t,requiredRole:e})=>{const{user:r,loading:n}=Es(),s=ai();if(n)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Fx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!r)return o.jsx(Gm,{to:"/login",state:{from:s},replace:!0});if(e){const i=r.role,a={customer:1,admin:2,super_admin:3};if(a[i]<a[e])return o.jsx(Gm,{to:"/dashboard",replace:!0})}return o.jsx(o.Fragment,{children:t})},ZC=({children:t})=>{const{user:e,loading:r}=Es();return r?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Fx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):e?o.jsx(Gm,{to:"/dashboard",replace:!0}):o.jsx(o.Fragment,{children:t})},jq=Mx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Te=y.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const a=n?da:"button";return o.jsx(a,{className:ot(jq({variant:e,size:r,className:t})),ref:i,...s})});Te.displayName="Button";const Pq=()=>{const[t,e]=y.useState(!1),[r,n]=y.useState(!1),s=()=>{const i=window.matchMedia("(display-mode: standalone)").matches,a=window.matchMedia("(display-mode: fullscreen)").matches,l=window.matchMedia("(display-mode: minimal-ui)").matches,c=navigator.standalone===!0;return i||a||l||c};return y.useEffect(()=>{s()&&n(!0);const a=window.matchMedia("(display-mode: standalone)"),l=c=>{c.matches&&n(!0)};return a.addEventListener("change",l),()=>{a.removeEventListener("change",l)}},[]),r?null:o.jsxs("div",{className:"fixed top-4 right-4 z-40",children:[o.jsxs(Te,{onClick:()=>e(!t),size:"sm",variant:"outline",className:"bg-white/90 backdrop-blur-sm border-gray-200 hover:bg-white",children:[o.jsx(AA,{className:"w-4 h-4 mr-2"}),"Install Guide"]}),t&&o.jsxs("div",{className:"absolute top-12 right-0 w-80 bg-white rounded-lg shadow-lg border border-gray-200 p-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"How to Install"}),o.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Chrome/Edge (Desktop):"}),o.jsx("p",{children:'Look for the install icon (plus sign) in your browser address bar, or use the menu (three dots) and select "Install app"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Chrome/Edge (Mobile):"}),o.jsx("p",{children:'Tap the menu (three dots) and select "Add to Home screen" or "Install app"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Safari (Mobile):"}),o.jsx("p",{children:'Tap the Share button (square with arrow) and select "Add to Home Screen"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Safari (Desktop):"}),o.jsx("p",{children:'Use the Share button in the toolbar and select "Add to Dock"'})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Firefox:"}),o.jsx("p",{children:'Use the menu (three lines) and select "Install App" or "Add to Home Screen"'})]})]}),o.jsx(Te,{onClick:()=>e(!1),size:"sm",className:"mt-3 w-full",children:"Got it!"})]})]})},kq=()=>{const[t,e]=y.useState(!1),r=()=>{const n=window.matchMedia("(display-mode: standalone)").matches,s=window.matchMedia("(display-mode: fullscreen)").matches,i=window.matchMedia("(display-mode: minimal-ui)").matches,a=navigator.standalone===!0;return n||s||i||a};return y.useEffect(()=>{r()&&e(!0);const s=window.matchMedia("(display-mode: standalone)"),i=a=>{a.matches&&e(!0)};return s.addEventListener("change",i),()=>{s.removeEventListener("change",i)}},[]),o.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/bgCover.jpeg)"}}),o.jsx("div",{className:"absolute inset-0 bg-black/60"}),o.jsxs("div",{className:"absolute inset-0 opacity-20",children:[o.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-red-700 rounded-full blur-3xl animate-pulse delay-500"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6 text-center",children:[o.jsx("div",{children:o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("img",{src:"/logo.png",alt:"Vape Master Logo",className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-48 lg:h-48 object-contain"})})}),o.jsxs("div",{className:"mb-12 max-w-md",children:[o.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-semibold text-white mb-4",children:"Loyalty Program"}),o.jsx("p",{className:"text-gray-300 text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed",children:"Join our loyalty program and get rewards! Earn points with every purchase and unlock exclusive benefits."})]}),o.jsxs("div",{className:"space-y-4 w-full max-w-sm",children:[o.jsx(si,{to:"/register",className:"block",children:o.jsx(Te,{className:"w-full py-4 text-lg font-semibold bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"Join Now"})}),o.jsx(si,{to:"/login",className:"block",children:o.jsx(Te,{variant:"outline",className:"w-full py-4 text-lg font-semibold bg-transparent border-2 border-red-500 text-red-400 hover:bg-red-500 hover:text-white transition-all duration-300 transform hover:scale-105",children:"Already a Member?"})})]}),!t&&o.jsx("div",{className:"mt-8",children:o.jsx(Pq,{})}),o.jsx("div",{className:"absolute bottom-6 text-center text-gray-500",children:o.jsx("p",{className:"text-sm",children:"Smoke responsibly  21+ only"})})]})]})},Mq=()=>{const{user:t,loading:e}=Es();return e?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Fx,{className:"h-8 w-8 animate-spin text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):t?o.jsx(Gm,{to:"/dashboard",replace:!0}):o.jsx(kq,{})},Se=y.forwardRef(({className:t,type:e,...r},n)=>o.jsx("input",{type:e,className:ot("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Se.displayName="Input";var Dq="Label",l2=y.forwardRef((t,e)=>o.jsx($e.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));l2.displayName=Dq;var c2=l2;const Oq=Mx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_e=y.forwardRef(({className:t,...e},r)=>o.jsx(c2,{ref:r,className:ot(Oq(),t),...e}));_e.displayName=c2.displayName;function Nt(t,e){const r=window;typeof window<"u"&&typeof r.gtag=="function"&&r.gtag("event",t,e||{})}const sc=new Map,nr={MAX_REGISTRATIONS_PER_IP:3,MAX_REGISTRATIONS_PER_EMAIL:1,RATE_LIMIT_WINDOW:60*60*1e3,MIN_REQUEST_INTERVAL:3e3,MAX_REQUESTS_PER_MINUTE:5,MIN_PASSWORD_LENGTH:8,REQUIRE_UPPERCASE:!0,REQUIRE_LOWERCASE:!0,REQUIRE_NUMBERS:!0,REQUIRE_SPECIAL_CHARS:!0,BLOCKED_EMAIL_DOMAINS:["tempmail.org","10minutemail.com","guerrillamail.com","mailinator.com","yopmail.com","throwaway.email","fakeinbox.com","sharklasers.com","grr.la","temp-mail.org","dispostable.com","mailnesia.com","maildrop.cc"],MIN_PHONE_LENGTH:10,MAX_PHONE_LENGTH:15,MIN_NAME_LENGTH:2,MAX_NAME_LENGTH:50,SUSPICIOUS_PATTERNS:[/test\d+/i,/user\d+/i,/admin\d+/i,/demo\d+/i,/fake\d+/i,/spam\d+/i,/bot\d+/i,/scam\d+/i,/temp\d+/i,/dummy\d+/i]},u2=()=>`${navigator.userAgent.slice(0,20)}_${Date.now()}`,eN=(t,e)=>{const r=Date.now(),n=`${e}:${t}`,s=sc.get(n);return!s||r>s.resetTime?(sc.set(n,{count:1,resetTime:r+nr.RATE_LIMIT_WINDOW,lastRequest:r}),!0):s.count>=(e==="ip"?nr.MAX_REGISTRATIONS_PER_IP:nr.MAX_REGISTRATIONS_PER_EMAIL)?!1:(s.count++,s.lastRequest=r,!0)},Lq=t=>{const e=Date.now(),r=`throttle:${t}`,n=sc.get(r);return n?e-n.lastRequest<nr.MIN_REQUEST_INTERVAL?!1:e>n.resetTime?(n.count=1,n.resetTime=e+6e4,n.lastRequest=e,!0):n.count>=nr.MAX_REQUESTS_PER_MINUTE?!1:(n.count++,n.lastRequest=e,!0):(sc.set(r,{count:1,resetTime:e+6e4,lastRequest:e}),!0)},tN=t=>{const e=[];return t.length<nr.MIN_PASSWORD_LENGTH&&e.push(`Password must be at least ${nr.MIN_PASSWORD_LENGTH} characters long`),/[A-Z]/.test(t)||e.push("Password must contain at least one uppercase letter"),/[a-z]/.test(t)||e.push("Password must contain at least one lowercase letter"),/\d/.test(t)||e.push("Password must contain at least one number"),/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(t)||e.push("Password must contain at least one special character"),["password","123456","qwerty","admin","letmein","password123","123456789"].includes(t.toLowerCase())&&e.push("Password is too common and easily guessable"),/(.)\1{3,}/.test(t)&&e.push("Password contains too many repeated characters"),{isValid:e.length===0,errors:e}},rN=t=>{var a;const e=[],r=t.toLowerCase();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return e.push("Please enter a valid email address"),{isValid:!1,errors:e};const s=(a=r.split("@")[1])==null?void 0:a.toLowerCase();s&&nr.BLOCKED_EMAIL_DOMAINS.includes(s)&&e.push("Temporary or disposable email addresses are not allowed");const i=r.split("@")[0];return nr.SUSPICIOUS_PATTERNS.some(l=>l.test(i))&&e.push("Email address contains suspicious patterns"),r.length>254&&e.push("Email address is too long"),i.length>64&&e.push("Email username part is too long"),(i.match(/\./g)||[]).length>3&&e.push("Email username contains too many dots"),{isValid:e.length===0,errors:e}},nN=t=>{const e=[],r=t.replace(/\D/g,"");return r.length<nr.MIN_PHONE_LENGTH&&e.push(`Phone number must be at least ${nr.MIN_PHONE_LENGTH} digits`),r.length>nr.MAX_PHONE_LENGTH&&e.push(`Phone number must be no more than ${nr.MAX_PHONE_LENGTH} digits`),/(\d)\1{5,}/.test(r)&&e.push("Phone number contains suspicious repeating patterns"),/^(\d)\1+$/.test(r)&&e.push("Phone number cannot be all the same digit"),["1234567890","0000000000","1111111111","9999999999"].includes(r)&&e.push("Phone number appears to be a test number"),{isValid:e.length===0,errors:e}},sN=t=>{const e=[];return t.length<nr.MIN_NAME_LENGTH&&e.push(`Name must be at least ${nr.MIN_NAME_LENGTH} characters long`),t.length>nr.MAX_NAME_LENGTH&&e.push(`Name must be no more than ${nr.MAX_NAME_LENGTH} characters long`),nr.SUSPICIOUS_PATTERNS.some(i=>i.test(t))&&e.push("Name contains suspicious patterns"),(t.match(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/g)||[]).length>t.length*.3&&e.push("Name contains too many special characters"),(t.match(/\d/g)||[]).length>t.length*.5&&e.push("Name contains too many numbers"),["test","user","admin","demo","fake","spam","bot","scam"].some(i=>t.toLowerCase().includes(i))&&e.push("Name contains suspicious words"),{isValid:e.length===0,errors:e}},Fq=()=>{try{const t=document.createElement("canvas"),e=t.getContext("2d");if(e)return e.textBaseline="top",e.font="14px Arial",e.fillText("Browser fingerprint",2,2),t.toDataURL()}catch{console.warn("Canvas fingerprinting not available")}return`${navigator.userAgent}_${navigator.language}_${screen.width}x${screen.height}_${new Date().getTimezoneOffset()}`},Os=(t,e)=>{const r={timestamp:new Date().toISOString(),event:t,details:e,userAgent:navigator.userAgent,fingerprint:Fq(),identifier:u2(),url:window.location.href,referrer:document.referrer};console.log(" Security Event:",r)};setInterval(()=>{const t=Date.now();for(const[e,r]of sc.entries())t>r.resetTime&&sc.delete(e)},6e4);const Vq=()=>{var Q,Z,U,H,ie,ne,le,he,Ne,Me;const[t,e]=y.useState(""),[r,n]=y.useState(""),[s,i]=y.useState(""),[a,l]=y.useState(""),[c,u]=y.useState(""),[d,f]=y.useState(!1),[m,g]=y.useState(!1),[x,p]=y.useState(!1),[b,E]=y.useState({}),[w,C]=y.useState(0),[I,j]=y.useState(""),[V,R]=y.useState(""),{register:_,user:A,loading:k}=Es(),L=Xn(),M=y.useRef(null),P=y.useRef(null);y.useEffect(()=>{Nt("page_view",{page:"Register"}),Os("registration_page_visit",{timestamp:new Date().toISOString(),userAgent:navigator.userAgent})},[]),y.useEffect(()=>{const ue=(G,me)=>{let Ee=[];switch(G){case"name":{Ee=sN(me).errors;break}case"email":{Ee=rN(me).errors;break}case"contactNumber":{Ee=nN(me).errors;break}case"password":{Ee=tN(me).errors;break}case"confirmPassword":{me&&me!==a&&Ee.push("Passwords do not match");break}}E(Ce=>({...Ce,[G]:Ee}))},ee={},de=(G,me)=>{ee[G]&&clearTimeout(ee[G]),ee[G]=setTimeout(()=>{ue(G,me)},500)};return t&&de("name",t),r&&de("email",r.toLowerCase()),s&&de("contactNumber",s),a&&de("password",a),c&&de("confirmPassword",c),()=>{Object.values(ee).forEach(G=>clearTimeout(G))}},[t,r,s,a,c]);const B=async ue=>{ue.preventDefault();const ee=Date.now(),de=u2();if(I.trim()!==""||V.trim()!==""){Os("honeypot_triggered",{honeypotWebsite:I,honeypotCompany:V,clientId:de}),Ye({title:"Registration Blocked",description:"Suspicious activity detected. Please try again later.",variant:"destructive"});return}if(!Lq(de)){Os("request_throttled",{clientId:de,timeSinceLastRequest:ee-w}),Ye({title:"Too Many Requests",description:"Please wait a few seconds before trying again.",variant:"destructive"});return}if(!eN(de,"ip")){Os("ip_rate_limit_exceeded",{clientId:de,timeSinceLastRequest:ee-w}),Ye({title:"Registration Limit Reached",description:"Too many registration attempts from this location. Please try again later.",variant:"destructive"});return}const G=r.trim().toLowerCase();if(!eN(G,"email")){Os("email_rate_limit_exceeded",{email:G,clientId:de}),Ye({title:"Email Already Used",description:"This email address has already been registered.",variant:"destructive"});return}const me=sN(t.trim()),Ee=rN(G),Ce=nN(s.trim()),pe=tN(a);if(!me.isValid||!Ee.isValid||!Ce.isValid||!pe.isValid||a!==c){const ve={name:me.errors,email:Ee.errors,contactNumber:Ce.errors,password:pe.errors,confirmPassword:a!==c?["Passwords do not match"]:[]};E(ve),Os("validation_failed",{clientId:de,errors:ve}),Ye({title:"Validation Errors",description:"Please fix the errors in the form.",variant:"destructive"});return}f(!0),C(ee);try{Os("registration_attempt",{email:G,clientId:de,timestamp:new Date().toISOString()}),Nt("register_attempt",{email:G}),await _(t.trim(),G,a,s.trim()),Os("registration_success",{email:G,clientId:de,userId:A==null?void 0:A.id,userRole:A==null?void 0:A.role}),Ye({title:"Welcome to Vape Master!",description:"Your loyalty card is ready!"}),Nt("register_success",{user_id:A==null?void 0:A.id,user_role:A==null?void 0:A.role}),L("/dashboard")}catch(ve){let at="Please try again.";ve&&typeof ve=="object"&&"message"in ve&&typeof ve.message=="string"&&(at=ve.message),Os("registration_failed",{email:G,clientId:de,error:at}),Ye({title:"Registration Failed",description:at,variant:"destructive"}),Nt("register_failed",{email:G,error:at})}finally{f(!1)}},z=Object.values(b).some(ue=>ue.length>0);return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx(si,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("h1",{className:"text-3xl font-bold text-white",children:"Join the Club"})})}),o.jsxs("form",{ref:M,onSubmit:B,className:"space-y-6",children:[o.jsxs("div",{className:"hidden",children:[o.jsx("input",{type:"text",name:"website",value:I,onChange:ue=>j(ue.target.value),tabIndex:-1,autoComplete:"off"}),o.jsx("input",{type:"text",name:"company",value:V,onChange:ue=>R(ue.target.value),tabIndex:-1,autoComplete:"off"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"name",className:"text-white",children:"Full Name"}),o.jsx(Se,{id:"name",type:"text",value:t,onChange:ue=>e(ue.target.value),placeholder:"Enter your full name",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${(Q=b.name)!=null&&Q.length?"border-red-500":""}`,required:!0,autoComplete:"name"}),((Z=b.name)==null?void 0:Z.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.name.map((ue,ee)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},ee))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"email",className:"text-white",children:"Email"}),o.jsx(Se,{id:"email",type:"email",value:r,onChange:ue=>n(ue.target.value),placeholder:"Enter your email",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${(U=b.email)!=null&&U.length?"border-red-500":""}`,required:!0,autoComplete:"email"}),((H=b.email)==null?void 0:H.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.email.map((ue,ee)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},ee))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"password",className:"text-white",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Se,{id:"password",type:m?"text":"password",value:a,onChange:ue=>l(ue.target.value),placeholder:"Create a strong password",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 pr-10 ${(ie=b.password)!=null&&ie.length?"border-red-500":""}`,required:!0,autoComplete:"new-password"}),o.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:m?o.jsx(G1,{className:"w-4 h-4"}):o.jsx(io,{className:"w-4 h-4"})})]}),((ne=b.password)==null?void 0:ne.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.password.map((ue,ee)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},ee))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"confirmPassword",className:"text-white",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Se,{id:"confirmPassword",type:x?"text":"password",value:c,onChange:ue=>u(ue.target.value),placeholder:"Confirm your password",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 pr-10 ${(le=b.confirmPassword)!=null&&le.length?"border-red-500":""}`,required:!0,autoComplete:"new-password"}),o.jsx("button",{type:"button",onClick:()=>p(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:x?o.jsx(G1,{className:"w-4 h-4"}):o.jsx(io,{className:"w-4 h-4"})})]}),((he=b.confirmPassword)==null?void 0:he.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.confirmPassword.map((ue,ee)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},ee))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"contactNumber",className:"text-white",children:"Contact Number"}),o.jsx(Se,{id:"contactNumber",type:"tel",value:s,onChange:ue=>i(ue.target.value),placeholder:"Enter your contact number",className:`bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500 ${(Ne=b.contactNumber)!=null&&Ne.length?"border-red-500":""}`,required:!0,autoComplete:"tel"}),((Me=b.contactNumber)==null?void 0:Me.length)>0&&o.jsx("div",{className:"text-red-400 text-xs space-y-1",children:b.contactNumber.map((ue,ee)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wc,{className:"w-3 h-3 mr-1"}),ue]},ee))})]}),o.jsx(Te,{ref:P,type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:d||z,children:d?"Creating Account...":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",o.jsx(si,{to:"/login",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign in"})]})})]})})})]})]})},Bq=()=>{const[t,e]=y.useState(""),[r,n]=y.useState(""),[s,i]=y.useState(!1),{login:a,user:l,loading:c}=Es(),u=Xn(),d=ai();y.useEffect(()=>{Nt("page_view",{page:"Login"})},[]);const f=async m=>{var g,x;if(m.preventDefault(),!t.trim()||!r.trim()){Ye({title:"Missing Information",description:"Please enter your email and password.",variant:"destructive"}),Nt("login_missing_info");return}i(!0);try{Nt("login_attempt",{email:t});const p=await a(t.trim(),r.trim());if(p){Ye({title:"Welcome back!",description:`Good to see you again, ${p.name}!`}),Nt("login_success",{user_id:p.id,user_role:p.role});const b=((x=(g=d.state)==null?void 0:g.from)==null?void 0:x.pathname)||"/dashboard";u(b,{replace:!0})}else Ye({title:"User Not Found",description:"No account found with this email. Please register first.",variant:"destructive"}),Nt("login_user_not_found",{email:t})}catch(p){let b="Please try again.";p&&typeof p=="object"&&"message"in p&&typeof p.message=="string"&&(b=p.message),Ye({title:"Login Failed",description:b,variant:"destructive"}),Nt("login_failed",{email:t,error:b})}finally{i(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx(si,{to:"/",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-400",children:"Sign in to your loyalty account"})]}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"email",className:"text-white",children:"Email"}),o.jsx(Se,{id:"email",type:"email",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your email",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"password",className:"text-white",children:"Password"}),o.jsx(Se,{id:"password",type:"password",value:r,onChange:m=>n(m.target.value),placeholder:"Enter your password",className:"bg-gray-800/50 border-gray-700 text-white placeholder-gray-400 focus:border-red-500",required:!0})]}),o.jsx(Te,{type:"submit",className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold",disabled:s,children:s?"Signing In...":"Sign In"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",o.jsx(si,{to:"/register",className:"text-red-400 hover:text-red-300 transition-colors font-semibold",children:"Sign up"})]})})]})})})]})]})};function Uq(){const{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:a}=Es(),[l,c]=y.useState([]),u=Xn(),[d,f]=y.useState(!1),m=y.useRef(null),[g,x]=y.useState(!1),[p,b]=y.useState(0),[E,w]=y.useState(null),[C,I]=y.useState("progress"),j=(t==null?void 0:t.purchaseLimit)||(s==null?void 0:s.purchaseLimit)||hq;y.useEffect(()=>{!e&&!t&&u("/login")},[t,e,u]),y.useEffect(()=>{t&&(async()=>{try{const L=await Su();c(L)}catch(L){console.error("Error loading offers:",L)}})()},[t]),y.useEffect(()=>{t&&(w(new Date),m.current!==null&&m.current!==t.purchases&&t.purchases-m.current>0&&(Ye({title:"Purchase Updated! ",description:`Your purchase count was updated via QR scan. New total: ${t.purchases}/${j}`}),x(!0),b(L=>L+1),setTimeout(()=>x(!1),2500),t.isRewardReady&&m.current<j&&setTimeout(()=>{Ye({title:"Reward Unlocked! ",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)},1e3)),m.current===0&&t.purchases===1&&(f(!0),setTimeout(()=>f(!1),3e3)),m.current=t.purchases)},[t==null?void 0:t.purchases,t==null?void 0:t.isRewardReady,u,j]);const V=Math.max(0,j-((t==null?void 0:t.purchases)||0));return{user:t,loading:e,addPurchase:r,logout:n,settings:s,allUsers:i,allUsersLoading:a,offers:l,navigate:u,showFirstConfetti:d,showConfetti:g,confettiKey:p,lastUpdateTime:E,activeTab:C,setActiveTab:I,userPurchaseLimit:j,purchasesRemaining:V,handleAddPurchase:()=>{!t||t.purchases>=j||(r(),x(!0),b(k=>k+1),setTimeout(()=>x(!1),2500),t.purchases+1>=j?(Ye({title:"Reward Unlocked! ",description:"You've earned a reward! Check your rewards page."}),setTimeout(()=>u("/rewards"),1500)):Ye({title:"Purchase Added!",description:`${j-1-t.purchases} more purchases until your next reward!`}))},handleLogout:()=>{n(),Ye({title:"Logged Out",description:"Thanks for visiting Vape Master!"}),u("/")},handleOfferSelection:async k=>{try{console.log("Selecting offer:",k)}catch(L){console.error("Error selecting offer:",L)}}}}var Lf={linear:function(t,e,r,n){var s=r-e;return s*t/n+e},easeInQuad:function(t,e,r,n){var s=r-e;return s*(t/=n)*t+e},easeOutQuad:function(t,e,r,n){var s=r-e;return-s*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t+e},easeOutCubic:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,r,n){var s=r-e;return-s*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,r,n){var s=r-e;return s*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,r,n){var s=r-e;return s*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,r,n){var s=r-e;return-s*Math.cos(t/n*(Math.PI/2))+s+e},easeOutSine:function(t,e,r,n){var s=r-e;return s*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,r,n){var s=r-e;return-s/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,r,n){var s=r-e;return t==0?e:s*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,r,n){var s=r-e;return t==n?e+s:s*(-Math.pow(2,-10*t/n)+1)+e},easeInOutExpo:function(t,e,r,n){var s=r-e;return t===0?e:t===n?e+s:(t/=n/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,r,n){var s=r-e;return-s*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,r,n){var s=r-e;return s*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,r,n){var s=r-e;return(t/=n/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,r,n){var s=r-e,i,a,l;return l=1.70158,a=0,i=s,t===0?e:(t/=n)===1?e+s:(a||(a=n*.3),i<Math.abs(s)?(i=s,l=a/4):l=a/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/a))+e)},easeOutElastic:function(t,e,r,n){var s=r-e,i,a,l;return l=1.70158,a=0,i=s,t===0?e:(t/=n)===1?e+s:(a||(a=n*.3),i<Math.abs(s)?(i=s,l=a/4):l=a/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*n-l)*(2*Math.PI)/a)+s+e)},easeInOutElastic:function(t,e,r,n){var s=r-e,i,a,l;return l=1.70158,a=0,i=s,t===0?e:(t/=n/2)===2?e+s:(a||(a=n*(.3*1.5)),i<Math.abs(s)?(i=s,l=a/4):l=a/(2*Math.PI)*Math.asin(s/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/a))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/a)*.5+s+e)},easeInBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,r,n,s){var i=r-e;return s===void 0&&(s=1.70158),(t/=n/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,r,n){var s=r-e,i;return i=Lf.easeOutBounce(n-t,0,s,n),s-i+e},easeOutBounce:function(t,e,r,n){var s=r-e;return(t/=n)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,r,n){var s=r-e,i;return t<n/2?(i=Lf.easeInBounce(t*2,0,s,n),i*.5+e):(i=Lf.easeOutBounce(t*2-n,0,s,n),i*.5+s*.5+e)}},qq=Lf;function Gq(t){return t*Math.PI/180}function Xr(t,e){return t+Math.random()*(e-t)}function $q(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Ru;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Ru||(Ru={}));var Ai;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Ai||(Ai={}));const zq=1e3/60;class Hq{constructor(e,r,n,s){this.getOptions=r;const{colors:i,initialVelocityX:a,initialVelocityY:l}=this.getOptions();this.context=e,this.x=n,this.y=s,this.w=Xr(5,20),this.h=Xr(5,20),this.radius=Xr(5,10),this.vx=typeof a=="number"?Xr(-a,a):Xr(a.min,a.max),this.vy=typeof l=="number"?Xr(-l,0):Xr(l.min,l.max),this.shape=$q(0,2),this.angle=Gq(Xr(0,360)),this.angularSpin=Xr(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=Xr(0,1),this.rotationDirection=Xr(0,1)?Ai.Positive:Ai.Negative}update(e){const{gravity:r,wind:n,friction:s,opacity:i,drawShape:a}=this.getOptions(),l=e/zq;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=r*l,this.vx+=n*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===Ai.Positive?this.rotationDirection=Ai.Negative:this.rotateY<=-1&&this.rotationDirection===Ai.Negative&&(this.rotationDirection=Ai.Positive);const c=.1*this.rotationDirection*l;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case Ru.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Ru.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Ru.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Wq{constructor(e,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Xr(this.x,this.w+this.x),i=Xr(this.y,this.h+this.y);return new Hq(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:a,particlesGenerated:l,lastNumberOfPieces:c}=this,{run:u,recycle:d,numberOfPieces:f,debug:m,tweenFunction:g,tweenDuration:x}=this.getOptions();if(!u)return!1;const p=this.particles.length,b=d?p:l;if(b<f){c!==f&&(this.tweenProgress=0,this.tweenFrom=b,this.lastNumberOfPieces=f),this.tweenProgress=Math.min(x,Math.max(0,this.tweenProgress+s));const E=g(this.tweenProgress,this.tweenFrom,f,x),w=Math.round(E-b);for(let C=0;C<w;C++)this.particles.push(this.getParticle());this.particlesGenerated+=w}m&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${p}`,i.width-10,i.height-20));for(let E=this.particles.length-1;E>=0;E--){const w=this.particles[E];w.update(s),(w.y>i.height||w.y<-100||w.x>i.width+100||w.x<-100)&&(d&&b<=f?this.particles[E]=this.getParticle():this.removeParticleAt(E))}return p>0||b<f},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=r}}const ob={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:qq.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Qq{constructor(e,r){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...ob,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:a,frameRate:l},canvas:c,context:u}=this,d=Math.min(s-this.lastFrameTime,50);if(l&&d<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?d%l:0),i&&(u.fillStyle="white",u.clearRect(0,0,c.width,c.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new Wq(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(e){var s,i;const r=(s=this._options)==null?void 0:s.run,n=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&n===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&r===!1&&this.update()}}const Yq=J.createRef();class ab extends J.Component{constructor(e){super(e),this.canvas=J.createRef(),this.canvas=e.canvasRef||Yq}componentDidMount(){if(this.canvas.current){const e=v0(this.props)[0];this.confetti=new Qq(this.canvas.current,e)}}componentDidUpdate(){const e=v0(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,r]=v0(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return o.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...r,style:n})}}ab.defaultProps={...ob};ab.displayName="ReactConfetti";function v0(t){const e={},r={},n={},s=[...Object.keys(ob),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const a in t){const l=t[a];s.includes(a)?e[a]=l:i.includes(a)?i[a]=l:n[a]=l}return[e,n,r]}const d2=J.forwardRef((t,e)=>o.jsx(ab,{canvasRef:e,...t})),Kq=({title:t,onBack:e,actions:r})=>o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[e&&o.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:t})]}),o.jsx("div",{className:"flex gap-2",children:r})]})}),Jq=({reward:t,isOpen:e,onClose:r})=>!e||!t?null:o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gray-900 border border-red-900/30 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-red-900/30",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Reward Details"}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[o.jsxs("p",{children:["Reward ID: ",t.rewardId]}),t.claimedAt&&o.jsxs("p",{className:"text-green-600",children:["Claimed:"," ",t.claimedAt.toDate?new Date(t.claimedAt.toDate()).toLocaleString():""]})]})]}),o.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:t.scanHistory&&t.scanHistory.length>0?o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4",children:["Scan History (",t.scanHistory.length," scans)"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b justify-between border-gray-700 md:table-row flex flex-col md:flex-row",children:[o.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[o.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scan #"}),o.jsx("span",{className:"hidden md:block",children:"Scan #"})]}),o.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[o.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Scanned By"}),o.jsx("span",{className:"hidden md:block",children:"Scanned By"})]}),o.jsxs("th",{className:"px-4 py-3 font-semibold flex flex-col md:table-cell text-center md:text-left",children:[o.jsx("span",{className:"block md:hidden text-xs text-gray-400",children:"Date & Time"}),o.jsx("span",{className:"hidden md:block",children:"Date & Time"})]})]})}),o.jsx("tbody",{children:t.scanHistory.map((n,s)=>{var i,a;return o.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50 md:table-row flex flex-col md:flex-row justify-center text-center md:text-left",children:[o.jsxs("td",{className:"px-4 py-3 font-medium flex flex-col md:table-cell items-center md:items-start",children:[o.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scan #"}),s+1]}),o.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[o.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Scanned By"}),n.scannedBy]}),o.jsxs("td",{className:"px-4 py-3 flex flex-col md:table-cell items-center md:items-start",children:[o.jsx("span",{className:"block text-xs text-gray-400 md:hidden",children:"Date & Time"}),(i=n.timestamp)!=null&&i.toDate?new Date(n.timestamp.toDate()).toLocaleString():""]})]},((a=n.timestamp)==null?void 0:a.seconds)+n.scannedBy)})})]})})]}):o.jsx("div",{className:"text-center text-gray-400 py-8",children:o.jsx("p",{children:"No scan history available for this reward."})})}),o.jsx("div",{className:"p-6 border-t border-red-900/30",children:o.jsx("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Close"})})]})}),Xq=({rewards:t,onRewardClick:e})=>!t||t.length===0?o.jsx("div",{className:"text-gray-400 text-sm",children:"No rewards claimed."}):o.jsxs("div",{className:"space-y-4 mt-2 mb-4",children:[o.jsx("h4",{className:"text-sm font-semibold text-white",children:"Claimed Rewards"}),t.slice().reverse().map((r,n)=>o.jsxs("div",{className:"border border-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-800/50 transition-colors",onClick:()=>e(r),children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[o.jsxs("h5",{className:"text-sm font-medium text-white",children:["Reward #",t.length-n," - ",r.rewardId]}),o.jsxs("span",{className:"text-xs text-green-500 text-gray-400",children:["Claimed:"," ",r.claimedAt&&r.claimedAt.toDate?new Date(r.claimedAt.toDate()).toLocaleString():""]})]}),r.scanHistory&&r.scanHistory.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsxs("h6",{className:"text-xs font-medium text-gray-300 mb-1",children:["Scans for this reward: ",r.scanHistory.length," scans"]}),o.jsx("p",{className:"text-xs text-gray-400",children:"Click to view detailed scan history"})]})]},r.rewardId))]}),Zq=({allUsers:t})=>{const[e,r]=y.useState(null),[n,s]=y.useState(!1);return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-none p-6 min-h-[460px] flex flex-col justify-start -mt-0 shadow-2xl",children:[o.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Rewards History"}),o.jsx("div",{className:"space-y-2",children:t.filter(i=>i.role==="customer").map(i=>{var a,l;return o.jsxs("div",{className:"bg-gray-800/60 rounded-lg p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2",children:[o.jsxs("span",{className:"font-semibold text-white",children:[i.name," (",i.email,")"]}),o.jsxs("span",{className:"text-xs text-gray-400",children:["Total Scans: ",((l=(a=i.currentReward)==null?void 0:a.scanHistory)==null?void 0:l.length)||0]})]}),o.jsx(Xq,{rewards:i.rewards,onRewardClick:c=>{r(c),s(!0)}})]},i.id)})}),o.jsx(Jq,{reward:e,isOpen:n,onClose:()=>{s(!1),r(null)}})]})},eG=({users:t,loading:e})=>{const r=s=>{switch(s){case"super_admin":return o.jsx(_y,{className:"w-4 h-4 text-yellow-500"});case"admin":return o.jsx(Bx,{className:"w-4 h-4 text-blue-500"});default:return o.jsx(Cn,{className:"w-4 h-4 text-gray-400"})}},n=s=>{switch(s){case"super_admin":return"text-yellow-400";case"admin":return"text-blue-400";default:return"text-gray-400"}};return e?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}),o.jsx("span",{className:"ml-3 text-gray-400",children:"Loading users..."})]}):t.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Cn,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No users found"})]}):o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map(s=>{var l;const i=s.purchaseLimit||5,a=Math.min(100,s.purchases/i*100);return o.jsxs("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-lg p-4 hover:bg-gray-800/80 transition-all duration-200",children:[o.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[r(s.role),o.jsx("span",{className:`text-sm font-medium ${n(s.role)}`,children:(s.role||"").replace("_"," ").toUpperCase()})]}),o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:"text-sm text-gray-400",children:s.lastScanAt?new Date(s.lastScanAt.toDate()).toLocaleDateString():"Never"})})]}),o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"flex items-center flex-wrap justify-between mb-1",children:[o.jsx("span",{className:"font-semibold text-white",children:s.name}),o.jsx("span",{className:"text-sm text-gray-400",children:s.email})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white font-medium",children:[s.purchases,"/",i]})]}),o.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${a>=100?"bg-green-500":"bg-red-500"}`,style:{width:`${a}%`}})}),o.jsxs("div",{className:"flex items-center flex-wrap justify-between text-xs text-gray-500",children:[o.jsxs("span",{children:[((l=s.rewards)==null?void 0:l.length)||0," rewards claimed"]}),o.jsx("span",{children:s.isRewardReady?" Ready!":`${i-s.purchases} to go`})]})]})]},s.id)})})},tG=({activeTab:t,onTabChange:e,userRole:r})=>{const n=[{key:"progress",label:"Progress",icon:zr,description:"Track your stamps & rewards",color:"blue",activeColor:"from-blue-500 to-blue-600",inactiveColor:"from-blue-400/20 to-blue-500/20",borderColor:"border-blue-500/30",textColor:"text-blue-300",hoverColor:"hover:from-blue-400/30 hover:to-blue-500/30"},{key:"offers",label:"Offers",icon:st,description:"Available loyalty offers",color:"green",activeColor:"from-green-500 to-green-600",inactiveColor:"from-green-400/20 to-green-500/20",borderColor:"border-green-500/30",textColor:"text-green-300",hoverColor:"hover:from-green-400/30 hover:to-green-500/30"},{key:"card",label:"Rewards",icon:zs,description:"Your earned rewards",color:"purple",activeColor:"from-purple-500 to-purple-600",inactiveColor:"from-purple-400/20 to-purple-500/20",borderColor:"border-purple-500/30",textColor:"text-purple-300",hoverColor:"hover:from-purple-400/30 hover:to-purple-500/30"}];return o.jsx("div",{className:"bg-gradient-to-r from-gray-900/80 via-gray-800/80 to-gray-900/80 border border-gray-700/50 rounded-xl p-3 backdrop-blur-sm shadow-lg",children:o.jsx("div",{className:"flex space-x-2 h-24",children:n.map(s=>{const i=s.icon,a=t===s.key;return o.jsxs("button",{onClick:()=>e(s.key),className:`flex-1 flex flex-col items-center justify-center rounded-lg transition-all duration-300 ease-out group relative overflow-hidden min-h-[88px] ${a?`bg-gradient-to-b ${s.activeColor} border-2 ${s.borderColor} text-white shadow-lg shadow-${s.color}-500/25`:`bg-gradient-to-b ${s.inactiveColor} border-2 border-transparent text-gray-400 ${s.hoverColor} hover:border-${s.color}-500/30 hover:text-${s.color}-300`}`,children:[o.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${a?`bg-gradient-to-b from-${s.color}-500/10 to-${s.color}-400/10`:"bg-transparent"}`}),a&&o.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-${s.color}-400 to-${s.color}-500`}),o.jsx(i,{className:`w-6 h-6 mb-2 transition-all duration-300 ${a?"text-white scale-110 drop-shadow-sm relative z-10":`group-hover:scale-110 group-hover:text-${s.color}-300`}`}),o.jsx("span",{className:`text-sm font-bold transition-all duration-300 mb-1 ${a?"text-white font-extrabold drop-shadow-lg relative z-10":"text-gray-300 group-hover:text-white"}`,children:s.label}),o.jsx("span",{className:`text-xs text-center transition-all duration-300 leading-tight ${a?"text-white font-semibold drop-shadow-lg relative z-10":"text-gray-400 group-hover:text-gray-200"}`,children:s.description}),o.jsx("div",{className:`absolute inset-0 rounded-lg transition-all duration-300 ${a?`ring-2 ring-${s.color}-500/30`:`group-hover:ring-1 group-hover:ring-${s.color}-500/20`}`}),a&&o.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-b from-${s.color}-500/5 to-transparent`})]},s.key)})})})},rG=({user:t,userPurchaseLimit:e,settings:r,purchasesRemaining:n,onViewReward:s,currentOffer:i})=>{var C,I,j;const[a,l]=y.useState({inProgress:!0,completed:!1}),[c,u]=y.useState(!1),d=t.purchases||0,f=((C=t.completedRewards)==null?void 0:C.filter(V=>{var _,A;return(((_=V.scanHistory)==null?void 0:_.reduce((k,L)=>k+(L.stampsEarned||1),0))||0)>=(((A=V.offerSnapshot)==null?void 0:A.stampRequirement)||0)}))||[],m=((I=t.completedRewards)==null?void 0:I.filter(V=>{var _,A;return(((_=V.scanHistory)==null?void 0:_.reduce((k,L)=>k+(L.stampsEarned||1),0))||0)<(((A=V.offerSnapshot)==null?void 0:A.stampRequirement)||0)}))||[],g=f.filter(V=>!V.claimedAt),x=((j=t.completedRewards)==null?void 0:j.reduce((V,R)=>{var _;return V+(((_=R.scanHistory)==null?void 0:_.reduce((A,k)=>A+(k.stampsEarned||1),0))||0)},0))||0,p=Math.max(d,x),b=3,E=c?m:m.slice(0,b);c||f.slice(0,b);const w=V=>{l(R=>({...R,[V]:!R[V]}))};return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-xl p-6 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsxs("div",{className:"flex items-center justify-center mb-3",children:[o.jsx(Ty,{className:"w-8 h-8 text-yellow-400 mr-3"}),o.jsx("h3",{className:"text-2xl font-bold text-white",children:"Life Stamps"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-5xl font-black text-white drop-shadow-[0_2px_8px_#000a] mb-2",children:p}),o.jsx("div",{className:"text-lg text-gray-300 font-medium",children:"Total Stamps Collected Since Joining"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-blue-400",children:f.length}),o.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards Completed"})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-green-400",children:m.length}),o.jsx("div",{className:"text-gray-300 text-xs",children:"Rewards in Progress"})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-yellow-400",children:g.length}),o.jsx("div",{className:"text-gray-300 text-xs",children:"Ready to Redeem"})]})]}),m.length>0&&o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>w("inProgress"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 text-blue-400 mr-2"}),o.jsxs("span",{className:"text-blue-300 text-sm font-medium",children:["Current Active Rewards (",m.length,")"]})]}),a.inProgress?o.jsx(ym,{className:"w-4 h-4 text-blue-400"}):o.jsx(Qu,{className:"w-4 h-4 text-blue-400"})]}),a.inProgress&&o.jsxs("div",{className:"space-y-3",children:[E.map((V,R)=>{var M,P,B;const _=((M=V.scanHistory)==null?void 0:M.reduce((z,Q)=>z+(Q.stampsEarned||1),0))||0,A=((P=V.offerSnapshot)==null?void 0:P.stampRequirement)||0,k=A>0?Math.min(_/A*100,100):0,L=Math.max(0,A-_);return o.jsx("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-3",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-2",children:((B=V.offerSnapshot)==null?void 0:B.offerName)||"Loyalty Reward"}),o.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white font-medium",children:[_," / ",A," stamps"]})]}),o.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3",children:o.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${k}%`}})}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-gray-300 text-xs mb-2",children:V.rewardDescription}),o.jsx("div",{className:"text-blue-300 text-xs",children:L>0?`${L} more stamps needed`:" Reward ready to redeem!"})]})]})},V.rewardId)}),m.length>b&&o.jsx("div",{className:"text-center pt-2",children:o.jsx(Te,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${m.length} Rewards`})})]})]})}),m.length===0&&o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-gray-400 text-sm mb-2",children:f.length>0?"All rewards completed! ":"No active rewards yet"}),o.jsx("div",{className:"text-gray-500 text-xs",children:f.length>0?"Check the Offers tab to start a new reward":"Visit the Offers tab to start collecting stamps"})]})}),o.jsx("div",{className:"text-center mb-4",children:o.jsxs("div",{className:"flex items-center justify-center text-gray-400 text-xs",children:[o.jsx(Dx,{className:"w-3 h-3 mr-1"}),"Member since"," ",t.createdAt.toDate().toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"short",year:"numeric"})]})}),t.isRewardReady&&s&&o.jsx("div",{className:"text-center",children:o.jsxs(Te,{onClick:s,className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-medium px-6 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[o.jsx(tu,{className:"w-4 h-4 mr-2"}),"View Reward"]})})]})};var nG=Object.defineProperty,$m=Object.getOwnPropertySymbols,h2=Object.prototype.hasOwnProperty,f2=Object.prototype.propertyIsEnumerable,iN=(t,e,r)=>e in t?nG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hv=(t,e)=>{for(var r in e||(e={}))h2.call(e,r)&&iN(t,r,e[r]);if($m)for(var r of $m(e))f2.call(e,r)&&iN(t,r,e[r]);return t},fv=(t,e)=>{var r={};for(var n in t)h2.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&$m)for(var n of $m(t))e.indexOf(n)<0&&f2.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var xa;(t=>{const e=class qe{constructor(c,u,d,f){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<qe.MIN_VERSION||c>qe.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(d);if(this.drawCodewords(g),f==-1){let x=1e9;for(let p=0;p<8;p++){this.applyMask(p),this.drawFormatBits(p);const b=this.getPenaltyScore();b<x&&(f=p,x=b),this.applyMask(p)}}s(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,u){const d=t.QrSegment.makeSegments(c);return qe.encodeSegments(d,u)}static encodeBinary(c,u){const d=t.QrSegment.makeBytes(c);return qe.encodeSegments([d],u)}static encodeSegments(c,u,d=1,f=40,m=-1,g=!0){if(!(qe.MIN_VERSION<=d&&d<=f&&f<=qe.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,p;for(x=d;;x++){const C=qe.getNumDataCodewords(x,u)*8,I=a.getTotalBits(c,x);if(I<=C){p=I;break}if(x>=f)throw new RangeError("Data too long")}for(const C of[qe.Ecc.MEDIUM,qe.Ecc.QUARTILE,qe.Ecc.HIGH])g&&p<=qe.getNumDataCodewords(x,C)*8&&(u=C);let b=[];for(const C of c){r(C.mode.modeBits,4,b),r(C.numChars,C.mode.numCharCountBits(x),b);for(const I of C.getData())b.push(I)}s(b.length==p);const E=qe.getNumDataCodewords(x,u)*8;s(b.length<=E),r(0,Math.min(4,E-b.length),b),r(0,(8-b.length%8)%8,b),s(b.length%8==0);for(let C=236;b.length<E;C^=253)r(C,8,b);let w=[];for(;w.length*8<b.length;)w.push(0);return b.forEach((C,I)=>w[I>>>3]|=C<<7-(I&7)),new qe(x,u,w,m)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let d=0;d<u;d++)for(let f=0;f<u;f++)d==0&&f==0||d==0&&f==u-1||d==u-1&&f==0||this.drawAlignmentPattern(c[d],c[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let d=u;for(let m=0;m<10;m++)d=d<<1^(d>>>9)*1335;const f=(u<<10|d)^21522;s(f>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,n(f,m));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,n(f,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,n(f,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,n(f,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let d=0;d<12;d++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;s(u>>>18==0);for(let d=0;d<18;d++){const f=n(u,d),m=this.size-11+d%3,g=Math.floor(d/3);this.setFunctionModule(m,g,f),this.setFunctionModule(g,m,f)}}drawFinderPattern(c,u){for(let d=-4;d<=4;d++)for(let f=-4;f<=4;f++){const m=Math.max(Math.abs(f),Math.abs(d)),g=c+f,x=u+d;0<=g&&g<this.size&&0<=x&&x<this.size&&this.setFunctionModule(g,x,m!=2&&m!=4)}}drawAlignmentPattern(c,u){for(let d=-2;d<=2;d++)for(let f=-2;f<=2;f++)this.setFunctionModule(c+f,u+d,Math.max(Math.abs(f),Math.abs(d))!=1)}setFunctionModule(c,u,d){this.modules[u][c]=d,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,d=this.errorCorrectionLevel;if(c.length!=qe.getNumDataCodewords(u,d))throw new RangeError("Invalid argument");const f=qe.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u],m=qe.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u],g=Math.floor(qe.getNumRawDataModules(u)/8),x=f-g%f,p=Math.floor(g/f);let b=[];const E=qe.reedSolomonComputeDivisor(m);for(let C=0,I=0;C<f;C++){let j=c.slice(I,I+p-m+(C<x?0:1));I+=j.length;const V=qe.reedSolomonComputeRemainder(j,E);C<x&&j.push(0),b.push(j.concat(V))}let w=[];for(let C=0;C<b[0].length;C++)b.forEach((I,j)=>{(C!=p-m||j>=x)&&w.push(I[C])});return s(w.length==g),w}drawCodewords(c){if(c.length!=Math.floor(qe.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let f=0;f<this.size;f++)for(let m=0;m<2;m++){const g=d-m,p=(d+1&2)==0?this.size-1-f:f;!this.isFunction[p][g]&&u<c.length*8&&(this.modules[p][g]=n(c[u>>>3],7-(u&7)),u++)}}s(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let d=0;d<this.size;d++){let f;switch(c){case 0:f=(d+u)%2==0;break;case 1:f=u%2==0;break;case 2:f=d%3==0;break;case 3:f=(d+u)%3==0;break;case 4:f=(Math.floor(d/3)+Math.floor(u/2))%2==0;break;case 5:f=d*u%2+d*u%3==0;break;case 6:f=(d*u%2+d*u%3)%2==0;break;case 7:f=((d+u)%2+d*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][d]&&f&&(this.modules[u][d]=!this.modules[u][d])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let g=!1,x=0,p=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[m][b]==g?(x++,x==5?c+=qe.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,p),g||(c+=this.finderPenaltyCountPatterns(p)*qe.PENALTY_N3),g=this.modules[m][b],x=1);c+=this.finderPenaltyTerminateAndCount(g,x,p)*qe.PENALTY_N3}for(let m=0;m<this.size;m++){let g=!1,x=0,p=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][m]==g?(x++,x==5?c+=qe.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,p),g||(c+=this.finderPenaltyCountPatterns(p)*qe.PENALTY_N3),g=this.modules[b][m],x=1);c+=this.finderPenaltyTerminateAndCount(g,x,p)*qe.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let g=0;g<this.size-1;g++){const x=this.modules[m][g];x==this.modules[m][g+1]&&x==this.modules[m+1][g]&&x==this.modules[m+1][g+1]&&(c+=qe.PENALTY_N2)}let u=0;for(const m of this.modules)u=m.reduce((g,x)=>g+(x?1:0),u);const d=this.size*this.size,f=Math.ceil(Math.abs(u*20-d*10)/d)-1;return s(0<=f&&f<=9),c+=f*qe.PENALTY_N4,s(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let d=[6];for(let f=this.size-7;d.length<c;f-=u)d.splice(1,0,f);return d}}static getNumRawDataModules(c){if(c<qe.MIN_VERSION||c>qe.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const d=Math.floor(c/7)+2;u-=(25*d-10)*d-55,c>=7&&(u-=36)}return s(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(qe.getNumRawDataModules(c)/8)-qe.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*qe.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let f=0;f<c-1;f++)u.push(0);u.push(1);let d=1;for(let f=0;f<c;f++){for(let m=0;m<u.length;m++)u[m]=qe.reedSolomonMultiply(u[m],d),m+1<u.length&&(u[m]^=u[m+1]);d=qe.reedSolomonMultiply(d,2)}return u}static reedSolomonComputeRemainder(c,u){let d=u.map(f=>0);for(const f of c){const m=f^d.shift();d.push(0),u.forEach((g,x)=>d[x]^=qe.reedSolomonMultiply(g,m))}return d}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let d=0;for(let f=7;f>=0;f--)d=d<<1^(d>>>7)*285,d^=(u>>>f&1)*c;return s(d>>>8==0),d}finderPenaltyCountPatterns(c){const u=c[1];s(u<=this.size*3);const d=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(d&&c[0]>=u*4&&c[6]>=u?1:0)+(d&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,d){return c&&(this.finderPenaltyAddHistory(u,d),u=0),u+=this.size,this.finderPenaltyAddHistory(u,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let d=c-1;d>=0;d--)u.push(l>>>d&1)}function n(l,c){return(l>>>c&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const i=class jt{constructor(c,u,d){if(this.mode=c,this.numChars=u,this.bitData=d,u<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(c){let u=[];for(const d of c)r(d,8,u);return new jt(jt.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!jt.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let d=0;d<c.length;){const f=Math.min(c.length-d,3);r(parseInt(c.substring(d,d+f),10),f*3+1,u),d+=f}return new jt(jt.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!jt.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],d;for(d=0;d+2<=c.length;d+=2){let f=jt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d))*45;f+=jt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d+1)),r(f,11,u)}return d<c.length&&r(jt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d)),6,u),new jt(jt.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:jt.isNumeric(c)?[jt.makeNumeric(c)]:jt.isAlphanumeric(c)?[jt.makeAlphanumeric(c)]:[jt.makeBytes(jt.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,u);else if(c<16384)r(2,2,u),r(c,14,u);else if(c<1e6)r(6,3,u),r(c,21,u);else throw new RangeError("ECI assignment value out of range");return new jt(jt.Mode.ECI,0,u)}static isNumeric(c){return jt.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return jt.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let d=0;for(const f of c){const m=f.mode.numCharCountBits(u);if(f.numChars>=1<<m)return 1/0;d+=4+m+f.bitData.length}return d}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let d=0;d<c.length;d++)c.charAt(d)!="%"?u.push(c.charCodeAt(d)):(u.push(parseInt(c.substring(d+1,d+3),16)),d+=2);return u}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=i;t.QrSegment=i})(xa||(xa={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(xa||(xa={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(xa||(xa={}));var yl=xa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var sG={L:yl.QrCode.Ecc.LOW,M:yl.QrCode.Ecc.MEDIUM,Q:yl.QrCode.Ecc.QUARTILE,H:yl.QrCode.Ecc.HIGH},m2=128,p2="L",g2="#FFFFFF",y2="#000000",v2=!1,x2=1,iG=4,oG=0,aG=.1;function w2(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(a,l){if(!a&&i!==null){r.push(`M${i+e} ${s+e}h${l-i}v1H${i+e}z`),i=null;return}if(l===n.length-1){if(!a)return;i===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${i+e},${s+e} h${l+1-i}v1H${i+e}z`);return}a&&i===null&&(i=l)})}),r.join("")}function b2(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function lG(t,e,r,n){if(n==null)return null;const s=t.length+r*2,i=Math.floor(e*aG),a=s/e,l=(n.width||i)*a,c=(n.height||i)*a,u=n.x==null?t.length/2-l/2:n.x*a,d=n.y==null?t.length/2-c/2:n.y*a,f=n.opacity==null?1:n.opacity;let m=null;if(n.excavate){let x=Math.floor(u),p=Math.floor(d),b=Math.ceil(l+u-x),E=Math.ceil(c+d-p);m={x,y:p,w:b,h:E}}const g=n.crossOrigin;return{x:u,y:d,h:c,w:l,excavation:m,opacity:f,crossOrigin:g}}function cG(t,e){return e!=null?Math.max(Math.floor(e),0):t?iG:oG}function E2({value:t,level:e,minVersion:r,includeMargin:n,marginSize:s,imageSettings:i,size:a,boostLevel:l}){let c=J.useMemo(()=>{const x=(Array.isArray(t)?t:[t]).reduce((p,b)=>(p.push(...yl.QrSegment.makeSegments(b)),p),[]);return yl.QrCode.encodeSegments(x,sG[e],r,void 0,void 0,l)},[t,e,r,l]);const{cells:u,margin:d,numCells:f,calculatedImageSettings:m}=J.useMemo(()=>{let g=c.getModules();const x=cG(n,s),p=g.length+x*2,b=lG(g,a,x,i);return{cells:g,margin:x,numCells:p,calculatedImageSettings:b}},[c,a,i,n,s]);return{qrcode:c,margin:d,cells:u,numCells:f,calculatedImageSettings:m}}var uG=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),dG=J.forwardRef(function(e,r){const n=e,{value:s,size:i=m2,level:a=p2,bgColor:l=g2,fgColor:c=y2,includeMargin:u=v2,minVersion:d=x2,boostLevel:f,marginSize:m,imageSettings:g}=n,p=fv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:b}=p,E=fv(p,["style"]),w=g==null?void 0:g.src,C=J.useRef(null),I=J.useRef(null),j=J.useCallback(B=>{C.current=B,typeof r=="function"?r(B):r&&(r.current=B)},[r]),[V,R]=J.useState(!1),{margin:_,cells:A,numCells:k,calculatedImageSettings:L}=E2({value:s,level:a,minVersion:d,boostLevel:f,includeMargin:u,marginSize:m,imageSettings:g,size:i});J.useEffect(()=>{if(C.current!=null){const B=C.current,z=B.getContext("2d");if(!z)return;let Q=A;const Z=I.current,U=L!=null&&Z!==null&&Z.complete&&Z.naturalHeight!==0&&Z.naturalWidth!==0;U&&L.excavation!=null&&(Q=b2(A,L.excavation));const H=window.devicePixelRatio||1;B.height=B.width=i*H;const ie=i/k*H;z.scale(ie,ie),z.fillStyle=l,z.fillRect(0,0,k,k),z.fillStyle=c,uG?z.fill(new Path2D(w2(Q,_))):A.forEach(function(ne,le){ne.forEach(function(he,Ne){he&&z.fillRect(Ne+_,le+_,1,1)})}),L&&(z.globalAlpha=L.opacity),U&&z.drawImage(Z,L.x+_,L.y+_,L.w,L.h)}}),J.useEffect(()=>{R(!1)},[w]);const M=hv({height:i,width:i},b);let P=null;return w!=null&&(P=J.createElement("img",{src:w,key:w,style:{display:"none"},onLoad:()=>{R(!0)},ref:I,crossOrigin:L==null?void 0:L.crossOrigin})),J.createElement(J.Fragment,null,J.createElement("canvas",hv({style:M,height:i,width:i,ref:j,role:"img"},E)),P)});dG.displayName="QRCodeCanvas";var C2=J.forwardRef(function(e,r){const n=e,{value:s,size:i=m2,level:a=p2,bgColor:l=g2,fgColor:c=y2,includeMargin:u=v2,minVersion:d=x2,boostLevel:f,title:m,marginSize:g,imageSettings:x}=n,p=fv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:b,cells:E,numCells:w,calculatedImageSettings:C}=E2({value:s,level:a,minVersion:d,boostLevel:f,includeMargin:u,marginSize:g,imageSettings:x,size:i});let I=E,j=null;x!=null&&C!=null&&(C.excavation!=null&&(I=b2(E,C.excavation)),j=J.createElement("image",{href:x.src,height:C.h,width:C.w,x:C.x+b,y:C.y+b,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const V=w2(I,b);return J.createElement("svg",hv({height:i,width:i,viewBox:`0 0 ${w} ${w}`,ref:r,role:"img"},p),!!m&&J.createElement("title",null,m),J.createElement("path",{fill:l,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),J.createElement("path",{fill:c,d:V,shapeRendering:"crispEdges"}),j)});C2.displayName="QRCodeSVG";const N2=({qrData:t,isOpen:e,onClose:r})=>{if(!e)return null;const n=JSON.stringify(t);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-white flex-1 text-center truncate",children:t.offerName}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors ml-4",children:o.jsx(hs,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-6 flex justify-center",children:o.jsx("div",{className:"p-4 bg-white rounded-lg",children:o.jsx(C2,{value:n,size:200,level:"M",includeMargin:!0})})})]})})},hG=({user:t,offers:e})=>{var M,P;const[r,n]=y.useState(!1),[s,i]=y.useState(null),[a,l]=y.useState({inProgress:!0,completed:!0}),[c,u]=y.useState(!1),[d,f]=y.useState(!1),m=t.completedRewards||[],g=m.filter(B=>{var Q,Z;return(((Q=B.scanHistory)==null?void 0:Q.reduce((U,H)=>U+(H.stampsEarned||1),0))||0)<(((Z=B.offerSnapshot)==null?void 0:Z.stampRequirement)||0)}),x=m.filter(B=>{var Q,Z;return(((Q=B.scanHistory)==null?void 0:Q.reduce((U,H)=>U+(H.stampsEarned||1),0))||0)>=(((Z=B.offerSnapshot)==null?void 0:Z.stampRequirement)||0)}),p=x.filter(B=>!B.claimedAt),b=x.filter(B=>!!B.claimedAt),E=(B,z)=>{const Q=B.createdAt.toDate().getTime();return z.createdAt.toDate().getTime()-Q},w=[...g].sort(E),C=[...p].sort(E),I=[...b].sort(E),j=3,V=c?w:w.slice(0,j),R=c?C:C.slice(0,j),_=d?I:I.slice(0,j),A=B=>{i(B),n(!0)},k=()=>{n(!1),i(null)},L=B=>{l(z=>({...z,[B]:!z[B]}))};return o.jsxs("div",{className:"space-y-6",children:[g.length>0&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 hover:bg-blue-900/30 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-blue-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>L("inProgress"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(zr,{className:"w-5 h-5 text-blue-400 mr-2 animate-pulse"}),o.jsxs("h3",{className:"text-lg font-semibold text-blue-300",children:["Rewards in Progress (",g.length,")"]})]}),a.inProgress?o.jsx(ym,{className:"w-5 h-5 text-blue-400"}):o.jsx(Qu,{className:"w-5 h-5 text-blue-400"})]}),a.inProgress&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-4",children:V.map(B=>{var H,ie,ne,le;const z=((H=B.scanHistory)==null?void 0:H.reduce((he,Ne)=>he+(Ne.stampsEarned||1),0))||0,Q=((ie=B.offerSnapshot)==null?void 0:ie.stampRequirement)||0,Z=Math.min(z/Q*100,100),U=Math.max(0,Q-z);return o.jsxs("div",{className:"bg-blue-900/10 border border-blue-600/20 rounded-lg p-4 hover:bg-blue-900/20 hover:border-blue-500/30 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-blue-200 transition-colors duration-200",children:((ne=B.offerSnapshot)==null?void 0:ne.offerName)||"Loyalty Reward"}),o.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((le=B.offerSnapshot)==null?void 0:le.description)||"Collect stamps to earn this reward"}),o.jsx("p",{className:"text-blue-300 text-xs font-medium",children:B.rewardDescription})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm text-white font-medium",children:[z," / ",Q]}),o.jsx("div",{className:"text-xs text-gray-400",children:"stamps collected"})]})]}),o.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3 overflow-hidden",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full transition-all duration-1000 ease-out shadow-sm",style:{width:`${Z}%`}})}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-gray-400",children:U>0?`${U} more stamps needed`:" Ready to redeem!"}),o.jsxs("span",{className:"text-blue-300 font-medium",children:["Started"," ",B.createdAt.toDate().toLocaleDateString()]})]})]},B.rewardId)})}),g.length>j&&o.jsx("div",{className:"text-center pt-4",children:o.jsx(Te,{onClick:()=>u(!c),variant:"outline",size:"sm",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors duration-200",children:c?"Show Less":`Show All ${g.length} In-Progress Rewards`})})]})]}),(p.length>0||b.length>0)&&o.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 hover:bg-green-900/30 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-green-900/30 rounded-lg p-2 transition-colors duration-200",onClick:()=>L("completed"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ty,{className:"w-5 h-5 text-green-400 mr-2 animate-pulse"}),o.jsxs("h3",{className:"text-lg font-semibold text-green-300",children:["Completed Rewards (",p.length+b.length,")"]})]}),a.completed?o.jsx(ym,{className:"w-5 h-5 text-green-400"}):o.jsx(Qu,{className:"w-5 h-5 text-green-400"})]}),a.completed&&o.jsxs(o.Fragment,{children:[p.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h4",{className:"text-md font-medium text-green-200 mb-3 flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Ready to Redeem (",p.length,")"]}),o.jsx("div",{className:"space-y-4",children:R.map(B=>{var Q,Z,U;const z=!!B.claimedAt;return o.jsxs("div",{className:`border rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group ${z?"bg-gray-800/30 border-gray-600/30":"bg-green-900/10 border-green-600/20 hover:bg-green-900/20 hover:border-green-500/30"}`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-green-200 transition-colors duration-200",children:((Q=B.offerSnapshot)==null?void 0:Q.offerName)||"Loyalty Reward"}),o.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((Z=B.offerSnapshot)==null?void 0:Z.description)||"Reward description"}),o.jsx("p",{className:"text-green-300 text-xs font-medium",children:B.rewardDescription})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${z?"bg-gray-700 text-gray-300":"bg-green-700 text-green-300 animate-pulse"}`,children:z?"REDEEMED":"AVAILABLE"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-400",children:["Earned"," ",B.createdAt.toDate().toLocaleDateString()]}),z&&o.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(U=B.claimedAt)==null?void 0:U.toDate().toLocaleDateString()]})]}),!z&&o.jsx("div",{className:"mt-3",children:o.jsxs(Te,{onClick:()=>A(B),className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-medium py-2 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-green-500/25",children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})})]},B.rewardId)})})]}),b.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-md font-medium text-gray-300 mb-3 flex items-center",children:[o.jsx(Ty,{className:"w-4 h-4 mr-2 text-gray-400"}),"Previously Redeemed (",b.length,")"]}),o.jsx("div",{className:"space-y-4",children:_.map(B=>{var z,Q,Z;return o.jsxs("div",{className:"bg-gray-800/30 border border-gray-600/30 rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-md group",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm mb-1 group-hover:text-gray-200 transition-colors duration-200",children:((z=B.offerSnapshot)==null?void 0:z.offerName)||"Loyalty Reward"}),o.jsx("p",{className:"text-gray-300 text-xs mb-2 group-hover:text-gray-200 transition-colors duration-200",children:((Q=B.offerSnapshot)==null?void 0:Q.description)||"Reward description"}),o.jsx("p",{className:"text-gray-400 text-xs font-medium",children:B.rewardDescription})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:"text-xs px-2 py-1 rounded-full font-medium bg-gray-700 text-gray-300",children:"REDEEMED"})})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-400",children:["Earned"," ",B.createdAt.toDate().toLocaleDateString()]}),o.jsxs("span",{className:"text-gray-400",children:["Redeemed"," ",(Z=B.claimedAt)==null?void 0:Z.toDate().toLocaleDateString()]})]})]},B.rewardId)})})]}),(p.length>j||b.length>j)&&o.jsx("div",{className:"text-center pt-4",children:o.jsx(Te,{onClick:()=>f(!d),variant:"outline",size:"sm",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-colors duration-200",children:d?"Show Less":`Show All ${p.length+b.length} Completed Rewards`})})]})]}),m.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/30 rounded-xl p-8 hover:bg-gray-800/40 transition-all duration-300",children:[o.jsx(st,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No Rewards Yet"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Start collecting stamps from the Offers tab to earn your first reward!"})]})}),r&&s&&o.jsx(N2,{qrData:{userId:t.id,userEmail:t.email,userName:t.name,offerId:((M=s.offerSnapshot)==null?void 0:M.offerId)||"",offerName:((P=s.offerSnapshot)==null?void 0:P.offerName)||"Reward Redemption",stampsPerScan:1,timestamp:new Date().toISOString(),rewardId:s.rewardId,action:"redeem_reward"},isOpen:r,onClose:k})]})},oN=[{key:"profile",label:"Edit Profile",route:"profile",colorClass:"border-cyan-500 text-cyan-400 hover:bg-cyan-500 hover:text-white",roles:["customer","admin","super_admin"],icon:zs},{key:"scan",label:"Scan",route:"/scan",colorClass:"border-green-500 text-green-400 hover:bg-green-500 hover:text-white",roles:["admin","super_admin"],icon:L3},{key:"settings",label:"Settings",route:"/settings",colorClass:"border-blue-500 text-blue-400 hover:bg-blue-500 hover:text-white",roles:["super_admin"],icon:mp},{key:"users",label:"Users",route:"/users",colorClass:"border-purple-500 text-purple-400 hover:bg-purple-500 hover:text-white",roles:["super_admin"],icon:Cn},{key:"logout",label:"Logout",route:"logout",colorClass:"border-red-500 text-red-400 hover:bg-red-500 hover:text-white",roles:["customer","admin","super_admin"],icon:SA}];var fG=y.createContext(void 0);function Kp(t){const e=y.useContext(fG);return t||e||"ltr"}var x0=0;function _2(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??aN()),document.body.insertAdjacentElement("beforeend",t[1]??aN()),x0++,()=>{x0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),x0--}},[])}function aN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var w0="focusScope.autoFocusOnMount",b0="focusScope.autoFocusOnUnmount",lN={bubbles:!1,cancelable:!0},mG="FocusScope",lb=y.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=y.useState(null),u=Nr(s),d=Nr(i),f=y.useRef(null),m=ut(e,p=>c(p)),g=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(n){let p=function(C){if(g.paused||!l)return;const I=C.target;l.contains(I)?f.current=I:Ni(f.current,{select:!0})},b=function(C){if(g.paused||!l)return;const I=C.relatedTarget;I!==null&&(l.contains(I)||Ni(f.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const j of C)j.removedNodes.length>0&&Ni(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",b);const w=new MutationObserver(E);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",b),w.disconnect()}}},[n,l,g.paused]),y.useEffect(()=>{if(l){uN.add(g);const p=document.activeElement;if(!l.contains(p)){const E=new CustomEvent(w0,lN);l.addEventListener(w0,u),l.dispatchEvent(E),E.defaultPrevented||(pG(wG(T2(l)),{select:!0}),document.activeElement===p&&Ni(l))}return()=>{l.removeEventListener(w0,u),setTimeout(()=>{const E=new CustomEvent(b0,lN);l.addEventListener(b0,d),l.dispatchEvent(E),E.defaultPrevented||Ni(p??document.body,{select:!0}),l.removeEventListener(b0,d),uN.remove(g)},0)}}},[l,u,d,g]);const x=y.useCallback(p=>{if(!r&&!n||g.paused)return;const b=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,E=document.activeElement;if(b&&E){const w=p.currentTarget,[C,I]=gG(w);C&&I?!p.shiftKey&&E===I?(p.preventDefault(),r&&Ni(C,{select:!0})):p.shiftKey&&E===C&&(p.preventDefault(),r&&Ni(I,{select:!0})):E===w&&p.preventDefault()}},[r,n,g.paused]);return o.jsx($e.div,{tabIndex:-1,...a,ref:m,onKeyDown:x})});lb.displayName=mG;function pG(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ni(n,{select:e}),document.activeElement!==r)return}function gG(t){const e=T2(t),r=cN(e,t),n=cN(e.reverse(),t);return[r,n]}function T2(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function cN(t,e){for(const r of t)if(!yG(r,{upTo:e}))return r}function yG(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function vG(t){return t instanceof HTMLInputElement&&"select"in t}function Ni(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&vG(t)&&e&&t.select()}}var uN=xG();function xG(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=dN(t,e),t.unshift(e)},remove(e){var r;t=dN(t,e),(r=t[0])==null||r.resume()}}}function dN(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function wG(t){return t.filter(e=>e.tagName!=="A")}function bG(t,e=[]){let r=[];function n(i,a){const l=y.createContext(a),c=r.length;r=[...r,a];function u(f){const{scope:m,children:g,...x}=f,p=(m==null?void 0:m[t][c])||l,b=y.useMemo(()=>x,Object.values(x));return o.jsx(p.Provider,{value:b,children:g})}function d(f,m){const g=(m==null?void 0:m[t][c])||l,x=y.useContext(g);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const s=()=>{const i=r.map(a=>y.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,EG(s,...e)]}function EG(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var E0="rovingFocusGroup.onEntryFocus",CG={bubbles:!1,cancelable:!0},Jp="RovingFocusGroup",[mv,A2,NG]=Ed(Jp),[_G,Xp]=bG(Jp,[NG]),[TG,AG]=_G(Jp),S2=y.forwardRef((t,e)=>o.jsx(mv.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(mv.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(SG,{...t,ref:e})})}));S2.displayName=Jp;var SG=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,m=y.useRef(null),g=ut(e,m),x=Kp(i),[p=null,b]=Wu({prop:a,defaultProp:l,onChange:c}),[E,w]=y.useState(!1),C=Nr(u),I=A2(r),j=y.useRef(!1),[V,R]=y.useState(0);return y.useEffect(()=>{const _=m.current;if(_)return _.addEventListener(E0,C),()=>_.removeEventListener(E0,C)},[C]),o.jsx(TG,{scope:r,orientation:n,dir:x,loop:s,currentTabStopId:p,onItemFocus:y.useCallback(_=>b(_),[b]),onItemShiftTab:y.useCallback(()=>w(!0),[]),onFocusableItemAdd:y.useCallback(()=>R(_=>_+1),[]),onFocusableItemRemove:y.useCallback(()=>R(_=>_-1),[]),children:o.jsx($e.div,{tabIndex:E||V===0?-1:0,"data-orientation":n,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:xe(t.onMouseDown,()=>{j.current=!0}),onFocus:xe(t.onFocus,_=>{const A=!j.current;if(_.target===_.currentTarget&&A&&!E){const k=new CustomEvent(E0,CG);if(_.currentTarget.dispatchEvent(k),!k.defaultPrevented){const L=I().filter(Q=>Q.focusable),M=L.find(Q=>Q.active),P=L.find(Q=>Q.id===p),z=[M,P,...L].filter(Boolean).map(Q=>Q.ref.current);j2(z,d)}}j.current=!1}),onBlur:xe(t.onBlur,()=>w(!1))})})}),R2="RovingFocusGroupItem",I2=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...a}=t,l=ia(),c=i||l,u=AG(R2,r),d=u.currentTabStopId===c,f=A2(r),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return y.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),o.jsx(mv.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:o.jsx($e.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:xe(t.onMouseDown,x=>{n?u.onItemFocus(c):x.preventDefault()}),onFocus:xe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:xe(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const p=jG(x,u.orientation,u.dir);if(p!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let E=f().filter(w=>w.focusable).map(w=>w.ref.current);if(p==="last")E.reverse();else if(p==="prev"||p==="next"){p==="prev"&&E.reverse();const w=E.indexOf(x.currentTarget);E=u.loop?PG(E,w+1):E.slice(w+1)}setTimeout(()=>j2(E))}})})})});I2.displayName=R2;var RG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function IG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function jG(t,e,r){const n=IG(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return RG[n]}function j2(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function PG(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var P2=S2,k2=I2,kG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ja=new WeakMap,of=new WeakMap,af={},C0=0,M2=function(t){return t&&(t.host||M2(t.parentNode))},MG=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=M2(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},DG=function(t,e,r,n){var s=MG(e,Array.isArray(t)?t:[t]);af[r]||(af[r]=new WeakMap);var i=af[r],a=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var g=m.getAttribute(n),x=g!==null&&g!=="false",p=(Ja.get(m)||0)+1,b=(i.get(m)||0)+1;Ja.set(m,p),i.set(m,b),a.push(m),p===1&&x&&of.set(m,!0),b===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return d(e),l.clear(),C0++,function(){a.forEach(function(f){var m=Ja.get(f)-1,g=i.get(f)-1;Ja.set(f,m),i.set(f,g),m||(of.has(f)||f.removeAttribute(n),of.delete(f)),g||f.removeAttribute(r)}),C0--,C0||(Ja=new WeakMap,Ja=new WeakMap,of=new WeakMap,af={})}},D2=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=kG(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),DG(n,s,r,"aria-hidden")):function(){return null}},Ff="right-scroll-bar-position",Vf="width-before-scroll-bar",OG="with-scroll-bars-hidden",LG="--removed-body-scroll-bar-size";function N0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function FG(t,e){var r=y.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var VG=typeof window<"u"?y.useLayoutEffect:y.useEffect,hN=new WeakMap;function BG(t,e){var r=FG(null,function(n){return t.forEach(function(s){return N0(s,n)})});return VG(function(){var n=hN.get(r);if(n){var s=new Set(n),i=new Set(t),a=r.current;s.forEach(function(l){i.has(l)||N0(l,null)}),i.forEach(function(l){s.has(l)||N0(l,a)})}hN.set(r,t)},[t]),r}function UG(t){return t}function qG(t,e){e===void 0&&(e=UG);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var a=e(i,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(n=!0;r.length;){var a=r;r=[],a.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(i),a=r}var c=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),r}}}};return s}function GG(t){t===void 0&&(t={});var e=qG(null);return e.options=ls({async:!0,ssr:!1},t),e}var O2=function(t){var e=t.sideCar,r=Dd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return y.createElement(n,ls({},r))};O2.isSideCarExport=!0;function $G(t,e){return t.useMedium(e),O2}var L2=GG(),_0=function(){},Zp=y.forwardRef(function(t,e){var r=y.useRef(null),n=y.useState({onScrollCapture:_0,onWheelCapture:_0,onTouchMoveCapture:_0}),s=n[0],i=n[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,m=t.sideCar,g=t.noIsolation,x=t.inert,p=t.allowPinchZoom,b=t.as,E=b===void 0?"div":b,w=t.gapMode,C=Dd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=m,j=BG([r,e]),V=ls(ls({},C),s);return y.createElement(y.Fragment,null,d&&y.createElement(I,{sideCar:L2,removeScrollBar:u,shards:f,noIsolation:g,inert:x,setCallbacks:i,allowPinchZoom:!!p,lockRef:r,gapMode:w}),a?y.cloneElement(y.Children.only(l),ls(ls({},V),{ref:j})):y.createElement(E,ls({},V,{className:c,ref:j}),l))});Zp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zp.classNames={fullWidth:Vf,zeroRight:Ff};var zG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function HG(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=zG();return e&&t.setAttribute("nonce",e),t}function WG(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function QG(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var YG=function(){var t=0,e=null;return{add:function(r){t==0&&(e=HG())&&(WG(e,r),QG(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},KG=function(){var t=YG();return function(e,r){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},F2=function(){var t=KG(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},JG={left:0,top:0,right:0,gap:0},T0=function(t){return parseInt(t||"",10)||0},XG=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[T0(r),T0(n),T0(s)]},ZG=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return JG;var e=XG(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},e$=F2(),jl="data-scroll-locked",t$=function(t,e,r,n){var s=t.left,i=t.top,a=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(OG,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(jl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ff,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Vf,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ff," .").concat(Ff,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Vf," .").concat(Vf,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(jl,`] {
    `).concat(LG,": ").concat(l,`px;
  }
`)},fN=function(){var t=parseInt(document.body.getAttribute(jl)||"0",10);return isFinite(t)?t:0},r$=function(){y.useEffect(function(){return document.body.setAttribute(jl,(fN()+1).toString()),function(){var t=fN()-1;t<=0?document.body.removeAttribute(jl):document.body.setAttribute(jl,t.toString())}},[])},n$=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;r$();var i=y.useMemo(function(){return ZG(s)},[s]);return y.createElement(e$,{styles:t$(i,!e,s,r?"":"!important")})},pv=!1;if(typeof window<"u")try{var lf=Object.defineProperty({},"passive",{get:function(){return pv=!0,!0}});window.addEventListener("test",lf,lf),window.removeEventListener("test",lf,lf)}catch{pv=!1}var Xa=pv?{passive:!1}:!1,s$=function(t){return t.tagName==="TEXTAREA"},V2=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!s$(t)&&r[e]==="visible")},i$=function(t){return V2(t,"overflowY")},o$=function(t){return V2(t,"overflowX")},mN=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=B2(t,n);if(s){var i=U2(t,n),a=i[1],l=i[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},a$=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},l$=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},B2=function(t,e){return t==="v"?i$(e):o$(e)},U2=function(t,e){return t==="v"?a$(e):l$(e)},c$=function(t,e){return t==="h"&&e==="rtl"?-1:1},u$=function(t,e,r,n,s){var i=c$(t,window.getComputedStyle(e).direction),a=i*n,l=r.target,c=e.contains(l),u=!1,d=a>0,f=0,m=0;do{var g=U2(t,l),x=g[0],p=g[1],b=g[2],E=p-b-i*x;(x||E)&&B2(t,l)&&(f+=E,m+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(f)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},cf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},pN=function(t){return[t.deltaX,t.deltaY]},gN=function(t){return t&&"current"in t?t.current:t},d$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},h$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},f$=0,Za=[];function m$(t){var e=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),s=y.useState(f$++)[0],i=y.useState(F2)[0],a=y.useRef(t);y.useEffect(function(){a.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=uV([t.lockRef.current],(t.shards||[]).map(gN),!0).filter(Boolean);return p.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=y.useCallback(function(p,b){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!a.current.allowPinchZoom;var E=cf(p),w=r.current,C="deltaX"in p?p.deltaX:w[0]-E[0],I="deltaY"in p?p.deltaY:w[1]-E[1],j,V=p.target,R=Math.abs(C)>Math.abs(I)?"h":"v";if("touches"in p&&R==="h"&&V.type==="range")return!1;var _=mN(R,V);if(!_)return!0;if(_?j=R:(j=R==="v"?"h":"v",_=mN(R,V)),!_)return!1;if(!n.current&&"changedTouches"in p&&(C||I)&&(n.current=j),!j)return!0;var A=n.current||j;return u$(A,b,p,A==="h"?C:I,!0)},[]),c=y.useCallback(function(p){var b=p;if(!(!Za.length||Za[Za.length-1]!==i)){var E="deltaY"in b?pN(b):cf(b),w=e.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&d$(j.delta,E)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var C=(a.current.shards||[]).map(gN).filter(Boolean).filter(function(j){return j.contains(b.target)}),I=C.length>0?l(b,C[0]):!a.current.noIsolation;I&&b.cancelable&&b.preventDefault()}}},[]),u=y.useCallback(function(p,b,E,w){var C={name:p,delta:b,target:E,should:w,shadowParent:p$(E)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(I){return I!==C})},1)},[]),d=y.useCallback(function(p){r.current=cf(p),n.current=void 0},[]),f=y.useCallback(function(p){u(p.type,pN(p),p.target,l(p,t.lockRef.current))},[]),m=y.useCallback(function(p){u(p.type,cf(p),p.target,l(p,t.lockRef.current))},[]);y.useEffect(function(){return Za.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Xa),document.addEventListener("touchmove",c,Xa),document.addEventListener("touchstart",d,Xa),function(){Za=Za.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,Xa),document.removeEventListener("touchmove",c,Xa),document.removeEventListener("touchstart",d,Xa)}},[]);var g=t.removeScrollBar,x=t.inert;return y.createElement(y.Fragment,null,x?y.createElement(i,{styles:h$(s)}):null,g?y.createElement(n$,{gapMode:t.gapMode}):null)}function p$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const g$=$G(L2,m$);var cb=y.forwardRef(function(t,e){return y.createElement(Zp,ls({},t,{ref:e,sideCar:g$}))});cb.classNames=Zp.classNames;var gv=["Enter"," "],y$=["ArrowDown","PageUp","Home"],q2=["ArrowUp","PageDown","End"],v$=[...y$,...q2],x$={ltr:[...gv,"ArrowRight"],rtl:[...gv,"ArrowLeft"]},w$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ud="Menu",[fd,b$,E$]=Ed(Ud),[Ia,C$]=Cd(Ud,[E$,Ec,Xp]),eg=Ec(),G2=Xp(),[N$,ja]=Ia(Ud),[_$,qd]=Ia(Ud),$2=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:a=!0}=t,l=eg(e),[c,u]=y.useState(null),d=y.useRef(!1),f=Nr(i),m=Kp(s);return y.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),o.jsx(PI,{...l,children:o.jsx(N$,{scope:e,open:r,onOpenChange:f,content:c,onContentChange:u,children:o.jsx(_$,{scope:e,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:a,children:n})})})};$2.displayName=Ud;var T$="MenuAnchor",ub=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=eg(r);return o.jsx(Kw,{...s,...n,ref:e})});ub.displayName=T$;var db="MenuPortal",[A$,z2]=Ia(db,{forceMount:void 0}),H2=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=ja(db,e);return o.jsx(A$,{scope:e,forceMount:r,children:o.jsx(Na,{present:r||i.open,children:o.jsx(dp,{asChild:!0,container:s,children:n})})})};H2.displayName=db;var Nn="MenuContent",[S$,hb]=Ia(Nn),W2=y.forwardRef((t,e)=>{const r=z2(Nn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=ja(Nn,t.__scopeMenu),a=qd(Nn,t.__scopeMenu);return o.jsx(fd.Provider,{scope:t.__scopeMenu,children:o.jsx(Na,{present:n||i.open,children:o.jsx(fd.Slot,{scope:t.__scopeMenu,children:a.modal?o.jsx(R$,{...s,ref:e}):o.jsx(I$,{...s,ref:e})})})})}),R$=y.forwardRef((t,e)=>{const r=ja(Nn,t.__scopeMenu),n=y.useRef(null),s=ut(e,n);return y.useEffect(()=>{const i=n.current;if(i)return D2(i)},[]),o.jsx(fb,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:xe(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),I$=y.forwardRef((t,e)=>{const r=ja(Nn,t.__scopeMenu);return o.jsx(fb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),fb=y.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:x,...p}=t,b=ja(Nn,r),E=qd(Nn,r),w=eg(r),C=G2(r),I=b$(r),[j,V]=y.useState(null),R=y.useRef(null),_=ut(e,R,b.onContentChange),A=y.useRef(0),k=y.useRef(""),L=y.useRef(0),M=y.useRef(null),P=y.useRef("right"),B=y.useRef(0),z=x?cb:y.Fragment,Q=x?{as:da,allowPinchZoom:!0}:void 0,Z=H=>{var ee,de;const ie=k.current+H,ne=I().filter(G=>!G.disabled),le=document.activeElement,he=(ee=ne.find(G=>G.ref.current===le))==null?void 0:ee.textValue,Ne=ne.map(G=>G.textValue),Me=q$(Ne,ie,he),ue=(de=ne.find(G=>G.textValue===Me))==null?void 0:de.ref.current;(function G(me){k.current=me,window.clearTimeout(A.current),me!==""&&(A.current=window.setTimeout(()=>G(""),1e3))})(ie),ue&&setTimeout(()=>ue.focus())};y.useEffect(()=>()=>window.clearTimeout(A.current),[]),_2();const U=y.useCallback(H=>{var ne,le;return P.current===((ne=M.current)==null?void 0:ne.side)&&$$(H,(le=M.current)==null?void 0:le.area)},[]);return o.jsx(S$,{scope:r,searchRef:k,onItemEnter:y.useCallback(H=>{U(H)&&H.preventDefault()},[U]),onItemLeave:y.useCallback(H=>{var ie;U(H)||((ie=R.current)==null||ie.focus(),V(null))},[U]),onTriggerLeave:y.useCallback(H=>{U(H)&&H.preventDefault()},[U]),pointerGraceTimerRef:L,onPointerGraceIntentChange:y.useCallback(H=>{M.current=H},[]),children:o.jsx(z,{...Q,children:o.jsx(lb,{asChild:!0,trapped:s,onMountAutoFocus:xe(i,H=>{var ie;H.preventDefault(),(ie=R.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:o.jsx(P2,{asChild:!0,...C,dir:E.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:V,onEntryFocus:xe(c,H=>{E.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Jw,{role:"menu","aria-orientation":"vertical","data-state":cj(b.open),"data-radix-menu-content":"",dir:E.dir,...w,...p,ref:_,style:{outline:"none",...p.style},onKeyDown:xe(p.onKeyDown,H=>{const ne=H.target.closest("[data-radix-menu-content]")===H.currentTarget,le=H.ctrlKey||H.altKey||H.metaKey,he=H.key.length===1;ne&&(H.key==="Tab"&&H.preventDefault(),!le&&he&&Z(H.key));const Ne=R.current;if(H.target!==Ne||!v$.includes(H.key))return;H.preventDefault();const ue=I().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);q2.includes(H.key)&&ue.reverse(),B$(ue)}),onBlur:xe(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(A.current),k.current="")}),onPointerMove:xe(t.onPointerMove,md(H=>{const ie=H.target,ne=B.current!==H.clientX;if(H.currentTarget.contains(ie)&&ne){const le=H.clientX>B.current?"right":"left";P.current=le,B.current=H.clientX}}))})})})})})})});W2.displayName=Nn;var j$="MenuGroup",mb=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx($e.div,{role:"group",...n,ref:e})});mb.displayName=j$;var P$="MenuLabel",Q2=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx($e.div,{...n,ref:e})});Q2.displayName=P$;var zm="MenuItem",yN="menu.itemSelect",tg=y.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=y.useRef(null),a=qd(zm,t.__scopeMenu),l=hb(zm,t.__scopeMenu),c=ut(e,i),u=y.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const m=new CustomEvent(yN,{bubbles:!0,cancelable:!0});f.addEventListener(yN,g=>n==null?void 0:n(g),{once:!0}),Ix(f,m),m.defaultPrevented?u.current=!1:a.onClose()}};return o.jsx(Y2,{...s,ref:c,disabled:r,onClick:xe(t.onClick,d),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:xe(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:xe(t.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||gv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});tg.displayName=zm;var Y2=y.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,a=hb(zm,r),l=G2(r),c=y.useRef(null),u=ut(e,c),[d,f]=y.useState(!1),[m,g]=y.useState("");return y.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[i.children]),o.jsx(fd.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:o.jsx(k2,{asChild:!0,...l,focusable:!n,children:o.jsx($e.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:xe(t.onPointerMove,md(x=>{n?a.onItemLeave(x):(a.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xe(t.onPointerLeave,md(x=>a.onItemLeave(x))),onFocus:xe(t.onFocus,()=>f(!0)),onBlur:xe(t.onBlur,()=>f(!1))})})})}),k$="MenuCheckboxItem",K2=y.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return o.jsx(tj,{scope:t.__scopeMenu,checked:r,children:o.jsx(tg,{role:"menuitemcheckbox","aria-checked":Hm(r)?"mixed":r,...s,ref:e,"data-state":gb(r),onSelect:xe(s.onSelect,()=>n==null?void 0:n(Hm(r)?!0:!r),{checkForDefaultPrevented:!1})})})});K2.displayName=k$;var J2="MenuRadioGroup",[M$,D$]=Ia(J2,{value:void 0,onValueChange:()=>{}}),X2=y.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=Nr(n);return o.jsx(M$,{scope:t.__scopeMenu,value:r,onValueChange:i,children:o.jsx(mb,{...s,ref:e})})});X2.displayName=J2;var Z2="MenuRadioItem",ej=y.forwardRef((t,e)=>{const{value:r,...n}=t,s=D$(Z2,t.__scopeMenu),i=r===s.value;return o.jsx(tj,{scope:t.__scopeMenu,checked:i,children:o.jsx(tg,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":gb(i),onSelect:xe(n.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,r)},{checkForDefaultPrevented:!1})})})});ej.displayName=Z2;var pb="MenuItemIndicator",[tj,O$]=Ia(pb,{checked:!1}),rj=y.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=O$(pb,r);return o.jsx(Na,{present:n||Hm(i.checked)||i.checked===!0,children:o.jsx($e.span,{...s,ref:e,"data-state":gb(i.checked)})})});rj.displayName=pb;var L$="MenuSeparator",nj=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx($e.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});nj.displayName=L$;var F$="MenuArrow",sj=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=eg(r);return o.jsx(Xw,{...s,...n,ref:e})});sj.displayName=F$;var V$="MenuSub",[eQ,ij]=Ia(V$),lu="MenuSubTrigger",oj=y.forwardRef((t,e)=>{const r=ja(lu,t.__scopeMenu),n=qd(lu,t.__scopeMenu),s=ij(lu,t.__scopeMenu),i=hb(lu,t.__scopeMenu),a=y.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=y.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return y.useEffect(()=>d,[d]),y.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(ub,{asChild:!0,...u,children:o.jsx(Y2,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":cj(r.open),...t,ref:Rx(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:xe(t.onPointerMove,md(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!r.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:xe(t.onPointerLeave,md(f=>{var g,x;d();const m=(g=r.content)==null?void 0:g.getBoundingClientRect();if(m){const p=(x=r.content)==null?void 0:x.dataset.side,b=p==="right",E=b?-5:5,w=m[b?"left":"right"],C=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+E,y:f.clientY},{x:w,y:m.top},{x:C,y:m.top},{x:C,y:m.bottom},{x:w,y:m.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:xe(t.onKeyDown,f=>{var g;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||x$[n.dir].includes(f.key)&&(r.onOpenChange(!0),(g=r.content)==null||g.focus(),f.preventDefault())})})})});oj.displayName=lu;var aj="MenuSubContent",lj=y.forwardRef((t,e)=>{const r=z2(Nn,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=ja(Nn,t.__scopeMenu),a=qd(Nn,t.__scopeMenu),l=ij(aj,t.__scopeMenu),c=y.useRef(null),u=ut(e,c);return o.jsx(fd.Provider,{scope:t.__scopeMenu,children:o.jsx(Na,{present:n||i.open,children:o.jsx(fd.Slot,{scope:t.__scopeMenu,children:o.jsx(fb,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:xe(t.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:xe(t.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:xe(t.onKeyDown,d=>{var g;const f=d.currentTarget.contains(d.target),m=w$[a.dir].includes(d.key);f&&m&&(i.onOpenChange(!1),(g=l.trigger)==null||g.focus(),d.preventDefault())})})})})})});lj.displayName=aj;function cj(t){return t?"open":"closed"}function Hm(t){return t==="indeterminate"}function gb(t){return Hm(t)?"indeterminate":t?"checked":"unchecked"}function B$(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function U$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function q$(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let a=U$(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function G$(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,d=e[a].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function $$(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return G$(r,e)}function md(t){return e=>e.pointerType==="mouse"?t(e):void 0}var z$=$2,H$=ub,W$=H2,Q$=W2,Y$=mb,K$=Q2,J$=tg,X$=K2,Z$=X2,ez=ej,tz=rj,rz=nj,nz=sj,sz=oj,iz=lj,rg="Menubar",[yv,oz,az]=Ed(rg),[uj,tQ]=Cd(rg,[az,Xp]),Vr=C$(),dj=Xp(),[lz,yb]=uj(rg),hj=y.forwardRef((t,e)=>{const{__scopeMenubar:r,value:n,onValueChange:s,defaultValue:i,loop:a=!0,dir:l,...c}=t,u=Kp(l),d=dj(r),[f="",m]=Wu({prop:n,onChange:s,defaultProp:i}),[g,x]=y.useState(null);return o.jsx(lz,{scope:r,value:f,onMenuOpen:y.useCallback(p=>{m(p),x(p)},[m]),onMenuClose:y.useCallback(()=>m(""),[m]),onMenuToggle:y.useCallback(p=>{m(b=>b?"":p),x(p)},[m]),dir:u,loop:a,children:o.jsx(yv.Provider,{scope:r,children:o.jsx(yv.Slot,{scope:r,children:o.jsx(P2,{asChild:!0,...d,orientation:"horizontal",loop:a,dir:u,currentTabStopId:g,onCurrentTabStopIdChange:x,children:o.jsx($e.div,{role:"menubar",...c,ref:e})})})})})});hj.displayName=rg;var vb="MenubarMenu",[cz,fj]=uj(vb),mj=t=>{const{__scopeMenubar:e,value:r,...n}=t,s=ia(),i=r||s||"LEGACY_REACT_AUTO_VALUE",a=yb(vb,e),l=Vr(e),c=y.useRef(null),u=y.useRef(!1),d=a.value===i;return y.useEffect(()=>{d||(u.current=!1)},[d]),o.jsx(cz,{scope:e,value:i,triggerId:ia(),triggerRef:c,contentId:ia(),wasKeyboardTriggerOpenRef:u,children:o.jsx(z$,{...l,open:d,onOpenChange:f=>{f||a.onMenuClose()},modal:!1,dir:a.dir,...n})})};mj.displayName=vb;var vv="MenubarTrigger",pj=y.forwardRef((t,e)=>{const{__scopeMenubar:r,disabled:n=!1,...s}=t,i=dj(r),a=Vr(r),l=yb(vv,r),c=fj(vv,r),u=y.useRef(null),d=ut(e,u,c.triggerRef),[f,m]=y.useState(!1),g=l.value===c.value;return o.jsx(yv.ItemSlot,{scope:r,value:c.value,disabled:n,children:o.jsx(k2,{asChild:!0,...i,focusable:!n,tabStopId:c.value,children:o.jsx(H$,{asChild:!0,...a,children:o.jsx($e.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":g,"aria-controls":g?c.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":g?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:d,onPointerDown:xe(t.onPointerDown,x=>{!n&&x.button===0&&x.ctrlKey===!1&&(l.onMenuOpen(c.value),g||x.preventDefault())}),onPointerEnter:xe(t.onPointerEnter,()=>{var p;!!l.value&&!g&&(l.onMenuOpen(c.value),(p=u.current)==null||p.focus())}),onKeyDown:xe(t.onKeyDown,x=>{n||(["Enter"," "].includes(x.key)&&l.onMenuToggle(c.value),x.key==="ArrowDown"&&l.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(x.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,x.preventDefault()))}),onFocus:xe(t.onFocus,()=>m(!0)),onBlur:xe(t.onBlur,()=>m(!1))})})})})});pj.displayName=vv;var uz="MenubarPortal",gj=t=>{const{__scopeMenubar:e,...r}=t,n=Vr(e);return o.jsx(W$,{...n,...r})};gj.displayName=uz;var xv="MenubarContent",yj=y.forwardRef((t,e)=>{const{__scopeMenubar:r,align:n="start",...s}=t,i=Vr(r),a=yb(xv,r),l=fj(xv,r),c=oz(r),u=y.useRef(!1);return o.jsx(Q$,{id:l.contentId,"aria-labelledby":l.triggerId,"data-radix-menubar-content":"",...i,...s,ref:e,align:n,onCloseAutoFocus:xe(t.onCloseAutoFocus,d=>{var m;!!!a.value&&!u.current&&((m=l.triggerRef.current)==null||m.focus()),u.current=!1,d.preventDefault()}),onFocusOutside:xe(t.onFocusOutside,d=>{const f=d.target;c().some(g=>{var x;return(x=g.ref.current)==null?void 0:x.contains(f)})&&d.preventDefault()}),onInteractOutside:xe(t.onInteractOutside,()=>{u.current=!0}),onEntryFocus:d=>{l.wasKeyboardTriggerOpenRef.current||d.preventDefault()},onKeyDown:xe(t.onKeyDown,d=>{if(["ArrowRight","ArrowLeft"].includes(d.key)){const f=d.target,m=f.hasAttribute("data-radix-menubar-subtrigger"),g=f.closest("[data-radix-menubar-content]")!==d.currentTarget,p=(a.dir==="rtl"?"ArrowRight":"ArrowLeft")===d.key;if(!p&&m||g&&p)return;let w=c().filter(j=>!j.disabled).map(j=>j.value);p&&w.reverse();const C=w.indexOf(l.value);w=a.loop?_z(w,C+1):w.slice(C+1);const[I]=w;I&&a.onMenuOpen(I)}},{checkForDefaultPrevented:!1}),style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});yj.displayName=xv;var dz="MenubarGroup",hz=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(Y$,{...s,...n,ref:e})});hz.displayName=dz;var fz="MenubarLabel",vj=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(K$,{...s,...n,ref:e})});vj.displayName=fz;var mz="MenubarItem",xj=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(J$,{...s,...n,ref:e})});xj.displayName=mz;var pz="MenubarCheckboxItem",wj=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(X$,{...s,...n,ref:e})});wj.displayName=pz;var gz="MenubarRadioGroup",yz=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(Z$,{...s,...n,ref:e})});yz.displayName=gz;var vz="MenubarRadioItem",bj=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(ez,{...s,...n,ref:e})});bj.displayName=vz;var xz="MenubarItemIndicator",Ej=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(tz,{...s,...n,ref:e})});Ej.displayName=xz;var wz="MenubarSeparator",Cj=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(rz,{...s,...n,ref:e})});Cj.displayName=wz;var bz="MenubarArrow",Ez=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(nz,{...s,...n,ref:e})});Ez.displayName=bz;var Cz="MenubarSubTrigger",Nj=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(sz,{"data-radix-menubar-subtrigger":"",...s,...n,ref:e})});Nj.displayName=Cz;var Nz="MenubarSubContent",_j=y.forwardRef((t,e)=>{const{__scopeMenubar:r,...n}=t,s=Vr(r);return o.jsx(iz,{...s,"data-radix-menubar-content":"",...n,ref:e,style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});_j.displayName=Nz;function _z(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Tj=hj,Tz=mj,Aj=pj,Az=gj,Sj=yj,Rj=vj,Ij=xj,jj=wj,Pj=bj,kj=Ej,Mj=Cj,Dj=Nj,Oj=_j;const Sz=Tz,Lj=y.forwardRef(({className:t,...e},r)=>o.jsx(Tj,{ref:r,className:ot("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",t),...e}));Lj.displayName=Tj.displayName;const Fj=y.forwardRef(({className:t,...e},r)=>o.jsx(Aj,{ref:r,className:ot("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t),...e}));Fj.displayName=Aj.displayName;const Rz=y.forwardRef(({className:t,inset:e,children:r,...n},s)=>o.jsxs(Dj,{ref:s,className:ot("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",t),...n,children:[r,o.jsx(A3,{className:"ml-auto h-4 w-4"})]}));Rz.displayName=Dj.displayName;const Iz=y.forwardRef(({className:t,...e},r)=>o.jsx(Oj,{ref:r,className:ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Iz.displayName=Oj.displayName;const Vj=y.forwardRef(({className:t,align:e="start",alignOffset:r=-4,sideOffset:n=8,...s},i)=>o.jsx(Az,{children:o.jsx(Sj,{ref:i,align:e,alignOffset:r,sideOffset:n,className:ot("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));Vj.displayName=Sj.displayName;const Bj=y.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(Ij,{ref:n,className:ot("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));Bj.displayName=Ij.displayName;const jz=y.forwardRef(({className:t,children:e,checked:r,...n},s)=>o.jsxs(jj,{ref:s,className:ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(kj,{children:o.jsx(TA,{className:"h-4 w-4"})})}),e]}));jz.displayName=jj.displayName;const Pz=y.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(Pj,{ref:n,className:ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(kj,{children:o.jsx(S3,{className:"h-2 w-2 fill-current"})})}),e]}));Pz.displayName=Pj.displayName;const kz=y.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(Rj,{ref:n,className:ot("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));kz.displayName=Rj.displayName;const Mz=y.forwardRef(({className:t,...e},r)=>o.jsx(Mj,{ref:r,className:ot("-mx-1 my-1 h-px bg-muted",t),...e}));Mz.displayName=Mj.displayName;const Dz=({user:t,handleLogout:e,navigate:r})=>{const[n,s]=y.useState(!1),[i,a]=y.useState({name:t.name,mobileNumber:t.mobileNumber||""});y.useEffect(()=>{n&&a({name:t.name,mobileNumber:t.mobileNumber||""})},[n,t.name,t.mobileNumber]);const l=()=>{s(!0)},c=()=>{console.log("Saving profile:",i),s(!1)},u=()=>{a({name:t.name,mobileNumber:t.mobileNumber||""}),s(!1)},d=f=>{if(f==="logout")e();else if(f==="profile")l();else{const m=oN.find(g=>g.key===f);m&&r(m.route)}};return o.jsxs(o.Fragment,{children:[o.jsx(Lj,{children:o.jsxs(Sz,{children:[o.jsx(Fj,{className:"bg-transparent text-black border border-white",children:"Menu"}),o.jsx(Vj,{children:oN.filter(f=>f.roles.includes(t.role)).map(f=>{const m=f.icon;return o.jsxs(Bj,{className:f.colorClass+" flex gap-2 items-center",onClick:()=>d(f.key),children:[o.jsx(m,{className:"w-4 h-4"}),f.label]},f.key)})})]})}),n&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 grid place-items-center p-4",children:o.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl max-w-sm w-full",children:[o.jsx("div",{className:"p-6 border-b border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit Profile"}),o.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(hs,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),o.jsx(Se,{value:i.name,onChange:f=>a({...i,name:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter your name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-700/30 border border-gray-600 rounded-md",children:[o.jsx(_f,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-300 text-sm",children:t.email})]}),o.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Email cannot be changed for security reasons"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),o.jsx(Se,{value:i.mobileNumber,onChange:f=>a({...i,mobileNumber:f.target.value}),className:"w-full bg-gray-700/50 border-gray-600 text-white",placeholder:"Enter mobile number",type:"tel"})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(Te,{onClick:c,className:"flex-1 bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-700 hover:to-cyan-800",children:"Save Changes"}),o.jsx(Te,{onClick:u,variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"})]})]})]})})]})};function Dr({className:t,...e}){return o.jsx("div",{className:ot("animate-pulse rounded-md bg-muted",t),...e})}const Oz=()=>o.jsxs("div",{className:"flex items-center justify-between px-4 py-4 mb-4",children:[o.jsx(Dr,{className:"h-8 w-32 rounded"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Dr,{className:"h-8 w-20 rounded"}),o.jsx(Dr,{className:"h-8 w-20 rounded"}),o.jsx(Dr,{className:"h-8 w-20 rounded"})]})]}),Lz=()=>o.jsxs("div",{className:"mb-6 bg-gray-900/80 backdrop-blur-sm border border-red-900/30 text-center relative overflow-hidden rounded-2xl",children:[o.jsxs("div",{className:"flex flex-col items-center p-6",children:[o.jsx(Dr,{className:"h-16 w-16 rounded-full mb-2"}),o.jsx(Dr,{className:"h-6 w-40 mb-2"}),o.jsx(Dr,{className:"h-4 w-56 mb-2"})]}),o.jsx("div",{className:"px-6 pb-4",children:o.jsx(Dr,{className:"h-4 w-32 mx-auto"})})]}),Fz=()=>o.jsxs("div",{className:"flex gap-4 mb-6 justify-center",children:[o.jsx(Dr,{className:"h-8 w-24 rounded"}),o.jsx(Dr,{className:"h-8 w-24 rounded"}),o.jsx(Dr,{className:"h-8 w-24 rounded"})]}),Vz=()=>o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 via-black/80 to-red-950/90 border border-red-900/40 rounded-2xl p-6 min-h-[220px] shadow-2xl mb-6",children:[o.jsx(Dr,{className:"h-6 w-40 mb-4"}),o.jsx(Dr,{className:"h-4 w-56 mb-4"}),o.jsx(Dr,{className:"h-4 w-full rounded mb-2"}),o.jsx(Dr,{className:"h-8 w-32 mt-6 mx-auto"})]}),Bz=({reward:t,onClose:e})=>{const r=Xn(),[n,s]=y.useState(!0),[i,a]=y.useState(!0);y.useEffect(()=>{const u=setTimeout(()=>s(!1),5e3),d=setTimeout(()=>a(!1),3e3);return()=>{clearTimeout(u),clearTimeout(d)}},[]);const l=u=>{switch(u){case"percentage":return"";case"fixed_amount":return"";case"free_item":return"";default:return""}},c=u=>{switch(u){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:[n&&o.jsx(d2,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:300,recycle:!1,colors:["#ef4444","#fff","#facc15","#ff9800","#a3e635","#8b5cf6"]}),i&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[o.jsx("div",{className:"w-96 h-96 border-4 border-red-500/30 rounded-full animate-ping"}),o.jsx("div",{className:"absolute w-80 h-80 border-4 border-yellow-500/30 rounded-full animate-ping",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"absolute w-64 h-64 border-4 border-green-500/30 rounded-full animate-ping",style:{animationDelay:"1s"}})]})}),o.jsxs("div",{className:"relative z-10 bg-gradient-to-br from-gray-900/95 to-red-900/95 border border-red-800/50 rounded-3xl p-8 max-w-md mx-4 text-center shadow-2xl",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:l(t.rewardType)}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:" Congratulations! "}),o.jsx("p",{className:"text-gray-300 text-lg",children:"You've earned your reward!"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-800/50 to-red-800/50 border border-red-700/50 rounded-2xl p-6 mb-6",children:[o.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:t.rewardDescription}),o.jsx("div",{className:"text-gray-300 mb-4",children:t.settingsSnapshot.descriptionMessage}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:t.rewardType})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:t.rewardValue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Goal:"}),o.jsxs("span",{className:"text-white",children:[t.settingsSnapshot.purchaseLimit," purchases"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Earned:"}),o.jsx("span",{className:"text-white",children:t.createdAt.toDate().toLocaleDateString()})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(Te,{onClick:()=>r("/rewards"),className:`w-full bg-gradient-to-r ${c(t.rewardType)} hover:opacity-90 text-white font-semibold py-3 text-lg`,children:[o.jsx(st,{className:"w-5 h-5 mr-2"}),"View All Rewards"]}),o.jsx(Te,{onClick:e,variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white",children:"Continue Shopping"})]}),o.jsx("div",{className:"mt-6 flex items-center justify-center",children:o.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-600 to-yellow-700 border border-yellow-500 rounded-full",children:[o.jsx(Ux,{className:"w-4 h-4 mr-2 text-yellow-200"}),o.jsx("span",{className:"text-yellow-100 text-sm font-medium",children:"ACHIEVEMENT UNLOCKED"})]})})]})]})},Uz=({totalUsers:t,customers:e,activeUsers:r,totalRewards:n,totalOffers:s,activeOffers:i,recentUsers:a})=>o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"}),o.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"All registered users"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),o.jsx("div",{className:"text-green-300 text-lg",children:"Customers"}),o.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Loyalty program members"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),o.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-yellow-400 mb-2",children:n}),o.jsx("div",{className:"text-yellow-300 text-lg",children:"Total Rewards"}),o.jsx("div",{className:"text-yellow-400 text-sm mt-2",children:"Earned by customers"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-red-400"}),"Offers Status"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Total Offers:"}),o.jsx("span",{className:"text-white font-semibold",children:s})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Active Offers:"}),o.jsx("span",{className:"text-green-400 font-semibold",children:i})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Inactive Offers:"}),o.jsx("span",{className:"text-red-400 font-semibold",children:s-i})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 to-indigo-800/50 border border-indigo-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Yl,{className:"w-5 h-5 mr-2 text-indigo-400"}),"User Activity"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Active Rate:"}),o.jsxs("span",{className:"text-white font-semibold",children:[e.length>0?Math.round(r/e.length*100):0,"%"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Avg. Rewards:"}),o.jsx("span",{className:"text-white font-semibold",children:e.length>0?(n/e.length).toFixed(1):0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300",children:"Engagement:"}),o.jsx("span",{className:"text-green-400 font-semibold",children:r>0?"High":"Low"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(qn,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Business Insights"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:[t>0?Math.round(e.length/t*100):0,"%"]}),o.jsx("div",{className:"text-blue-300 text-sm",children:"Customer Conversion"}),o.jsx("div",{className:"text-blue-400 text-xs",children:"Users to Loyalty Members"})]}),o.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-1",children:[e.length>0?Math.round(r/e.length*100):0,"%"]}),o.jsx("div",{className:"text-green-300 text-sm",children:"Customer Engagement"}),o.jsx("div",{className:"text-green-400 text-xs",children:"Active in Last 7 Days"})]}),o.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:[s>0?Math.round(i/s*100):0,"%"]}),o.jsx("div",{className:"text-purple-300 text-sm",children:"Offer Utilization"}),o.jsx("div",{className:"text-purple-400 text-xs",children:"Active vs Total Offers"})]})]})]})]}),qz=({users:t,searchTerm:e,setSearchTerm:r,statusFilter:n,setStatusFilter:s,roleFilter:i,setRoleFilter:a})=>{var V,R,_;const[l,c]=y.useState(null),[u,d]=y.useState(!1),[f,m]=y.useState(!1),[g,x]=y.useState({name:"",email:"",mobileNumber:""}),p=A=>{c(A),d(!0)},b=A=>{A.role==="customer"&&(x({name:A.name,email:A.email,mobileNumber:A.mobileNumber||""}),c(A),m(!0))},E=()=>{console.log("Saving user:",l==null?void 0:l.id,g),m(!1),c(null)},w=t.length,C=t.filter(A=>A.role==="customer"),I=t.filter(A=>A.role==="admin"||A.role==="super_admin"),j=t.filter(A=>A.lastScanAt&&new Date().getTime()-A.lastScanAt.toDate().getTime()<7*24*60*60*1e3);return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-4 sm:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-4 sm:space-y-0",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Lx,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 sm:space-x-2",children:[o.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-blue-400",children:w}),o.jsx("div",{className:"text-blue-300 text-xs",children:"Users"})]}),o.jsxs("div",{className:"bg-green-900/20 border border-green-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-green-400",children:C.length}),o.jsx("div",{className:"text-green-300 text-xs",children:"Customers"})]}),o.jsxs("div",{className:"bg-purple-900/20 border border-purple-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-purple-400",children:I.length}),o.jsx("div",{className:"text-purple-300 text-xs",children:"Admins"})]}),o.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700/30 rounded px-2 py-1 text-center min-w-[45px]",children:[o.jsx("div",{className:"text-sm font-bold text-yellow-400",children:j.length}),o.jsx("div",{className:"text-yellow-300 text-xs",children:"Active"})]})]})]}),o.jsx(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",onClick:()=>{r(""),s("all"),a("all")},children:"Clear Filters"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Users"}),o.jsxs("div",{className:"relative",children:[o.jsx(Vx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{placeholder:"Search by name or email...",value:e,onChange:A=>r(A.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),o.jsxs("select",{value:n,onChange:A=>s(A.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active (Last 7 days)"}),o.jsx("option",{value:"inactive",children:"Inactive"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role Filter"}),o.jsxs("select",{value:i,onChange:A=>a(A.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Roles"}),o.jsx("option",{value:"customer",children:"Customers"}),o.jsx("option",{value:"admin",children:"Admins"}),o.jsx("option",{value:"super_admin",children:"Super Admins"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50",children:o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(Cn,{className:"w-5 h-5 mr-2 text-blue-400"}),"Users (",t.length,")"]})}),o.jsx("div",{className:"block sm:hidden",children:o.jsx("div",{className:"p-4 space-y-4",children:t.map(A=>{var k;return o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-white text-sm font-bold",children:A.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:A.name}),o.jsxs("div",{className:"text-gray-400 text-sm flex items-center",children:[o.jsx(_f,{className:"w-3 h-3 mr-1"}),A.email]})]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":A.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:A.role.replace("_"," ").toUpperCase()})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(zr,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"text-white font-medium",children:A.purchases}),o.jsx("span",{className:"text-gray-400",children:"Stamps"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(tu,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{className:"text-white font-medium",children:((k=A.completedRewards)==null?void 0:k.length)||0}),o.jsx("span",{className:"text-gray-400",children:"Rewards"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qn,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-300 text-sm",children:A.lastScanAt?A.lastScanAt.toDate().toLocaleDateString():"Never"})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.lastScanAt&&new Date().getTime()-A.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50":"bg-gradient-to-r from-gray-900/50 to-gray-800/50 text-gray-300 border border-gray-700/50"}`,children:A.lastScanAt&&new Date().getTime()-A.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})]}),o.jsxs("div",{className:"flex space-x-2 pt-2",children:[o.jsxs(Te,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200 flex-1",onClick:()=>p(A),title:"View user profile",children:[o.jsx(io,{className:"w-4 h-4 mr-1"}),"View"]}),o.jsxs(Te,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200 flex-1",onClick:()=>b(A),disabled:A.role!=="customer",title:A.role!=="customer"?"Only customers can be edited":"Edit customer",children:[o.jsx(Nl,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]},A.id)})})}),o.jsx("div",{className:"hidden sm:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-700/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"User"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Role"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Stamps"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Rewards"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Last Activity"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:t.map(A=>{var k;return o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 transition-colors duration-200",children:[o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-white text-sm font-bold",children:A.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:A.name}),o.jsxs("div",{className:"text-gray-400 text-sm flex items-center",children:[o.jsx(_f,{className:"w-3 h-3 mr-1"}),A.email]})]})]})}),o.jsx("td",{className:"p-4",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${A.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":A.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:A.role.replace("_"," ").toUpperCase()})}),o.jsx("td",{className:"p-4",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${A.lastScanAt&&new Date().getTime()-A.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50":"bg-gradient-to-r from-gray-900/50 to-gray-800/50 text-gray-300 border border-gray-700/50"}`,children:A.lastScanAt&&new Date().getTime()-A.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(zr,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"text-white font-medium",children:A.purchases})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(tu,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{className:"text-white font-medium",children:((k=A.completedRewards)==null?void 0:k.length)||0})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qn,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-300",children:A.lastScanAt?A.lastScanAt.toDate().toLocaleDateString():"Never"})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(Te,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>p(A),title:"View user profile",children:o.jsx(io,{className:"w-4 h-4"})}),o.jsx(Te,{size:"sm",variant:"outline",className:"border-green-600 text-green-400 hover:bg-green-600 hover:text-white transition-all duration-200",onClick:()=>b(A),disabled:A.role!=="customer",title:A.role!=="customer"?"Only customers can be edited":"Edit customer",children:o.jsx(Nl,{className:"w-4 h-4"})})]})})]},A.id)})})]})})]}),u&&l&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl w-full max-w-2xl max-h-[95vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[o.jsx(Cn,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-blue-400"}),"User Profile"]}),o.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-lg mx-auto sm:mx-0",children:o.jsx("span",{className:"text-white text-xl sm:text-2xl font-bold",children:l.name.charAt(0)})}),o.jsxs("div",{className:"text-center sm:text-left",children:[o.jsx("h4",{className:"text-xl sm:text-2xl font-bold text-white",children:l.name}),o.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-2 text-gray-400 mb-2",children:[o.jsx(_f,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:l.email})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.role==="super_admin"?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 text-purple-300 border border-purple-700/50":l.role==="admin"?"bg-gradient-to-r from-blue-900/50 to-blue-800/50 text-blue-300 border border-blue-700/50":"bg-gradient-to-r from-green-900/50 to-green-800/50 text-green-300 border border-green-700/50"}`,children:l.role.replace("_"," ").toUpperCase()})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-800/30 border border-blue-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-blue-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(zr,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),(()=>{var k;const A=((k=l.completedRewards)==null?void 0:k.reduce((L,M)=>{var P;return L+(((P=M.scanHistory)==null?void 0:P.length)||0)},0))||0;return Math.max(l.purchases||0,A)})()]}),o.jsx("div",{className:"text-blue-300 text-xs sm:text-sm",children:"Lifetime Stamps"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/30 border border-green-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-green-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(tu,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),((V=l.completedRewards)==null?void 0:V.filter(A=>{var k,L;return((k=A.scanHistory)==null?void 0:k.length)>=(((L=A.offerSnapshot)==null?void 0:L.stampRequirement)||0)}).length)||0]}),o.jsx("div",{className:"text-green-300 text-xs sm:text-sm",children:"Completed Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/30 border border-purple-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-purple-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(Yl,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),((R=l.completedRewards)==null?void 0:R.filter(A=>{var k,L;return((k=A.scanHistory)==null?void 0:k.length)<(((L=A.offerSnapshot)==null?void 0:L.stampRequirement)||0)}).length)||0]}),o.jsx("div",{className:"text-purple-300 text-xs sm:text-sm",children:"In-Progress Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 to-yellow-800/30 border border-yellow-700/30 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-yellow-400 mb-1 sm:mb-2 flex items-center justify-center",children:[o.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),((_=l.completedRewards)==null?void 0:_.filter(A=>A.claimedAt).length)||0]}),o.jsx("div",{className:"text-yellow-300 text-xs sm:text-sm",children:"Redeemed Rewards"})]})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("h5",{className:"text-base sm:text-lg font-semibold text-white flex items-center",children:[o.jsx(Yl,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-yellow-400"}),"Activity Details"]}),o.jsx("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-3 sm:p-4",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-1 flex items-center",children:[o.jsx(Dx,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Member Since"]}),o.jsx("div",{className:"text-white font-medium text-sm sm:text-base",children:l.createdAt.toDate().toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-1 flex items-center",children:[o.jsx(qn,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Last Activity"]}),o.jsx("div",{className:"text-white font-medium text-sm sm:text-base",children:l.lastScanAt?l.lastScanAt.toDate().toLocaleDateString():"Never"})]})]})}),l.mobileNumber&&o.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-2 flex items-center",children:[o.jsx(k3,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Contact Number"]}),o.jsx("div",{className:"text-white text-sm sm:text-base",children:l.mobileNumber})]}),l.role==="customer"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-700/30 to-blue-800/30 border border-blue-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-3 flex items-center",children:[o.jsx(zr,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Current In-Progress Rewards"]}),l.completedRewards&&l.completedRewards.filter(A=>{var k,L;return((k=A.scanHistory)==null?void 0:k.length)<(((L=A.offerSnapshot)==null?void 0:L.stampRequirement)||0)}).length>0?o.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(A=>{var k,L;return((k=A.scanHistory)==null?void 0:k.length)<(((L=A.offerSnapshot)==null?void 0:L.stampRequirement)||0)}).map((A,k)=>{var B,z,Q;const L=((B=A.scanHistory)==null?void 0:B.length)||0,M=((z=A.offerSnapshot)==null?void 0:z.stampRequirement)||0,P=M>0?Math.min(L/M*100,100):0;return o.jsxs("div",{className:"bg-blue-800/20 rounded p-3 border border-blue-700/30",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("div",{className:"text-white font-medium text-xs sm:text-sm",children:((Q=A.offerSnapshot)==null?void 0:Q.offerName)||"Loyalty Reward"}),o.jsxs("span",{className:"text-blue-300 text-xs",children:[L,"/",M," stamps"]})]}),o.jsx("div",{className:"w-full bg-blue-600/30 rounded-full h-2 mb-2",children:o.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${P}%`}})}),o.jsxs("div",{className:"text-blue-300 text-xs",children:["Started:"," ",A.createdAt.toDate().toLocaleDateString()]})]},k)})}):o.jsx("div",{className:"text-gray-400 text-xs sm:text-sm italic",children:"No rewards in progress"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-700/30 to-green-800/30 border border-green-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-3 flex items-center",children:[o.jsx(st,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Available Rewards to Redeem"]}),(()=>{var L;const k=(((L=l.completedRewards)==null?void 0:L.filter(M=>{var P,B;return((P=M.scanHistory)==null?void 0:P.length)>=((B=M.offerSnapshot)==null?void 0:B.stampRequirement)}))||[]).filter(M=>!M.claimedAt);return console.log(k),k.length>0?o.jsx("div",{className:"space-y-3",children:k.map((M,P)=>{var B;return o.jsxs("div",{className:"bg-green-800/20 rounded p-3 border border-green-700/30",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("div",{className:"text-white font-medium text-xs sm:text-sm",children:((B=M.offerSnapshot)==null?void 0:B.offerName)||"Loyalty Reward"}),o.jsx("span",{className:"text-green-300 text-xs",children:"Ready to Redeem"})]}),o.jsx("div",{className:"text-green-300 text-xs mb-2",children:M.rewardDescription||"No description"}),o.jsxs("div",{className:"text-green-300 text-xs",children:["Completed:"," ",M.createdAt.toDate().toLocaleDateString()]})]},P)})}):o.jsx("div",{className:"text-gray-400 text-xs sm:text-sm italic",children:"No rewards ready to redeem"})})()]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-700/30 to-purple-800/30 border border-purple-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-3 flex items-center",children:[o.jsx(tu,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Already Redeemed Rewards"]}),l.completedRewards&&l.completedRewards.filter(A=>A.claimedAt).length>0?o.jsx("div",{className:"space-y-3",children:l.completedRewards.filter(A=>A.claimedAt).map((A,k)=>{var L,M;return o.jsxs("div",{className:"bg-purple-800/20 rounded p-3 border border-purple-700/30",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("div",{className:"text-white font-medium text-xs sm:text-sm",children:((L=A.offerSnapshot)==null?void 0:L.offerName)||"Loyalty Reward"}),o.jsx("span",{className:"text-purple-300 text-xs",children:"Redeemed"})]}),o.jsx("div",{className:"text-purple-300 text-xs mb-2",children:((M=A.offerSnapshot)==null?void 0:M.rewardDescription)||"No description"}),o.jsxs("div",{className:"text-purple-300 text-xs",children:["Redeemed:"," ",A.claimedAt?A.claimedAt.toDate().toLocaleDateString():"Unknown"]})]},k)})}):o.jsx("div",{className:"text-gray-400 text-xs sm:text-sm italic",children:"No rewards redeemed yet"})]})]}),l.role!=="customer"&&o.jsxs("div",{className:"bg-gradient-to-br from-gray-700/30 to-gray-800/30 border border-gray-600/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("div",{className:"text-gray-400 text-xs sm:text-sm mb-2 flex items-center",children:[o.jsx(Cn,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Admin Information"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300 text-sm",children:"Role Level:"}),o.jsx("span",{className:"text-white font-medium text-sm",children:l.role==="super_admin"?"Super Administrator":"Administrator"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-300 text-sm",children:"Permissions:"}),o.jsx("span",{className:"text-white font-medium text-sm",children:l.role==="super_admin"?"Full system access":"User and offer management"})]})]})]})]})]})]})}),f&&l&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl w-full max-w-md max-h-[95vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[o.jsx(Nl,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-green-400"}),"Edit Customer"]}),o.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),o.jsx(Se,{value:g.name,onChange:A=>x({...g,name:A.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsx(Se,{value:g.email,onChange:A=>x({...g,email:A.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),o.jsx(Se,{value:g.mobileNumber,onChange:A=>x({...g,mobileNumber:A.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 pt-4",children:[o.jsx(Te,{onClick:E,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200",children:"Save Changes"}),o.jsx(Te,{onClick:()=>m(!1),variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200",children:"Cancel"})]})]})]})})]})},ic=y.forwardRef(({className:t,...e},r)=>o.jsx("textarea",{className:ot("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));ic.displayName="Textarea";const Gz=({offers:t,userRole:e,onOfferCreated:r,currentUser:n})=>{const[s,i]=y.useState(""),[a,l]=y.useState("all"),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[m,g]=y.useState(""),[x,p]=y.useState(""),[b,E]=y.useState(null),[w,C]=y.useState(!1),[I,j]=y.useState(!1),[V,R]=y.useState(null),[_,A]=y.useState(null),[k,L]=y.useState(!1),[M,P]=y.useState({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),[B,z]=y.useState({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),Q=G=>!G.isActive,Z=t.filter(G=>{const me=G.name.toLowerCase().includes(s.toLowerCase())||G.description.toLowerCase().includes(s.toLowerCase()),Ee=a==="all"||a==="active"&&G.isActive||a==="inactive"&&!G.isActive;return me&&Ee});t.length,t.filter(G=>G.isActive).length,t.filter(G=>!G.isActive).length,t.reduce((G,me)=>G+me.stampRequirement,0),y.useEffect(()=>{const G=me=>{me.key==="Escape"&&c&&H()};return c&&document.addEventListener("keydown",G),()=>{document.removeEventListener("keydown",G)}},[c]);const U=async()=>{try{if(f(!0),g(""),p(""),!M.name.trim()){g("Offer name is required");return}if(!M.description.trim()){g("Description is required");return}if(!M.rewardValue.trim()){g("Reward value is required");return}if(!M.rewardDescription.trim()){g("Reward description is required");return}const G={name:M.name.trim(),description:M.description.trim(),stampRequirement:M.stampRequirement,stampsPerScan:M.stampsPerScan,rewardType:M.rewardType,rewardValue:M.rewardValue.trim(),rewardDescription:M.rewardDescription.trim(),isActive:!1,expiresAt:M.expiryDate?Ve.fromDate(new Date(M.expiryDate)):null};if(!n)throw new Error("User context not available");await i2(n,G),p("Offer created successfully!"),r==null||r(),setTimeout(()=>{p("")},5e3),P({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),g("")}catch(G){g(G instanceof Error?G.message:"Failed to create offer. Please try again."),console.error("Error creating offer:",G)}finally{f(!1)}},H=()=>{P({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),u(!1),g(""),p(""),f(!1)},ie=async G=>{const me=G.isActive?"deactivate":"activate",Ee=G.isActive?`Are you sure you want to deactivate "${G.name}"? This will hide it from new users, but existing users can continue collecting stamps.`:`Are you sure you want to activate "${G.name}"? This will make it visible to all customers.`;A({type:me,offer:G,message:Ee}),L(!0)},ne=async()=>{if(!(!_||!n))try{const{offer:G}=_,me=!G.isActive;await KC(n,G.offerId,{isActive:me}),p(`Offer ${me?"activated":"deactivated"} successfully!`),r==null||r(),setTimeout(()=>{p("")},5e3)}catch(G){g(G instanceof Error?G.message:`Failed to ${_.type} offer. Please try again.`),console.error("Error toggling offer status:",G)}finally{ee()}},le=G=>{E(G),z({name:G.name,description:G.description,stampRequirement:G.stampRequirement,stampsPerScan:G.stampsPerScan||1,rewardType:G.rewardType,rewardValue:G.rewardValue,rewardDescription:G.rewardDescription,expiryDate:G.expiresAt?G.expiresAt.toDate().toISOString().split("T")[0]:""}),C(!0)},he=async()=>{try{if(!n||!b){g("User context or offer not available");return}if(j(!0),g(""),!B.name.trim()){g("Offer name is required");return}if(!B.description.trim()){g("Description is required");return}if(!B.rewardValue.trim()){g("Reward value is required");return}if(!B.rewardDescription.trim()){g("Reward description is required");return}const G={name:B.name.trim(),description:B.description.trim(),stampRequirement:B.stampRequirement,stampsPerScan:B.stampsPerScan,rewardType:B.rewardType,rewardValue:B.rewardValue.trim(),rewardDescription:B.rewardDescription.trim(),expiresAt:B.expiryDate?Ve.fromDate(new Date(B.expiryDate)):null};await KC(n,b.offerId,G),p("Offer updated successfully!"),r==null||r(),setTimeout(()=>{p("")},5e3),C(!1),E(null),g("")}catch(G){g(G instanceof Error?G.message:"Failed to update offer. Please try again."),console.error("Error updating offer:",G)}finally{j(!1)}},Ne=()=>{C(!1),E(null),z({name:"",description:"",stampRequirement:1,stampsPerScan:1,rewardType:"percentage",rewardValue:"",rewardDescription:"",expiryDate:""}),g("")},Me=async G=>{const me=`Are you sure you want to delete "${G.name}"? This action cannot be undone and will remove the offer completely.`;A({type:"delete",offer:G,message:me}),L(!0)},ue=async()=>{if(!(!_||!n))try{R(_.offer.offerId),await wq(n,_.offer.offerId),p("Offer deleted successfully!"),r==null||r(),setTimeout(()=>{p("")},5e3)}catch(G){g(G instanceof Error?G.message:"Failed to delete offer. Please try again."),console.error("Error deleting offer:",G)}finally{R(null),ee()}},ee=()=>{L(!1),A(null)},de=()=>{const G=new Date;return G.setFullYear(G.getFullYear()+10),G.toISOString().split("T")[0]};return o.jsxs("div",{className:"space-y-8",children:[e==="admin"&&o.jsx("div",{className:"mb-6 bg-blue-900/20 border border-blue-700/50 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-600/20 rounded-full flex items-center justify-center",children:o.jsx(io,{className:"w-5 h-5 text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-blue-300 font-semibold",children:"Read-Only Access"}),o.jsx("p",{className:"text-blue-200 text-sm",children:"You have view-only access to offers. You can see all offers and their details, but cannot create, edit, or delete them. Contact a super admin for any changes."})]})]})}),o.jsx("div",{className:"bg-gradient-to-r from-blue-900/20 to-blue-800/20 border border-blue-700/30 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"text-blue-400 mt-1",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-blue-300 mb-2",children:"Offer Lifecycle Management"}),o.jsxs("div",{className:"text-sm text-gray-300 space-y-2",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Active Offers:"})," Visible to all customers, new users can start collecting stamps"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Inactive Offers:"})," Hidden from new users, but existing users can continue collecting stamps"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"User Protection:"})," Users who started collecting stamps can complete their rewards even if the offer becomes inactive"]}),e==="super_admin"?o.jsxs("p",{children:[o.jsx("strong",{children:"Admin Control:"})," Use Play button to activate offers, Pause button to deactivate. Only inactive offers can be edited or deleted."]}):o.jsxs("p",{children:[o.jsx("strong",{children:"Read-Only Access:"})," You can view all offers and their details, but cannot modify them. Contact a super admin for changes."]})]})]})]})}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Lx,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]})}),o.jsx(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",onClick:()=>{i(""),l("all")},children:"Clear Filters"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Offers"}),o.jsxs("div",{className:"relative",children:[o.jsx(Vx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{placeholder:"Search by name or description...",value:s,onChange:G=>i(G.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),o.jsxs("select",{value:a,onChange:G=>l(G.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Offers"}),o.jsx("option",{value:"inactive",children:"Inactive Offers"})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs(Te,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 w-full",onClick:()=>u(!0),disabled:e!=="super_admin",title:e!=="super_admin"?"Only super admins can create offers":"Create new loyalty offer",children:[o.jsx(Yh,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50",children:o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-green-400"}),"Loyalty Offers (",Z.length,")"]})}),x&&o.jsx("div",{className:"mx-6 mt-4 bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ds,{className:"w-5 h-5 text-green-400"}),o.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),o.jsx("div",{className:"p-6",children:Z.length>0?o.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Z.map(G=>o.jsxs("div",{className:`bg-gradient-to-br ${G.isActive?"from-green-900/30 to-green-800/30 border-green-700/50":"from-gray-800/30 to-gray-700/30 border-gray-600/50"} border rounded-xl p-6 hover:shadow-lg transition-all duration-300`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-white truncate",children:G.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[!G.isActive&&Q(G)&&o.jsx("div",{className:"text-xs text-yellow-400 bg-yellow-900/30 px-2 py-1 rounded-full border border-yellow-600/30",children:" Users collecting"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${G.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:G.isActive?"ACTIVE":"INACTIVE"})]})]}),o.jsx("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:G.description}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(zr,{className:"w-4 h-4 mr-2"}),"Stamps Required"]}),o.jsx("span",{className:"text-white font-medium",children:G.stampRequirement})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Reward"]}),o.jsx("span",{className:"text-white font-medium",children:G.rewardDescription})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(Yl,{className:"w-4 h-4 mr-2"}),"Type"]}),o.jsx("span",{className:"text-white font-medium capitalize",children:G.rewardType})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[o.jsx(Dx,{className:"w-4 h-4 mr-2"}),"Created"]}),o.jsx("span",{className:"text-white font-medium text-sm",children:G.createdAt.toDate().toLocaleDateString()})]})]}),o.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-gray-600/30",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[e==="super_admin"&&o.jsxs(Te,{size:"sm",variant:"outline",className:`${G.isActive?"border-yellow-600 text-yellow-400 hover:bg-yellow-600/20":"border-green-600 text-green-400 hover:bg-green-600/20"} transition-all duration-200`,onClick:()=>ie(G),title:G.isActive?"Deactivate offer":"Activate offer",children:[G.isActive?o.jsx(Zg,{className:"w-4 h-4"}):o.jsx(e0,{className:"w-4 h-4"}),G.isActive?"Pause":"Play"]}),e==="super_admin"&&!G.isActive&&o.jsxs(Te,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600/20 transition-all duration-200",title:"Edit offer",onClick:()=>le(G),children:[o.jsx(Nl,{className:"w-4 h-4"}),"Edit"]}),e==="super_admin"&&!G.isActive&&o.jsxs(Te,{size:"sm",variant:"outline",className:"border-red-600 text-red-400 hover:bg-red-600/20 transition-all duration-200",title:"Delete offer",onClick:()=>Me(G),children:[o.jsx(t0,{className:"w-4 h-4"}),"Delete"]}),e==="admin"&&o.jsx("div",{className:"text-xs text-gray-400 bg-gray-800/50 px-3 py-2 rounded-lg border border-gray-600/30",children:" Read-only access"})]})})]},G.offerId))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(st,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No offers found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:s||a!=="all"?"Try adjusting your search or filters":"Create your first loyalty offer to get started"}),!s&&a==="all"&&o.jsxs(Te,{className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",onClick:()=>u(!0),disabled:e!=="super_admin",children:[o.jsx(Yh,{className:"w-4 h-4 mr-2"}),"Create First Offer"]})]})})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(Yh,{className:"w-5 h-5 mr-2 text-green-400"}),"Create New Loyalty Offer"]}),o.jsx("button",{onClick:H,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[m&&o.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(U1,{className:"w-5 h-5 text-red-400"}),o.jsx("span",{className:"text-red-300 font-medium",children:m})]})}),x&&o.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ds,{className:"w-5 h-5 text-green-400"}),o.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Basic Information"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Name *"}),o.jsx(Se,{value:M.name,onChange:G=>P({...M,name:G.target.value}),placeholder:"Enter offer name...",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),o.jsx(ic,{value:M.description,onChange:G=>P({...M,description:G.target.value}),placeholder:"Describe the offer...",rows:3,className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 mr-2 text-blue-400"}),"Stamp Requirements"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Stamps Required *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{type:"number",min:"1",value:M.stampRequirement,onChange:G=>P({...M,stampRequirement:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stamps Per Scan *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{type:"number",min:"1",value:M.stampsPerScan,onChange:G=>P({...M,stampsPerScan:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 stamp per scan. Can be increased for special promotions."})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-purple-400"}),"Reward Details"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Type *"}),o.jsxs("select",{value:M.rewardType,onChange:G=>P({...M,rewardType:G.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"}),o.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Value *"}),o.jsx(Se,{value:M.rewardValue,onChange:G=>P({...M,rewardValue:G.target.value}),placeholder:M.rewardType==="percentage"?"20":M.rewardType==="fixed_amount"?"5.00":"Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Description *"}),o.jsx(Se,{value:M.rewardDescription,onChange:G=>P({...M,rewardDescription:G.target.value}),placeholder:"e.g., 20% OFF, $5.00 OFF, Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(qn,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Expiry Settings"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),o.jsx(Se,{type:"date",value:M.expiryDate||de(),onChange:G=>P({...M,expiryDate:G.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 10 years from creation date"})]})]}),o.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(M3,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"text-blue-300 text-sm font-medium",children:"Offer Status: Inactive by Default"})]}),o.jsx("p",{className:"text-blue-200 text-xs mt-1",children:"New offers are created as inactive. Use the Play button to activate them when ready. Only inactive offers can be edited or deleted."})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(Te,{onClick:U,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 transition-all duration-200 flex-1",disabled:!M.name||!M.description||!M.rewardValue||!M.rewardDescription||d,children:d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Yh,{className:"w-4 h-4 mr-2"}),"Create Offer"]})}),o.jsx(Te,{onClick:H,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200 flex-1",disabled:d,children:"Cancel"})]})]})]})}),w&&b&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(Nl,{className:"w-5 h-5 mr-2 text-blue-400"}),"Edit Loyalty Offer"]}),o.jsx("button",{onClick:Ne,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[m&&o.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(U1,{className:"w-5 h-5 text-red-400"}),o.jsx("span",{className:"text-red-300 font-medium",children:m})]})}),x&&o.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ds,{className:"w-5 h-5 text-green-400"}),o.jsx("span",{className:"text-green-300 font-medium",children:x})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Basic Information"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Name *"}),o.jsx(Se,{value:B.name,onChange:G=>z({...B,name:G.target.value}),placeholder:"Enter offer name...",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),o.jsx(ic,{value:B.description,onChange:G=>z({...B,description:G.target.value}),placeholder:"Describe the offer...",rows:3,className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 mr-2 text-blue-400"}),"Stamp Requirements"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Stamps Required *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{type:"number",min:"1",value:B.stampRequirement,onChange:G=>z({...B,stampRequirement:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stamps Per Scan *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{type:"number",min:"1",value:B.stampsPerScan,onChange:G=>z({...B,stampsPerScan:parseInt(G.target.value)||1}),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 stamp per scan. Can be increased for special promotions."})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-purple-400"}),"Reward Details"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Type *"}),o.jsxs("select",{value:B.rewardType,onChange:G=>z({...B,rewardType:G.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"}),o.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Value *"}),o.jsx(Se,{value:B.rewardValue,onChange:G=>z({...B,rewardValue:G.target.value}),placeholder:B.rewardType==="percentage"?"20":B.rewardType==="fixed_amount"?"5.00":"Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reward Description *"}),o.jsx(Se,{value:B.rewardDescription,onChange:G=>z({...B,rewardDescription:G.target.value}),placeholder:"e.g., 20% OFF, $5.00 OFF, Free Coffee",className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(qn,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Expiry Settings"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),o.jsx(Se,{type:"date",value:B.expiryDate||de(),onChange:G=>z({...B,expiryDate:G.target.value}),className:"bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Default: 1 year from creation date"})]})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(Te,{onClick:he,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex-1",disabled:!B.name||!B.description||!B.rewardValue||!B.rewardDescription||I,children:I?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Nl,{className:"w-4 h-4 mr-2"}),"Update Offer"]})}),o.jsx(Te,{onClick:Ne,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200 flex-1",disabled:I,children:"Cancel"})]})]})]})}),k&&_&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl max-w-md w-full max-h-[80vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[_.type==="delete"?o.jsx(t0,{className:"w-5 h-5 mr-2 text-red-400"}):_.type==="activate"?o.jsx(e0,{className:"w-5 h-5 mr-2 text-green-400"}):o.jsx(Zg,{className:"w-5 h-5 mr-2 text-yellow-400"}),_.type==="delete"?"Delete Offer":_.type==="activate"?"Activate Offer":"Deactivate Offer"]}),o.jsx("button",{onClick:ee,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-6 h-6"})})]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("p",{className:"text-gray-300 text-sm",children:_.message}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(Te,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200",onClick:ee,children:"Cancel"}),o.jsxs(Te,{className:`transition-all duration-200 ${_.type==="delete"?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800":_.type==="activate"?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800":"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800"}`,onClick:_.type==="delete"?ue:ne,disabled:d||I,children:[d||I?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):_.type==="delete"?o.jsx(t0,{className:"w-4 h-4 mr-2"}):_.type==="activate"?o.jsx(e0,{className:"w-4 h-4 mr-2"}):o.jsx(Zg,{className:"w-4 h-4 mr-2"}),_.type==="delete"?"Delete Offer":_.type==="activate"?"Activate Offer":"Deactivate Offer"]})]})]})]})})]})},$z=({allUsers:t})=>{var x,p,b,E,w,C,I,j,V;const[e,r]=y.useState(""),[n,s]=y.useState("all"),[i,a]=y.useState(null),[l,c]=y.useState(!1),u=y.useMemo(()=>t.flatMap(R=>(R.completedRewards||[]).map(_=>({..._,userName:R.name,userEmail:R.email,userId:R.id}))),[t]),d=y.useMemo(()=>u.filter(R=>{var k,L;const _=R.userName.toLowerCase().includes(e.toLowerCase())||R.userEmail.toLowerCase().includes(e.toLowerCase())||R.rewardDescription.toLowerCase().includes(e.toLowerCase())||((L=(k=R.offerSnapshot)==null?void 0:k.offerName)==null?void 0:L.toLowerCase().includes(e.toLowerCase())),A=n==="all"||n==="active"&&!R.claimedAt||n==="claimed"&&R.claimedAt;return _&&A}),[u,e,n]),f=R=>{a(R),c(!0)},m=()=>{c(!1),a(null)},g=()=>{r(""),s("all")};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-4 sm:p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-4 sm:space-y-0",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[o.jsx(Lx,{className:"w-5 h-5 mr-2 text-gray-400"}),"Search & Filters"]})}),o.jsx(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",onClick:g,children:"Clear Filters"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Rewards"}),o.jsxs("div",{className:"relative",children:[o.jsx(Vx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Se,{placeholder:"Search by user, reward, or offer...",value:e,onChange:R=>r(R.target.value),className:"pl-10 bg-gray-700/50 border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status Filter"}),o.jsxs("select",{value:n,onChange:R=>s(R.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Rewards"}),o.jsx("option",{value:"claimed",children:"Claimed Rewards"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-green-400"}),"Rewards (",d.length,")"]}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[o.jsxs(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",onClick:()=>window.location.reload(),children:[o.jsx(RA,{className:"w-4 h-4 mr-2"}),"Refresh"]}),o.jsxs(Te,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 w-full sm:w-auto",children:[o.jsx(R3,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})}),o.jsx("div",{className:"block sm:hidden",children:o.jsx("div",{className:"p-4 space-y-4",children:d.map(R=>{var _,A,k;return o.jsxs("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(zs,{className:"h-5 w-5 text-white"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:R.userName}),o.jsx("div",{className:"text-gray-400 text-sm flex items-center",children:o.jsx("span",{className:"truncate",children:R.userEmail})})]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.claimedAt?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50"}`,children:R.claimedAt?o.jsxs(o.Fragment,{children:[o.jsx(ds,{className:"w-3 h-3 mr-1"}),"Claimed"]}):o.jsxs(o.Fragment,{children:[o.jsx(qn,{className:"w-3 h-3 mr-1"}),"Active"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium text-sm",children:R.rewardDescription}),o.jsxs("div",{className:"text-gray-400 text-xs capitalize",children:[R.rewardType,"  ",R.rewardValue]})]}),o.jsx("div",{className:"text-gray-300 text-sm",children:((_=R.offerSnapshot)==null?void 0:_.offerName)||"Unknown Offer"}),o.jsxs("div",{className:"text-xs text-gray-500",children:[((A=R.scanHistory)==null?void 0:A.length)||0," scans "," ",((k=R.scanHistory)==null?void 0:k.reduce((L,M)=>L+(M.stampsEarned||1),0))||0," ","stamps"]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("div",{className:"text-gray-300",children:R.createdAt.toDate().toLocaleDateString()}),o.jsxs(Te,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>f(R),title:"View reward details and scan history",children:[o.jsx(io,{className:"w-4 h-4 mr-1"}),"View"]})]})]},R.rewardId)})})}),o.jsx("div",{className:"hidden sm:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-800/50 border-b border-gray-700/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Reward"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Offer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Earned"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-700/50",children:d.map(R=>{var _,A,k;return o.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:o.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:o.jsx(zs,{className:"h-5 w-5 text-white"})})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-white",children:R.userName}),o.jsx("div",{className:"text-sm text-gray-400",children:R.userEmail})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-white",children:R.rewardDescription}),o.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[R.rewardType,"  ",R.rewardValue]})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-gray-300",children:((_=R.offerSnapshot)==null?void 0:_.offerName)||"Unknown Offer"}),o.jsxs("div",{className:"text-xs text-gray-500",children:[((A=R.scanHistory)==null?void 0:A.length)||0," scans "," ",((k=R.scanHistory)==null?void 0:k.reduce((L,M)=>L+(M.stampsEarned||1),0))||0," ","stamps"]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.claimedAt?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50"}`,children:R.claimedAt?o.jsxs(o.Fragment,{children:[o.jsx(ds,{className:"w-3 h-3 mr-1"}),"Claimed"]}):o.jsxs(o.Fragment,{children:[o.jsx(qn,{className:"w-3 h-3 mr-1"}),"Active"]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:R.createdAt.toDate().toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs(Te,{size:"sm",variant:"outline",className:"border-blue-600 text-blue-400 hover:bg-blue-600 hover:text-white transition-all duration-200",onClick:()=>f(R),title:"View reward details and scan history",children:[o.jsx(io,{className:"w-4 h-4 mr-2"}),"View"]})})]},R.rewardId)})})]})}),d.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(st,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No rewards found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:e||n!=="all"?"Try adjusting your search or filters":"No rewards have been earned yet"}),(e||n!=="all")&&o.jsx(Te,{className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",onClick:g,children:"Clear All Filters"})]})]}),l&&i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl w-full max-w-4xl max-h-[95vh] overflow-y-auto shadow-2xl",children:[o.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/50 to-gray-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[o.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-green-400"}),"Reward Details"]}),o.jsx("button",{onClick:m,className:"text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-full hover:bg-gray-700",children:o.jsx(hs,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(zs,{className:"w-4 h-4 mr-2 text-blue-400"}),"User Information"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Name:"}),o.jsx("span",{className:"text-white",children:i.userName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Email:"}),o.jsx("span",{className:"text-white",children:i.userEmail})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"User ID:"}),o.jsx("span",{className:"text-white font-mono text-xs",children:i.userId})]})]})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Reward Details"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Description:"}),o.jsx("span",{className:"text-white",children:i.rewardDescription})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:i.rewardType})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:i.rewardValue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Status:"}),o.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${i.claimedAt?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-yellow-900/50 text-yellow-300 border border-yellow-700/50"}`,children:i.claimedAt?"Claimed":"Active"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 mr-2 text-purple-400"}),"Offer Information"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Offer Name:"}),o.jsx("span",{className:"text-white",children:((x=i.offerSnapshot)==null?void 0:x.offerName)||"Unknown"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Description:"}),o.jsx("span",{className:"text-white",children:((p=i.offerSnapshot)==null?void 0:p.description)||"No description"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Stamps Required:"}),o.jsx("span",{className:"text-white",children:((b=i.offerSnapshot)==null?void 0:b.stampRequirement)||"Unknown"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Created:"}),o.jsx("span",{className:"text-white",children:i.createdAt.toDate().toLocaleDateString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Claimed:"}),o.jsx("span",{className:"text-white",children:i.claimedAt?i.claimedAt.toDate().toLocaleDateString():"Not claimed yet"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white",children:[((E=i.scanHistory)==null?void 0:E.reduce((R,_)=>R+(_.stampsEarned||1),0))||0," ","/"," ",((w=i.offerSnapshot)==null?void 0:w.stampRequirement)||"?"," ","stamps"]})]})]})]})]}),o.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3 sm:p-4",children:[o.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(qn,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Scan History (",((C=i.scanHistory)==null?void 0:C.length)||0," scans)"]}),o.jsx("div",{className:"mb-4 p-3 bg-gray-700/20 rounded-lg border border-gray-600/30",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold text-white",children:((I=i.scanHistory)==null?void 0:I.length)||0}),o.jsx("div",{className:"text-gray-400 text-xs",children:"Total Scans"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold text-green-400",children:((j=i.scanHistory)==null?void 0:j.reduce((R,_)=>R+(_.stampsEarned||1),0))||0}),o.jsx("div",{className:"text-gray-400 text-xs",children:"Total Stamps"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold text-blue-400",children:((V=i.offerSnapshot)==null?void 0:V.stampRequirement)||0}),o.jsx("div",{className:"text-gray-400 text-xs",children:"Required"})]})]})}),i.scanHistory&&i.scanHistory.length>0?o.jsx("div",{className:"space-y-3",children:i.scanHistory.map((R,_)=>o.jsx("div",{className:"bg-gray-700/30 rounded-lg p-3 border border-gray-600/30",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-medium",children:_+1})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"text-sm font-medium text-white",children:["Scanned by: ",R.scannedBy||"Unknown Admin"]}),o.jsx("div",{className:"text-xs text-gray-400",children:R.timestamp.toDate().toLocaleString()}),o.jsxs("div",{className:"text-xs text-green-400 font-medium",children:["+",R.stampsEarned||1," stamp",R.stampsEarned>1?"s":""," earned"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-xs text-gray-500",children:["Scan #",_+1]}),o.jsx("div",{className:"text-xs text-blue-400 font-medium",children:R.scanId?R.scanId.slice(-8):"N/A"})]})]})},R.scanId||_))}):o.jsxs("div",{className:"text-center py-6 text-gray-400",children:[o.jsx(qn,{className:"w-8 h-8 mx-auto mb-2"}),o.jsx("p",{children:"No scan history available"})]})]})]})]})})]})},zz=({allUsers:t,offers:e})=>{var c,u;const r=y.useMemo(()=>{const d=t.filter(B=>B.role==="customer");t.filter(B=>B.role==="admin"||B.role==="super_admin");const f=d.length,m=d.filter(B=>{var Z;const z=(Z=B.createdAt)==null?void 0:Z.toDate();if(!z)return!1;const Q=new Date;return z.getMonth()===Q.getMonth()&&z.getFullYear()===Q.getFullYear()}).length,g=d.filter(B=>B.lastScanAt&&new Date().getTime()-B.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,x=d.filter(B=>B.lastScanAt&&new Date().getTime()-B.lastScanAt.toDate().getTime()<24*60*60*1e3).length,p=d.flatMap(B=>B.completedRewards||[]),b=p.length,E=p.filter(B=>B.claimedAt).length,w=b-E,C=b>0?(E/b*100).toFixed(1):0,I=e.filter(B=>B.isActive).length,j=e.length>0?(I/e.length*100).toFixed(1):0,V=p.reduce((B,z)=>{var Q;return B+(((Q=z.scanHistory)==null?void 0:Q.length)||0)},0),R=f>0?(V/f).toFixed(1):0,_=new Date,A=new Date(_.getFullYear(),_.getMonth()-1,1),k=new Date(_.getFullYear(),_.getMonth(),1),L=p.filter(B=>{var Q;const z=(Q=B.createdAt)==null?void 0:Q.toDate();return z?z>=k:!1}).length,M=p.filter(B=>{var Q;const z=(Q=B.createdAt)==null?void 0:Q.toDate();return z?z>=A&&z<k:!1}).length,P=M>0?((L-M)/M*100).toFixed(1):L>0?100:0;return{customers:{total:f,newThisMonth:m},activity:{active:g,veryActive:x},rewards:{total:b,claimed:E,active:w,redemptionRate:parseFloat(C)},offers:{total:e.length,active:I,utilization:parseFloat(j)},engagement:{totalStamps:V,avgPerCustomer:parseFloat(R)},growth:{thisMonth:L,lastMonth:M,monthOverMonth:parseFloat(P)}}},[t,e]),n=y.useMemo(()=>e.map(f=>{const m=t.flatMap(b=>(b.completedRewards||[]).filter(E=>{var w;return((w=E.offerSnapshot)==null?void 0:w.offerId)===f.offerId})),g=m.length,x=m.filter(b=>b.claimedAt).length,p=m.reduce((b,E)=>{var w;return b+(((w=E.scanHistory)==null?void 0:w.length)||0)},0);return{...f,totalRewards:g,claimedRewards:x,totalStamps:p,conversionRate:p>0?(g/p*100).toFixed(1):0}}).filter(f=>f.totalStamps>0).sort((f,m)=>m.totalStamps-f.totalStamps).slice(0,5),[e,t]),s=y.useMemo(()=>{const d=t.filter(m=>m.role==="customer");return{new:d.filter(m=>{var p;const g=(p=m.createdAt)==null?void 0:p.toDate();return g?(new Date().getTime()-g.getTime())/(1e3*60*60*24)<=30:!1}).length,active:d.filter(m=>m.lastScanAt&&new Date().getTime()-m.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,returning:d.filter(m=>m.lastScanAt&&new Date().getTime()-m.lastScanAt.toDate().getTime()>=7*24*60*60*1e3&&new Date().getTime()-m.lastScanAt.toDate().getTime()<30*24*60*60*1e3).length,dormant:d.filter(m=>!m.lastScanAt||new Date().getTime()-m.lastScanAt.toDate().getTime()>=30*24*60*60*1e3).length}},[t]),i=d=>d>0?o.jsx(_3,{className:"w-4 h-4 text-green-400"}):d<0?o.jsx(N3,{className:"w-4 h-4 text-red-400"}):o.jsx(j3,{className:"w-4 h-4 text-gray-400"}),a=d=>d>0?"text-green-400":d<0?"text-red-400":"text-gray-400",l=d=>typeof d=="number"?d:parseFloat(d)||0;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:o.jsx(Cn,{className:"w-6 h-6 text-blue-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-blue-300",children:"This Month"}),o.jsxs("div",{className:"text-sm font-medium text-blue-400",children:["+",r.customers.newThisMonth]})]})]}),o.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:r.customers.total.toLocaleString()}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-green-600/20 rounded-lg",children:o.jsx(st,{className:"w-6 h-6 text-green-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-green-300",children:"Redemption Rate"}),o.jsxs("div",{className:"text-sm font-medium text-green-400",children:[r.rewards.redemptionRate,"%"]})]})]}),o.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:r.rewards.total.toLocaleString()}),o.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-purple-600/20 rounded-lg",children:o.jsx(Yl,{className:"w-6 h-6 text-purple-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-purple-300",children:"Active Users"}),o.jsx("div",{className:"text-sm font-medium text-purple-400",children:r.activity.active})]})]}),o.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:r.engagement.avgPerCustomer}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Avg Stamps/Customer"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-2 bg-yellow-600/20 rounded-lg",children:o.jsx(qx,{className:"w-6 h-6 text-yellow-400"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-yellow-300",children:"Month over Month"}),o.jsxs("div",{className:`text-sm font-medium ${a(r.growth.monthOverMonth)}`,children:[i(r.growth.monthOverMonth),Math.abs(parseFloat(r.growth.monthOverMonth)),"%"]})]})]}),o.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:r.growth.thisMonth}),o.jsx("div",{className:"text-yellow-300 text-lg",children:"Rewards This Month"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Cn,{className:"w-5 h-5 mr-2 text-blue-400"}),"Customer Segments"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"New (30 days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.new})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"Active (7 days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.active})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"Returning (30 days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.returning})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-gray-300",children:"Dormant (30+ days)"})]}),o.jsx("div",{className:"text-white font-medium",children:s.dormant})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700/50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:r.customers.total}),o.jsx("div",{className:"text-gray-400 text-sm",children:"Total Customers"})]})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Ux,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Top Performing Offers"]}),o.jsx("div",{className:"space-y-3",children:n.map((d,f)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-full flex items-center justify-center text-xs font-bold text-white",children:f+1}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium text-sm",children:d.name}),o.jsxs("div",{className:"text-gray-400 text-xs",children:[d.totalStamps," stamps collected"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-white font-medium text-sm",children:d.totalRewards}),o.jsxs("div",{className:"text-gray-400 text-xs",children:[d.conversionRate,"% conversion"]})]})]},d.offerId))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-green-800/30 border border-green-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(st,{className:"w-4 h-4 mr-2 text-green-400"}),"Reward Redemption"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Total Earned:"}),o.jsx("span",{className:"text-white font-medium",children:r.rewards.total})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Claimed:"}),o.jsx("span",{className:"text-white font-medium",children:r.rewards.claimed})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Active:"}),o.jsx("span",{className:"text-white font-medium",children:r.rewards.active})]}),o.jsx("div",{className:"pt-2 border-t border-green-700/30",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[r.rewards.redemptionRate,"%"]}),o.jsx("div",{className:"text-green-300 text-sm",children:"Redemption Rate"})]})})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/30 to-blue-800/30 border border-blue-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(Yl,{className:"w-4 h-4 mr-2 text-blue-400"}),"Customer Engagement"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Total Stamps:"}),o.jsx("span",{className:"text-white font-medium",children:r.engagement.totalStamps.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Avg per Customer:"}),o.jsx("span",{className:"text-white font-medium",children:r.engagement.avgPerCustomer})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Very Active:"}),o.jsx("span",{className:"text-white font-medium",children:r.activity.veryActive})]}),o.jsx("div",{className:"pt-2 border-t border-blue-700/30",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.activity.active}),o.jsx("div",{className:"text-blue-300 text-sm",children:"Active This Week"})]})})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/30 to-purple-800/30 border border-purple-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[o.jsx(zr,{className:"w-4 h-4 mr-2 text-purple-400"}),"Offer Utilization"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Total Offers:"}),o.jsx("span",{className:"text-white font-medium",children:r.offers.total})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Active Offers:"}),o.jsx("span",{className:"text-white font-medium",children:r.offers.active})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Utilization:"}),o.jsxs("span",{className:"text-white font-medium",children:[r.offers.utilization,"%"]})]}),o.jsx("div",{className:"pt-2 border-t border-purple-700/30",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-400",children:r.growth.thisMonth}),o.jsx("div",{className:"text-purple-300 text-sm",children:"Rewards This Month"})]})})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Ox,{className:"w-5 h-5 mr-2 text-blue-400"}),"Actionable Business Insights"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-white",children:"Customer Retention"}),o.jsxs("div",{className:"space-y-3",children:[s.dormant>s.active&&o.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-700/50 rounded-lg",children:[o.jsx("div",{className:"text-red-300 font-medium",children:" High Dormant Customer Rate"}),o.jsxs("div",{className:"text-red-200 text-sm mt-1",children:[s.dormant," customers haven't been active in 30+ days. Consider re-engagement campaigns."]})]}),r.rewards.redemptionRate<50&&o.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-700/50 rounded-lg",children:[o.jsx("div",{className:"text-yellow-300 font-medium",children:" Low Reward Redemption"}),o.jsxs("div",{className:"text-yellow-200 text-sm mt-1",children:["Only ",r.rewards.redemptionRate,"% of rewards are being claimed. Review reward attractiveness and communication."]})]}),r.offers.utilization<50&&o.jsxs("div",{className:"p-3 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:[o.jsx("div",{className:"text-blue-300 font-medium",children:" Low Offer Utilization"}),o.jsxs("div",{className:"text-blue-200 text-sm mt-1",children:["Only ",r.offers.utilization,"% of offers are active. Consider deactivating underperforming offers."]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-white",children:"Growth Opportunities"}),o.jsxs("div",{className:"space-y-3",children:[l(r.growth.monthOverMonth)>0&&o.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-700/50 rounded-lg",children:[o.jsx("div",{className:"text-green-300 font-medium",children:" Positive Growth Trend"}),o.jsxs("div",{className:"text-green-200 text-sm mt-1",children:["Rewards increased by ",r.growth.monthOverMonth,"% this month. Current strategies are working well."]})]}),r.customers.newThisMonth>0&&o.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-700/50 rounded-lg",children:[o.jsx("div",{className:"text-green-300 font-medium",children:" New Customer Acquisition"}),o.jsxs("div",{className:"text-green-200 text-sm mt-1",children:[r.customers.newThisMonth," new customers this month. Focus on converting them to active users."]})]}),n.length>0&&o.jsxs("div",{className:"p-3 bg-purple-900/20 border border-purple-700/50 rounded-lg",children:[o.jsx("div",{className:"text-purple-300 font-medium",children:" Top Performing Offer"}),o.jsxs("div",{className:"text-purple-200 text-sm mt-1",children:['"',(c=n[0])==null?void 0:c.name,'" is your best performer with'," ",(u=n[0])==null?void 0:u.totalStamps," stamps. Consider similar offers or promotions."]})]})]})]})]})]})]})},Hz=({user:t})=>{y.useState(!1);const[e,r]=y.useState(!1),[n,s]=y.useState({businessName:"Vape Master",businessDescription:"Premium Vape & E-Liquid Loyalty Program",supportEmail:"support@vapemaster.com",supportPhone:"+1 (555) 123-4567",businessHours:"Mon-Fri: 9AM-9PM, Sat-Sun: 10AM-8PM",timezone:"America/New_York"}),[i,a]=y.useState({defaultStampsPerScan:1,maxStampsPerScan:5,defaultStampRequirement:5,maxStampRequirement:50,allowMultipleRewards:!0,rewardExpiryDays:365,autoAssignDefaultOffer:!0}),[l,c]=y.useState({defaultRewardType:"percentage",defaultRewardValue:"20",defaultRewardDescription:"20% OFF",allowCustomRewards:!0,maxRewardValue:"100",requireApproval:!1}),[u,d]=y.useState({sessionTimeoutHours:24,allowMultiDeviceLogin:!0,requireEmailVerification:!0,maxLoginAttempts:5,lockoutDurationMinutes:30,enableAuditLog:!0}),[f,m]=y.useState({emailNotifications:!0,pushNotifications:!0,rewardReminders:!0,inactivityAlerts:!0,adminAlerts:!0,customerUpdates:!0}),[g,x]=y.useState({primaryColor:"#ef4444",secondaryColor:"#1f2937",accentColor:"#f59e0b",logoUrl:"/logo.png",faviconUrl:"/favicon.ico",enableAnimations:!0,enableDarkMode:!0,customCSS:""}),[p,b]=y.useState({dataRetentionDays:2555,allowDataExport:!0,allowDataDeletion:!0,anonymizeOldData:!1,backupFrequency:"daily",enableAnalytics:!0});y.useEffect(()=>{E()},[]);const E=()=>{try{const j=localStorage.getItem("vm_business_settings");if(j){const V=JSON.parse(j);s(V.system||n),a(V.loyalty||i),c(V.rewards||l),d(V.security||u),m(V.notifications||f),x(V.ui||g),b(V.data||p)}}catch(j){console.error("Error loading settings:",j)}},w=async()=>{r(!0);try{const j={system:n,loyalty:i,rewards:l,security:u,notifications:f,ui:g,data:p,lastUpdated:new Date().toISOString(),updatedBy:t.email};localStorage.setItem("vm_business_settings",JSON.stringify(j)),await dq(t,i.defaultStampRequirement,l.defaultRewardDescription,l.defaultRewardType,l.defaultRewardValue,l.defaultRewardDescription),Ye({title:"Settings Saved",description:"All business settings have been updated successfully!"})}catch{Ye({title:"Save Failed",description:"Failed to save some settings. Please try again.",variant:"destructive"})}finally{r(!1)}},C=()=>{window.confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(s({businessName:"Vape Master",businessDescription:"Premium Vape & E-Liquid Loyalty Program",supportEmail:"support@vapemaster.com",supportPhone:"+1 (555) 123-4567",businessHours:"Mon-Fri: 9AM-9PM, Sat-Sun: 10AM-8PM",timezone:"America/New_York"}),a({defaultStampsPerScan:1,maxStampsPerScan:5,defaultStampRequirement:5,maxStampRequirement:50,allowMultipleRewards:!0,rewardExpiryDays:365,autoAssignDefaultOffer:!0}),c({defaultRewardType:"percentage",defaultRewardValue:"20",defaultRewardDescription:"20% OFF",allowCustomRewards:!0,maxRewardValue:"100",requireApproval:!1}),d({sessionTimeoutHours:24,allowMultiDeviceLogin:!0,requireEmailVerification:!0,maxLoginAttempts:5,lockoutDurationMinutes:30,enableAuditLog:!0}),m({emailNotifications:!0,pushNotifications:!0,rewardReminders:!0,inactivityAlerts:!0,adminAlerts:!0,customerUpdates:!0}),x({primaryColor:"#ef4444",secondaryColor:"#1f2937",accentColor:"#f59e0b",logoUrl:"/logo.png",faviconUrl:"/favicon.ico",enableAnimations:!0,enableDarkMode:!0,customCSS:""}),b({dataRetentionDays:2555,allowDataExport:!0,allowDataDeletion:!0,anonymizeOldData:!1,backupFrequency:"daily",enableAnalytics:!0}),Ye({title:"Settings Reset",description:"All settings have been reset to defaults."}))},I=()=>{const j={system:n,loyalty:i,rewards:l,security:u,notifications:f,ui:g,data:p,exportedAt:new Date().toISOString(),exportedBy:t.email},V=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),R=URL.createObjectURL(V),_=document.createElement("a");_.href=R,_.download=`vm_business_settings_${new Date().toISOString().split("T")[0]}.json`,_.click(),URL.revokeObjectURL(R),Ye({title:"Settings Exported",description:"Business settings have been exported successfully!"})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:o.jsx(mp,{className:"w-6 h-6 text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Business Settings"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Configure your loyalty program and business preferences"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Te,{variant:"outline",onClick:I,className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",children:[o.jsx(q1,{className:"w-4 h-4 mr-2"}),"Export"]}),o.jsxs(Te,{variant:"outline",onClick:C,className:"border-yellow-600 text-yellow-400 hover:bg-yellow-600 hover:text-white",children:[o.jsx(RA,{className:"w-4 h-4 mr-2"}),"Reset"]}),o.jsx(Te,{onClick:w,disabled:e,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:e?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O3,{className:"w-4 h-4 mr-2"}),"Save All Settings"]})})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(AA,{className:"w-5 h-5 mr-2 text-blue-400"}),"Business Information"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Business Name"}),o.jsx(Se,{value:n.businessName,onChange:j=>s({...n,businessName:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Your Business Name"})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Business Description"}),o.jsx(ic,{value:n.businessDescription,onChange:j=>s({...n,businessDescription:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Describe your business and loyalty program",rows:3})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Support Email"}),o.jsx(Se,{value:n.supportEmail,onChange:j=>s({...n,supportEmail:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"email"})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Support Phone"}),o.jsx(Se,{value:n.supportPhone,onChange:j=>s({...n,supportPhone:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1"})]})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Business Hours"}),o.jsx(Se,{value:n.businessHours,onChange:j=>s({...n,businessHours:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"e.g., Mon-Fri: 9AM-9PM, Sat-Sun: 10AM-8PM"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-green-400"}),"Loyalty Program"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Default Stamps/Scan"}),o.jsx(Se,{value:i.defaultStampsPerScan,onChange:j=>a({...i,defaultStampsPerScan:parseInt(j.target.value)||1}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"10"})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Max Stamps/Scan"}),o.jsx(Se,{value:i.maxStampsPerScan,onChange:j=>a({...i,maxStampsPerScan:parseInt(j.target.value)||5}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"20"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Default Stamp Requirement"}),o.jsx(Se,{value:i.defaultStampRequirement,onChange:j=>a({...i,defaultStampRequirement:parseInt(j.target.value)||5}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"100"})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Max Stamp Requirement"}),o.jsx(Se,{value:i.maxStampRequirement,onChange:j=>a({...i,maxStampRequirement:parseInt(j.target.value)||50}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"10",max:"200"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowMultipleRewards",checked:i.allowMultipleRewards,onChange:j=>a({...i,allowMultipleRewards:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"allowMultipleRewards",className:"text-gray-300 text-sm",children:"Allow multiple rewards per offer"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"autoAssignDefaultOffer",checked:i.autoAssignDefaultOffer,onChange:j=>a({...i,autoAssignDefaultOffer:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"autoAssignDefaultOffer",className:"text-gray-300 text-sm",children:"Auto-assign default offer to new users"})]})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Reward Expiry (Days)"}),o.jsx(Se,{value:i.rewardExpiryDays,onChange:j=>a({...i,rewardExpiryDays:parseInt(j.target.value)||365}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"30",max:"3650"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-purple-400"}),"Reward Configuration"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Default Reward Type"}),o.jsxs("select",{value:l.defaultRewardType,onChange:j=>c({...l,defaultRewardType:j.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"}),o.jsx("option",{value:"buy_one_get_one",children:"Buy One Get One"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Default Reward Value"}),o.jsx(Se,{value:l.defaultRewardValue,onChange:j=>c({...l,defaultRewardValue:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"20"})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Max Reward Value"}),o.jsx(Se,{value:l.maxRewardValue,onChange:j=>c({...l,maxRewardValue:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"100"})]})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Default Reward Description"}),o.jsx(Se,{value:l.defaultRewardDescription,onChange:j=>c({...l,defaultRewardDescription:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"20% OFF"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowCustomRewards",checked:l.allowCustomRewards,onChange:j=>c({...l,allowCustomRewards:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"allowCustomRewards",className:"text-gray-300 text-sm",children:"Allow custom reward creation"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"requireApproval",checked:l.requireApproval,onChange:j=>c({...l,requireApproval:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"requireApproval",className:"text-gray-300 text-sm",children:"Require admin approval for rewards"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(Bx,{className:"w-5 h-5 mr-2 text-red-400"}),"Security & Access"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Session Timeout (Hours)"}),o.jsx(Se,{value:u.sessionTimeoutHours,onChange:j=>d({...u,sessionTimeoutHours:parseInt(j.target.value)||24}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"1",max:"168"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Max Login Attempts"}),o.jsx(Se,{value:u.maxLoginAttempts,onChange:j=>d({...u,maxLoginAttempts:parseInt(j.target.value)||5}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"3",max:"10"})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Lockout Duration (Min)"}),o.jsx(Se,{value:u.lockoutDurationMinutes,onChange:j=>d({...u,lockoutDurationMinutes:parseInt(j.target.value)||30}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"15",max:"1440"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowMultiDeviceLogin",checked:u.allowMultiDeviceLogin,onChange:j=>d({...u,allowMultiDeviceLogin:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"allowMultiDeviceLogin",className:"text-gray-300 text-sm",children:"Allow multi-device login"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"requireEmailVerification",checked:u.requireEmailVerification,onChange:j=>d({...u,requireEmailVerification:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"requireEmailVerification",className:"text-gray-300 text-sm",children:"Require email verification"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableAuditLog",checked:u.enableAuditLog,onChange:j=>d({...u,enableAuditLog:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"enableAuditLog",className:"text-gray-300 text-sm",children:"Enable audit logging"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(T3,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Notifications"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"emailNotifications",checked:f.emailNotifications,onChange:j=>m({...f,emailNotifications:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"emailNotifications",className:"text-gray-300 text-sm",children:"Email notifications"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"pushNotifications",checked:f.pushNotifications,onChange:j=>m({...f,pushNotifications:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"pushNotifications",className:"text-gray-300 text-sm",children:"Push notifications"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"rewardReminders",checked:f.rewardReminders,onChange:j=>m({...f,rewardReminders:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"rewardReminders",className:"text-gray-300 text-sm",children:"Reward reminders"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"inactivityAlerts",checked:f.inactivityAlerts,onChange:j=>m({...f,inactivityAlerts:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"inactivityAlerts",className:"text-gray-300 text-sm",children:"Inactivity alerts"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"adminAlerts",checked:f.adminAlerts,onChange:j=>m({...f,adminAlerts:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"adminAlerts",className:"text-gray-300 text-sm",children:"Admin alerts"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"customerUpdates",checked:f.customerUpdates,onChange:j=>m({...f,customerUpdates:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"customerUpdates",className:"text-gray-300 text-sm",children:"Customer updates"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(P3,{className:"w-5 h-5 mr-2 text-pink-400"}),"UI & Branding"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Primary Color"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(Se,{value:g.primaryColor,onChange:j=>x({...g,primaryColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white w-20",type:"color"}),o.jsx(Se,{value:g.primaryColor,onChange:j=>x({...g,primaryColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white flex-1",placeholder:"#ef4444"})]})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Secondary Color"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(Se,{value:g.secondaryColor,onChange:j=>x({...g,secondaryColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white w-20",type:"color"}),o.jsx(Se,{value:g.secondaryColor,onChange:j=>x({...g,secondaryColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white flex-1",placeholder:"#1f2937"})]})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Accent Color"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(Se,{value:g.accentColor,onChange:j=>x({...g,accentColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white w-20",type:"color"}),o.jsx(Se,{value:g.accentColor,onChange:j=>x({...g,accentColor:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white flex-1",placeholder:"#f59e0b"})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableAnimations",checked:g.enableAnimations,onChange:j=>x({...g,enableAnimations:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"enableAnimations",className:"text-gray-300 text-sm",children:"Enable animations"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableDarkMode",checked:g.enableDarkMode,onChange:j=>x({...g,enableDarkMode:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"enableDarkMode",className:"text-gray-300 text-sm",children:"Enable dark mode"})]})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Custom CSS"}),o.jsx(ic,{value:g.customCSS,onChange:j=>x({...g,customCSS:j.target.value}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"/* Custom CSS styles */",rows:3})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(q1,{className:"w-5 h-5 mr-2 text-indigo-400"}),"Data & Privacy"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Data Retention (Days)"}),o.jsx(Se,{value:p.dataRetentionDays,onChange:j=>b({...p,dataRetentionDays:parseInt(j.target.value)||2555}),className:"bg-gray-700/50 border-gray-600 text-white mt-1",type:"number",min:"365",max:"3650"})]}),o.jsxs("div",{children:[o.jsx(_e,{className:"text-gray-300 text-sm",children:"Backup Frequency"}),o.jsxs("select",{value:p.backupFrequency,onChange:j=>b({...p,backupFrequency:j.target.value}),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[o.jsx("option",{value:"hourly",children:"Hourly"}),o.jsx("option",{value:"daily",children:"Daily"}),o.jsx("option",{value:"weekly",children:"Weekly"}),o.jsx("option",{value:"monthly",children:"Monthly"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowDataExport",checked:p.allowDataExport,onChange:j=>b({...p,allowDataExport:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"allowDataExport",className:"text-gray-300 text-sm",children:"Allow data export"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"allowDataDeletion",checked:p.allowDataDeletion,onChange:j=>b({...p,allowDataDeletion:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"allowDataDeletion",className:"text-gray-300 text-sm",children:"Allow data deletion"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"anonymizeOldData",checked:p.anonymizeOldData,onChange:j=>b({...p,anonymizeOldData:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"anonymizeOldData",className:"text-gray-300 text-sm",children:"Anonymize old data"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"enableAnalytics",checked:p.enableAnalytics,onChange:j=>b({...p,enableAnalytics:j.target.checked}),className:"rounded bg-gray-700/50 border-gray-600"}),o.jsx(_e,{htmlFor:"enableAnalytics",className:"text-gray-300 text-sm",children:"Enable analytics"})]})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700/50 rounded-xl p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(ds,{className:"w-5 h-5 mr-2 text-green-400"}),"Settings Summary"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Business:"}),o.jsx("span",{className:"text-white",children:n.businessName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Default Stamps:"}),o.jsx("span",{className:"text-white",children:i.defaultStampRequirement})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Default Reward:"}),o.jsx("span",{className:"text-white",children:l.defaultRewardDescription})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Session Timeout:"}),o.jsxs("span",{className:"text-white",children:[u.sessionTimeoutHours,"h"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Multi-Device:"}),o.jsx("span",{className:"text-white",children:u.allowMultiDeviceLogin?"Enabled":"Disabled"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Audit Log:"}),o.jsx("span",{className:"text-white",children:u.enableAuditLog?"Enabled":"Disabled"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Notifications:"}),o.jsx("span",{className:"text-white",children:f.emailNotifications?"Email":"Disabled"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Data Retention:"}),o.jsxs("span",{className:"text-white",children:[p.dataRetentionDays," days"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Backup:"}),o.jsx("span",{className:"text-white",children:p.backupFrequency})]})]})]})]})]})},Wz=({user:t,allUsers:e,offers:r,onLogout:n,onScan:s})=>{var M;const[i,a]=y.useState(()=>localStorage.getItem("adminActiveTab")||"overview"),[l,c]=y.useState(""),[u,d]=y.useState("all"),[f,m]=y.useState("all"),[g,x]=y.useState(!1),[p,b]=y.useState(r);Xn(),y.useEffect(()=>{b(r)},[r]),y.useEffect(()=>{if((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="super_admin"){const P=Aa(ft,"offers"),B=Md(P,jw("createdAt","desc")),z=Fp(B,Q=>{const Z=[];Q.forEach(U=>{Z.push({...U.data(),offerId:U.id})}),b(Z)},Q=>{console.error("Error listening to offers:",Q)});return()=>z()}},[t==null?void 0:t.role]);const E=async()=>{try{const P=await s2();b(P),console.log("Offers refreshed successfully. New offers count:",P.length)}catch(P){console.error("Failed to refresh offers:",P)}},w=e.filter(P=>{const B=P.name.toLowerCase().includes(l.toLowerCase())||P.email.toLowerCase().includes(l.toLowerCase()),z=u==="all"||u==="active"&&P.lastScanAt&&new Date().getTime()-P.lastScanAt.toDate().getTime()<7*24*60*60*1e3||u==="inactive"&&(!P.lastScanAt||new Date().getTime()-P.lastScanAt.toDate().getTime()>=7*24*60*60*1e3),Q=f==="all"||P.role===f;return B&&z&&Q}),C=e.length,I=e.filter(P=>P.role==="customer"),j=I.filter(P=>P.lastScanAt&&new Date().getTime()-P.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length,V=I.reduce((P,B)=>{var z;return P+(((z=B.completedRewards)==null?void 0:z.length)||0)},0),R=p.length,_=p.filter(P=>P.isActive).length;y.useEffect(()=>{Nt("admin_dashboard_view",{tab:i,user_id:t.id})},[i,t.id]);const k=[{id:"overview",label:"Overview",icon:Ox,color:"text-blue-400",roles:["admin","super_admin"]},{id:"users",label:"Users",icon:Cn,color:"text-green-400",roles:["super_admin"]},{id:"offers",label:"Offers",icon:st,color:"text-purple-400",roles:["admin","super_admin"]},{id:"rewards",label:"Rewards",icon:zr,color:"text-yellow-400",roles:["super_admin"]},{id:"analytics",label:"Analytics",icon:qx,color:"text-indigo-400",roles:["super_admin"]},{id:"settings",label:"Settings",icon:mp,color:"text-red-400",roles:["super_admin"]}].filter(P=>P.roles.includes(t.role)),L=P=>{a(P),localStorage.setItem("adminActiveTab",P),x(!1)};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>x(!1)}),o.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 bg-gray-900/95 backdrop-blur-sm border-r border-red-800/50 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${g?"translate-x-0":"-translate-x-full"}`,children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-red-800/30",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"}),o.jsx("p",{className:"text-red-300 text-sm",children:"Vape Master"})]}),o.jsx("button",{onClick:()=>x(!1),className:"lg:hidden text-gray-400 hover:text-white",children:o.jsx(hs,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"p-6 border-b border-red-800/30",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-lg font-bold",children:t.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:t.name}),o.jsx("div",{className:"text-gray-400 text-sm capitalize",children:t.role.replace("_"," ")})]})]})}),o.jsx("nav",{className:"flex-1 p-4 space-y-2",children:k.map(P=>{const B=P.icon;return o.jsxs("button",{onClick:()=>L(P.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ${i===P.id?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-800/50"}`,children:[o.jsx(B,{className:`w-5 h-5 ${i===P.id?"text-white":P.color}`}),o.jsx("span",{className:"font-medium",children:P.label})]},P.id)})}),o.jsxs("div",{className:"p-4 space-y-3 border-t border-red-800/30",children:[o.jsxs(Te,{onClick:s,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:[o.jsx(D3,{className:"w-4 h-4 mr-2"}),"Scan QR"]}),o.jsxs(Te,{onClick:n,variant:"outline",className:"w-full border-red-600 text-red-300 hover:bg-red-700/20",children:[o.jsx(SA,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),o.jsxs("div",{className:"lg:pl-80",children:[o.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50 sticky top-0 z-30",children:o.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>x(!0),className:"lg:hidden text-gray-400 hover:text-white",children:o.jsx(I3,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:(M=k.find(P=>P.id===i))==null?void 0:M.label}),o.jsxs("p",{className:"text-red-300 text-sm",children:[i==="overview"&&"System overview and key metrics",i==="users"&&"Manage users and permissions",i==="offers"&&(t.role==="super_admin"?"Create and manage loyalty offers":"View loyalty offers (read-only access)"),i==="rewards"&&"Track rewards and redemptions",i==="analytics"&&"Performance insights and reports",i==="settings"&&"System configuration and preferences"]})]})]}),o.jsxs("div",{className:"hidden md:flex items-center space-x-6 text-sm",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white font-semibold",children:C}),o.jsx("div",{className:"text-gray-400",children:"Users"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white font-semibold",children:R}),o.jsx("div",{className:"text-gray-400",children:"Offers"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white font-semibold",children:V}),o.jsx("div",{className:"text-gray-400",children:"Rewards"})]})]})]})}),o.jsxs("div",{className:"p-6",children:[i==="overview"&&o.jsx(Uz,{totalUsers:C,customers:I,activeUsers:j,totalRewards:V,totalOffers:R,activeOffers:_,recentUsers:e.slice(0,5)}),i==="users"&&o.jsx(qz,{users:w,searchTerm:l,setSearchTerm:c,statusFilter:u,setStatusFilter:d,roleFilter:f,setRoleFilter:m}),i==="offers"&&o.jsx(Gz,{offers:p,userRole:t.role,onOfferCreated:E,currentUser:t}),i==="rewards"&&o.jsx($z,{allUsers:e}),i==="analytics"&&o.jsx(zz,{allUsers:e,offers:p}),i==="settings"&&o.jsx(Hz,{user:t})]})]})]})},Qz=()=>{const{user:t,loading:e,settings:r,allUsers:n,allUsersLoading:s,offers:i,showConfetti:a,confettiKey:l,lastUpdateTime:c,activeTab:u,setActiveTab:d,userPurchaseLimit:f,purchasesRemaining:m,handleLogout:g,navigate:x,handleOfferSelection:p}=Uq(),[b,E]=y.useState(!1),[w,C]=y.useState(null),[I,j]=y.useState(!1),[V,R]=y.useState(null);if(e)return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsx(Oz,{}),o.jsx("div",{className:"flex-1 px-6 pb-6",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(Lz,{}),o.jsx(Fz,{}),o.jsx(Vz,{})]})})]});if(!t)return null;const _=u==="progress",A=u==="offers",k=t.role==="customer";return t.role==="admin"||t.role==="super_admin"?o.jsx(Wz,{user:t,allUsers:n,offers:i,onLogout:g,onScan:()=>x("/scan")}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[a&&o.jsx(d2,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:200,recycle:!1},l),o.jsx(Kq,{title:"Dashboard",onBack:()=>x("/"),actions:o.jsx(Dz,{user:t,handleLogout:g,navigate:x})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(tG,{activeTab:u,onTabChange:d,userRole:t.role}),A&&k&&o.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-green-900/20 border border-green-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-green-300 mb-2 flex items-center",children:[o.jsx(st,{className:"w-6 h-6 mr-2 text-green-400"}),"Available Offers"]}),o.jsx("p",{className:"text-green-200/80 text-sm",children:"Choose an offer and start collecting stamps to earn rewards"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:i&&i.length>0?o.jsx("div",{className:"grid gap-4",children:i.filter(M=>{var B;return M.isActive?!0:((B=t.completedRewards)==null?void 0:B.find(z=>{var Q,Z,U;return((Q=z.offerSnapshot)==null?void 0:Q.offerId)===M.offerId&&((Z=z.scanHistory)==null?void 0:Z.length)<((U=z.offerSnapshot)==null?void 0:U.stampRequirement)&&!z.claimedAt}))!==void 0}).map(M=>{var z,Q;const P=(z=t.completedRewards)==null?void 0:z.find(Z=>{var U,H,ie;return((U=Z.offerSnapshot)==null?void 0:U.offerId)===M.offerId&&((H=Z.scanHistory)==null?void 0:H.length)>=((ie=Z.offerSnapshot)==null?void 0:ie.stampRequirement)&&!Z.claimedAt}),B=(Q=t.completedRewards)==null?void 0:Q.find(Z=>{var U,H,ie;return((U=Z.offerSnapshot)==null?void 0:U.offerId)===M.offerId&&((H=Z.scanHistory)==null?void 0:H.length)<((ie=Z.offerSnapshot)==null?void 0:ie.stampRequirement)&&!Z.claimedAt});return o.jsxs("div",{className:`bg-gradient-to-br ${B?"from-green-900/40 to-green-800/40 border-green-600/50 hover:from-green-900/50 hover:to-green-800/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50 hover:from-gray-800/50 hover:to-gray-700/50"} border rounded-xl p-4 transition-all duration-300 hover:scale-[1.02] hover:shadow-lg`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-white mb-1",children:M.name}),o.jsx("p",{className:"text-gray-300 text-sm",children:M.description}),!M.isActive&&o.jsx("div",{className:"mt-2 text-xs text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded-full inline-block",children:" Offer is inactive - you can continue collecting stamps"})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${B?M.isActive?"bg-green-600/80 text-white border border-green-500/50 shadow-lg":"bg-yellow-600/80 text-white border border-yellow-500/50 shadow-lg":"bg-gray-600/80 text-gray-200 border border-gray-500/50"}`,children:B?M.isActive?"ACTIVE":"CONTINUING":"AVAILABLE"})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Required Stamps:"}),o.jsx("span",{className:"text-white font-medium",children:M.stampRequirement})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Reward:"}),o.jsx("span",{className:"text-white font-medium",children:M.rewardDescription})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white font-medium capitalize",children:M.rewardType})]})]}),o.jsx("div",{className:"flex justify-center",children:B?o.jsx("button",{onClick:()=>{const Z={userId:t.id,userEmail:t.email,userName:t.name,offerId:M.offerId,offerName:M.name,stampsPerScan:M.stampsPerScan||1,timestamp:new Date().toISOString()};R(Z),j(!0)},className:`w-full px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg ${M.isActive?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white":"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white"}`,children:M.isActive?"Continue Collecting":"Continue Collecting (Inactive)"}):o.jsx("button",{onClick:()=>{const Z={userId:t.id,userEmail:t.email,userName:t.name,offerId:M.offerId,offerName:M.name,stampsPerScan:M.stampsPerScan||1,timestamp:new Date().toISOString()};R(Z),j(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105 hover:shadow-xl shadow-lg",children:P?"Start New Reward":"Start Collecting"})})]},M.offerId)})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(st,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),o.jsx("div",{className:"text-gray-300 text-lg font-medium mb-2",children:"No active offers available"}),o.jsx("div",{className:"text-gray-500 text-sm",children:"Check back later for new offers"})]})})]}),_&&o.jsx(o.Fragment,{children:k?o.jsx("div",{className:"h-[720px] overflow-hidden",children:o.jsx(rG,{user:t,userPurchaseLimit:f,settings:r,purchasesRemaining:m,onViewReward:()=>x("/scan"),currentOffer:i==null?void 0:i.find(M=>M.offerId===t.currentOfferId)})}):o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-blue-900/20 border border-blue-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-blue-300 mb-2 flex items-center",children:[o.jsx(zr,{className:"w-6 h-6 mr-2 text-blue-400"}),"User Progress Tracking"]}),o.jsx("p",{className:"text-blue-200/80 text-sm",children:"Real-time updates of all user loyalty progress"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:o.jsx(eG,{users:n.filter(M=>M.role==="customer"),loading:s})})]})}),u==="card"&&(t.role==="super_admin"?o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[o.jsx(zs,{className:"w-6 h-6 mr-2 text-purple-400"}),"Rewards History"]}),o.jsx("p",{className:"text-purple-200/80 text-sm",children:"Complete overview of all user rewards and redemptions"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:o.jsx(Zq,{allUsers:n})})]}):o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-purple-800/10 to-purple-900/20 border border-purple-700/30 rounded-xl p-6 shadow-2xl h-[720px] overflow-hidden",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-2 flex items-center",children:[o.jsx(zs,{className:"w-6 h-6 mr-2 text-purple-400"}),"Your Rewards"]}),o.jsx("p",{className:"text-purple-200/80 text-sm",children:"Track your progress and manage your earned rewards"})]}),o.jsx("div",{className:"h-[580px] overflow-y-auto pr-2",children:o.jsx(hG,{user:t,offers:i})})]}))]})}),b&&w&&o.jsx(Bz,{reward:w,onClose:()=>{E(!1),C(null)}}),I&&V&&o.jsx(N2,{qrData:V,isOpen:I,onClose:()=>{j(!1),R(null)}})]})},Yz=()=>{var f,m,g,x;const{user:t,loading:e,redeemReward:r}=Es(),n=Xn(),[s,i]=y.useState(null);if(y.useEffect(()=>{Nt("page_view",{page:"Rewards"})},[]),y.useEffect(()=>{!e&&!t&&n("/login")},[t,e,n]),e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t)return null;const a=async p=>{i(p);try{await r(p),Ye({title:"Reward Redeemed!",description:"Your reward has been successfully redeemed."}),Nt("reward_redeemed",{reward_id:p,user_id:t.id}),window.location.reload()}catch{Ye({title:"Error",description:"Failed to redeem reward. Please try again.",variant:"destructive"})}finally{i(null)}},l=p=>{switch(p){case"percentage":return"";case"fixed_amount":return"";case"free_item":return"";default:return""}},c=p=>{switch(p){case"percentage":return"from-purple-600 to-purple-700";case"fixed_amount":return"from-green-600 to-green-700";case"free_item":return"from-blue-600 to-blue-700";default:return"from-red-600 to-red-700"}},u=((f=t.completedRewards)==null?void 0:f.filter(p=>!p.claimedAt))||[],d=((m=t.completedRewards)==null?void 0:m.filter(p=>p.claimedAt))||[];return t.currentReward,o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950",children:[o.jsx("div",{className:"bg-gradient-to-r from-red-900/80 to-black/80 backdrop-blur-sm border-b border-red-800/50",children:o.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(Te,{variant:"ghost",size:"sm",onClick:()=>n("/dashboard"),className:"text-red-300 hover:text-white hover:bg-red-900/30",children:[o.jsx(cc,{className:"w-5 h-5 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:"My Rewards"}),o.jsx("p",{className:"text-red-300 text-sm",children:"Manage and redeem your earned rewards"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-white text-sm",children:"Total Rewards"}),o.jsx("div",{className:"text-2xl font-bold text-red-400",children:((g=t.completedRewards)==null?void 0:g.length)||0})]})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.completedRewards&&t.completedRewards.filter(p=>{var E,w;return(((E=p.scanHistory)==null?void 0:E.reduce((C,I)=>C+(I.stampsEarned||1),0))||0)<(((w=p.offerSnapshot)==null?void 0:w.stampRequirement)||0)}).length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(qn,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Rewards in Progress"]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.completedRewards.filter(p=>{var E,w;return(((E=p.scanHistory)==null?void 0:E.reduce((C,I)=>C+(I.stampsEarned||1),0))||0)<(((w=p.offerSnapshot)==null?void 0:w.stampRequirement)||0)}).map(p=>{var C,I,j;const b=((C=p.scanHistory)==null?void 0:C.reduce((V,R)=>V+(R.stampsEarned||1),0))||0,E=((I=p.offerSnapshot)==null?void 0:I.stampRequirement)||0,w=E>0?Math.min(b/E*100,100):0;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-blue-900/90 border border-blue-800/50 rounded-xl p-6 hover:border-blue-600/70 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/20",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"text-4xl mb-2",children:""}),o.jsx("div",{className:"text-xl font-bold text-white mb-1",children:((j=p.offerSnapshot)==null?void 0:j.offerName)||"Loyalty Reward"}),o.jsx("div",{className:"text-sm text-gray-400",children:p.rewardDescription})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-gray-400",children:"Progress:"}),o.jsxs("span",{className:"text-white font-medium",children:[b," / ",E," stamps"]})]}),o.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${w}%`}})}),o.jsx("div",{className:"text-center mt-2",children:o.jsx("div",{className:"text-blue-300 text-xs",children:E-b>0?`${E-b} more stamps needed`:" Ready to complete!"})})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:p.rewardType})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:p.rewardValue})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Started:"}),o.jsx("span",{className:"text-white",children:p.createdAt.toDate().toLocaleDateString()})]})]})]},p.rewardId)})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(st,{className:"w-5 h-5 mr-2 text-green-400"}),"Available Rewards (",u.length,")"]}),u.length===0?o.jsxs("div",{className:"text-center py-12 bg-gradient-to-r from-gray-900/50 to-red-900/50 border border-gray-700/50 rounded-xl",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Available Rewards"}),o.jsx("p",{className:"text-gray-400 mb-4",children:"Complete your purchase goal to earn your first reward!"}),o.jsx(Te,{onClick:()=>n("/dashboard"),className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800",children:"Go to Dashboard"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(p=>{var b;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6 hover:border-red-600/70 transition-all duration-300 hover:shadow-lg hover:shadow-red-500/20",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"text-4xl mb-2",children:l(p.rewardType)}),o.jsx("div",{className:"text-xl font-bold text-white mb-1",children:p.rewardDescription}),o.jsxs("div",{className:"text-sm text-gray-400",children:["Earned on ",p.createdAt.toDate().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:p.rewardType})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:p.rewardValue})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400",children:"Goal:"}),o.jsxs("span",{className:"text-white",children:[((b=p.offerSnapshot)==null?void 0:b.stampRequirement)||0," stamps"]})]})]}),o.jsxs(Te,{onClick:()=>a(p.rewardId),disabled:s===p.rewardId,className:`w-full bg-gradient-to-r ${c(p.rewardType)} hover:opacity-90 transition-all duration-300`,children:[s===p.rewardId?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):o.jsx(ds,{className:"w-4 h-4 mr-2"}),"Redeem Reward"]})]},p.rewardId)})})]}),d.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(ds,{className:"w-5 h-5 mr-2 text-green-400"}),"Claimed Rewards (",d.length,")"]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(p=>{var b,E;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border border-gray-700/50 rounded-xl p-6 opacity-75",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"text-4xl mb-2",children:l(p.rewardType)}),o.jsx("div",{className:"text-xl font-bold text-gray-300 mb-1",children:p.rewardDescription}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Claimed on"," ",(b=p.claimedAt)==null?void 0:b.toDate().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Type:"}),o.jsx("span",{className:"text-gray-300 capitalize",children:p.rewardType})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Value:"}),o.jsx("span",{className:"text-gray-300",children:p.rewardValue})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Goal:"}),o.jsxs("span",{className:"text-gray-300",children:[((E=p.offerSnapshot)==null?void 0:E.stampRequirement)||0," stamps"]})]})]}),o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-green-900/50 border border-green-600/50 rounded-full",children:[o.jsx(ds,{className:"w-4 h-4 mr-2 text-green-400"}),o.jsx("span",{className:"text-green-300 text-sm font-medium",children:"REDEEMED"})]})})]},p.rewardId)})})]}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-900/90 to-red-900/90 border border-red-800/50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[o.jsx(Ux,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Reward Statistics"]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:((x=t.completedRewards)==null?void 0:x.length)||0}),o.jsx("div",{className:"text-sm text-gray-400",children:"Total Earned"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-400",children:d.length}),o.jsx("div",{className:"text-sm text-gray-400",children:"Redeemed"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:u.length}),o.jsx("div",{className:"text-sm text-gray-400",children:"Available"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.purchases}),o.jsx("div",{className:"text-sm text-gray-400",children:"Current Progress"})]})]})]})]})]})},Kz=()=>{const{user:t,loading:e,allUsers:r}=Es(),n=Xn(),[s,i]=y.useState([]),[a,l]=y.useState(!0);y.useState(!1),y.useState(!1);const[c,u]=y.useState("offers");return y.useEffect(()=>{Nt("page_view",{page:"Settings"})},[]),y.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),y.useEffect(()=>{t&&(async()=>{try{l(!0);const f=await Su();if(f.length===0){await XC(t);const m=await Su();i(m)}else i(f)}catch(f){console.error("Error loading offers:",f);try{await XC(t);const m=await Su();i(m)}catch(m){console.error("Error creating default offer:",m)}}finally{l(!1)}})()},[t]),e||a?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):!t||t.role!=="admin"&&t.role!=="super_admin"?null:o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(si,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Settings"})]}),o.jsxs("div",{className:"flex items-center text-gray-400",children:[o.jsx(mp,{className:"w-6 h-6 mr-2"}),o.jsx("span",{className:"text-sm",children:"Admin Panel"})]})]})}),o.jsx("div",{className:"flex-1 px-6 py-8",children:o.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex space-x-1 mb-8 bg-gray-800/50 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>u("offers"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="offers"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Manage Offers"]}),o.jsxs("button",{onClick:()=>u("rewards"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="rewards"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Rewards History"]}),o.jsxs("button",{onClick:()=>u("analytics"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="analytics"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(Ox,{className:"w-4 h-4 mr-2"}),"Analytics"]}),o.jsxs("button",{onClick:()=>u("users"),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-md font-medium transition-all duration-200 ${c==="users"?"bg-red-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/50"}`,children:[o.jsx(Cn,{className:"w-4 h-4 mr-2"}),"User Management"]})]}),c==="offers"&&o.jsx(Jz,{offers:s,onOffersChange:i,user:t}),c==="rewards"&&o.jsx(Xz,{allUsers:r}),c==="analytics"&&o.jsx(Zz,{allUsers:r}),c==="users"&&o.jsx(eH,{allUsers:r})]})})]})]})},Jz=({offers:t,onOffersChange:e,user:r})=>{const[n,s]=y.useState(!1),[i,a]=y.useState(!1),[l,c]=y.useState(""),[u,d]=y.useState(""),[f,m]=y.useState(5),[g,x]=y.useState("percentage"),[p,b]=y.useState("20"),[E,w]=y.useState("20% OFF"),C=async()=>{if(!l.trim()||!u.trim()||!p.trim()||!E.trim()){Ye({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});return}s(!0);try{await Rq(r,{name:l.trim(),description:u.trim(),stampRequirement:f,stampsPerScan:1,rewardType:g,rewardValue:p.trim(),rewardDescription:E.trim(),isActive:!0});const I=await Su();e(I),a(!1),c(""),d(""),m(5),x("percentage"),b("20"),w("20% OFF"),Ye({title:"Offer Created",description:"New offer has been created successfully!"})}catch{Ye({title:"Creation Failed",description:"Failed to create offer. Please try again.",variant:"destructive"})}finally{s(!1)}};return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Offers"}),o.jsx("p",{className:"text-gray-400",children:"Create and manage loyalty program offers for customers"})]}),o.jsx("div",{className:"mb-8 text-center",children:o.jsxs(Te,{onClick:()=>a(!0),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold px-6 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300",children:[o.jsx(st,{className:"w-4 h-4 mr-2"}),"Create New Offer"]})}),i&&o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6 mb-8",children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create New Offer"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"offerName",className:"text-white font-medium",children:"Offer Name"}),o.jsx(Se,{id:"offerName",value:l,onChange:I=>c(I.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"e.g., Welcome Offer, Summer Special"})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"offerDescription",className:"text-white font-medium",children:"Description"}),o.jsx(ic,{id:"offerDescription",value:u,onChange:I=>d(I.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:"Describe what customers need to do to earn this reward"})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"stampRequirement",className:"text-white font-medium",children:"Stamps Required"}),o.jsx(Se,{id:"stampRequirement",type:"number",min:"1",max:"50",value:f,onChange:I=>m(parseInt(I.target.value)||1),className:"bg-gray-700/50 border-gray-600 text-white mt-1"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"rewardType",className:"text-white font-medium",children:"Reward Type"}),o.jsxs("select",{id:"rewardType",value:g,onChange:I=>x(I.target.value),className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-md px-3 py-2 mt-1",children:[o.jsx("option",{value:"percentage",children:"Percentage Discount"}),o.jsx("option",{value:"fixed_amount",children:"Fixed Amount Off"}),o.jsx("option",{value:"free_item",children:"Free Item"})]})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"rewardValue",className:"text-white font-medium",children:"Reward Value"}),o.jsx(Se,{id:"rewardValue",value:p,onChange:I=>b(I.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:g==="percentage"?"20":g==="fixed_amount"?"5.00":"Free Coffee"})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"rewardDescription",className:"text-white font-medium",children:"Reward Description"}),o.jsx(Se,{id:"rewardDescription",value:E,onChange:I=>w(I.target.value),className:"bg-gray-700/50 border-gray-600 text-white mt-1",placeholder:g==="percentage"?"20% OFF":g==="fixed_amount"?"$5.00 OFF":"Free Coffee"})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(Te,{variant:"outline",onClick:()=>a(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),o.jsx(Te,{onClick:C,disabled:n,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Offer"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Current Offers"}),t.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h4",{className:"text-xl font-semibold text-white mb-2",children:"No Offers Yet"}),o.jsx("p",{className:"text-gray-400",children:"Create your first offer to get started!"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(I=>o.jsxs("div",{className:`bg-gradient-to-br ${I.isActive?"from-green-900/40 to-green-800/40 border-green-700/50":"from-gray-800/40 to-gray-700/40 border-gray-600/50"} border rounded-xl p-4`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"text-lg font-semibold text-white",children:I.name}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${I.isActive?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-600/50"}`,children:I.isActive?"ACTIVE":"INACTIVE"})]}),o.jsx("p",{className:"text-gray-300 text-sm mb-3",children:I.description}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Stamps:"}),o.jsx("span",{className:"text-white",children:I.stampRequirement})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Reward:"}),o.jsx("span",{className:"text-white",children:I.rewardDescription})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:I.rewardType})]})]})]},I.offerId))})]})]})},Xz=({allUsers:t})=>{const e=a=>{var c,u;if((c=a.offerSnapshot)!=null&&c.stampRequirement)return a.offerSnapshot.stampRequirement;const l=a;return(u=l.settingsSnapshot)!=null&&u.purchaseLimit?l.settingsSnapshot.purchaseLimit:"Unknown"},r=t.flatMap(a=>(a.completedRewards||[]).map(l=>({...l,userName:a.name,userEmail:a.email,userId:a.id}))),n=r.filter(a=>!a.claimedAt),s=r.filter(a=>a.claimedAt),i=r.filter(a=>a.expiresAt?new Date>a.expiresAt.toDate():!1);return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Rewards History & Status"}),o.jsx("p",{className:"text-gray-400",children:"Monitor all rewards across the system"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.length}),o.jsx("div",{className:"text-blue-300 text-sm",children:"Total Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-400",children:n.length}),o.jsx("div",{className:"text-green-300 text-sm",children:"Active Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/50 to-yellow-800/50 border border-yellow-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:s.length}),o.jsx("div",{className:"text-yellow-300 text-sm",children:"Claimed Rewards"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700/50 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-400",children:i.length}),o.jsx("div",{className:"text-red-300 text-sm",children:"Expired Rewards"})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(io,{className:"w-5 h-5 mr-2 text-green-400"}),"Active Rewards (",n.length,")"]}),n.length===0?o.jsxs("div",{className:"text-center py-8 bg-gray-800/30 rounded-xl",children:[o.jsx("div",{className:"text-4xl mb-2",children:""}),o.jsx("p",{className:"text-gray-400",children:"No active rewards at the moment"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(a=>o.jsxs("div",{className:"bg-gradient-to-br from-green-900/40 to-green-800/40 border border-green-700/50 rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-lg font-semibold text-white",children:a.rewardDescription}),o.jsx("div",{className:"text-xs text-green-300 bg-green-900/50 px-2 py-1 rounded-full",children:"ACTIVE"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"User:"}),o.jsx("span",{className:"text-white",children:a.userName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:a.rewardType})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Value:"}),o.jsx("span",{className:"text-white",children:a.rewardValue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Goal:"}),o.jsxs("span",{className:"text-white",children:[e(a)," purchases"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Earned:"}),o.jsx("span",{className:"text-white",children:a.createdAt.toDate().toLocaleDateString()})]})]})]},a.rewardId))})]}),s.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(ds,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Claimed Rewards (",s.length,")"]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.slice(0,6).map(a=>{var l;return o.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 border border-yellow-700/50 rounded-xl p-4 opacity-75",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-lg font-semibold text-white",children:a.rewardDescription}),o.jsx("div",{className:"text-xs text-yellow-300 bg-yellow-900/50 px-2 py-1 rounded-full",children:"CLAIMED"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"User:"}),o.jsx("span",{className:"text-white",children:a.userName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Claimed:"}),o.jsx("span",{className:"text-white",children:(l=a.claimedAt)==null?void 0:l.toDate().toLocaleDateString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-400",children:"Type:"}),o.jsx("span",{className:"text-white capitalize",children:a.rewardType})]})]})]},a.rewardId)})}),s.length>6&&o.jsx("div",{className:"text-center mt-4",children:o.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 6 of ",s.length," claimed rewards"]})})]})]})},Zz=({allUsers:t})=>{const e=t.filter(s=>s.role==="customer"),r=e.reduce((s,i)=>{var a;return s+(((a=i.completedRewards)==null?void 0:a.length)||0)},0),n=e.filter(s=>s.lastScanAt&&new Date().getTime()-s.lastScanAt.toDate().getTime()<7*24*60*60*1e3).length;return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"System Analytics"}),o.jsx("p",{className:"text-gray-400",children:"Overview of loyalty program performance"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:e.length}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Customers"}),o.jsx("div",{className:"text-blue-400 text-sm mt-2",children:"Active loyalty members"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:r}),o.jsx("div",{className:"text-green-300 text-lg",children:"Total Rewards"}),o.jsx("div",{className:"text-green-400 text-sm mt-2",children:"Earned by customers"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:n}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Active Users"}),o.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Last 7 days"})]})]}),o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(qx,{className:"w-5 h-5 mr-2 text-green-400"}),"Recent Activity"]}),o.jsx("div",{className:"space-y-3",children:e.slice(0,5).map(s=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-bold",children:s.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium",children:s.name}),o.jsx("div",{className:"text-gray-400 text-sm",children:s.email})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-white font-medium",children:[s.purchases," purchases"]}),o.jsx("div",{className:"text-gray-400 text-sm",children:s.lastScanAt?s.lastScanAt.toDate().toLocaleDateString():"Never"})]})]},s.id))})]})]})},eH=({allUsers:t})=>{const e=t.filter(n=>n.role==="customer"),r=t.filter(n=>n.role==="admin"||n.role==="super_admin");return o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),o.jsx("p",{className:"text-gray-400",children:"Overview of all system users"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-blue-800/50 border border-blue-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:t.length}),o.jsx("div",{className:"text-blue-300 text-lg",children:"Total Users"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border border-green-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-green-400 mb-2",children:e.length}),o.jsx("div",{className:"text-green-300 text-lg",children:"Customers"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border border-purple-700/50 rounded-xl p-6 text-center",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:r.length}),o.jsx("div",{className:"text-purple-300 text-lg",children:"Administrators"})]})]}),o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[o.jsx(Cn,{className:"w-5 h-5 mr-2 text-blue-400"}),"Customer Overview"]}),o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-700",children:[o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Name"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Email"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Purchases"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Rewards"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Last Scan"}),o.jsx("th",{className:"text-left p-3 text-gray-300",children:"Status"})]})}),o.jsx("tbody",{children:e.slice(0,10).map(n=>{var s;return o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[o.jsx("td",{className:"p-3 text-white",children:n.name}),o.jsx("td",{className:"p-3 text-gray-300",children:n.email}),o.jsx("td",{className:"p-3 text-white",children:n.purchases}),o.jsx("td",{className:"p-3 text-white",children:((s=n.completedRewards)==null?void 0:s.length)||0}),o.jsx("td",{className:"p-3 text-gray-300",children:n.lastScanAt?n.lastScanAt.toDate().toLocaleDateString():"Never"}),o.jsx("td",{className:"p-3",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-gray-900/50 text-gray-300 border border-gray-700/50"}`,children:n.lastScanAt&&new Date().getTime()-n.lastScanAt.toDate().getTime()<7*24*60*60*1e3?"Active":"Inactive"})})]},n.id)})})]}),e.length>10&&o.jsx("div",{className:"text-center mt-4",children:o.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing 10 of ",e.length," customers"]})})]})]})]})};function vN(t,[e,r]){return Math.min(r,Math.max(e,t))}function tH(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var rH=[" ","Enter","ArrowUp","ArrowDown"],nH=[" ","Enter"],Gd="Select",[ng,sg,sH]=Ed(Gd),[_c,rQ]=Cd(Gd,[sH,Ec]),ig=Ec(),[iH,Io]=_c(Gd),[oH,aH]=_c(Gd),Uj=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:g,form:x}=t,p=ig(e),[b,E]=y.useState(null),[w,C]=y.useState(null),[I,j]=y.useState(!1),V=Kp(u),[R=!1,_]=Wu({prop:n,defaultProp:s,onChange:i}),[A,k]=Wu({prop:a,defaultProp:l,onChange:c}),L=y.useRef(null),M=b?x||!!b.closest("form"):!0,[P,B]=y.useState(new Set),z=Array.from(P).map(Q=>Q.props.value).join(";");return o.jsx(PI,{...p,children:o.jsxs(iH,{required:g,scope:e,trigger:b,onTriggerChange:E,valueNode:w,onValueNodeChange:C,valueNodeHasChildren:I,onValueNodeHasChildrenChange:j,contentId:ia(),value:A,onValueChange:k,open:R,onOpenChange:_,dir:V,triggerPointerDownPosRef:L,disabled:m,children:[o.jsx(ng.Provider,{scope:e,children:o.jsx(oH,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(Q=>{B(Z=>new Set(Z).add(Q))},[]),onNativeOptionRemove:y.useCallback(Q=>{B(Z=>{const U=new Set(Z);return U.delete(Q),U})},[]),children:r})}),M?o.jsxs(hP,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:f,value:A,onChange:Q=>k(Q.target.value),disabled:m,form:x,children:[A===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},z):null]})})};Uj.displayName=Gd;var qj="SelectTrigger",Gj=y.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=ig(r),a=Io(qj,r),l=a.disabled||n,c=ut(e,a.onTriggerChange),u=sg(r),d=y.useRef("touch"),[f,m,g]=fP(p=>{const b=u().filter(C=>!C.disabled),E=b.find(C=>C.value===a.value),w=mP(b,p,E);w!==void 0&&a.onValueChange(w.value)}),x=p=>{l||(a.onOpenChange(!0),g()),p&&(a.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return o.jsx(Kw,{asChild:!0,...i,children:o.jsx($e.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":dP(a.value)?"":void 0,...s,ref:c,onClick:xe(s.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&x(p)}),onPointerDown:xe(s.onPointerDown,p=>{d.current=p.pointerType;const b=p.target;b.hasPointerCapture(p.pointerId)&&b.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(x(p),p.preventDefault())}),onKeyDown:xe(s.onKeyDown,p=>{const b=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(b&&p.key===" ")&&rH.includes(p.key)&&(x(),p.preventDefault())})})})});Gj.displayName=qj;var $j="SelectValue",zj=y.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:a="",...l}=t,c=Io($j,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=ut(e,c.onValueNodeChange);return _r(()=>{u(d)},[u,d]),o.jsx($e.span,{...l,ref:f,style:{pointerEvents:"none"},children:dP(c.value)?o.jsx(o.Fragment,{children:a}):i})});zj.displayName=$j;var lH="SelectIcon",Hj=y.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return o.jsx($e.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});Hj.displayName=lH;var cH="SelectPortal",Wj=t=>o.jsx(dp,{asChild:!0,...t});Wj.displayName=cH;var wa="SelectContent",Qj=y.forwardRef((t,e)=>{const r=Io(wa,t.__scopeSelect),[n,s]=y.useState();if(_r(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?Ca.createPortal(o.jsx(Yj,{scope:t.__scopeSelect,children:o.jsx(ng.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(Kj,{...t,ref:e})});Qj.displayName=wa;var On=10,[Yj,jo]=_c(wa),uH="SelectContentImpl",Kj=y.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:p,avoidCollisions:b,...E}=t,w=Io(wa,r),[C,I]=y.useState(null),[j,V]=y.useState(null),R=ut(e,ee=>I(ee)),[_,A]=y.useState(null),[k,L]=y.useState(null),M=sg(r),[P,B]=y.useState(!1),z=y.useRef(!1);y.useEffect(()=>{if(C)return D2(C)},[C]),_2();const Q=y.useCallback(ee=>{const[de,...G]=M().map(Ce=>Ce.ref.current),[me]=G.slice(-1),Ee=document.activeElement;for(const Ce of ee)if(Ce===Ee||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===de&&j&&(j.scrollTop=0),Ce===me&&j&&(j.scrollTop=j.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==Ee))return},[M,j]),Z=y.useCallback(()=>Q([_,C]),[Q,_,C]);y.useEffect(()=>{P&&Z()},[P,Z]);const{onOpenChange:U,triggerPointerDownPosRef:H}=w;y.useEffect(()=>{if(C){let ee={x:0,y:0};const de=me=>{var Ee,Ce;ee={x:Math.abs(Math.round(me.pageX)-(((Ee=H.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(me.pageY)-(((Ce=H.current)==null?void 0:Ce.y)??0))}},G=me=>{ee.x<=10&&ee.y<=10?me.preventDefault():C.contains(me.target)||U(!1),document.removeEventListener("pointermove",de),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",G,{capture:!0})}}},[C,U,H]),y.useEffect(()=>{const ee=()=>U(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[U]);const[ie,ne]=fP(ee=>{const de=M().filter(Ee=>!Ee.disabled),G=de.find(Ee=>Ee.ref.current===document.activeElement),me=mP(de,ee,G);me&&setTimeout(()=>me.ref.current.focus())}),le=y.useCallback((ee,de,G)=>{const me=!z.current&&!G;(w.value!==void 0&&w.value===de||me)&&(A(ee),me&&(z.current=!0))},[w.value]),he=y.useCallback(()=>C==null?void 0:C.focus(),[C]),Ne=y.useCallback((ee,de,G)=>{const me=!z.current&&!G;(w.value!==void 0&&w.value===de||me)&&L(ee)},[w.value]),Me=n==="popper"?wv:Jj,ue=Me===wv?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:p,avoidCollisions:b}:{};return o.jsx(Yj,{scope:r,content:C,viewport:j,onViewportChange:V,itemRefCallback:le,selectedItem:_,onItemLeave:he,itemTextRefCallback:Ne,focusSelectedItem:Z,selectedItemText:k,position:n,isPositioned:P,searchRef:ie,children:o.jsx(cb,{as:da,allowPinchZoom:!0,children:o.jsx(lb,{asChild:!0,trapped:w.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:xe(s,ee=>{var de;(de=w.trigger)==null||de.focus({preventScroll:!0}),ee.preventDefault()}),children:o.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(Me,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:ee=>ee.preventDefault(),...E,...ue,onPlaced:()=>B(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:xe(E.onKeyDown,ee=>{const de=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!de&&ee.key.length===1&&ne(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let me=M().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const Ee=ee.target,Ce=me.indexOf(Ee);me=me.slice(Ce+1)}setTimeout(()=>Q(me)),ee.preventDefault()}})})})})})})});Kj.displayName=uH;var dH="SelectItemAlignedPosition",Jj=y.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=Io(wa,r),a=jo(wa,r),[l,c]=y.useState(null),[u,d]=y.useState(null),f=ut(e,R=>d(R)),m=sg(r),g=y.useRef(!1),x=y.useRef(!0),{viewport:p,selectedItem:b,selectedItemText:E,focusSelectedItem:w}=a,C=y.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&b&&E){const R=i.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),k=E.getBoundingClientRect();if(i.dir!=="rtl"){const Ee=k.left-_.left,Ce=A.left-Ee,pe=R.left-Ce,ve=R.width+pe,at=Math.max(ve,_.width),ht=window.innerWidth-On,Ft=vN(Ce,[On,Math.max(On,ht-at)]);l.style.minWidth=ve+"px",l.style.left=Ft+"px"}else{const Ee=_.right-k.right,Ce=window.innerWidth-A.right-Ee,pe=window.innerWidth-R.right-Ce,ve=R.width+pe,at=Math.max(ve,_.width),ht=window.innerWidth-On,Ft=vN(Ce,[On,Math.max(On,ht-at)]);l.style.minWidth=ve+"px",l.style.right=Ft+"px"}const L=m(),M=window.innerHeight-On*2,P=p.scrollHeight,B=window.getComputedStyle(u),z=parseInt(B.borderTopWidth,10),Q=parseInt(B.paddingTop,10),Z=parseInt(B.borderBottomWidth,10),U=parseInt(B.paddingBottom,10),H=z+Q+P+U+Z,ie=Math.min(b.offsetHeight*5,H),ne=window.getComputedStyle(p),le=parseInt(ne.paddingTop,10),he=parseInt(ne.paddingBottom,10),Ne=R.top+R.height/2-On,Me=M-Ne,ue=b.offsetHeight/2,ee=b.offsetTop+ue,de=z+Q+ee,G=H-de;if(de<=Ne){const Ee=L.length>0&&b===L[L.length-1].ref.current;l.style.bottom="0px";const Ce=u.clientHeight-p.offsetTop-p.offsetHeight,pe=Math.max(Me,ue+(Ee?he:0)+Ce+Z),ve=de+pe;l.style.height=ve+"px"}else{const Ee=L.length>0&&b===L[0].ref.current;l.style.top="0px";const pe=Math.max(Ne,z+p.offsetTop+(Ee?le:0)+ue)+G;l.style.height=pe+"px",p.scrollTop=de-Ne+p.offsetTop}l.style.margin=`${On}px 0`,l.style.minHeight=ie+"px",l.style.maxHeight=M+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,l,u,p,b,E,i.dir,n]);_r(()=>C(),[C]);const[I,j]=y.useState();_r(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const V=y.useCallback(R=>{R&&x.current===!0&&(C(),w==null||w(),x.current=!1)},[C,w]);return o.jsx(fH,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:V,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:o.jsx($e.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Jj.displayName=dH;var hH="SelectPopperPosition",wv=y.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=On,...i}=t,a=ig(r);return o.jsx(Jw,{...a,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wv.displayName=hH;var[fH,xb]=_c(wa,{}),bv="SelectViewport",Xj=y.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=jo(bv,r),a=xb(bv,r),l=ut(e,i.onViewportChange),c=y.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(ng.Slot,{scope:r,children:o.jsx($e.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:xe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const g=Math.abs(c.current-d.scrollTop);if(g>0){const x=window.innerHeight-On*2,p=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),E=Math.max(p,b);if(E<x){const w=E+g,C=Math.min(x,w),I=w-C;f.style.height=C+"px",f.style.bottom==="0px"&&(d.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});Xj.displayName=bv;var Zj="SelectGroup",[mH,pH]=_c(Zj),gH=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ia();return o.jsx(mH,{scope:r,id:s,children:o.jsx($e.div,{role:"group","aria-labelledby":s,...n,ref:e})})});gH.displayName=Zj;var eP="SelectLabel",tP=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=pH(eP,r);return o.jsx($e.div,{id:s.id,...n,ref:e})});tP.displayName=eP;var Wm="SelectItem",[yH,rP]=_c(Wm),nP=y.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...a}=t,l=Io(Wm,r),c=jo(Wm,r),u=l.value===n,[d,f]=y.useState(i??""),[m,g]=y.useState(!1),x=ut(e,w=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,w,n,s)}),p=ia(),b=y.useRef("touch"),E=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(yH,{scope:r,value:n,disabled:s,textId:p,isSelected:u,onItemTextChange:y.useCallback(w=>{f(C=>C||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(ng.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:o.jsx($e.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:x,onFocus:xe(a.onFocus,()=>g(!0)),onBlur:xe(a.onBlur,()=>g(!1)),onClick:xe(a.onClick,()=>{b.current!=="mouse"&&E()}),onPointerUp:xe(a.onPointerUp,()=>{b.current==="mouse"&&E()}),onPointerDown:xe(a.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:xe(a.onPointerMove,w=>{var C;b.current=w.pointerType,s?(C=c.onItemLeave)==null||C.call(c):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xe(a.onPointerLeave,w=>{var C;w.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:xe(a.onKeyDown,w=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&w.key===" "||(nH.includes(w.key)&&E(),w.key===" "&&w.preventDefault())})})})})});nP.displayName=Wm;var cu="SelectItemText",sP=y.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,a=Io(cu,r),l=jo(cu,r),c=rP(cu,r),u=aH(cu,r),[d,f]=y.useState(null),m=ut(e,E=>f(E),c.onItemTextChange,E=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,E,c.value,c.disabled)}),g=d==null?void 0:d.textContent,x=y.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:p,onNativeOptionRemove:b}=u;return _r(()=>(p(x),()=>b(x)),[p,b,x]),o.jsxs(o.Fragment,{children:[o.jsx($e.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ca.createPortal(i.children,a.valueNode):null]})});sP.displayName=cu;var iP="SelectItemIndicator",oP=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return rP(iP,r).isSelected?o.jsx($e.span,{"aria-hidden":!0,...n,ref:e}):null});oP.displayName=iP;var Ev="SelectScrollUpButton",aP=y.forwardRef((t,e)=>{const r=jo(Ev,t.__scopeSelect),n=xb(Ev,t.__scopeSelect),[s,i]=y.useState(!1),a=ut(e,n.onScrollButtonChange);return _r(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(cP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});aP.displayName=Ev;var Cv="SelectScrollDownButton",lP=y.forwardRef((t,e)=>{const r=jo(Cv,t.__scopeSelect),n=xb(Cv,t.__scopeSelect),[s,i]=y.useState(!1),a=ut(e,n.onScrollButtonChange);return _r(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(cP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});lP.displayName=Cv;var cP=y.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=jo("SelectScrollButton",r),a=y.useRef(null),l=sg(r),c=y.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),_r(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),o.jsx($e.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:xe(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:xe(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:xe(s.onPointerLeave,()=>{c()})})}),vH="SelectSeparator",uP=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return o.jsx($e.div,{"aria-hidden":!0,...n,ref:e})});uP.displayName=vH;var Nv="SelectArrow",xH=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ig(r),i=Io(Nv,r),a=jo(Nv,r);return i.open&&a.position==="popper"?o.jsx(Xw,{...s,...n,ref:e}):null});xH.displayName=Nv;function dP(t){return t===""||t===void 0}var hP=y.forwardRef((t,e)=>{const{value:r,...n}=t,s=y.useRef(null),i=ut(e,s),a=tH(r);return y.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==r&&d){const f=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(f)}},[a,r]),o.jsx(_d,{asChild:!0,children:o.jsx("select",{...n,ref:i,defaultValue:r})})});hP.displayName="BubbleSelect";function fP(t){const e=Nr(t),r=y.useRef(""),n=y.useRef(0),s=y.useCallback(a=>{const l=r.current+a;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=y.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function mP(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let a=wH(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function wH(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var bH=Uj,pP=Gj,EH=zj,CH=Hj,NH=Wj,gP=Qj,_H=Xj,yP=tP,vP=nP,TH=sP,AH=oP,xP=aP,wP=lP,bP=uP;const SH=bH,RH=EH,EP=y.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(pP,{ref:n,className:ot("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,o.jsx(CH,{asChild:!0,children:o.jsx(Qu,{className:"h-4 w-4 opacity-50"})})]}));EP.displayName=pP.displayName;const CP=y.forwardRef(({className:t,...e},r)=>o.jsx(xP,{ref:r,className:ot("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(ym,{className:"h-4 w-4"})}));CP.displayName=xP.displayName;const NP=y.forwardRef(({className:t,...e},r)=>o.jsx(wP,{ref:r,className:ot("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(Qu,{className:"h-4 w-4"})}));NP.displayName=wP.displayName;const _P=y.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>o.jsx(NH,{children:o.jsxs(gP,{ref:s,className:ot("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[o.jsx(CP,{}),o.jsx(_H,{className:ot("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(NP,{})]})}));_P.displayName=gP.displayName;const IH=y.forwardRef(({className:t,...e},r)=>o.jsx(yP,{ref:r,className:ot("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));IH.displayName=yP.displayName;const Bf=y.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(vP,{ref:n,className:ot("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(AH,{children:o.jsx(TA,{className:"h-4 w-4"})})}),o.jsx(TH,{children:e})]}));Bf.displayName=vP.displayName;const jH=y.forwardRef(({className:t,...e},r)=>o.jsx(bP,{ref:r,className:ot("-mx-1 my-1 h-px bg-muted",t),...e}));jH.displayName=bP.displayName;const PH=()=>{const{user:t,loading:e,updateUserRole:r}=Es(),n=Xn(),[s,i]=y.useState([]),[a,l]=y.useState(!0),[c,u]=y.useState(null),[d,f]=y.useState(null),[m,g]=y.useState(null);if(y.useEffect(()=>{!e&&(!t||t.role!=="super_admin")&&n("/dashboard")},[t,e,n]),y.useEffect(()=>{const w=async()=>{if(!(!t||t.role!=="super_admin"))try{const C=Aa(ft,"users"),I=Md(C,jw("createdAt","desc")),j=await Op(I),V=[];j.forEach(R=>{const _=R.data();V.push({id:R.id,name:_.name,email:_.email,role:_.role||"customer",purchases:_.purchases||0,createdAt:_.createdAt})}),i(V)}catch(C){console.error("Error loading users:",C),Ye({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{l(!1)}};(t==null?void 0:t.role)==="super_admin"&&w()},[t]),e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!t||t.role!=="super_admin")return null;const x=async(w,C)=>{if(w===t.id){Ye({title:"Cannot Update Own Role",description:"You cannot change your own role",variant:"destructive"});return}u(w);try{await r(w,C),Ye({title:"Role Updated",description:"User role has been updated successfully!"}),i(I=>I.map(j=>j.id===w?{...j,role:C}:j))}catch(I){console.error("Error updating role:",I),Ye({title:"Update Failed",description:"Failed to update user role. Please try again.",variant:"destructive"})}finally{u(null)}},p=async w=>{f(w);try{await _R($t(ft,"users",w)),i(C=>C.filter(I=>I.id!==w)),Ye({title:"User Deleted",description:"The user has been deleted successfully."})}catch(C){console.error("Error deleting user:",C),Ye({title:"Delete Failed",description:"Failed to delete user. Please try again.",variant:"destructive"})}finally{f(null),g(null)}},b=w=>{switch(w){case"super_admin":return o.jsx(_y,{className:"w-4 h-4 text-yellow-500"});case"admin":return o.jsx(Bx,{className:"w-4 h-4 text-blue-500"});case"customer":return o.jsx(zs,{className:"w-4 h-4 text-gray-500"});default:return o.jsx(zs,{className:"w-4 h-4 text-gray-500"})}},E=w=>{switch(w){case"super_admin":return"text-yellow-500 bg-yellow-500/10 border-yellow-500/20";case"admin":return"text-blue-500 bg-blue-500/10 border-blue-500/20";case"customer":return"text-gray-500 bg-gray-500/10 border-gray-500/20";default:return"text-gray-500 bg-gray-500/10 border-gray-500/20"}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(si,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"User Management"})]}),o.jsxs("div",{className:"flex items-center text-gray-400",children:[o.jsx(_y,{className:"w-6 h-6 mr-2 text-yellow-500"}),o.jsx("span",{className:"text-sm",children:"Super Admin Panel"})]})]})}),o.jsx("div",{className:"flex-1 px-6 py-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Manage Users"}),o.jsx("p",{className:"text-gray-400",children:"Update user roles and permissions"})]}),a?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-white",children:"Loading users..."})]}):o.jsx("div",{className:"space-y-4",children:s.map(w=>o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[b(w.role),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold",children:w.name}),o.jsx("p",{className:"text-gray-400 text-sm",children:w.email}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${E(w.role)}`,children:w.role.replace("_"," ").toUpperCase()}),o.jsxs("span",{className:"text-gray-500 text-xs",children:[w.purchases," purchases"]})]})]})]})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[w.id!==t.id&&o.jsx(o.Fragment,{children:o.jsxs(SH,{value:w.role,onValueChange:C=>x(w.id,C),disabled:c===w.id,children:[o.jsx(EP,{className:"w-32 bg-gray-700 border-gray-600 text-white",children:o.jsx(RH,{})}),o.jsxs(_P,{className:"bg-gray-800 border-gray-700",children:[o.jsx(Bf,{value:"customer",children:"Customer"}),o.jsx(Bf,{value:"admin",children:"Admin"}),o.jsx(Bf,{value:"super_admin",children:"Super Admin"})]})]})}),w.id===t.id&&o.jsx("span",{className:"text-gray-500 text-sm",children:"Current User"})]})]},w.id))}),s.length===0&&!a&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Cn,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No users found"})]})]})})})]}),m&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:o.jsxs("div",{className:"bg-gray-900 rounded-lg p-8 border border-red-700 shadow-xl w-full max-w-sm",children:[o.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Confirm Delete"}),o.jsxs("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to delete"," ",o.jsx("span",{className:"font-semibold text-red-400",children:m.name}),"? This action cannot be undone."]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(Te,{variant:"ghost",onClick:()=>g(null),className:"text-gray-300 hover:text-white",children:"Cancel"}),o.jsx(Te,{variant:"destructive",onClick:()=>p(m.id),disabled:d===m.id,children:d===m.id?"Deleting...":"Delete"})]})]})})]})},kH=()=>{const t=ai();return y.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};let TP=!0,AP=!0;function uu(t,e,r){const n=t.match(e);return n&&n.length>=r&&parseFloat(n[r],10)}function Pa(t,e,r){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype,s=n.addEventListener;n.addEventListener=function(a,l){if(a!==e)return s.apply(this,arguments);const c=u=>{const d=r(u);d&&(l.handleEvent?l.handleEvent(d):l(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,c),s.apply(this,[a,c])};const i=n.removeEventListener;n.removeEventListener=function(a,l){if(a!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(l))return i.apply(this,arguments);const c=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[a,c])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function MH(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(TP=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function DH(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(AP=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function SP(){if(typeof window=="object"){if(TP)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function wb(t,e){AP&&console.warn(t+" is deprecated, please use "+e+" instead.")}function OH(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=t;if(r.userAgentData&&r.userAgentData.brands){const n=r.userAgentData.brands.find(s=>s.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(r.mozGetUserMedia)e.browser="firefox",e.version=parseInt(uu(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(uu(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(uu(r.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=uu(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function xN(t){return Object.prototype.toString.call(t)==="[object Object]"}function RP(t){return xN(t)?Object.keys(t).reduce(function(e,r){const n=xN(t[r]),s=n?RP(t[r]):t[r],i=n&&!Object.keys(s).length;return s===void 0||i?e:Object.assign(e,{[r]:s})},{}):t}function _v(t,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?_v(t,t.get(e[n]),r):n.endsWith("Ids")&&e[n].forEach(s=>{_v(t,t.get(s),r)})}))}function wN(t,e,r){const n=r?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const i=[];return t.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&i.push(a)}),i.forEach(a=>{t.forEach(l=>{l.type===n&&l.trackId===a.id&&_v(t,l,s)})}),s}const bN=SP;function IP(t,e){const r=t&&t.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const c={};return Object.keys(l).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const d=typeof l[u]=="object"?l[u]:{ideal:l[u]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const f=function(m,g){return m?m+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(d.ideal!==void 0){c.optional=c.optional||[];let m={};typeof d.ideal=="number"?(m[f("min",u)]=d.ideal,c.optional.push(m),m={},m[f("max",u)]=d.ideal,c.optional.push(m)):(m[f("",u)]=d.ideal,c.optional.push(m))}d.exact!==void 0&&typeof d.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[f("",u)]=d.exact):["min","max"].forEach(m=>{d[m]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[f(m,u)]=d[m])})}),l.advanced&&(c.optional=(c.optional||[]).concat(l.advanced)),c},s=function(l,c){if(e.version>=61)return c(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const u=function(d,f,m){f in d&&!(m in d)&&(d[m]=d[f],delete d[f])};l=JSON.parse(JSON.stringify(l)),u(l.audio,"autoGainControl","googAutoGainControl"),u(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let u=l.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const d=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete l.video.facingMode;let f;if(u.exact==="environment"||u.ideal==="environment"?f=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(f=["front"]),f)return r.mediaDevices.enumerateDevices().then(m=>{m=m.filter(x=>x.kind==="videoinput");let g=m.find(x=>f.some(p=>x.label.toLowerCase().includes(p)));return!g&&m.length&&f.includes("back")&&(g=m[m.length-1]),g&&(l.video.deviceId=u.exact?{exact:g.deviceId}:{ideal:g.deviceId}),l.video=n(l.video),bN("chrome: "+JSON.stringify(l)),c(l)})}l.video=n(l.video)}return bN("chrome: "+JSON.stringify(l)),c(l)},i=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(l,c,u){s(l,d=>{r.webkitGetUserMedia(d,c,f=>{u&&u(i(f))})})};if(r.getUserMedia=a.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(c){return s(c,u=>l(u).then(d=>{if(u.audio&&!d.getAudioTracks().length||u.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(i(d))))}}}function jP(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function PP(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.track.id):i={track:s.track};const a=new Event("track");a.track=s.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[n.stream],this.dispatchEvent(a)}),n.stream.getTracks().forEach(s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(l=>l.track&&l.track.id===s.id):i={track:s};const a=new Event("track");a.track=s,a.receiver=i,a.transceiver={receiver:i},a.streams=[n.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Pa(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function kP(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=s.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,c){let u=s.apply(this,arguments);return u||(u=e(this,l),this._senders.push(u)),u};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){i.apply(this,arguments);const c=this._senders.indexOf(l);c!==-1&&this._senders.splice(c,1)}}const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(a=>{this._senders.push(e(this,a))})};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(a=>{const l=this._senders.find(c=>c.track===a);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function MP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(a=>a._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(a=>wN(a,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=r.apply(this,[]);return s.forEach(i=>i._pc=this),s}),Pa(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>wN(i,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const n=arguments[0];let s,i,a;return this.getSenders().forEach(l=>{l.track===n&&(s?a=!0:s=l)}),this.getReceivers().forEach(l=>(l.track===n&&(i?a=!0:i=l),l.track===n)),a||s&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function DP(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(c)===-1&&this._shimmedLocalStreams[l.id].push(c):this._shimmedLocalStreams[l.id]=[l,c],c};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(u=>{if(this.getSenders().find(f=>f.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const c=this.getSenders().filter(u=>l.indexOf(u)===-1);this._shimmedLocalStreams[a.id]=[a].concat(c)};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],n.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const c=this._shimmedLocalStreams[l].indexOf(a);c!==-1&&this._shimmedLocalStreams[l].splice(c,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),s.apply(this,arguments)}}function OP(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return DP(t);const r=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const d=r.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(f=>this._reverseStreams[f.id])};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(f=>{if(this.getSenders().find(g=>g.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const f=new t.MediaStream(d.getTracks());this._streams[d.id]=f,this._reverseStreams[f.id]=d,d=f}n.apply(this,[d])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},t.RTCPeerConnection.prototype.addTrack=function(d,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const m=[].slice.call(arguments,1);if(m.length!==1||!m[0].getTracks().find(p=>p===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[f.id];if(x)x.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const p=new t.MediaStream([d]);this._streams[f.id]=p,this._reverseStreams[p.id]=f,this.addStream(p)}return this.getSenders().find(p=>p.track===d)};function i(u,d){let f=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const g=u._reverseStreams[m],x=u._streams[g.id];f=f.replace(new RegExp(x.id,"g"),g.id)}),new RTCSessionDescription({type:d.type,sdp:f})}function a(u,d){let f=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(m=>{const g=u._reverseStreams[m],x=u._streams[g.id];f=f.replace(new RegExp(g.id,"g"),x.id)}),new RTCSessionDescription({type:d.type,sdp:f})}["createOffer","createAnswer"].forEach(function(u){const d=t.RTCPeerConnection.prototype[u],f={[u](){const m=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[x=>{const p=i(this,x);m[0].apply(null,[p])},x=>{m[1]&&m[1].apply(null,x)},arguments[2]]):d.apply(this,arguments).then(x=>i(this,x))}};t.RTCPeerConnection.prototype[u]=f[u]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=a(this,arguments[0]),l.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=c.get.apply(this);return u.type===""?u:i(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let m;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(p=>d.track===p)&&(m=this._streams[g])}),m&&(m.getTracks().length===1?this.removeStream(this._reverseStreams[m.id]):m.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Tv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=t.RTCPeerConnection.prototype[r],s={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=s[r]})}function LP(t,e){Pa(t,"negotiationneeded",r=>{const n=r.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const EN=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:LP,shimAddTrackRemoveTrack:OP,shimAddTrackRemoveTrackWithNative:DP,shimGetSendersWithDtmf:kP,shimGetUserMedia:IP,shimMediaStream:jP,shimOnTrack:PP,shimPeerConnection:Tv,shimSenderReceiverGetStats:MP},Symbol.toStringTag,{value:"Module"}));function FP(t,e){const r=t&&t.navigator,n=t&&t.MediaStreamTrack;if(r.getUserMedia=function(s,i,a){wb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(s).then(i,a)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const s=function(a,l,c){l in a&&!(c in a)&&(a[c]=a[l],delete a[l])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),s(a.audio,"autoGainControl","mozAutoGainControl"),s(a.audio,"noiseSuppression","mozNoiseSuppression")),i(a)},n&&n.prototype.getSettings){const a=n.prototype.getSettings;n.prototype.getSettings=function(){const l=a.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[l])}}}}function LH(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}function VP(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Av(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const i=t.RTCPeerConnection.prototype[s],a={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=a[s]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,a,l]=arguments;return n.apply(this,[i||null]).then(c=>{if(e.version<53&&!a)try{c.forEach(u=>{u.type=r[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;c.forEach((d,f)=>{c.set(f,Object.assign({},d,{type:r[d.type]||d.type}))})}return c}).then(a,l)}}function BP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(i=>i._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function UP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n}),Pa(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function qP(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){wb("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function GP(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function $P(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const s=n.length>0;s&&n.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=e.apply(this,arguments);if(s){const{sender:a}=i,l=a.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n,a.sendEncodings=n,this.setParametersPromises.push(a.setParameters(l).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return i})}function zP(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function HP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function WP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const CN=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:$P,shimCreateAnswer:WP,shimCreateOffer:HP,shimGetDisplayMedia:LH,shimGetParameters:zP,shimGetUserMedia:FP,shimOnTrack:VP,shimPeerConnection:Av,shimRTCDataChannel:GP,shimReceiverGetStats:UP,shimRemoveStream:qP,shimSenderGetStats:BP},Symbol.toStringTag,{value:"Module"}));function QP(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(s=>e.call(this,s,n)),n.getVideoTracks().forEach(s=>e.call(this,s,n))},t.RTCPeerConnection.prototype.addTrack=function(n,...s){return s&&s.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const s=r.getTracks();this.getSenders().forEach(i=>{s.includes(i.track)&&this.removeTrack(i)})})}}function YP(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,this.dispatchEvent(i)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(i=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(i)>=0)return;n._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,n.dispatchEvent(a)})}),e.apply(n,arguments)}}}function KP(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,r=e.createOffer,n=e.createAnswer,s=e.setLocalDescription,i=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(u,d){const f=arguments.length>=2?arguments[2]:arguments[0],m=r.apply(this,[f]);return d?(m.then(u,d),Promise.resolve()):m},e.createAnswer=function(u,d){const f=arguments.length>=2?arguments[2]:arguments[0],m=n.apply(this,[f]);return d?(m.then(u,d),Promise.resolve()):m};let l=function(c,u,d){const f=s.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f};e.setLocalDescription=l,l=function(c,u,d){const f=i.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f},e.setRemoteDescription=l,l=function(c,u,d){const f=a.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f},e.addIceCandidate=l}function JP(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,n=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=s=>n(XP(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(n,s,i){e.mediaDevices.getUserMedia(n).then(s,i)}).bind(e))}function XP(t){return t&&t.video!==void 0?Object.assign({},t,{video:RP(t.video)}):t}function ZP(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,s){if(n&&n.iceServers){const i=[];for(let a=0;a<n.iceServers.length;a++){let l=n.iceServers[a];l.urls===void 0&&l.url?(wb("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,i.push(l)):i.push(n.iceServers[a])}n.iceServers=i}return new e(n,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function e4(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function t4(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function r4(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const NN=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:r4,shimCallbacksAPI:KP,shimConstraints:XP,shimCreateOfferLegacy:t4,shimGetUserMedia:JP,shimLocalStreamsAPI:QP,shimRTCIceServerUrls:ZP,shimRemoteStreamsAPI:YP,shimTrackEventTransceiver:e4},Symbol.toStringTag,{value:"Module"}));var n4={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(r){return r.split(`
m=`).map((s,i)=>(i>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(r){const n=e.splitSections(r);return n&&n[0]},e.getMediaSections=function(r){const n=e.splitSections(r);return n.shift(),n},e.matchPrefix=function(r,n){return e.splitLines(r).filter(s=>s.indexOf(n)===0)},e.parseCandidate=function(r){let n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");const s={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let i=8;i<n.length;i+=2)switch(n[i]){case"raddr":s.relatedAddress=n[i+1];break;case"rport":s.relatedPort=parseInt(n[i+1],10);break;case"tcptype":s.tcpType=n[i+1];break;case"ufrag":s.ufrag=n[i+1],s.usernameFragment=n[i+1];break;default:s[n[i]]===void 0&&(s[n[i]]=n[i+1]);break}return s},e.writeCandidate=function(r){const n=[];n.push(r.foundation);const s=r.component;s==="rtp"?n.push(1):s==="rtcp"?n.push(2):n.push(s),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);const i=r.type;return n.push("typ"),n.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let n=r.substring(9).split(" ");const s={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),s.name=n[0],s.clockRate=parseInt(n[1],10),s.channels=n.length===3?parseInt(n[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);const s=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(r){const n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const n={};let s;const i=r.substring(r.indexOf(" ")+1).split(";");for(let a=0;a<i.length;a++)s=i[a].trim().split("="),n[s[0].trim()]=s[1];return n},e.writeFmtp=function(r){let n="",s=r.payloadType;if(r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const i=[];Object.keys(r.parameters).forEach(a=>{r.parameters[a]!==void 0?i.push(a+"="+r.parameters[a]):i.push(a)}),n+="a=fmtp:"+s+" "+i.join(";")+`\r
`}return n},e.parseRtcpFb=function(r){const n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(r){let n="",s=r.payloadType;return r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(i=>{n+="a=rtcp-fb:"+s+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(r){const n=r.indexOf(" "),s={ssrc:parseInt(r.substring(7,n),10)},i=r.indexOf(":",n);return i>-1?(s.attribute=r.substring(n+1,i),s.value=r.substring(i+1)):s.attribute=r.substring(n+1),s},e.parseSsrcGroup=function(r){const n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(s=>parseInt(s,10))}},e.getMid=function(r){const n=e.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(r){const n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:e.matchPrefix(r+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,n){let s="a=setup:"+n+`\r
`;return r.fingerprints.forEach(i=>{s+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),s},e.parseCryptoLine=function(r){const n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,n){return e.matchPrefix(r+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,n){const s=e.matchPrefix(r+n,"a=ice-ufrag:")[0],i=e.matchPrefix(r+n,"a=ice-pwd:")[0];return s&&i?{usernameFragment:s.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(r){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(r)[0].split(" ");n.profile=i[2];for(let l=3;l<i.length;l++){const c=i[l],u=e.matchPrefix(r,"a=rtpmap:"+c+" ")[0];if(u){const d=e.parseRtpMap(u),f=e.matchPrefix(r,"a=fmtp:"+c+" ");switch(d.parameters=f.length?e.parseFmtp(f[0]):{},d.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),n.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(d.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(l=>{n.headerExtensions.push(e.parseExtmap(l))});const a=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(l=>{a.forEach(c=>{l.rtcpFeedback.find(d=>d.type===c.type&&d.parameter===c.parameter)||l.rtcpFeedback.push(c)})}),n},e.writeRtpDescription=function(r,n){let s="";s+="m="+r+" ",s+=n.codecs.length>0?"9":"0",s+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=n.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(a=>{s+=e.writeRtpMap(a),s+=e.writeFmtp(a),s+=e.writeRtcpFb(a)});let i=0;return n.codecs.forEach(a=>{a.maxptime>i&&(i=a.maxptime)}),i>0&&(s+="a=maxptime:"+i+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(a=>{s+=e.writeExtmap(a)}),s},e.parseRtpEncodingParameters=function(r){const n=[],s=e.parseRtpParameters(r),i=s.fecMechanisms.indexOf("RED")!==-1,a=s.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(r,"a=ssrc:").map(m=>e.parseSsrcMedia(m)).filter(m=>m.attribute==="cname"),c=l.length>0&&l[0].ssrc;let u;const d=e.matchPrefix(r,"a=ssrc-group:FID").map(m=>m.substring(17).split(" ").map(x=>parseInt(x,10)));d.length>0&&d[0].length>1&&d[0][0]===c&&(u=d[0][1]),s.codecs.forEach(m=>{if(m.name.toUpperCase()==="RTX"&&m.parameters.apt){let g={ssrc:c,codecPayloadType:parseInt(m.parameters.apt,10)};c&&u&&(g.rtx={ssrc:u}),n.push(g),i&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(g))}}),n.length===0&&c&&n.push({ssrc:c});let f=e.matchPrefix(r,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,n.forEach(m=>{m.maxBitrate=f})),n},e.parseRtcpParameters=function(r){const n={},s=e.matchPrefix(r,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];s&&(n.cname=s.value,n.ssrc=s.ssrc);const i=e.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=i.length===0;const a=e.matchPrefix(r,"a=rtcp-mux");return n.mux=a.length>0,n},e.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},e.parseMsid=function(r){let n;const s=e.matchPrefix(r,"a=msid:");if(s.length===1)return n=s[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=e.matchPrefix(r,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(i.length>0)return n=i[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(r){const n=e.parseMLine(r),s=e.matchPrefix(r,"a=max-message-size:");let i;s.length>0&&(i=parseInt(s[0].substring(19),10)),isNaN(i)&&(i=65536);const a=e.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const l=e.matchPrefix(r,"a=sctpmap:");if(l.length>0){const c=l[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:i}}},e.writeSctpDescription=function(r,n){let s=[];return r.protocol!=="DTLS/SCTP"?s=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:s=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&s.push("a=max-message-size:"+n.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,n,s){let i;const a=n!==void 0?n:2;return r?i=r:i=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+i+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,n){const s=e.splitLines(r);for(let i=0;i<s.length;i++)switch(s[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[i].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const s=e.splitLines(r)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(r){const s=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const n=e.splitLines(r);for(let s=0;s<n.length;s++)if(n[s].length<2||n[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(n4);var s4=n4.exports;const Pl=Mv(s4),FH=FN({__proto__:null,default:Pl},[s4]);function Uf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const s=new e(n),i=Pl.parseCandidate(n.candidate);for(const a in i)a in s||Object.defineProperty(s,a,{value:i[a]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(n)},t.RTCIceCandidate.prototype=e.prototype,Pa(t,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Sv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Pa(t,"icecandidate",e=>{if(e.candidate){const r=Pl.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function qf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const c=Pl.splitSections(l.sdp);return c.shift(),c.some(u=>{const d=Pl.parseMLine(u);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},n=function(l){const c=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const u=parseInt(c[1],10);return u!==u?-1:u},s=function(l){let c=65536;return e.browser==="firefox"&&(e.version<57?l===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},i=function(l,c){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const d=Pl.matchPrefix(l.sdp,"a=max-message-size:");return d.length>0?u=parseInt(d[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(u=2147483637),u},a=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const c=n(arguments[0]),u=s(c),d=i(arguments[0],c);let f;u===0&&d===0?f=Number.POSITIVE_INFINITY:u===0||d===0?f=Math.max(u,d):f=Math.min(u,d);const m={};Object.defineProperty(m,"maxMessageSize",{get(){return f}}),this._sctp=m}return a.apply(this,arguments)}}function Gf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(n,s){const i=n.send;n.send=function(){const l=arguments[0],c=l.length||l.size||l.byteLength;if(n.readyState==="open"&&s.sctp&&c>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return i.apply(n,arguments)}}const r=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=r.apply(this,arguments);return e(s,this),s},Pa(t,"datachannel",n=>(e(n.channel,n.target),n))}function Rv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const i=s.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const a=new Event("connectionstatechange",s);i.dispatchEvent(a)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Iv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=s.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:i}):s.sdp=i}return r.apply(this,arguments)}}function $f(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function zf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return r.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?r.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>r.apply(this,[a]))})}const VH=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Iv,shimAddIceCandidateNullOrEmpty:$f,shimConnectionState:Rv,shimMaxMessageSize:qf,shimParameterlessSetLocalDescription:zf,shimRTCIceCandidate:Uf,shimRTCIceCandidateRelayProtocol:Sv,shimSendThrowTypeError:Gf},Symbol.toStringTag,{value:"Module"}));function BH({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=SP,n=OH(t),s={browserDetails:n,commonShim:VH,extractVersion:uu,disableLog:MH,disableWarnings:DH,sdp:FH};switch(n.browser){case"chrome":if(!EN||!Tv||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),s;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),s;r("adapter.js shimming chrome."),s.browserShim=EN,$f(t,n),zf(t),IP(t,n),jP(t),Tv(t,n),PP(t),OP(t,n),kP(t),MP(t),LP(t,n),Uf(t),Sv(t),Rv(t),qf(t,n),Gf(t),Iv(t,n);break;case"firefox":if(!CN||!Av||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),s;r("adapter.js shimming firefox."),s.browserShim=CN,$f(t,n),zf(t),FP(t,n),Av(t,n),VP(t),qP(t),BP(t),UP(t),GP(t),$P(t),zP(t),HP(t),WP(t),Uf(t),Rv(t),qf(t,n),Gf(t);break;case"safari":if(!NN||!e.shimSafari)return r("Safari shim is not included in this adapter release."),s;r("adapter.js shimming safari."),s.browserShim=NN,$f(t,n),zf(t),ZP(t),t4(t),KP(t),QP(t),YP(t),e4(t),JP(t),r4(t),Uf(t),Sv(t),qf(t,n),Gf(t),Iv(t,n);break;default:r("Unsupported browser!");break}return s}BH({window:typeof window>"u"?void 0:window});var i4=t=>{throw TypeError(t)},o4=(t,e,r)=>e.has(t)||i4("Cannot "+r),UH=(t,e,r)=>(o4(t,e,"read from private field"),r?r.call(t):e.get(t)),qH=(t,e,r)=>e.has(t)?i4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),GH=(t,e,r,n)=>(o4(t,e,"write to private field"),e.set(t,r),r);const og=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],ag=og.map(([t])=>t),$H=ag.filter((t,e)=>og[e][1]==="L"),zH=ag.filter((t,e)=>og[e][1]==="M");function jv(t){switch(t){case"Linear-Codes":return $H.reduce((e,r)=>e|jv(r),0);case"Matrix-Codes":return zH.reduce((e,r)=>e|jv(r),0);case"Any":return(1<<og.length)-1;case"None":return 0;default:return 1<<ag.indexOf(t)}}function HH(t){if(t===0)return"None";const e=31-Math.clz32(t);return ag[e]}function WH(t){return t.reduce((e,r)=>e|jv(r),0)}const QH=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function YH(t){return QH.indexOf(t)}const _N=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function KH(t){return t==="UnicodeBig"?_N.indexOf("UTF16BE"):_N.indexOf(t)}const JH=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function XH(t){return JH[t]}const ZH=["Ignore","Read","Require"];function eW(t){return ZH.indexOf(t)}const tW=["Plain","ECI","HRI","Hex","Escaped"];function rW(t){return tW.indexOf(t)}const Qm={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function TN(t){return{...t,formats:WH(t.formats),binarizer:YH(t.binarizer),eanAddOnSymbol:eW(t.eanAddOnSymbol),textMode:rW(t.textMode),characterSet:KH(t.characterSet)}}function nW(t){return{...t,format:HH(t.format),contentType:XH(t.contentType),eccLevel:t.ecLevel}}const sW={locateFile:(t,e)=>{const r=t.match(/_(.+?)\.wasm$/);return r?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.1.2/dist/${r[1]}/${t}`:e+t}},A0=new WeakMap;function iW(t,e){return Object.is(t,e)||Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>Object.prototype.hasOwnProperty.call(e,r)&&t[r]===e[r])}function a4(t,{overrides:e,equalityFn:r=iW,fireImmediately:n=!1}={}){var s;const[i,a]=(s=A0.get(t))!=null?s:[sW],l=e??i;let c;if(n){if(a&&(c=r(i,l)))return a;const u=t({...l});return A0.set(t,[l,u]),u}(c??r(i,l))||A0.set(t,[l])}async function oW(t,e,r=Qm){const n={...Qm,...r},s=await a4(t,{fireImmediately:!0});let i,a;if("width"in e&&"height"in e&&"data"in e){const{data:c,data:{byteLength:u},width:d,height:f}=e;a=s._malloc(u),s.HEAPU8.set(c,a),i=s.readBarcodesFromPixmap(a,d,f,TN(n))}else{let c,u;if("buffer"in e)[c,u]=[e.byteLength,e];else if("byteLength"in e)[c,u]=[e.byteLength,new Uint8Array(e)];else if("size"in e)[c,u]=[e.size,new Uint8Array(await e.arrayBuffer())];else throw new TypeError("Invalid input type");a=s._malloc(c),s.HEAPU8.set(u,a),i=s.readBarcodesFromImage(a,c,TN(n))}s._free(a);const l=[];for(let c=0;c<i.size();++c)l.push(nW(i.get(c)));return l}({...Qm,formats:[...Qm.formats]});var l4=async function(t={}){var e,r=t,n,s,i=new Promise((T,N)=>{n=T,s=N}),a=typeof window=="object",l=typeof Bun<"u",c=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var u="./this.program",d="";function f(T){return r.locateFile?r.locateFile(T,d):d+T}var m,g;(a||c||l)&&(c?d=self.location.href:typeof document<"u"&&document.currentScript&&(d=document.currentScript.src),d.startsWith("blob:")?d="":d=d.slice(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1),c&&(g=T=>{var N=new XMLHttpRequest;return N.open("GET",T,!1),N.responseType="arraybuffer",N.send(null),new Uint8Array(N.response)}),m=async T=>{var N=await fetch(T,{credentials:"same-origin"});if(N.ok)return N.arrayBuffer();throw new Error(N.status+" : "+N.url)});var x=console.log.bind(console),p=console.error.bind(console),b,E,w=!1,C,I,j,V,R,_,A,k;function L(){var T=E.buffer;C=new Int8Array(T),j=new Int16Array(T),r.HEAPU8=I=new Uint8Array(T),V=new Uint16Array(T),R=new Int32Array(T),_=new Uint32Array(T),A=new Float32Array(T),k=new Float64Array(T)}function M(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Ce(r.preRun.shift());de(Ee)}function P(){v.ya()}function B(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)me(r.postRun.shift());de(G)}var z=0,Q=null;function Z(T){var N;z++,(N=r.monitorRunDependencies)===null||N===void 0||N.call(r,z)}function U(T){var N;if(z--,(N=r.monitorRunDependencies)===null||N===void 0||N.call(r,z),z==0&&Q){var D=Q;Q=null,D()}}function H(T){var N;(N=r.onAbort)===null||N===void 0||N.call(r,T),T="Aborted("+T+")",p(T),w=!0,T+=". Build with -sASSERTIONS for more info.";var D=new WebAssembly.RuntimeError(T);throw s(D),D}var ie;function ne(){return f("zxing_reader.wasm")}function le(T){if(T==ie&&b)return new Uint8Array(b);if(g)return g(T);throw"both async and sync fetching of the wasm failed"}async function he(T){if(!b)try{var N=await m(T);return new Uint8Array(N)}catch{}return le(T)}async function Ne(T,N){try{var D=await he(T),F=await WebAssembly.instantiate(D,N);return F}catch(q){p(`failed to asynchronously prepare wasm: ${q}`),H(q)}}async function Me(T,N,D){if(!T&&typeof WebAssembly.instantiateStreaming=="function")try{var F=fetch(N,{credentials:"same-origin"}),q=await WebAssembly.instantiateStreaming(F,D);return q}catch($){p(`wasm streaming compile failed: ${$}`),p("falling back to ArrayBuffer instantiation")}return Ne(N,D)}function ue(){return{a:h}}async function ee(){function T($,K){return v=$.exports,E=v.xa,L(),Fa=v.Ba,U(),v}Z();function N($){return T($.instance)}var D=ue();if(r.instantiateWasm)return new Promise(($,K)=>{r.instantiateWasm(D,(Y,ae)=>{$(T(Y))})});ie!=null||(ie=ne());try{var F=await Me(b,ie,D),q=N(F);return q}catch($){return s($),Promise.reject($)}}var de=T=>{for(;T.length>0;)T.shift()(r)},G=[],me=T=>G.push(T),Ee=[],Ce=T=>Ee.push(T),pe=T=>Ht(T),ve=()=>Ke(),at=[],ht=0,Ft=T=>{var N=new hr(T);return N.get_caught()||(N.set_caught(!0),ht--),N.set_rethrown(!1),at.push(N),Zt(T),X(T)},rt=0,wt=()=>{te(0,0);var T=at.pop();Xt(T.excPtr),rt=0};class hr{constructor(N){this.excPtr=N,this.ptr=N-24}set_type(N){_[this.ptr+4>>2]=N}get_type(){return _[this.ptr+4>>2]}set_destructor(N){_[this.ptr+8>>2]=N}get_destructor(){return _[this.ptr+8>>2]}set_caught(N){N=N?1:0,C[this.ptr+12]=N}get_caught(){return C[this.ptr+12]!=0}set_rethrown(N){N=N?1:0,C[this.ptr+13]=N}get_rethrown(){return C[this.ptr+13]!=0}init(N,D){this.set_adjusted_ptr(0),this.set_type(N),this.set_destructor(D)}set_adjusted_ptr(N){_[this.ptr+16>>2]=N}get_adjusted_ptr(){return _[this.ptr+16>>2]}}var An=T=>lt(T),Cs=T=>{var N=rt;if(!N)return An(0),0;var D=new hr(N);D.set_adjusted_ptr(N);var F=D.get_type();if(!F)return An(0),N;for(var q of T){if(q===0||q===F)break;var $=D.ptr+16;if(yi(q,F,$))return An(q),N}return An(F),N},hn=()=>Cs([]),Ns=T=>Cs([T]),Po=(T,N)=>Cs([T,N]),It=()=>{var T=at.pop();T||H("no exception to throw");var N=T.excPtr;throw T.get_rethrown()||(at.push(T),T.set_rethrown(!0),T.set_caught(!1),ht++),rt=N,rt},bt=(T,N,D)=>{var F=new hr(T);throw F.init(N,D),rt=T,ht++,rt},_s=()=>ht,Sn=T=>{throw rt||(rt=T),rt},ko=()=>H(""),li={},fn=T=>{for(;T.length;){var N=T.pop(),D=T.pop();D(N)}};function Rn(T){return this.fromWireType(_[T>>2])}var In={},Ar={},Sr={},Tc=r.InternalError=class extends Error{constructor(T){super(T),this.name="InternalError"}},je=T=>{throw new Tc(T)},ze=(T,N,D)=>{T.forEach(Y=>Sr[Y]=N);function F(Y){var ae=D(Y);ae.length!==T.length&&je("Mismatched type converter count");for(var fe=0;fe<T.length;++fe)mr(T[fe],ae[fe])}var q=new Array(N.length),$=[],K=0;N.forEach((Y,ae)=>{Ar.hasOwnProperty(Y)?q[ae]=Ar[Y]:($.push(Y),In.hasOwnProperty(Y)||(In[Y]=[]),In[Y].push(()=>{q[ae]=Ar[Y],++K,K===$.length&&F(q)}))}),$.length===0&&F(q)},et=T=>{var N=li[T];delete li[T];var D=N.rawConstructor,F=N.rawDestructor,q=N.fields,$=q.map(K=>K.getterReturnType).concat(q.map(K=>K.setterArgumentType));ze([T],$,K=>{var Y={};return q.forEach((ae,fe)=>{var ge=ae.fieldName,Ie=K[fe],Xe=K[fe].optional,tt=ae.getter,Ct=ae.getterContext,Wt=K[fe+q.length],Vt=ae.setter,er=ae.setterContext;Y[ge]={read:Ms=>Ie.fromWireType(tt(Ct,Ms)),write:(Ms,Br)=>{var pn=[];Vt(er,Ms,Wt.toWireType(pn,Br)),fn(pn)},optional:Xe}}),[{name:N.name,fromWireType:ae=>{var fe={};for(var ge in Y)fe[ge]=Y[ge].read(ae);return F(ae),fe},toWireType:(ae,fe)=>{for(var ge in Y)if(!(ge in fe)&&!Y[ge].optional)throw new TypeError(`Missing field: "${ge}"`);var Ie=D();for(ge in Y)Y[ge].write(Ie,fe[ge]);return ae!==null&&ae.push(F,Ie),Ie},argPackAdvance:mn,readValueFromPointer:Rn,destructorFunction:F}]})},Jt=(T,N,D,F,q)=>{},fr=()=>{for(var T=new Array(256),N=0;N<256;++N)T[N]=String.fromCharCode(N);jn=T},jn,gt=T=>{for(var N="",D=T;I[D];)N+=jn[I[D++]];return N},ci=r.BindingError=class extends Error{constructor(T){super(T),this.name="BindingError"}},Qe=T=>{throw new ci(T)};function $d(T,N){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var F=N.name;if(T||Qe(`type "${F}" must have a positive integer typeid pointer`),Ar.hasOwnProperty(T)){if(D.ignoreDuplicateRegistrations)return;Qe(`Cannot register type '${F}' twice`)}if(Ar[T]=N,delete Sr[T],In.hasOwnProperty(T)){var q=In[T];delete In[T],q.forEach($=>$())}}function mr(T,N){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $d(T,N,D)}var mn=8,ir=(T,N,D,F)=>{N=gt(N),mr(T,{name:N,fromWireType:function(q){return!!q},toWireType:function(q,$){return $?D:F},argPackAdvance:mn,readValueFromPointer:function(q){return this.fromWireType(I[q])},destructorFunction:null})},zd=T=>({count:T.count,deleteScheduled:T.deleteScheduled,preservePointerOnDelete:T.preservePointerOnDelete,ptr:T.ptr,ptrType:T.ptrType,smartPtr:T.smartPtr,smartPtrType:T.smartPtrType}),Ts=T=>{function N(D){return D.$$.ptrType.registeredClass.name}Qe(N(T)+" instance already deleted")},As=!1,Hd=T=>{},lg=T=>{T.smartPtr?T.smartPtrType.rawDestructor(T.smartPtr):T.ptrType.registeredClass.rawDestructor(T.ptr)},Ss=T=>{T.count.value-=1;var N=T.count.value===0;N&&lg(T)},Mo=T=>typeof FinalizationRegistry>"u"?(Mo=N=>N,T):(As=new FinalizationRegistry(N=>{Ss(N.$$)}),Mo=N=>{var D=N.$$,F=!!D.smartPtr;if(F){var q={$$:D};As.register(N,q,N)}return N},Hd=N=>As.unregister(N),Mo(T)),cg=()=>{let T=Rs.prototype;Object.assign(T,{isAliasOf(D){if(!(this instanceof Rs)||!(D instanceof Rs))return!1;var F=this.$$.ptrType.registeredClass,q=this.$$.ptr;D.$$=D.$$;for(var $=D.$$.ptrType.registeredClass,K=D.$$.ptr;F.baseClass;)q=F.upcast(q),F=F.baseClass;for(;$.baseClass;)K=$.upcast(K),$=$.baseClass;return F===$&&q===K},clone(){if(this.$$.ptr||Ts(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var D=Mo(Object.create(Object.getPrototypeOf(this),{$$:{value:zd(this.$$)}}));return D.$$.count.value+=1,D.$$.deleteScheduled=!1,D},delete(){this.$$.ptr||Ts(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Qe("Object already scheduled for deletion"),Hd(this),Ss(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ts(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Qe("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const N=Symbol.dispose;N&&(T[N]=T.delete)};function Rs(){}var ka=(T,N)=>Object.defineProperty(N,"name",{value:T}),Ma={},Do=(T,N,D)=>{if(T[N].overloadTable===void 0){var F=T[N];T[N]=function(){for(var q=arguments.length,$=new Array(q),K=0;K<q;K++)$[K]=arguments[K];return T[N].overloadTable.hasOwnProperty($.length)||Qe(`Function '${D}' called with an invalid number of arguments (${$.length}) - expects one of (${T[N].overloadTable})!`),T[N].overloadTable[$.length].apply(this,$)},T[N].overloadTable=[],T[N].overloadTable[F.argCount]=F}},Pn=(T,N,D)=>{r.hasOwnProperty(T)?((D===void 0||r[T].overloadTable!==void 0&&r[T].overloadTable[D]!==void 0)&&Qe(`Cannot register public name '${T}' twice`),Do(r,T,T),r[T].overloadTable.hasOwnProperty(D)&&Qe(`Cannot register multiple overloads of a function with the same number of arguments (${D})!`),r[T].overloadTable[D]=N):(r[T]=N,r[T].argCount=D)},Wd=48,Qd=57,Ac=T=>{T=T.replace(/[^a-zA-Z0-9_]/g,"$");var N=T.charCodeAt(0);return N>=Wd&&N<=Qd?`_${T}`:T};function Sc(T,N,D,F,q,$,K,Y){this.name=T,this.constructor=N,this.instancePrototype=D,this.rawDestructor=F,this.baseClass=q,this.getActualType=$,this.upcast=K,this.downcast=Y,this.pureVirtualFunctions=[]}var Da=(T,N,D)=>{for(;N!==D;)N.upcast||Qe(`Expected null or instance of ${D.name}, got an instance of ${N.name}`),T=N.upcast(T),N=N.baseClass;return T};function Yd(T,N){if(N===null)return this.isReference&&Qe(`null is not a valid ${this.name}`),0;N.$$||Qe(`Cannot pass "${embindRepr(N)}" as a ${this.name}`),N.$$.ptr||Qe(`Cannot pass deleted object as a pointer of type ${this.name}`);var D=N.$$.ptrType.registeredClass,F=Da(N.$$.ptr,D,this.registeredClass);return F}function ug(T,N){var D;if(N===null)return this.isReference&&Qe(`null is not a valid ${this.name}`),this.isSmartPointer?(D=this.rawConstructor(),T!==null&&T.push(this.rawDestructor,D),D):0;(!N||!N.$$)&&Qe(`Cannot pass "${embindRepr(N)}" as a ${this.name}`),N.$$.ptr||Qe(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&N.$$.ptrType.isConst&&Qe(`Cannot convert argument of type ${N.$$.smartPtrType?N.$$.smartPtrType.name:N.$$.ptrType.name} to parameter type ${this.name}`);var F=N.$$.ptrType.registeredClass;if(D=Da(N.$$.ptr,F,this.registeredClass),this.isSmartPointer)switch(N.$$.smartPtr===void 0&&Qe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:N.$$.smartPtrType===this?D=N.$$.smartPtr:Qe(`Cannot convert argument of type ${N.$$.smartPtrType?N.$$.smartPtrType.name:N.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:D=N.$$.smartPtr;break;case 2:if(N.$$.smartPtrType===this)D=N.$$.smartPtr;else{var q=N.clone();D=this.rawShare(D,kn.toHandle(()=>q.delete())),T!==null&&T.push(this.rawDestructor,D)}break;default:Qe("Unsupporting sharing policy")}return D}function Oa(T,N){if(N===null)return this.isReference&&Qe(`null is not a valid ${this.name}`),0;N.$$||Qe(`Cannot pass "${embindRepr(N)}" as a ${this.name}`),N.$$.ptr||Qe(`Cannot pass deleted object as a pointer of type ${this.name}`),N.$$.ptrType.isConst&&Qe(`Cannot convert argument of type ${N.$$.ptrType.name} to parameter type ${this.name}`);var D=N.$$.ptrType.registeredClass,F=Da(N.$$.ptr,D,this.registeredClass);return F}var Rc=(T,N,D)=>{if(N===D)return T;if(D.baseClass===void 0)return null;var F=Rc(T,N,D.baseClass);return F===null?null:D.downcast(F)},Ic={},Oo=(T,N)=>{for(N===void 0&&Qe("ptr should not be undefined");T.baseClass;)N=T.upcast(N),T=T.baseClass;return N},Is=(T,N)=>(N=Oo(T,N),Ic[N]),ui=(T,N)=>{(!N.ptrType||!N.ptr)&&je("makeClassHandle requires ptr and ptrType");var D=!!N.smartPtrType,F=!!N.smartPtr;return D!==F&&je("Both smartPtrType and smartPtr must be specified"),N.count={value:1},Mo(Object.create(T,{$$:{value:N,writable:!0}}))};function dg(T){var N=this.getPointee(T);if(!N)return this.destructor(T),null;var D=Is(this.registeredClass,N);if(D!==void 0){if(D.$$.count.value===0)return D.$$.ptr=N,D.$$.smartPtr=T,D.clone();var F=D.clone();return this.destructor(T),F}function q(){return this.isSmartPointer?ui(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:N,smartPtrType:this,smartPtr:T}):ui(this.registeredClass.instancePrototype,{ptrType:this,ptr:T})}var $=this.registeredClass.getActualType(N),K=Ma[$];if(!K)return q.call(this);var Y;this.isConst?Y=K.constPointerType:Y=K.pointerType;var ae=Rc(N,this.registeredClass,Y.registeredClass);return ae===null?q.call(this):this.isSmartPointer?ui(Y.registeredClass.instancePrototype,{ptrType:Y,ptr:ae,smartPtrType:this,smartPtr:T}):ui(Y.registeredClass.instancePrototype,{ptrType:Y,ptr:ae})}var Kd=()=>{Object.assign(Lo.prototype,{getPointee(T){return this.rawGetPointee&&(T=this.rawGetPointee(T)),T},destructor(T){var N;(N=this.rawDestructor)===null||N===void 0||N.call(this,T)},argPackAdvance:mn,readValueFromPointer:Rn,fromWireType:dg})};function Lo(T,N,D,F,q,$,K,Y,ae,fe,ge){this.name=T,this.registeredClass=N,this.isReference=D,this.isConst=F,this.isSmartPointer=q,this.pointeeType=$,this.sharingPolicy=K,this.rawGetPointee=Y,this.rawConstructor=ae,this.rawShare=fe,this.rawDestructor=ge,!q&&N.baseClass===void 0?F?(this.toWireType=Yd,this.destructorFunction=null):(this.toWireType=Oa,this.destructorFunction=null):this.toWireType=ug}var jc=(T,N,D)=>{r.hasOwnProperty(T)||je("Replacing nonexistent public symbol"),r[T].overloadTable!==void 0&&D!==void 0?r[T].overloadTable[D]=N:(r[T]=N,r[T].argCount=D)},La=[],Fa,Ue=T=>{var N=La[T];return N||(La[T]=N=Fa.get(T)),N},Jd=function(T,N){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(T.includes("j"))return dynCallLegacy(T,N,D);var F=Ue(N),q=F(...D);return q},hg=function(T,N){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var F=arguments.length,q=new Array(F),$=0;$<F;$++)q[$]=arguments[$];return Jd(T,N,q,D)}},Yr=function(T,N){T=gt(T);function D(){if(T.includes("j"))return hg(T,N);var q=Ue(N);return q}var F=D();return typeof F!="function"&&Qe(`unknown function pointer with signature ${T}: ${N}`),F};class Xd extends Error{}var Pc=T=>{var N=S(T),D=gt(N);return O(N),D},Va=(T,N)=>{var D=[],F={};function q($){if(!F[$]&&!Ar[$]){if(Sr[$]){Sr[$].forEach(q);return}D.push($),F[$]=!0}}throw N.forEach(q),new Xd(`${T}: `+D.map(Pc).join([", "]))},js=(T,N,D,F,q,$,K,Y,ae,fe,ge,Ie,Xe)=>{ge=gt(ge),$=Yr(q,$),Y&&(Y=Yr(K,Y)),fe&&(fe=Yr(ae,fe)),Xe=Yr(Ie,Xe);var tt=Ac(ge);Pn(tt,function(){Va(`Cannot construct ${ge} due to unbound types`,[F])}),ze([T,N,D],F?[F]:[],Ct=>{Ct=Ct[0];var Wt,Vt;F?(Wt=Ct.registeredClass,Vt=Wt.instancePrototype):Vt=Rs.prototype;var er=ka(ge,function(){if(Object.getPrototypeOf(this)!==Ms)throw new ci(`Use 'new' to construct ${ge}`);if(Br.constructor_body===void 0)throw new ci(`${ge} has no accessible constructor`);for(var Cb=arguments.length,Th=new Array(Cb),Ah=0;Ah<Cb;Ah++)Th[Ah]=arguments[Ah];var Nb=Br.constructor_body[Th.length];if(Nb===void 0)throw new ci(`Tried to invoke ctor of ${ge} with invalid number of parameters (${Th.length}) - expected (${Object.keys(Br.constructor_body).toString()}) parameters instead!`);return Nb.apply(this,Th)}),Ms=Object.create(Vt,{constructor:{value:er}});er.prototype=Ms;var Br=new Sc(ge,er,Ms,Xe,Wt,$,Y,fe);if(Br.baseClass){var pn,_h;(_h=(pn=Br.baseClass).__derivedClasses)!==null&&_h!==void 0||(pn.__derivedClasses=[]),Br.baseClass.__derivedClasses.push(Br)}var rk=new Lo(ge,Br,!0,!1,!1),bb=new Lo(ge+"*",Br,!1,!1,!1),Eb=new Lo(ge+" const*",Br,!1,!0,!1);return Ma[T]={pointerType:bb,constPointerType:Eb},jc(tt,er),[rk,bb,Eb]})},Kr=(T,N)=>{for(var D=[],F=0;F<T;F++)D.push(_[N+F*4>>2]);return D};function Ba(T){for(var N=1;N<T.length;++N)if(T[N]!==null&&T[N].destructorFunction===void 0)return!0;return!1}function di(T,N,D,F,q,$){var K=N.length;K<2&&Qe("argTypes array size mismatch! Must at least get return value and 'this' types!");var Y=N[1]!==null&&D!==null,ae=Ba(N),fe=N[0].name!=="void",ge=K-2,Ie=new Array(ge),Xe=[],tt=[],Ct=function(){tt.length=0;var Wt;Xe.length=Y?2:1,Xe[0]=q,Y&&(Wt=N[1].toWireType(tt,this),Xe[1]=Wt);for(var Vt=0;Vt<ge;++Vt)Ie[Vt]=N[Vt+2].toWireType(tt,Vt<0||arguments.length<=Vt?void 0:arguments[Vt]),Xe.push(Ie[Vt]);var er=F(...Xe);function Ms(Br){if(ae)fn(tt);else for(var pn=Y?1:2;pn<N.length;pn++){var _h=pn===1?Wt:Ie[pn-2];N[pn].destructorFunction!==null&&N[pn].destructorFunction(_h)}if(fe)return N[0].fromWireType(Br)}return Ms(er)};return ka(T,Ct)}var Zd=(T,N,D,F,q,$)=>{var K=Kr(N,D);q=Yr(F,q),ze([],[T],Y=>{Y=Y[0];var ae=`constructor ${Y.name}`;if(Y.registeredClass.constructor_body===void 0&&(Y.registeredClass.constructor_body=[]),Y.registeredClass.constructor_body[N-1]!==void 0)throw new ci(`Cannot register multiple constructors with identical number of parameters (${N-1}) for class '${Y.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Y.registeredClass.constructor_body[N-1]=()=>{Va(`Cannot construct ${Y.name} due to unbound types`,K)},ze([],K,fe=>(fe.splice(1,0,null),Y.registeredClass.constructor_body[N-1]=di(ae,fe,null,q,$),[])),[]})},dt=T=>{T=T.trim();const N=T.indexOf("(");return N===-1?T:T.slice(0,N)},Ua=(T,N,D,F,q,$,K,Y,ae,fe)=>{var ge=Kr(D,F);N=gt(N),N=dt(N),$=Yr(q,$),ze([],[T],Ie=>{Ie=Ie[0];var Xe=`${Ie.name}.${N}`;N.startsWith("@@")&&(N=Symbol[N.substring(2)]),Y&&Ie.registeredClass.pureVirtualFunctions.push(N);function tt(){Va(`Cannot call ${Xe} due to unbound types`,ge)}var Ct=Ie.registeredClass.instancePrototype,Wt=Ct[N];return Wt===void 0||Wt.overloadTable===void 0&&Wt.className!==Ie.name&&Wt.argCount===D-2?(tt.argCount=D-2,tt.className=Ie.name,Ct[N]=tt):(Do(Ct,N,Xe),Ct[N].overloadTable[D-2]=tt),ze([],ge,Vt=>{var er=di(Xe,Vt,Ie,$,K);return Ct[N].overloadTable===void 0?(er.argCount=D-2,Ct[N]=er):Ct[N].overloadTable[D-2]=er,[]}),[]})},Ps=[],Rr=[],kc=T=>{T>9&&--Rr[T+1]===0&&(Rr[T]=void 0,Ps.push(T))},eh=()=>Rr.length/2-5-Ps.length,fg=()=>{Rr.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=eh},kn={toValue:T=>(T||Qe(`Cannot use deleted val. handle = ${T}`),Rr[T]),toHandle:T=>{switch(T){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const N=Ps.pop()||Rr.length;return Rr[N]=T,Rr[N+1]=1,N}}}},th={name:"emscripten::val",fromWireType:T=>{var N=kn.toValue(T);return kc(T),N},toWireType:(T,N)=>kn.toHandle(N),argPackAdvance:mn,readValueFromPointer:Rn,destructorFunction:null},mg=T=>mr(T,th),Fo=(T,N)=>{switch(N){case 4:return function(D){return this.fromWireType(A[D>>2])};case 8:return function(D){return this.fromWireType(k[D>>3])};default:throw new TypeError(`invalid float width (${N}): ${T}`)}},Zn=(T,N,D)=>{N=gt(N),mr(T,{name:N,fromWireType:F=>F,toWireType:(F,q)=>q,argPackAdvance:mn,readValueFromPointer:Fo(N,D),destructorFunction:null})},rh=(T,N,D,F,q,$,K,Y)=>{var ae=Kr(N,D);T=gt(T),T=dt(T),q=Yr(F,q),Pn(T,function(){Va(`Cannot call ${T} due to unbound types`,ae)},N-1),ze([],ae,fe=>{var ge=[fe[0],null].concat(fe.slice(1));return jc(T,di(T,ge,null,q,$),N-1),[]})},nh=(T,N,D)=>{switch(N){case 1:return D?F=>C[F]:F=>I[F];case 2:return D?F=>j[F>>1]:F=>V[F>>1];case 4:return D?F=>R[F>>2]:F=>_[F>>2];default:throw new TypeError(`invalid integer width (${N}): ${T}`)}},sh=(T,N,D,F,q)=>{N=gt(N);var $=ge=>ge;if(F===0){var K=32-8*D;$=ge=>ge<<K>>>K}var Y=N.includes("unsigned"),ae=(ge,Ie)=>{},fe;Y?fe=function(ge,Ie){return ae(Ie,this.name),Ie>>>0}:fe=function(ge,Ie){return ae(Ie,this.name),Ie},mr(T,{name:N,fromWireType:$,toWireType:fe,argPackAdvance:mn,readValueFromPointer:nh(N,D,F!==0),destructorFunction:null})},hi=(T,N,D)=>{var F=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],q=F[N];function $(K){var Y=_[K>>2],ae=_[K+4>>2];return new q(C.buffer,ae,Y)}D=gt(D),mr(T,{name:D,fromWireType:$,argPackAdvance:mn,readValueFromPointer:$},{ignoreDuplicateRegistrations:!0})},pg=Object.assign({optional:!0},th),gg=(T,N)=>{mr(T,pg)},yg=(T,N,D,F)=>{if(!(F>0))return 0;for(var q=D,$=D+F-1,K=0;K<T.length;++K){var Y=T.charCodeAt(K);if(Y>=55296&&Y<=57343){var ae=T.charCodeAt(++K);Y=65536+((Y&1023)<<10)|ae&1023}if(Y<=127){if(D>=$)break;N[D++]=Y}else if(Y<=2047){if(D+1>=$)break;N[D++]=192|Y>>6,N[D++]=128|Y&63}else if(Y<=65535){if(D+2>=$)break;N[D++]=224|Y>>12,N[D++]=128|Y>>6&63,N[D++]=128|Y&63}else{if(D+3>=$)break;N[D++]=240|Y>>18,N[D++]=128|Y>>12&63,N[D++]=128|Y>>6&63,N[D++]=128|Y&63}}return N[D]=0,D-q},Ir=(T,N,D)=>yg(T,I,N,D),ih=T=>{for(var N=0,D=0;D<T.length;++D){var F=T.charCodeAt(D);F<=127?N++:F<=2047?N+=2:F>=55296&&F<=57343?(N+=4,++D):N+=3}return N},oh=typeof TextDecoder<"u"?new TextDecoder:void 0,Vo=function(T){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var F=N+D,q=N;T[q]&&!(q>=F);)++q;if(q-N>16&&T.buffer&&oh)return oh.decode(T.subarray(N,q));for(var $="";N<q;){var K=T[N++];if(!(K&128)){$+=String.fromCharCode(K);continue}var Y=T[N++]&63;if((K&224)==192){$+=String.fromCharCode((K&31)<<6|Y);continue}var ae=T[N++]&63;if((K&240)==224?K=(K&15)<<12|Y<<6|ae:K=(K&7)<<18|Y<<12|ae<<6|T[N++]&63,K<65536)$+=String.fromCharCode(K);else{var fe=K-65536;$+=String.fromCharCode(55296|fe>>10,56320|fe&1023)}}return $},qa=(T,N)=>T?Vo(I,T,N):"",ah=(T,N)=>{N=gt(N),mr(T,{name:N,fromWireType(D){for(var F=_[D>>2],q=D+4,$,Y,K=q,Y=0;Y<=F;++Y){var ae=q+Y;if(Y==F||I[ae]==0){var fe=ae-K,ge=qa(K,fe);$===void 0?$=ge:($+="\0",$+=ge),K=ae+1}}return O(D),$},toWireType(D,F){F instanceof ArrayBuffer&&(F=new Uint8Array(F));var q,$=typeof F=="string";$||ArrayBuffer.isView(F)&&F.BYTES_PER_ELEMENT==1||Qe("Cannot pass non-string to std::string"),$?q=ih(F):q=F.length;var K=W(4+q+1),Y=K+4;return _[K>>2]=q,$?Ir(F,Y,q+1):I.set(F,Y),D!==null&&D.push(O,K),K},argPackAdvance:mn,readValueFromPointer:Rn,destructorFunction(D){O(D)}})},fi=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Bo=(T,N)=>{for(var D=T,F=D>>1,q=F+N/2;!(F>=q)&&V[F];)++F;if(D=F<<1,D-T>32&&fi)return fi.decode(I.subarray(T,D));for(var $="",K=0;!(K>=N/2);++K){var Y=j[T+K*2>>1];if(Y==0)break;$+=String.fromCharCode(Y)}return $},lh=(T,N,D)=>{if(D!=null||(D=2147483647),D<2)return 0;D-=2;for(var F=N,q=D<T.length*2?D/2:T.length,$=0;$<q;++$){var K=T.charCodeAt($);j[N>>1]=K,N+=2}return j[N>>1]=0,N-F},Mc=T=>T.length*2,Et=(T,N)=>{for(var D=0,F="";!(D>=N/4);){var q=R[T+D*4>>2];if(q==0)break;if(++D,q>=65536){var $=q-65536;F+=String.fromCharCode(55296|$>>10,56320|$&1023)}else F+=String.fromCharCode(q)}return F},vg=(T,N,D)=>{if(D!=null||(D=2147483647),D<4)return 0;for(var F=N,q=F+D-4,$=0;$<T.length;++$){var K=T.charCodeAt($);if(K>=55296&&K<=57343){var Y=T.charCodeAt(++$);K=65536+((K&1023)<<10)|Y&1023}if(R[N>>2]=K,N+=4,N+4>q)break}return R[N>>2]=0,N-F},xg=T=>{for(var N=0,D=0;D<T.length;++D){var F=T.charCodeAt(D);F>=55296&&F<=57343&&++D,N+=4}return N},ch=(T,N,D)=>{D=gt(D);var F,q,$,K;N===2?(F=Bo,q=lh,K=Mc,$=Y=>V[Y>>1]):N===4&&(F=Et,q=vg,K=xg,$=Y=>_[Y>>2]),mr(T,{name:D,fromWireType:Y=>{for(var ae=_[Y>>2],fe,ge=Y+4,Ie=0;Ie<=ae;++Ie){var Xe=Y+4+Ie*N;if(Ie==ae||$(Xe)==0){var tt=Xe-ge,Ct=F(ge,tt);fe===void 0?fe=Ct:(fe+="\0",fe+=Ct),ge=Xe+N}}return O(Y),fe},toWireType:(Y,ae)=>{typeof ae!="string"&&Qe(`Cannot pass non-string to C++ string type ${D}`);var fe=K(ae),ge=W(4+fe+N);return _[ge>>2]=fe/N,q(ae,ge+4,fe+N),Y!==null&&Y.push(O,ge),ge},argPackAdvance:mn,readValueFromPointer:Rn,destructorFunction(Y){O(Y)}})},uh=(T,N,D,F,q,$)=>{li[T]={name:gt(N),rawConstructor:Yr(D,F),rawDestructor:Yr(q,$),fields:[]}},dh=(T,N,D,F,q,$,K,Y,ae,fe)=>{li[T].fields.push({fieldName:gt(N),getterReturnType:D,getter:Yr(F,q),getterContext:$,setterArgumentType:K,setter:Yr(Y,ae),setterContext:fe})},Ga=(T,N)=>{N=gt(N),mr(T,{isVoid:!0,name:N,argPackAdvance:0,fromWireType:()=>{},toWireType:(D,F)=>{}})},$a=[],Mn=(T,N,D,F)=>(T=$a[T],N=kn.toValue(N),T(null,N,D,F)),hh={},wg=T=>{var N=hh[T];return N===void 0?gt(T):N},mi=()=>{if(typeof globalThis=="object")return globalThis;function T(N){N.$$$embind_global$$$=N;var D=typeof $$$embind_global$$$=="object"&&N.$$$embind_global$$$==N;return D||delete N.$$$embind_global$$$,D}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&T(global)?$$$embind_global$$$=global:typeof self=="object"&&T(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},fh=T=>T===0?kn.toHandle(mi()):(T=wg(T),kn.toHandle(mi()[T])),Dc=T=>{var N=$a.length;return $a.push(T),N},Uo=(T,N)=>{var D=Ar[T];return D===void 0&&Qe(`${N} has unknown type ${Pc(T)}`),D},mh=(T,N)=>{for(var D=new Array(T),F=0;F<T;++F)D[F]=Uo(_[N+F*4>>2],`parameter ${F}`);return D},za=(T,N,D)=>{var F=[],q=T.toWireType(F,D);return F.length&&(_[N>>2]=kn.toHandle(F)),q},bg=Reflect.construct,ph=(T,N,D)=>{var F=mh(T,N),q=F.shift();T--;var $=new Array(T),K=(ae,fe,ge,Ie)=>{for(var Xe=0,tt=0;tt<T;++tt)$[tt]=F[tt].readValueFromPointer(Ie+Xe),Xe+=F[tt].argPackAdvance;var Ct=D===1?bg(fe,$):fe.apply(ae,$);return za(q,ge,Ct)},Y=`methodCaller<(${F.map(ae=>ae.name).join(", ")}) => ${q.name}>`;return Dc(ka(Y,K))},qo=T=>{T>9&&(Rr[T+1]+=1)},gh=T=>{var N=kn.toValue(T);fn(N),kc(T)},yh=(T,N)=>{T=Uo(T,"_emval_take_value");var D=T.readValueFromPointer(N);return kn.toHandle(D)},Oc=(T,N,D,F)=>{var q=new Date().getFullYear(),$=new Date(q,0,1),K=new Date(q,6,1),Y=$.getTimezoneOffset(),ae=K.getTimezoneOffset(),fe=Math.max(Y,ae);_[T>>2]=fe*60,R[N>>2]=+(Y!=ae);var ge=tt=>{var Ct=tt>=0?"-":"+",Wt=Math.abs(tt),Vt=String(Math.floor(Wt/60)).padStart(2,"0"),er=String(Wt%60).padStart(2,"0");return`UTC${Ct}${Vt}${er}`},Ie=ge(Y),Xe=ge(ae);ae<Y?(Ir(Ie,D,17),Ir(Xe,F,17)):(Ir(Ie,F,17),Ir(Xe,D,17))},Lc=()=>2147483648,vh=(T,N)=>Math.ceil(T/N)*N,Ha=T=>{var N=E.buffer,D=(T-N.byteLength+65535)/65536|0;try{return E.grow(D),L(),1}catch{}},xh=T=>{var N=I.length;T>>>=0;var D=Lc();if(T>D)return!1;for(var F=1;F<=4;F*=2){var q=N*(1+.2/F);q=Math.min(q,T+100663296);var $=Math.min(D,vh(Math.max(T,q),65536)),K=Ha($);if(K)return!0}return!1},Wa={},ks=()=>u||"./this.program",pi=()=>{if(!pi.strings){var T=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",N={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:T,_:ks()};for(var D in Wa)Wa[D]===void 0?delete N[D]:N[D]=Wa[D];var F=[];for(var D in N)F.push(`${D}=${N[D]}`);pi.strings=F}return pi.strings},wh=(T,N)=>{var D=0,F=0;for(var q of pi()){var $=N+D;_[T+F>>2]=$,D+=Ir(q,$,1/0)+1,F+=4}return 0},bh=(T,N)=>{var D=pi();_[T>>2]=D.length;var F=0;for(var q of D)F+=ih(q)+1;return _[N>>2]=F,0},Eh=T=>52;function Qa(T,N,D,F,q){return 70}var jr=[null,[],[]],Ch=(T,N)=>{var D=jr[T];N===0||N===10?((T===1?x:p)(Vo(D)),D.length=0):D.push(N)},Nh=(T,N,D,F)=>{for(var q=0,$=0;$<D;$++){var K=_[N>>2],Y=_[N+4>>2];N+=8;for(var ae=0;ae<Y;ae++)Ch(T,I[K+ae]);q+=Y}return _[F>>2]=q,0},gi=T=>T;fr(),cg(),Kd(),fg(),r.noExitRuntime&&r.noExitRuntime,r.print&&(x=r.print),r.printErr&&(p=r.printErr),r.wasmBinary&&(b=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&(u=r.thisProgram);var h={s:Ft,w:wt,a:hn,j:Ns,m:Po,N:It,p:bt,da:_s,d:Sn,_:ko,sa:et,Z:Jt,na:ir,qa:js,pa:Zd,F:Ua,la:mg,R:Zn,S:rh,y:sh,t:hi,ra:gg,ma:ah,O:ch,K:uh,ta:dh,oa:Ga,V:Mn,ua:kc,wa:fh,$:ph,T:qo,va:gh,ka:yh,aa:Oc,ea:xh,ba:wh,ca:bh,fa:Eh,X:Qa,Q:Nh,I:U4,C:G4,U:_4,P:K4,q:L4,b:b4,D:B4,ia:z4,c:C4,ha:H4,h:N4,i:I4,r:P4,M:V4,v:M4,E:O4,J:F4,A:$4,H:J4,W:ek,k:A4,f:T4,e:E4,g:Fc,L:Y4,l:R4,ja:q4,o:k4,x:j4,u:D4,ga:Q4,B:W4,n:S4,G:X4,Y:Z4,z:gi},v=await ee();v.ya;var S=v.za,O=r._free=v.Aa,W=r._malloc=v.Ca,X=v.Da,te=v.Ea,lt=v.Fa,Ht=v.Ga,Ke=v.Ha,Xt=v.Ia,Zt=v.Ja,yi=v.Ka;r.dynCall_viijii=v.La;var Jr=r.dynCall_vij=v.Ma;r.dynCall_jiji=v.Na;var Ya=r.dynCall_jiiii=v.Oa;r.dynCall_iiiiij=v.Pa,r.dynCall_iiiiijj=v.Qa,r.dynCall_iiiiiijj=v.Ra;function Fc(T,N,D,F){var q=ve();try{Ue(T)(N,D,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function b4(T,N){var D=ve();try{return Ue(T)(N)}catch(F){if(pe(D),F!==F+0)throw F;te(1,0)}}function E4(T,N,D){var F=ve();try{Ue(T)(N,D)}catch(q){if(pe(F),q!==q+0)throw q;te(1,0)}}function C4(T,N,D){var F=ve();try{return Ue(T)(N,D)}catch(q){if(pe(F),q!==q+0)throw q;te(1,0)}}function N4(T,N,D,F){var q=ve();try{return Ue(T)(N,D,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function _4(T,N,D,F,q){var $=ve();try{return Ue(T)(N,D,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function T4(T,N){var D=ve();try{Ue(T)(N)}catch(F){if(pe(D),F!==F+0)throw F;te(1,0)}}function A4(T){var N=ve();try{Ue(T)()}catch(D){if(pe(N),D!==D+0)throw D;te(1,0)}}function S4(T,N,D,F,q,$,K,Y,ae,fe,ge){var Ie=ve();try{Ue(T)(N,D,F,q,$,K,Y,ae,fe,ge)}catch(Xe){if(pe(Ie),Xe!==Xe+0)throw Xe;te(1,0)}}function R4(T,N,D,F,q){var $=ve();try{Ue(T)(N,D,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function I4(T,N,D,F,q){var $=ve();try{return Ue(T)(N,D,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function j4(T,N,D,F,q,$,K){var Y=ve();try{Ue(T)(N,D,F,q,$,K)}catch(ae){if(pe(Y),ae!==ae+0)throw ae;te(1,0)}}function P4(T,N,D,F,q,$){var K=ve();try{return Ue(T)(N,D,F,q,$)}catch(Y){if(pe(K),Y!==Y+0)throw Y;te(1,0)}}function k4(T,N,D,F,q,$){var K=ve();try{Ue(T)(N,D,F,q,$)}catch(Y){if(pe(K),Y!==Y+0)throw Y;te(1,0)}}function M4(T,N,D,F,q,$,K){var Y=ve();try{return Ue(T)(N,D,F,q,$,K)}catch(ae){if(pe(Y),ae!==ae+0)throw ae;te(1,0)}}function D4(T,N,D,F,q,$,K,Y){var ae=ve();try{Ue(T)(N,D,F,q,$,K,Y)}catch(fe){if(pe(ae),fe!==fe+0)throw fe;te(1,0)}}function O4(T,N,D,F,q,$,K,Y){var ae=ve();try{return Ue(T)(N,D,F,q,$,K,Y)}catch(fe){if(pe(ae),fe!==fe+0)throw fe;te(1,0)}}function L4(T){var N=ve();try{return Ue(T)()}catch(D){if(pe(N),D!==D+0)throw D;te(1,0)}}function F4(T,N,D,F,q,$,K,Y,ae){var fe=ve();try{return Ue(T)(N,D,F,q,$,K,Y,ae)}catch(ge){if(pe(fe),ge!==ge+0)throw ge;te(1,0)}}function V4(T,N,D,F,q,$,K){var Y=ve();try{return Ue(T)(N,D,F,q,$,K)}catch(ae){if(pe(Y),ae!==ae+0)throw ae;te(1,0)}}function B4(T,N,D,F){var q=ve();try{return Ue(T)(N,D,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function U4(T,N,D,F){var q=ve();try{return Ue(T)(N,D,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function q4(T,N,D,F,q,$,K,Y){var ae=ve();try{Ue(T)(N,D,F,q,$,K,Y)}catch(fe){if(pe(ae),fe!==fe+0)throw fe;te(1,0)}}function G4(T,N,D,F,q,$){var K=ve();try{return Ue(T)(N,D,F,q,$)}catch(Y){if(pe(K),Y!==Y+0)throw Y;te(1,0)}}function $4(T,N,D,F,q,$,K,Y,ae,fe){var ge=ve();try{return Ue(T)(N,D,F,q,$,K,Y,ae,fe)}catch(Ie){if(pe(ge),Ie!==Ie+0)throw Ie;te(1,0)}}function z4(T,N,D){var F=ve();try{return Ue(T)(N,D)}catch(q){if(pe(F),q!==q+0)throw q;te(1,0)}}function H4(T,N,D,F,q){var $=ve();try{return Ue(T)(N,D,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function W4(T,N,D,F,q,$,K,Y,ae,fe){var ge=ve();try{Ue(T)(N,D,F,q,$,K,Y,ae,fe)}catch(Ie){if(pe(ge),Ie!==Ie+0)throw Ie;te(1,0)}}function Q4(T,N,D,F,q,$,K,Y,ae){var fe=ve();try{Ue(T)(N,D,F,q,$,K,Y,ae)}catch(ge){if(pe(fe),ge!==ge+0)throw ge;te(1,0)}}function Y4(T,N,D,F,q,$,K){var Y=ve();try{Ue(T)(N,D,F,q,$,K)}catch(ae){if(pe(Y),ae!==ae+0)throw ae;te(1,0)}}function K4(T,N,D,F){var q=ve();try{return Ue(T)(N,D,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function J4(T,N,D,F,q,$,K,Y,ae,fe,ge,Ie){var Xe=ve();try{return Ue(T)(N,D,F,q,$,K,Y,ae,fe,ge,Ie)}catch(tt){if(pe(Xe),tt!==tt+0)throw tt;te(1,0)}}function X4(T,N,D,F,q,$,K,Y,ae,fe,ge,Ie,Xe,tt,Ct,Wt){var Vt=ve();try{Ue(T)(N,D,F,q,$,K,Y,ae,fe,ge,Ie,Xe,tt,Ct,Wt)}catch(er){if(pe(Vt),er!==er+0)throw er;te(1,0)}}function Z4(T,N,D,F){var q=ve();try{Jr(T,N,D,F)}catch($){if(pe(q),$!==$+0)throw $;te(1,0)}}function ek(T,N,D,F,q){var $=ve();try{return Ya(T,N,D,F,q)}catch(K){if(pe($),K!==K+0)throw K;te(1,0)}}function Eg(){if(z>0){Q=Eg;return}if(M(),z>0){Q=Eg;return}function T(){var N;r.calledRun=!0,!w&&(P(),n(r),(N=r.onRuntimeInitialized)===null||N===void 0||N.call(r),B())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),T()},1)):T()}function tk(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return tk(),Eg(),e=i,e};function aW(t){return a4(l4,t)}async function lW(t,e){return oW(l4,t,e)}const c4=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],cW=[...c4,["unknown"]].map(t=>t[0]),Pv=new Map(c4);function uW(t){for(const[e,r]of Pv)if(t===r)return e;return"unknown"}function dW(t){if(u4(t))return{width:t.naturalWidth,height:t.naturalHeight};if(d4(t))return{width:t.width.baseVal.value,height:t.height.baseVal.value};if(h4(t))return{width:t.videoWidth,height:t.videoHeight};if(m4(t))return{width:t.width,height:t.height};if(g4(t))return{width:t.displayWidth,height:t.displayHeight};if(f4(t))return{width:t.width,height:t.height};if(p4(t))return{width:t.width,height:t.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function u4(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLImageElement)}catch{return!1}}function d4(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.SVGImageElement)}catch{return!1}}function h4(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLVideoElement)}catch{return!1}}function f4(t){var e,r;try{return t instanceof((r=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:r.HTMLCanvasElement)}catch{return!1}}function m4(t){try{return t instanceof ImageBitmap||Object.prototype.toString.call(t)==="[object ImageBitmap]"}catch{return!1}}function p4(t){try{return t instanceof OffscreenCanvas||Object.prototype.toString.call(t)==="[object OffscreenCanvas]"}catch{return!1}}function g4(t){try{return t instanceof VideoFrame||Object.prototype.toString.call(t)==="[object VideoFrame]"}catch{return!1}}function hW(t){try{return t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"}catch{return!1}}function fW(t){try{return t instanceof ImageData||Object.prototype.toString.call(t)==="[object ImageData]"}catch{return!1}}function mW(t,e){try{const r=new OffscreenCanvas(t,e);if(r.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return r;throw void 0}catch{const r=document.createElement("canvas");return r.width=t,r.height=e,r}}async function y4(t){if(u4(t)&&!await vW(t))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(d4(t)&&!await xW(t))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(g4(t)&&wW(t))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(h4(t)&&(t.readyState===0||t.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(m4(t)&&EW(t))throw new DOMException("The image source is detached.","InvalidStateError");const{width:e,height:r}=dW(t);if(e===0||r===0)return null;const n=mW(e,r).getContext("2d");n.drawImage(t,0,0);try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function pW(t){let e;try{e=await createImageBitmap(t)}catch{try{if(globalThis.Image){e=new Image;let r="";try{r=URL.createObjectURL(t),e.src=r,await e.decode()}finally{URL.revokeObjectURL(r)}}else return t}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await y4(e)}function gW(t){const{width:e,height:r}=t;if(e===0||r===0)return null;const n=t.getContext("2d");try{return n.getImageData(0,0,e,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function yW(t){if(hW(t))return await pW(t);if(fW(t)){if(bW(t))throw new DOMException("The image data has been detached.","InvalidStateError");return t}return f4(t)||p4(t)?gW(t):await y4(t)}async function vW(t){try{return await t.decode(),!0}catch{return!1}}async function xW(t){var e;try{return await((e=t.decode)==null?void 0:e.call(t)),!0}catch{return!1}}function wW(t){return t.format===null}function bW(t){return t.data.buffer.byteLength===0}function EW(t){return t.width===0&&t.height===0}function AN(t,e){return CW(t)?new DOMException(`${e}: ${t.message}`,t.name):NW(t)?new t.constructor(`${e}: ${t.message}`):new Error(`${e}: ${t}`)}function CW(t){return t instanceof DOMException||Object.prototype.toString.call(t)==="[object DOMException]"}function NW(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}var Hf;class kv{constructor(e={}){qH(this,Hf);var r;try{const n=(r=e==null?void 0:e.formats)==null?void 0:r.filter(s=>s!=="unknown");if((n==null?void 0:n.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const s of n??[])if(!Pv.has(s))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${s}' is not a valid enum value of type BarcodeFormat.`);GH(this,Hf,n??[]),aW({fireImmediately:!0}).catch(()=>{})}catch(n){throw AN(n,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return cW.filter(e=>e!=="unknown")}async detect(e){try{const r=await yW(e);if(r===null)return[];let n;const s={tryCode39ExtendedMode:!1,textMode:"Plain",formats:UH(this,Hf).map(i=>Pv.get(i))};try{n=await lW(r,s)}catch(i){throw console.error(i),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return n.map(i=>{const{topLeft:{x:a,y:l},topRight:{x:c,y:u},bottomLeft:{x:d,y:f},bottomRight:{x:m,y:g}}=i.position,x=Math.min(a,c,d,m),p=Math.min(l,u,f,g),b=Math.max(a,c,d,m),E=Math.max(l,u,f,g);return{boundingBox:new DOMRectReadOnly(x,p,b-x,E-p),rawValue:i.text,format:uW(i.format),cornerPoints:[{x:a,y:l},{x:c,y:u},{x:m,y:g},{x:d,y:f}]}})}catch(r){throw AN(r,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Hf=new WeakMap;globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=kv);function _W(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return J.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M3 3L6.00007 6.00007M21 21L19.8455 19.8221M9.74194 4.06811C9.83646 4.04279 9.93334 4.02428 10.0319 4.01299C10.1453 4 10.2683 4 10.5141 4H13.5327C13.7786 4 13.9015 4 14.015 4.01299C14.6068 4.08078 15.1375 4.40882 15.4628 4.90782C15.5252 5.00345 15.5802 5.11345 15.6901 5.33333C15.7451 5.44329 15.7726 5.49827 15.8037 5.54609C15.9664 5.79559 16.2318 5.95961 16.5277 5.9935C16.5844 6 16.6459 6 16.7688 6H17.8234C18.9435 6 19.5036 6 19.9314 6.21799C20.3077 6.40973 20.6137 6.71569 20.8055 7.09202C21.0234 7.51984 21.0234 8.0799 21.0234 9.2V15.3496M19.8455 19.8221C19.4278 20 18.8702 20 17.8234 20H6.22344C5.10333 20 4.54328 20 4.11546 19.782C3.73913 19.5903 3.43317 19.2843 3.24142 18.908C3.02344 18.4802 3.02344 17.9201 3.02344 16.8V9.2C3.02344 8.0799 3.02344 7.51984 3.24142 7.09202C3.43317 6.71569 3.73913 6.40973 4.11546 6.21799C4.51385 6.015 5.0269 6.00103 6.00007 6.00007M19.8455 19.8221L14.5619 14.5619M14.5619 14.5619C14.0349 15.4243 13.0847 16 12 16C10.3431 16 9 14.6569 9 13C9 11.9153 9.57566 10.9651 10.4381 10.4381M14.5619 14.5619L10.4381 10.4381M10.4381 10.4381L6.00007 6.00007"}))}function TW(t){const{onClick:e,disabled:r,className:n}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return J.createElement("svg",{onClick:r?void 0:e,className:n,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M12 16C13.6569 16 15 14.6569 15 13C15 11.3431 13.6569 10 12 10C10.3431 10 9 11.3431 9 13C9 14.6569 10.3431 16 12 16Z"}),J.createElement("path",{d:"M3 16.8V9.2C3 8.0799 3 7.51984 3.21799 7.09202C3.40973 6.71569 3.71569 6.40973 4.09202 6.21799C4.51984 6 5.0799 6 6.2 6H7.25464C7.37758 6 7.43905 6 7.49576 5.9935C7.79166 5.95961 8.05705 5.79559 8.21969 5.54609C8.25086 5.49827 8.27836 5.44328 8.33333 5.33333C8.44329 5.11342 8.49827 5.00346 8.56062 4.90782C8.8859 4.40882 9.41668 4.08078 10.0085 4.01299C10.1219 4 10.2448 4 10.4907 4H13.5093C13.7552 4 13.8781 4 13.9915 4.01299C14.5833 4.08078 15.1141 4.40882 15.4394 4.90782C15.5017 5.00345 15.5567 5.11345 15.6667 5.33333C15.7216 5.44329 15.7491 5.49827 15.7803 5.54609C15.943 5.79559 16.2083 5.95961 16.5042 5.9935C16.561 6 16.6224 6 16.7454 6H17.8C18.9201 6 19.4802 6 19.908 6.21799C20.2843 6.40973 20.5903 6.71569 20.782 7.09202C21 7.51984 21 8.0799 21 9.2V16.8C21 17.9201 21 18.4802 20.782 18.908C20.5903 19.2843 20.2843 19.5903 19.908 19.782C19.4802 20 18.9201 20 17.8 20H6.2C5.0799 20 4.51984 20 4.09202 19.782C3.71569 19.5903 3.40973 19.2843 3.21799 18.908C3 18.4802 3 17.9201 3 16.8Z"}))}function AW(t){const{scanning:e,startScanning:r,stopScanning:n}=t,[s,i]=y.useState(!1);function a(){i(!0),e?n():r(),setTimeout(()=>i(!1),1e3)}return J.createElement("div",{style:{bottom:85,right:8,position:"absolute",zIndex:2,cursor:s?"default":"pointer"}},e?J.createElement(_W,{disabled:s,onClick:a}):J.createElement(TW,{disabled:s,onClick:a}))}function SW(t){const{onClick:e,className:r,style:n}=t;return J.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M13.225 9l5.025-7h-7.972l-3.3 11h5.359l-2.452 8.648.75.364L20.374 9zm.438 3H8.322l2.7-9H16.3l-5.025 7h7.101l-6.7 8.953z"}))}function RW(t){const{onClick:e,className:r,style:n}=t;return J.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:n,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M14.516 15.158l.714.714-4.595 6.14-.75-.364L12.337 13H6.978L8.22 8.861l.803.803L8.322 12h3.036l1.793 1.792-1.475 5.16zm5.984 4.05L4.793 3.5l.707-.707 3.492 3.492L10.278 2h7.972l-5.025 7h7.149l-3.71 4.957 4.543 4.543zM12.707 10l3.243 3.243L18.376 10zM9.795 7.088l2.079 2.079L16.3 3h-5.278z"}))}function IW(t){const{status:e,scanning:r,torchToggle:n}=t;function s(i){n(i)}return r&&n?J.createElement("div",{style:{bottom:35,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},e?J.createElement(RW,{onClick:()=>s(!1)}):J.createElement(SW,{onClick:()=>s(!0)})):null}function jW(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return J.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-7.46,0.5l-1.5,0c-0.645,0 -0.643,-1 -0,-1l1.5,0l-0,-1.5c-0,-0.645 1,-0.643 1,0l-0,1.5l1.5,0c0.645,0 0.643,1 -0,1l-1.5,0l-0,1.5c-0,0.645 -1,0.643 -1,0l-0,-1.5Z"}))}function PW(t){const{onClick:e,className:r,disabled:n=!1}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",fill:n?"grey":"yellow",...t.style};return J.createElement("svg",{onClick:n?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:r,style:s,xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-4.96,-0.5c0.645,0 0.643,1 -0,1l-4,0c-0.645,0 -0.643,-1 -0,-1l4,0Z"}))}function kW(t){const{scanning:e,capabilities:r,onZoom:n,value:s}=t;if(!e||!n)return null;const i=(r.max-r.min)/3;return J.createElement(y.Fragment,null,J.createElement("div",{style:{bottom:130,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},J.createElement(PW,{disabled:s<=r.min,onClick:function(){n(Math.max(s-i,r.min))}})),J.createElement("div",{style:{bottom:180,right:8,position:"absolute",zIndex:2,cursor:"pointer"}},J.createElement(jW,{disabled:s>=r.max,onClick:function(){n(Math.min(s+i,r.max))}})))}const Ei={fullContainer:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},innerContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},borderBox:{position:"relative",width:"70%",aspectRatio:"1 / 1",border:"2px dashed rgba(239, 68, 68, 0.4)",borderRadius:"0.5rem"},cornerTopLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,left:0,borderBottomColor:"transparent",borderRightColor:"transparent",borderTopLeftRadius:"0.5rem"},cornerTopRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",top:0,right:0,borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopRightRadius:"0.5rem"},cornerBottomLeft:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,left:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomLeftRadius:"0.5rem"},cornerBottomRight:{position:"absolute",width:"15%",height:"15%",border:"4px solid #ef4444",bottom:0,right:0,borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomRightRadius:"0.5rem"}};function MW(t){const{scanning:e,capabilities:r,onOff:n,torch:s,zoom:i,startScanning:a,stopScanning:l}=t;return J.createElement("div",{style:Ei.fullContainer},J.createElement("div",{style:Ei.innerContainer},J.createElement("div",{style:Ei.overlay},J.createElement("div",{style:Ei.borderBox},J.createElement("div",{style:Ei.cornerTopLeft}),J.createElement("div",{style:Ei.cornerTopRight}),J.createElement("div",{style:Ei.cornerBottomLeft}),J.createElement("div",{style:Ei.cornerBottomRight}))),n&&J.createElement(AW,{scanning:e,startScanning:a,stopScanning:l}),s&&r.torch&&J.createElement(IW,{scanning:e,status:s.status,torchToggle:s.toggle}),i&&r.zoom&&J.createElement(kW,{scanning:e,capabilities:r.zoom,value:i.value,onZoom:i.onChange})))}const DW="data:audio/mp3;base64,//PkZAAhghE0AKToAJra/n0FQygAAAGIkYJgmCYXBMAAGCTJz3zhCEM//z//1hz//8MMMMN08ssV6e5DDWIQreAgCvFKy8bXgIKMkUDDBgzJwIBtkRMQAocxIFdxghQGKDoEziAzQxOBOdH92i/iGi+zDCAEIX46a73HrSybZw1x3JZjXp7dSNy/P68rjcbt7p7fakMP5LVMyzCaj1pjvejYYAIDgDGzECjEAk1Jl3559HIon8hzlfPVTCvGJZzfcKSxXfyMWM88//9VKSxXdtnb9vomOuuRyiWVYbf+X8zp6fKGHIdycuWMMMMMMKSnp+6wsYc/9f/7z7rPPWHN556p6fP8MMMP///PPP/7+GHK9PT6p7f/unldP2np7YeHjweiYA4GLNAgAiI7u57n5//oc5/yfk6znOcPhwOBwggHCMpA4HA4KEyHOc5znO+hPIc5//+fqJh8XQPh90JU5xQinOf//87/zvP+ggAYuhCKHxdA+Hxd0EA4KKHA4ciB3kOXfXB/gmf8p/B96lAMKAgAADU+BujARHgwdisgHMfAUHAiceBg4ASBgZBiBIBH4ZaHOJsLhf8R+HYEciIgYSwj/+Bi7EqBh+AcBn5P6Bh4TuBmrAMBiZH7gaLEWgew//PkZFMlyek60MpYAShzqqZhm6gCUWeEUWAewEWYGN4X4GDEPwGE8S4GDoOIGAYKgIQOkz//gGARAUB+CwGxTwMAACAEgyAwdAlAxKhzAxXiZ///AxcEwAwJjDAziCAAwQgdAwRgdAsJQDAmAcGzYDwAhZIAKAcIQB4GT9TQMJ9/4Gi1Fv/AcAYUqKBAwGgNAwVBAAwGhwAwdBlAxFg1AwlgzAwNBuAkJQDBgEEDEqGECgChFgBgL//CIswYYH//+HKCpk4K0C9AaKKCAOBeMcR4X9C44BwABCgGAsGYCgTwHAcAwXAiAwSAQV///CJP9lwMBQAwAAAWGo5lVLCcaeneVhJAVGai3//ioaUEf//gaTAYGCj8BnEwfrIqDcsIQb/vmhU/8fAs0G8YGGwKST8Igj4GCATipksVzY8p//90FWJwh45AkX//4fCF9wMEgkL3uQc+gbGJ8t4MBAMBP/hEXf9FRuWBcAfIFjYzQdoLCBwh7IWVlxaX/w8oMCP/+EQT5poGB1Ir90DhiV6af/jFYBpT2BgoQyyt2M0ToBdEaZyzt8nTo3xdNDCTSd//o6F06CjooxRr4jVF/0bOKD6OMUNDRxiMUVFR0FFQPhGXRjDpr4MAEA4wIQUhYOIw//PkZE4nrg08sOx4ACQ0CopD2aAAlwTTBxQeMcwd8w8gZTAgABXwGABOkzpI0wAQAExnWfP4x8ZjKunWdZ1o1Qe6lFGKCNULORQCELAAPnRUf/GIx/0FHGfo3SdZ0qP2cukXKLlRtBKFgAQwCkwJgFRYBEEATmDsLSY2QiQYCEnEra+UZo6F1aKMRr6GhoaP/+j//ov+i+hjLqBgMkYoqChoo1GqCjoY06TpRqjjLOYzRRmMuizmgdKhdF8kjTAAAPMCwGswzglgwAJfzqxmioKH/////////////+ijLOAwFmN0f/////////Q///8ZjP/9DGYyFwIDBeB3MA4AlBWidKM5spykAUAQOCakK+udGqN8VDYjTRuN//0bVX//6Kio4xQFv//nf//kKOoAEIB6SY6hcxenp85///4/DEPf/84Xvl4vF4dwtxfEJgCYQHMSgKCROp4+fn////L4tQf0unz89OecLxeL0ul09y6enzp4dIhKAQFA5hKfLu1nU7/Wr71rRKJUBQSUVt////l08GUPVWgAAYAeNKsxbQNAAhQx3/oKGMM6dZ1Yy6sajMbfKio7lNcv0sScZ47lNcw32ekVFMP9fp/f+mklI6at6u/dBMQuW6y+C5BcgwAA//PkZEomGg1HYGe0riWsCqbEwiY0BJFJMxrCcxGgQ2VK8xxCF1wsABgQBBgQBAYAFCkYCgALkK4fJ00E5ctJN1Uxy5au3XoGcM4dSN0EYZwzhW0WCh1PZwzhnFFQxtnbO2d0Kt6CdXbruggkTEX5Rs4TEQUVsdVXaCcuWXIBQUGmwmgoAGcJiM4dSioHQdBnEY+hjcbov//jcb/43G43G/jCRibfxugdBnDqULO2duvQumztncbo4xGKKNxugooxGIxQULoOgFgUMTA/jbrxiMDmETL+eLhcPThzOeeOZfL5fIcBYuXD/OHv8t//LJFxjxQYHHKDGFkZMtlmKM0RgQfbVtxFIHbQBDRuzRguEI1c9XZ/rWmrZfVU3Oc/9utNNygRQkCoHlAYstNN6DJ1IINpoINppv+WG/+g2mmnUmmmpBAoJIJhnwB5xkymn606Df/t000xhU03UXC5Ol8uFyXy+Xy/l8v5w4cLk4XAvwAYUvl/QL5fTdlKZkEEEEGumaKaX00zIOemf6CH///ywI3LKpiQ2Ef4xYWMSDyI0XwzikpL0ajVHZ3j9DGIjeuXcNfjn96/S/TUz/X/vX////5K/r+v7Jn+LlAoGZOIQIwMKBQM/yppKYURmhGZkR2b//PkZE0mHg1HEG8wyiD7mlwAyDU8nJHi5htakZmZGNiRcpkJhBmUmZYQcM1VDEEBggNDV/ASEZRYKFZIhkXKLlKmk7IVTKmZNJ5KhiqVUqpX+k7+qlVKyV/ZIqZDFDWTJlFyi5TJpKhiXKBQyZzIS5JhBoayV/AQWVpGWkcYTV5O/rIVSv8/0nkr+v6/vyR/X9f1/ZN8kf5/n99/n+f5/lTKmf9/mRP8yFUqpWSv4yJUqpX9kj/MmZNJ5K/z/P9J5P/v6yFUz/CEoywgUMqZkz/FssECIsVq0aPRrRRatFFFykQZJ2Ukl///5KjmksOaA7ALROJLDnEsLbq3GTMVrwb/0dGzmM0DlfBlHQOmrdR0MYi92TX6b/cmDHLclyUVYO/4O8sFTKFTKFf8yhUyhUyhXzKlDKlCsr/+ZUoVlSsr/+ZQqZUoZUoceMfcoZUoZUoVlfOPGcmDHKcpynKg9yXJcr3JclyXJclyYO+DXJclyfgxFZVb3KcqD/g2MxzsY72L9LubPR0dCyf5K5NNd+Tv9GXRdV0XJclyfcl/n+k8kf6SX/iVynvXf///4Mg/1OkxguYzmM5jMcLHMxwwGhgNCwXMLAcwMXTLi1MD7w7tmTdBvMmE0xQFzCwHMDAd//PkZGMpigkmAGOUvCfTgcgAuC+ITswMFzC4oMLhYMByn0xvU+p9Tr0xUxf/0xv///1PBYDhgNTFTFTGTGTGTGTGTGTGTGC4GTFMDAcLAdMVMVMULAcMBpgYDhcDGFwsYXFBikLGFwMGA4MBxgcDKfTEMUoAx2BisD+mKp5Tv1OkxkxkxkxkxkxkxkxlO0xVPJi/6nv////U7CwHTFTFTGTGTGTGU+p71PpjJipihYDpipi/6n1Ov//C4GC4GTGTGTGTFU8WBSZdLhWB//yKlotyLZFiLf8tyyRUipFSKkVGRBZQMiWC3yx//wxUGKsSvDFQGHUAL3QMsHDFIYpCYy2Bmagy6BjLgy6Bh3od58DCLAizBgRb+EQiyEQiwGBFuDAi3/////20QqSBJf/qcumv/////wMZdGXAYMu1gYy6MuBEZdBgy4BjLgy6BjLgy6BjLgy6BjLQy6DBlz2cJDLgRGXAMZdGXAYMuhMZcCIy6sJGaoGMuppwNRl3WBjLgy63wiEWAwIt/+EQi0IhFsDCLAi0GBFkGBFgMJCqaqYAgAYIhBBvwf7kwcqRq7V3IctacvlN6NxqgooxRRuNRiijEZjMGRuMvz9FGozQ+1X2qe1T1S//+VhaWAtKwtML//PkZEIkbgcaAHc1xCJrjeAAtfuUAtLAWf///mWePH95ZFgsyssvM88+jzO6K+z7OM48sH+WDiweZx5YOK+zxWLGJWsa6xadAv02fTZLSpsFpvLSga0tMgWgUgWmwgUmyWl8tMgWWmLSoFJsoFlpSwsmyBg4HhEdgwHAYPBwGDgeBg8HwMHg4DB4PBgOAwcOwMHLwDn5lAwcDgiDgYDwMHA/4MB3//+EQeDAdwiDwYLPhEWQYLODBYERZBgt8Ii34GLBaB5pfAZ0FvEAQ/UfwxULlx+IXx+8f5CELH8fxKhAIDFoHBEDRc3////gwHgaRXgMHYMB2EU/gwZ/gYbw3gY3QbgYNgbgYiAbgwN3/+EQbBEG4MBuDAbAwG4RBtAwbg2////+B9B6F//////////hEdD//////////8DRahEQGCInMNg3LBElgNjDciCwG/lgNiwGxWG///mG4bf/+WA3Kw3KyIMNw2Kw3MNg3MNg3MNiIMiQ2OK0xMiA3KyJLAEZgRARmBEDEYFwBBgEgEeomowol5YAJKwCDAIAJ8sAE+gGBgCJYAQUZ/13LubMu5dyiYOAhKwEFGf9AOoz/g4CFAIol/lgAjysAgsAElYBP////lgJksBM//lgRUxF//PkZGApggsIAHt2wiNLoggAqCz8RFSwIqYioipkjEjHCCSN/+WJg5iYOYmPK5krmTmZk5mZ8sTJYmf8yJiNiIisi/ywRmRkZkZGZGRmRERkREZERGRERkREZERGxEf///hETIMEyBiZEyBiZEzwiJgDEwU4DV2gQGFOBgmP8GAiAwRAiBgIgYCIGAi/4MBHAwRgjAwRgjwMEQIgMcgY8DBGCMDBGCMDEyJn///+BiYQIBlObj4eYLIwsjAOBGFkYBoEQ84eULIw88LIA88PKHnw8sPKFkeHlANAiAaFUDAiMYPIHmDzBZBhZB///8GBOA1sH/Awni7AwnhPCITwYE/CKzBgt8Ig8GA4Ig6EQdww4Yb+F1sIgtwYCwGAsAwWAsBgLAYCwDBYCwDBaHUDF+VEDKgC2BgtBaDAWgYLQW////gYLAWQMFgLAMFoLcGAt////4RMABmBSj4NgwMOGHBsHhdcLrwbB4XXC6+F14YcLrww4Ng8MOGHBsHww4Ng8AUC4AoMQMC4fgw3wutV4QIsAgFYIBWCCVgHeVgHeWABCwAIVgH+YBwB5aRAstKgV6Ba1oMg9avtUVN/qdLWciD/cqD3Jg6DFPuTB/////lYAn//mC8C+YLwL5gvgvGC//PkZFEpLgMKYXt2xB5LogAArbdc+C8VgvlYL/mC8C+YLwL5YBfMNgNkwXixDWoHPMc4VUxVA2TBeDZPYXzXl815fK14sLxYXvK1//NeXzXl815fMtdDLSw3UsMtLCstMtLDLSwsFhWWlgt//8sFhW6f/////+WF7zXl8sL5ry+Vrxry+WF/wMLwX4MC+EQv/AwvBfAxsjYAyqpKA0lpLAwvBfBgXv///4RA2DANAYGgNgYGgNgYGwN+EQvf/BgXwYF//8DC+F4Dd6NgGBf4AgFwbB0MMF1wuuDYMBsGwusDYOBsHA2Dvg2DQuuDYOhdcMMF14YYDGYDEGwfhhgbB0MN///4RBaEQWgZByoYRWYMFvwiDsGwaF1gbB34GDwdC64XW/w1aKxDVgatir4YcLrQbBwNg7////////////+ESfgZPyff/////////4MFmBvvMAERZ8CC5adNj02E2S0qbCBSBZaYtN///oFlpU2QMXIFAYuQK9AtAo7IxLTpsIFJs/5aZRxQawaxGfIg9CsrI+PUqkWdOHp7ODsOl6cOHZ4dsulfLI9/8BAAgMBACsBLACVgBjoAWAE5OTM6WDAR0zodMdHCsJLASWAjzCQgsBJhASWAjysI8wkJMICU//PkZFkeqgcaYDd1th6DogAAqCuIxQwtDA5MdMULgyY6YqnXqdep5TpMdMVRNRL/UT9AN6jCiSjKAZRNRhAMomgFQDfCIJwYCQiCAiCMGAkGAgDBJUA3eVAMEgj////8SrDFIYqh5g8kPMHkDzB5OFkYeYPJ+HlDzB5+AYVQDibCyIPLLEZIsjIliWS0WywWyyWuWCyWJaLZbLJYDHgLAItFvy3///4eYPKBlQTh5QYEODBb//hhoNg7/C62DYPFUKwKsVgNWBq8VkVcVkVUVYrH//hGff/8Iz8GT7//////wiX4ML3gwvgwvf4ML3gZeqoHVGyBl4vgZfL2F1oNg4Lrg2DcLrg2DQw0Lrhh8Lr4YcMNBsGhdcGBcMOGGAFGAGMQsF1guuGG4XXV/4uQXOLmF1kL/8lCXkuSk4O8/FzHzuP0hIucf/CIFAMCgFPgYFAKAwCgGBQCgGHYO4GBVM4GgQI4RCMEQKQOtQjUI1CNcI14MqDKwDIAGQDzh5wsjDyw8uHmDzYeUPN+DEYRRhFEIowYgDQgIhWDApgwKAwKQYFAYFQMKkYDOxHAzsRgMKBUGBX/h5v+Hm4ecPNh5A8wBwjhZHhZAHlDzBZAFkAeQPKHnCyILIAsih5QsgDz//PkZLQgIgsMAFp1xCGLogAAA2rkB5w8oeYLIQ8kPMHkCyGHnAMKoGmAgFkUPMHmDYAtfHPHNkr/JYl8c8lCWHPHMkqSo5onMAkBDnfJX//8IgDBgBhEdAaxSQMHUGAEIgAV4risCcipBOMVRVBO////hEvAxsAwvf////8MPDDww4XWC64XXDDww4YcMPC6wYb/wYGgiGwMplMDYhTCIaCIaBga/////8GA+EQdgYPB4MB4GDwdhEH8Ig8Ig8GA6EQcEQf8DBxlBjoAweDuFwgCQXiL//iLiKCKCL4XCiKRFwEgoRT4iqpMQU1FMy4xMDCqqqqqqqr////xuDd8fv/DVwrArEIg6EQdhEHAYPBwMB+ERYBi0WAwWAZ0FoGLYOB+JfgZ0FoGdBaDBYbn+WHm9xW7/Nzzc83PLDzc8reWlA7S0oHamx//6BflpU2C0qbBaf/8yk/ysn+VkMhTKQrKVk8yE8rIVkKyYsAn/5WC+YICmCApWCGTkxtKMcVWlgFMEBTBAX////0C0C0C/////////LTFpvTZLTlpv/0Ci0xaYtOgWmymyWkAxcWmTZTYTY8tMmygUWmLTIFpsFpv9NnywLmLCx2RgWmQKTZ98UjnzZ1/++D4M6/////3//PkZOgjIg8IAFcbxCaTogAAoCuIzfJ8vfJ8Wcs5fBnD5//++L5f////////6nCKv//+o0o0FUYwqDNGCwgUMKC0VVGkVv//4Yf8LrxVCriqDVoasDVuKsNWw1bisBqwVkVkVX//gy/4YYMMGGhhgwwNg4LrhdcLrAYWGAA0zBsH4Ng3C6/////4MAoGBQIDAKBgUCAwCgYEAsDAoEAwKBAYBYMAoGBQIBgUCYGBQIBgUCwiBAYBYMAoRAgRAoGBBMBooCAYFAkIgTEUxFv/EWxFxFhFoi0LhQuFiLCL/EWqTEFNRTMuMTAwqqqq//////8TWJriV/hERAwRgYiEYGIhGBmIRgYiEYMEQMEcDMSiA1GYwMR+UDMTkA7KIgMRGIGGM0SIrRGjRlhEV4jxov8rR/5YRFhEdQSViCsR5iRJWIKxPlgQYgSViSsR5WJMQJLC78IiKERF4REeERGEREERHwMRGOBmIRhERhERAwRAYiEQGIhGBmIRAajkgG5TEEREDBHwYIwYI4REXCIV/4MCmDArgwKAYUO/gYVCkGBUGBTgYUCsGBUIhUDCoUCIVBgVBgVBgUhEKQMKhUDCoUBgVAwoFAYFcGBQDI6oA5+qQiFAMjBUGBXCyEPIFkOH//PkZPMj6gr6AFdVwifkBdwAoC2Ilh5/8PPh5Qsih5IeUA0TAZrE8PP////wMRiIIqID8piAxEIwMxCMDEQjCIj//BiIDRo8Iogii/4MKwYVhEoESkDEiIGJEgYlfBgmDBIMEAYgSBiBIREAwSERH/8I7wPfuCO4I7v/8GBvAw3Bv/////gwN34RBuBg2BuBg2BuBg2BuEQbhEG+EQbAwG4MBtwiDaDAbhEGwMBuDAbAwG4GDYG8DBsDcDBuNwDRWDcIg2AwbA34RBv///CINvCINgMRIN/////wiG4DDeG+TEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq/zB4OLAP8rBxWDisHlYOKxb5WLTFgsMWiw18LDOnjPxZoxadDOgsLAtLAbKymVhsrDZWG/LAb8w2GywGysNlgNFgNGFwuBQuWnTZLToFFpisLJsFp0Cy0voFAQLFZkMCAQwIBCsC/5WBCwBCwBCwBCsCeVgUwIBCwBDEwEMCAQrAhgUClgCFgTlgCGJgJ5gQTGJwKWAKYFApgQTGBQL5kY0HMjQYnAhWJvKwIWAIVgQrApYAhWBPBgECIEBgE/8IgXhECQiBAMCkcDEwEwMCAQGAQIhoIhsGBsIhvgwN//PkZN4irgr2AAOVqiUThegAnCtMgwNwiG/8IhuDA1hENhENgYbKYHb2IBhoNhENAwN////8IhsDKZS////8IhuBhspgc0KQRDWEQ3///CNf4GAIMDAwgAwAAwhAwAwYAIgwiHBgAMAYGAAGHv///CIBqBqESDEIgRYGoGHBiDEIgGoGgMAYgxgwgxCIETwYFYMCoMCuDApBgU8DCoU//gY3G//wYFOBhUKBEKQYFfBgV8IhSEQoBkYK8IhT/wMKhXBgUCIU4RCoRCvgYVCsDCp3A1SqAYFAiFP////gY3G1TEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVgwCAwCBEC///////8IgUIgWEQIBgUCAwTQMCAQDAoEhECAYFIwGaRMBotWAasdwH/KqBmhFgaKI4GRgKVpjCBTCBPMJHNMFMIFKwnlgJ5hUxhUwGWlpAMuMuWLTFpvQKQLQKLTIFJsoFIFFZb/8woQwoT///MIF8rC+WAphAphAppgpYClgsmwBC6bHoFFpUCi0wGXFguWCwFLgUsgX6BZaVNj0Ci03//+EQKEQKEQLCIFAxMBcDAgFAwIBQYBODAKBgUCAYEAuDAKBgUCAYFAgRAngwCgwCwiBIRAmE//PkZN4iogj2AFdVxiUrhewAhOkwQIBgQ0gbOI4GRhOBiYCgYEAv////CIFAyMBQYBf///CIF8IgUDAgFBgEAwIRwMCCcDEwFAwIBf///CIEQGMDGEXCKBpCIDCEQDCAsYInDFQMMAuYSoTQMVfBlf//+DKfBgAiGDAQMIMIgCIQYADAEGAgwP////8ItgNu2/8DAAAiABgHhECBgQGEQARA8GAeEQIMABECEQIMAwYBBgCDAARA4GAAgYACDAARAwiAgwDhED4RABEBCIGBgDoH2dgZwCBgAP//BhX/+DCiTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqF1ww////////hdeGGDDBhwjeF102E2fTYAowMLjE0zTDfyyMYjEDJTwMLSwFi0/gQLoFIFpsegWmyBQsWlQL9ApNgtIWn8tMgX6BaBX+WmQL9Nn02f9NktIgUgWmwWl9Avy06bCBSbJaUtImyWkQKLTIFgYWoFFpAKFwMLzZgwAwvLTIFlpU2fQLQK///4Yf4YaF1sLrg2DAuuDYNDDQw4NgwLrhh4XXC64Ng3C60MNwbB4XWC64YcMODYPCJYDlMQBlwRLg2DOF1v/////PkZM0eKgz0AE+UuCnLFfAAk3Fsg2DAYX/ww//4YaGGDDhdbDDACFwMuXA2DADlygusDYOBsGhhv//wNU/CKQusF1oXX+F1wuuGGC6wXWDDBdbC6wXXhHv//4AHIFgC0BZAA4Ba4FkADwFsC3AtQAOcC0BYAtgAcAA9+BYAsgW4FvgWOABwC1oq+it4RT0VVG0VFGkVywo1/RWU4U59TlFb1GvRX////QK9Nj/9AtNn02fTY9NhNlAr/QK//TYTZLSJsIFemx///oF/5aZNj02U2C0yBaBfoFAS6bKBfoFVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQiA8GAO/4RAf//////wYA4GAO+EQHAwB4GDoB4GA4HQRB0BhlDIBpEAcBgPDIBgPAeDAHIFAYuLTpspsJsFpi0haRApAtAstIYKClgF/ysF/ysE/ysF//LAJ6plTlYC1ZUypmqtWVK1VqyplSFgBaqqcwAAVIqcrEBAAKmMBERCQhwD5iICIQEyABMAABBVGXF4gIA4DLAAWAEQgLVSsBaq1ZUv+YKClgELAJ////5YBP//LAL5WC+Vgn+WAX/LT+gW//PkZMIhLgrsAFt1yiD7FiB6A9qwmwViybCbCbCBSBabCBSBabPpsegWmwWn9ApApApNgCGBmEwWlLSpsf////hEHgYOB3////4GDkiBxMHhEdgYOB4GDwcBg4HW23gooFYHd/+BnAz8O8Vv//FaBm4rBWh38es2zbAtD1m2PVBqBrBqBrAF7AF3/5el84MkuHTgyy+dL0dRnEajMIyOn8RsZ5HGG/kbIpHIkYUiD0y2WctlZaWSwrKx6FZbxnL54ul04eLhw9Ol84dl86cOHT3Ipb5Z8qKpVx6/j0EkLctVTEFNRTMuMTAwgWQLQAHgLf/////4Fn+EQESEcIgInCIRW9TkrCzH0YIjjWtI+YeCD0woLCBQwsKRWUaRVCBZFZRtRtFRTlTlThRtAr0C0C//02E2fTZQK/0Ck2f9TlFRTlTlFT/9TlFVFRFb/9ThThynIQbWkAREue5S11rKdlkDEVABh61ExYPU+tOD4MQgcn4iwigivxFRFoXDcRQLhoiwioXCeAkFBcNiL8RURQBIKEVEWiLBcKIqIpEXC4QReIoIpCIKAQMxFAFAsIuIr/4YYLr//ww4XWBgwC64XX/hhgw3hhwuv8MNhhguvhdcAUYgaYTAAoWDDg2DQbBg//PkZPYe6gzuADd1uDKsBhBAe89cYYdGjtDT2hDmlD2leaOv9oX0OX/0NNLplNf8ewakNWGrTfTRpphNJtfaeh7T1/tStdtTpqN532lpX/1/kmQ5eaf2hoaV9paGleJAvd0rer2pWu1ar2vk56vVrV5Hj1Nop+/lfv5Zpkem5kX/2vtata2rq783nbvtbW6VjW6a2rq13+rO6VysV58K7tbp0ru6Vrtqa1a67tr6sau1ulYrnfa2v927Vrt21NSuN5X927/D4diAQANh4gEIfxB+IQG/D/4gDw/iGIRD+HRATEFNRTMuMTAwqqqqqqqqqqqqqqqqqiIEK/ititFX///8VcVuK38VsVhXBOQTpq/qm8QCAcBmIxgdfFZCHECpxFBFAuFEUC4cLhsRTEVEUDVoDQD+KrFYirFX+KwKoVgVUVUVeKwGrhWRWBViqFYDV4rMViKyGroauBg/A0YThVgNAEVQqw1fisis4quKxxWYrAatxWIqoqg1dFYxVxWIrAavAaAArIrAqoqhWYrIqvxWMVYrARCADhcKoVYavDVgqhV4qorIrHFWKuKxFViscVUVYasAaAfFY/4YcMNhdfwuuGGC64YfDDA2DwusANygbBwAxhAECwNg8MOF1hD4//PkZOkc4g7yBjd1sDNkDhgqYwtcYoUyiQ0NCkxQ0NCQkSIbGKIyRGEo5mUaNEhGKEHMmaGhI0UokORvMmZmZSZSiMZQkRnKKZkzRoSNCQpQ0NEZoaNFJkhh3KOUJEhIcoSJCQkIzlDlEjMDMyMpQ0JCQzNCRGaNCRISEZoZihoaIwlEHKNGiMzFEjRmSIwlHMyZmcyiGyMxRyhIkIxRSZokSEYGBkiRojAPESNGjQxvKHMmMoSKTJCQkIwlFKLDYWGhoZhYWAAUGBsAwsMDYUAcK4XDPhQVwwLAH/DfgHC6TEFNRaqqBgjwYI//wYI/8GCL///+DBFhERgwRcIiPAzGYgMRKIDcskBgjAxEIwYI4GiRwNEjhFH4MRwYjA0aOEUf8Io/BiLgxGEUYRRQij/BiKDEYMR+DBGBiMRQiIgYIwiIwYIgiIgMRGIDUSjhEReEREBiIRAwR/wYI/8IiP4MEcGCIIiOERH8GCIIiMIiIIiODBHBgjBgjwiIoREcIiOEREDBFCKiAxHJcIiMGCMGCLwYI8IiPhERgwRAwRAYjEUIiIGCP/AxGIgiIsGCL//4REYMEXhERBERhExhExAzyAZiEWDBGERGeKsVsVRVFcVwTnFcVxVgnYqipFUV//PkZPkcfgzeAFaVxDgUBgAgatvIYrgnYqgnQJyK4riqK4rwTsVor4rQAjABAgnQritFSKoqQTsE5C1haxfF7F4XQtULSFqC1i4LwWkXIWkXRdF+LwqAnME4iqCdwToVuK+HAERWAkAlgJB0OB3Doc8OYc8VCsVgIB3DuHAERUAkAkHMOBwOAIisO4dwEAEAEg6AkAl4CeHA4AkKhXioBIOiv8OB3F+LgWkXxeF8XouxcF0XBeF8XBdF8XhdAdouC8AEsXYWsXOKsVBU/FaKmK/FTxXFbFUVPiv/8VfxXitVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVAXX/8MN/wwwYf//DDBh4Yf/+DYODDfCIFAwKBQiaANFgUDAgFAwIBcADwFuBY/At8C1wLfgAdAtwLGBawLcC3AsgWeBYwLX4XW8LrBhgiFgMlhYLrhh4XWhdb8MOGGhdcMP4YaF1gw8LrwuvhhoYYLrYXWDDBdcGwfC60MN/ww8GwZ4XXC64GZQsF1wbBnDD4XXg2DcLrBdaDYPhhgusF1uGGC64YfhhoNg0LrQwwYcMNC62F1/g2DYXW4XXC6+GH8DTIW4YeB/wR/wjwR+DP/y06bJaRAtAtAtAs//PkZNwY2grqBFW1xDhTRegABLBstL6BRaVAstN5aYtN/psIFf5aQtIgWgUWk8tImyWkQL9Avy0qbKbKbJaf02f/0CkCy05adAsC3K7+mx5aVAv0C/TZ8tOmymwB2pspsFpPLSlpy0qbCBSBXlpk2E2E2C0paUtP6Bfpslp0CkCy0ibJaZAosWQLLTJsemwgUmz6BZaYtOgUWmLTpsJsoFJslpPLT+mwmz//6Bfpsf6BSBSbCBXoFeWk9NhNhAr0Cy0/+WnTZ8tJ/oFf6bP+myWn//8tMmz/lpf//////8sPTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBgJwiCYMBP//gwE//////wiCAMEgkIggIqIDKpUCIIgwE8IzA4j+EYhGAZMIyDJA5gGRhGcIyDIhEQiIGAgwIRDwiAGAAwYMHBghGAZMGRCMhGYRgGRA5gIyDIwZPBk/wZIRmEY/gyOBxIMgIzCMgcTgwRBgjwYJBgngwTwYJhEQBiBGERMIrwOouAxAgGCQYIhERhEQDBGDBAREgwTCIgGCQYJgwSDBHwiI4MEAwSBiRHCIkGCYGJEQiI/Bgn4REYREeBiBIH6XhERhETwogoy04mpZibFmJuWYmx8n//PkZN4ZrgrkAFZUyDcjofgAA9qc0HafZ8HwNrjaG3xtjaDtJwTo+D55Ow7fxNRNSyLPlqJsAr/lmA/FmWYm5acTQVgTkVQTnBOQTgVxVBOBVFWK4J3FUE7gBABOwToVQTsVhUFcVRXBOhUBORWiuKkVYrCqK+KoqgnQrAnEV+K8E7FQE5xWBOQToVQTsVRW8V4qRUFYVgTsVhXioKgrCqKwqAnYqCtBOhUioK+CcisK8VRUFSKnirFQVBVFcE6FcVoJwKoqCrFXFUE7gnAqiuCcQTsE7xU8VP8VYrgnYrCuTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqn3/l/J/8vHL5f/BhwCETgGpIDOATgEIOFoDcHzgEIDgC+pG7eve1S/6tat7rXupDXSStWoIpGS4TSMQNIySMwpIyAaRkkZ8GJGdBtbwYkZ63tCKRkoIpGWDEjLCKRmEkjOvsEUjJOsIpGa6bOrgxIzsEkjIGJGYUkZVKCKRmqoDkgEjMJJGSYMSMAikZJ3qhp0dq9ru3X1I36FujPbXuxwKbr//waABfg0AC6DUDUDXBqBoAmQawJiGrhqDUGoN//PkZL8USgKcAAblrroTgfQAbhtQAag1QawaYNIAuQa12Lv9si7F2NnXa2Vsi7i/DZl2tlL9l+vL8tlUTUTUTUYQDIBlGUAyifqJKJqJ+p5Mf/U7TETEU7CxkxVO1PKdqeU8u4vq2ddnrsbM2Zs/tl9s67V2NlbIu5sgaA1Q14ExAmAaA0BrDVDXhpgTPDQGuBMA0gTKGgCYgTHDQGrDUGgNcNQaw1hoAmcNIaRIAtALVEgC1gteI8FpBaBIAtcRwkAWgFpBaILVBaIkAWgRwjhIiPEeDXwa/4NUGr+DRwaKBgX/8IhP//wiF8GBMGBP/wYEhEKEQmEQuDAoGFTAwLgwLhG/4MvCM8GSDJCNwZQOXg2DwbB8MPDDhhuGGBsHhh8Lrf4MCQYFCIUGJgiE8GBQMIFhELDDhdaGHhdYGwaGGDDhhuDYMBsHg2D8MMGHBsH8GwYDYMhEKEQgMCeDAsIhAiFBgQIhAYFhEKDAkGBMIhYGEC4GFCBELgYUKDAuEQsGBQMKEwiEBgUGBcIhQYFwYFAwgWDAoRC8GBAYE4RCgwKEQvhEJgYUIBhQkIhAiECIUGBIMC4RCgwJCIUGBAiFgaYLwiEA5cGXCNhGBGwZAw4Ng0MPBkqNqcoqorlh//PkZP8cygrkAFI0wjo7lfAAjhq4SnPor//psoFemygWmwWm/0C0Ci05adApNn/TZQLU5RU9FRFVFdTn1OFG1Gywv/UbUa9Ff0VoFgCwBbAtQLUCzAtgAchHAN8ImAbgBvwDd4RwjQDeAN8I0ImEQEQAbwRgiQjBHhHAN0A3vgG6Ab/CIhEgG5AN6EQESAbmEYI4RABvYRoRABuYRgDehEQiAiIRABvcA3QiQDfwjwDfCICPCJCJCJ4RwiYRwjBEwDehEYRgDfCNCOEQEQEcI+BagAd4FrAscCxAswLfwLAFgC1wLNVMQU1FMy4xMDBVVVVVVVVVBlBkwO3wZAZMIz//////+DJwO0IwI0DsA7cGUI34Rn4RgMuEZgywZQjAZP/hGAcmDKEYDIB28GQGQGXhGgcgRoMgRoHYBywZAZYMmBygyQYFCIUDChQYE4MCgaYJ/gwKEQsGBAiEBgXAwgQLrhdcGwcGHBsGA2Dgw4YYGwZC6/hdYMMF14YcLrYYcMPDDhdYGweF1oYb4MCwYEwYEgwJBgTCIQGBIRC/BgQDCBcIhAMKFhEKDAsGBQYFAwgTgwKDAoMCQiEgwIBhAnCIUGBQiFwiEBicIhAiFhEIgIoBooGieDPA+4GeDPCP//PkZOobXgrkAEY0jjazieQgBKKIBGgyBGhGhGgyAdoMmEaDIB2gyhGwZYMsI0GSDIEaDKB2QOWEaDKB2hGgygcoHYBygdkDtgygcngyAyhG4MgMgRgRmDJCNBkA7QjAZIRoRoMuByhGgyAyAyhGwZYHKByAcgMgRoHIEbCNCNA7fCNA7AZAO0GSEYEaDLA7cDthGgyAyAyQjAOwGUIyDKEYEaEYEYEaEbA5AZQZAZAZIMgRkGXBlBkCMgyAyQZYMngcmEb8GUGQIyDIBywZAZOEZhGBGwO2EbwjcI3hGYMqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqquDqz8GMDQIvBj///+DGDEGAMAifBj8IuEThFCIEQGPCLwiQYBFCKESDCETBhhGAZGEZ4MjgcSEY4GoRQigxCIEQGPCKBiBrgxwiBEwMIRAY4MQNMIkImDEGIRYMIRYRAYhFBjwYwNQYgwBgBh4GAMQiwYgxA0gahFBgBjgYBFhFhFCKEWBgEWEUGEIgMQYQMYRAMQigxhFBh4GkIgRIRYRAY4RIMQYgYhFA18IoMQYQihFhEgwhFCIDEGIRQieBiEUIoRQYhEwYDAFwGrBog0waAaQawacGsGiDQp9MZMVT3piJjJjK//PkZOYZBgjoaUJQ0DprofQgbhq0dep71PqeU69TpMdMVT6n1OlPKdJjpiKdFZkxlPKdJiJj+mKp/0xFPBoAmYaw0BpwJhDSBMQ1BqAmIEzDSGgNXDRDRhp+GsNMNAEyAmYagJkBMA1BpDXAmECZhoDXhqAmYawJjgTICZBrDSGsNAExDVDQGqGgNHDWBMIaQ0BrAmcCYgTHAmIEzDWGgNYaOBMw0BqDSBMYaA04aA1hqwJhw0ATKGqBM8NYEz4aQJkGoNMNIag1+GsCY+BMQJlDVw0cCYfDXw1ho4aQ0gTCTEFNRTMuMTAwqqoD37wjuhHf/////hGf////hHf/gycEZwRn4MnYMncIzsGTwOdOA507A507hGeEZ8GTuDJ4Rn4HPn4Mn4RnhGcDJwM3YM3gzdBm6DNwR3QjvA927Bm//Bm7Bm/Bm8GbgZvBm4GboR3gzeEd+DN8GbvBm6EZ+Bzp4Mn4HOnBGfA588IzsDnTgZPCM8Iz+EZ/CM4DnTgOdPBk8Iz4RJwGTidBi7AycTgiT4RJ8GE6ESdhEngZPJwGTieDCcESfwYToMJ3AycTwiTsDJ5OhEnwibwYb+ETdwibwibvCJuwYb/4RN/Btf/jYGyNv8bHLUtSzE0/LQBW//PkZPQcHgjQAFKVrjfDmgAge1eMLITcshNy1LX8si0LUTQtCyLQTUteWQmvLItSz4mgmnTJops0umEymDSPsnR9HwfB8k7Pvn0fAvwtcLXF/F+L4vQtQWuFoC0BaReF7AeBfwtcXBdF4XheFwXAtAui9C1haRdi6LwvirgnUE6FcVBVisKgrCvioK+KoqiqAhh3AQFXhwVYrFYCWHMOioVAI4dFWHPDgCAdDgdDmHcBIBEO+HRWAiKsBMO4dFQCAdATw6HBWHBWAgHBUHMOf/gICsOCoV4qw7+KxWHA6KhVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVC11Fz1+NP+/Xkqpr9OfuhQ6lZNWf+XsZc/si+KNoOj/Ntai9j7IISgZAklTqQhjToNTeQoreRdaSDODWvYAVFaWWkQmVuZPP8bRUzq896vc+XS6mm5gnnW7JLnV4z9N5XnW4k86x+uyHyxnWkmdborzraff2SvOtvljOtjd/5XRW8MivOsry/K3gUzrFPS1eFTOttTsul1+lLGdbV3c53h51mdbK7xPOr1SpnWlM63kedZnV4XPK86onnW7myrnWTmRTOqascoabXd/L+yuzS95dv1efjhl92ntYyTuIb6wuWRZFmWRa//PkZOcb/gqMACDf1LTLofggA9qc/gKRZiblqWYm3E24moSQnR9BJj6JwfBaFqWZZFoWvLUshNPxNuWn6bTZHgozRTSaNAY5oGjFQVgTkE6FUVorioK8VBXBO8VRUioAhxVioK4qAnIrYrCqKsVRVBORXBORVFcVcVwTgVBUBORUisK4rCoKwrxXFYE4FYVATjFcVhX4rcVBVFQV4rxVFSKwqCpFcV+K8VhXFYV4qivFUE4FaCdivBORUBOfBOgToE6FUVYqisKgqCtxWFbFQVxXisKgqRU4qioKuKwqCvxVBkH/4Mgf4Rg4RgfgxZBizhFYEVuDFvhFbBi3CKyEVsGLf/4MgAxaDFoGsWYMWgaxYBrFngxaDFnCKwIrAYswNas+DFgRWYGtWYMWBFZgxbgaxbgxZCKwGLIRWgxZCK2EVmDFmDFgMW4GtW8IrAYtBi3Bi0GLAYsCK0IrQit4MWeEVgRW+DFsI9cDW9AYtgxZhFaBrVgMWgxaDFvCKwIrIGtWhFaBrFuEVvBi3hFZA1i0IrYMWYMWAxaEVkGLAisCKzBizCK0DWrIRg+EYIRgQjABkHwODABkDhGDwODBgyAEYIRoRvww4YcKILYKILfhRg5htjY4OQbQ2hNAH8su//PkZP8cRgjWAFAUYjwDofQAi9pcJry1E1LUsuWvE2E0LQTcB+E2LMTctQFEEcWnFYVwTkAI4rRWFYE6BOhWwToBBAQgnIrisETANwIiAb/COEQEbgG+EcA38A3wjhGCMEeEaEeKoJwK4J2KoARBVBOIJ1FWKoJ0CcCuCdRWFcV4rioK4rAnYJ2K0V8VYr8E4xWFUVBVFQE6FXBORWFSKorxVFcVwToE5wTvBOoqwToVIJziuKwJxAQgnUVBUgnAqQCaCdxWirFaKwrRWFcE7FfFeK4rgnIrAnYrCoKoqgnAqCrip4qgnCr/////8Iu8BjvP4Ry5/8Izggc4Zw4RnD/hGcP8GThBk4eDJwgycIMnDwjOD4MnBA3eu9hF3kGO8gx3vBjvAN3jvMGO8CLvAY72DHeAbvXe+DHehF3kGO8gbvHeBF3oG713gG713vgx3oMd5BjvAi7wGO9A3eu8BjvMDd470Iu9wN3jvQY7wGO9wN3jvIRd4Bu9d6Bu9d6DHeAbvHewi7yEXecGO9BjvQN3rvIG7zykGO9A3eO9CLvYMd6EXegx3gG7x3kDd470Dd472DHewY7yDHeAKomwmhZFkAof8tCy4m5aCbcTUswFYsy0/LQTX9NBqBgJgYaY//PkZPcaTdCuAFgWlkI0DfQAe9r8Jxz6CShr8++JsArgjxNBNC0LQsyyLMsgRxallyyLIsi0LUTUtS0AVwFPia8si0LMTXiacsxNizLMTYTcsi1LMsy0E2LUsuJqJvxNyy/E1LMteWgm4mpZlkJuWRZFmWnLQTfgncVATkVcVQTsVIqQToVxWFeK4rwTmATCsCcAnQJyKoriqKwrxWiqKoqwToVRWBORWBOBVFSKgq4qAnAqAnArRVgnIJ3FYVQAgCriqK4qYqivBOsVoJwKgJ3FYVBWFfBOIqCoCcivipxUFSCd4qRV4rCvFaCc/BOhW8VxWFUVhX4r1eX/+DHgaYMOEX/CJgwwYQY8GODH/wYf4RAiQiAxCKBj4GAMYRQiwYcGEGMIoMfhECIBgEXAwCJhEA1BjhF+BhCIDEGARYGoRAYgxCLwYeESEUGMDEIoGAMAiAwBiBrCJ8GMGGEWEUGIRYMAYAxCKBiBgBqDDA1wiBEBiDAIsGIMANANMIoMAYhEBh4GMGMGARfAxBj8GAMANYRAYBFAwCIBhgYhEwNQMYGIRAMAiwNYRQi4RQYwYgahEBiBqBgESEUIqa6Z6bTBpGkmUwmkwaZpJlNCkifmkaaaBymgm0wmRPxSDTTa//PkZOYYTgboZUAQIkCEFgAAe898YTZpJtMJhNilphNdMJhMGgmemDSNJNmkaX6aNJN9MJhMc0E2mzSNJMpg0umU2mDS5oJlNJtNJnpg0DSTBoml0wmzTE8TRpGgm00mkzzRNNMJg0jQTSb/NFNdNGl02KTzRTfTPTSbTKZNLphNJpNmgmUymkwaaaTKZ/TSYTBoJr/ifptMpr9MJlNptMpg0kymumEwmf+mEwmOmkymTT5ppv80eaHTCYTHTSaNBNJtN80/0yaBoJo0k2aPTPNA0OaSaTJoplMJv9MgBAB4MBUGwbwVwUBkFAYDAU4NBoMBqhAELk//h/y1/vz6/6zMnEglwqnIsVSHBzAMMIqXiLgxS8ucoLCKl7VwipeupwYpeAxS8Z22hSl4U+qE1L2goKUva1GUJqXqwkpeAxS81IQpS8smBqXql6E1LyEVLxdEJqXoSUvAmpeJhFS8rpH3CKl6EVLxPWFKXgDUvVL1LCal4kuDFL2EVLxFlPClLyEVL2FKXhdwYpeswGpeqXkGKXqLAxS8wYpeqWk8KUvATUvQYpehJS9Bil6yoUpegipeZT2x1vN5NR2X3KrRuXjFmaS0AUCyE1BHflmWZacTYsvy05ZgAIs+WQCqJoWZ//PkZOwZ+gaYBgbm6EQMAfQAe9r8ZCbiaFkWv5ZibialoArlryyDtCSnyfR8hrE7PpNmiaIxDTGKafTJalqJoJoWQm4mnLUtSzE1LUsxNyy4mpZlqJpy14mgD8WpagKvLIEcJuWnLItBNhNhNxNgH8tSyLMTflmA/iaCaFqJqWf4mxZFmCdCvFWKwqivgnQJzFfwToAIwqgnOKgqCoK4J2KwqisKwJwKwqCqKgJwK4rYqirgnIJ2K8VhVwTmKorYrioK4JwKwrRWFQE5FUE6BOwTgV4qYqiuCdAnYqAnMVBVFUVATkVBVirioKoqCviuK8VwTjxWFfivFUVxXBOcVuKvFaKoqiuCdeEW3Bjb/gxvhFvCLYGN8GNwi3CLf8DbtuEW//CM7+DG+EW+DG8DbNgi3CLfA2zYItwY3gbZuDG8GT/Bk+DJ+DJ/hGdCM+EZwMnQZP8GT8GToRngc6dBk4IzwZOBk8GTvhGdBk+DG8Dbt8DbtgY2CLbBjYGNwi2A2zYDbN4RbhFtA2zcDbNwNu3CLaEW4RbeEW2DG8DbNwY3BjYDbNgY3A2zYItwi3CLbgbdvA27YGN/CLaDG4RbgxsDG4Rb8ItsI7oR3cGb00m0wmTT6aTZoJgUpMc0kwaa//PkZNcYqeLUAAAUHjw8DgQAe88cYTXTXNBpXiQdfLVpLJoaCSJs0TQNAbRpJpDWleaGlDmlfQ9fQ7tBZoa0IeOw3Ccq44TcHgrufDVzQNA0Om0wmDTNE0EymkymumU2mU0aSY6ZE8NFMmiaaYNDptMGn+aJpdNptNps0OmU0J50wNtMGmmEz/zQTJpppNplMJlM9M8FAYCoKAAApgqDIMACwAQbBsAMGQAQaCkGg0GgyCkGeCgNABwAAUgrwA+CoAQNAeHCAOAeAyIQHBwgDg4QYDAGgMEEOEAeA0Q4DxAHh0PEMGYMBsFQYDPgoDMGQV4NBqryAZfhGfwjMDl4Rv/wjcGT/4R/CPBH//hH4H3gzv4M7A+/gzoR4GdBnAf+DPBnwj4M7BnwivA1QIpCKcIpgaqDFgaqBogMWBqgGqgxQinA0XBi8IqEUCKBFcD7/CPwj0I+DPA/8GfBnQZ8I+EeCPwZ4R6EfhGcI0GSDIDJCNCMBkgdsIwGQDkBk4HIEZgy4RoHZwZQjcDtCMgcoRgRoRgHKDJBl4RgHIDKDIEYEaEZgyYMoRsIwGQGQIwGUGUI3A5AZMI2EaDLBlwjQZQjAjAZQoqIqqN+pypx/qNIqoqqNKNKcqchwGrCAPqN//PkZOsaCgjiBUZRnkhEBfAgw9tw+iu1RUqp2qNUNalOVG1GkV/U58sLU48sLLCiwFU4hAYA+qQQgasVhVIYQNWKwmAKpvasNoHIDm4OQHIDlGwNgbH4D+JuWQm4mhZFoJsWgm4I4TcbA2xtA5ODnGyNoHJ+NgHKDl/LMBXLUtS04mvLQteAqCaCbFoWQmha8bQ2Acg2ht8bI2RsjaGyNrjYGwNvjbByja/GxFYE4ipBOIrwTiK4J2KuK8BAK4rAnAJwKkE4FYE7FUVgEIqgIRVBO4qRXFQVBVBOMVwCcE5itBOoqAnQqCpBOIrxVBOoJ0KwJxgnQrCuKsVBXioCcCqCdAnYJyKsVYqipBOgjwiAj/8InhH4RMIkIioAC4RiJCMRP////CNk//Blkv4M6F8I9C/8GWT/8I2SwjZOEbJQZZIGWShGyYMsnwj0P///CPQ/hGyQRsn8I2SCNkgOyVkoMsnhGyQMslCNkoMsl4MsnhGyXCNk4MsmEbJ/wZZP8I2SA7JWTgyyQMiKDIieEYiAcRIihGIkIxFwZEUIxEA4iREgcRYihGIoHESIkDiJEUIxFwjEQIxEwZEWDIihGIoRiKEYiHcYJRIr9kzDmO5cIaApXE/NA0TTTKZGym/0//PkZMQWjdCsAwAWCsQ8Cfwoe89cyaXTKZACgKxsmybQFQCyPQPUbRtA9x6QAoegHKmRtClpk0RSkwaCYE/GyaaZ6ZFJTaaTCbTabTBomgmk2mxS0x0waSaTI2gcgOcT0T5MiedM9M9NCfCeGgNhMJlNJoT1MdNJhMjaNPptNGkmhtpnmgmv+KQmRSE0aaY6ZTKZTRoJg0U0aBopg0emU1/xPzTTaa5o80DRTZoJs0TRNEUhMikJs0P0x0wmkwmUymkwaKb5pppNJg0OaInhpGgmeaSbTBp9N/ptNJo0DTNAbOCkGAwGABgA4NgwAAAMAPBgAQKAyDAZgoCkFINAABWAEDAUBTAABgMBTgqACDcGAAQYDAUqLUlVt///+Bj4MIRcGH/hE//hEwY/wi8GPBj8GH8IgRcIv4RYMQi+DAIsIsIn8GHCLCJCJ/BhBgBpgwwifhFhEhF/gwCIDAGIMIMAMQYBFhFBgDH4GAMQiQNAYAwwYBECIAMIAMAAiHBgAMIAiAIg4MABgABhADAhEAGAARCBhCEQhEIMABh6EQAwIMABgCEQwMAQYD4MDCIcGACIQiHwYGDAhEOEQ4MAENB8hJD7PsnXJ0fZ98+D6LItQR3PgnZHmgPYYRopk0xj//PkZMkU/gLsKkITrkL0CfzIetvgJtNdNGkmkwCPLITf8s+WpaFmApAjgFUsyz49jSTCaGMmkyaRZlkJsWpaiagKBZlmWomh8c+CdcnROj4Pk+Akh9E6DsJ0fJ8c+OTs+idk4J2Tg+j7Pr8nB9nwfAa59k7598+D74Sk+eEkFQdDmKsOhwBEVYCeAiAmAiHcBEV4CYCIWmCHF6FqC0haRcF4XYvxfF2LwvC+FqC0xcC0C/FwLSFoF0XBfi7C0xei8LwvcLQLoWoXheC0BaIWoXBdiNiMY6cZ8RkZxnjqOojAz4zx0HUdBGozjoMw6iMjpxdi+L4uC5F/xd/haIui/bZ/+DGBp4RYMQYgw8Ivgw/CJ4RfBh/hECKBgEUGODH8InhFwY4GoMcIgRIMcInCIBrBhCIESESBp+DEGARfhEA1gxBjBj4RAYQYgxgYwiYRcIgMAiAwBjCJgYAawYYRQMQMAYhFgagYhEA0AxA1A1CJBhBgEXwMQNAihFhFAxwYAwgaYMPCJA1hEBiBrwYQiwYwiBFwYhFgxgawihFCLA0gYAwCKESBoBpCJ4MIRcGOEVB9ALR8BJj7/PonB9HyEoJwfZ9E4Dt5OeTnlqJtxNAH7nwfHPonJ8E759E6PoJI//PkZOAWKgjoZUAQYka0Ffgge9VcfZOCdE7J0To+Cc8JWTo+D7J0EqPoO0+T5PsJSfJ9n0TkJUfJOeTknPPo+z6J2Ts+ycE759/k7Pg+z5J2TonBOeTkJUTg+T5DtJ0Tvk5Pjk5DXPg+idH2HYfR9E6PgnR9k5JyfZ9cnR9cNYJSfROidE6Ps+Cdn0fB8E6DtPs+CdHwfH5OAlR8nyfB98+SdE4J0ff5OidH2TknfPkJMfYSg+Cd8+D6PsnP/JwTk++fYSQO0+D5J0fZ8HwTjn2AWDgdAL8ApALQCkO8GACwMgyAVBiAVhzwY4BeDIMgFMOh0ArDgc4BeAV4cgFsOhz/wP225HGw7wCsO4M8AqHP/+DEGQ7/8OgzgFoM4Bf4MhwO4BT4cDmHcGfDnw78GcVhUFTFXFeKoqYJ3isKuKkVgTsVoqCsKwrCoKsVQTqKorYWoXhfxeF/xdi58XOL4WmLnFYVQToE4FXiuK0VwTnFQVRVFcVhU4JzFfDgdhzBnDuHfALgyDAMQZBgGQCgBUAoDAMh3BkAsDMGcGAYgxBn+HAC0ArwCwMAS5adAry0yBSBfoFBVaKqKwVUVrRXUa9FUOEqVUjV3ySPLkvkzlNlNn02E2S06pvVKWACECpW//PkZN8VDgj+zymq5krb1ewAxJvkqe1XysDVFSqlVIo2o0ispyFVoqKNIrKcqNKcKcFhSjaKiKyKhYWiv6nCnCKijajSnPorKNKcKcqcIrqNoqKNqcKNoqKNKNqNKcIqKN//orf6BSbKbKBSBXlp0CvQKTYTZ/0C/LTxFxFoigioigCLC4cRYRWItEXC4cRcI0IoFwwXCiKwjQXC8LhRFcRcRQRSFwoikRcLhxFRFguHiKRF8E7FYVhVBOgCYVRUACKKgqgE0E6ACJFYVoJ0CcgnQrAnMVwTgE6ioKoRwDdhHhG4RARgDcCMEaEYIiAbwRIRuESEcIwRwiYRwjQjBEgWoFuBa4FngWkIQQigwhEwigx/CL/4RfCKEQGP/wYiEUwYHwYGDAwYAGA4RCEQBEGB0rCNcGU4RrBlcIsGGDCESBiEWDCBhCIEWBiDAGHCKEUGEGEGMIgMAiwigxCIDADQGIRfCIEQDXgYYRfBgBoESEXwY/CJCKEQIsGIRODEGIRQYgw8IgRYMMGAGGDEDGDAIoMcDQIkGMGGBrgwCKDAIsIkDUDWDGDDA1hE4RQMQYgwBhhFBhBh4MAMYRMIoRAiAxBjhF4mhZFpxNBNy0LQTUTXhKglR9FqWpaAP5Zi//PkZNYXkgTkGEJwlkXcDfQAe9r8bCa/k5JwTriacsizBHE6CSH1w7efHLPgjuJqWnLITYTX8tRNAH/ialqJuJuWZaFkCO4m5aE7J2TonB8E559nyEnJyfB8FmJrxNxNhNS1E3LT8sxNC0E0LTlqJuWQm3E15ZiaFqWRZiaCagP5aCblkKoqCsCdioKoqwToE6FcVwAhRWBOIrCpFbgnEVRVFUVIJ2K4rAnIqioKgrcV4riuK0E4FcVQTsVxUBOoJ3FUE7itFYE7FYVRXFUVwTkVoqAnYJxBO4rReF4XYWsLWLoui4LwuC9AdsLQL0LQA9C8Lgvi6LguBahfFwXAtIvQQ4vCqKwrxX/8E5xXit4JwKzBnwj+DF+F1guvBiQYkDRIR8I/gz8Gd4R/wYsGLBi8I8DPBneDPBnwZ/8I8DP8I8B/0Gd+DPA+8I/+Ef+DOgzvwj4R/hHoM+Ee4M4D74M+Ef/A/7gfcDPBn4R7BnfCPgz4M7Bngf8DPwjwR6B/3CPwj0Gfgz+EfBnhH8GfwioRQGIBqgRUDVAYoGiBFcIoBqoMWEUA1UDRYRUIqEUA1WBooGiAaqBogRUGJwigM8I/gz+DOCPwj/Bnwj3BnBHgZ4M4I+DOhHhNCz5aiaCb//PkZM0YugrgAAASBEUEBfQAe9rclmWompZ8shNyzLMsy1LMBUAfhNxNicBJCcE5J0JpyyLMTcBVLXloCO5aCagKACiAqflqWYmvE3E3BHlmArFnxNRNC1LUBS5aFoWhZFmWR8k5CTnxz4PonZ8E5Pg+j4LUshNQH4TYtSzLMshNBNhNSyAViyE0FQE4FYVoJ0CcRUgnYqisKoJxFWAhiuKgrCtFUE7FQE5iqKgqRVFWKorwTsVxVFYE7FTFTBOxVgnAqRXBOPisK4BOK0VoriuK0E5BOxUivFcE5FYE5FQVBXFQE6FQVBVFYVxWioCcCoLovi4LoWiL0LSL+LouBaIvBahdi6LoWgEMFoC1hacXxdC14uipiqKn8VPFbiqKsVb//Bm/+EXgx4RdhFb///hE1/8GLP//CKwIrQjoGa/wPewZqEdYM1wZqDNAetgzWEd8GagzYM2DN4M1wjoI7Bm+DNhHcD3rA9awZuEdwZvCOwjsGaA964M1A978I7hHQR0DNge98I6hHYR1wZrBmwPWgPWwZsI7wjqB63COvgzQR3BmwZsGaget8D3rCOgZoGa4R1gzYM0EdwZsI6CO+DN4R1wZsD3oGaBmwjqEdAzXCO/4R0DNAzYR0WgI8TQT//PkZL4XFgTcAE6Tekf8EfQAe9t8YTXiagKwCsJuWXLMTUtC1LMTT8TYTUJP+fAdomomoD8JuWoCgWoI7iaFkJqJqfZ8hrk4CSE5Pk+Cdk5PgnBOT7JwTg+uWZaiaCbcsgFAsy0LPlmJsWYmom5ZFmWpaibiaAjy15ZFkWQm5Zll+JsJqJvy1E0CThJz65OQlJ8H2TknZOT759k6J3z4PgTQTcsy0LITflmWfLUsiyLITYTcTT8syzLQsi0LMEcWZa8tSyE1LTibibFqWYI/8shNCyE1LQsy1LUTUBTLLloWXLUsiyLUtBN+JqJvy1E05Z8TcsxNeWn/LTnxydHwfZ9n1ydk4PsnHJyfR9E4JwTgnB8k4588nB9cnR8c+D7PjxV4q4r8VsVgTgE4/itFShX/xV4rirxVFWKoq4qfxX8E6xVxUBOYrCtwTvwTj/xV8E5/irBOsVuKwqRXFTFQVorCrFf/xWioKwrCtioCcxUFUVAToE4FUVxWFQVhUBO4rgnUVIJyKkVgToE4ipFUVoq4qisKsE64qCoCdxUFUVxXFUE78VxWFQV4qiuKgqiuK4CCK2KoqirBOATsE4FWK4qxVFUVhVFYE4gnIriuCcQTiK4rCoCdCtirBORUiqK2//PkZLAWsgzuADQNNkZj/fjIe9r8K/FXFUVwSE5aiaAKgmhaFpxNQkp8n3z5PsJOGsffLQsyyE1LItS1E1Af+CPLMTUTfibFmJoWQmxanzydHwTsnASknBaCalqWom5ZcsxNyc8nASsnHDt59BrhJgkpOicBKg7D7JyfZ8E5Pk+Cd8EeWXE0LQsiyLQtSyLIsi0LUTYsy0E3LITQshNiyLUsiy4I78shNy0LMVcE6ipgnArRVgncE4wTsVIrCqCcCtBOYrwTgE7iuKwqCoKwrcE7BOQTqKgqiqFpBEC1gPYD3F0X4WoLTF0Xxei6FqC0BaAtQWgXxdwtWFqC0haBW/FQVRUBOBUFcE6ioCcAnEVRX4rYrxWFUVBViuLsXgtAuC6FoBDBaYvi7F8XxexdF8XhcFyI//gx//CJBhgxhEwY/+EXwYgx8ImDH8GPhE8GPhEwigwhFwNQNQNfhE+DGDAGHCIBrhEhEBh4RQMAY/gYBFBhhEAxCIDCEUDEDHBiEUIoRQY+DCBp4McGEIgGgMcGIGMGIGIGgRQYgxCKBiBjBgDGESDADWBgEUDEIuDADWBpBiEUDEDDgYgwBgDEDQDUGIGgRAYQYAxCKBhCKEThEBgBiEUGIRQMQiQiwNAY//PkZKwWNgjoZUAQREakFfQAe9t8YMfwi4GBaFoJsWpaFlyyBHctCzE25ZiaFoAocsy1E24Sk+idk6LMTYTYTQsyyLUtCyLQTUswFYJMGuTg+CdHwErPotAFAsuJtxNCz4m4mvBHiafloWZZ8YppBqzTNI0jTNBMpg0jTTZZFqWfE3Af/xNf+WomhZ8suWZZCb8tC1LQtS14m/LQtBNhNOfR8hKCc8nHJ2EqCUE5CSHxydk6Pg+D7Ps+Sdk6LUTQTcTcTctSz4mwmha8TXlmJvyy5ZiaFl+WpZFoWZa8TQshNCz4mhalmJsWfLQsuWRactBNRNC1E1LLlly0E2PgJWfR8h2H2fJOSdnx+fXPs+T5PgNbnzz6Po+T7JwTk+z4PonROglJ84qCvxXxUirFX4q4qeCd1f8InCI/4R/CP//4RMI/CMEYI4RAR8I8IjCJ4REI/gG8ESEfCOERCP4R/+EaERCPCNCNCI4BvQjYRMHINobIOfjZBzDZG3xtja42gcw2PwcvG2Nng5+NgbY2wcn42htDYGwNrjYGwNsbX42vxscbI2gc3Bzg5Qcg2uNvjaGwNgbI2+Dl4OUbI2Qc42RsjbBy//g5eAboR4RwjQDeCP+EcI8IwBuwjwjBEBEA//PkZKoZMgrqADXt9EV8FfQAe9scG+EThEBGCMESESEbhEQjwjwjwjBHCIwiQDcCNCI/hHE0/LQBSLITf/lqWoSvk7LT8BWLMtRNAk58E7Po+CyLQTcsyyLUsi0Afi1LUTUTUtBNS05aFkWpZHzwkoSgnB9HwfQSsTYsizLQtRNRNgFf/8NcJWEmAWCdn0To+T4CUHyGtxNiyLT/lmJqJqJqWgmpZFqJsWgmwmwmwmv5ZiaibiactBNv/yyLTiaFkWZagKgCmJqWQmgmom3E0LTibAKfE0LLiuKgrYqipBO4JzFUE5BORXBOhVioKwqRWBOYJyKkE6BOIrYqCqCcxVxVFUV8E4FSCdcVgAgCuKkLTBDC6CHi+LwuRfha4uC+FpF8XQtAWgB2wtAWoXBchaBfwtQWnFSCdxVxXFUVhUFYV4rgnOK3wTiKir//1eDCsf//7/+wOYd///ei/f6lmiqGXpyOlCSRm+yP3UtDhFIzqBhwCFHAGFHABYGcAnAAMOAAYcAAw4BYKOAIROANgicAQYcABE4AAzgE4B+1wmcAwYcAK+sDOADgFLCJwAlWBnABwABnABwDWraETgEDOADgDBiRkgoJpGaP+64RSMoRSMGBiRkkwMSMlq7AxIy4//PkZJUYEgieBFw3fkL8FgAied8AROAAicA8DOATgAGHAAROAFwM4BOAGBhwADDgAGHANQUcAgicAYROAfgw4AIkbPNNNpo0TSNBNJgUs0l7lomEwmRSOaRp80zQFK4nvTInnTEGgwGwAwYmOmkyaInppJpMJg0k1+KUaaaTCb42U0mBsGiaSaNNNpo0OaKZNE0jTTSY5oGmaZpJrphM9MGkmDQTCZBzpg0OKR+mBtdMJobfTSbTfG2KSaBpGgaZomiaBomn02mOmkwmjSNPpjmmaKZNA0zSNFNCeClJkT40DTTCY5oJk0kyaJpdMppMdMdN80TR6ZTXTfNJNmimumem+aKZTKaTaaTRops0kwaZppk0+aSa6ZTKYTfTfTPTHTKa5omgmEyaJo9NmkaRp/pnmmaf6aNNMplMplMdMpv8TxMJlNplNJn9MdM1OM6hWa/EjiRiRiO/xIcSP+GgCZQ1+GvDRDV//4aP///4I8EwTwTBLwS/4AHgnBHBHgiwR4JgAgS4IwAYPA8ADg+AAAAFwfB4L4WADC2AGAGFwsFwuD2FgAcAPC+F/B8L4X/B7B4L4WwuD+AGDwXACAAC2D2AEFgfCwAAAAXB8LhcLeDwXCwPYPA+ACACD+AH4XwA//PkZJMVIgb2ejVLxkBMEgTIe898vwv4X/ACB/C4WwtgBg/gA4PA9gBeFhLRTXTRomkmP0yJ6J+mPy0NA0OvibNDQmfzTNNMjaFKNATxMiemiaRoGkmE2mkwmTRTHNBMGiaCZTSZTZomh0PaV9fX2hoX14kzSmOaCY5pJr80U0aPTfNFMps0jSNJMmiaSaTKb6aTKYNLphMpg0eaJoGkJ8aBoppMppMJg00xzTTabNFNJpNJpNpnpg0DT6bTRoppoJMWrSh/690NQ5paV5D2le/LND2hoQxDF/rzR1/r/aWhfaWleQxfXmheaevNDS0tLQ0ryGoch/X15D+vLy+0oc0ry/19DUOXuvIc0oav9oXkNX1/r3X18QCGHQGQHB8PiAPAaHgPDsBgcH+Hqv//+DJ0GNuEW4MbQY2wZO4Rn///4R34R3Qjv//8Gbv//8GbgZuwZvCO4GbsD37+Ed3A586DJ4Rn8DnToRn8GTsGT8GToRn4HOngyf4HOnBGeDJ0IzgjOCM8DnTwjOgydwOdP4RnYMncDbtwY2A27cItgNs3CLeDGwMbwY3CLaEWwRbQi3A27eDG0GN4G2bBFvA2zcItgY3A27YGN4G2bAxtA58/gc6eDJwHOnAyfCM7A588//PkZLMYngTSAFAUhEYcDfggw9V8DnzwOdOBk8IzuEZ4MnAyfgychsy7F3oE13Nl9sy7myrsL6qqOU5anCqkHqNDI3KVUTEU8GNU7U6gxyHKchyVV/Xa2Zspfds3rubK2VsjZmztk9djZi/TZV2NnXYu0vsm0yaBoDZNEbA2k0aKZNjmwbH/Nvm2bRtGyBVArD1G0bQPUevg9h6/+PRzZNkCrzZNgesegesermyPQPXzbHpNvm0PQPUPSbJs82TaHqAtj082h6DaNn8eo2DbHrHpNjj1m1zYHqNo2jYNnmwbPNgek2ja5sj0D1m0bJs80xtJlMdMCeps0U0meaaa6b5p/mmmU3zRTfNFN/pgHPzQNPmkaaaTXTKbTRoJk0zS6b/NBNdNJlNGj02aH6Z4IgAEEYJ4I+CMEQJcEUEXBOpHDX/w1Q0Q1Q1cNWGvw0Q0/hp/AmIaA0cCYhow0w1/w0hoDRhpw1w1BrgTLDXw1BrhrDQGgNQEzAmOGuGiGgNfgTHDQGoCZw1w0BrDWBMIEzDVDTDUGgNfAFwGjBrg1A1YNcGsAXAaQaABcBqg1g1QagaINYaoEyw1Bow1YaA1hoDSBMw1gTICYQJkGrDQGoNGGmGsNcNQawJkGuBM4aIa//PkZKAYngTsATQNQkKMFgDifh7AYagJkGsCZ+GkNWGiGsNAaYaOGgCYgTENQaw0Yaw1Q1Q0/hqw1BkAfmkaCb6ZTCY6bNBNLwmqGA5fzSTCb/lgwXOmMmMmTQ5pmkmUwmkymfzRTaZFJ6aNM002NrppMpg0kwKQmE2m0yKUaKaE95o9MJj9N9NJk0UymOaSaE/TabNNNmmmk2mU2aHTKZTCaNDjaTJoGimkyNvpk0TRTHTf6bTRopg001+mU0aXNBMjYNA0k2mjR5pfps0U100mUz0ym02mDRTHTaaTRpplMc0kz0ySA000mDSTKbNI002mzQTHTaYTf//NA0zQTBodNJk0UyKSaaZNJMprmkaP5oGmKUmEymUyaCbTHNBMJlN80DRNBMmkm/00mUwaZpprplNpvmiaJo80+aSa//TaY/6ZaH//wY4ReEX4RIMfwiAxBh/BhCJ/+ESDDwYcIn+EQIoMAiQYAw8IsGIGGETBj4MP4MQiAxhEAwAxAxBjBiEUIgMIMcDCDAGIMcGMDEGGBgEUDTwNfAx4MAiwiQYgwBgEUIgMIRAiQYhFwYAwBhA1CKDEIoGoGgMQi4MeDADGEQIkIgGMDCDAIoMAiQiAYwYYMQNQigwCJBiDEGAR//PkZJwV+gzoZUAQRkZsCfQAe9tcQYgx8GEGIMQiwMAY4MANAMcIoMSyE1E1/LMTUtCz5OD5PkJJz5Pk+uA/FqWRaib8TUTUTQtC05alqWYm4momgI8TYsxNCzE3LUtQFEsgFM+z6J0fB8nz+TsNcnB9BK+Tk+g7CdhJT6LTiaFqWYI7lqWoCvy05ZlnxNy0/LUshNBNvwR4moCj+Wv5ZlkJqWpalkCOE1E1LQsiyLITUBULLlqWZZlmJsWhZcsi1/4CiWpalkJqJuWvLXlkJsJpyy4mwm5ZlmJuWXLUTQteWgmgmwCsJoWfE3LMsiyLP8TTlkJuAolqJryzE1LTibCbloJuWhZFoWYmxZ8TcXIvxeC0i+FrF0B2i4L8LSL4uBaIDyCHF8XRfF6FqgiwtIuYWoXIrYqAncVvxVip8VIqCvUxPqtFbFf/4q/8V/8V/iririr8VATjxXipxWgnYq+KwqfFTFQVoq+KsVBW8VhUisKuK0VRXivFYE4FTBOhVFcVRV4riuCdCuCdCtwTiCcCqCcgnYqxWFcVIJwKsVxWisK8VxVgnArYqRWFeK0V4qgnQrgnYrfBOoqAnAq4J0CciqKviuK3BOoJyKsE4FUVoqisK2KwrAnArgBAFSK4//PkZJ0VagjyJgGtbkOkFfwAbh4AqRViuK4J0KgrCrFUVxVjOEeDQgjlcT4T40xtjaNI0uaI2QciGNJIl4kJZtCGIaSckIm6GL3TQ2zRTY2UwmjSNE0fxS02aY2BsJs0/+mzSE8TQpHTKZTaaG0aQpApZp/mmm+aHTfTCZGwNgUk0E0aRp/ilJlNJgT5MmkJ9zQNA0TQTH6ZG2mk0mk0mk3zQTKY/G3zQTHTabTBpGgmU0aKaTJpJpNJtMphNjYTfNE0emkymE2mEyaCbNBNfmkaJpdNJnpg0k0mDTTCbTaZTBp80k2aCbTfNE00yaCb6bTZoplMmmaKZTKaTJpmiaHTXNJNdMDbTab6Y6Z6ZNNMJhMJhN9NJrmim02m0ymU300aPTSa6Y//5pJpNdN/9NppxWxU4Jx/xWxU/xU4qcV/ipiuKwqxWFbioK/8VIqivFTwTkVgTkVor4JxFXxX8VcVxUFQE4FaCcwTvBOIqwToVuKwqCtFUVYqxXxWFeK0E7FQVYrwTnwTsV4rCqCcfFaCcRVFQE5gnAr4JyK4r4Jz4J0Koqip4rCvisKoJ3xWBOME7iuKgriuKgrAnAqgnArxXiqCcgnYJzFQVQTmAEIVYrwToAIYrwTiKkVQTkE5//PkZK4XGgzsADQNAkIcCfwAe898FXFTFYVxXxUFQVkzzS5oilg5TTTY2kyaJpJtNGgJ8aKaTQ2k2aCaNI0eaSYNJM/tKHEiQxfJG09MmgaSYTRppg0TRNNMJlMptMCfppNprmiaA2jQNLmmaRppk0jRFLNP9NJhMGmaQpZpJhNCkGkmE0J+mxSk0m0x02mjRTKbTCZ42EwaQpJpptNprmgaRpmim00J4mzSNM0kymkyKWmE0muaKYGwNjmgafTPNE0U0mUwJ7+mem01+J8mhSk2mjRTSb6aTCbNBM9MpjpjppMpk0E2mE2mE2mjSTfTaZ6YNFMcT1MpnprptNmim0wmE100aSaTRo9MGjzTTHTaaTfTSaNLpoFMAAFYNBQGwAvwAYM4NgqqkjaAN3d3d3etERNK5CZ/3Ctf8AaiAc/u7vaIn/+8XPv//+GDKv8W1/+AC8K4Yw+94xe940jgceOBwOcRaxGwH4EuNIjBfxazB8HhkwVjIAII/vDkjG/wAcJPeF5e98hNgSYLWMFvhZ73pX06aoehpmh01hMJtM9K3TKY9E10x+memvlIpZM9MUTCbShbUrtM+n5ophNZuXK+0wmemumMCemkmvc0Uwm/lJJlLe5oJZI0SyW6R0mE//PkZLcXlgrzECFvrEmMEfgAfh7k2aORpbTYUo9SBNsekGYNVKgqg6hrUXK4Q42DOwPWbILEzBSumEgkWJPU8S72G5wUuGDwguEKa1Q0UykS3Bn7FJNgg5qoEgpsGabBtGabZt7NrKCNgLYes1idmabBtm2bZsBRm0PQbF9mwPSPUBbMwzB6QojYM42ePTzbMwzR6TaNs1eBVNv81yDUJ2QYhJtD0m0PVe+x6T2M8HsbFwsh6B6D7HpugT2uZhO6HqZhmE7ISZhhkFNcghtmybBnnsD1Ho49ZtG2bZs5PVBc2EEepCaEHNjj1EJHq5smabZtmwbNEEPR+bJse9z2PY2T1SN0rdNJq6yXI06COvNJj9MGmkkGmUj7pI0TToNGlEsNEnCW10ymi5FtNFKpvps0kz0uW3aaTF00mTSzdNJu0KFYz1KjaGAhyoQCFGM//zFARgIUZ/oZpdCttay6M5drW1joSj6Ekk1b7J7R7aoQNlPrWBKLTTzOsGT5yYxLrtHTy2iUxEkES0HIBVD066VjGj31odPkkSjJtbWs6OIjKmlXHR9K5MTv5pdZolE10kk2lly74TFx5KTXeTGLrS6ExiucvJSSDUdXZm3NLn1rtYBCUEoRj77WOhCPc+g5//PkZJ8XPgzoAABMTrz8BfQyY9ONGxJULutaa1TE5LHxWEo+XecmMa3p0kqBCR6qOFaFUGpNJIIjqVi0ylBqJIkiSJIkmJj605EkSRJPetWAyVacmodBUVhGfrAZPF0AUrgRLNiqDU4VHo8h6HRObJJNdqlRBMFT0qdNE0WZhmay2tCuOY6oieWieianCnVSbzjd7SGhrLi6eUSeLcZTWqdML5PM50uOGJms9VqtYU6hrgrm4V0frUzTvYsiegR2FOkqUxSKdVCpmRCSkIAUZ4VPhqEKgFDU2VhUiIhUaIg0RAkTBYEjYBUbBMuCJgLAkCUBUinABgBE3/9EQqFRM0s0qzktk9ZFqqFC6RULE11JVDkd8Y1vVFOx9oUIpZ8Vnq5klkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";var du=t=>t instanceof Date,v4=t=>t==null;const x4=t=>typeof t=="object";var SN=t=>!v4(t)&&!Array.isArray(t)&&x4(t)&&!du(t),RN=t=>v4(t)||!x4(t);function w4(t,e){if(RN(t)||RN(e))return t===e;if(du(t)&&du(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const i=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const a=e[s];if(du(i)&&du(a)||SN(i)&&SN(a)||Array.isArray(i)&&Array.isArray(a)?!w4(i,a):i!==a)return!1}}return!0}const OW={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},LW={finder:!0,torch:!0,tracker:void 0,onOff:!1,zoom:!1},FW={width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",aspectRatio:"1/1"},VW={width:"100%",height:"100%",objectFit:"cover",overflow:"hidden"};function uf(t){if(t===null)throw new Error("Canvas should always be defined when component is mounted.");const e=t.getContext("2d");if(e===null)throw new Error("Canvas 2D context should be non-null");e.clearRect(0,0,t.width,t.height)}function BW(t){var e;const{onScan:r,constraints:n,formats:s=["qr_code"],paused:i=!1,components:a,children:l,styles:c,classNames:u,allowMultiple:d,scanDelay:f,onError:m,sound:g}=t,x=y.useRef(null),p=y.useRef(null),b=y.useRef(null),E=y.useMemo(()=>({...OW,...n}),[n]),w=y.useMemo(()=>({...LW,...a}),[a]),[C,I]=y.useState(!1),[j,V]=y.useState(!0),[R,_]=y.useState(E),A=function(){const z=y.useRef(Promise.resolve({type:"stop",data:{}})),Q=y.useRef(null),Z=y.useRef(null),[U,H]=y.useState({}),[ie,ne]=y.useState({}),le=y.useCallback(async(ee,de)=>{var G,me,Ee;if(!window.isSecureContext)throw new Error("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.");if(((G=navigator==null?void 0:navigator.mediaDevices)===null||G===void 0?void 0:G.getUserMedia)===void 0)throw new Error("this browser has no Stream API support");const Ce=await navigator.mediaDevices.getUserMedia({audio:!1,video:de});ee.srcObject!==void 0?ee.srcObject=Ce:ee.mozSrcObject!==void 0?ee.mozSrcObject=Ce:window.URL.createObjectURL?ee.src=window.URL.createObjectURL(Ce):window.webkitURL?ee.src=window.webkitURL.createObjectURL(Ce):ee.src=Ce.id,await Promise.race([ee.play(),new Promise(ve=>setTimeout(ve,3e3)).then(()=>{throw new Error("Loading camera stream timed out after 3 seconds.")})]),await new Promise(ve=>setTimeout(ve,500));const[pe]=Ce.getVideoTracks();return ne(pe.getSettings()),H((Ee=(me=pe==null?void 0:pe.getCapabilities)===null||me===void 0?void 0:me.call(pe))!==null&&Ee!==void 0?Ee:{}),Q.current=Ce,Z.current=pe,{type:"start",data:{videoEl:ee,stream:Ce,constraints:de}}},[]),he=y.useCallback(async(ee,de)=>{ee.src="",ee.srcObject=null,ee.load();for(const G of de.getTracks())de.removeTrack(G),G.stop();return Q.current=null,Z.current=null,ne({}),{type:"stop",data:{}}},[]),Ne=y.useCallback(async(ee,{constraints:de,restart:G=!1})=>{if(z.current=z.current.then(me=>{if(me.type==="start"){const{data:{videoEl:Ee,stream:Ce,constraints:pe}}=me;return G||ee!==Ee||de!==pe?he(Ee,Ce).then(()=>le(ee,de)):me}return le(ee,de)}),(await z.current).type==="stop")throw new Error("Something went wrong with the camera task queue (start task).")},[le,he]),Me=y.useCallback(async()=>{if(z.current=z.current.then(ee=>{if(ee.type==="stop")return ee;const{data:{videoEl:de,stream:G}}=ee;return he(de,G)}),(await z.current).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")},[he]),ue=y.useCallback(async ee=>{const de=Z.current;if(!de)throw new Error("No active video track found.");{ee.advanced&&ee.advanced[0].zoom&&de.getCapabilities().torch&&await de.applyConstraints({advanced:[{torch:!1}]}),await de.applyConstraints(ee);const G=de.getCapabilities(),me=de.getSettings();H(G),ne(me)}},[]);return y.useEffect(()=>()=>{(async()=>await Me())()},[Me]),{capabilities:U,settings:ie,startCamera:Ne,stopCamera:Me,updateConstraints:ue}}(),{startScanning:k,stopScanning:L}=function(z){const{videoElementRef:Q,onScan:Z,onFound:U,retryDelay:H=100,scanDelay:ie=0,formats:ne=[],allowMultiple:le=!1,sound:he=!0}=z,Ne=y.useRef(new kv({formats:ne})),Me=y.useRef(null),ue=y.useRef(null);y.useEffect(()=>{Ne.current=new kv({formats:ne})},[ne]),y.useEffect(()=>{typeof window<"u"&&he&&(Me.current=new Audio(typeof he=="string"?he:DW))},[he]);const ee=y.useCallback(de=>async G=>{if(Q.current!==null&&Q.current.readyState>1){const{lastScan:me,contentBefore:Ee,lastScanHadContent:Ce}=de;if(G-me<H)ue.current=window.requestAnimationFrame(ee(de));else{const pe=await Ne.current.detect(Q.current),ve=pe.some(rt=>!Ee.includes(rt.rawValue)),at=pe.length>0;let ht=de.lastOnScan;(ve||le&&at&&G-ht>=ie)&&(he&&Me.current&&Me.current.paused&&Me.current.play().catch(rt=>console.error("Error playing the sound",rt)),ht=G,Z(pe)),at&&U(pe),!at&&Ce&&U(pe);const Ft={lastScan:G,lastOnScan:ht,lastScanHadContent:at,contentBefore:ve?pe.map(rt=>rt.rawValue):Ee};ue.current=window.requestAnimationFrame(ee(Ft))}}},[Q.current,Z,U,H]);return{startScanning:y.useCallback(()=>{const de=performance.now(),G={lastScan:de,lastOnScan:de,contentBefore:[],lastScanHadContent:!1};ue.current=window.requestAnimationFrame(ee(G))},[ee]),stopScanning:y.useCallback(()=>{ue.current!==null&&(window.cancelAnimationFrame(ue.current),ue.current=null)},[])}}({videoElementRef:x,onScan:r,onFound:z=>function(Q,Z,U,H){const ie=U;if(ie==null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas is always defined.");const ne=Z;if(ne==null)throw new Error("onFound handler should only be called when component is mounted. Thus video element is always defined.");if(Q.length===0||H===void 0)uf(ie);else{const le=ne.offsetWidth,he=ne.offsetHeight,Ne=ne.videoWidth,Me=ne.videoHeight,ue=Math.max(le/Ne,he/Me),ee=Ne*ue,de=Me*ue,G=ee/Ne,me=de/Me,Ee=(le-ee)/2,Ce=(he-de)/2,pe=({x:Ft,y:rt})=>({x:Math.floor(Ft*G),y:Math.floor(rt*me)}),ve=({x:Ft,y:rt})=>({x:Math.floor(Ft+Ee),y:Math.floor(rt+Ce)}),at=Q.map(Ft=>{const{boundingBox:rt,cornerPoints:wt}=Ft,{x:hr,y:An}=ve(pe({x:rt.x,y:rt.y})),{x:Cs,y:hn}=pe({x:rt.width,y:rt.height});return{...Ft,cornerPoints:wt.map(Ns=>ve(pe(Ns))),boundingBox:DOMRectReadOnly.fromRect({x:hr,y:An,width:Cs,height:hn})}});ie.width=ne.offsetWidth,ie.height=ne.offsetHeight;const ht=ie.getContext("2d");if(ht===null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas 2D context is always defined.");H(at,ht)}}(z,x.current,b.current,w.tracker),formats:s,retryDelay:w.tracker===void 0?500:10,scanDelay:f,allowMultiple:d,sound:g});y.useEffect(()=>(I(!0),()=>{I(!1)}),[]),y.useEffect(()=>{C&&(L(),k())},[a==null?void 0:a.tracker]),y.useEffect(()=>{if(!w4(E,R)){const z=E;n!=null&&n.deviceId&&delete z.facingMode,_(z)}},[n]);const M=y.useMemo(()=>({constraints:R,shouldStream:C&&!i}),[R,C,i]),P=async()=>{const z=x.current;if(z==null)throw new Error("Video should be defined when component is mounted.");const Q=p.current;if(Q==null)throw new Error("Canvas should be defined when component is mounted.");const Z=Q.getContext("2d");if(Z==null)throw new Error("Canvas should be defined when component is mounted.");if(M.shouldStream){await A.stopCamera(),V(!1);try{await A.startCamera(z,M),z?V(!0):await A.stopCamera()}catch(U){m==null||m(U),console.error("error",U)}}else Q.width=z.videoWidth,Q.height=z.videoHeight,Z.drawImage(z,0,0,z.videoWidth,z.videoHeight),await A.stopCamera(),V(!1)};y.useEffect(()=>{(async()=>await P())()},[M]);const B=y.useMemo(()=>M.shouldStream&&j,[M.shouldStream,j]);return y.useEffect(()=>{if(B){if(p.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus pause frame canvas is defined");if(uf(p.current),b.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus tracking canvas is defined");if(uf(b.current),x.current==null)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus video element is defined");k()}},[B]),J.createElement("div",{style:{...FW,...c==null?void 0:c.container},className:u==null?void 0:u.container},J.createElement("video",{ref:x,style:{...VW,...c==null?void 0:c.video,visibility:i?"hidden":"visible"},className:u==null?void 0:u.video,autoPlay:!0,muted:!0,playsInline:!0}),J.createElement("canvas",{ref:p,style:{display:i?"block":"none",position:"absolute",width:"100%",height:"100%"}}),J.createElement("canvas",{ref:b,style:{position:"absolute",width:"100%",height:"100%"}}),J.createElement("div",{style:{position:"absolute",width:"100%",height:"100%"}},w.finder&&J.createElement(MW,{scanning:j,capabilities:A.capabilities,onOff:w.onOff,zoom:w.zoom&&A.settings.zoom?{value:A.settings.zoom,onChange:async z=>{const Q={...R,advanced:[{zoom:z}]};await A.updateConstraints(Q)}}:void 0,torch:w.torch?{status:(e=A.settings.torch)!==null&&e!==void 0&&e,toggle:async z=>{const Q={...R,advanced:[{torch:z}]};await A.updateConstraints(Q)}}:void 0,startScanning:async()=>await P(),stopScanning:async()=>{await A.stopCamera(),uf(b.current),V(!1)}}),l))}const UW=()=>{const[t,e]=y.useState(null),[r,n]=y.useState(null),[s,i]=y.useState(!1),[a,l]=y.useState(null);Xn(),ai();const{addPurchase:c}=Es();y.useEffect(()=>{Nt("page_view",{page:"Scan"})},[]);const u=async m=>{var g,x,p;if(!s){i(!0),e(null),n(null);try{if(!Array.isArray(m)||!m[0]||typeof m[0].rawValue!="string")throw new Error("Invalid QR scan result format");const b=m[0].rawValue;Nt("scan_qr_attempt",{rawValue:b});let E;try{E=JSON.parse(b)}catch{const R=b.split(":");if(R.length<3||R[0]!=="LOYALTY")throw Nt("scan_qr_invalid",{rawValue:b}),new Error("Invalid QR code format");E={userEmail:R[1],userId:R[2],offerId:"default_offer"}}if(!E.userEmail||!E.userId)throw new Error("Invalid QR code data - missing user information");const w=$t(ft,"users",E.userId),C=await Op(Md(Aa(ft,"users"),Jy("email","==",E.userEmail),Jy("id","==",E.userId)));if(C.empty)throw Nt("scan_qr_no_user",{email:E.userEmail,uid:E.userId}),new Error("No user found for this QR code");const j=C.docs[0].data();Nt("scan_qr_success",{scanned_user:E.userEmail,scanned_uid:E.userId,offer_id:E.offerId}),E.action==="redeem_reward"&&E.rewardId?(console.log("Processing reward redemption for:",E.rewardId),await o2(null,E.userEmail,E.userId,E.rewardId)):(console.log("Processing stamp collection for offer:",E.offerId),console.log("QR Data:",E),await c(E.userEmail,E.userId,E.offerId)),n(E.userEmail),e(!0),l(E);const V=await po(w);if(V.exists()){const _=V.data().purchases||0;let A="";if(E.action==="redeem_reward")A=`Reward redeemed for ${E.userName}! `,Nt("reward_redeemed",{scanned_user:E.userEmail,reward_id:E.rewardId});else{const k=E.stampsPerScan||1;A=`${k} ${k===1?"stamp":"stamps"} added for ${E.offerName||"loyalty program"}!`;const M=await po(w);if(M.exists()){const P=M.data(),B=P.purchases||0;if(A+=` Total stamps: ${B}`,E.offerId&&E.offerId!=="default_offer"){const z=(g=P.completedRewards)==null?void 0:g.find(Q=>{var Z;return((Z=Q.offerSnapshot)==null?void 0:Z.offerId)===E.offerId});if(z){const Q=((x=z.scanHistory)==null?void 0:x.length)||0,Z=((p=z.offerSnapshot)==null?void 0:p.stampRequirement)||5,U=Math.max(0,Z-Q);console.log(`Offer progress: ${Q}/${Z}, remaining: ${U}`),Q>=Z?(A+=" - Offer completed! ",Nt("offer_completed",{scanned_user:E.userEmail,offer_id:E.offerId})):A+=` - Progress: ${Q}/${Z} (${U} more needed)`}}else{const z=P.purchaseLimit||5;if(B>=z)A+=" - Reward ready! ",Nt("reward_ready",{scanned_user:E.userEmail,scanned_uid:E.userId});else{const Q=z-B;A+=` - ${Q} more to earn reward`}}}}Ye({title:"Success",description:A})}setTimeout(()=>{window.location.href="/dashboard"},1500)}catch(b){console.error("Error processing QR scan:",b);let E="Failed to process loyalty point";b instanceof Error&&(E=b.message),e(!1),Ye({title:"Error",description:E,variant:"destructive"}),Nt("scan_qr_error",{error:b.message})}finally{i(!1)}}},d=m=>{console.error("Scanner error:",m),e(!1),Ye({title:"Scanner Error",description:"Camera error - please check permissions",variant:"destructive"}),Nt("scan_qr_scanner_error",{error:String(m)})},f=()=>{e(null),n(null),i(!1),l(null)};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-20 right-10 w-40 h-40 bg-red-500 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-32 left-10 w-32 h-32 bg-red-600 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-red-900/30 sticky top-0 z-10",children:o.jsx("div",{className:"p-6 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(si,{to:"/dashboard",className:"text-red-400 hover:text-red-300 transition-colors",children:o.jsx(cc,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 text-2xl font-bold text-white",children:"Scan Loyalty QR"})]})})}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6",children:o.jsxs("div",{className:"w-full max-w-md bg-gray-900/80 backdrop-blur-sm border border-red-900/30 rounded-2xl p-8 shadow-2xl flex flex-col items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Scan a User's QR Code"}),!t&&o.jsxs("div",{className:"relative w-full flex flex-col items-center",children:[o.jsx("div",{style:{width:300,height:300,margin:"20px auto"},children:o.jsx(BW,{onScan:u,onError:d})}),s&&o.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"Processing..."})]}),t===!0&&o.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-green-900/50 to-emerald-900/50 border border-green-700 rounded-xl text-center shadow-2xl animate-pulse",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:"Stamp Added Successfully!"}),o.jsxs("div",{className:"text-lg text-green-300 mb-3",children:[r&&o.jsxs("div",{className:"mb-3",children:[o.jsx("span",{className:"text-green-400 font-semibold",children:r}),o.jsxs("span",{className:"text-green-300",children:[" ","has earned ",(a==null?void 0:a.stampsPerScan)||1," ",(a==null?void 0:a.stampsPerScan)===1?"stamp":"stamps","!"]})]}),(a==null?void 0:a.offerName)&&o.jsxs("div",{className:"text-sm text-green-400 bg-green-900/30 px-3 py-1 rounded-full inline-block mb-2",children:["Offer: ",a.offerName]}),(a==null?void 0:a.stampsPerScan)&&a.stampsPerScan>1&&o.jsxs("div",{className:"text-xs text-green-400 bg-green-900/20 px-2 py-1 rounded-full inline-block",children:[a.stampsPerScan,"x Multiplier Active"]}),o.jsxs("div",{className:"text-xs text-green-300 mt-2",children:["This scan added ",(a==null?void 0:a.stampsPerScan)||1," stamp",(a==null?void 0:a.stampsPerScan)>1?"s":""," to the user's progress"]})]}),o.jsx("div",{className:"mt-4 text-xs text-green-500",children:"Redirecting to dashboard..."})]}),t===!1&&o.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-red-900/50 to-red-800/50 border border-red-700 rounded-xl text-center shadow-2xl",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("div",{className:"text-2xl font-bold text-red-400 mb-2",children:"Scan Failed"}),o.jsx("div",{className:"text-lg text-red-300 mb-3",children:"There was an error processing the QR code"}),o.jsx("div",{className:"text-sm text-red-400 bg-red-900/30 px-3 py-1 rounded-full inline-block",children:"Please try scanning again"})]}),!t&&o.jsx("div",{className:"mt-6 flex gap-3",children:o.jsx(Te,{onClick:f,disabled:!t,variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500/20",children:"Reset Scanner"})})]})})]})]})},qW=new e7,GW=()=>o.jsx(r7,{client:qW,children:o.jsx(jU,{children:o.jsxs(Iq,{children:[o.jsx(R8,{}),o.jsx(s9,{}),o.jsx(J7,{children:o.jsxs($7,{children:[o.jsx(ts,{path:"/",element:o.jsx(Mq,{})}),o.jsx(ts,{path:"/register",element:o.jsx(ZC,{children:o.jsx(Vq,{})})}),o.jsx(ts,{path:"/login",element:o.jsx(ZC,{children:o.jsx(Bq,{})})}),o.jsx(ts,{path:"/dashboard",element:o.jsx(Kc,{children:o.jsx(Qz,{})})}),o.jsx(ts,{path:"/rewards",element:o.jsx(Kc,{children:o.jsx(Yz,{})})}),o.jsx(ts,{path:"/settings",element:o.jsx(Kc,{children:o.jsx(Kz,{})})}),o.jsx(ts,{path:"/scan",element:o.jsx(Kc,{children:o.jsx(UW,{})})}),o.jsx(ts,{path:"/users",element:o.jsx(Kc,{requiredRole:"admin",children:o.jsx(PH,{})})}),o.jsx(ts,{path:"*",element:o.jsx(kH,{})})]})})]})})});ZT(document.getElementById("root")).render(o.jsx(GW,{}));
